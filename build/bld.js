<<<<<<< HEAD
!function t(i,n,e){function r(s,h){if(!n[s]){if(!i[s]){var u="function"==typeof require&&require;if(!h&&u)return u(s,!0);if(o)return o(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var c=n[s]={g:{}};i[s][0].call(c.g,function(t){var n=i[s][1][t];return r(n||t)},c,c.g,t,i,n,e)}return n[s].g}for(var o="function"==typeof require&&require,s=0;s<e.length;s++)r(e[s]);return r}({1:[function(t,i,n){"function"==typeof Object.create?i.g=function(t,i){t.h=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,i:!1,j:!0,k:!0}})}:i.g=function(t,i){t.h=i;var n=function(){};n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],2:[function(t,i,n){function e(){c=!1,h.length?a=h.concat(a):l=-1,a.length&&r()}function r(){if(!c){var t=setTimeout(e);c=!0;for(var i=a.length;i;){for(h=a,a=[];++l<i;)h[l].l();l=-1,i=a.length}h=null,c=!1,clearTimeout(t)}}function o(t,i){this.o=t,this.p=i}function s(){}var h,u=i.g={},a=[],c=!1,l=-1;u.m=function(t){var i=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)i[n-1]=arguments[n];a.push(new o(t,i)),1!==a.length||c||setTimeout(r,0)},o.prototype.l=function(){this.o.apply(null,this.p)},u.title="browser",u.q=!0,u.s={},u.t=[],u.version="",u.u={},u.v=s,u.addListener=s,u.A=s,u.C=s,u.removeListener=s,u.D=s,u.F=s,u.G=function(t){throw new Error("process.binding is not supported")},u.H=function(){return"/"},u.I=function(t){throw new Error("process.chdir is not supported")},u.J=function(){return 0}},{}],3:[function(t,i,n){i.g=function(t){return t&&"object"==typeof t&&"function"==typeof t.K&&"function"==typeof t.fill&&"function"==typeof t.L}},{}],4:[function(t,i,n){(function(i,e){function r(t,i){var e={U:[],V:s};return arguments.length>=3&&(e.X=arguments[2]),arguments.length>=4&&(e.Y=arguments[3]),g(i)?e.Z=i:i&&n.$(e,i),x(e.Z)&&(e.Z=!1),x(e.X)&&(e.X=2),x(e.Y)&&(e.Y=!1),x(e._)&&(e._=!0),e.Y&&(e.V=o),u(e,t,e.X)}function o(t,i){var n=r.ba[i];return n?"["+r.Y[n][0]+"m"+t+"["+r.Y[n][1]+"m":t}function s(t,i){return t}function h(t){var i={};return t.forEach(function(t,n){i[t]=!0}),i}function u(t,i,e){if(t._&&i&&S(i.aa)&&i.aa!==n.aa&&(!i.constructor||i.constructor.prototype!==i)){var r=i.aa(e,t);return m(r)||(r=u(t,r,e)),r}var o=a(t,i);if(o)return o;var s=Object.keys(i),g=h(s);if(t.Z&&(s=Object.getOwnPropertyNames(i)),B(i)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(i);if(0===s.length){if(S(i)){var v=i.name?": "+i.name:"";return t.V("[Function"+v+"]","special")}if(k(i))return t.V(RegExp.prototype.toString.call(i),"regexp");if(q(i))return t.V(Date.prototype.toString.call(i),"date");if(B(i))return c(i)}var y="",b=!1,w=["{","}"];if(d(i)&&(b=!0,w=["[","]"]),S(i)){y=" [Function"+(i.name?": "+i.name:"")+"]"}if(k(i)&&(y=" "+RegExp.prototype.toString.call(i)),q(i)&&(y=" "+Date.prototype.toUTCString.call(i)),B(i)&&(y=" "+c(i)),0===s.length&&(!b||0==i.length))return w[0]+y+w[1];if(e<0)return k(i)?t.V(RegExp.prototype.toString.call(i),"regexp"):t.V("[Object]","special");t.U.push(i);var x;return x=b?l(t,i,e,g,s):s.map(function(n){return p(t,i,e,g,n,b)}),t.U.pop(),f(x,y,w)}function a(t,i){if(x(i))return t.V("undefined","undefined");if(m(i)){var n="'"+JSON.stringify(i).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.V(n,"string")}return b(i)?t.V(""+i,"number"):g(i)?t.V(""+i,"boolean"):v(i)?t.V("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,i,n,e,r){for(var o=[],s=0,h=i.length;s<h;++s)G(i,String(s))?o.push(p(t,i,n,e,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(p(t,i,n,e,r,!0))}),o}function p(t,i,n,e,r,o){var s,h,a;if(a=Object.getOwnPropertyDescriptor(i,r)||{value:i[r]},a.get?h=a.set?t.V("[Getter/Setter]","special"):t.V("[Getter]","special"):a.set&&(h=t.V("[Setter]","special")),G(e,r)||(s="["+r+"]"),h||(t.U.indexOf(a.value)<0?(h=v(n)?u(t,a.value,null):u(t,a.value,n-1),h.indexOf("\n")>-1&&(h=o?h.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+h.split("\n").map(function(t){return"   "+t}).join("\n"))):h=t.V("[Circular]","special")),x(s)){if(o&&r.match(/^\d+$/))return h;s=JSON.stringify(""+r),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.V(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.V(s,"string"))}return s+": "+h}function f(t,i,n){var e=0;return t.reduce(function(t,i){return e++,i.indexOf("\n")>=0&&e++,t+i.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===i?"":i+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+i+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function v(t){return null===t}function y(t){return null==t}function b(t){return"number"==typeof t}function m(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function x(t){return void 0===t}function k(t){return j(t)&&"[object RegExp]"===E(t)}function j(t){return"object"==typeof t&&null!==t}function q(t){return j(t)&&"[object Date]"===E(t)}function B(t){return j(t)&&("[object Error]"===E(t)||t instanceof Error)}function S(t){return"function"==typeof t}function A(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function E(t){return Object.prototype.toString.call(t)}function C(t){return t<10?"0"+t.toString(10):t.toString(10)}function M(){var t=new Date,i=[C(t.getHours()),C(t.getMinutes()),C(t.getSeconds())].join(":");return[t.getDate(),z[t.getMonth()],i].join(" ")}function G(t,i){return Object.prototype.hasOwnProperty.call(t,i)}n.format=function(t){if(!m(t)){for(var i=[],n=0;n<arguments.length;n++)i.push(r(arguments[n]));return i.join(" ")}for(var n=1,e=arguments,o=e.length,s=String(t).replace(/%[sdj%]/g,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(e[n++]);case"%d":return Number(e[n++]);case"%j":try{return JSON.stringify(e[n++])}catch(t){return"[Circular]"}default:return t}}),h=e[n];n<o;h=e[++n])v(h)||!j(h)?s+=" "+h:s+=" "+r(h);return s},n.M=function(t,r){function o(){if(!s){if(i.O)throw new Error(r);i.P?console.trace(r):console.error(r),s=!0}return t.apply(this,arguments)}if(x(e.process))return function(){return n.M(t,r).apply(this,arguments)};if(i.N===!0)return t;var s=!1;return o};var D,T={};n.R=function(t){if(x(D)&&(D=i.s.S||""),t=t.toUpperCase(),!T[t])if(new RegExp("\\b"+t+"\\b","i").test(D)){var e=i.T;T[t]=function(){var i=n.format.apply(n,arguments);console.error("%s %d: %s",t,e,i)}}else T[t]=function(){};return T[t]},n.aa=r,r.Y={"bold":[1,22],"italic":[3,23],"underline":[4,24],"inverse":[7,27],"white":[37,39],"grey":[90,39],"black":[30,39],"blue":[34,39],"cyan":[36,39],"green":[32,39],"magenta":[35,39],"red":[31,39],"yellow":[33,39]},r.ba={"special":"cyan","number":"yellow","boolean":"yellow","undefined":"grey","null":"bold","string":"green","date":"magenta","regexp":"red"},n.isArray=d,n.ca=g,n.da=v,n.ea=y,n.fa=b,n.ga=m,n.ha=w,n.ia=x,n.ja=k,n.ka=j,n.la=q,n.ma=B,n.na=S,n.oa=A,n.isBuffer=t("./support/isBuffer");var z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",M(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n.$=function(t,i){if(!i||!j(i))return t;for(var n=Object.keys(i),e=n.length;e--;)t[n[e]]=i[n[e]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":3,"_process":2,"inherits":1}],5:[function(t,i,n){i.g={"#noInternet":"Error: no internet connection","#httpReqError":"Http error %1 while requesting %2","#appTitle":"1g0: let's play go!","#cancelAction":"Cancel","#confirmTitle":"Confirm","#problem":"Problem","#ok":"OK","#yes":"YES","#no":"NO","#cancel":"Cancel","#close":"Close","#none":"-","#play":"Play","#load":"Load","#newGame":"New game","#myGames":"My games","#importGame":"Import games","#exportGame":"Export game","#downloadLatest":"Update from %1","#fromFile":"From file:","#selectFile":"Select file","#recentGames":"Recent games:","#fromText":"From copy/paste:","#fromTextHelp":"Paste game in SGF format, e.g. (;FF[4]...)","#invalidSgf":'Invalid SGF game\n(game starts with "%1...")',"#mergeDivergence":"Merge error: games diverge at move #%1","#archivedGames":"Archived games","#deleteGame":"Delete","#deleteGameConfirm":"Do you really want to delete this game?","#archiveGame":"Archive","#archiveGameConfirm":"Do you want to archive this game? (you can restore it later)","#showArchivedGames":"Archived games","#restoreGame":"Restore","#empty":"(empty)","#myGamesHelp":"Any game you create or load/edit will be added to this list","#settings":"Settings","#colorTheme":"Color theme","#setupDropbox":"Setup Dropbox","#review":"Study","#endStudy":"End study","#evalScore":"Evaluate score","#bookmark":"Bookmark on/off","#rewindAll":"Go to game start","#gotoLastMove":"Go to game last move","#prune":"Delete this variation","#pruneConfirm":"Deletion of variation %1 (%3 moves starting by %2)?","#resign":"Resign","#pass":"Pass","#undo":"Undo","#next":"Next","#nextN":"Next %1","#finish":"Finish","#accept":"Accept","#refuse":"Refuse","#resignConfirm":"Do you really want to resign?","#getLatestGame":"Get latest game moves","#retrieving":"Retrieving game %2 from %1...","#retrieved":"Game updated.","#syncGame":"Sync this game","#syncMyGames":"Sync my games","#syncStart":"Connecting...","#noCloud":"Not connected to cloud","#archivedGame":"[archived %1]","#remote":"[remote %1]","#uploaded":"Uploaded: ","#downloaded":"Downloaded: ","#alreadySync":"Already in sync: ","#synced":"Synced: ","#deleted":"Deleted: ","#archived":"Archived: ","#unarchived":"Unarchived: ","#undeleted":"Undeleted: ","#syncDone":"Sync completed."}},{}],6:[function(t,i,n){i.g={".cafeAuLait":{".menuBtn":{"backgroundColor":"#704f43"},".topMenu":{"backgroundColor":"#5c4137"},".btnInfo":{"color":"#483710"}},".neonBlack":{"body":{"backgroundColor":"#000"},".btn":{"backgroundColor":"#02192b","color":"#daebef","borderColor":"#5d80c6"},".btn+toggled":{"backgroundColor":"#380966","color":"#cad904"},".menuBtn":{"backgroundColor":"#0e4571"},".topMenu":{"backgroundColor":"#0b3557"},".statusBar":{"backgroundColor":"#c7cced","border":"#07b2ff 1px solid","boxShadow":"3px 3px 20px #537cc6"},".board":{"backgroundColor":"#002"},".mainControls":{"color":"#daebef"},".dialog":{"backgroundColor":"#0d0217","color":"#daebef","boxShadow":"#3fb 3px 3px 20px","border":"solid #b395d7 1px"},".dialogTitle":{"backgroundColor":"#0b3557","color":"#fffaff","textShadow":"#06b1ff 4px 4px 7px","borderColor":"#fff","boxShadow":"#00abff 3px 3px 20px"},".playerBtn":{"backgroundColor":"#5283ff"},".sizeBtn":{"backgroundColor":"#5283ff"},".boardImgFrame":{"backgroundColor":"#09132a","boxShadow":"#3fb 3px 3px 20px"},".curSize":{"textShadow":"#0a9da9 3px 3px 5px"},".gameList":{"border":"1px solid #8ea3da","backgroundColor":"#000"},".oneGame+selected":{"backgroundColor":"#2a4990"},".dropDwn":{"backgroundColor":"#000"},".inputBox":{"backgroundColor":"#000"},".devDiv":{"backgroundColor":"#5a3571","color":"#38cead","border":"1px solid #400ac1"},".devLogBox":{"color":"#000"}},".bottleGreen":{"body":{"backgroundColor":"#000"},".btn":{"backgroundColor":"#022b10","color":"#fff","borderColor":"#5dc677"},".btn+toggled":{"backgroundColor":"#380966","color":"#cad904"},".menuBtn":{"backgroundColor":"#146c43"},".topMenu":{"backgroundColor":"#0b573e"},".statusBar":{"backgroundColor":"#8ca197","border":"#2d8722 1px solid","boxShadow":"3px 3px 20px #537cc6"},".board":{"backgroundColor":"#002600"},".mainControls":{"color":"#eee"},".dialog":{"backgroundColor":"#071903","color":"#eee","boxShadow":"#3ff 2px 2px 15px","border":"solid #000 1px"},".dialogTitle":{"backgroundColor":"#0b573e","color":"#fffaff","textShadow":"#06b1ff 4px 4px 7px","borderColor":"#fff","boxShadow":"#00abff 3px 3px 20px"},".playerBtn":{"backgroundColor":"#107733"},".sizeBtn":{"backgroundColor":"#107733"},".boardImgFrame":{"backgroundColor":"#0c2529","boxShadow":"#3ff 2px 2px 15px"},".curSize":{"textShadow":"#0a9da9 3px 3px 5px"},".gameList":{"border":"1px solid #8ea3da","backgroundColor":"#000"},".oneGame+selected":{"backgroundColor":"#2a4990"},".dropDwn":{"backgroundColor":"#000"},".inputBox":{"backgroundColor":"#000"},".devDiv":{"backgroundColor":"#5a3571","color":"#38cead","border":"1px solid #400ac1"},".devLogBox":{"color":"#000"}}}},{}],7:[function(t,i,n){i.g={"confirm-delete-moves":3}},{}],8:[function(t,i,n){i.g={"server-url":"https://ig0.herokuapp.com/","dropbox-clientId":"gdap2n66j8rl89n"}},{}],9:[function(t,i,n){i.g={".cgos":{"useAreaScoring":!0,"usePositionalSuperko":!0},".chinese":{"useAreaScoring":!0,"usePositionalSuperko":!0},".japanese":{}}},{}],10:[function(t,i,n){"use strict";function e(t){this.pa=t,this.qa=null,this.ra=null,this.sa=null,this.ta=null,this.ua=null,this.va={},this.wa=null,this.xa=0}function r(t){return(t.length-t.replace(/;[BW]\[/g,"").length)/3}function o(t){return(t.length-t.replace(/\(;/g,"").length)/2-1}function s(t,i){return 0===i?"":", "+i+" "+t}function h(t){return t||0===t?" "+t:""}function u(t){var i=t.Ya(),n=parseInt(i);return isNaN(n)?n=19:i=i.substr(i.indexOf(" ")+1),String.fromCharCode(90-n)+"|"+i}function a(t,i){return u(t).localeCompare(u(i))}var c=t("./GameInfo"),l=t("./hh/getText"),p=t("./net/goSites"),f=t("./ReviewTree"),d=t("./SgfReader"),g=t("./SgfWriter");i.g=e;e.prototype.ya=function(){var t={};return t["sgf"]=this.za(),t["tagMap"]=this.va,t["serverStamp"]=this.wa,t["lastChange"]=this.xa,t},e.prototype.Aa=function(t){if(this.pa)throw new Error("Game already initialized");return"string"==typeof t&&"("===t[0]?(this.pa=t,!0):!!t["sgf"]&&(this.pa=t["sgf"],this.va=t["tagMap"]||{},this.wa=t["serverStamp"]||null,this.xa=t["lastChange"]||0,!0)},e.prototype.Ba=function(t,i,n,e){this.ra=new f(e),this.ta=e||[],this.sa=new c,this.sa.Ba(),this.sa.Ca(t,i,n,this.ta.length)},e.prototype.Da=function(t,i,n){if(!d.Ea(t))return i.push(l("#invalidSgf",t.substr(0,15))),!1;if(this.pa)throw new Error("Game already initialized");return this.pa=t,this.Fa(i,n)},e.prototype.Fa=function(t,i){var n=new d;return!!n.Ga(this.pa,t,i)&&(this.sa=new c,this.sa.Ha(n.Ia),this.ra=n.Ja(),this.ta=n.Ka()||[],this.ua=n.La(),!0)},e.prototype.Ma=function(t,i){var n=this.Ja(),e=t.Ja(),r=n.Ma(e);return r!==-1?(i.push(l("#mergeDivergence",r+1)),!1):(this.ua=n.Na(),this.pa=null,!0)},e.prototype.Oa=function(t){if(!this.ua||this.ua.join()!==t.join()){var i=this.Ja();this.ua=t.concat(),i.Oa(t)}},e.prototype.Pa=function(){return this.sa||this.Fa(),this.sa},e.prototype.Ja=function(){return this.ra||this.Fa(),this.ra},e.prototype.Ka=function(){return this.ta||this.Fa(),this.ta},e.prototype.La=function(){return this.ua||(this.ua=this.Ja().Na()),this.ua},e.prototype.za=function(){return this.pa||this.Qa(),this.pa},e.prototype.Qa=function(){var t=new g,i=t.Ra(this.sa,this.ra);this.Sa(i)},e.prototype.Sa=function(t){return t!==this.pa&&(this.pa=t,this.wa=null,this.xa=Date.now(),!0)},e.prototype.Ta=function(t,i){var n=this.va[t];if(n)return n;var e=i,r=this.pa.indexOf(t+"[");if(r>=0){var o=this.pa.substring(r+t.length+1,this.pa.indexOf("]",r));switch(typeof i){case"number":e=parseFloat(o);break;default:e=o}}return void 0!==e&&(this.va[t]=e),e},e.prototype.Ua=function(t){var i=this.Ta(t,"?");return i.length<=10?i:i.substr(0,9).trim()+"."},e.prototype.Va=function(t,i){this.wa=t,this.xa=i},e.prototype.Wa=function(){return this.wa},e.prototype.Xa=function(){return this.xa},e.prototype.Ya=function(){var t="",i=this.Ta("SZ",19);return 19!==i&&(t+=i+"x"+i+" "),t+=this.Ua("PW")+"/"+this.Ua("PB"),t+=s("mov.",r(this.pa)),t+=s("var.",o(this.pa))},e.prototype.Za=function(){if(this.qa)return this.qa;var t="",i=this.Ta("SZ",19);return 19!==i&&(t+=i+"x"+i+" "),t+=this.Ua("PW")+"-VS-"+this.Ua("PB"),t+=h(this.Ta("DT")),t+=h(this.$a("PC")),t+=h(this.$a("SO")),t+=h(this.$a("EV")),t=t.replace(/[\\\/]/g,"-"),this.qa=t,t},e.prototype.$a=function(t){var i=this.Ta(t);return i?p._a(t,i):i},e.ab=a},{"./GameInfo":11,"./ReviewTree":23,"./SgfReader":25,"./SgfWriter":26,"./hh/getText":68,"./net/goSites":80}],11:[function(t,i,n){"use strict";function e(){this.bb()}i.g=e,e.prototype.bb=function(){this.cb={}},e.prototype.Ba=function(){this.bb(),this.eb("date",(new Date).toISOString().substr(0,10))},e.prototype.Ha=function(t){this.bb();for(var i in t)this.cb[i]=t[i]},e.prototype.fb=function(t){return this.cb[t]},e.prototype.eb=function(t,i){this.cb[t]=i},e.prototype.gb=function(){return this.cb},e.prototype.Ca=function(t,i,n,e){this.eb("boardSize",t),this.eb("komi",i),this.eb("rules",n),e&&this.eb("handicap",e)}},{}],12:[function(t,i,n){"use strict";function e(){this.pb(y),this.qb=null,this.rb()}var r=t("./constants"),o=t("./Goban"),s=t("./HandicapSetter"),h=t("./log"),u=t("./Move"),a=t("../config/rules.json"),c=u.hb,l=u.ib,p=u.jb,f=u.kb,d=u.lb,g=r.mb,v=r.nb,y=r.ob;i.g=e,e.prototype.rb=function(){this.history=[],this.sb=[],this.tb=null,this.ub=0,this.vb=this.wb=g,this.xb=this.yb=!1,this.zb=this.Ab=null},e.prototype.Bb=function(t){this.pb(t.Cb,!0),this.Db(t.qb.Eb,t.tb,t.ub),this.Fb(t.wb),this.Gb(t.history)},e.prototype.Hb=function(){this.qb.clear(),this.history=[],this.vb=this.wb,this.Ib()},e.prototype.pb=function(t,i){this.Cb=t,t=t||"unspecified";var n=a["."+t.toLowerCase()];if(!n){if(!i)throw new Error("Invalid rules: "+t+"\nValid values: "+Object.keys(a).map(function(t){return t.substr(1)}).join(", "));n=a["."+y.toLowerCase()]}this.usePositionalSuperko=n.usePositionalSuperko||!1,this.useAreaScoring=n.useAreaScoring||!1},e.prototype.Jb=function(){return this.Cb},e.prototype.Db=function(t,i,n){if(this.rb(),this.qb&&t===this.qb.Eb)this.qb.clear();else if(this.qb=new o(t),this.qb.Eb!==t)return this.Kb("Size could not be set: "+t);return this.qb.Lb(this.usePositionalSuperko),this.ub=void 0!==n?n:.5,i=i||0,!!this.Mb(i)},e.prototype.Nb=function(t){this.ub=t},e.prototype.Fb=function(t){this.vb=this.wb=t},e.prototype.Mb=function(t){if(this.history.length>0)throw new Error("Handicap cannot be changed during a game");if(0===t||"0"===t)return this.tb=null,this.Fb(g),!0;var i,n,e;if(""+~~t==""+t)for(e=~~t,i=s.Ob(this.qb.Eb,e),this.tb=[],n=0;n<i.length;n++)this.tb.push(d(i[n][0],i[n][1]));else e=t.length,this.tb=t;return this.tb.length||(this.tb=null),this.Ib(),this.Fb(this.tb?v:g),!(e&&(!this.tb||this.tb.length!==e))||this.Kb("Handicap could not be set: "+t)},e.prototype.Ib=function(){var t=this.tb;if(t)for(var i=0;i<t.length;i++){var n=f(t[i]);this.qb.Pb(n[0],n[1],n[2]||g)}},e.prototype.Qb=function(){return this.tb},e.prototype.Rb=function(){return this.tb?this.tb.length:0},e.prototype.Sb=function(t,i){if(h.error&&h.error(t),!i)throw new Error(t);return i.push(t),!1},e.prototype.Gb=function(t,i){if(!t||!t.length)return!0;for(var n=0;n<t.length;n++)if(!this.Tb(t[n]))return this.Sb("Failed playing loaded move #"+(n+1)+":\n"+this.Ub().join(", "),i);return!0},e.prototype.Vb=function(t,i){return!t||this.Gb(t.split(","),i)},e.prototype.Tb=function(t){if(this.yb&&t.indexOf("undo")<0)return this.Kb("Game already ended");if(/^[B|W]?-?[a-z][1-2]?[0-9]$/.test(t))return this.Wb(t);var i=p(t);if(i.startsWith("pass"))return this.Xb();if(i.startsWith("resi"))return this.Yb(l(t));if("undo"===i)return this.Zb();if("half_undo"===i)return this.Zb(!0);if(i.startsWith("hand")){var n=i.substr(i.indexOf(":")+1);return this.Mb(n.split("-"))}return i.startsWith("load:")?this.Vb(i.slice(5)):this.Kb("Invalid command: "+i.substr(0,20))},e.prototype.Wb=function(t){var i=f(t);3===i.length&&(this.vb=i[2]);var n=i[0],e=i[1];return this.qb.$b(n,e,this.vb)?(this.qb.Pb(n,e,this.vb),this._b(t),this.ac(),!0):this.Kb("Invalid move: "+t)},e.prototype.Yb=function(t,i){t=void 0!==t?t:this.vb,this.zb=t,this.Ab=i;var n=c("resign",t)+(i?"-"+i:"");return this._b(n),this.ac(),this.yb=!0,this.xb=!1,!0},e.prototype.Xb=function(){var t=this.history[this.history.length-1];return t&&t.endsWith("pass")&&(this.xb=!0),this._b(c("pass",this.vb)),this.ac(),!0},e.prototype.bc=function(t,i){return this.xb?(this.xb=!1,t?(this.yb=!0,!0):(i!==this.vb&&(this.history.pop(),this.ac()),!0)):this.Kb("The game is not ending yet")},e.prototype.cc=function(){return this.history.length},e.prototype.dc=function(){return this.history},e.prototype.ec=function(){var t="";this.tb&&(t="handicap:"+this.tb.join("-")+",");var i=this.history;return i[0]=c(p(i[0]),this.wb),t+i.join(",")},e.prototype.Kb=function(t){return this.sb.push(t),!1},e.prototype.Ub=function(){var t=this.sb;return this.sb=[],t},e.prototype.ac=function(){this.vb=1-this.vb},e.prototype._b=function(t){return this.history.push(t)},e.prototype.Zb=function(t){var i=t?1:2;if(this.history.length<i)return this.Kb("Nothing to undo");this.yb=this.xb=!1;for(var n=i;n>=1;n--){var e=this.history.pop();!e.endsWith("pass")&&e.indexOf("resi")<0&&this.qb.fc()}return t&&this.ac(),!0}},{"../config/rules.json":9,"./Goban":16,"./HandicapSetter":19,"./Move":21,"./constants":51,"./log":76}],13:[function(t,i,n){"use strict";function e(t){this.gc=t,this.hc=null,this.ic()}var r=t("./GameInVault"),o=t("./GameVaultList"),s=t("./MostRecentlyUsedList");i.g=e,e.prototype.ic=function(){this.jc=new o(this.gc,"myActiveGames"),this.kc=new o(this.gc,"archivedGames"),this.lc=new o(this.gc,"recentGames"),this.mc=new s(this.gc,"mostRecentGames",5),this.jc.nc("myGames")},e.prototype.oc=function(t){return this.hc&&this.pc(),this.hc=t,this.hc},e.prototype.qc=function(){return this.hc},e.prototype.pc=function(){var t=this.hc;return t&&(this.hc=null,this.jc.rc(t),this.sc(t)),t},e.prototype.tc=function(t){var i=this.mc.getItem(t);return this.lc.uc(i)||null},e.prototype.vc=function(t){this.jc.rc(t)},e.prototype.wc=function(t){return this.jc.uc(t)||null},e.prototype.xc=function(){return this.jc.yc()};e.zc={Ac:0,ACTIVE:1,Bc:2,Cc:-1},e.prototype.Dc=function(t){return this.jc.uc(t)?1:this.kc.uc(t)?2:this.Ec(t)?-1:0},e.prototype.Fc=function(t){return this.kc.uc(t)},e.prototype.Gc=function(){return this.kc.yc()},e.prototype.Hc=function(t){return this.jc.Ic(t)},e.prototype.Jc=function(t){return this.kc.Ic(t)},e.prototype.Ec=function(t){return this.jc.Ec(t)||this.kc.Ec(t)},e.prototype.Kc=function(t){return this.jc.Lc(this.kc,t)},e.prototype.Mc=function(t){return this.kc.Lc(this.jc,t)},e.prototype.Nc=function(t){this.kc.rc(t)},e.prototype.Oc=function(t,i){var n=new r;if(!n.Da(t,i))return null;var e=this.jc.uc(n.Za());return e?e.Ma(n,i)?e:null:n},e.prototype.Pc=function(t){this.gc.Qc("interruptedGame",t.ya())},e.prototype.Rc=function(){var t=this.gc.Sc("interruptedGame");if(!t)return null;var i=new r;return i.Aa(t)?(this.gc.Qc("interruptedGame",null),i):(console.error("Invalid serialized game"),null)},e.prototype.Tc=function(){for(var t=this.mc.Uc(),i=[],n=0;n<t.length;n++){var e=this.lc.uc(t[n]);e&&i.push(e.Ya())}return i},e.prototype.sc=function(t){this.lc.rc(t);var i=t.Za();this.mc.Vc(i)&&this.lc.Ic(i)}},{"./GameInVault":10,"./GameVaultList":14,"./MostRecentlyUsedList":20}],14:[function(t,i,n){"use strict";function e(t,i){this.gc=t,this.Wc=i,this.Xc={},this.Yc=null,this.Zc={},this.$c()}var r=t("./GameInVault");i.g=e;e.prototype.$c=function(){this.Yc=this.gc.Sc(this.Wc,{}),this.Zc=this.gc.Sc(this.Wc+"~",{});for(var t in this.Yc){var i=new r;i.Aa(this.Yc[t]),this.Xc[t]=i}},e.prototype.nc=function(t){for(var i=this.gc.Sc(t,[]),n=0;n<i.length;n++){var e=new r(i[n]),o=e.Za();this.Xc[o]=e,this.Yc[o]=e.ya()}this.gc.Qc(this.Wc,this.Yc),this.gc.Qc(t,void 0)},e.prototype.rc=function(t){var i=t.Za();this.Xc[i]=t,this.Yc[i]=t.ya(),this.gc.Qc(this.Wc,this.Yc),this.Zc[i]&&(delete this.Zc[i],this.gc.Qc(this.Wc+"~",this.Zc))},e.prototype._c=function(t){return!!this.Xc[t]&&(delete this.Xc[t],delete this.Yc[t],this.gc.Qc(this.Wc,this.Yc),!0)},e.prototype.Ic=function(t){return!!this._c(t)&&(this.Zc[t]=Date.now(),this.gc.Qc(this.Wc+"~",this.Zc),!0)},e.prototype.Ec=function(t){return this.Zc[t]},e.prototype.yc=function(){var t=[];for(var i in this.Xc)t.push(this.Xc[i]);return t},e.prototype.uc=function(t){return this.Xc[t]},e.prototype.Lc=function(t,i){var n=this.Xc[i];return!!n&&(this._c(i),t.rc(n),!0)}},{"./GameInVault":10}],15:[function(t,i,n){"use strict";function e(t,i,n){this.ad=t||{},this.bd=i||{},this.name=n||"#"+o++}var r=t("./helper"),o=1;i.g=e;e.prototype.clone=function(t){return new e(r.clone(this.ad),r.clone(this.bd),t)},e.prototype.dd=function(t){this.bd=t},e.prototype.toString=function(){var t="{"+this.name+" - ";for(var i in this.ad)t+=i+":"+this.ad[i].toFixed(2)+", ";return t.ed(", ")+"}"},e.prototype.fd=function(t){var i=0;for(var n in this.ad){var e=this.ad[n],r=t.ad[n];r<0!=e<0?r<0?(e-=r,r=0):(r-=e,e=0):(e=Math.abs(e),r=Math.abs(r));var o;o=0===r?e>1?1:e:0===e?r>1?1:r:1-(r>=e?e/r:r/e),i+=o}return i},e.prototype.get=function(t,i,n,e){void 0===n&&(n=null),void 0===e&&(e=null);var r=this.ad[t];if(r)return r;if(this.ad[t]=i,(n||e)&&(this.bd[t]=[n,e]),n&&e&&n>e)throw new Error("Limits are invalid: "+n+" > "+e);return i},e.prototype.ya=function(){return JSON.stringify(this)},e.gd=function(t){var i=JSON.parse(t);this.ad=i.ad,this.bd=i.bd},e.prototype.hd=function(t,i,n,e,r){var o=this.ad,s=t.ad;i.dd(this.bd),n.dd(this.bd);var h=i.ad,u=n.ad,a=~~(Math.random()*o.length),c=~~(Math.random()*a),l=0;for(var p in o)l<c||l>a?(h[p]=o[p],u[p]=s[p]):(h[p]=s[p],u[p]=o[p]),Math.random()<e&&(h[p]=this.jd(p,h[p],r)),Math.random()<e&&(u[p]=this.jd(p,u[p],r)),l++},e.prototype.jd=function(t,i,n){var e,r=this.bd[t];if(r){var o=r[0],s=r[1];if(Math.random()<n)e=o+Math.random()*(s-o);else{e=i*(1+2*Math.random()*.05-.05),o&&e<o&&(e=o),s&&e>s&&(e=s)}}else e=i+10*(Math.random()-.5);return e},e.prototype.kd=function(){for(var t in this.ad)this.ad[t]=this.jd(t,this.ad[t],1);return this}},{"./helper":52}],16:[function(t,i,n){"use strict";function e(t){if(void 0===t&&(t=19),t!==~~t||t<3)throw new Error("Invalid goban size: "+t);this.Eb=t,this.md=new o(t,u),this.grid=new o(t,s.ld),this.nd=this.grid.od;var i,n;for(n=t;n>=1;n--)for(i=t;i>=1;i--)this.nd[n][i]=new s(this,i,n,a);for(n=1;n<=t;n++)for(i=1;i<=t;i++)this.nd[n][i].pd();e.qd=new h(this,new s(this,-50,-50,a),-100,0),this.rd=[e.qd],this.sd=[e.qd],this.td=[],this.ud=0,this.history=[],this.Lb(!1),this.vd=0}var r=t("./constants"),o=t("./Grid"),s=t("./Stone"),h=t("./Group"),u=(t("./test"),r.ld),a=r.EMPTY;i.g=e,e.prototype.clear=function(){for(var t=1;t<=this.Eb;t++)for(var i=1;i<=this.Eb;i++){var n=this.nd[t][i];n.group&&n.group.clear()}this.rd.shift(),this.sd.shift(),this.td.concat(this.rd),this.td.concat(this.sd),this.rd.length=0,this.sd.length=0,this.rd.push(e.qd),this.sd.push(e.qd),this.ud=0,this.history.length=0,this.Lb(!1),this.vd=0},e.prototype.wd=function(t,i){var n=++this.ud,e=this.td.pop();return e?e.xd(t,i,n):e=new h(this,t,i,n),e},e.prototype.yd=function(t){t.zd===this.ud&&this.ud--,this.td.push(t)},e.prototype.Ad=function(){return this.grid.Bd()},e.prototype.Cd=function(t){this.md.Cd(t);for(var i=this.Eb;i>=1;i--)for(var n=1;n<=this.Eb;n++){var e=this.md.od[i][n];e!==a&&this.Pb(n,i,e)}},e.prototype.Dd=function(){for(var t={},i=this.Eb;i>=1;i--)for(var n=this.Eb;n>=1;n--){var e=this.nd[i][n].group;e&&(t[e.zd]=e)}return t},e.prototype.Ed=function(){for(var t,i="Board:\n"+this.toString()+"\nGroups:\n"+this.grid.Fd(function(t){return t.group?""+t.group.zd:"."})+"\nStones in groups:\n",n={},e=this.grid.od,r=0;t=e[r],r<e.length;r++)for(var o,s=t,h=0;o=s[h],h<s.length;h++)o&&o.group&&(n[o.group.zd]=o.group);for(var u=1;u<=this.ud;u++)n[u]&&(i+=n[u].Ed()+"\n");return i},e.prototype.toString=function(){return this.grid.Fd()},e.prototype.$b=function(t,i,n){if(t<1||t>this.Eb||i<1||i>this.Eb)return!1;var e=this.nd[i][t];if(e.color!==a)return!1;if(e.Gd(n))return!1;if(this.Hd){if(this.Id[this.Jd(t,i,n)])return!1}else if(e.Kd(n))return!1;return!0},e.prototype.Ld=function(t,i){return this.nd[i][t]},e.prototype.Md=function(t,i){return this.nd[i][t].color},e.prototype.Nd=function(t,i){return this.nd[i][t].Nd()},e.prototype.Od=function(){return this.history.length},e.prototype.Pb=function(t,i,n){this.Pd(t,i,n);var e=this.nd[i][t];if(e.color!==a)throw new Error("Tried to play on existing stone in "+e);return this.Qd(t,i,n)},e.prototype.fc=function(){if(!this.history.length)throw new Error("Extra undo");this.history.pop().Rd(),this.Pd()},e.prototype.Qd=function(t,i,n){var e=this.nd[i][t];return e.Gd(n),this.history.push(e),this.vd++,e.Sd(n),e},e.prototype.Td=function(){this.history.pop().Rd()},e.prototype.Ud=function(){return this.rd[this.rd.length-1]},e.prototype.Vd=function(){return this.history[this.history.length-1]},e.prototype.Wd=function(t){t=t||[0,0];for(var i=this.rd.length-1;i>=0;i--){var n=this.rd[i];t[n.color]+=n.Xd.length}return t},e.prototype.Lb=function(t){if(this.history.length>0)throw new Error("Superko rule changed during game");this.Hd=t,t?(this.Yd=this.Zd(),this.$d=[],this.Id={}):(this.Yd=null,this.$d=this.Id=null)},e.prototype.Pd=function(t,i,n){this.Hd?t?(this.$d.push(this.Yd),this.Id[this.Yd]=this.history.length,this.Yd=this.Jd(t,i,n)):(this.Yd=this.$d.pop(),this.Id[this.Yd]=null):this.Yd=null},e.prototype.Jd=function(t,i,n){for(var e=this._d(this.Yd,t,i,n),r=this.Ld(t,i).ae(1-n),o=r.length-1;o>=0;o--)if(!(r[o].be>1))for(var s=r[o].Xd,h=s.length-1;h>=0;h--){var u=s[h];e=this._d(e,u.ce,u.de,a)}return e},e.prototype.ee=function(){return this.Hd?this.Yd:(this.Yd||(this.Yd=this.Ad()),this.Yd)};var c="0".charCodeAt();e.prototype.Zd=function(){for(var t="",i="",n=this.Eb,e=1;e<=n;e++)for(var r=this.nd[e],o=1;o<=n;o++)t+=String.fromCharCode(c+r[o].color+1),4===t.length&&(i+=String.fromCharCode(parseInt(t,3)+33),t="");return t.length&&(t=(t+"000").substr(0,4),i+=String.fromCharCode(parseInt(t,3)+33)),i},e.prototype._d=function(t,i,n,e){var r,o=(n-1)*this.Eb+(i-1),s=~~(o/4),h=o%4;if(e===a){var u=("000"+(t.charCodeAt(s)-33).toString(3)).slice(-4),c=u.substr(0,h)+"0"+u.substr(h+1);r=parseInt(c,3)+33}else r=t.charCodeAt(s)+(1<<e)*Math.pow(3,3-h);return t.substr(0,s)+String.fromCharCode(r)+t.substr(s+1)}},{"./Grid":17,"./Group":18,"./Stone":27,"./constants":51,"./test":81}],17:[function(t,i,n){"use strict";function e(t,i,n){if(void 0===i)throw new Error("Grid init value must be defined");this.Eb=t,void 0===n?this.od=u.ge(t+2,t+2,i):(this.od=u.ge(t+2,t+2,n),this.init(i))}function r(t){if(t===l)return"(BORDER)";if(t>=e.oe)return String.fromCharCode("A".charCodeAt()+t-e.oe);if(t<e.qe||t>=e.me.length)throw new Error("Invalid color "+t);return t<0&&(t+=e.me.length),e.me[t]}function o(t){return r("number"==typeof t?t:t.color)}function s(t){for(var i="",n=t.length-1;n>=0;n--)i+=t[n];return i}var h=t("./constants"),u=t("./helper"),a=t("./Move"),c=a.fe,l=h.ld;i.g=e,e.he="+",e.ie="?",e.je="@O",e.ke="&#",e.le="-:",e.me=e.je+e.ke+e.le+e.ie+e.he,e.ne=e.ie+e.he+e.me,e.oe=100,e.pe=-1,e.qe=-2,e.re=2,e.se=4,e.te=[0,0,-1,1,1,-1,-1,1],e.ue="-'?.:",e.prototype.init=function(t){if(void 0===t)throw new Error("Grid init value must be defined");for(var i=this.Eb;i>=1;i--)for(var n=this.od[i],e=this.Eb;e>=1;e--)n[e]=t},e.prototype.K=function(t){if(t.Eb!==this.Eb)throw new Error("Cannot copy between different sized grids");for(var i=this.Eb;i>=1;i--)for(var n=this.od[i],e=t.od[i],r=this.Eb;r>=1;r--)n[r]=e[r];return this},e.prototype.ve=function(t){var i=t.grid;if(i.Eb!==this.Eb)throw new Error("Cannot copy between different sized grids");for(var n=this.Eb;n>=1;n--)for(var e=this.od[n],r=i.od[n],o=this.Eb;o>=1;o--)e[o]=r[o].color;return this},e.we=function(t){return e.ne.indexOf(t)+e.qe},e.prototype.Fd=function(t){return this.xe(!0,"\n",t||o)},e.prototype.Bd=function(t){return this.xe(!1,",",t||o)},e.prototype.xe=function(t,i,n){var r,o,s,h=new e(this.Eb,"").od,u=1;for(o=this.Eb;o>=1;o--)for(r=1;r<=this.Eb;r++)null!==(s=n(this.od[o][r]))&&(h[o][r]=s,u=Math.max(u,s.length));var a=u,l="          ",p="";for(o=this.Eb;o>=1;o--){for(t&&(p+="%2d".format(o)+" "),r=1;r<=this.Eb;r++)s=h[o][r],s.length<a&&(s=l.substr(1,a-s.length)+s),p+=s;p+=i}if(t){for(p+="   ",r=1;r<=this.Eb;r++)p+=l.substr(1,a-1)+c(r);p+="\n"}return"\n"!==i&&(p=p.ye()),p},
e.prototype.toString=function(){for(var t="",i=this.Eb;i>=1;i--){for(var n=1;n<=this.Eb;n++)t+=r(this.od[i][n]);t+="\n"}return t},e.prototype.Ad=function(){return"object"==typeof this.od[1][1]?this.Bd(function(t){return r(t.color)}):this.Bd(function(t){return r(t)})},e.prototype.Cd=function(t){var i=t.split(/\"|,/);if(i.length!==this.Eb)throw new Error("Invalid image: "+i.length+" rows instead of "+this.Eb);for(var n=this.Eb;n>=1;n--){var r=i[this.Eb-n];if(r.length!==this.Eb)throw new Error("Invalid image: row "+r);for(var o=1;o<=this.Eb;o++)this.od[n][o]=e.we(r[o-1])}},e.ze=function(t){return t.split(",").reverse().join()},e.Ae=function(t){return t.split(",").map(s).join()},e.Be=function(t){return s(t)},e.Ce=function(t){for(var i="",n=t.split(","),e=n[0].length-1;e>=0;e--){i+=",";for(var r=0;r<n.length;r++)i+=n[r][e]}return i.substr(1)}},{"./Move":21,"./constants":51,"./helper":52}],18:[function(t,i,n){"use strict";function e(t,i,n,e){this.qb=t,this.Xd=[i],this.be=n,this.color=i.color,this.Ee=null,this.Fe=null,this.Ge=null,this.zd=e,this.He=null,this.Ie=this.Je=0}var r=t("./constants"),o=t("./log"),s=t("./Move"),h=s.De,u=r.EMPTY;i.g=e,e.prototype.xd=function(t,i,n){this.Xd.length=0,this.Xd.push(t),this.be=i,this.color=t.color,this.Ee=this.Fe=this.Ge=null,this.zd=n,this.Ie=this.Je=0},e.prototype.clear=function(){for(var t=this.Xd.length-1;t>=0;t--)this.Xd[t].clear();this.qb.yd(this)},e.prototype.toString=function(t){if(0===t)return"#"+this.zd;if(1===t)return this.Xd[0]+" x"+this.Xd.length;for(var i,n="{group #"+this.zd+" of "+this.Xd.length+" "+h(this.color)+" stones [",e=this.Xd,r=0;i=e[r],r<e.length;r++)n+=i.Ke()+",";return n=n.ye(),n+="], lives:"+this.be,this.Ee&&(n+=" MERGED with #"+this.Ee.zd),this.Ge&&(n+=" KILLED by "+this.Ge.Ke()),n+="}"},e.prototype.Le=function(){return this.Xd.length&&this.Xd[0].group===this},e.prototype.Ed=function(){return this.toString()},e.prototype.Me=function(){return this.Xd.map(function(t){return t.Ke()}).sort().join(",")},e.prototype.Ne=function(){for(var t,i=[],n=this.Xd,e=0;t=n[e],e<n.length;e++)for(var r,o=t.Oe,s=0;r=o[s],s<o.length;s++)r.color===u&&i.indexOf(r)<0&&i.push(r);if(i.length!==this.be)throw new Error("Wrong life count for group");return i},e.prototype.Pe=function(){for(var t,i=[],n=1-this.color,e=this.Xd,r=0;t=e[r],r<e.length;r++)for(var s,h=t.Oe,u=0;s=h[u],u<h.length;u++)s.color===n&&i.indexOf(s.group)<0&&i.push(s.group);return o.Qe&&i.length,i},e.prototype.Re=function(t){for(var i,n=-1,e=t.Oe,r=0;i=e[r],r<e.length;r++)if(i.color===u){n++;for(var s,h=i.Oe,a=0;s=h[a],a<h.length;a++)if(s.group===this&&s!==t){n--;break}}return o.Qe,n},e.prototype.Se=function(t){if(o.Qe,this.Xd.push(t),this.be+=this.Re(t),this.be<0)throw new Error("Unexpected error (lives<0 on connect)");o.Qe},e.prototype.Te=function(t){if(o.Qe,this.Xd.length>1){if(this.be-=this.Re(t),this.be<0)throw new Error("Lives<0 on disconnect")}else this.qb.yd(this),o.Qe;if(this.Xd.pop()!==t)throw new Error("Unexpected error (disconnect order)")},e.prototype.Ue=function(t){if(--this.be<=0)return this.Ve(t)},e.prototype.We=function(t){if(this.be--,o.Qe,this.be<1)throw new Error("Unexpected error (lives<1 on attack by resucitated)")},e.prototype.Xe=function(t){this.be++,o.Qe},e.prototype.Ye=function(t,i){if(t.Ee===this||t===this||this.color!==t.color)throw new Error("Invalid merge");o.Qe,this.be+=t.Xd.length;for(var n,e=t.Xd,r=0;n=e[r],r<e.length;r++)n.Ze(this),this.Se(n);t.Ee=this,t.Fe=i,this.qb.sd.push(t),o.Qe},e.prototype.$e=function(t){o.Qe;for(var i,n=t.Xd,e=n.length-1;i=n[e],e>=0;e--)this.Te(i),i.Ze(t);this.be-=t.Xd.length,t.Fe=t.Ee=null,o.Qe},e.prototype._e=function(t){for(var i=this.qb.sd,n=i.length-1;n>=0;n--){var e=i[n];if(e.Fe!==t||e.Ee!==this)break;this.$e(e),i.pop()}},e.prototype.Ve=function(t){if(o.Qe,this.be<0)throw new Error("Unexpected error (lives<0)");for(var i,n=this.Xd,e=0;i=n[e],e<n.length;e++){for(var r,s=i.ae(1-this.color),h=0;r=s[h],h<s.length;h++)r.Xe(i);i.af()}this.Ge=t,this.qb.rd.push(this),o.Qe},e.prototype.bf=function(){this.Ge=null,this.be=1;for(var t,i=this.Xd,n=0;t=i[n],n<i.length;n++){t.cf(this);for(var e,r=t.ae(1-this.color),o=0;e=r[o],o<r.length;o++)e.We(t)}},e.df=function(t){for(var i=t.qb.rd,n=i.length-1;n>=0;n--){var e=i[n];if(e.Ge!==t)break;i.pop(),o.Qe,e.bf()}}},{"./Move":21,"./constants":51,"./log":76}],19:[function(t,i,n){"use strict";function e(){}i.g=new e,e.prototype.Ob=function(t,i){if(i>4&&(t<9||t%2==0)&&(i=4),t<=5)return[];for(var n=t<13?2:3,e=1+n,r=(1+t)/2,o=t-n,s=[],h=0;h<i;h++){switch(i%2==1&&i>4&&h===i-1&&(h=8),h){case 0:var u=e,a=e;break;case 1:u=o,a=o;break;case 2:u=e,a=o;break;case 3:u=o,a=e;break;case 4:u=e,a=r;break;case 5:u=o,a=r;break;case 6:u=r,a=e;break;case 7:u=r,a=o;break;case 8:u=r,a=r}s.push([u,a])}return s}},{}],20:[function(t,i,n){"use strict";function e(t,i,n){this.gc=t,this.Wc=i,this.ef=n,this.ff=t.Sc(i,[])}i.g=e,e.prototype.Vc=function(t){var i,n=this.ff.indexOf(t);if(0!==n)return n<0?(this.ff.unshift(t),this.ff.length>this.ef&&(i=this.ff.splice(this.ef))):(this.ff.splice(n,1),this.ff.unshift(t)),this.gc.Qc(this.Wc,this.ff),i},e.prototype.getItem=function(t){return this.ff[t]},e.prototype.Uc=function(){return this.ff}},{}],21:[function(t,i,n){"use strict";function e(t){switch(t[0]){case"B":return h;case"W":return u;default:return}}function r(t){return"B"!==t[0]&&"W"!==t[0]?t:"-"!==t[1]?t.substr(1):t.substr(2)}function o(t,i){var n=a.indexOf(t[0])+1,e=parseInt(t.substr(1,2));if(!n||isNaN(e)){if(i)return null;throw new Error("Illegal move parsed: "+t)}return[n,e]}var s=t("./constants"),h=s.mb,u=s.nb,a="abcdefghjklmnopqrstuvwxyz",c=["black","white"];n.ib=e,n.jb=r,n.hb=function(t,i){return(i===h?"B-":"W-")+t},n.De=function(t){return c[t]},n.gf=o,n.kb=function(t){var i=e(t);void 0!==i&&(t=r(t));var n=o(t,!0);if(!n){if("pass"===t||t.startsWith("resi"))return null;throw new Error("Illegal move parsed: "+t)}return void 0!==i?n.concat(i):n},n.lb=function(t,i){return a[t-1]+i},n.fe=function(t){return a[t-1]}},{"./constants":51}],22:[function(t,i,n){"use strict";function e(t,i){this.hf=t,this.jf=i,this.kf=null,this.lf=!1}var r=t("./GameInVault");i.g=e,e.prototype.mf=function(t,i,n,e,o,s){var h=this.hf;h.pb(e),h.Db(t,i,n);var u=this.kf=new r;u.Ba(h.qb.Eb,h.ub,h.Jb(),h.Qb()),this.jf&&this.jf.oc(u)},e.prototype.nf=function(t){var i=this.hf;i.Bb(t),this.kf=new r,this.kf.Ba(i.qb.Eb,i.ub,i.Jb(),i.Qb())},e.prototype.pf=function(t,i,n){var e=new r;return!!e.Da(t,i,n)&&this.qf(e,i)},e.prototype.qf=function(t,i){var n=t.Pa();return this.hf.Db(n.fb("boardSize"),t.Ka(),n.fb("komi")),this.hf.pb(n.fb("rules"),!0),!!this.hf.Gb(t.La(),i)&&(this.kf=t,this.jf&&this.jf.oc(t),!0)},e.prototype.Pc=function(){this.rf(),this.jf.Pc(this.kf)},e.prototype.Rc=function(){return this.jf.Rc()},e.prototype.pc=function(){this.rf(),this.jf.pc()},e.prototype.Oc=function(t,i){return this.pc(),this.jf.Oc(t,i)},e.prototype.sf=function(){return this.rf(),{pa:this.kf.za(),id:this.kf.Za()}},e.prototype.Pa=function(){return this.kf.Pa()},e.prototype.tf=function(t,i){this.kf.Pa().eb(t,i)},e.prototype.rf=function(){this.lf||this.kf.Oa(this.hf.history),this.kf.Qa()},e.prototype.uf=function(){return this.lf=!0,this.kf.Oa(this.hf.history),this.kf.Ja()},e.prototype.vf=function(){this.lf=!1},e.prototype.wf=function(){return this.hf.qb},e.prototype.xf=function(){return this.hf.qb.Eb},e.prototype.yf=function(){return this.hf.vb},e.prototype.zf=function(){return this.hf.yb?"ENDED":this.hf.xb?"ENDING":null},e.prototype.dc=function(){return this.hf.history},e.prototype.Tb=function(t){return this.hf.Tb(t)?"":this.hf.Ub().join("\n")},e.prototype.bc=function(t,i){this.hf.bc(t,i)}},{"./GameInVault":10}],23:[function(t,i,n){"use strict";function e(t){this.root=new r(null,[]),this.Af=-1,this.Bf=this.root,this.Cf=-1,this.Df(t)}function r(t,i,n){this.Ef=t,this.Ff=t?t.Ff+t.Gf.length:0,this.Gf=i,this.Ia=n||[],this.children=null,this.Hf=!1}function o(t,i,n){this.cg=t,this.dg=i,this.eg=n}function s(t,i){return a(t)===a(i)}var h=t("./constants"),u=t("./Move"),a=u.jb,c=h.mb,l=h.nb;i.g=e,r.prototype.If=function(){return[this.Gf,this.Ia]},r.prototype.Jf=function(t){for(var i=0;i<this.children.length;i++)if(s(t,this.children[i].Gf[0]))return this.children[i];return null},r.prototype.Kf=function(t){var i=new r(this,[t]);return this.children.push(i),i},r.prototype.Lf=function(){this.children||(this.children=[],this.Kf(""))},r.prototype.Mf=function(){this.children.unshift(new r(this,[""]))},r.prototype.Nf=function(){return""===this.Gf[0]},r.prototype.Of=function(){if(!this.children)return null;var t=this.children[0];return t.Nf()?null:t},r.prototype.Pf=function(){if(!this.children)return null;var t=this.children[0];return t.Nf()&&(t=this.children[1]),t||null},r.prototype.Qf=function(){if(this.children)throw new Error("Invalid _deleteLastMove");if(this.Gf.length>1)return this.Gf.length--,this;var t=this.Ef;return t.Rf(this),t},r.prototype.Rf=function(t){var i=this.children;i.splice(i.indexOf(t),1),i.length||(this.children=null)},r.prototype.Sf=function(t,i){var n=this.Gf.splice(t),e=this.Ia.splice(t);if(!n.length)throw new Error("Invalid split at end");var o=new r(this,n,e);o.Hf=i;var s=o.children=this.children;if(s)for(var h=0;h<s.length;h++)s[h].Ef=o;this.children=[o]},r.prototype.Tf=function(t,i){var n;if(t===this.Gf.length){if(!this.children)throw new Error("Unexpected fork");n=this.Jf(i)||this.Kf(i)}else this.Sf(t,this.Hf),n=new r(this,[i]),this.children.push(n);return n},r.prototype.Uf=function(){for(var t=this;t;)t.Hf=!1,t=t.Of()},r.prototype.Vf=function(){this.Hf=!0;var t=this.Ef.children;t[0]!==this&&(t.splice(t.indexOf(this),1),t[0].Nf()?t[0]=this:t.unshift(this))},r.prototype.Wf=function(t){t+1!==this.Gf.length?(this.Sf(t+1,!1),this.Mf()):this.children&&!this.children[0].Nf()&&this.Mf()},r.prototype.Xf=function(){var t=this.Gf.length;if(this.children)for(var i=0;i<this.children.length;i++)t+=this.children[i].Xf();return t},e.prototype.Df=function(t){if(t&&!t.length)throw new Error("empty setupMoves array");this.ta=t,this.wb=t?l:c},e.prototype.Ka=function(){return this.ta},e.prototype.Yf=function(){return this.root},e.prototype.Zf=function(){return this.Cf<0?null:this.Bf.Gf[this.Cf]},e.prototype.$f=function(){return this.Bf.Ff+this.Cf},e.prototype._f=function(){return this.Bf.Hf},e.prototype.ag=function(){return[this.Bf,this.Cf]},e.prototype.bg=function(t){this.Bf=t[0],this.Cf=t[1]},e.prototype.fg=function(t){if(!(t.eg<t.dg.Gf.length)){var i=this.Bf,n=this.Cf;this.gg(t),t.dg=this.Bf,t.eg=this.Cf,this.Bf=i,this.Cf=n}},e.prototype.getBookmark=function(){for(var t=this.$f()+1,i=new Array(t),n=this.Bf,e=this.Cf,r=t-1;r>=0;r--)i[r]=this.Zf(),this.hg();return this.Bf=n,this.Cf=e,new o(i,n,e)},e.prototype.gg=function(t){this.ig();for(var i=t.cg,n=0;n<i.length;n++)this.jg(i[n])},e.prototype.kg=function(t){return this.fg(t),this.Bf===t.dg&&this.Cf===t.eg},e.prototype.lg=function(t){return t.cg},e.prototype.mg=function(){return this.getBookmark().cg},e.prototype.ig=function(){this.Bf=this.root,this.Cf=-1},e.prototype.ng=function(){return this.Bf.Ia[this.Cf]},e.prototype.og=function(t){if(t){var i=this.Bf.Ia[this.Cf];i||(i=this.Bf.Ia[this.Cf]={});for(var n in t)i[n]=t[n]}},e.prototype.pg=function(t){return t.Ff%2==0?this.wb:1-this.wb},e.prototype.qg=function(t){var i=this.Bf;if(++this.Cf===i.Gf.length){if(!i.children)return i.Gf.push(t)}else if(s(t,i.Gf[this.Cf]))return;this.Bf=i.Tf(this.Cf,t),this.Cf=0},e.prototype.jg=function(t){var i=this.Bf;this.Cf===i.Gf.length-1&&i.Hf&&i.Lf(),this.qg(t)},e.prototype.rg=function(){this.Bf.Lf()},e.prototype.hg=function(){if(this.Cf>0)this.Cf--;else if(this.Bf!==this.root)this.Bf=this.Bf.Ef,this.Cf=this.Bf.Gf.length-1;else{if(this.Cf===-1)return!1;this.Cf=-1}return!0},e.prototype.sg=function(t){for(;t>0;){if(t<=this.Cf)return void(this.Cf-=t);if(t-=this.Cf+1,this.Cf=0,this.hg(),this.Cf===-1)break}},e.prototype.tg=function(t){var i=this.Bf;if(this.Cf===i.Gf.length-1){if(!(i=t?i.Of():i.Pf()))return null;this.Bf=i,this.Cf=0}else this.Cf++;return this.Bf.Gf[this.Cf]},e.prototype.ug=function(){return this.tg()},e.prototype.vg=function(){return this.tg(!0)},e.prototype.wg=function(){var t=this.Bf;return this.Cf===t.Gf.length-1&&!t.Pf()},e.prototype.xg=function(){var t=this.Bf,i=this.Cf,n=this.tg();return this.Bf=t,this.Cf=i,n},e.prototype.yg=function(){var t=this.Bf;if(this.Cf<t.Gf.length-1)return null;var i=t.children;if(!i)return null;if(1===i.length)return null;if(2===i.length&&""===i[0].Gf[0])return null;var n=[];t.Hf||""===i[0].Gf[0]||n.push("");for(var e=0;e<i.length;e++)n.push(i[e].Gf[0]);return n},e.prototype.Oa=function(t){this.root.Uf(),this.Af=t.length,this.root.Hf=!0,this.Bf=this.root,this.Cf=-1;for(var i=this.Bf,n=0;n<t.length;n++)this.qg(t[n]),this.Bf!==i&&(i=this.Bf,i.Vf());i.Wf(this.Cf)},e.prototype.Na=function(){for(var t=[],i=this.root;;){i.Hf=!0;for(var n=0;n<i.Gf.length;n++)t.push(i.Gf[n]);if(!i.children)break;i=i.children[0]}return i.Nf()?(t.pop(),this.Bf=i.Ef):this.Bf=i,this.Cf=this.Bf.Gf.length-1,this.Af=t.length,t},e.prototype.zg=function(){return this.Af},e.prototype.Ag=function(t){var i=this.Bf.Jf(t);if(!i)throw new Error("Invalid variation "+t);return i.Xf()},e.prototype.Bg=function(t){if(this.Cf!==this.Bf.Gf.length-1)return!1;var i=this.Bf.Jf(t);return!(!i||i.Hf)&&(this.Bf.Rf(i),!0)},e.prototype.Cg=function(){var t=this.Bf;if(t.Hf)return!1;if(t.children)return!1;var i=t.Gf.length;return this.Cf===i-1&&(this.Bf=t.Qf(),this.Cf=this.Bf.Gf.length-1,!0)},e.prototype.Ma=function(t){var i=this.Dg(t);return i!==-1?i:(this.ig(),t.ig(),this.Eg(t),-1)},e.prototype.Dg=function(t){for(var i=this.Na(),n=t.Na(),e=Math.min(i.length,n.length),r=0;r<e;r++)if(i[r]!==n[r])return r;return n.length>e&&this.Oa(n),-1},e.prototype.Eg=function(t){for(var i,n=0;!(i=t.yg());){var e=t.tg();if(!e)break;n++,this.jg(e),this.og(t.ng())}if(i)for(var r=0;r<i.length;r++){var o=i[r];""!==o&&(this.jg(o),t.jg(o),this.Eg(t),this.hg(),t.hg())}n&&(this.sg(n),t.sg(n))}},{"./Move":21,"./constants":51}],24:[function(t,i,n){"use strict";function e(t){this.Fg=t,this.Gg=new s.Ig.Hg(t)}function r(t){return 0===t?"Tie game":a(t>0?c:l)+" wins by "+o(Math.abs(t))}function o(t){return 1!==t?t+" points":"1 point"}var s=t("./ai"),h=t("./constants"),u=t("./Move"),a=u.De,c=h.mb,l=h.nb;i.g=e,e.prototype.Jg=function(){var t=this.Kg()[0];return t[c]-t[l]},e.prototype.Lg=function(){return this.Mg(this.Kg())},e.prototype.Ng=function(){return this.Kg()},e.prototype.Og=function(){return this.Gg.Og()},e.prototype.Kg=function(){var t=this.Fg;return null!==t.zb?["resi",1-t.zb,t.Ab]:(this.Gg.Pg(t.qb),this.Gg.Qg())},e.prototype.Mg=function(t){if("resi"===t[0]){var i,n=a(t[1]),e=a(1-t[1]);switch(t[2]){case"time":i=e+" ran out of time";break;case null:case void 0:i=e+" resigned";break;default:i=e+" disqualified: "+t[2]}return[n+" won ("+i+")"]}if(!t||2!==t.length)throw new Error("Invalid score info: "+t);var s=t[0],h=t[1];if(s.length!==h.length)throw new Error("Invalid score info");var u=[],p=s[c]-s[l];u.push(r(p));for(var f=c;f<=l;f++){var d=h[f],g=d[0],v=d[1],y=d[2],b=0!==v?" "+(v<0?"-":"+")+" "+Math.abs(v)+" prisoners":"",m=y>0?" + "+y+" komi":"",w=v||y?" ("+g+b+m+")":"";u.push(a(f)+": "+o(s[f])+w)}return u}},{"./Move":21,"./ai":50,"./constants":51}],25:[function(t,i,n){"use strict";function e(){y||s(),this.text=null,this.Rg=null,this.Sg=this.ub=0,this.ta=this.ua=this.Gf=null,this.Tg=null,this.ra=null,this.Ia=null,this.vb=p,this.Ug=!1}function r(t,i,n){g[t]=[i,n],v[n]=t}function o(t,i){y[t]=i}function s(){g={},v={},y={},r("GM","int",null),r("FF","int","fileFormat"),r("SZ","int","boardSize"),r("AB","move",null),r("AW","move",null),r("HA","int","handicap"),r("KM","real","komi"),r("RU","text","rules"),r("RE","text","result"),r("PB","text","playerBlack"),r("PW","text","playerWhite"),r("BS","int","blackSpecies"),r("WS","int","whiteSpecies"),r("LT","flag","enforceLosingOnTime"),r("SO","text","source"),r("ID","text","gameId"),r("AP","text","application"),r("BR","text","blackRank"),r("WR","text","whiteRank"),r("BT","text","blackTeam"),r("WT","text","whiteTeam"),r("TM","text","timeLimit"),r("OT","text","overtimeMethod"),r("EV","text","event"),r("RO","text","round"),r("DT","text","date"),r("PC","text","place"),r("GN","text","gameName"),r("ON","text","openingPlayed"),r("GC","text","gameComment"),r("C","text","comment"),r("N","text","nodeName"),r("US","text","userName"),r("AN","text","analyseAuthor"),r("CP","text","copyright"),r("CA","text","characterSet"),r("ST","text","variationStyle"),o("B","move"),o("W","move"),o("AB","move"),o("AW","move"),o("BL",null),o("WL",null),o("C","text"),o("CR",null),o("BM",null),o("N",null)}function h(t){if(t.$g("a","z"))return t.charCodeAt()-97;if(t.$g("A","Z"))return t.charCodeAt()-39;throw new Error("Invalid coordinate value: "+t)}function u(t){for(var i=0;;){var n=t.indexOf("]",i);if(n===-1)return-1;if("\\"!==t[n-1])return n;i=n+1}}var a=t("./constants"),c=t("./log"),l=t("./ReviewTree"),p=a.mb,f=a.nb,d=["B","W"],g=null,v=null,y=null;i.g=e,e.Vg=function(){return y||s(),v},e.Ea=function(t){var i=t.trim();return"("===i[0]&&";"===i.substr(1).trim()[0]},e.prototype.Wg=function(t,i){if(!e.Ea(t))throw new Error("Not an SGF file");this.Xg(t),this.Yg(),this.Zg(i)},e.prototype.Ga=function(t,i,n){try{return this.Wg(t,n),!0}catch(t){var e="Failed loading SGF moves:\n"+t;if(!i)throw new Error(e);return i.push(e),!1}},e.prototype.Ka=function(){return this.ta},e.prototype.La=function(){return this.ua},e.prototype.Ja=function(){return this.ra},e.prototype.fb=function(t,i){var n=this.Ia[t];return void 0!==n?n:i};e.prototype._g=function(t){if(this.Sg)throw new Error("SZ set twice");this.Sg=t},e.prototype.ah=function(t){if(!this.Sg)throw new Error("Move seen before SZ is known");return""===t||"tt"===t&&this.Sg<=19?"pass":"abcdefghjklmnopqrstuvwxyz"[h(t[0])]+(this.Sg-h(t[1]))},e.prototype.bh=function(t,i,n){n?(t!==this.vb&&(i=d[t]+i),this.vb=t,this.ta.push(i)):(this.Ug=!0,i=d[t]+i,this.vb=1-t,this.Gf.push(i))},e.prototype.qg=function(t,i,n){if(!this.Ug)return this.bh(t,i,n);t!==this.vb&&(i=d[t]+i),this.vb=1-t,this.Gf.push(i)},e.prototype.dh=function(t){var i=this.Gf.length-1;this.Tg[i]=(this.Tg[i]||"")+t},e.prototype.eh=function(t,i){switch(i){case"text":return t;case"int":return parseInt(t);case"real":return parseFloat(t);case"flag":return!0;case"move":return this.ah(t);default:throw new Error("Invalid tag type: "+i)}},e.prototype.fh=function(t,i){var n=y[t];if(void 0===n)return c.warn&&c.warn("Unknown property "+t+"["+i+"] ignored");if(n){var e=this.eh(i,n);switch(t){case"B":return this.qg(p,e);case"W":return this.qg(f,e);case"AB":return this.qg(p,e,!0);case"AW":return this.qg(f,e,!0);case"C":return this.dh(i)}}},e.prototype.Zg=function(t){this.ra=new l,this.gh(this.Rg,1),this.ta.length||(this.ta=null),this.ra.Df(this.ta),this.ua=this.ra.Na(),void 0!==t&&(this.ua=this.ua.slice(0,t))},e.prototype.gh=function(t,i){for(var n=i;n<t.length;n++){var e=t[n];if("seq"!==e[0]){this.Gf=[],this.Tg=[];for(var r=0;r<e.length;r+=2){var o=e[r]||o,s=e[r+1];this.fh(o,s)}for(var h=0;h<this.Gf.length;h++)this.ra.jg(this.Gf[h]),this.Tg[h]&&this.ra.og({hh:this.Tg[h]})}else{if(!e[1].length){this.ra.rg();continue}var u=this.ra.ag(),a=this.vb;this.gh(e,1),this.vb=a,this.ra.bg(u)}}},e.prototype.ih=function(t,i){var n=g[t];if(void 0===n)return this.Ia[t]=i,c.jh("Unknown property in SGF header: "+t+"["+i+"]");var e=n[0],r=n[1],o=this.eh(i,e);return r&&(this.Ia[r]=o),o},e.prototype.Yg=function(){this.Sg=this.ub=0,this.Ia={},this.ta=[],this.vb=p,this.Ug=!1;for(var t=this.Rg[0],i=0;i<=t.length-1;i+=2){var n=t[i],e=t[i+1],r=this.ih(n,e);switch(n){case"GM":if(1!==r)throw new Error("SGF game is not a GO game");break;case"FF":(r<3||r>4)&&c.warn&&c.warn("SGF format "+r+". Not sure we handle it well.");break;case"SZ":this._g(r);break;case"KM":this.ub=r;break;case"AB":this.qg(p,r,!0);break;case"AW":this.qg(f,r,!0)}}},e.prototype.Xg=function(t){this.text=t,this.Rg=[],t=this.kh(t),""!==(t=this.lh(t))&&this.mh("Trailing text ignored",t)},e.prototype.lh=function(t){for(t=this.nh("(",t),t=this.kh(t);";"===t[0];)t=this.oh(t);for(;"("===t[0];){var i=this.Rg;this.Rg=["seq"],t=this.lh(t),i.push(this.Rg),this.Rg=i}return t=this.nh(")",t),t=this.kh(t)},e.prototype.oh=function(t){t=this.nh(";",t);for(var i=[];;){for(var n=0;t[n]&&t[n].$g("A","Z");)n++;var e=t.substr(0,n);if(""===e)break;for(i.push(e),t=this.nh(e,t);;){t=this.nh("[",t);var r=u(t);r<0&&this.mh("Missing ']'",t);var o=t.substr(0,r);if(i.push(o),t=this.nh(o+"]",t),"["!==t[0])break;i.push(null)}}return this.Rg.push(i),t=this.kh(t)},e.prototype.kh=function(t){return t.trim()},e.prototype.nh=function(t,i){return i.startsWith(t)||this.mh(t+" expected",i),i.replace(t,"").trim()},e.prototype.mh=function(t,i){throw new Error("Syntax error: '"+t+"' at ..."+i.substr(0,20)+"...")}},{"./ReviewTree":23,"./constants":51,"./log":76}],26:[function(t,i,n){"use strict";function e(){this.ra=null,this.Eb=0,this.ph="",this.qh="",l||r()}function r(){l={};for(var t=0;t<p.length;t++){var i=p[t];l[i]=!0}for(t=0;t<f.length;t++)l[f[t]]=!0}function o(t,i){return void 0===i||null===i?"":t+"["+i+"]"}var s=t("./constants"),h=t("./Move"),u=t("./SgfReader"),a=h.kb,c=s.mb,l=null,p=["playerWhite","playerBlack","source","event","place","boardSize","komi","rules","date"],f=["fileFormat","handicap"];i.g=e,e.prototype.rh=function(t,i){this.Eb=t.fb("boardSize");for(var n=u.Vg(),e=t.gb(),r="",s=0;s<p.length;s++){var h=p[s];r+=o(n[h],e[h])}for(var a in e)l[a]||(r+=o(n[a],e[a]));return r+=this.sh(i)},e.prototype.sh=function(t){if(!t)return"";this.ph="A",this.qh="B";for(var i=o("HA",t.length),n=0;n<t.length;n++)i+=this.th(t[n]);return i},e.prototype.th=function(t){if(""===t)return"";var i,n=this.ph,e=this.qh,r=a(t);if(r)void 0!==r[2]&&(e=r[2]===c?"B":"W"),i=String.fromCharCode(96+r[0])+String.fromCharCode(97+this.Eb-r[1]);else{if(!t.endsWith("pass"))return null;i=""}return""===n&&(this.qh="W"===e?"B":"W"),n+e+"["+i+"]"},e.prototype.uh=function(t,i){for(var n="",e=0;e<t.length;e++){var r=this.th(t[e]);if(null===r)break;n+=";"+r,i[e]&&i[e].hh&&(n+="C["+i[e].hh+"]")}return n},e.prototype.vh=function(t){this.qh=this.ra.pg(t)===c?"B":"W";var i=t.If(),n=this.uh(i[0],i[1]);if(t.children)for(var e=0;e<t.children.length;e++)n+="("+this.vh(t.children[e])+")";return n},e.prototype.Ra=function(t,i){this.ra=i;var n="(;FF[4]GM[1]"+this.rh(t,i.Ka());return this.ph="",(n+=this.vh(i.Yf()))+")"}},{"./Move":21,"./SgfReader":25,"./constants":51}],27:[function(t,i,n){"use strict";function e(t,i,n,e){this.qb=t,this.ce=i,this.de=n,this.color=e,this.group=null,this.Oe=[],this.yh=[]}var r=t("./constants"),o=t("./Group"),s=t("./Move"),h=s.lb,u=r.EMPTY,a=r.ld,c=r.wh,l=r.xh;i.g=e,e.ld=new e(null,-1,-1,a);var p=e.zh=[[0,1],[1,0],[0,-1],[-1,0]],f=e.Ah=[[1,1],[1,-1],[-1,-1],[-1,1]];e.prototype.clear=function(){this.color=u,this.group=null},e.prototype.pd=function(){for(var t=this.qb.nd,i=l;i>=c;i--){var n=t[this.de+p[i][1]][this.ce+p[i][0]];n.color===u&&this.Oe.push(n),this.yh.push(n),n=t[this.de+f[i][1]][this.ce+f[i][0]],this.yh.push(n)}},e.prototype.toString=function(){return this.color===u?this.Ke():(this.color?"W":"B")+"-"+this.Ke()},e.prototype.Ke=function(){return h(this.ce,this.de)},e.prototype.Bh=function(){return this.Ch().map(function(t){return t.Ke()}).sort().join(",")},e.prototype.Nd=function(){return this.color===u},e.prototype.Dh=function(){return 2===this.Oe.length},e.prototype.Eh=function(){var t=this.qb,i=t.Eb-1;return t.Ld(1===this.ce?2:i,1===this.de?2:i)},e.prototype.Fh=function(){return this.Oe.length<=3},e.prototype.Gh=function(){var t=this.qb.Eb,i=this.ce,n=this.de;return Math.min(Math.min(i-1,t-i),Math.min(n-1,t-n))},e.prototype.Gd=function(t){for(var i=this.Oe.length-1;i>=0;i--){var n=this.Oe[i];if(n.color===u)return!1;if(n.color!==t){if(1===n.group.be)return!1}else if(n.group.be>1)return!1}return!0},e.prototype.Kd=function(t){for(var i=null,n=this.Oe.length-1;n>=0;n--){var e=this.Oe[n].group;if(e&&e.color===1-t&&1===e.be){if(i)return!1;i=e}}if(!i)return!1;if(1!==i.Xd.length)return!1;var r=i.Xd[0];if(this.qb.Vd()!==r)return!1;var o=this.qb.Ud();if(!o||o.Ge!==r||1!==o.Xd.length)return!1;var s=o.Xd[0];return s.ce===this.ce&&s.de===this.de},e.prototype.af=function(){this.color=u,this.group=null},e.prototype.cf=function(t){this.group=t,this.color=t.color},e.prototype.Sd=function(t){this.color=t;var i=this.ae(t);0===i.length?this.group=this.qb.wd(this,this.Hh()):(this.group=i[0],this.group.Se(this));for(var n=this.ae(1-t),e=n.length-1;e>=0;e--)n[e].Ue(this);for(var r=1;r<i.length;r++)this.group.Ye(i[r],this)},e.prototype.Rd=function(){this.group._e(this),this.group.Te(this);for(var t=this.ae(1-this.color),i=t.length-1;i>=0;i--)t[i].Xe(this);this.group=null,this.color=u,o.df(this)},e.prototype.Ze=function(t){this.group=t},e.prototype.ae=function(t){for(var i=[],n=this.Oe,e=n.length-1;e>=0;e--){var r=n[e];r.color===t&&i.indexOf(r.group)<0&&i.push(r.group)}return i},e.prototype.Ch=function(){for(var t=[],i=this.Oe,n=i.length-1;n>=0;n--){var e=i[n];e.color===u&&t.push(e)}return t},e.prototype.Hh=function(){for(var t=0,i=this.Oe,n=i.length-1;n>=0;n--)i[n].color===u&&t++;return t},e.prototype.Ih=function(t,i){for(var n=0,e=this.Oe,r=e.length-1;r>=0;r--)e[r].color===t&&(i&&i.push(e[r]),n++);return n},e.prototype.Jh=function(t){for(var i=this.Oe,n=i.length-1;n>=0;n--)if(i[n].group===t)return!0;return!1}},{"./Group":18,"./Move":21,"./constants":51}],28:[function(t,i,n){"use strict";function e(t){s.call(this,t)}var r=t("../../constants"),o=t("./DiamondZone"),s=t("./Heuristic"),h=t("util").inherits,u=t("../../log"),a=t("../../Move"),c=(t("../../test"),a.De),l=r.EMPTY,p=r.ld,f=r.Kh,d=r.Lh,g=r.Mh,v=r.Nh,y=r.Oh,b=r.Ph,m=r.Qh,w=r.Rh,x=r.Sh,k=r.Th,j=r.Uh,q=r.Vh;h(e,s),i.g=e,e.prototype.Wh=function(t,i,n){var e=this.qb.Ld(t,i);if(this.Xh[i][t]<0)return 0;var r,o=1-n;if(this.Yh(e,n)&&this.Yh(e,o)){var s=[];r=[],1!==this.Zh(e,o,s,r)||r.length||this._h.$h(s,e,e,o)}var h=[];switch(r=[],this.Zh(e,n,h,r)){case 0:return this.ai(e,n,h);case 1:this._h.$h(h,e,e,n);for(var u=r.length-1;u>=0;u--)this._h.$h(h,e,r[u],n);return 0;default:return 0}},e.prototype.Zh=function(t,i,n,e){for(var r=1-i,s=0,h=0,u=0,a=!1,c=0;c<8;c++){var B=c%2,S=t.yh[c];switch(S.color){case p:case l:continue;case i:var A=S.group;B?h++:(s++,1===A.be&&(a=!0)),n.indexOf(A)<0&&n.push(A);break;default:if(1===S.group.be)break;B||u++}}if(n.length<2)return-1;if(4===s)return a?1:0;var E=new o(t,i),C=E.bi;E.normalize();var M,G,D;if(t.Fh()){if(t.Dh())return 0;if(3===s)return a?1:0;if(2===s){if(a)return 1;if(C[d].color!==i){if(E.ci("2n","?.?o*o---"),!u)return 0}else{if(E.ci("2n","?o..*o---"),C[m].color===l)return 0;if(!u)return 0;if(C[v].group.be<=3)return 0}}else if(1===s){if(E.ci("1n","B.?.*A---"),!u)return 0;if(C[d].color===l){if(C[v].group.be<4)return 0;if(D=C[m],D.color===i)return 0;D.color===l&&(e.push(D),e.push(C[d]))}}else{if(E.ci("02","B.A.*.---"),!u)return 0;if(C[d].color===l)return 0;if(u>1)return-1;if(1===C[b].group.be||1===C[m].group.be)return-1}return 1}if(3===s){if(a)return 1;if(!u)return 0;if(E.ci("3n","?x?o*o?o?"),3===n.length)return 1;if(n.length,C[v].group===C[g].group){if(E.ci("3n","?x?A*B?A."),C[x].color===l)return 0}else if(C[w].color===l)return 0;return 1}if(2===s){if(C[y].group===C[g].group)return E.ci("2n","B.?.*A?A?"),u||C[w].color===r&&C[m].color===r?1:0;if(C[d].color===i){if(E.ci("2n","?B?.*.?A?"),4===h)return 0;if(3===h){if(E.ci("23",".BB.*.AAA"),!u)return 0;if(1===u){if(C[v].color===r)return 0;if(C[j].color!==r||C[j].group.be<3)return 0}}else if(2===h)if(C[m].color===i){if(E.ci("22",".BB.*..AA"),!u)return 0;if(1===u&&C[v].color===r)return 0}else if(C[b].color===i){if(E.ci("22","BB..*..AA"),u)return 1;if(C[w].color!==r||C[m].color!==r)return 0;e.push(C[v]),e.push(C[y]),C[w].color!==r&&e.push(C[w]),C[m].color!==r&&e.push(C[m])}else{if(E.ci("22",".B..*.AAA"),u)return 1;if(C[b].color!==r||C[m].color!==r)return 0;e.push(C[v]),e.push(C[y]),C[b].color!==r&&e.push(C[b]),C[m].color!==r&&e.push(C[m])}else{if(1!==h)return E.ci("20",".B..*..A."),u?1:C[v].Fh()||C[y].Fh()?0:C[q].Fh()&&(G=C[y],0===this.di[r][G.de][G.ce])?0:C[j].Fh()&&(M=C[v],0===this.di[r][M.de][M.ce])?0:(C[v].Ih(r)<3&&e.push(C[v]),C[y].Ih(r)<3&&e.push(C[y]),1);if(E.ci("21",".B..*..AA"),!u)return 0}}else if(E.ci("2n","?.?.*B?A."),3===h){if(E.ci("23","C.B.*BAA."),2===n.length)return 0;if(C[x].color===l){if(C[j].color!==r||C[k].color!==r)return 0;if(u<2)return 0}else e.push(C[d]),e.push(C[v])}else if(2===h)if(C[x].color===l){if(C[b].color!==i)return E.ci("22","..B.*BAA "),0;if(E.ci("22","o...*ooo "),0===u)return 0;if(2===n.length)return C[g].group!==C[y].group?0:C[v].color===l?-1:C[m].color===l?(e.push(C[d]),1):-1;C[v].color===l&&e.push(C[v])}else{if(C[x].color===i){if(E.ci("22","B...*A.AA"),2===u)return-1;var T=C[m].color===r,z=C[w].color===r;return 0===u?T||z?(e.push(C[d]),e.push(C[v]),1):0:(C[v].color!==l||z?C[d].color!==l||T||e.push(C[y]):e.push(C[v]),1)}if(C[b].color!==i){if(E.ci("22","..B.*BAAx"),2===u)return 1;if(0===u){if(C[b].color!==l)return 1;e.push(C[b]),e.push(C[d]),e.push(C[v])}return 1}if(E.ci("22","o...*ooox"),u)return 1;var _=C[j].color,O=C[k].color;if(C[y].group.be>2&&_!==r)return 0;C[m].color!==l||_===r&&O===r||e.push(C[m]),a||(e.push(C[d]),e.push(C[v]))}else if(1===h){if(C[b].color===i)return E.ci("21","C...*B.A."),u||(e.push(C[d]),e.push(C[v])),1;if(E.ci("21","....*BAA."),C[x].color===l)return 0;if(1===C[x].group.be)return 0;C[d].color===l&&e.push(C[d]),C[v].color===l&&e.push(C[v])}else{if(E.ci("20","....*B.A."),C[x].color===l)return 0;if(!u){if(1===C[f].Gh())return 0;e.push(C[d]),e.push(C[v])}}}else if(1===s)if(4===h){if(0===u)return 0}else if(3===h){if(C[b].color!==i){if(C[y].color===l)return 0}else if(C[y].color===l){if(C[q].color!==r)return 0;if(C[b].group===C[m].group)return 0;0===u?(e.push(C[v]),e.push(C[d]),e.push(C[y])):1===u&&C[v].color===r&&(e.push(C[d]),e.push(C[y]))}}else if(2===h){if(C[b].color===l&&C[y].color===l)return 0}else E.ci("11","..B.*..A."),u||(e.push(C[y]),C[x].color===l&&(e.push(C[d]),e.push(C[v]),C[q].color!==r&&e.push(C[x])));else if(4===h){if(0===u&&n.length<4)return 0}else{if(3!==h)return C[w].color===i&&C[x].color===i?(E.ci("02","....*.B.A"),C[g].color===l?-1:C[g].group.be<=2?1:-1):(E.ci("02","B...*...A"),1);if(C[y].color===l&&C[x].group===C[w].group||C[g].color===l&&C[x].group===C[m].group)return 0}return 1},e.prototype.ai=function(t,i,n){if(i!==this.color)return 0;u.debug&&(c(i),n[0],n[1]);var e=this.gi.fi.ei(t);if(e.hi(t)&&2===n.length){if(this.gi.ii)return.5;var r=this._h.ji(n[0].He);return r>0&&r<1?.5:0}return e.color!==i?0:this.gi.ii?-.5:-1},e.prototype.ki=function(t,i){return[this.qb.Ld(t.ce,i.de),this.qb.Ld(i.ce,t.de)]},e.prototype.li=function(t,i,n){var e=Math.abs(i.ce-t.ce),r=Math.abs(i.de-t.de);if(e+r===1)return 0;var o,s=1-n,h=0;if(1===e&&1===r){var u=this.ki(t,i),a=u[0],c=u[1];if(a.color===n||c.color===n)return 0;if(a.color===s&&h++,c.color===s&&h++,0===h)return 0;if(2===h)return 99;var l=a.color===s?0:1,p=u[l],f=u[1-l];return t.Fh()||i.Fh()?1===f.Gh()?p.group.be>2?1:0:0!==f.Ih(s)?1:0:1===f.Gh()?0!==f.Ih(s)?1:0:1}if(e+r===2){if(o=this.qb.Ld((t.ce+i.ce)/2,(t.de+i.de)/2),o.color===n)return 0;if(o.color===s)return o.group.be;for(var d=o.Oe.length-1;d>=0;d--)o.Oe[d].color===s&&h++;return h>=1?1:t.Fh()&&i.Fh()?0:.5}if(e+r===3&&t.Fh()&&i.Fh()){for(var g=this.mi(t,i),v=0,y=g.length-1;y>=0;y--)o=g[y],o.color===s&&(v+=o.group.be),0!==o.Ih(s)&&(v+=1);return v}return e+r},e.prototype.Yh=function(t,i){for(var n=[],e=t.Oe.length-1;e>=0;e--){var r=t.Oe[e];switch(r.color){case l:n.push(r);break;case i:if(r.group.be>1)return r;break;default:if(1===r.group.be)return r.group.Pe()[0].Xd[0]}}for(var o=2,s=n.length-1;s>=0;s--)for(var h=n[s],u=h.Oe.length-1;u>=0;u--){var a=h.Oe[u];if(a!==t&&(a.color===i&&0!==this._h.ji(a.group.He))){var c=this.li(t,a,i);if(!(c>=2)&&(o-=2-c)<=.5)return a}}return null}},{"../../Move":21,"../../constants":51,"../../log":76,"../../test":81,"./DiamondZone":29,"./Heuristic":32,"util":4}],29:[function(t,i,n){"use strict";function e(t,i){this.color=i,
this.bi=new Array(13);var n=t.ce,e=t.de,r=t.qb.nd,o=t.qb.Eb,s=this.bi,h=u.ld;s[l]=t,s[p]=r[e+1][n],s[v]=r[e+1][n-1],s[y]=r[e+1][n+1],s[f]=r[e-1][n],s[b]=r[e-1][n-1],s[m]=r[e-1][n+1],s[d]=r[e][n-1],s[g]=r[e][n+1],s[k]=n>2?r[e][n-2]:h,s[j]=n<o-1?r[e][n+2]:h,s[x]=e>2?r[e-2][n]:h,s[w]=e<o-1?r[e+2][n]:h}function r(t){return t===a?B:q[t+1]}function o(t,i){for(var n="",e=0;e<i.length;e++){var o=i[e];n+="string"==typeof o?o:r(t[o].color)}return n}var s=t("../../constants"),h=t("../../Grid"),u=t("../../Stone"),a=s.ld,c=s.EMPTY,l=s.Kh,p=s.Lh,f=s.Mh,d=s.Nh,g=s.Oh,v=s.Ph,y=s.Qh,b=s.Rh,m=s.Sh,w=s.Th,x=s.ni,k=s.Uh,j=s.Vh;i.g=e;var q=h.he+h.je,B="|";e.prototype.toString=function(){var t=this.bi;return o(t,[" "," ",w," "," "])+"\n"+o(t,[" ",v,p,y," "])+"\n"+o(t,[k,d,"*",g,j])+"\n"+o(t,[" ",b,f,m," "])+"\n"+o(t,[" "," ",x," "," "])+"\n"},e.prototype.oi=function(){var t,i=this.bi;t=i[p],i[p]=i[f],i[f]=t,t=i[w],i[w]=i[x],i[x]=t,t=i[v],i[v]=i[b],i[b]=t,t=i[y],i[y]=i[m],i[m]=t},e.prototype.pi=function(){var t,i=this.bi;t=i[d],i[d]=i[g],i[g]=t,t=i[k],i[k]=i[j],i[j]=t,t=i[v],i[v]=i[y],i[y]=t,t=i[b],i[b]=i[m],i[m]=t},e.prototype.qi=function(){var t,i=this.bi;t=i[d],i[d]=i[f],i[f]=i[g],i[g]=i[p],i[p]=t,t=i[k],i[k]=i[x],i[x]=i[j],i[j]=i[w],i[w]=t,t=i[v],i[v]=i[b],i[b]=i[m],i[m]=i[y],i[y]=t},e.prototype.ri=function(){var t,i=this.bi;t=i[d],i[d]=i[p],i[p]=i[g],i[g]=i[f],i[f]=t,t=i[k],i[k]=i[w],i[w]=i[j],i[j]=i[x],i[x]=t,t=i[v],i[v]=i[y],i[y]=i[m],i[m]=i[b],i[b]=t},e.prototype.normalize=function(){var t,i=this.color,n=this.bi;if(n[l].Fh()){n[p].color===a?this.oi():n[d].color===a?this.ri():n[g].color===a&&this.qi();var e=n[d].color===i,r=n[g].color===i;return void(e&&!r?this.pi():e===r&&n[v].color===i&&n[y].color!==i&&this.pi())}var o=!1,s=!0,h=!0,u=n[p].color===i?1:0,c=n[f].color===i?1:0,w=n[d].color===i?1:0,x=n[g].color===i?1:0;u>c?(this.oi(),w>x&&this.pi(),w!==x&&(o=!0)):u<c?(w>x&&this.pi(),w!==x&&(o=!0)):c?w>x?this.ri():x>w?this.qi():(s=!1,w&&(h=!1)):w>x?this.ri():x>w?this.qi():(w?this.ri():h=!1,s=!1);var k=n[y].color===i?1:0,j=n[b].color===i?1:0;if(s&&o)n[p].color!==i&&n[d].color!==i&&k&&!j&&(this.qi(),this.pi());else{var q=n[v].color===i?1:0,B=n[m].color===i?1:0;s||(q+k>j+B?(this.oi(),t=q,q=j,j=t,t=k,k=B,B=t):o||(o=!0,!h&&q<k&&j<B?this.qi():!h&&q>k&&j>B?this.ri():o=!1)),!o&&(j>B||j===B&&q>k)&&this.pi()}};var S=[v,p,y,d,l,g,b,f,m],A=["TL","TOP","TR","LEFT","CENTER","RIGHT","BL","BOTTOM","BR"];e.prototype.ci=function(t,i){for(var n=this.bi,e=this.color,r=1-e,o={},s=0,h=0,u=0;u<S.length;u++){var l=n[S[u]],p=i[u],f=l.color;switch(f===e&&(u%2?s++:h++),p){case"o":if(f===e)continue;break;case"A":case"B":case"C":case"D":if(f!==e)break;var d=o[p];if(d){if(d!==l.group)break}else o[p]=l.group;continue;case"*":case" ":if(f===c)continue;break;case".":if(f!==e)continue;break;case"x":if(f===r)continue;break;case"?":continue;case"-":if(f===a)continue}return p+"!="+f+" in "+A[u]+"\n"+this}var g=parseInt(t[0]),v=parseInt(t[1]);return s!==g?"numDirects="+s:!(!isNaN(v)&&h!==v)||"numDiags="+h}},{"../../Grid":17,"../../Stone":27,"../../constants":51}],30:[function(t,i,n){"use strict";function e(t){r.call(this,t)}var r=t("./Heuristic");(0,t("util").inherits)(e,r),i.g=e,e.prototype.si=function(){this.gi.fi.ti()}},{"./Heuristic":32,"util":4}],31:[function(t,i,n){"use strict";function e(t){s.call(this,t),this.grid=new o(this.Eb,u),this.ui=t.wi.vi}var r=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,u=r.ld;h(e,s),i.g=e,e.prototype.si=function(){var t=this.qb;this.gi.fi.xi(t,this.grid),this.yi()},e.prototype.yi=function(){var t=this.gi.fi.zi;for(var i in t)for(var n=~~i,e=t[n],r=e.group.color,o=e.Ai.length-1;o>=0;o--){var s=e.Ai[o];s.hi&&this.ui.Bi(s.Ci,r)}}},{"../../Grid":17,"../../constants":51,"./Heuristic":32,"util":4}],32:[function(t,i,n){"use strict";function e(t){this.gi=t,this.Fi(),this.qb=t.qb,this.Eb=t.qb.Eb,this.Gi=new o(this.Eb,0,u),this.Hi=t.Hi,this.color=this.Ii=null,this.Ji()}var r=t("../../constants"),o=t("../../Grid"),s=t("../../log"),h=t("../../helper"),u=r.ld,a=r.Di,c=r.Ei;i.g=e,e.prototype.Fi=function(){var t=this.constructor;this.name=t.name||h.Ki(t),this.name.length<5&&(this.name+=this.gi.Li.length)},e.prototype.Ji=function(){var t=this.gi.wi;this.Mi=t.Ni,this._h=t.vi,this.Xh=t.Oi?t.Oi.Gi.od:null,this.Pi=t.Qi,this.Ri=t.Si,this.di=t.Ti?t.Ti.di:null},e.prototype.Ui=function(t){this.color=t,this.Ii=1-t},e.prototype.si=function(t,i){for(var n=s.level,e=this.gi.color,r=this.Gi.od,o=1;o<=this.Eb;o++)for(var h=1;h<=this.Eb;h++){var u=t[o][h];if(!(u<a)){u===c&&this.name===this.gi.Vi&&s.Wi(s.Xi);var l=r[o][h]=this.Wh(h,o,e);i[o][h]+=l,u===c&&s.Wi(n)}}},e.prototype.Yi=function(t,i,n){var e=this.Gi.od[i][t];e&&(n[this.name]=e)},e.prototype.Zi=function(t,i,n,e){return this.gi.$i.get(this.name+"-"+t,i,n,e)}},{"../../Grid":17,"../../constants":51,"../../helper":52,"../../log":76}],33:[function(t,i,n){"use strict";function e(t){o.call(this,t),this._i=null}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),u=t("../../Move"),a=(t("../../test"),u.De),c=u.lb,l=r.EMPTY;s(e,o),i.g=e,e.prototype.aj=function(t,i){for(var n=t.Pe(),e=n.length-1;e>=0;e--){var r=n[e];if(!(r.be>1)){var o=r.Xd.length;if(o>=i)return!0;for(var s=r.Pe(),h=s.length-1;h>=0;h--)if((o+=s[h].be-1)>=i)return!0}}return!1},e.prototype.bj=function(t,i){for(var n=0,e=0,r=0,o=t.Oe.length-1;o>=0;o--){var s=t.Oe[o];switch(s.color){case l:r++;break;case i:r+=s.group.be-1,n++;break;default:1===s.group.be&&(e+=s.group.Xd.length)}}switch(e){case 0:return!(r<=1);case 1:return!!r||!n;default:return!0}},e.prototype.cj=function(t,i,n,e){for(var r=!1,o=!1,s=1-i[0].color,h=i.length-1;h>=0;h--){var u=i[h];1===u.be&&(o=!0,(!n||1===n&&e)&&this._h.dj(t,s),n||(!this.ej(u,n)||this.aj(u,1)?this._h.fj(u,t):this.gi.ii&&(r=!0)))}return r&&this._h.gj(t),o},e.prototype.hj=function(t,i,n){if(!i.Jh(n))return!1;for(var e=i.ae(n.color),r=e.length-1;r>=0;r--){var o=e[r];if(o.be>2)return!1;if(!t.Jh(o))return!1}return!0},e.prototype.ij=function(t,i,n,e,r,o){for(var s,u=!1,c=t.ae(e),l=i.length-1;l>=0;l--)if(s=i[l],2===s.be&&!this.aj(s,2)&&(0!==n.length||1!==c.length||2!==c[0].be)){if(1===n.length&&0===c.length){if(!this.hj(t,n[0],s))continue;u=!0,h.debug&&a(e)}r||!s.He.jj()?o.push(s):h.debug&&a(e)}return u},e.prototype.kj=function(t,i,n){return!(!n||i.be!==n.be)&&(!!n.Le()&&!(t.Jh(n)&&n.Re(t)<1))},e.prototype.lj=function(t,i,n,e){for(var r=!1,o=i.length-1;o>=0;o--){var s=i[o],h=s.be;h>2&&this.kj(t,s,null)?(n||this._h.mj(s,t),r=!0):h>=2&&0===n&&!e&&(n||this._h.nj(s,t))}return r},e.prototype.oj=function(){this._i=[]},e.prototype.Wh=function(t,i,n){return this.pj(t,i,n,0),0},e.prototype.pj=function(t,i,n,e,r){var o=this.qb.Ld(t,i),s=o.ae(1-n);if(!s.length)return!1;var u=o.Ch(),l=this.cj(o,s,e,r),p=[],f=this.ij(o,s,u,n,e,p),d=!1;if(0===e&&(f&&!l?(this._i.push(o),this.Xh[i][t]+=2,this.Xh[i][t]):this.Xh[i][t]<-2&&(d=!0,this.Xh[i][t]-=1e3,h.debug)),!f&&u.length<=1&&!this.bj(o,n))return!1;var g=this.lj(o,s,e,d);if(!p.length)return l||g;this.qb.Qd(t,i,n);for(var v=[!1,!1,!1],y=p.length-1;y>=0;y--)if(h.debug&&(a(n),p[y]),!this.ej(p[y],e)){if(1===p.length){p.pop();break}v[y]=!0}this.qb.Td();var b=this.qj(o,p,v,e);return h.debug&&(l||g||b)&&(a(n),c(t,i)),l||g||b},e.prototype.qj=function(t,i,n,e){switch(i.length){case 0:return!1;case 1:return!n[0]&&(e||this._h.fj(i[0],t),!0);case 3:case 2:return e||(n[1]?this._h.fj(i[0],t):this._h.fj(i[1],t)),!0;default:throw new Error("Unexpected in Hunter#getMultipleChaseThreat")}},e.prototype.ej=function(t,i){var n=t.Ne();if(1!==n.length)throw new Error("Unexpected: hunter #1: "+n.length);var e=n[0],r=t.color,o=!0;return this.bj(e,r)&&(this.qb.Qd(e.ce,e.de,r),o=this.rj(e,i),this.qb.Td()),h.debug,o},e.prototype.sj=function(t){for(var i=1-t.color,n=t.Oe,e=n.length-1;e>=0;e--){var r=n[e];if(r.color===i){var o=r.group;if(1===o.be){return o.Ne()[0].Jh(t.group)?this.ej(o,1)?1:-1:1}}}return 0},e.prototype.rj=function(t,i){var n=t.group;if(n.be<=1)return!0;if(n.be>2)return!1;var e=this.sj(t);if(0!==e)return e<0;var r=t.Ch();if(2!==r.length&&(r=n.Ne()),2!==r.length)throw new Error("Unexpected: hunter #2");var o=r[0],s=r[1];h.debug;var u=1-n.color;return this.pj(o.ce,o.de,u,i+1)||this.pj(s.ce,s.de,u,i+1)},e.prototype.tj=function(t){return this.rj(t,1)},e.prototype.uj=function(t,i,n){return this.pj(t,i,n,1,n===this.Ii)}},{"../../Move":21,"../../constants":51,"../../log":76,"../../test":81,"./Heuristic":32,"util":4}],34:[function(t,i,n){"use strict";function e(t){s.call(this,t),this.vj=[new o(this.Eb,u),new o(this.Eb,u)],this.di=[this.vj[c].od,this.vj[l].od]}var r=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,u=r.ld,a=r.EMPTY,c=r.mb,l=r.nb;h(e,s),i.g=e,e.prototype.si=function(){this.vj[c].init(0),this.vj[l].init(0);for(var t=1;t<=this.Eb;t++)for(var i=1;i<=this.Eb;i++){var n=this.qb.Ld(i,t),e=n.color;if(e!==a)for(var r,o=this.di[e],s=n.Oe,h=0;r=s[h],h<s.length;h++)if(o[r.de][r.ce]+=2,r.color===a)for(var u,p=r.Oe,f=0;u=p[f],f<p.length;f++)u!==n&&(o[u.de][u.ce]+=1)}}},{"../../Grid":17,"../../constants":51,"./Heuristic":32,"util":4}],35:[function(t,i,n){"use strict";function e(t){u.call(this,t),this.debug=!1,this.grid=new s(this.Eb,null),this.wj=[],this.xj="",this.yj=this.Zi("spaceInvasion",2,.01,4),this.zj=this.Zi("pressure",1,.01,2)}function r(){this.Dj=null,this.Ej=[!1,!1],this.Fj=0,this.Gj=[],this.Hj=[],this.Ij=[]}function o(t,i,n){this.name=t,this.Fj=i,this.group=n,this.Mj=1/0}var s=t("../../Grid"),h=t("./boan/GroupInfo"),u=t("./Heuristic"),a=t("util").inherits,c=t("../../log"),l=t("../../Move"),p=(t("../../test"),l.De);a(e,u),i.g=e,e.prototype.si=function(){this.debug=this.gi.Aj,this.grid.init(null),this.wj.length=0},e.prototype.Bj=function(t,i){u.prototype.si.call(this,t,i)},e.prototype.Wh=function(t,i){var n=this.grid.od[i][t];return n?n.Cj():0},e.prototype.Yi=function(t,i,n){var e=this.grid.od[i][t];e&&e.Cj(n,this.name)},r.prototype.Cj=function(t,i){var n=this.Fj;t&&n&&(t[i+"-base"]=n);var e=this.Gj;if(!e.length)return n;for(var r=e.length-1;r>=0;r--){var o=e[r],s=o.Fj*this.Hj[r];if(n+=s,t){var h=this.Hj[r];t[i+"-"+o+(1!==h?" factor:"+h.toFixed(2):"")]=s}}return n},e.prototype.Jj=function(t,i){return this.grid.od[i][t]},e.prototype.Kj=function(t,i){var n=this.grid.od[i][t];return n||(this.grid.od[i][t]=n=new r,n)},e.prototype.Bi=function(t,i){c.debug&&p(i),this.Kj(t.ce,t.de).Dj=i},e.prototype.Lj=function(t,i){var n=this.Jj(t.ce,t.de);return n&&n.Dj===i},e.prototype.dj=function(t,i){this.Kj(t.ce,t.de).Ej[i]=!0},e.prototype.Ej=function(t,i){var n=this.Jj(t.ce,t.de);return n&&n.Ej[i]},o.prototype.toString=function(){return this.name+(this.Mj!==1/0?" minMoves:"+this.Mj:"")+" score:"+this.Fj.toFixed(2)},e.prototype.Nj=function(t,i,n){this.xj=t+" on "+i.toString(1),n.ce===this.gi.Oj&&n.de===this.gi.Pj?(c.Wi(c.Xi),this.xj):c.level===c.Xi&&c.Wi(c.Qj)},e.prototype.Rj=function(t){var i=this.wj[t.zd];if(i)return i;for(var n=2*t.Xd.length,e=t.Ne(),r=0,s=e.length-1;s>=0;s--)r+=e[s].Hh();return n+=this.yj*Math.max(0,r-1),this.wj[t.zd]=i=new o("life/death of "+t.toString(1),n,t),i},e.prototype.Sj=function(t,i,n,e){if(!i)throw new Error("Unexpected");n=n||1,e=e||1,c.debug&&n&&n.toFixed(2);var r=this.Kj(i.ce,i.de),o=r.Gj,s=r.Hj,h=r.Ij,u=o.indexOf(t);return u<0?(o.push(t),s.push(n),h.push(e)):(s[u]=Math.max(s[u],n),h[u]=Math.min(h[u],e)),t.Mj=Math.min(t.Mj,e),t},e.prototype.ji=function(t){var i=t.ji;if(void 0!==i)return i;var n,e=t.Tj;n=e?e.Uj:[t];var r=this.Pi.Vj(n);return i=t.ji=this.Wj(r,t.group.color===this.gi.vb)},e.prototype.Wj=function(t,i){return t>=2?1:t<1.5?0:i?1:.5},e.prototype.Xj=function(t,i,n,e,r,o){e=e||1;var s,u=t[0].group.color===this.gi.vb,a=this.Pi.Vj(t),l=this.Wj(a,u);if(o){s=l-this.Wj(a+o,!0),s=Math.min(2*s,1)}else s=1-l;if(e*=s,c.debug&&h.Yj(t),e<.1)return void(c.debug&&h.Yj(t));for(var p=r||0,f=t.length-1;f>=0;f--)p+=t[f].group.be;for(f=t.length-1;f>=0;f--)this.Zj(t[f].group,i,n,e,p)},e.prototype.Zj=function(t,i,n,e,r){if(!(e<.1)){var o=this.Rj(t);return n||this.$j(t,i,e,r),this.Sj(o,i,e,r)}},e.prototype.$j=function(t,i,n,e){if(!(1===t.Xd.length&&t.Xd[0].Dh()||0===i.Hh()&&t.Xd.length<3)){e=e||1;for(var r=t.Pe(),o=r.length-1;o>=0;o--){var s=r[o];s.be===e&&(this.Zj(s,i,!0,n,e),this._j(s,i,n,e))}}},e.prototype._j=function(t,i,n,e){for(var r=t.He.ak(i),o=r.length-1;o>=0;o--)this.Xj(r[o],i,!0,n,e)},e.prototype.nj=function(t,i){var n=1/(t.be+1)*this.zj;if(this.ji(t.He)<.5){if(!this.gi.ii)return 0;n=this.Hi}this.Kj(i.ce,i.de).Fj+=n,this.debug&&i.ce===this.gi.Oj&&i.de===this.gi.Pj&&c.jh("MoveInfo "+p(1-t.color)+" - pressure at "+i+": "+n.toFixed(2))},e.prototype.gj=function(t){this.Kj(t.ce,t.de).Fj+=this.Hi},e.prototype.mj=function(t,i){this.debug&&this.Nj("race",t,i);var n=t.He,e=n.Tj?n.Tj.Uj:[n];this.Xj(e,i,!1)},e.prototype.bk=function(t,i,n,e){this.debug&&this.Nj("eye threat",t,i);var r=t.He,o=r.Tj?r.Tj.Uj:[r];return this.Xj(o,i,n===t.color,void 0,void 0,-e),!0},e.prototype.$h=function(t,i,n,e){var r=t[0];this.debug&&this.Nj("cut",r,i);for(var o=e===r.color,s=r.He.ck(t,i),h=s.length-1;h>=0;h--)this.Xj(s[h],n,o,void 0,1)},e.prototype.fj=function(t,i){this.debug&&this.Nj("kill",t,i);for(var n=t.He.ak(i),e=n.length-1;e>=0;e--)this.Xj(n[e],i,!1);this.Zj(t,i,!1,1,t.be)},e.prototype.dk=function(t,i){this.debug&&this.Nj("rescue",t,i),this._j(t,i),this.Zj(t,i,!0)}},{"../../Grid":17,"../../Move":21,"../../log":76,"../../test":81,"./Heuristic":32,"./boan/GroupInfo":46,"util":4}],36:[function(t,i,n){"use strict";function e(t){r.call(this,t),this.ek=null}var r=t("./Heuristic"),o=t("util").inherits,s=t("../../log"),h=t("../../Move"),u=h.lb;o(e,r),i.g=e,e.prototype.oj=function(){this.ek||(this.ek=this.gi.wi.fk)},e.prototype.Wh=function(t,i,n){if(this.di[1-n][i][t]<2&&this.di[n][i][t]<2&&0===this.qb.Ld(t,i).Ih(n))return 0;var e=this.qb.Qd(t,i,n),r=e.group,o=0;return s.debug&&u(t,i),1===r.be?1===r.Xd.length&&e.Ch()[0].Kd(this.Ii)?s.debug:(o-=2*r.Xd.length,s.debug):2===r.be&&(s.debug,this.ek.tj(e)&&(o-=2*r.Xd.length,s.debug)),this.qb.Td(),o}},{"../../Move":21,"../../log":76,"./Heuristic":32,"util":4}],37:[function(t,i,n){"use strict";function e(t){s.call(this,t),this.kk=[new o(this.Eb,a),new o(this.Eb,a)],this.lk=this.Zi("wideSpaceToEye",.7,.01,1),this.mk=this.Zi("stoneCountToEye",.33,.25,1)}var r=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,u=t("../../log"),a=r.ld,c=r.gk,l=r.hk,p=r.EMPTY,f=r.mb,d=r.nb,g=r.ik,v=r.jk;h(e,s),i.g=e,e.prototype.si=function(){this.nk()},e.prototype.nk=function(){this.kk[g].init(p),this.kk[v].init(p);for(var t=this.Eb;t>=1;t--)for(var i=this.Eb;i>=1;i--){var n=this.qb.Ld(i,t);if(n.color===p){var e=this.pk(i,t,n);if(null!==e){var r=this.gi.fi.ei(n);if(!r.qk&&!this._h.Lj(n,e)){for(var o=n.Oe,s=null,h=this.di[1-e],a=1,f=o.length-1;f>=0;f--){var d=o[f];d.color===e&&(s=d.group),1!==a||d.Fh()||0!==h[d.de][d.ce]||d.Hh()!==d.Oe.length||(a=2)}if(!s){if(!n.Dh())continue;if(!(s=n.Eh().group))continue}if(n.Fh()){for(var y=!1,b=1-e,m=l;m>=c;m-=2){var w=n.yh[m];if(w.color===b){y=!0;break}}if(y)continue}var x=(i+t)%2,k=this.kk[x].od;k[t][i]=e,s.He.rk(x,a),u.debug}}}}},e.prototype.sk=function(t,i){var n=t.ce,e=t.de,r=(n+e)%2;return this.kk[r].od[e][n]===i},e.prototype.pk=function(t,i,n){var e=this.di[f][i][t],r=this.di[d][i][t],o=e>r?f:d,s=Math.max(e,r),h=Math.min(e,r);if(h>1)return null;var u=0,a=this.Eb;return 1===h&&n.Dh()&&n.Eh().color===p&&u++,1!==t&&t!==a&&1!==i&&i!==a||u++,s+u-3-h<0?null:o},e.prototype.tk=function(t){for(var i=0,n=t.color,e=this.di[1-n],r=this.di[n],o=t.Xd,s=o.length-1;s>=0;s--){var h=o[s];if(!h.Fh())for(var u=h.yh.length-1;u>=0;u--){var a=h.yh[u];if(a.color===p&&!(r[a.de][a.ce]>4)){var c=e[a.de][a.ce];if(!(c>1)){var l=a.Gh();if(0!==l)if(1!==l){var f=a.ce-h.ce,d=a.de-h.de,g=a.ce+f,v=a.de+d;0===e[v][g]&&i++}else{if(c>0)continue;i++}}}}}return i},e.prototype.Vj=function(t){for(var i=0,n=0,e=t.length-1;e>=0;e--){var r=t[e];i+=r.uk(),n+=r.group.Xd.length}n<6&&(i=Math.min(i,n*this.mk));var o=0;for(e=t.length-1;e>=0;e--)o+=this.tk(t[e].group);return i+=o*this.lk}},{"../../Grid":17,"../../constants":51,"../../log":76,"./Heuristic":32,"util":4}],38:[function(t,i,n){"use strict";function e(t){h.call(this,t),this.xk=new s(this.Eb,f),this.yk=this.xk.od,this.zk=new s(this.Eb,f),this.vj=[new s(this.Eb,f),new s(this.Eb,f)],this.Ak=new s(this.Eb,f),this.Bk()}function r(t,i,n){switch(t){case b:return[i,1];case m:return[1,i];case w:return[i,n];case x:return[n,i]}}var o=t("../../constants"),s=t("../../Grid"),h=t("./Heuristic"),u=t("util").inherits,a=t("../../log"),c=t("../../Move"),l=t("../../Stone"),p=c.De,f=o.ld,d=o.EMPTY,g=o.mb,v=o.nb,y=o.NEVER,b=o.vk,m=o.Oh,w=o.wk,x=o.Nh,k=o.wh,j=o.xh,q=s.te,B=l.zh,S=l.Ah;u(e,h),i.g=e,e.prototype.si=function(){this.xk.ve(this.qb),this.Ck(g),this.Ck(v),this.Dk()},e.prototype.Ek=function(t,i,n){var e=n===g?-1:1,r=y;return s.te[2+this.vj[g].od[i][t]]===e&&r++,s.te[2+this.vj[v].od[i][t]]===e&&r++,r},e.prototype.Fk=function(t,i,n){return this.Ak.od[i][t]*(n===g?1:-1)},e.prototype.Gk=function(t,i,n){return s.te[2+this.vj[1-n].od[i][t]]*(n===g?1:-1)},e.prototype.toString=function(){return"\nBLACK first:\n"+this.vj[g]+"WHITE first:\n"+this.vj[v]},e.prototype.Hk=function(){this.xk.ve(this.qb);var t=this.vj[g];this.Ik(this.xk,t.K(this.xk)),this.Jk(t.od,v),this.Jk(t.od,g);var i=this.gi.fi;return i.Pg(this.qb),[i.Og().od,i.Qg()]},e.prototype.Ik=function(t,i){for(var n=t.od,e=i.od,r=~~(2*Math.random()),o=this.Eb;o>=1;o--)for(var s=n[o],h=this.Eb;h>=1;h--)s[h]===d&&(this.Kk(n,e,h,o,r,1-r)?(this.Lk(e,h,o,r),r=1-r):this.Kk(n,e,h,o,1-r,r)&&this.Lk(e,h,o,1-r))},e.prototype.Mk=function(t){return this.vj[t].Bd(function(t){return"@?O"[s.te[2+t]+1]})},e.prototype.Nk=function(t){for(t=this.qb.Od()-t;t-- >0;)this.qb.Td()},e.prototype.Ck=function(t){var i=this.qb.Od(),n=this.vj[t];this.Ok(n,t),this.gi.fi.Pk(this.qb,n,t),this.Nk(i)},e.prototype.Dk=function(){for(var t=this.vj[g].od,i=this.vj[v].od,n=this.Ak.od,e=this.Eb;e>=1;e--)for(var r=this.Eb;r>=1;r--)n[e][r]=(q[2+t[e][r]]+q[2+i[e][r]])/2;a.debug&&this.xk},e.prototype.Ok=function(t,i){this.Qk=null,this.Rk(this.xk,t.K(this.xk),i),a.debug,this.Jk(t.od,i),a.debug,this.Sk(this.zk.K(t)),this.Qk=this.zk.od,a.debug&&this.zk,this.Rk(this.xk,t.K(this.xk),i),a.debug,this.Jk(t.od,i),a.debug},e.prototype.Rk=function(t,i,n){a.debug&&p(n);for(var e=t.od,r=i.od,o=this.Eb;o>=1;o--)for(var s=e[o],h=this.Eb;h>=1;h--)s[h]===d&&this.Kk(e,r,h,o,n,1-n)&&this.Lk(r,h,o,n)},e.prototype.Sk=function(t){for(var i=t.od,n=1;n<=this.Eb;n++)for(var e=1;e<=this.Eb;e++)if(this.yk[n][e]===d){var r=i[n][e];if(r!==d){var o=this.Tk(i,e,n,1-r);0===o&&(i[n][e]=d)}}},e.prototype.Kk=function(t,i,n,e,r,o){switch(this.Tk(t,n,e,r)){case 0:if(!this.Uk(t,n,e,r))return!1;break;case 4:return!1;case 3:if(0===this.Tk(t,n,e,o))return!1}return!0},e.prototype.Lk=function(t,i,n,e,r){if(this.Qk){if(!r&&this.Qk[n][i]===d)return;if(this.qb.Ld(i,n).Gd(e))return;this.qb.Qd(i,n,e)}t[n][i]=e},e.prototype.Tk=function(t,i,n,e){for(var r=0,o=k;o<=j;o++){var s=B[o];t[n+s[1]][i+s[0]]===e&&r++}return r},e.prototype.Uk=function(t,i,n,e){for(var r=k;r<=j;r++){var o=S[r];if(t[n+o[1]][i+o[0]]===e)return!0}return!1},e.prototype.Bk=function(){for(var t=[],i=k;i<=j;i++)for(var n=B[i][0],e=B[i][1],o=this.Eb-1;o>=2;o--){var s=r(i,o,this.Eb);t.push([s[0],s[1],n,e])}this.Vk=t},e.prototype.Jk=function(t,i){for(var n,e,r,o,s,h,u=this.Vk,a=u.length-1;a>=0;a--){var c=u[a],l=c[0],p=c[1];if(t[p][l]===d){var f=c[2],g=c[3],v=l+f,y=p+g,b=t[y][v];if(b===d){var m=v+f,w=y+g;if((b=t[w][m])===d){var x=m+f;if((b=t[w+g][x])===d);else{if(b!==i)continue;if(n=t[p-f][l-g],e=t[p+f][l+g],r=t[y-f][v-g],o=t[y+f][v+g],s=t[w-f][m-g],h=t[w+f][m+g],n===b&&r===b&&s===b)continue;if(e===b&&o===b&&h===b)continue;if(this.Lk(t,m,w,b,!0),n===b&&r===b)continue;if(e===b&&o===b)continue;if(this.Lk(t,v,y,b,!0),n===b||e===b)continue;this.Lk(t,l,p,b,!0)}}else{if(b!==i)continue;if(n=t[p-f][l-g],e=t[p+f][l+g],r=t[y-f][v-g],o=t[y+f][v+g],n!==1-b&&r===b)continue;if(e!==1-b&&o===b)continue;if(this.Lk(t,v,y,b,!0),n===b||e===b)continue;this.Lk(t,l,p,b,!0)}}else{if(b!==i)continue;if(n=t[p-f][l-g],e=t[p+f][l+g],r=t[y-f][v-g],o=t[y+f][v+g],n===b&&r!==1-b)continue;if(e===b&&o!==1-b)continue;this.Lk(t,l,p,b,!0)}}}}},{"../../Grid":17,"../../Move":21,"../../Stone":27,"../../constants":51,"../../log":76,"./Heuristic":32,"util":4}],39:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.Wk=[],this.Xk=this.Zi("allyInfl",.03,.01,1),this.Yk=this.Zi("enemyInfl",.13,.01,1)}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),u=t("../../Move"),a=t("../../Stone"),c=u.De,l=u.lb,p=r.EMPTY,f=a.zh,d=r.wh,g=r.xh;s(e,o),i.g=e,e.prototype.si=function(t,i){var n=this.Wk;n.length=0,o.prototype.si.call(this,t,i);for(var e=n.length-1;e>=0;e--)this.Zk(n[e],i)},e.prototype.Wh=function(t,i,n){return this.$k(t,i,1-n,!0),this.$k(t,i,n)},e.prototype._k=function(t,i,n,e,r){if(!(this.Xh[t.de][t.ce]<0)){var o=1-n.group.color,s=this.Mi.Yh(t,o);s&&(this._h.ji(s.group.He)<.5||(h.debug&&(c(1-o),e.toFixed(2)),r[t.de][t.ce]+=e,this.Gi.od[t.de][t.ce]+=e))}},e.prototype.Zk=function(t,i){var n=t[0],e=t[1],r=t[2];if(this._k(n,n,e,r,i),!this._h.Ej(n,e.color)){var o=e.group;if(!n.Jh(o))for(var s=0;s<8;s++){var h=n.yh[s];h.color===p&&(h.Jh(o)&&this._k(h,n,e,r,i))}}},e.prototype.$k=function(t,i,n,e){var r=this.di[1-n][i][t];if(0===r)return 0;var o=this.di[n][i][t];if(o>=4)return 0;if(!e&&this.Xh[i][t]<0)return 0;var s=this.qb.Ld(t,i);if(0===s.Hh())return 0;var u=this.Mi.Yh(s,n);if(!u)return 0;if(!e&&!this.Mi.Yh(s,1-n))return 0;var a=this.al(t,i,n),p=a+this.Yk*r-this.Xk*o;return p*=this._h.ji(u.group.He),e?p?(h.debug&&(l(t,i),p.toFixed(2)),this.Wk.push([s,u,p])):0:(h.debug&&(c(n),l(t,i),p.toFixed(2)),p)},e.prototype.bl=function(t,i,n,e,r){var o=this.qb.Ld(t,i);if(o.color!==p)return 0;var s=this.Ri.Gk(t,i,e);if(o.Fh()&&(s/=2),s<=0)return 0;if(0==--r)return s;var h=f[n][0],u=f[n][1],a=f[(n+3)%4],c=a[0],l=a[1];return s+=this.bl(t+h+c,i+u+l,n,e,r),s+=this.bl(t+h-c,i+u-l,n,e,r)};e.prototype.al=function(t,i,n){for(var e=Math.max(0,this.Ri.Gk(t,i,n)),r=d;r<=g;r++)e+=this.bl(t+f[r][0],i+f[r][1],r,n,1);var o=this.qb.Ld(t,i);return o.Dh()?e=Math.max(e-1,0):o.Fh()&&(e=Math.max(e-.85,0)),e}},{"../../Move":21,"../../Stone":27,"../../constants":51,"../../log":76,"./Heuristic":32,"util":4}],40:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.ek=null}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),u=t("../../Move"),a=u.De,c=r.EMPTY,l=r.ld;s(e,o),i.g=e,e.prototype.oj=function(){this.ek||(this.ek=this.gi.wi.fk)},e.prototype.Wh=function(t,i){var n=this.qb.Ld(t,i);return this.cl(t,i,n),0},e.prototype.cl=function(t,i,n){for(var e,r,o=[],s=this.color,u=n.ae(s),c=0;r=u[c],c<u.length;c++)1===r.be?o.push(r):2===r.be&&o.push(r);if(o.length&&(h.debug&&(a(s),o[0],o.length>1&&o.length),this.ek.uj(t,i,this.Ii))){this.qb.Qd(t,i,s),h.debug&&a(s);var l=!this.ek.tj(n);this.qb.Td();var p;if(!l){for(e=o.length-1;e>=0;e--)if(r=o[e],1!==r.be){var f=r.Ne();if(p=f[0]===n?f[1]:f[0],this.qb.Qd(p.ce,p.de,s),l=!this.ek.tj(p),this.qb.Td(),l)break}if(!l)return void(h.debug&&a(this.color));n=p}for(e=o.length-1;e>=0;e--)r=o[e],p&&1===r.be||(this._h.dk(r,n),h.debug)}},e.prototype.dl=function(t,i,n){var e=0,r=0,o=this.Eb;if(1===i||i===o)r=1;else{if(1!==n&&n!==o)throw new Error("not along border");e=1}var s=r,h=e;if(this.qb.Ld(i+s,n+h).color===l&&(s=-s,h=-h),this.qb.Ld(i+s,n+h).group!==t){var u=t.color,a=this.qb.Ld(i+e,n+r);for(a.group===t&&(e=-e,r=-r);;)switch(i+=e,n+=r,a=this.qb.Ld(i,n),a.color){case l:return null;case u:return a.group.be>2?a.group:null;case c:var p=this.qb.Ld(i+s,n+h);if(p.color===c)continue;return p.color===1-u?null:p.group.be>2?p.group:null;default:return null}}}},{"../../Move":21,"../../constants":51,"../../log":76,"./Heuristic":32,"util":4}],41:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.kk=t.wi.Qi.kk}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),u=t("../../Move"),a=u.De,c=r.EMPTY,l=r.NEVER,p=r.el,f=r.ik,d=r.jk;s(e,o),i.g=e,e.prototype.si=function(t,i){o.prototype.si.call(this,t,i);var n=this.gi.fi.zi;for(var e in n){var r=n[~~e].group;this.fl(i,r)}},e.prototype.fl=function(t,i){var n=[];if(i.He.gl(n)===p){var e=this.qb.Ld(n[0],n[1]);h.debug&&a(this.color),this._h.bk(i,e,this.color,.5)}},e.prototype.Wh=function(t,i,n){var e=this.qb.Ld(t,i);return this.hl(e,n),this.hl(e,1-n),this.il(e,n)},e.prototype.hl=function(t,i){if(this.Ri.Ek(t.ce,t.de,i)!==l){var n=this.gi.fi.ei(t);n.qk&&n.color===i?this.jl(t,i,n):this.kl(t,i)}},e.prototype.jl=function(t,i,n){switch(n.ll){case 1:for(var e=t.Oe.length-1;e>=0;e--){var r=t.Oe[e];if(r.color===i&&1===r.group.be)return h.debug&&a(i),this._h.bk(r.group,t,i,1)}return;case 2:var o=n.qk;if(this._h.Lj(t,i))return this._h.bk(o.group,t,i,1);if(o.ml>1)return;var s=o.nl.length&&o.nl[0].group;if(s&&t.Jh(s)&&(1===s.be||!t.Dh()))return this._h.bk(o.group,t,i,1);return;default:return}},e.prototype.kl=function(t,i){if(!(this.Xh[t.de][t.ce]<0)&&this.Mi.Yh(t,1-i)){for(var n=this.kk[f].od,e=this.kk[d].od,r=this.di[1-i],o=null,s=null,h=0,u=t.Oe.length-1;u>=0;u--){var a=t.Oe[u];switch(a.color){case c:var l=a.ce,p=a.de;if(n[p][l]===i||e[p][l]===i){if(1===r[p][l]&&2!==r[t.de][t.ce])continue;o=a,h++,o.Dh()&&2===o.Hh()&&h++}break;case i:s||(s=a.group)}}o&&(s||(s=o.ae(i)[0]),this._h.bk(s,t,i,h/2))}},e.prototype.il=function(t,i){var n,e=t.Ch(),r=e.length,o=this.gi.fi.ei(t);if(o.qk&&o.color===i){if(0===r)return-1;if(1===r)return this.Pi.sk(e[0],i)?0:-1;if(1===this._h.ji(o.qk))return 0;var s=t.Ih(i);if(3===r&&1===s)return.5;for(n=r-1;n>=0;n--){var h=e[n];if(!this._h.Lj(h,i)&&1===h.Hh())return.5}}else{e=t.Ch();var u=!1;for(n=r-1;n>=0&&!u;n--)u=this.Pi.sk(e[n],i);if(!u)return 0;if(t.Dh())return-1;if(t.Fh())return-.2;if(r>=3&&!this.di[1-i][t.de][t.ce])return 1}return 0}},{"../../Move":21,"../../constants":51,"../../log":76,"./Heuristic":32,"util":4}],42:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.ol=this.Zi("enemyInfl",.07,.01,.5),this.pl=this.Zi("allyInfl",.5,.01,.5),this.ql=this.Zi("border",10,0,20),this.rl=this.Eb<=9?[0,.2,.8,.95,1]:[0,.2,.8,1,.95,.8]}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=r.EMPTY;s(e,o),i.g=e,e.prototype.Wh=function(t,i){var n=0;if(!this.gi.ii){var e=this.Ri.Fk(t,i,this.color);e<0&&(n+=e)}for(var r=this.qb.Ld(t,i),o=this.di[this.Ii],s=this.di[this.color],u=o[i][t],a=s[i][t],c=r.Oe.length-1;c>=0;c--){var l=r.Oe[c];if(l.color!==h)return n;u+=o[l.de][l.ce],a+=s[l.de][l.ce]}var p=1+this.Eb/9*(this.ol*Math.max(u-3,0)+this.pl*Math.max(a-3,0)),f=this.rl.length-1,d=Math.min(this.Gh(t),f),g=Math.min(this.Gh(i),f);return n+this.rl[d]*this.rl[g]*this.ql/p},e.prototype.Gh=function(t){return Math.min(t-1,this.Eb-t)}},{"../../constants":51,"./Heuristic":32,"util":4}],43:[function(t,i,n){"use strict";function e(t){this.sl=t.group.zd,this.Uj=[t],t.Tj=this}function r(t){return"#"+t.group.zd}var o=t("../../../log");i.g=e,e.prototype.toString=function(){return this.Uj.map(r).toString()},e.prototype.tl=function(t){if(!t.Tj)return o.debug&&this.toString(),this.Uj.push(t),void(t.Tj=this);if(t.Tj.sl!==this.sl){o.debug&&(t.Tj.toString(),this.toString());for(var i=t.Tj.Uj,n=i.length-1;n>=0;n--)this.Uj.push(i[n]),i[n].Tj=this}},e.prototype.remove=function(t){var i=this.Uj.indexOf(t);if(i<0)throw new Error("Band.remove on wrong Band");this.Uj.splice(i,1),t.Tj=null,o.debug&&this.toString()},e.ul=function(t){if(1===t.length)throw new Error("add Band of 1");for(var i=null,n=0;n<t.length;n++)if(t[n].He.Tj){i=t[n].He.Tj;break}var r=0;for(i||(i=new e(t[r++].He)),n=r;n<t.length;n++)i.tl(t[n].He)}},{"../../../log":76}],44:[function(t,i,n){"use strict";function e(t){this.Fg=t,this.version="chuckie",this.mode=null,this.ii=!1,this.qb=null,this.yl=null,this.Gi=null,this.zl=[],this.zi=null,this.Al=[0,0],this.Bl=[0,0],this.Cl=null}function r(t){return t>1&&t<2?t-1:t}function o(t){if(!(t[m]===t[w]||t[m]>=x&&t[w]>=x))return t[m]=r(t[m]),t[w]=r(t[w]),t[m]>t[w]?m:w}function s(t,i){for(var n=0;n<i.length;n++){var e=i[n];p.debug&&(t.name,e.group.zd),e.Yl()!==k&&(i[n]=null)}var r=0;for(n=0;n<i.length;n++)i[n]&&(i[n].Zl(t.name+": liveliness="+i[n].$l.toFixed(4)),r++);return r}function h(t,i){for(var n=0;n<i.length;n++)i[n].Zl(t.name);return i.length}function u(){return 0}var a=t("../../../constants"),c=t("../../../Grid"),l=t("./GroupInfo"),p=t("../../../log"),f=t("../../../Move"),d=t("./Void"),g=t("./ZoneFiller"),v=f.De,y=a.EMPTY,b=a.ld,m=a.mb,w=a.nb,x=l.vl,k=l.wl,j=l.xl;i.g=e,e.prototype.Pg=function(t){p.debug,this.Al[m]=this.Al[w]=0,this.Bl[m]=this.Bl[w]=0,this.Gi&&this.Gi.Eb===t.Eb||(this.Gi=new c(t.Eb,b)),this.Dl(0,t,this.Gi)&&(this.El(),this.ii||t.Wd(this.Bl))},e.prototype.Og=function(){return this.Gi},e.prototype.Qg=function(){var t=this.Al,i=this.Bl,n=this.Fg.ub;return[[t[m]+i[w],t[w]+i[m]+n],[[t[m],i[w],0],[t[w],i[m],n]]]},e.prototype.ei=function(t){return this.yl.od[t.de][t.ce]},e.prototype.xi=function(t,i){this.Dl(2,t,i)},e.prototype.ti=function(){this.El()},e.prototype.Pk=function(t,i,n){this.Dl(1,t,i)&&this.El(n)},e.prototype.Ad=function(){return this.yl.Ad()},e.prototype.Ed=function(){for(var t,i="Grid:\n"+this.yl.Fd()+"Voids:\n",n=this.zl,e=0;t=n[e],e<n.length;e++)i+=t.toString()+"\n";i+="Groups:\n";for(var r in this.zi)i+=this.zi[~~r].toString()+"\n";return this.Al&&(i+="Score:"+this.Al.map(function(t,i){return" player "+i+": "+t+" points"})),i},e.prototype.Dl=function(t,i,n){return this.mode=t,this.ii=this.Fg.useAreaScoring&&0===t,this.qb=i,this.yl=n,this.Cl=new g(i,n),0!==i.Od()&&(n.ve(i),this.Fl(),this.Gl(),this.Hl(),!0)},e.prototype.El=function(t){2===this.mode?this.Il():(this.Jl(),this.Il(t),this.Kl(),this.Ll())},e.prototype.Ml=function(t,i){var n=this.zi[t.zd];n||(t.He&&t.He.fi===this?t.He.Nl():t.He=new l(t,this),n=this.zi[t.zd]=t.He),n.Ol.push(i)},e.prototype.Fl=function(){p.debug;var t=c.oe;this.zi={},this.zl.length=0;for(var i,n,e=this.qb,r=new d(e,t++),o=1;o<=e.Eb;o++)for(var s=1;s<=e.Eb;s++){var h=this.Cl.Pl(s,o,y,r);if(0!==h){this.zl.push(r);for(var u=m;u<=w;u++)for(n=r.Ql[u],i=n.length-1;i>=0;i--)this.Ml(n[i],r);r=new d(e,t++)}}},e.prototype.Gl=function(){for(var t in this.zi)this.zi[~~t].Rl()},e.prototype.Hl=function(){p.debug;for(var t=this.zl,i=t.length,n=i-1;n>=0;n--)t[n].Sl();for(var e;;){for(e=!1,n=i-1;n>=0;n--)t[n].Tl()&&(e=!0);if(!e)break}for(n=i-1;n>=0;n--)t[n].Ul()},e.prototype.Jl=function(){if(!this.ii){var t=this.qb;if(!(t.Od()<2*t.Eb))for(var i=[0,0],n=[0,0];;){for(var e=!1,r=this.zl.length-1;r>=0;r--){var s=this.zl[r];if(void 0===s.color&&!(s.ll>2*t.Eb)){i[m]=i[w]=n[m]=n[w]=0;for(var h=m;h<=w;h++)for(var u=s.Ql[h].length-1;u>=0;u--){var a=s.Ql[h][u].He;i[h]+=a.Vl(),n[h]+=a.Wl()}if(!(n[m]>4&&n[w]>4)){var c=o(i);void 0!==c?(p.debug&&(v(c),i[c].toFixed(4),i[1-c].toFixed(4)),s.Xl(c),e=!0):p.debug&&i[0]}}}if(!e)break}}};var q={name:"brothers",l:l.prototype._l},B={name:"singleEye",l:l.prototype.am,bm:s},S={name:"race",l:l.prototype.Yl,bm:u},A={name:"atari",l:l.prototype.cm},E={name:"final",l:l.prototype.dm},C=[];C[0]=[q,A,B,S,E],C[1]=[q,B],C[2]=[q,B,S],e.prototype.em=function(t,i){p.debug&&t.name;var n=0,e=0,r=[];for(var o in this.zi){var s=this.zi[~~o];if(!s.fm&&!s.gm)switch(e++,t.l.call(s,i)){case k:r.push(s);break;case j:n++}}return r.length&&(n+=t.bm?t.bm(t,r):h(t,r)),p.debug&&n&&t.name,n===e?0:0===n?e:-n},e.prototype.Il=function(t){if(!this.ii){for(var i,n=C[this.mode],e=0;e<n.length;){if(0===(i=this.em(n[e++],t)))return void this.Hl();i<0&&(e=0,this.Hl())}p.debug}},e.prototype.Kl=function(){for(var t=[],i=this.zl.length-1;i>=0;i--){var n=this.zl[i];t[m]=t[w]=!1;for(var e=m;e<=w;e++)for(var r,o=n.Ql[e],s=0;r=o[s],s<o.length;s++)if(this.ii||r.He.Vl()>=2){t[e]=!0;break}t[m]&&t[w]?n.hm():this.ii&&(n.color=t[m]?m:w)}},e.prototype.Ll=function(){this.im(),this.jm(),this.km()},e.prototype.im=function(){if(this.ii)for(var t in this.zi){var i=this.zi[~~t].group;this.Al[i.color]+=i.Xd.length}},e.prototype.jm=function(){if(!this.ii)for(var t in this.zi){var i=this.zi[~~t];if(i.gm){
for(var n=!1,e=i.lm.length-1;e>=0;e--)if(!i.lm[e].He.gm){n=!0;break}var r=i.group.color;if(!i.lm.length||n){var o=i.group.Xd[0],s=this.Cl.Pl(o.ce,o.de,r,c.re+r);this.Bl[r]+=s,this.Al[1-r]+=s}else for(var h=i.Ol.length-1;h>=0;h--)i.Ol[h].Xl(r)}}},e.prototype.km=function(){for(var t=this.yl.od,i=[],n=this.zl.length-1;n>=0;n--){var e=this.zl[n],r=e.mm(this.ii?null:i);if(r){this.Al[e.color]+=r-i.length,this.Cl.Pl(e.ce,e.de,e,c.se+e.color);for(var o=i.length-1;o>=0;o--){var s=i[o];t[s.de][s.ce]=c.qe}}else this.Cl.Pl(e.ce,e.de,e,c.qe)}}},{"../../../Grid":17,"../../../Move":21,"../../../constants":51,"../../../log":76,"./GroupInfo":46,"./Void":47,"./ZoneFiller":48}],45:[function(t,i,n){"use strict";function e(t,i){this.Ci=t,this.Ql=[],this.color=i[0].color,this.hi=!1,this.nm(i)}i.g=e,e.prototype.nm=function(t){for(var i=this.Ql,n=t.length-1;n>=0;n--){var e=t[n];i.indexOf(e)<0&&i.push(e)}}},{}],46:[function(t,i,n){"use strict";function e(t,i){this.fi=i,this.om=[],this.Ol=[],this.nl=[],this.lm=[],this.pm=[0,0],this.Ai=[],this.qm=[],this.rm=[],this.group=t,this.Nl()}function r(t){return t>f?t>d?"ALWAYS":"SOMETIMES":"NEVER"}function o(t,i,n){for(var e=i.length-1;e>=0;e--)for(var r=i[e].He,o=t.length-1;o>=0;o--)if(!(t[o].indexOf(r)<0)){n!==-1&&n!==o?(t[n]=t[n].concat(t[o]),t.splice(o,1),o<n&&n--):n=o;break}return n}function s(t,i,n,e){var r=-1;r=o(t,n,r),r=o(t,e,r),r<0?t.push([i]):t[r].push(i)}function h(t,i,n){switch(t){case 4:return 4===i[2];case 5:return 1===i[3]&&3===i[2];case 6:if(2===i[3]&&4===i[2]){for(var e=0,r=0;r<6;r++)if(!n[r].Fh()&&++e>2)return!1;return!0}return 1===i[4]&&3===i[2]&&2===i[1];default:return!1}}function u(t){return.0202===t||1.0202===t}var a=t("../../../constants"),c=t("./Band"),l=t("../../../log"),p=a.EMPTY,f=a.NEVER,d=a.el,g=a.ALWAYS,v=a.ik,y=a.jk;i.g=e;var b=e.wl=-1,m=e.xl=1,w=e.sm=0,x=e.vl=1e3;e.prototype.Nl=function(){this.ml=this.$l=0,this.om.length=0,this.Ol.length=0,this.Tj=null,this.fm=this.gm=!1,this.ji=void 0,this.tm=void 0,this.nl.length=0,this.lm.length=0,this.pm[v]=this.pm[y]=0,this.Ai.length=0,this.qm.length=0,this.rm.length=0,this.um=0},e.vm=function(t){return"#"+t.group.zd},e.prototype.toString=function(){var t=this.Tj?this.Tj.toString():"";return this.group.toString()+" (isAlive:"+this.fm+" isDead:"+this.gm+" voids:"+this.om.length+" brothers:["+t+"] deadEnemies:["+this.nl.map(e.vm)+"])"},e.prototype.wm=function(t){return l.debug,this.om.push(t),this.ml++,this},e.prototype.xm=function(t){var i=this.om.indexOf(t);if(i===-1)throw new Error("remove unknown void");l.debug,this.om.splice(i,1),this.ml--},e.prototype.Rl=function(){for(var t=this.group,i=t.color,n=[],e=[],r=[],o=t.Ne(),s=o.length-1;s>=0;s--)for(var h=o[s],u=h.Oe,a=null,l=u.length-1;l>=0;l--){var p=u[l];if(p.color===i&&p.group!==t){a=p.group;var f=n.indexOf(a);f>=0?r[f]!==h&&(e[f]=!1):(n.push(a),e.push(!0),r.push(h))}}if(n.length){for(var d=n.length-1;d>=0;d--)if(e[d]){var g=r[d],v=this.fi.ei(g).ym(g,[t,n[d]]);this.Ai.push(v),this.qm.push(n[d])}else this.rm.push(n[d]);n.push(t),c.ul(n)}},e.Yj=function(t){return"subband["+t.length+" groups: "+t.map(function(t){return t.group.toString(1)}).join(", ")+"]"},e.prototype.zm=function(t){for(var i=[],n=this.qm.length-1;n>=0;n--)this.Ai[n].Ci!==t&&i.push(this.qm[n]);return i},e.prototype.ck=function(t,i){for(var n,e=[],r=t.length-1;r>=0;r--){var o=t[r].He,h=o.Tj;if(h){if(h===n)continue;n=h;for(var u=h.Uj.length-1;u>=0;u--){var a=h.Uj[u];s(e,a,a.rm,a.zm(i))}}else e.push([o])}return e},e.prototype.ak=function(t){var i=this.Tj;if(!i)return[];for(var n=[],e=i.Uj.length-1;e>=0;e--){var r=i.Uj[e];r!==this&&s(n,r,r.rm,r.zm(t))}return n},e.prototype.Am=function(){if(this.ml>=2)return f;var t=this.uk();return t>=3?f:0===t?g:d},e.prototype.Bm=function(){if(this.Am()===f)return!1;if(this.rm.length)return!1;for(var t=this.group.color,i=0,n=0,e=this.Ol.length-1;e>=0;e--){var r=this.Ol[e];r.color===t&&0!==r.Cm&&(i++,r.Cm>=3&&n++,this.nl.length&&n++)}return!(i+n>=2)},e.prototype.Zl=function(t){this.gm=!0;for(var i=this.Ol,n=this.group.color,e=1-n,r=null,o=i.length-1;o>=0;o--){var s=i[o],h=s.Ql[e],u=0;if(h.length){for(var a=h.length-1;a>=0;a--)u+=h[a].Xd.length;s.ll>u||(s.Xl(e),r=s)}}if(!r)return void l.debug;for(var c=this.lm=this.group.Pe(),p=c.length-1;p>=0;p--){var f=c[p];f.He.nl.push(this);for(var d=p-1;d>=0;d--){var g=c[d],v=g.He;if(v.qm.indexOf(f)===-1){v.qm.push(f);var y=r.ym(r.Dm[0],[f,g]);v.Ai.push(y)}}}l.debug},e.prototype.Vl=function(t){if(this.fm||this.ml>=2&&!this.gm)return x;for(var i,n=0,e=this.group.color,r=this.group.be,o=this.Ol.length-1;o>=0;o--){var s=this.Ol[o],h=s.ll;if(s.qk)s.qk===this&&(n+=h);else{var u=s.Ql[e];if(1===u.length)n+=h;else{var a=this.group.zd,c=a;for(i=u.length-1;i>=0;i--)c=Math.min(u[i].zd,c);a===c&&(n+=h)}}}if(n=Math.min(r,n)/100,t||(n+=r/1e4),this.gm)return 0+n;var p=0,f=0;if(!t&&this.Tj){var d=this.Tj.Uj;for(i=d.length-1;i>=0;i--)d[i]!==this&&(f+=d[i].Vl(!0))}if(!t){var d=this.rm;for(i=d.length-1;i>=0;i--)p+=d[i].He.Vl(!0);for(d=this.qm,i=d.length-1;i>=0;i--)p+=d[i].He.Vl(!0)}return p!==f&&(l.debug,p=f),this.ml+p+n},e.prototype.gl=function(t){if(this.ml>1)return g;if(0===this.ml)return f;var i=this.om[0],n=i.ll;if(n>6)return g;var e=this.group,r=e.color;if(n<3&&!i.Ql[1-r].length)return f;l.debug;for(var o,s=null,u=0,a=0,c=0,v=null,y=null,b=0,m=i.Dm,w=!1,x=[0,0,0,0,0],k=0;k<n;k++){for(var j=m[k],q=0,B=0,S=0,A=j.Oe.length-1;A>=0;A--){var E=j.Oe[A];switch(E.color){case p:S++;break;case r:B++;break;default:if(1===E.group.be){S++,b+=2;break}q++,v?E.group!==v&&(y=E.group):v=E.group}}if(q){if(S+(B?1:0)<2)continue}else if(b++,o=j,x[S]++,S<2)continue;if(l.debug,c++,j.Dh()&&(w=!0),s&&!s.Dh()){if(q<a)continue;if(S+q<=u+a)continue}s=j,a=q,u=S}if(w&&c>1&&c--,l.debug,!s)return f;if(1===b&&!y&&v&&v.Xd.length<3&&this.Em(v,o,s))return f;if(c>=2){if(a)return g;if(!h(n,x,m))return g}return t[0]=s.ce,t[1]=s.de,d},e.prototype.Em=function(t,i,n){for(var e=i.Oe.length-1;e>=0;e--){var r=i.Oe[e];if(r.color===p&&r!==n&&r.Jh(t))return!0}return!1},e.prototype._l=function(){if(!this.Tj)return w;for(var t=this.Tj.Uj,i=0,n=!1,e=t.length-1;e>=0;e--){var r=t[e];r!==this&&(n||r.fm?n=r.fm=!0:(i+=r.ml)>=2&&(n=r.fm=!0))}return n?(l.debug,this.fm=!0,m):w},e.prototype.Fm=function(){if(this.Tj)return!1;if(this.group.Xd.length>=6)return!1;for(var t=this.Ol.length-1;t>=0;t--)if(this.Ol[t].color===this.group.color)return!1;return!0},e.prototype.am=function(t){if(this.ml>=2)return this.fm=!0,l.debug,m;if(this.Fm())return b;var i=[],n=this.gl(i);if(n===d){if(this.um=.5,void 0===t)return w;t!==this.group.color&&(n=f)}return n===f?(this.um=0,this.Tj||this.nl.length?w:this.Gm()>=1.5?w:(this.$l=this.Vl(),b)):(this.fm=!0,this.um=1,l.debug&&r(n),m)},e.prototype.Yl=function(){var t=this.group.Pe();if(!t.length)return b;for(var i=this.$l||this.Vl(),n=u(i)&&!this.qm.length&&!this.rm.length,e=null,r=n?this.group.Ne():null,o=0;o<t.length;o++){var s=t[o],h=s.He,a=h.Vl(),c=i-a;if(l.debug&&(this.group.zd,i.toFixed(4),a.toFixed(4),s.zd),c>0)return l.debug,this.tm=!1,w;if(0===c&&(l.debug&&this.group,n)){if(h.tm===!1||a!==i||s.Xd.length<3)continue;for(var p=r.length-1;p>=0;p--){var f=r[p];if(!f.Jh(s)&&this.fi.ei(f).qk!==this){n=!1;break}}n&&(e=h)}}return n&&e?(this.tm=!0,w):b},e.prototype.cm=function(){return this.group.be>1?w:b},e.prototype.dm=function(){var t=this.$l=this.Vl();if(t>=2)return this.fm=!0,l.debug,m;if(this.tm)return this.fm=!0,l.debug,m;for(var i=this.qm.length-1;i>=0;i--)if(this.qm[i].He.fm)return this.fm=!0,l.debug&&this.qm[i],m;return b},e.prototype.Hm=function(t,i){if(this.Tj){for(var n=this.Tj.Uj,e=0,r=n.length-1;r>=0;r--)e+=t.call(n[r],i);return e}return t.call(this,i)},e.prototype.rk=function(t,i){this.pm[t]+=i},e.prototype.jj=function(){for(var t=1-this.group.color,i=this.Ol.length-1;i>=0;i--){if(this.Ol[i].color!==t)return!1}return!0},e.prototype.Im=function(){for(var t=this.group.color,i=this.Ol.length-1;i>=0;i--){var n=this.Ol[i];if(void 0===n.color)for(var e=n.Ql[1-t],r=e.length-1;r>=0;r--){var o=e[r],s=o.He.Wl();if(s<6)return 1}}return 0},e.prototype.uk=function(){return this.ml+this.um+this.Im()+(this.pm[v]+this.pm[y])/2},e.prototype.Gm=function(){return this.Hm(this.uk)},e.prototype.Jm=function(){return this.group.Xd.length},e.prototype.Wl=function(){return this.Hm(this.Jm)}},{"../../../constants":51,"../../../log":76,"./Band":43}],47:[function(t,i,n){"use strict";function e(t,i){this.qb=t,this.code=i,this.ce=this.de=0,this.ll=0,this.Ql=null,this.Dm=null,this.Km=void 0,this.color=void 0,this.qk=void 0,this.Lm=!1,this.Mm=!1,this.Cm=-1,this.Ai=null,this.Nm=!1}function r(t){return t?g[t]:g[0]}function o(t){for(var i=t.length-1;i>=0;i--)if(!t[i].He.gm)return!1;return!0}function s(t){return"#"+t.zd}var h=t("../../../constants"),u=t("./FakeSpot"),a=t("../../../log"),c=t("../../../Move"),l=c.De,p=c.lb,f=h.mb,d=h.nb,g=["void","eye","fake","dame"];i.g=e,e.prototype.Om=function(t,i){return this.ce=t,this.de=i,this.Ai=[],this.Ql=[[],[]],this.Dm=[],this.Ql},e.prototype.Pm=function(t,i){this.ll++,this.Dm.push(this.qb.Ld(t,i))},e.prototype.ym=function(t,i){a.debug&&i.map(function(t){return t.zd}),this.Mm=!0;var n=this.Dm.indexOf(t),e=this.Ai[n];return e?e.nm(i):e=this.Ai[n]=new u(t,i),e},e.prototype.Sl=function(){var t=this.Ql[f],i=this.Ql[d],n=o(t),e=o(i);if(n&&e)return!this.Lm&&void 0!==this.color&&this.Qm();if(1===this.Km)return!1;if(!n&&!e)return!1;var r=n?d:f;return this.Nm=!t.length||!i.length,this.Mm?this.Rm(r):(this.Cm=this.ll,this.Sm(r))},e.prototype.Rm=function(t){this.Km=2,this.color=t,this.qk&&(this.qk.xm(this),this.qk=null);for(var i=this.Ai.length-1;i>=0;i--){var n=this.Ai[i];n&&(n.hi=!1)}return!0},e.prototype.Tl=function(){if(2!==this.Km)return!1;var t=this.Cm,i=this.Cm=this.ll-this.Tm();return a.debug,i!==t},e.prototype.Tm=function(t){t||(t=[]);for(var i=this.Ai.length-1;i>=0;i--){var n=this.Ai[i];if(n&&n.color===this.color)for(var e=n.Ql,r=e.length-1;r>=0;r--)if(e[r].He.Bm()){a.debug&&!n.hi&&n.Ci,n.hi=!0,t.push(n.Ci);break}}return t.length},e.prototype.hi=function(t){for(var i=this.Ai.length-1;i>=0;i--){var n=this.Ai[i];if(n&&n.color===this.color&&n.Ci===t)return n.hi}return!1},e.prototype.Ul=function(){if(2===this.Km){if(0===this.Cm){if(this.qk)throw new Error("NEVER HAPPENS");return void a.debug}a.debug;var t=this.color;return this.color=this.Km=void 0,this.Sm(t)}},e.prototype.Sm=function(t){return this.Nm?(this.Um(t),!0):this.Xl(t)},e.prototype.Vm=function(t){for(var i=this.Ql[t],n=i[0],e=0,r=i.length-1;r>=0;r--){var o=i[r],s=o.Xd.length;o.be>1&&s>e&&(n=o,e=s)}this.qk=n.He.wm(this)},e.prototype.Um=function(t){return a.debug&&l(t),this.Km=1,this.color=t,this.Vm(t),!0},e.prototype.Xl=function(t){if(t===this.color)return!1;a.debug&&l(t),this.qk&&(this.qk.xm(this),this.qk=null),this.color=t;for(var i=this.Ql[1-t],n=i.length-1;n>=0;n--)for(var e=i[n].He.Ol,r=e.length-1;r>=0;r--)if(e[r]!==this&&e[r].color===t)return!0;return this.Vm(t),!0},e.prototype.hm=function(){a.debug,this.qk&&(this.qk.xm(this),this.qk=null),this.Km=3,this.color=void 0},e.prototype.Qm=function(){a.debug;var t=this.color;if(void 0===t)throw new Error("dead group's eye of undefined owner");this.Lm=!0,this.Mm=!1,this.qk&&(this.qk.xm(this),this.qk=null),this.Km=1,this.color=1-t;for(var i=this.Ql[t],n=i.length-1;n>=0;n--){var e=i[n].He;if(e.lm.length)return this.qk=e.lm[0].He.wm(this),!0}return!0},e.prototype.mm=function(t){return void 0===this.color?0:(t&&(t.length=0,this.Mm&&this.Tm(t)),this.ll)},e.prototype.Wm=function(t){var i=t.group;return this.Ql[i.color].indexOf(i)>-1},e.prototype.toString=function(){return"{"+r(this.Km)+"-"+p(this.ce,this.de)+" vcount:"+this.ll+" black:"+(this.Ql[f].map(s).toString()||"-")+" white:"+(this.Ql[d].map(s).toString()||"-")+"}"}},{"../../../Move":21,"../../../constants":51,"../../../log":76,"./FakeSpot":45}],48:[function(t,i,n){"use strict";function e(t,i){this.qb=t,this.od=i.od,this.Ql=null,this.Xm=null}var r=t("../../../constants"),o=r.ld;i.g=e,e.prototype.Pl=function(t,i,n,e){if(this.od[i][t]!==n)return 0;this.Xm=n;var r="number"!=typeof e?e:null;this.Ql=r&&r.Om(t,i);for(var o,s,h,u=0,a=this.od,c=[[t,i,i]];o=c.pop();)if(s=o[0],i=o[1],h=o[2],a[i][s]===n){for(;this.Ym(s,i-1);)i--;for(;this.Ym(s,h+1);)h++;u+=h-i+1;for(var l=s-1;l<=s+1;l+=2){for(var p=null,f=i;f<=h;f++)l<s&&(a[f][s]=e,r&&r.Pm(s,f)),this.Ym(l,f)?p||(p=f):p&&(c.push([l,p,f-1]),p=null);p&&c.push([l,p,h])}}return u},e.prototype.Ym=function(t,i){var n=this.od[i][t];if(n===o)return!1;if(n===this.Xm)return!0;if(!this.Ql)return!1;if("number"!=typeof n)return!1;var e=this.qb.Ld(t,i).group;if(!e)throw new Error("Unexpected: ZoneFiller replacing a group");var r=this.Ql[n];return r.indexOf(e)===-1&&r.push(e),!1}},{"../../../constants":51}],49:[function(t,i,n){"use strict";function e(t,i,n){this.name="Chuckie",this.Fg=t,this.fi=new o(t),this.$m(n),this.setColor(i)}function r(t,i){return i[1]-t[1]}var o=t("./boan/BoardAnalyser"),s=t("../../constants"),h=t("../../Genes"),u=t("../../Grid"),a=t("../../log"),c=t("../../Move"),l=t("../../test"),p=t("./boan/ZoneFiller"),f=t("./Connector"),d=t("./GroupAnalyser"),g=t("./GroupsAndVoids"),v=t("./Hunter"),y=t("./Influence"),b=t("./MoveInfo"),m=t("./NoEasyPrisoner"),w=t("./PotentialEyes"),x=t("./PotentialTerritory"),k=t("./Pusher"),j=t("./Savior"),q=t("./Shaper"),B=t("./Spacer"),S=c.kb,A=c.lb,E=s.ld,C=s.mb,M=s.Di,G=s.Zm,D=s.Ei;i.g=e,e._m="Chuckie",e.an="0.1",e.Hg=o,e.bn=p,e.prototype.cn=function(t){var i=new t(this);return this.Li.push(i),i},e.prototype.dn=function(){var t=this.wi={};this.Li=[],t.vi=this.cn(b),t.Si=this.cn(x),t.en=this.cn(g),t.Ti=this.cn(y),t.Qi=this.cn(w),t.fn=this.cn(d),t.Oi=this.cn(m),t.gn=this.cn(j),t.fk=this.cn(v),t.Ni=this.cn(f),t.hn=this.cn(B),t.jn=this.cn(k),t.kn=this.cn(q);for(var i=0;i<this.Li.length;i++)this.Li[i].Ji()},e.prototype.setColor=function(t){this.color=t;for(var i=0;i<this.Li.length;i++)this.Li[i].Ui(t)},e.prototype.$m=function(t){this.$i=t||this.$i||new h,this.Hi=this.Zi("smallerMove",.03,.01,.1),this.qb!==this.Fg.qb&&(this.qb=this.Fg.qb,this.Eb=this.qb.Eb,this.ii=this.Fg.useAreaScoring,this.ln=new u(this.Eb,E),this.Gi=new u(this.Eb,0,E),this.dn()),this.vb=C,this.mn=this.nn=0,this.on=this.pn=this.qn=0,this.rn=!1,this.Oj=this.Pj=-1,this.Vi=null},e.prototype.sn=function(t){for(var i=0;i<this.Li.length;i++){var n=this.Li[i];if(n.name===t)return n}return null},e.prototype.Zi=function(t,i,n,e){return void 0===n&&(n=null),void 0===e&&(e=null),this.$i.get(this.name+"-"+t,i,n,e)},e.prototype.tn=function(t,i,n){this.on=n,this.pn=t,this.qn=i,this.rn=1!==this.un},e.prototype.vn=function(t,i,n){if(n>this.on)this.un=1,this.tn(t,i,n);else{if(this.un++,Math.random()*this.un>=1)return;this.tn(t,i,n)}},e.prototype.wn=function(){this.mn++;var t=this.ln.od,i=this.Gi.od;this.xn(),this.yn(t,i),this.zn(t,i);var n=this.An(t,i);return a.Wi(this.Aj?a.Xi:a.Qj),n},e.prototype.xn=function(){this.on=this.Hi-.001,this.pn=-1,this.vb=this.Fg.vb,this.Aj=!!a.debug,a.Wi(a.Qj)},e.prototype.yn=function(t,i){for(var n=1;n<=this.Eb;n++)for(var e=1;e<=this.Eb;e++)this.qb.$b(e,n,this.color)?(t[n][e]=M,i[n][e]=0):t[n][e]=G;if(this.Oj!==-1){if(t[this.Pj][this.Oj]===G)throw new Error("Invalid test move: "+this.Oj+","+this.Pj);t[this.Pj][this.Oj]=D}},e.prototype.zn=function(t,i){for(var n=0;n<this.Li.length;n++){var e=this.Li[n];a.Wi(this.Aj&&this.Vi===e.name?a.Xi:a.Qj);var r=Date.now();e.oj&&e.oj(),e.si(t,i);var o=Date.now()-r;o>=3&&!l.Bn&&a.Cn("Slowness: "+e.name+" took "+o+"ms")}this.wi.vi.Bj(t,i)},e.prototype.An=function(t,i){for(var n=1;n<=this.Eb;n++)for(var e=1;e<=this.Eb;e++)t[n][e]<M||i[n][e]<this.on||this.vn(e,n,i[n][e]);return this.on<this.Hi?"pass":(this.rn&&this.nn++,A(this.pn,this.qn))},e.prototype.Dn=function(){return this.wi.Si.Hk()},e.prototype.En=function(){var t=this.wi.Si;return t.si(),t.Ak.od},e.prototype.Fn=function(t,i){this.Oj=t,this.Pj=i,this.wn(),this.Oj=-1},e.prototype.Gn=function(t,i){for(var n={},e=0;e<this.Li.length;e++)this.Li[e].Yi(t,i,n);return n},e.prototype.Hn=function(t,i){return this.Fn(t,i),this.Gi.od[i][t]},e.prototype.In=function(t,i,n){return this.Fn(t,i),this.sn(n).Gi.od[i][t]},e.prototype.Jn=function(t){this.Vi=t},e.prototype.Kn=function(t,i){var n=S(t);if(!n)return"";var e=n[0],o=n[1];if(i){if(!this.qb.$b(e,o,this.Fg.vb))return"Invalid move: "+t;this.Fn(e,o)}var s=this.Gn(e,o),h=this.Gi.od[o][e],u=[];for(var a in s)0!==s[a]&&u.push([a,s[a]]);u.sort(r);for(var c=t+" ("+h.toFixed(2)+")\n",l=0;l<u.length;l++)c+="- "+u[l][0]+": "+u[l][1].toFixed(2)+"\n";return c}},{"../../Genes":15,"../../Grid":17,"../../Move":21,"../../constants":51,"../../log":76,"../../test":81,"./Connector":28,"./GroupAnalyser":30,"./GroupsAndVoids":31,"./Hunter":33,"./Influence":34,"./MoveInfo":35,"./NoEasyPrisoner":36,"./PotentialEyes":37,"./PotentialTerritory":38,"./Pusher":39,"./Savior":40,"./Shaper":41,"./Spacer":42,"./boan/BoardAnalyser":44,"./boan/ZoneFiller":48}],50:[function(t,i,n){"use strict";function e(){this.Ln=null,this.Ig=this.Mn=this.Nn=this.On=null}i.g=new e,e.prototype.Pn=function(t){this.Ln={};for(var i=0;i<t.length;i++){var n=t[i];this.Ln[n.name]=n.Qn}var e=t.length-1;this.Ig=this.Mn=t[e].Qn,this.Nn=e>=1?t[e-1].Qn:null,this.On=e>=2?t[e-2].Qn:null}},{}],51:[function(t,i,n){"use strict";function e(){this.ik=0,this.jk=1,this.ld=-99,this.EMPTY=-1,this.mb=0,this.nb=1,this.Di=0,this.Ei=1,this.Zm=-1,this.NEVER=0,this.el=1,this.ALWAYS=2,this.wh=0,this.xh=3,this.hk=7,this.gk=1,this.vk=this.Lh=0,this.Oh=1,this.wk=this.Mh=2,this.Nh=3,this.Ph=4,this.Qh=5,this.Rh=6,this.Sh=7,this.Th=8,this.ni=9,this.Uh=10,this.Vh=11,this.Kh=12,this.ob="Japanese",this.Rn="Chinese",this.Sn=0,this.Tn=1}i.g=new e},{}],52:[function(t,i,n){"use strict";function e(t){return"\n"!==t.slice(-1)?0:"\r\n"!==t.slice(-2)?1:2}n.Ki=function(t){return t.name||t.toString().split(/ |\(/,2)[1]},n.clone=function(t){if(null===t||void 0===t)return t;var i;if(t instanceof Array){i=[];for(var n=0,e=t.length;n<e;n++)i[n]=t[n]}else{if("object"!=typeof t)throw new Error("clone called on "+typeof t);if("function"==typeof t.clone)return t.clone();i={};for(var r in t){var o=t[r];"function"!=typeof o&&(i[r]=o)}}return i},String.prototype.ed=function(t){if(void 0===t)return this.substr(0,this.length-e(this));var i=this.length-t.length;return this.substr(i)===t?this.substr(0,i):this.toString()},String.prototype.ye=function(t){if(void 0===t)t=e(this)||1;else if("number"!=typeof t)throw new Error("Invalid parameter type for String.count: "+typeof t);return this.substr(0,this.length-t)},String.prototype.startsWith||(String.prototype.startsWith=function(t){return this.substr(0,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t){return this.substr(this.length-t.length)===t}),String.prototype.format=function(t){if("%"!==this[0])throw new Error("Invalid format: "+this.toString());var i,n=this.slice(1,-1),e=0,r=this.slice(-1);switch(r){case"d":case"x":var o=" ";"0"===n[e]&&(e++,o="0");var s=parseInt(n.substr(e));i=t.toString("x"===r?16:10);for(var h=s-i.length;h>0;h--)i=o+i;return i;case"f":var u="";if("+"===n[e]&&(e++,t>0&&(u="+")),"."!==n[e++])break;var a=parseInt(n.substr(e));return u+t.toFixed(a)}throw new Error("Unknown format: "+this.toString())},String.prototype.$g=function(t,i){return this>=t&&this<=i},n.Un=function(t,i){for(var n=new Array(t),e=t-1;e>=0;e--)n[e]=i;return n},n.ge=function(t,i,e){for(var r=new Array(t),o=r[0]=n.Un(i,e),s=t-1;s>=1;s--)r[s]=o.concat();return r},Array.new=function(t,i){if(void 0===t)return[];if(void 0===i)return new Array(t);var n,e=[];if("function"==typeof i)for(n=0;n<t;n++)e[n]=i(n);else for(n=0;n<t;n++)e[n]=i;return e},Array.prototype.Vn=function(t){for(var i=this.length,n=0;n<t.length;n++){var e=t[n];this.indexOf(e)===-1&&this.push(e)}return this.length-i}},{}],53:[function(t,i,n){"use strict";function e(t){this.options=t,this.Wn=[],this.parent=document.body,this.Xn=o.Yn(null,"contextMenu"),this.Zn=!1}function r(){this.contextMenu.Zn&&(this.$n&&this.$n.call(this,this.name),this._n("selected",!0),window.setTimeout(this.contextMenu.ao.bind(this.contextMenu)))}t("./contextMenu.less");var o=t("./Dome"),s=t("./getText"),h=t("./PopupDlg"),u=t("./tapBehavior");i.g=e,e.prototype.bo=function(t,i,n){var e=n&&n.name,s="menuItem"+(e?" "+e:""),h=o.Yn(this.Xn,s).co(1);return h.Yn("icon").eo(1.5),h.Yn("text").fo(t),h.name=e,h.$n=i,h.contextMenu=this,u(h,r),this.Wn.push(h),h},e.prototype.ho=function(t,i,n){var e;this.options&&this.options.io?e=this.ao.bind(this):this.bo(s("#cancelAction"),null),h.jo(this.Xn,this.parent,e);var r=o.ko(t),u=o.ko(this.Xn);u.lo(r,i,n),o.mo(u),this.Xn.no("left",u.left+"px"),this.Xn.no("top",u.top+"px"),this.Zn=!0},e.prototype.ao=function(){this.Zn&&(this.Zn=!1,h.oo(this.Xn))}},{"./Dome":54,"./PopupDlg":60,"./contextMenu.less":65,"./getText":68,"./tapBehavior":72}],54:[function(t,i,n){"use strict";function e(t,i,n,r){this.type=i;var o=this.po=document.createElement(i);this.name=r,this.qo=!1,n&&(o.className=n),f&&f.ro(o,n),t&&(t instanceof e?t.po:t).appendChild(o),d&&d.add(r||n,this)}function r(){var t=document.documentElement.clientWidth,i=document.documentElement.clientHeight;i===y&&(i+=b),h=new c(0,0,t,i),e.so=t,e.to=i;var n=window.devicePixelRatio||1;u=50+25*(n-1)}function o(){if((window.devicePixelRatio||1)>=1.5){var t=v;document.documentElement.style["fontSize"]=t+"px"}}function s(){this.Yo={}}t("./dome.less");var h,u,a=t("./fileHelper"),c=t("./Rect"),l=t("./tapBehavior"),p=null,f=null,d=null,g=1,v=23,y=1137,b=119;i.g=e,e.init=function(t,i){f=t,p=i,r(),o()},e.prototype.uo=function(t,i){return(t instanceof e?t.po:t).appendChild(this.po),this.qo=i,p&&i&&p.addElement(this.po),this},e.prototype.appendChild=function(t,i){return t.uo(this,i)},e.removeChild=function(t,i){i&&(p&&i.qo&&p.vo(i.po),t instanceof e&&(t=t.po),t.removeChild(i.po))},e.prototype.removeChild=function(t){e.removeChild(this,t)},e.prototype.wo=function(){return this.po.childElementCount},e.prototype.xo=function(){this.po.innerHTML=null},e.prototype.fo=function(t){return this.po.textContent=t,this},e.prototype.yo=function(t){return this.po.innerHTML=t,this},e.prototype.setAttribute=function(t,i){return this.po.setAttribute(t,i),this},e.prototype.no=function(t,i){return this.po.style[t]=i,this},e.prototype.zo=function(t){return t===this.Ao()?this:(this.po.style.display=t?"":"none",this.Bo=!!t,p&&this.qo&&(t?p.addElement(this.po):p.vo(this.po)),this)},e.prototype.Ao=function(){return this.Bo||void 0===this.Bo},e.prototype.Co=function(t){return this.po.disabled=!t,this._n("disabled",!t),this},e.prototype.eo=function(t){return this.no("width",t*u+"px")},e.prototype.co=function(t){return this.no("height",t*u+"px")},e.prototype.Do=function(t){return this.no("minWidth",t*u+"px")},e.prototype.Eo=function(t){return this.no("minHeight",t*u+"px")},e.prototype.text=function(){return this.po.textContent},e.prototype.Fo=function(){return this.po.innerHTML},e.prototype.value=function(){return this.po.value},e.prototype.Go=function(){return this.po.checked},e.prototype.Ho=function(){return this.po},e.prototype.clear=function(){this.po.innerHTML=""},e.prototype.v=function(t,i){var n=this;this.po.addEventListener(t,function(t){i.call(n,t)})},e.prototype._n=function(t,i){var n=this.po,e=n.className,r=" "+e+" ",o=" "+t+" ",s=r.indexOf(o);if(i){if(s>=0)return;f&&f.toggle(n,t,i),n.className=e+" "+t}else{if(s<0)return;n.className=r.replace(o," ").trim(),f&&f.toggle(n,t,i)}},e.prototype.Io=function(){this.po.scrollTop=this.po.scrollHeight},e.Yn=function(t,i,n){return new e(t,"div",i,n||i)},e.prototype.Yn=function(t,i){return new e(this,"div",t,i||t)},e.Jo=function(t,i,n,r){var o=new e(t,"button",i+"Button",i);return n&&(o.po.innerText=n),o.v("click",r),o},e.Ko=function(t,i,n,r){var o=new e(t,"div","btn "+i,i);return n&&(o.Lo=o.Yn(i+"Text btnText").fo(n)),l(o,r),o},e.prototype.Mo=function(t){this.Lo.fo(t)},e.No=function(t,i,n,r){var o=e.Ko(t,i,r,n);return o.Yn(i+"Icon btnIcon"),o},e.Oo=function(t,i,n,r){var o=new e(t,"a",i,i);return o.setAttribute("href",r),o.fo(n),o},e.Po=function(t,i,n){return new e(t,"div",i,i).fo(n)},e.Qo=function(t){return new e(t,"br")},e.Ro=function(t,i,n,r,o){var s=n||o?e.Yn(t,i+"Div"):t;n&&e.Yn(s,i+"Label inputLbl").fo(n);var h=new e(s,"input",i+"Input inputBox",i);return h.So=s,o&&e.Yn(s,i+"Desc inputDesc").fo(o),void 0!==r&&(h.po.value=r),h},e.To=function(t,i,n,r,o){var s=new e(t,"div",i+"Div chkBoxDiv"),h=new e(s,"input",i+"ChkBox chkBox",i),u=h.po;return u.type="checkbox",u.name=i,void 0!==r&&(u.value=r),u.id=i+"ChkBox"+(void 0!==r?r:g++),o&&(u.checked=!0),new e(s,"label",i+"ChkLabel chkLbl",i).fo(n).setAttribute("for",u.id),h},e.Uo=function(t,i,n,r,o){r||(r=n);for(var s=[],h=0;h<n.length;h++){var u=s[h]=new e(t,"input",i+"RadioBtn radioBtn",i),a=u.po;a.type="radio",a.name=i,a.value=r[h],a.id=i+"Radio"+r[h],r[h]===o&&(a.checked=!0),new e(t,"label",i+"RadioLbl radioLbl",i).fo(n[h]).setAttribute("for",a.id)}return s},e.Vo=function(t){for(var i=0;i<t.length;i++)if(t[i].po.checked)return t[i].po.value},e.Wo=function(t,i,n,r,o){if(r||(r=n),"byIndex"===r)for(r=[],a=0;a<n.length;a++)r.push(a);var s=new e(t,"select",i+"DropDwn dropDwn",i).no("fontSize",.6*u+"px");s.values=r;for(var h=0,a=0;a<n.length;a++){var c=new e(s,"option").po;c.value=r[a],c.textContent=n[a],r[a]===o&&(h=a)}return s.po.selectedIndex=h,s},e.prototype.select=function(t){var i=this.values.indexOf(t);i!==-1&&(this.po.selectedIndex=i)},e.ko=function(t){var i=(t.po||t).getBoundingClientRect();return 0===i.width&&0===i.height&&console.error("newRect on invisible element",t),new c(i.left,i.top,i.width,i.height)},e.mo=function(t){t.Xo(h,10)},e.Zo=function(){return d=new s},e.$o=function(){d=null},s.prototype.add=function(t,i){this.Yo[t]=i},s.prototype.get=function(t){return this.Yo[t]},s.prototype.Co=function(t,i,n){"ALL"===t&&(t=Object.keys(this.Yo));for(var e=0;e<t.length;e++)if(!n||n.indexOf(t[e])===-1){var r=this.Yo[t[e]];r?r.Co(i):console.error("Invalid control name:",t[e])}},s.prototype.zo=function(t,i,n){"ALL"===t&&(t=Object.keys(this.Yo));for(var e=0;e<t.length;e++)if(!n||n.indexOf(t[e])===-1){var r=this.Yo[t[e]];r?r.zo(i):console.error("Invalid control name:",t[e])}},e._o=function(t){document.head.getElementsByTagName("title")[0].textContent=t},e.ap=function(){var t=window.getSelection();if(!t.rangeCount)return null;var i=t.getRangeAt(0),n=i.startContainer.data;return n?n.substring(i.startOffset,i.endOffset):null},e.bp=function(t,i,n){var e=new Blob([t],{type:n||"text/plain"}),r=document.createElement("a");r.href=URL.createObjectURL(e),r.download=i,r.click()},e.prototype.cp=function(){var t=this.po.files;return t&&t.length>0},e.prototype.dp=function(t){var i=this.po.files;return i?!!i.length&&(a.ep(i[0],t),!0):console.error("Invalid field type for uploadFile: "+this.type)}},{"./Rect":61,"./dome.less":66,"./fileHelper":67,"./tapBehavior":72}],55:[function(t,i,n){"use strict";function e(){}var r;i.g=e,e.fp=function(t){r=t},e.gp=function(t,i){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==~~n.readyState){if(200!=~~n.status){var e;return e=0===n.status?r("#noInternet"):r("#httpReqError",n.status,t),console.error(e),i(e)}i(null,n.response)}},n.open("GET",t,!0),n.send()},e.hp=function(t,i){return e.gp("./assets/"+t,i)},e.bp=function(t,i){return e.gp(t,i)}},{}],56:[function(t,i,n){"use strict";function e(t){this.Wc=t?"localPref_"+t:"localPref",this.ip=!1,this.jp=null,this.map={},this.kp=this.lp.bind(this),this.mp=console.error}i.g=e,e.prototype.np=function(t){this.mp=t},e.prototype.op=function(){if(!this.pp(this.Wc)){var t=window.localStorage.getItem("currentVersion");this.pp(t)&&(this.ip=!0)}},e.prototype.qp=function(){this.jp&&this.lp()},e.prototype.rp=function(){this.jp||(this.jp=window.setTimeout(this.kp,6e4))},e.prototype.pp=function(t){try{var i=window.localStorage.getItem(t);return!!i&&(this.map=JSON.parse(i),!0)}catch(t){this.mp("Cannot load local preferences: "+t)}},e.prototype.lp=function(){window.clearTimeout(this.jp),this.jp=null;try{window.localStorage.setItem(this.Wc,JSON.stringify(this.map)),this.ip&&(window.localStorage.setItem("currentVersion",this.Wc),this.ip=!1)}catch(t){this.mp("Cannot save local preferences: "+t)}},e.prototype.Sc=function(t,i){var n=this.map[t];return void 0!==n?n:i},e.prototype.Qc=function(t,i){this.map[t]=i,this.rp()}},{}],57:[function(t,i,n){"use strict";function e(){this.level=NaN,this.sp=null,this.Xi=o,this.Qj=s,this.tp=h,this.ERROR=u,this.up=a,this.vp=!1,this.Qe=!1}var r=console,o=0,s=1,h=2,u=3,a=4;i.g=e,e.prototype.Wi=function(t){t!==this.level&&(this.level=t,this.debug=t<=o?this.wp:null,this.info=t<=s?this.jh:null,this.warn=t<=h?this.Cn:null,this.error=t<=u?this.xp:null,this.fatal=t<=a?this.yp:null)},e.prototype.zp=function(t){this.sp=t},e.prototype.wp=function(t){this.Ap(o,r.debug,t)},e.prototype.jh=function(t){this.Ap(s,r.info,t)},e.prototype.Cn=function(t){this.Ap(h,r.warn,t)},e.prototype.xp=function(t){this.Ap(u,r.error,t)},e.prototype.yp=function(t){this.Ap(a,r.error,t)},e.prototype.Ap=function(t,i,n){t<this.level||this.sp&&!this.sp(t,n)||i.call(r,n)}},{}],58:[function(t,i,n){"use strict";function e(t,i,n){this.parent=t=t||document.body,n=n||{};var e="notifPopup"+(n.className?" "+n.className:""),h=this.Bp=r.Yn(null,e).zo(!1);n.title&&h.Yn("title").co(1).Yn("text").fo(n.title),n.Cp&&(this.Dp=r.Ko(h,"closeBtn",o("#close"),this.close.bind(this)).co(1)),this.content=h.Yn("content"),this.Ao=!1,this.Ep=n.Ep,this.Ep?s.jo(this.Bp,this.parent):h.uo(t),i&&(this.Fp(i),this.show())}t("./notificationPopup.less");var r=t("./Dome"),o=t("./getText"),s=t("./PopupDlg"),h=t("./Transit");i.g=e,e.prototype.Gp=function(t){this.Dp&&this.Dp.zo(t)},e.prototype.Fp=function(t,i){var n=this.content.Yn("msg").fo(t);void 0!==i&&n._n("level"+i,!0),this.content.Io()},e.prototype.close=function(){this.hide()},e.prototype.clear=function(){this.content.xo()},e.prototype.show=function(){this.Ao||(this.Ao=!0,this.Bp.zo(!0),s.Hp(this.Bp))},e.prototype.hide=function(){this.Ao&&(this.Ao=!1,this.Ep?s.oo(this.Bp):new h(this.Bp).from("opacity",1).Ip("opacity",0).start(500))}},{"./Dome":54,"./PopupDlg":60,"./Transit":64,"./getText":68,"./notificationPopup.less":70}],59:[function(t,i,n){"use strict";function e(){this.Jp={},this.Kp=null,this.Lp=""}function r(t,i){for(var n in i)t.style[n]=i[n]}function o(t,i,n,e){var r,o=n[i],s=e[i];if(o)for(r in o)t.style[r]=s?s[r]||null:null;if(s)for(r in s)t.style[r]=s[r]}i.g=new e,e.prototype.Mp=function(t,i){this.Jp=t,this.Np(i,!0),this.ro(document.body,"body")},e.prototype.Op=function(){return Object.keys(this.Jp)},e.prototype.Np=function(t,i){if(t!==this.Lp){var n=this.Kp;if(this.Lp=t,this.Kp=this.Jp[t],!i)for(var e=document.all,r=0;r<e.length;r++){var o=e[r];this.Pp(o,n)}}},e.prototype.ro=function(t,i){if(this.Kp){var n=this.Kp[t.localName];if(n&&r(t,n),i&&(n=this.Kp["."+i],n&&r(t,n),i.indexOf(" ")>=0))for(var e=i.split(" "),o=0;o<e.length;o++)(n=this.Kp["."+e[o]])&&r(t,n)}},e.prototype.Pp=function(t,i){o(t,t.localName,i,this.Kp);for(var n=t.className.split(" "),e=0;e<n.length;e++)o(t,"."+n[e],i,this.Kp)},e.prototype.Qp=function(t,i,n){var e=this.Kp[i+"+"+n];if(e){var r=this.Kp[i]||{};for(var o in e)t.style[o]=r[o]||null}},e.prototype.toggle=function(t,i,n){if(this.Kp){var e,o=t.className.split(" ");if(n){var s=this.Kp[t.localName+"+"+i];for(s&&r(t,s),e=0;e<o.length;e++)(s=this.Kp["."+o[e]+"+"+i])&&r(t,s)}else for(this.Qp(t,t.localName,i),e=0;e<o.length;e++)this.Qp(t,"."+o[e],i)}}},{}],60:[function(t,i,n){"use strict";function e(){var t=this.Rp;t.options&&(t.options.Sp=this.id),o.oo(t.Bp),t.Tp&&t.Tp(t.options)}function r(t,i,n,r){var o=h.Ko(t,"popupDlgBtn",n,e).co(1).Do(2);o.Rp=i,o.id=r}function o(t,i,n,e,s){this.parent=t||document.body,this.options=e,this.Tp=s;var a=this.Bp=h.Yn(null,"popupDlg dialog");a.Yn("dialogTitle").fo(n||u("#problem"));var c=a.Yn("content");h.Po(c,"message",i);for(var l=e&&e.buttons||[u("#ok")],p=a.Yn("btnDiv"),f=0;f<l.length;f++)r(p,this,l[f],f);o.jo(this.Bp,this.parent)}function s(t){var i=h.Yn(null,"popupOverlay");return t&&(t=t.po||t,i.no("left",t.offsetLeft+"px"),i.no("top",t.offsetTop+"px"),
i.no("width",t.scrollWidth+2+"px"),i.no("height",t.scrollHeight+2+"px")),i}t("./popupDlg.less");var h=t("./Dome"),u=t("./getText"),a=t("./tapBehavior"),c=t("./Transit");i.g=o,o.jo=function(t,i,n){var e=t.Up=s(i);e.parent=i,e.uo(i),t.uo(e,!0),e.no("opacity",1),n&&a(e,n)},o.oo=function(t){var i=t.Up;if(!i.parent)return console.error("Already detached overlay",t);i.no("opacity",0),window.setTimeout(function(n){t.zo(!1),h.removeChild(n,i)},300,i.parent),i.parent=null},o.Vp=function(t,i,n,e){var r={buttons:[u("#yes"),u("#no")]};new o(t,i,u("#confirmTitle"),r,function(t){0===t.Sp&&n(e)})},o.Hp=function(t){new c(t).from("opacity",0).Ip("opacity",1).start(500)}},{"./Dome":54,"./Transit":64,"./getText":68,"./popupDlg.less":71,"./tapBehavior":72}],61:[function(t,i,n){"use strict";function e(t,i,n,e){this.left=t,this.top=i,this.width=n,this.height=e}i.g=e,e.prototype.lo=function(t,i,n){var e=t.left,r=t.top;switch(i){case 1:e+=t.width+15;break;case-1:e+=-this.width-15;break;case void 0:case 0:e+=t.width/2-this.width/2;break;default:e+=i*t.width}switch(n){case 1:r+=t.height+15;break;case void 0:case-1:r+=-this.height-15;break;case 0:r+=t.height/2-this.height/2;break;default:r+=n*t.height}this.left=Math.round(e),this.top=Math.round(r)},e.prototype.Xo=function(t,i){var n=Math.max(Math.min(this.left,t.width-this.width-i),i),e=Math.max(Math.min(this.top,t.height-this.height-i),i);this.left=Math.round(n),this.top=Math.round(e)}},{}],62:[function(t,i,n){"use strict";function e(t){this.Xp={},this.Yp=t.Yp,this.Zp=t.Zp,this.$p(t),this._p()}function r(){this.gq.bq()}function o(){this.removeEventListener(c.uq,o),this.vq.Up.zo(!1)}t("./topMenu.less");var s=t("./Dome"),h=t("./tapBehavior"),u=t("./TopMenuOption"),a=t("./touchManager"),c=t("./Transit"),l={height:1.1,Wp:2};i.g=e,e.prototype.aq=function(){this.bq()},e.prototype.cq=function(){return this.dq.po.clientHeight},e.prototype.eq=function(t){this.fq.fo(t)},e.prototype.hq=function(t){return this.iq.Yn(t||"menuSeparator")},e.prototype.jq=function(t,i){var n=new u(this,t,i,l);return this.Xp[t]=n,n},e.prototype.kq=function(t){this.bq(),this.Yp(t)},e.prototype.bo=function(t){return this.iq.appendChild(t)},e.prototype.removeItem=function(t){this.iq.removeChild(t)},e.prototype.$p=function(t){var i=this.Up=s.Yn(null,"topMenuOverlay");i.gq=this,i.zo(!1),i.no("opacity",0),i.uo(document.body),h(i,r);var n=s.Yn(null,"topMenu").co(1),e=this.dq=s.Yn(n,"menuBtn").eo(1);e.Yn("menuBtnIcon btnIcon"),h(e,this.lq.bind(this)),this.fq=n.Yn("topTitle"),this.width=Math.min(~~(.85*s.so),675);var o=this.mq=n.Yn("slideMenu"),u=this.iq=o.Yn("menuContent");u.no("width",this.width+"px"),u.no("minHeight",s.to+"px"),o.Yn("sideHandle").no("height",s.to+"px");var a=u.Yn("menuTitle").co(1.5),c=a.Yn("text").fo(t.nq);h(c,this.bq.bind(this)),this.oq(-this.width),n.uo(document.body)},e.prototype.oq=function(t){this.pq=t,this.mq.no(c.qq,"translate3D("+t+"px,0,0)")},e.prototype.rq=function(t){var i=Math.max(50,~~(Math.abs(t-this.pq)/this.width*300));this.mq.no(c.sq,c.tq+" "+i+"ms ease-out"),this.oq(t)},e.prototype.lq=function(){var t=!1;if(this.Up.Ao()||(t=!0,this.Up.zo(!0)),this.Zp&&t){var i=this.Up.po.clientWidth;i++,this.Up.no("opacity",.7)}this.rq(0)},e.prototype.bq=function(){this.Zp&&this.Up.no("opacity",0),this.mq.po.addEventListener(c.uq,o),this.mq.po.vq=this,this.rq(-this.width)},e.prototype._p=function(){var t,i,n,e,r=this;a.wq(this.mq.po,function(o,s){switch(o){case"dragStart":return t=s,i=n=r.pq,e=i<0?-1:1,r.mq.no(c.sq,null),void r.Up.zo(!0);case"drag":var h=i+(s-t);if(h===n)return;return e=h-n,h>0&&(h=0),n=h,r.oq(h),void(r.Zp&&r.Up.no("opacity",.7*(1+h/r.width)));case"dragEnd":return void(e>0?r.lq():r.bq());case"tap":return r.bq()}},{xq:!0,yq:0})}},{"./Dome":54,"./TopMenuOption":63,"./Transit":64,"./tapBehavior":72,"./topMenu.less":73,"./touchManager":74}],63:[function(t,i,n){"use strict";function e(t,i,n,e){var s=this.zq=t.iq.Yn("menuOption "+i).co(e.height);s.Aq=this,s.Yn("icon").eo(e.Wp),this.label=s.Yn("label").fo(n),this.gq=t,this.id=i,o(s,r)}function r(){var t=this.Aq;t.gq.kq(t.id)}var o=t("./tapBehavior");i.g=e,e.prototype.zo=function(t){this.zq.zo(t)},e.prototype.fo=function(t){this.label.fo(t)}},{"./tapBehavior":72}],64:[function(t,i,n){"use strict";function e(t){this.po=t.po||t,this.Bq={},this.Cq={},this.Dq={},this.timeout=null,this.Eq=null,this.Fq=null}function r(t,i){window.clearTimeout(t.timeout),t.timeout=null,t.po.style[e.sq]=t.Eq,!i&&t.Fq&&t.Fq(),t.Fq=null}i.g=e,e.prototype.from=function(t,i){return this.Cq[t]=i,this},e.prototype.Ip=function(t,i){return this.Dq[t]=i,this},e.prototype.start=function(t,i){var n=this.po;n.Gq&&n.Gq.timeout&&r(n.Gq,!0),n.Gq=this,this.Eq=n.style[e.sq],n.style[e.sq]=null;for(var o in this.Cq)this.Bq[o]=n.style[o],n.style[o]=this.Cq[o];n.clientHeight||(n=n),n.style[e.sq]="all "+t+"ms ease-in-out";for(o in this.Dq)this.Bq.hasOwnProperty(o)||(this.Bq[o]=n.style[o]),n.style[o]=this.Dq[o];return this.Fq=i,this.timeout=window.setTimeout(r,t,this),this},e.prototype.reverse=function(t,i){var n=this.Dq;this.Dq=this.Cq,this.Cq=n,this.start(t,i)},e.prototype.Hq=function(t,i){this.Dq=this.Bq,this.Bq={},this.Cq={},this.start(t,i)},function(){void 0===document.body.style.webkitTransition?(e.sq="transition",e.uq="transitionend",e.qq="transform",e.tq="transform"):(e.sq="webkitTransition",e.uq="webkitTransitionEnd",e.qq="webkitTransform",e.tq="-webkit-transform")}()},{}],65:[function(t,i,n){var e=".contextMenu {\n  position: absolute;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  cursor: default;\n  max-width: 70%;\n  background-color: rgba(120, 120, 120, 0.2);\n  border-radius: 7px;\n  border: 1px solid #58636d;\n}\n.contextMenu .menuItem {\n  position: relative;\n  margin: 1px 1px 0 1px;\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.7);\n  color: #e4e4e4;\n}\n.contextMenu .menuItem.pressed {\n  background-color: #333;\n}\n.contextMenu .menuItem.selected {\n  background-color: #555;\n}\n.contextMenu .menuItem .icon {\n  display: inline-block;\n  vertical-align: top;\n  position: relative;\n  left: 0;\n  top: 0.5rem;\n  height: calc(100% - 1rem);\n  background-position: 50%;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n.contextMenu .menuItem .text {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  display: inline-block;\n  vertical-align: top;\n  position: relative;\n  font-size: 1.2rem;\n  max-width: 50vw;\n  max-height: 100%;\n  overflow: hidden;\n}\n";t("lessify")(e),i.g=e},{"lessify":143}],66:[function(t,i,n){var e='body {\n  background-color: #865e50;\n  font-size: 1rem;\n  font-family: "Arial";\n  margin: 0px;\n  height: 2048px;\n}\ndiv {\n  box-sizing: border-box;\n}\n::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 7px;\n  height: 7px;\n}\n::-webkit-scrollbar-track {\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.2);\n  -webkit-border-radius: 10px;\n  border-radius: 7px;\n  margin: 1px;\n}\n::-webkit-scrollbar-thumb {\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, 0.5);\n}\n.btn {\n  position: relative;\n  display: inline-block;\n  vertical-align: top;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  cursor: default;\n  box-sizing: border-box;\n  padding: 0 2px;\n  border-radius: 13px;\n  min-width: 4rem;\n  font-size: 1rem;\n  text-align: center;\n  border: 1px solid #7a6c5c;\n  background-color: #af9e8e;\n  color: #000;\n}\n.btn.disabled {\n  color: #000;\n  border-style: hidden;\n  opacity: 0.6;\n}\n.btn.pressed {\n  border-style: outset;\n  -webkit-filter: brightness(1.5);\n  filter: brightness(1.5);\n}\n.btnIcon {\n  position: absolute;\n  left: 2px;\n  top: 2px;\n  width: calc(100% - 4px);\n  height: calc(100% - 4px);\n  background-position: 50%;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n.btnText {\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  z-index: 1;\n  max-height: 100%;\n  overflow: hidden;\n}\n.inputLbl {\n  display: inline-block;\n  margin: 0 5px 0 10px;\n  font-size: 1rem;\n}\n.inputBox {\n  display: inline-block;\n  margin: 0.5rem 0;\n  min-height: 3rem;\n  text-align: left;\n  font-size: 1.3rem;\n  color: inherit;\n}\n.inputDesc {\n  display: inline-block;\n  margin-left: 1rem;\n  max-width: 30%;\n  vertical-align: middle;\n  font-size: 0.9rem;\n  font-style: italic;\n}\n.chkBoxDiv {\n  display: inline-block;\n  margin-right: 10px;\n}\n.chkBox {\n  margin: 5px 3px 14px 2px;\n  width: 1rem;\n  height: 1rem;\n}\n.chkLbl {\n  font-size: 1rem;\n}\n.dropDwn {\n  margin: 17px 13px 17px 13px;\n  color: inherit;\n}\n.radioBtn {\n  margin: 17px 0px 17px 13px;\n  width: 29px;\n  height: 1.5em;\n}\n.radioLbl {\n  margin-right: 13px;\n}\n.dialog {\n  position: relative;\n  margin: 0 auto;\n  max-width: 750px;\n  padding: 10px;\n  background-color: #ffe;\n  color: #000;\n  border: solid #cca 1px;\n  border-radius: 10px;\n  font-family: Arial;\n  font-size: 1rem;\n}\n.dialogTitle {\n  font-size: 2rem;\n  background-color: #ffebce;\n  color: #000;\n  border: solid 1px rgba(195, 50, 50, 0.2);\n  border-radius: 10px;\n  margin: -6px;\n  margin-bottom: 15px;\n  padding: 10px 0px 10px 12px;\n}\n';t("lessify")(e),i.g=e},{"lessify":143}],67:[function(t,i,n){"use strict";n.ep=function(t,i){var n=new FileReader;n.onloadend=function(){return i(n.result)},n.readAsText(t)}},{}],68:[function(t,i,n){"use strict";function e(t){var i=h[t];if(void 0===i)return"("+t+")";if(arguments.length<=1)return i;for(var n=1;n<arguments.length;n++)i=i.replace("%"+n,arguments[n]);return i}var r=t("./GetFile"),o=t("../log"),s=t("../../assets/i18n_en.json"),h=s;i.g=e,e.init=function(t,i){if(r.fp(e),h=s,"en"===t)return i();var n="i18n_"+t+".json";r.hp(n,function(t,e){if(t)return o.error("Failed to get file "+n+": "+t),i(t);h=JSON.parse(e),i()})}},{"../../assets/i18n_en.json":5,"../log":76,"./GetFile":55}],69:[function(t,i,n){"use strict";var e=t("./Dome");n.init=function(t,i){e.init(t,i)}},{"./Dome":54}],70:[function(t,i,n){var e=".notifPopup {\n  z-index: 3000;\n  border-radius: 13px;\n  background-color: rgba(0, 0, 0, 0.7);\n}\n.notifPopup .title {\n  line-height: 100px;\n  padding: 0 1rem;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  border-radius: 12px;\n  background-color: rgba(77, 77, 77, 0.5);\n}\n.notifPopup .title .text {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  position: relative;\n  color: #fff;\n  font-size: 1.5rem;\n}\n.notifPopup .closeBtn {\n  position: absolute;\n  top: 0;\n  right: 0;\n}\n.notifPopup .content {\n  padding: 1.2rem;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  font-size: 1.2rem;\n  color: white;\n  height: 300px;\n  overflow-y: scroll;\n}\n.notifPopup .content .level0 {\n  color: #888;\n}\n.notifPopup .content .level1 {\n  color: #0a0;\n}\n.notifPopup .content .level2 {\n  color: #fb0;\n}\n.notifPopup .content .level3 {\n  color: #c00;\n}\n.notifPopup .content .msg {\n  max-height: 999999px;\n  margin-bottom: 0.5rem;\n}\n";t("lessify")(e),i.g=e},{"lessify":143}],71:[function(t,i,n){var e=".popupOverlay {\n  z-index: 2000;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.7);\n  transition: opacity 300ms ease-out;\n  opacity: 0;\n}\n.popupDlg {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  max-width: 75%;\n}\n.popupDlg .content {\n  padding: 20px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.popupDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n}\n.popupDlg .btnDiv .popupDlgBtn {\n  float: right;\n  margin-left: 0.5rem;\n}\n";t("lessify")(e),i.g=e},{"lessify":143}],72:[function(t,i,n){"use strict";var e=t("./touchManager");i.g=function(t,i){e.wq(t.po,function(n){if(!t.po.disabled)switch(n){case"tap":return i.call(t),!0;case"pressed":return t._n("pressed",!0);case"released":return t._n("pressed",!1)}})}},{"./touchManager":74}],73:[function(t,i,n){var e='.topMenuOverlay {\n  z-index: 1900;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: #000;\n  -webkit-transition: opacity 300ms ease-out;\n  transition: opacity 300ms ease-out;\n  -webkit-transform: translate3D(0, 0, 0);\n  transform: translate3D(0, 0, 0);\n}\n.topMenu {\n  width: 100%;\n  background-color: #333;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  cursor: default;\n}\n.topMenu .menuBtn {\n  position: relative;\n  display: inline-block;\n  height: 100%;\n  background-color: #000;\n}\n.topMenu .menuBtn.pressed {\n  -webkit-filter: brightness(1.5);\n  filter: brightness(1.5);\n}\n.topMenu .menuBtn .menuBtnIcon {\n  background-image: url("assets/menuBtn.png");\n  -webkit-filter: invert(1) grayscale(1);\n  filter: invert(1) grayscale(1);\n}\n.topMenu .topTitle {\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  display: inline-block;\n  vertical-align: top;\n  width: calc(100% - 130px);\n  overflow: hidden;\n  color: #fff;\n  padding-left: 1em;\n  font-size: 1.5rem;\n}\n.topMenu .slideMenu {\n  z-index: 1901;\n  position: absolute;\n  top: 0;\n}\n.topMenu .sideHandle {\n  width: 10px;\n  display: inline-block;\n  vertical-align: top;\n}\n.topMenu .menuContent {\n  display: inline-block;\n  overflow-x: hidden;\n  background-color: #000;\n  color: #fff;\n}\n.topMenu .menuTitle {\n  padding-left: 1.6rem;\n  font-size: 1.6rem;\n  border-bottom: 1px solid #909090;\n  background-color: #323435;\n}\n.topMenu .menuTitle .text {\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.topMenu .menuOption {\n  position: relative;\n  font-size: 1.4rem;\n}\n.topMenu .menuOption.pressed {\n  background-color: #444;\n}\n.topMenu .menuOption .icon {\n  display: inline-block;\n  height: 100%;\n  background-size: auto 70%;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.topMenu .menuOption .label {\n  display: inline-block;\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.topMenu .menuSeparator {\n  border-bottom: 1px solid #777;\n}\n';t("lessify")(e),i.g=e},{"lessify":143}],74:[function(t,i,n){"use strict";function e(){this.Iq=this.Jq=0,this.Kq=this.Lq=!1,this.startTime=this.Mq=0,this.Nq=[],this.Oq=0,this.Pq=null,this.Qq=!1,r()}function r(){window.addEventListener("mousemove",function t(){d.Qq=!0,window.removeEventListener("mousemove",t)})}function o(t){if(d.Kq)return d.Rq();d.Sq(t.changedTouches[0],t,t.currentTarget)}function s(t){d.Tq(t.changedTouches[0],t)}function h(t){if(t.changedTouches.length>1)return d.Rq();d.Uq(t.changedTouches[0],t)}function u(){d.Rq()}function a(t){t.button===f&&d.Sq(t,t,t.currentTarget)}function c(t){t.button===f&&d.Tq(t,t)}function l(t){d.Uq(t,t)}function p(t,i,n){i.Wq&&(i.$q=null,t.dr(i,n))}var f=0,d=i.g=new e;e.prototype.Vq=function(t){this.Nq.push(t),this.Oq++,t.Wq=!0,t.Yq.Xq("pressed"),t.addEventListener("touchmove",h),t.addEventListener("touchend",s),t.addEventListener("touchcancel",u),1===this.Oq&&(document.addEventListener("mousemove",l),document.addEventListener("mouseup",c))},e.prototype.Zq=function(t){var i=this.Nq.indexOf(t);if(i<0)return console.error("_stopListening: not a target",t);this.Nq[i]=null,this.Oq--,t.Wq=!1,t.Yq.Xq("released"),t.$q&&window.clearTimeout(t.$q),t.removeEventListener("touchmove",h),t.removeEventListener("touchend",s),t.removeEventListener("touchcancel",u),0===this.Oq&&(document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",c),this.Nq.length=0)},e.prototype._q=function(){this.ar(null)},e.prototype.ar=function(t){for(var i=0;i<this.Nq.length;i++){var n=this.Nq[i];n&&n!==t&&this.Zq(n)}this.Pq=t},e.prototype.Sq=function(t,i,n){this.Lq&&this.br(),this.Vq(n),this.Iq=t.clientX,this.Jq=t.clientY,this.startTime=Date.now();var e=n.Yq;if(e.xq&&!this.Kq){var r=e.cr;0===r?i.preventDefault():e.$q=window.setTimeout(p,r,this,n,t)}},e.prototype.Uq=function(t,i){var n=Date.now();if(n-this.Mq<50)return i.preventDefault();this.Mq=n;var e;if(this.Kq)return e=this.Pq.Yq,e.Xq("drag",t.pageX-e.er,t.pageY-e.gr),i.preventDefault();for(var r=Math.abs(t.clientX-this.Iq)+Math.abs(t.clientY-this.Jq),o=0;o<this.Nq.length;o++){var s=this.Nq[o];if(s&&(e=s.Yq,!(r<e.hr)))if(e.xq){if(!(n-this.startTime<e.cr)){this.dr(s,t);break}this.Zq(s)}else this.Zq(s)}i.preventDefault()},e.prototype.Tq=function(t,i){i.preventDefault();var n,e;if(this.Lq=!0,this.Kq){n=this.Pq,e=n.Yq;if(Date.now()-this.startTime<e.ir)return this.Rq();this.Kq=!1,this.Zq(n),e.Xq("dragEnd",t.pageX-e.er,t.pageY-e.gr)}else{for(var r=0;r<this.Nq.length&&(!(n=this.Nq[r])||(e=n.Yq,!e.Xq("tap",t.pageX-e.er,t.pageY-e.gr)));r++);this._q()}this.Lq=!1},e.prototype.br=function(){console.warn("Cleaning up touchManager"),this.Lq=!1,this._q()},e.prototype.dr=function(t,i){this.Kq=!0,this.startTime=Date.now(),this.ar(t);var n=t.Yq;n.Xq("dragStart",i.pageX-n.er,i.pageY-n.gr)},e.prototype.Rq=function(){this.Kq&&(this.Kq=!1,this.Pq.Yq.Xq("dragCancel")),this._q()},e.prototype.wq=function(t,i,n){n=n||{};var e={Xq:i,hr:void 0!==n.jr?n.jr:10};n.xq&&(e.xq=!0,e.cr=n.kr||0,e.ir=void 0!==n.yq?n.yq:100,e.er=t.offsetLeft,e.gr=t.offsetTop),t.Yq=e,t.addEventListener("touchstart",o),t.addEventListener("mousedown",a)}},{}],75:[function(t,i,n){"use strict";function e(t){return decodeURIComponent(t.replace(o," "))}var r=/([^&=]+)=?([^&]*)/g,o=/\+/g;n.lr=function(t){t=(t||window.location.search).substring(1);for(var i={};;){var n=r.exec(t);if(!n)break;i[e(n[1])]=e(n[2])}return i},n.mr=function(t){var i=document.createElement("a");i.href=t,i.click()}},{}],76:[function(t,i,n){"use strict";var e=t("./hh/Logger"),r=new e;r.Wi(r.Qj),i.g=r},{"./hh/Logger":57}],77:[function(t,i,n){"use strict";function e(){this.appName=r.name,this.appVersion=r.version,this.nr=null,this.or=null}var r=t("../package.json");i.g=new e},{"../package.json":149}],78:[function(t,i,n){"use strict";function e(){var t=window.location;return t.protocol+"//"+t.host+t.pathname}function r(t){this.tr=t,this.ur=null,this.files=null,this.vr=null}var o=t("Dropbox"),s=t("../hh/fileHelper"),h=t("../hh/getText"),u=t("../../config/net.json"),a=t("../hh/PopupDlg"),c=t("../hh/urlHelper");n.pr=function(t){var i=c.lr(window.location.hash);if(i["error"])return t.Qc("dbxToken",null),new a(null,i["error_description"],h("#problem")+": "+i["error"],{},function(){t.qp(),c.mr(e())}),!1;var n=i["access_token"];return!!n&&(t.Qc("dbxToken",n),t.qp(),c.mr(e()),!0)},n.qr=function(t){var i=t.Sc("dbxToken");return i?new r(i):null},n.rr=function(){var t=new o({"clientId":u["dropbox-clientId"]}),i=t.sr(e());c.mr(i)},r.prototype.connect=function(t){this.ur||(this.ur=new o({"accessToken":this.tr})),this.wr("",t)},r.prototype.wr=function(t,i){if(!this.ur)return i(h("#noDropbox"));var n=this;this.ur.xr({"path":t}).then(function(t){var e=t["entries"];n.files={};for(var r=0;r<e.length;r++)n.yr(e[r]);i()}).catch(i)},r.prototype.yr=function(t){var i=t["path_display"];"file"!==t[".tag"]?this.files[i]={path:i,zr:!0}:this.files[i]={path:i,timestamp:t["server_modified"]}},r.prototype.Ar=function(t){if("/"!==(t=t||"/"))throw new Error("Unsupported call to getNumEntries + path");return this.vr=Object.keys(this.files),this.vr.length},r.prototype.Br=function(t){var i=this.vr[t];return i?{path:i,timestamp:this.files[i].timestamp}:null},r.prototype.bp=function(t,i){if(!this.ur)return i(h("#noDropbox"));this.ur.Cr({"path":t}).then(function(t){s.ep(t["fileBlob"],function(n){i(null,n,t["server_modified"])})}).catch(i)},r.prototype.dp=function(t,i,n){if(!this.ur)return n(h("#noDropbox"));var e=new Blob([i],{type:"text/plain"}),r=this;this.ur.Dr({"path":t,"contents":e,"mode":{".tag":"overwrite"},"mute":!0}).then(function(i){var e=i["server_modified"];r.files[t]={timestamp:e},n(null,e)}).catch(n)},r.prototype.Er=function(t,i){if(!this.ur)return i(h("#noDropbox"));var n=this;this.ur.Fr({"path":t}).then(function(){n.files[t]={zr:!0},i()}).catch(i)},r.prototype.Gr=function(t,i){if(!this.ur)return i(h("#noDropbox"));var n=this;this.ur.Hr({"path":t}).then(function(){delete n.files[t],i()}).catch(i)},r.prototype.Ir=function(t,i,n){if(!this.ur)return n(h("#noDropbox"));var e=this;this.ur.Jr({"from_path":t,"to_path":i}).then(function(){e.files[i]=e.files[t],delete e.files[t],n()}).catch(n)}},{"../../config/net.json":8,"../hh/PopupDlg":60,"../hh/fileHelper":67,"../hh/getText":68,"../hh/urlHelper":75,"Dropbox":112}],79:[function(t,i,n){"use strict";function e(t,i,n,e){this.gc=t,this.Kr=i,this.jf=n,this.Lr=e,this.Mr=null,this.Nr=this.Or=null}function r(t){return"/"+t}function o(t){return f+"/"+t}function s(t){return new Date(t).toISOString().substring(0,19)+"Z"}function h(t){return new Date(t).getTime()}var u=t("contra"),a=t("../GameInVault"),c=t("../GameVault").zc,l=t("../hh/getText"),p=t("../log"),f="/archivedGames";i.g=e,e.prototype.connect=function(t){this.Mr={};var i=this;this.Kr.connect(function(n){if(n)return i.Pr(n,t);i.Qr(t)})},e.prototype.Pr=function(t,i){var n=t;"string"==typeof t.error&&(n=t.error,void 0!==t.response&&(n+="\nResponse: "+t.response),void 0!==t.status&&(n+="\nStatus: "+t.status)),this.Lr(n,p.ERROR),i(t)},e.prototype.Qr=function(t){for(var i=!1,n=!1,e=this.Kr.Ar(),r=0;r<e;r++){var o=this.Kr.Br(r),s=o.path;if("/vaultState.json"===s)i=!0;else if(s===f)n=!0;else{var h=s.substr(1);this.Mr[h]=o.timestamp}}n||this.Kr.Er(f,function(){}),i?this.Rr(t):(this.Nr={},this.Or={},t())},e.Sr=s,e.Tr=h,e.prototype.Ur=function(t,i,n){var e=this.jf.Dc(t);if(e===c.Ac)return n();if(e===c.ACTIVE)return n();switch(e){case c.Bc:var r=this.jf.Fc(t),o=s(r.Xa());i>o?(this.jf.Mc(t),this.Lr(l("#unarchived")+t,p.tp),n()):(this.Lr(l("#archived")+l("#remote",t),p.Xi),this.Vr(t,o,n));break;case c.Cc:var h=s(this.jf.Ec(t));i>h?(this.Lr(l("#undeleted")+t,p.tp),n()):(this.Lr(l("#deleted")+l("#remote",t),p.Xi),this.Wr(t,h,n));break;default:throw new Error("Unexpected GameState: "+e)}},e.prototype.Xr=function(t,i){var n=this;this.Yr(r(t),function(e,r,o){if(e)return i(e);n.Zr(r,t,o),n.Lr(l("#downloaded")+t,p.Qj),i()})},e.prototype.Yr=function(t,i){this.Kr.bp(t,function(t,n,e){if(t)return self.Pr(t,i);var r=[],o=new a;if(!o.Da(n,r))return self.Pr(r.join("\n"),i);i(null,o,e)})},e.prototype.$r=function(t,i){var n=t.Za(),e=this,o=this.Mr[n];return o?o===t.Wa()?(this.Lr(l("#alreadySync")+n,p.Xi),i()):void this.as(t,r(n),function(r){if(r)return i(r);e._r(t,n,i)}):this._r(t,n,i)},e.prototype.as=function(t,i,n){var e=this;this.Yr(i,function(i,r){if(i)return n(i);var o=[];if(!t.Ma(r,o))return i=t.Za()+": "+o.join("\n"),e.Pr(i,n);n()})},e.prototype._r=function(t,i,n){var e=!!this.Mr[i];if(!e){var h=s(t.Xa());if(this.Nr[i]>h)return this.jf.Hc(i),this.Lr(l("#deleted")+i,p.Xi),n();if(this.Or[i]>=h)return this.jf.Kc(i),this.Lr(l("#archived")+i,p.Xi),n()}var u=this;this.Kr.dp(r(i),t.za(),function(r,s){return r?u.Pr(r,n):(u.Zr(t,i,s),e?(u.Lr(l("#synced")+i,p.Qj),n()):u.Nr[i]?(u.Lr(l("#undeleted")+l("#remote",i),p.tp),delete u.Nr[i],u.bs(n)):u.Or[i]?(u.Lr(l("#unarchived")+l("#remote",i),p.Xi),delete u.Or[i],u.bs(function(){u.Kr.Gr(o(i),n)})):(u.Lr(l("#uploaded")+i,p.Xi),void n()))})},e.prototype.Zr=function(t,i,n){this.Mr[i]=n,t.Va(n,h(n)),this.jf.vc(t)},e.prototype.cs=function(t,i,n,e){this.Or[i]=n,t.Va(n,h(n)),this.jf.Nc(t),this.bs(e)},e.prototype.Vr=function(t,i,n){this.Or[t]=i;var e=this;this.bs(function(){delete e.Mr[t],e.Kr.Ir(r(t),o(t),n)})},e.prototype.ds=function(t,i){var n=t.Za();if(this.Mr[n])return i();var e=t.Wa(),r=this.Or[n],s=this;if(r===e)return i();var h=o(n);if(!r)return this.Nr[n]?i():this.Kr.dp(h,t.za(),function(e,r){if(e)return i(e);s.Lr(l("#uploaded")+l("#archivedGame",n),p.Xi),s.cs(t,n,r,i)});this.as(t,h,function(e){if(e)return i(e);s.Kr.dp(h,t.za(),function(e,r){if(e)return i(e);s.Lr(l("#synced")+l("#archivedGame",n),p.tp),s.cs(t,n,r,i)})})},e.prototype.es=function(t,i){var n=this;this.Yr(o(t),function(e,r,o){if(e)return i(e);n.Lr(l("#downloaded")+l("#archivedGame",t),p.Xi),n.cs(r,t,o,i)})},e.prototype.Wr=function(t,i,n){this.Nr[t]=i;var e=this;this.bs(function(){delete e.Mr[t],e.Kr.Gr(r(t),n)})};e.prototype.Rr=function(t){var i=this;this.Kr.bp("/vaultState.json",function(n,e){if(n)return i.Pr(n,t);var r=JSON.parse(e);i.Nr=r["deletedFiles"]||{},i.Or=r["archivedFiles"]||{},t()})},e.prototype.bs=function(t){var i={};i["deletedFiles"]=this.Nr,i["archivedFiles"]=this.Or;var n=JSON.stringify(i);this.Kr.dp("/vaultState.json",n,t)},e.prototype.gs=function(t,i){if(t===this.jf.qc())throw new Error("syncOneGame(unsaved)");this.$r(t,i)},e.prototype.hs=function(t){if(this.jf.qc())throw new Error("syncAll with unsaved");var i=this;u.js([this.ks.bind(this),this.ls.bind(this),this.ms.bind(this),this.ns.bind(this),this.os.bind(this)],function(n){if(n)return i.Pr(n,t);i.Lr(l("#syncDone")),t()})},e.prototype.ks=function(t){var i=this;u.ps.js(this.Mr,function(t,n,e){i.Ur(n,t,e)},t)},e.prototype.ls=function(t){var i=this;u.ps.js(this.jf.xc(),function(t,n){i.$r(t,n)},t)},e.prototype.ms=function(t){var i=this;u.ps.js(this.Mr,function(t,n,e){if(i.jf.wc(n))return e();i.Xr(n,e)},t)},e.prototype.ns=function(t){var i=this;u.ps.js(this.jf.Gc(),function(t,n){i.ds(t,n)},t)},e.prototype.os=function(t){var i=this;u.ps.js(this.Or,function(t,n,e){if(i.jf.Dc(n)!==c.Ac)return e();i.es(n,e)},t)}},{"../GameInVault":10,"../GameVault":13,"../hh/getText":68,"../log":76,"contra":126}],80:[function(t,i,n){"use strict";var e=t("../../config/net.json");n.qs=function(t){var i,n=(t.fb("source")||"").toLowerCase(),e=t.fb("place")||"";return n.indexOf("littlegolem")>=0?(i=t.fb("event"),i?{rs:"LittleGolem",id:i}:null):n.indexOf("www.dragongoserver")>=0?(i=n.substr(n.indexOf("gid=")+4),{rs:"DragonGo",id:i}):e.indexOf("online-go.com/game/")>=0?(i=e.substr(e.indexOf("/game/")+6),{rs:"OGS",id:i}):null},n.ss=function(t,i){return e["server-url"]+"getgame?site="+t+"&id="+i},n.ts=function(t){switch(t.rs){case"LittleGolem":return"http://www.littlegolem.net/servlet/sgf/"+t.id+"/game.sgf";case"DragonGo":return"http://www.dragongoserver.net/sgf.php?gid="+t.id+"&owned_comments=1";case"OGS":return"https://online-go.com/api/v1/games/"+t.id+"/sgf";default:return null}};var r={"http://www.littlegolem.com":"LittleGolem","OGS: http://online-go.com/game/":"OGS:","http://www.dragongoserver.net/game.php?gid=":"DragonGo:"};n._a=function(t,i){for(var n in r)i=i.replace(n,r[n]);return"EV"===t&&""+parseInt(i)===i&&(i="EV:"+i),i}},{"../../config/net.json":8}],81:[function(t,i,n){"use strict";function e(){this.debug=!1,this.us=this.Bn=!1,this.vs=null,this.ws=null}i.g=new e,e.prototype.xs=function(t,i){this.vs=new t,i(this.vs)},e.prototype.assert=function(t,i){if(t!==!0)throw new Error("assertion failed: "+(i||t))}},{}],82:[function(t,i,n){"use strict";function e(){this.ys=null,this.zs=null,this.qb=null,this.Eb=0,this.As=null,this.cursor={type:"CR",x:0,y:0},this.Bs=!1,this.Cs={type:null,x:0,y:0}}function r(t){switch(t){case-1:return{type:"mini",c:p.B};case-.5:return{type:"outline",c:p.B};case 0:return null;case.5:return{type:"outline",c:p.W};case 1:return{type:"mini",c:p.W};default:return null}}function o(t){switch(t){case u.se+v:case u.re+g:return{type:"mini",c:p.B};case u.se+g:case u.re+v:return{type:"mini",c:p.W};case u.qe:return{type:"SL",c:"grey"};default:return null}}function s(t){if(null===t)return null;var i=1,n=0,e=2,r=0;if(void 0!==x&&(n=x),void 0!==k&&(e=k),void 0!==j&&(r=j),t===r)return null;for(var o=t.toFixed(e),s=n;s<e;s++)o=o.ed("0");if(o=o.ed("."),"0."===o.substr(0,2)&&(o=o.slice(1)),0===r){if("0"===o||".0"===o)return null;i=t<1?.6:1}return{type:"LB",text:o,scale:i}}var h=t("../constants"),u=t("../Grid"),a=t("../log"),c=t("../Move"),l=t("../hh/touchManager");t("../../lib/wgo.js");var p=window.WGo,f=c.fe,d=c.lb,g=h.nb,v=h.mb,y=h.EMPTY,b=window.devicePixelRatio||1,m={};m[p.B]=v,m[p.W]=g;var w={};w[y]=null,w[v]=p.B,w[g]=p.W;i.g=e,e.prototype.create=function(t,i,n,e){var r=n.Eb;if(this.qb=n,!this.ys||this.Eb!==r){this.Eb=r,e=e||{};var o=e.Ds?0:-.23,s={size:r,width:i,section:{top:o,left:o,right:o,bottom:o},coordFontSize:.6};switch(e.background){case"wood":s.background=(window.Es||".")+"/assets/wood1.jpg";break;default:s.background="#c75"}t.clear(),this.ys=new p.Fs(t.Ho(),s),this.Bs=!1,this.Cs.type=null,e.Ds||this.ys.Gs(p.Fs.Hs),this.Is()}},e.prototype.Is=function(){var t=this;l.wq(this.ys.Js,function(i,n,e){if("dragCancel"===i)return t.Ks(-1,-1);"drag"===i.substr(0,4)&&(e-=65*b);var r=t.Ls(n,e);switch(n=r[0],e=r[1],i){case"dragStart":case"drag":return t.Ks(n,e);case"dragEnd":if(t.Ks(-1,-1),Date.now()-t.Ms<300)return;return t.Ns(n,e);case"tap":return t.Ns(n,e)}},{xq:!0,kr:300,yq:500})},e.prototype.Os=function(t){this.Ps=w[t]},e.prototype.Ks=function(t,i){var n=this.Qs(t,i);if(this.Bs){if(t===this.cursor.x&&i===this.cursor.y)return;this.ys.Rs(this.cursor)}this.Bs=n,n&&(this.cursor.x=t,this.cursor.y=i,this.Ms=Date.now(),this.ys.Ss[t][i][0]?(this.cursor.type="SL",this.cursor.c=void 0):(this.cursor.type=void 0,this.cursor.c=this.Ps),this.ys.Ts(this.cursor))},e.prototype.Us=function(t,i,n){this.Cs.type&&this.ys.Rs(this.Cs),this.Cs.type=t,t&&(this.Cs.x=i-1,this.Cs.y=this.Eb-n,this.ys.Ts(this.Cs))},e.prototype.Vs=function(t,i,n,e){this.ys.Ts({x:i-1,y:this.Eb-n,type:"LB",text:t,scale:e?1.1:.8})},e.prototype.Qs=function(t,i){return t>=0&&i>=0&&t<this.Eb&&i<this.Eb},e.prototype.Ns=function(t,i){var n=t+1,e=this.Eb-i;if(!this.Qs(t,i))return this.zs("!"+(n>=1&&n<=this.Eb?f(n):e));if(this.qb.Md(n,e)===y){var r=d(n,e);this.zs(r)}},e.prototype.Ws=function(t){this.zs=t},e.prototype.Ls=function(t,i){var n=this.ys;return t=Math.round((t*b-n.left)/n.Xs),i=Math.round((i*b-n.top)/n.Ys),[t,i]},e.prototype.refresh=function(){var t=!1;"regular"!==this.As&&(this.As="regular",t=!0);for(var i=0;i<this.Eb;i++)for(var n=0;n<this.Eb;n++){var e=this.qb.Md(n+1,this.Eb-i),r=w[e],o=this.ys.Ss[n][i][0];t&&(o=null,this.ys.Zs(n,i)),null===r?o&&this.ys.Zs(n,i):o&&o.c===r||(o&&this.ys.Zs(n,i),this.ys.Ts({x:n,y:i,c:r}))}},e.prototype.show=function(t,i,n){this.refresh(),this.As=t;for(var e=0;e<this.Eb;e++)for(var r=0;r<this.Eb;r++){var o=n(i[this.Eb-e][r+1]);o&&(o.x=r,o.y=e,this.ys.Ts(o))}};var x,k,j;e.prototype.$s=function(t,i,n){x=t,k=i,j=n};var q={Ak:r,_s:o,value:s};e.prototype.at=function(t,i){var n=q[t];if(!n)return a.error&&a.error("invalid display type: "+t);this.show(t,i,n)},e.prototype.bt=function(t){this.show("scoring",t,o)}},{"../../lib/wgo.js":106,"../Grid":17,"../Move":21,"../constants":51,"../hh/touchManager":74,"../log":76}],83:[function(t,i,n){"use strict";function e(t,i,n,e){this.ct=i,this.dt=n,this.et=e,this.ft=null,this.gt=null,this.list=t.Yn("gameList")}function r(){this.kt.lt(this)}t("./gameList.less");var o=t("../GameInVault"),s=t("../hh/tapBehavior");i.g=e,e.prototype.ht=function(){return this.gt},e.prototype.it=function(){return this.ft.text()},e.prototype.jt=function(t){t.sort(o.ab),this.list.xo();for(var i=0;i<t.length;i++){var n=t[i],e=this.list.Yn("oneGame").co(1);e.Yn("text").fo(n.Ya()),e.qa=n.Za(),e.kt=this,s(e,r)}},e.prototype.lt=function(t){this.ft&&this.ft._n("selected",!1),t._n("selected",!0),this.ft=t,this.gt=t.qa,
this.dt.call(this.ct,this.gt)},e.prototype.nt=function(){this.ft&&this.ft._n("selected",!1),this.list.wo()||this.list.Yn("emptyMsg").fo(this.et),this.ft=null,this.gt=null,this.dt.call(this.ct,this.gt)},e.prototype.ot=function(){this.ft&&(this.list.removeChild(this.ft),this.nt())}},{"../GameInVault":10,"../hh/tapBehavior":72,"./gameList.less":94}],84:[function(t,i,n){"use strict";function e(t,i){this.jf=t,this.Tp=i,this.$p(),s.Hp(this.Bp)}t("./importDlg.less");var r=t("../hh/Dome"),o=t("../hh/getText"),s=t("../hh/PopupDlg");i.g=e,e.prototype.$p=function(){var t=this.Bp=r.Yn(null,"importDialog dialog");t.zo(!1),t.Yn("dialogTitle").fo(o("#importGame"));var i=this.pt=t.Yn("mainDiv");this.qt=r.Ro(i,"loadGame",o("#fromFile")).setAttribute("type","file").setAttribute("id","fileInput").zo(!1),new r(this.qt.So,"label","btn fileInputBtn").setAttribute("for","fileInput").co(1.2).Yn("btnText").fo(o("#selectFile")),this.qt.v("change",this.rt.bind(this)),r.Qo(i),this.Gf=r.Ro(i,"moves",o("#fromText"),void 0,o("#fromTextHelp"));var n=t.Yn("btnDiv");r.Ko(n,"loadBtn",o("#load"),this.rt.bind(this)).co(1.2),r.Ko(n,"cancelBtn",o("#cancel"),this.st.bind(this)).co(1.2),t.zo(!0),s.jo(t,document.body)},e.prototype.rt=function(){if(this.qt.cp()){var t=this;this.qt.dp(function(i){t.tt(i)})}else this.tt(this.Gf.value())},e.prototype.tt=function(t){if(t){var i=[],n=this.jf.Oc(t,i);if(!n)return new s(null,i.join("\n"));this.Tp({Fg:n})&&s.oo(this.Bp)}},e.prototype.st=function(){s.oo(this.Bp),this.Tp({ut:!0})}},{"../hh/Dome":54,"../hh/PopupDlg":60,"../hh/getText":68,"./importDlg.less":96}],85:[function(t,i,n){"use strict";function e(t,i,n,e){var r=this.po=t.Yn("moveIndicator "+n).eo(i);this.vt=r.Yn("label").fo(e),r.Yn("stone").Yn("icon"),this.wt=r.Yn("text")}t("./moveIndicator.less");var r=t("../constants"),o=r.nb,s=r.mb;i.g=e,e.prototype.xt=function(t,i,n){this.po.zo(null!==t),null!==t&&(this.po._n("black",i===s),this.po._n("white",i===o),this.wt.fo(t),n&&this.vt.fo(n))}},{"../constants":51,"./moveIndicator.less":97}],86:[function(t,i,n){"use strict";function e(t,i){this.jf=t,this.yt=i,this.zt=!1,this.$p(),this.kt.jt(this.jf.Gc()),this.kt.nt(),h.Hp(this.Bp)}t("./myArchivedGamesDlg.less");var r=t("../hh/Dome"),o=t("./GameList"),s=t("../hh/getText"),h=t("../hh/PopupDlg");i.g=e,e.prototype.At=function(){var t=!!this.kt.ht();this.Bt.Co(t),this.Ct.Co(t)},e.prototype.Dt=function(){var t=this.kt.ht();if(t){var i=s("#deleteGameConfirm")+"\n\n"+this.kt.it();h.Vp(null,i,function(i){i.jf.Jc(t)||console.error("Failed to delete gameId: "+t),i.kt.ot()},this)}},e.prototype.Et=function(){var t=this.kt.ht();t&&this.jf.Mc(t)&&(this.kt.ot(),this.zt=!0)},e.prototype.$p=function(){var t=this.Bp=r.Yn(null,"myArchivedGamesDialog dialog");t.zo(!1),t.Yn("dialogTitle").fo(s("#archivedGames"));var i=this.pt=t.Yn("mainDiv");this.kt=new o(this.pt,this,this.At,s("#empty")),this.Bt=r.Ko(i,"delGameBtn",s("#deleteGame"),this.Dt.bind(this)).co(1.2),this.Ct=r.Ko(i,"restoreGameBtn",s("#restoreGame"),this.Et.bind(this)).co(1.2);var n=t.Yn("btnDiv");r.Ko(n,"closeBtn",s("#close"),this.Ft.bind(this)).co(1.2),t.zo(!0),h.jo(t,document.body)},e.prototype.Ft=function(){h.oo(this.Bp),this.zt&&this.yt()}},{"../hh/Dome":54,"../hh/PopupDlg":60,"../hh/getText":68,"./GameList":83,"./myArchivedGamesDlg.less":98}],87:[function(t,i,n){"use strict";function e(t,i){this.jf=t,this.Tp=i,this.result={},this.$p(),this.$c(),a.Hp(this.Bp)}function r(){var t=this.ct;t.kt.nt(),t.It.Co(this.value()>0)}t("./myGamesDlg.less");var o=t("../hh/Dome"),s=t("./GameList"),h=t("../hh/getText"),u=t("./MyArchivedGamesDlg"),a=t("../hh/PopupDlg");i.g=e,e.prototype.Gt=function(){var t=!!this.kt.ht();this.Bt.Co(t),this.Ht.Co(t),this.It.Co(t),t&&this.Jt.select(0)},e.prototype.Dt=function(){var t=this.kt.ht();if(t){var i=h("#deleteGameConfirm")+"\n\n"+this.kt.it();a.Vp(null,i,function(i){i.jf.Hc(t)||console.error("Failed to delete gameId: "+t),i.kt.ot()},this)}},e.prototype.Kt=function(){var t=this.kt.ht();if(t){var i=h("#archiveGameConfirm")+"\n\n"+this.kt.it();a.Vp(null,i,function(i){i.jf.Kc(t)&&i.kt.ot()},this)}},e.prototype.Lt=function(){new u(this.jf,this.$c.bind(this))},e.prototype.$c=function(){this.kt.jt(this.jf.xc()),this.Gt()},e.prototype.$p=function(){var t=this.Bp=o.Yn(null,"myGamesDialog dialog");t.zo(!1),t.Yn("dialogTitle").fo(h("#myGames"));var i=this.pt=t.Yn("mainDiv");this.kt=new s(this.pt,this,this.Gt,h("#myGamesHelp")),this.Bt=o.Ko(i,"delGameBtn",h("#deleteGame"),this.Dt.bind(this)).co(1.2),this.Ht=o.Ko(i,"archiveGameBtn",h("#archiveGame"),this.Kt.bind(this)).co(1.2),this.Mt=o.Ko(i,"showArchiveBtn",h("#showArchivedGames"),this.Lt.bind(this)).co(1.2);var n=i.Yn();o.Po(n,"inputLbl",h("#recentGames"));var e=[h("#none")].concat(this.jf.Tc());this.Jt=o.Wo(n,"recentGames",e,"byIndex"),this.Jt.v("change",r),this.Jt.ct=this;var u=t.Yn("btnDiv");this.It=o.Ko(u,"loadBtn",h("#load"),this.rt.bind(this)).co(1.2),o.Ko(u,"cancelBtn",h("#cancel"),this.tt.bind(this,!0)).co(1.2),t.zo(!0),a.jo(t,document.body)},e.prototype.rt=function(){var t=this.Jt.value();if(t>0)return this.result.Fg=this.jf.tc(t-1),void this.tt();var i=this.kt.ht();i&&(this.result.Fg=this.jf.wc(i),this.tt())},e.prototype.tt=function(t){this.result.ut=!!t,this.Tp(this.result)&&a.oo(this.Bp)}},{"../hh/Dome":54,"../hh/PopupDlg":60,"../hh/getText":68,"./GameList":83,"./MyArchivedGamesDlg":86,"./myGamesDlg.less":99}],88:[function(t,i,n){"use strict";function e(t,i){this.Tp=i,this.Nt=t.Eb,this.Ot=t.Ot,this.Pt=t.Pt,this.$p(t),this.Qt(),this.Rt(),u.Hp(this.Bp)}t("./newGameDlg.less");var r=t("../ai"),o=t("../constants"),s=t("../hh/Dome"),h=t("../hh/getText"),u=t("../hh/PopupDlg"),a=t("../hh/Transit"),c=o.mb,l=o.nb,p=[5,7,9,13,19];i.g=e,e.prototype.Qt=function(){var t=this.Nt;this.St.fo(t+" x "+t);var i=t+"x"+t;this.Tt.no("backgroundImage",'url("assets/'+i+'.png")'),this.Tt.no("backgroundSize",Math.ceil(t/19*100)+"%"),this.Ut.Co(t>5),this.Vt.Co(t<19)},e.prototype.Wt=function(t){var i=p.indexOf(this.Nt)+t;this.Nt=p[i],this.Qt()},e.prototype.Rt=function(){this.Xt[c]._n("robot",this.Ot),this.Xt[l]._n("robot",this.Pt)},e.prototype.Yt=function(t){t===c?this.Ot=!this.Ot:this.Pt=!this.Pt,this.Rt()},e.prototype.$p=function(t){this.options=t;var i=this.Bp=s.Yn(document.body,"newGameDialog dialog");i.zo(!1),i.Yn("dialogTitle").fo("Start a new game");var n=i.Yn("mainDiv"),e=n.Yn("centeredDiv").Yn("boardDiv");this.Xt=[],this.Xt[c]=s.No(e,"playerBtn",this.Yt.bind(this,c));var o=this.Zt=e.Yn("sizeBox");this.Vt=s.No(o,"sizeBtn",this.Wt.bind(this,1)),this.Tt=o.Yn("boardImgFrame").Yn("boardImg"),this.St=this.Tt.Yn("curSize"),this.Ut=s.No(o,"sizeBtn",this.Wt.bind(this,-1)),this.Ut._n("down",!0),this.Xt[l]=s.No(e,"white playerBtn",this.Yt.bind(this,l)),this.$t=s.Ko(n,"advancedBtn","More options >>",this._t.bind(this)).co(1.3);var u=this.au=i.Yn("advancedDiv");s.Po(u,"inputLbl","Handicap:"),this.bu=s.Wo(u,"handicap",[0,2,3,4,5,6,7,8,9],null,t.bu),s.Po(u,"inputLbl","Komi:"),this.ub=s.Wo(u,"komi",[.5,1.5,2.5,3.5,4.5,5.5,6.5,7.5],null,t.ub);var a=u.Yn("rules");s.Po(a,"inputLbl","Rules:"),this.rules=s.Wo(a,"rules",["Japanese","Chinese"],null,t.rules);var p=Object.keys(r.Ln);if(p.length>1){var f=u.Yn();s.Po(f,"inputLbl","Black AI:"),this.Ig=s.Wo(f,"defaultAi",p,null,r.Ig.name),s.Po(f,"defAiInfo","(White AI always uses latest AI version)")}var d=s.Ko(i,"startBtn",h("#play"),this.cu.bind(this)).co(1.3);i.zo(!0);var g=this.au.po.clientHeight+d.po.clientHeight+24;this.au.no("marginTop",-g+"px")},e.prototype._t=function(){this.du?(this.eu=!this.eu,this.du.Hq(200)):(this.au.zo(!0),this.eu=!0,this.du=new a(this.au).Ip("marginTop","0").start(200)),this.$t.Mo("More options"+(this.eu?" <<":" >>"))},e.prototype.cu=function(){var t=this.options;t.Eb=this.Nt,t.bu=~~this.bu.value(),t.ub=parseFloat(this.ub.value()),t.Ot=this.Ot,t.Pt=this.Pt,r.Ig=this.Ig?r.Ln[this.Ig.value()]:r.Ig,t.rules=this.rules.value(),this.tt()},e.prototype.tt=function(){this.close(),this.Tp(this.options)},e.prototype.close=function(){s.removeChild(document.body,this.Bp)}},{"../ai":50,"../constants":51,"../hh/Dome":54,"../hh/PopupDlg":60,"../hh/Transit":64,"../hh/getText":68,"./newGameDlg.less":100}],89:[function(t,i,n){"use strict";function e(t){this.parent=t,this.fu=null}t("./progressLog.less");var r=t("../hh/NotificationPopup");i.g=e,e.prototype.start=function(t,i){this.fu=new r(this.parent,null,{className:"progressLog",Cp:!0,Ep:!0,title:t}),this.fu.Gp(!1),this.fu.Fp(i),this.fu.show()},e.prototype.stop=function(t,i){t&&this.fu.Fp(t,i),this.fu.Gp(!0),this.fu=null},e.prototype.Fp=function(t,i){this.fu.Fp(t,i)}},{"../hh/NotificationPopup":58,"./progressLog.less":101}],90:[function(t,i,n){"use strict";function e(t){this.lf=!1,this.nr=t,this.Fg=t.hf,this.gu=t.gu,this.ra=null,this.hu=null,this.iu=null,this.ju()}function r(){this.$u.Ru(this.move)}function o(t){return t?String.fromCharCode(64+t):d}t("./reviewUi.less");var s=t("../constants"),h=t("../hh/ContextMenu"),u=t("../hh/Dome"),a=t("../hh/getText"),c=t("../../config/misc.json"),l=t("../Move"),p=t("../hh/PopupDlg"),f=l.kb,d="*";i.g=e,e.prototype.ju=function(){this.lf&&this.ku(),this.lf=!1,this.ra=null,this.bookmarks=[],this.lu=this.mu=-1,this.nu=[]},e.prototype.ou=function(t,i,n){this.hu=u.Zo(),this.pu=u.Ko(t,"study"," ",this.qu.bind(this)).co(1.2),u.Ko(i,"back10","<<",this.ru.bind(this)).co(1.2),u.Ko(i,"back1","<",this.su.bind(this)).co(1.2),u.Ko(i,"forw1",">",this.tu.bind(this)).co(1.2),u.Ko(i,"forw10",">>",this.uu.bind(this)).co(1.2),this.vu=u.No(n,"cycleBtn",this.wu.bind(this),".").co(1.2),this.xu=u.No(null,"delMoveBtn",this.yu.bind(this),"."),u.$o()},e.prototype.zu=function(){this.pu.Mo(this.lf?"...":a("#review")),this.hu.zo(["back1","back10","forw1","forw10","cycleBtn"],this.lf),this.lf&&this.Au()},e.prototype.qu=function(){if(!this.lf)return this.Bu();var t=new h({io:!0});t.bo(a("#rewindAll"),this.Cu.bind(this),{name:"rewind",Du:!0}),t.bo(a("#gotoLastMove"),this.Eu.bind(this),{name:"lastReal",Du:!0}),t.bo(a("#bookmark"),this.Fu.bind(this),{name:"bookmark",Du:!0}),t.bo(a("#evalScore"),this.Gu.bind(this),{name:"scoring",Du:!0}),this.ra._f()||t.bo(a("#prune"),this.Hu.bind(this),{name:"prune",Du:!0}),t.bo(a("#endStudy"),this.ku.bind(this)),t.ho(this.pu,1,0)},e.prototype.Gu=function(){var t=this.nr.Iu(s.mb).Dn();this.nr.ys.bt(t[0]),this.iu.fo(this.nr.Ju.Mg(t[1]).join("\n"))},e.prototype.Fu=function(){if(this.lu!==-1)return this.Ku();this.lu=this.mu=this.bookmarks.length,this.bookmarks.push(this.ra.getBookmark()),this.Au()},e.prototype.Ku=function(){this.bookmarks.splice(this.lu,1),this.lu=-1,this.Au()},e.prototype.wu=function(){var t=(this.mu+1)%this.bookmarks.length,i=this.bookmarks[t];this.ra.gg(i),this.Fg.Hb();for(var n=this.ra.lg(i),e=0;e<n.length;e++)this.Fg.Tb(n[e]);this.Lu()},e.prototype.yu=function(){var t=this.ra;!t._f()&&t.wg()&&t.Cg()&&(this.nu.pop(),this.Fg.Tb("half_undo"),this.Lu())},e.prototype.Hu=function(){var t=this.ra;if(!t._f()){for(var i,n;;){if(i=t.Zf(),!t.hg())return;if(this.Fg.Tb("half_undo"),n=t.yg())break}var e=t.Ag(i);if(e<c["confirm-delete-moves"])return this.ra.Bg(i),this.Lu();this.Lu();var r=a("#pruneConfirm",o(n.indexOf(i)),i,e);p.Vp(null,r,function(t){t.ra.Bg(i),t.Lu()},this)}},e.prototype.Bu=function(){this.lf=!0,this.ra=this.gu.uf(),this.iu=this.nr.Mu,this.nr.zu(),this.Lu()},e.prototype.ku=function(){this.lf=!1,this.Nu(),this.gu.vf(),this.Ou(),this.nr.Pu(),this.nr.Qu(),this.nr.zu()},e.prototype.Ru=function(t){if(!this.Fg.Tb(t))return this.nr.statusMessage(this.Fg.Ub().join("\n"));this.ra.jg(t),this.Lu()},e.prototype.su=function(){this.ra.hg()&&(this.Fg.Tb("half_undo"),this.Lu())},e.prototype.ru=function(){for(var t=this.ra,i=t.zg()-1,n=t.$f();t.hg()&&(this.Fg.Tb("half_undo"),!t.yg())&&(--n!==i||!t._f()););this.Lu()},e.prototype.tu=function(){this.Su&&(this.ra.jg(this.Su),this.Fg.Tb(this.Su),this.Lu())},e.prototype.uu=function(){for(var t=this.ra,i=t.zg()-1,n=t.$f();this.Su&&(t.jg(this.Su),this.Fg.Tb(this.Su),!t.yg())&&(++n!==i||!t._f());)this.Tu();this.Lu()},e.prototype.Tu=function(){for(var t=this.ra.mg(),i=!0,n=0;n<t.length;n++)if(t[n]!==this.nu[n]){i=!1;break}i?this.Su=this.nu[n]:(this.nu=t,this.Su=null),this.Su||(this.Su=this.ra.xg())},e.prototype.Cu=function(){this.ra.ig(),this.Fg.Hb(),this.Lu()},e.prototype.Eu=function(){this.Nu(),this.Lu()},e.prototype.Nu=function(){for(this.ra.ig(),this.Fg.Hb();;){var t=this.ra.vg();if(!t)break;this.Fg.Tb(t)}},e.prototype.Lu=function(){this.nr.Pu(),this.Tu();var t=this.ra,i=t.Zf(),n=t.wg();this.lu=-1;for(var e=0;e<this.bookmarks.length;e++)if(t.kg(this.bookmarks[e])){this.lu=this.mu=e;break}this.hu.Co(["forw1","forw10"],!!this.Su),this.hu.Co(["back1","back10"],!!i),this.Au(),n&&this.nr.Uu(),this.Vu(i,n,this.Su),this.nr.Wu&&i&&i.length<=3&&this.nr.Xu(i)},e.prototype.Au=function(){this.vu.zo(!!this.bookmarks.length),this.lu!==-1?(this.vu.Mo(this.lu+1+"/"+this.bookmarks.length),this.vu.Co(1!==this.bookmarks.length)):(this.vu.Mo(""),this.vu.Co(!0))},e.prototype.Ou=function(){this.iu.xo()},e.prototype.Vu=function(t,i,n){if(this.iu.xo(),this.nr.Qu(n),i)t&&!this.ra._f()&&(this.xu.uo(this.iu),this.xu.Mo(t));else{var e=this.ra.yg();e&&this.Yu(e)}this.Zu()},e.prototype.Yu=function(t){for(var i=0;i<t.length;i++){var n=t[i];if(n){var e=f(n),s=o(i),h=this.ra.Ag(n);e?this.nr.ys.Vs(s,e[0],e[1]):s=n;var a=u.Ko(this.iu,"variationBtn",s,r).eo(1.3);a.$u=this,a.move=n,h&&a.Yn("btnInfo").fo(h)}}},e.prototype.Zu=function(){var t=this.ra.ng();t&&t.hh&&this.iu.Yn("moveComment").fo(t.hh)}},{"../../config/misc.json":7,"../Move":21,"../constants":51,"../hh/ContextMenu":53,"../hh/Dome":54,"../hh/PopupDlg":60,"../hh/getText":68,"./reviewUi.less":102}],91:[function(t,i,n){"use strict";function e(t){var i=this.Bp=s.Yn(null,"settingDlg dialog");i.Yn("dialogTitle").fo(u("#settings"));var n=i.Yn("content"),e=a.Op();s.Po(n,"inputLbl",u("#colorTheme")+":"),s.Wo(n,"theme",e,null,a.Lp).v("change",function(){var i=this.value();a.Np(i),t.Qc("theme",i)});var h=n.Yn("cloudDiv");s.Po(h,"inputLbl",u("#syncMyGames")+":"),s.Ko(h,"dropboxBtn",u("#setupDropbox"),r).co(1.2);var l=i.Yn("btnDiv");s.Ko(l,"okBtn",u("#ok"),o).co(1.2).Rp=this,c.jo(i,document.body)}function r(){h.rr()}function o(){var t=this.Rp;c.oo(t.Bp)}t("./settingDlg.less");var s=t("../hh/Dome"),h=t("../net/DropboxHelper"),u=t("../hh/getText"),a=t("../hh/Painter"),c=t("../hh/PopupDlg");i.g=e},{"../hh/Dome":54,"../hh/Painter":59,"../hh/PopupDlg":60,"../hh/getText":68,"../net/DropboxHelper":78,"./settingDlg.less":103}],92:[function(t,i,n){"use strict";function e(){this.gc=P,this.hf=new c,this.jf=new l(P),this.gu=new j(this.hf,this.jf),this.Ju=new C(this.hf),this.$u=new E(this),this.ys=null,this.bv=new q(document.body),this.cv=a.qr(P),this.dv=0,this.ev=!this.fv,this.gv=!1}t("./ui.less");var r=t("../ai"),o=t("./Board"),s=t("../../config/colors.json"),h=t("../constants"),u=t("../hh/Dome"),a=t("../net/DropboxHelper"),c=t("../GameLogic"),l=t("../GameVault"),p=t("../hh/GetFile"),f=t("../hh/getText"),d=t("../net/goSites"),g=t("../hh"),v=t("./ImportDlg"),y=t("../log"),b=t("../main"),m=t("../Move"),w=t("./MoveIndicator"),x=t("./MyGamesDlg"),k=t("./NewGameDlg"),j=t("../PendingGame"),q=t("./ProgressLog"),B=t("../hh/Painter"),S=t("../hh/PopupDlg"),A=t("../hh/LocalPref"),E=t("./ReviewUi"),C=t("../ScoreAnalyser"),M=t("./SettingDlg"),G=t("../net/SyncHelper"),D=t("./UiTopMenu"),T=m.kb,z=m.jb,_=h.nb,O=h.mb,I=h.Tn,L=h.Sn,P=new A("1g0_1");e._u=function(){P.op(),B.Mp(s,P.Sc("theme",".neonBlack")),g.init(B),document.body.style.height=u.to+"px",f.init("en",function(){a.pr(P)||(new e).av()})},i.g=e,e.prototype.av=function(){u._o(b.appName+(this.ev?"":" dev")),window.addEventListener("beforeunload",this.hv.bind(this,"unloading")),window.addEventListener("visibilitychange",this.hv.bind(this,"visibility")),window.setInterval(this.hv.bind(this,"autosave"),3e5),this.dv=P.Sc("newGameIndex",1),this.iv=P.Sc("newGameSize",9),this.jv=P.Sc("newGameKomi",5.5),this.kv=P.Sc("newGameHandCount",0),this.lv=P.Sc("newGameRules","Japanese"),this.mv=P.Sc("newGamePlayerB",I),this.nv=P.Sc("newGamePlayerW",L),this.ov=new D(this.pv.bind(this)),this.ov.qv(!!this.cv);var t=this.gu.Rc();t&&this.rv(t)||this.sv()},e.prototype.hv=function(t){("visibility"!==t?document.hidden:!document.hidden)||(this.gv&&this.gu.Pc(),P.Qc("newGameIndex",this.dv),P.qp())},e.prototype.pv=function(t){switch(t){case"newGame":this.sv();break;case"myGames":this.tv();break;case"importGame":this.uv();break;case"exportGame":this.vv();break;case"syncGame":this.wv();break;case"syncMyGames":this.xv();break;case"settings":new M(P);break;case"downloadLatest":this.yv()}},e.prototype.Pu=function(){this.ys.refresh(),this.zv&&this.Av()},e.prototype.Bv=function(t,i,n,e){var r=this.Cv="compact"===t,s=this.Dv=u.Yn(i,"gameUi");n&&s.Yn(r?"testTitle":"pageTitle").fo(n),this.Ev=s.Yn("board"),e&&(this.Fv=s.Yn("boardDesc").yo(e));var h=s.Yn("underBoard");if(this.Gv(h),this.Hv(h),r)this.Iv=28*(this.gu.xf()+2);else{this.zu();var a=u.to-10-this.ov.cq()-h.po.clientHeight;this.Iv=Math.min(a,u.so-15)}this.ys=new o,this.ys.Ws(this.Jv.bind(this))},e.prototype.Kv=function(){this.ov.qv(!!this.cv),this.Dv&&(u.removeChild(document.body,this.Dv),this.Dv=null,this.ys=null)},e.prototype.Lv=function(){this.Dv||this.Mv||this.sv()},e.prototype.sv=function(){if(!this.Mv){this.Nv();var t={Eb:this.iv,bu:this.kv,ub:this.jv,Ot:this.mv,Pt:this.nv,rules:this.lv},i=this;this.Mv=new k(t,function(t){return i.iv=t.Eb,i.kv=t.bu,i.jv=t.ub,i.lv=t.rules,i.mv=t.Ot,i.nv=t.Pt,P.Qc("newGameSize",i.iv),P.Qc("newGameKomi",i.jv),P.Qc("newGameHandCount",i.kv),P.Qc("newGameRules",i.lv),P.Qc("newGamePlayerB",i.mv),P.Qc("newGamePlayerW",i.nv),i.Ov(),i.Mv=null,!0})}},e.prototype.tv=function(){this.Nv();var t=this;new x(this.jf,function(i){return i.ut?(t.Lv(),!0):t.rv(i.Fg)})},e.prototype.uv=function(){this.Nv();var t=this;new v(this.jf,function(i){return i.ut?(t.Lv(),!0):t.rv(i.Fg)})},e.prototype.Gv=function(t){var i=this.Pv=t.Yn("statusBar").co(1);this.Qv=new w(i,1,"lastMove","Last:"),this.Mu=i.Yn("msgBar"),this.Rv=new w(i,1,"nextMove","Next:")},e.prototype.Qu=function(t){var i=this.gu.yf(),n=this.gu.dc();if(n.length){var e=z(n[n.length-1]);this.Qv.xt(e,1-i,"#"+n.length+":");var r=T(e);r?this.ys.Us("CR",r[0],r[1]):this.ys.Us(null)}else this.Qv.xt(null);t=this.gu.zf()?null:z(t||""),this.Rv.xt(t,i),this.ys.Os(i)},e.prototype.statusMessage=function(t){t.indexOf("\n")===-1&&(t="\n"+t),this.Mu.fo(t)},e.prototype.Hv=function(t){var i=this.Sv=t.Yn("mainControls"),n=i.Yn("leftDiv"),e=i.Yn("mainDiv"),r=i.Yn("rightDiv");this.Cv||this.$u.ou(n,e,r),this.controls=u.Zo(),u.Ko(e,"bPass",f("#pass"),this.Tv.bind(this,"pass")).co(1),u.Ko(e,"bUndo",f("#undo"),this.Uv.bind(this)).co(1),u.Ko(e,"next",f("#next"),this.Vv.bind(this,1)).co(1.2),u.Ko(e,"next10",f("#nextN",10),this.Vv.bind(this,10)).co(1.2),u.Ko(e,"accept",f("#accept"),this.Wv.bind(this,!0)).co(1.5),u.Ko(e,"refuse",f("#refuse"),this.Wv.bind(this,!1)).co(1.5),u.Ko(e,"newg",f("#newGame"),this.sv.bind(this)).co(1.5),u.Ko(r,"bResi",f("#resign"),this.Xv.bind(this)).co(.9),u.Ko(r,"nextAll",f("#finish"),this.Vv.bind(this)).co(.9),this.Yv=n.Yn("aiVsAiFlags"),this.Zv=u.To(this.Yv,"animated","Animated"),this.ev||this.$v(),u.$o()},e.prototype.zu=function(){var t=this.gu.zf(),i="ENDING"===t,n="ENDED"===t,e=this.$u.lf,r=!t&&!e,o=this._v[O]&&this._v[_],s=this.Cv;s||this.$u.zu(),this.controls.zo(["accept","refuse"],i&&!e),this.controls.zo(["bUndo","bPass","bResi"],r&&!o),this.controls.zo(["next","next10","nextAll"],r&&o),this.controls.zo(["aiVsAiFlags"],r&&o&&!s),this.controls.zo(["newg"],n&&!e&&!s),this.ev||this.aw(r,e,o,s)},e.prototype.bw=function(){this.gv&&(this.gu.pc(),this.$u.ju(),this.gv=!1)},e.prototype.Nv=function(){this.bw(),this.Kv()},e.prototype.cw=function(){this.bw()},e.prototype.dw=function(t){var i=this.gu.Pa(),n=i.fb(t===O?"playerBlack":"playerWhite");return n&&n.indexOf(r.Mn._m)>=0?I:L},e.prototype.rv=function(t){var i=[];if(!this.gu.qf(t,i))return new S(null,i.join("\n")),this.Kv(),!1;this.Mv&&(this.Mv=this.Mv.close());var n=this.dw(O),e=this.dw(_);return this.ew(n,e),this.fw(),!0},e.prototype.Ov=function(){this.gu.mf(this.iv,this.kv,this.jv,this.lv,this.mv,this.nv),this.gu.tf("source",b.appName),this.gu.tf("event",this.dv++),this.ew(this.mv,this.nv),this.statusMessage("Game started. Your turn..."),this.fw()},e.prototype.gw=function(t,i,n,e){this.zv=!0,this.gu.nf(e),this.Bv("compact",t,i,n),this.ew(I,I)},e.prototype.ew=function(t,i){this.hw(t,i),this.ev||this.fv(),this.Dv||this.Bv("main",document.body);var n=this.Cv?void 0:{background:"wood"};this.ys.create(this.Ev,this.Iv,this.gu.wf(),n),this.iw()},e.prototype.hw=function(t,i){this._v=[t,i],this.jw=[];for(var n=this.gu.Pa(),e=O;e<=_;e++){var r=e===O?"playerBlack":"playerWhite",o=n.fb(r);if(this._v[e]){var s=this.Iu(e).constructor;o||this.gu.tf(r,s._m+"-"+s.an)}else o||this.gu.tf(r,"human")}},e.prototype.iw=function(){this.Pu(),this.Qu(),this.zu()},e.prototype.Iu=function(t){var i=this.jw[t];if(i)return i;var n=t===O?r.Ig:r.Mn;return i=this.jw[t]=new n(this.hf,t)},e.prototype.fw=function(){this.gv=!0,this.ov.kw(this.gu.Pa(),!!this.cv),this.Uu()||this.lw()},e.prototype.Jv=function(t){if("!"===t[0])return!this.ev&&this.mw(t.substr(1));var i=this.$u.lf;if(i||this.Wu)return!this.ev&&this.Wu&&this.nw(t,null,!0),void(i&&this.$u.Ru(t));this.ow||this._v[this.gu.yf()]&&this.ev||this.gu.zf()||this.Tv(t)},e.prototype.Uu=function(){switch(this.gu.zf()){case"ENDING":return this.pw(),!0;case"ENDED":return this.Cj(),this.qw(),!0;default:return!1}},e.prototype.Cj=function(){var t=this.Ju.Lg();this.rw=t.join("\n")},e.prototype.pw=function(){this.Cj(),this.statusMessage(this.rw),this.zu(),this.ys.bt(this.Ju.Og().od)},e.prototype.Wv=function(t){var i=this.gu.yf();if(this._v[i]&&!this._v[1-i]&&(i=1-i),this.gu.bc(t,i),t)return this.qw();this.statusMessage("Score in dispute. Continue playing..."),this.zu(),this.Pu(),this._v[O]&&this._v[_]||this.lw()},e.prototype.qw=function(){this.statusMessage(this.rw),this.zu()},e.prototype.sw=function(t){var i=this.tw=this.jw[this.gu.yf()],n=Date.now();this.ow=!0;var e=i.wn(),r=Math.max(0,(t||0)-(Date.now()-n));window.setTimeout(function(t){t.uw(e),t.ow=!1},r,this)},e.prototype.vw=function(t){var i=this.tw=this.jw[this.gu.yf()];this.ww=i.nn;var n=i.wn();return this.uw(n,t),n},e.prototype.uw=function(t,i){this.gu.Tb(t),i||(this.Pu(),this.Qu(),this.statusMessage(""),this.zv&&this.nw(t,this.tw,!1)),this.Uu()},e.prototype.Tv=function(t){if(!this.Uu()){var i=this.gu.Tb(t);if(i)return this.statusMessage(i);this.Pu(),this.Qu(),this.statusMessage(""),this._v[this.gu.yf()]&&this.sw(500)}},e.prototype.Xv=function(){S.Vp(null,f("#resignConfirm"),function(t){t.gu.Tb("resi"),t.Qu(),t.Uu()},this)},e.prototype.Uv=function(){var t=this._v[O]===this._v[_]||this.Wu,i=this.gu.Tb(t?"half_undo":"undo");if(i)return this.statusMessage(i);this.Pu(),this.Qu()},e.prototype.lw=function(t){this._v[this.gu.yf()]&&this.vw(t)},e.prototype.Vv=function(t){var i=1===t,n=this.Zv.Go(),e=!i&&!n;this.lw(e),i||this.gu.zf()||window.setTimeout(function(i){i.Vv(t-1)},n?100:0,this)},e.prototype.vv=function(){var t=this.gu.sf();u.bp(t.pa,t.id+".sgf")},e.prototype.yv=function(){var t=this.ov.xw;this.bv.start(f("#getLatestGame"),f("#retrieving",t.rs,t.id));var i=d.ss(t.rs,t.id),n=this;p.bp(i,function(t,i){if(t)return n.bv.stop(t,y.ERROR);var e=[];n.cw();var r=n.gu.Oc(i,e);if(!r)return n.bv.stop(e.join("\n"),y.ERROR);n.rv(r),n.bv.stop(f("#retrieved"))})},e.prototype.yw=function(t){if(this.zw)return t(null,this.zw);var i=new G(P,this.cv,this.jf,this.bv.Fp.bind(this.bv)),n=this;i.connect(function(e){if(e)return t(e);n.zw=i,t(null,i)})},e.prototype.wv=function(){this.bv.start(f("#syncGame"),f("#syncStart"));var t=this;this.yw(function(i,n){if(i)return t.bv.stop();var e=t.jf.qc();t.cw(),n.gs(e,function(i){i||t.rv(e),t.bv.stop()})})},e.prototype.xv=function(){this.Nv(),this.sv(),this.bv.start(f("#syncMyGames"),f("#syncStart"));var t=this;this.yw(function(i,n){if(i)return t.bv.stop();n.hs(function(){t.bv.stop()})})}},{"../../config/colors.json":6,"../GameLogic":12,"../GameVault":13,"../Move":21,"../PendingGame":22,"../ScoreAnalyser":24,"../ai":50,"../constants":51,"../hh":69,"../hh/Dome":54,"../hh/GetFile":55,"../hh/LocalPref":56,"../hh/Painter":59,"../hh/PopupDlg":60,"../hh/getText":68,"../log":76,"../main":77,"../net/DropboxHelper":78,"../net/SyncHelper":79,"../net/goSites":80,"./Board":82,"./ImportDlg":84,"./MoveIndicator":85,"./MyGamesDlg":87,"./NewGameDlg":88,"./ProgressLog":89,"./ReviewUi":90,"./SettingDlg":91,"./UiTopMenu":93,"./ui.less":104}],93:[function(t,i,n){"use strict";function e(t){this.Aw(t)}function r(t,i){return i?t+i:""}t("./uiTopMenu.less");var o=t("../hh/Dome"),s=t("../hh/getText"),h=t("../net/goSites"),u=t("../main"),a=t("../hh/TopMenu");i.g=e,e.prototype.cq=function(){return this.gq.cq()},e.prototype.Aw=function(t){var i=this.gq=new a({Yp:t,nq:u.appName+" V"+u.appVersion});i.jq("settings",s("#settings")),i.hq(),i.jq("myGames",s("#myGames")),i.jq("newGame",s("#newGame")),i.jq("importGame",s("#importGame")),this.Bw=i.jq("syncMyGames",s("#syncMyGames")),i.hq(),this.Cw=i.bo(o.Yn(null,"gameInfo")),this.Dw=i.jq("downloadLatest",""),this.Ew=i.jq("syncGame",s("#syncGame")),this.Fw=i.jq("exportGame",s("#exportGame")),i.hq()},e.prototype.qv=function(t){this.gq.eq(s("#appTitle")),this.Ew.zo(!1),this.Bw.zo(t),this.Cw.fo(""),this.Dw.zo(!1),this.Fw.zo(!1)},e.prototype.kw=function(t,i){this.gq.eq(t.fb("playerWhite")+" VS "+t.fb("playerBlack")+" (B)");var n="komi: "+(t.fb("komi")||0);n+=r(", hand: ",t.fb("handicap")),n+=r(", rules: ",t.fb("rules")),n+=r(", date: ",t.fb("date")),n+=r(", source: ",t.fb("source")),n+=r(", event: ",t.fb("event")),n+=r(", place: ",t.fb("place")),this.Cw.fo(n),this.Ew.zo(i);var e=this.xw=h.qs(t);e&&this.Dw.fo(s("#downloadLatest",e.rs)),this.Dw.zo(!!e),this.Fw.zo(!0)}},{"../hh/Dome":54,"../hh/TopMenu":62,"../hh/getText":68,"../main":77,"../net/goSites":80,"./uiTopMenu.less":105}],94:[function(t,i,n){var e=".gameList {\n  position: relative;\n  border: 1px solid #a9a9a9;\n  border-radius: 6px;\n  max-height: 20rem;\n  min-height: 9rem;\n  overflow-y: auto;\n  overflow-x: hidden;\n  background-color: #fff;\n  font-size: 1.2rem;\n}\n.gameList .oneGame {\n  position: relative;\n  padding: 5px;\n}\n.gameList .oneGame .text {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  position: absolute;\n}\n.gameList .oneGame.selected {\n  background-color: #b7b29e;\n  border-radius: 5px;\n}\n.gameList .emptyMsg {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  position: absolute;\n  width: 100%;\n  text-align: center;\n  font-style: italic;\n  opacity: 0.7;\n}\n";t("lessify")(e),i.g=e},{"lessify":143}],95:[function(t,i,n){"use strict";var e=t("../ai"),r=[{name:"Chuckie",Qn:t("../ai/chuckie")}];e.Pn(r),t("./Ui")._u()},{"../ai":50,"../ai/chuckie":49,"./Ui":92}],96:[function(t,i,n){var e=".importDialog {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  top: 45%;\n}\n.importDialog .mainDiv .loadGameDiv {\n  display: inline-block;\n  margin: 1rem 0;\n}\n.importDialog .mainDiv .fileInputBtn {\n  vertical-align: middle;\n  min-width: 6rem;\n}\n.importDialog .mainDiv .movesInput {\n  width: 30%;\n}\n.importDialog .mainDiv .movesDesc {\n  max-width: 25%;\n}\n.importDialog .btnDiv {\n  display: inline-block;\n  width: 100%;\n}\n.importDialog .btnDiv .loadBtn,\n.importDialog .btnDiv .cancelBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  min-width: 20%;\n}\n";t("lessify")(e),i.g=e},{"lessify":143}],97:[function(t,i,n){var e=".moveIndicator {\n  position: relative;\n  height: 100%;\n  text-align: center;\n  padding: 1px 0 0 1px;\n}\n.moveIndicator.black .icon {\n  background-color: #000;\n}\n.moveIndicator.black .text {\n  color: #fff;\n  text-shadow: 0 0 3px #000;\n}\n.moveIndicator.white .icon {\n  background-color: #fff;\n}\n.moveIndicator.white .text {\n  color: #000;\n  text-shadow: 0 0 3px #fff;\n}\n.moveIndicator .label {\n  position: relative;\n  width: 100%;\n  font-size: 0.8rem;\n  line-height: 0.8rem;\n}\n.moveIndicator .stone {\n  width: calc(100% - 0.8rem);\n  height: calc(100% - 0.8rem);\n}\n.moveIndicator .icon {\n  position: relative;\n  left: 0.4rem;\n  top: -1px;\n  width: 100%;\n  height: 100%;\n  border: 1px solid rgba(0, 0, 0, 0.4);\n  border-radius: 50%;\n}\n.moveIndicator .text {\n  position: absolute;\n  width: 100%;\n  top: calc(0.4rem + 50% - 0.5em);\n  line-height: 1em;\n  font-size: 1em;\n  font-weight: bold;\n}\n";t("lessify")(e),i.g=e},{"lessify":143}],98:[function(t,i,n){var e=".myArchivedGamesDialog {\n  margin: 0 65px;\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.myArchivedGamesDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.myArchivedGamesDialog .delGameBtn,\n.myArchivedGamesDialog .restoreGameBtn {\n  vertical-align: top;\n  margin: 20px 12px 20px 0;\n  width: 15%;\n}\n.myArchivedGamesDialog .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.myArchivedGamesDialog .btnDiv .closeBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  width: 20%;\n  font-size: 1.5rem;\n}\n";t("lessify")(e),i.g=e},{"lessify":143}],99:[function(t,i,n){var e=".myGamesDialog {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.myGamesDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.myGamesDialog .mainDiv .recentGamesDropDwn {\n  max-width: calc(100% - 230px);\n  margin: 0 0 0.5rem 0;\n}\n.myGamesDialog .delGameBtn,\n.myGamesDialog .archiveGameBtn,\n.myGamesDialog .showArchiveBtn {\n  vertical-align: top;\n  margin: 1rem 0.7rem 1rem 0;\n  min-width: 20%;\n}\n.myGamesDialog .btnDiv {\n  width: 100%;\n  display: inline-block;\n}\n.myGamesDialog .btnDiv .loadBtn,\n.myGamesDialog .btnDiv .cancelBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  width: 20%;\n  font-size: 1.5rem;\n}\n";t("lessify")(e),i.g=e},{"lessify":143}],100:[function(t,i,n){
var e='.newGameDialog {\n  margin-top: 2rem;\n}\n.newGameDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.newGameDialog .mainDiv .centeredDiv {\n  margin-top: 20px;\n  text-align: center;\n}\n.newGameDialog .boardDiv .sizeBox {\n  display: inline-block;\n  position: relative;\n  width: 240px;\n  max-width: 33%;\n  text-align: center;\n  margin: 10px 18px 0 20px;\n}\n.newGameDialog .playerBtn {\n  position: relative;\n  vertical-align: top;\n  top: 144px;\n  left: 2px;\n  width: 200px;\n  max-width: 23%;\n  height: 150px;\n  max-height: initial;\n}\n.newGameDialog .playerBtn .playerBtnIcon {\n  background-image: url("assets/humanBlue.png");\n  -webkit-filter: brightness(0);\n  filter: brightness(0);\n  background-size: contain;\n}\n.newGameDialog .playerBtn.robot .playerBtnIcon {\n  background-image: url("assets/robotBlue.png");\n}\n.newGameDialog .playerBtn.white .playerBtnIcon {\n  -webkit-filter: invert(1) grayscale(1);\n  filter: invert(1) grayscale(1);\n}\n.newGameDialog .sizeBtn {\n  position: relative;\n  width: 170px;\n  max-width: 88%;\n  height: 100px;\n  max-height: initial;\n  margin: 0 0 10px;\n}\n.newGameDialog .sizeBtn .sizeBtnIcon {\n  background-image: url("assets/upBlue.png");\n  background-size: 80%;\n  -webkit-filter: brightness(0);\n  filter: brightness(0);\n}\n.newGameDialog .sizeBtn.down {\n  margin-top: 4px;\n}\n.newGameDialog .sizeBtn.down .sizeBtnIcon {\n  background-image: url("assets/downBlue.png");\n}\n.newGameDialog .boardImgFrame {\n  display: inline-block;\n  position: relative;\n  width: 91%;\n  height: 195px;\n  background-color: #d1cac1;\n  border-radius: 5px;\n  box-shadow: black 3px 3px 6px;\n}\n.newGameDialog .boardImgFrame .boardImg {\n  width: 100%;\n  height: 100%;\n  background: url("assets/19x19.png") 50% no-repeat;\n}\n.newGameDialog .boardImgFrame .curSize {\n  position: absolute;\n  top: -4px;\n  width: 100%;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  cursor: default;\n  text-align: center;\n  color: white;\n  font-size: 2.5rem;\n  text-shadow: 3px 3px 5px #000;\n}\n.newGameDialog .advancedBtn {\n  width: 25%;\n  margin: 20px 10px 7px;\n  background-color: #faf7f5;\n  border: 1px solid #a7a7a7;\n}\n.newGameDialog .advancedDiv .rules {\n  display: inline-block;\n  margin-left: 87px;\n}\n.newGameDialog .advancedDiv .defAiInfo {\n  font-size: 0.8rem;\n  font-style: italic;\n  width: 400px;\n  display: inline-block;\n}\n.newGameDialog .startBtn {\n  margin: 16px 0 10px -5px;\n  position: relative;\n  left: 75%;\n  width: 25%;\n  font-size: 1.5rem;\n}\n';t("lessify")(e),i.g=e},{"lessify":143}],101:[function(t,i,n){var e=".notifPopup.progressLog {\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  margin: 0 auto;\n  width: 95%;\n  max-width: 800px;\n  border: 1px solid rgba(255, 255, 255, 0.33);\n}\n.notifPopup.progressLog .content {\n  font-size: 1.2rem;\n}\n";t("lessify")(e),i.g=e},{"lessify":143}],102:[function(t,i,n){var e='.gameUi .btnIcon {\n  -webkit-filter: sepia(1) brightness(7);\n  filter: sepia(1) brightness(7);\n}\n.gameUi .statusBar .btn {\n  margin: 1px;\n  height: calc(100% - 2px);\n}\n.gameUi .statusBar .delMoveBtn {\n  float: left;\n}\n.gameUi .statusBar .delMoveBtn .btnIcon {\n  background-image: url("assets/trash.png");\n}\n.gameUi .statusBar .delMoveBtn .btnText {\n  top: 59%;\n  color: #000;\n  text-shadow: 0 0 3px #fff;\n}\n.gameUi .statusBar .variationBtn {\n  margin-right: 0.2rem;\n}\n.gameUi .statusBar .variationBtn .btnInfo {\n  position: absolute;\n  right: 5px;\n  bottom: 1px;\n  color: #aaa;\n}\n.gameUi .statusBar .moveComment {\n  margin-top: 2px;\n  background-color: white;\n  color: black;\n  border-radius: 5px;\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  text-align: left;\n  font-size: 22px;\n  font-weight: normal;\n  padding: 2px 4px;\n}\n.gameUi .mainControls .btn.back10,\n.gameUi .mainControls .btn.back1,\n.gameUi .mainControls .btn.forw1,\n.gameUi .mainControls .btn.forw10 {\n  max-width: 22%;\n}\n.gameUi .mainControls .btn.cycleBtn {\n  margin-left: 10px;\n  max-width: calc(50% - 5px);\n}\n.gameUi .mainControls .btn.cycleBtn .btnIcon {\n  background-image: url("assets/cycle.png");\n}\n.gameUi .mainControls .btn.cycleBtn .btnText {\n  left: 5px;\n  color: #fff;\n}\nbody .contextMenu {\n  border: 1px solid #58636d;\n  background-color: #3b3d47;\n}\nbody .contextMenu .menuItem {\n  padding-right: 20px;\n  background-color: #000;\n  border: 1px solid #505050;\n}\nbody .contextMenu .menuItem .icon {\n  -webkit-filter: grayscale(1) brightness(7);\n  filter: grayscale(1) brightness(7);\n}\nbody .contextMenu .menuItem.scoring .icon {\n  -webkit-filter: brightness(0.8);\n  filter: brightness(0.8);\n  background-image: url("assets/scoring.png");\n}\nbody .contextMenu .menuItem.rewind .icon {\n  background-image: url("assets/empty.png");\n}\nbody .contextMenu .menuItem.lastReal .icon {\n  background-image: url("assets/lastReal.png");\n}\nbody .contextMenu .menuItem.bookmark .icon {\n  background-image: url("assets/cycle.png");\n}\nbody .contextMenu .menuItem.prune .icon {\n  background-image: url("assets/pruning.png");\n}\n';t("lessify")(e),i.g=e},{"lessify":143}],103:[function(t,i,n){var e=".settingDlg {\n  z-index: 2000;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  width: 60%;\n}\n.settingDlg .content {\n  padding: 1rem;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.settingDlg .content .cloudDiv {\n  margin-top: 1rem;\n}\n.settingDlg .content .dropboxBtn {\n  display: inline-block;\n  margin: -1rem 0 0 0.5rem;\n  padding: 1rem;\n}\n.settingDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n}\n.settingDlg .btnDiv .okBtn {\n  float: right;\n  min-width: 20%;\n}\n";t("lessify")(e),i.g=e},{"lessify":143}],104:[function(t,i,n){var e=".gameUi {\n  padding: 2px;\n}\n.gameUi .board {\n  margin: 5px 0;\n  background-color: #402f23;\n  border-radius: 7px;\n}\n.gameUi .board .wgo-board {\n  margin: 0 auto;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  /* disables grey shade on long-tap for Safari */\n  /* Below avoid issues when tap-hold on Android */\n  -webkit-user-select: none;\n  -webkit-touch-callout: none;\n}\n.gameUi .boardDesc {\n  margin-top: 3px;\n  font-weight: bold;\n  font-style: italic;\n}\n.gameUi .underBoard {\n  padding-bottom: 5px;\n}\n.gameUi .statusBar {\n  position: relative;\n  box-sizing: content-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: row;\n  flex-direction: row;\n  background-color: #dfc2ac;\n  border: rgba(0, 0, 0, 0.7) 1px solid;\n  border-radius: 7px;\n}\n.gameUi .statusBar .msgBar {\n  -webkit-flex: 1;\n  flex: 1;\n  height: 100%;\n  white-space: pre-wrap;\n  overflow-y: auto;\n  font-size: 1rem;\n  font-weight: bold;\n  text-align: center;\n}\n.gameUi .mainControls {\n  margin-top: 10px;\n}\n.gameUi .mainControls .mainDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 50%;\n  text-align: center;\n}\n.gameUi .mainControls .mainDiv .btn {\n  margin: 0 3px;\n  max-width: 45%;\n}\n.gameUi .mainControls .leftDiv,\n.gameUi .mainControls .rightDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 25%;\n}\n.gameUi .mainControls .leftDiv .btn,\n.gameUi .mainControls .rightDiv .btn {\n  background-color: #5c4137;\n  color: #faebd7;\n  max-width: 48%;\n}\n.gameUi .mainControls .leftDiv {\n  padding-left: 10px;\n  text-align: left;\n}\n.gameUi .mainControls .leftDiv .animatedDiv {\n  margin: 16px;\n}\n.gameUi .mainControls .rightDiv {\n  text-align: right;\n}\n";t("lessify")(e),i.g=e},{"lessify":143}],105:[function(t,i,n){var e=".topMenu .menuOption .icon {\n  -webkit-filter: invert(0.6) grayscale(1);\n  filter: invert(0.6) grayscale(1);\n}\n.topMenu .menuOption.settings .icon {\n  background-image: url(assets/settings.png);\n}\n.topMenu .menuOption.myGames .icon {\n  background-image: url(assets/myGames.png);\n  background-size: auto 45%;\n}\n.topMenu .menuOption.newGame .icon {\n  background-image: url(assets/robotBlue.png);\n  background-position-y: 0;\n}\n.topMenu .menuOption.importGame .icon {\n  background-image: url(assets/import.png);\n}\n.topMenu .menuOption.syncMyGames .icon {\n  background-image: url(assets/cloudSync.png);\n}\n.topMenu .menuOption.downloadLatest .icon {\n  background-image: url(assets/refresh.png);\n}\n.topMenu .gameInfo {\n  padding: 1rem;\n  font-size: 1.3rem;\n  background-color: #282a2b;\n}\n";t("lessify")(e),i.g=e},{"lessify":143}],106:[function(t,i,n){!function(t,i){"use strict";var n=document.getElementsByTagName("script"),e=n[n.length-1].src.split("?")[0],r=e.split("/").slice(0,-1).join("/")+"/",o={version:"2.3.1",B:1,W:-1,Gw:!0,Hw:r,lang:"en",Iw:{Jw:{}}};o.opera=navigator.userAgent.search(/(opera)(?:.*version)?[ \/]([\w.]+)/i)!=-1,o.Kw=navigator.userAgent.search(/(webkit)[ \/]([\w.]+)/i)!=-1,o.Lw=navigator.userAgent.search(/(msie) ([\w.]+)/i)!=-1,o.Mw=navigator.userAgent.search(/(mozilla)(?:.*? rv:([\w.]+))?/i)!=-1&&!o.Kw&&!o.Lw,o.Nw=function(t){var i=o.Iw[o.lang][t]||o.Iw.Jw[t];if(i){for(var n=1;n<arguments.length;n++)i=i.replace("$",arguments[n]);return i}return t},o.Ow=function(t,i){return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.super=t,i},o.Pw=function(){throw Error("unimplemented abstract method")},o.clone=function(t){if(t&&"object"==typeof t){var i=t.constructor==Array?[]:{};for(var n in t)t[n]==t?i[n]=t:i[n]=o.clone(t[n]);return i}return t},o.Qw=function(t){return t&&"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t};var s=function(i,n){var n=n||{};for(var e in n)this[e]=n[e];for(var e in o.Fs.default)void 0===this[e]&&(this[e]=o.Fs.default[e]);for(var e in s.Jp.default)void 0===this.Kp[e]&&(this.Kp[e]=s.Jp.default[e]);this.Rw=this.section.left,this.Sw=this.section.top,this.Tw=this.size-1-this.section.right,this.Uw=this.size-1-this.section.bottom,this.init(),i.appendChild(this.Js),this.Vw=t.devicePixelRatio||1,this.width&&this.height?this.Ww(this.width,this.height):this.width?this.eo(this.width):this.height&&this.co(this.height)};s.Jp={},s.Jp.Xw={shadowColor:"rgba(32,32,32,0.5)",shadowTransparentColor:"rgba(32,32,32,0)",shadowBlur:0,shadowSize:function(t){return t.shadowSize},markupBlackColor:"rgba(255,255,255,0.8)",markupWhiteColor:"rgba(0,0,0,0.8)",markupNoneColor:"rgba(0,0,0,0.8)",markupLinesWidth:function(t){return t.Yw?t.Zw/7:t.lineWidth},gridLinesWidth:1,gridLinesColor:function(t){return"rgba(0,0,0,"+Math.min(1,t.Zw/15)+")"},starColor:"#000",starSize:function(t){return t.starSize*(t.width/300+1)},stoneSize:function(t){return t.stoneSize*Math.min(t.Xs,t.Ys)/2},coordinatesColor:"rgba(0,0,0,0.7)",font:function(t){return t.font},linesShift:.5},s.Jp.default={shadowColor:"rgba(62,32,32,0.5)",shadowTransparentColor:"rgba(62,32,32,0)",shadowBlur:function(t){return.1*t.Zw},shadowSize:1,markupBlackColor:"rgba(255,255,255,0.9)",markupWhiteColor:"rgba(0,0,0,0.7)",markupNoneColor:"rgba(0,0,0,0.7)",markupLinesWidth:function(t){return t.Zw/8},gridLinesWidth:function(t){return t.Zw/15},gridLinesColor:"#654525",starColor:"#531",starSize:function(t){return t.Zw/8+1},stoneSize:function(t){return Math.min(t.Xs,t.Ys)/2},coordinatesColor:"#531",$w:"rgba(0,32,128,0.8)",font:"calibri",linesShift:.25};var h,u=function(t,i){return"function"==typeof i.Kp[t]?i.Kp[t](i):i.Kp[t]},a={_w:function(t,i){var n=i.ax(t.x),e=i.bx(t.y),r=i.Zw;this.beginPath();var o=u("shadowBlur",i),s=Math.max(0,r-.5),h=this.createRadialGradient(n-i.ex,e-i.ex,s-1-o,n-i.ex,e-i.ex,s+o);h.addColorStop(0,u("shadowColor",i)),h.addColorStop(1,u("shadowTransparentColor",i)),this.fillStyle=h,this.arc(n-i.ex,e-i.ex,s+o,0,2*Math.PI,!0),this.fill()},clear:function(t,i){var n=i.ax(t.x),e=i.bx(t.y),r=i.Zw;this.clearRect(n-1.1*r-i.ex,e-1.1*r-i.ex,2.2*r,2.2*r)}},c=function(t,i,n){return t.Ss[i][n][0].c==o.B?u("markupBlackColor",t):t.Ss[i][n][0].c==o.W?u("markupWhiteColor",t):u("markupNoneColor",t)},l=function(t,i,n){return t.Ss[i][n][0]&&t.Ss[i][n][0].c==o.W||t.Ss[i][n][0].c==o.B},p=function(t,i){var n;t[i].clear(),t[i]._w(t);for(var e=0;e<t.size;e++)for(var r=0;r<t.size;r++)for(var o=0;o<t.Ss[e][r].length;o++){var h=t.Ss[e][r][o];n=h.type?"string"==typeof h.type?s.hx[h.type]:h.type:t.gx,n[i]&&n[i]._w.call(t[i].getContext(h),h,t)}for(var u=0;u<t.ix.length;u++){var h=t.ix[u],n=h.Yp;n[i]&&n[i]._w.call(t[i].getContext(h.jx),h.jx,t)}},f=function(t,i,n,e,r,o,s,h){t.strokeStyle="rgba(64,64,64,0.2)",t.lineWidth=e/30*h,t.beginPath(),e-=Math.max(1,t.lineWidth);var u,a,i,c,l,p=i+e*Math.cos(r*Math.PI),f=n+e*Math.sin(r*Math.PI),d=i+e*Math.cos(o*Math.PI),g=n+e*Math.sin(o*Math.PI);d>p?(u=(g-f)/(d-p),a=Math.atan(u)):d==p?a=Math.PI/2:(u=(g-f)/(d-p),a=Math.atan(u)-Math.PI);var v=s*e;c=Math.sin(a)*v,l=Math.cos(a)*v;var y=p+c,b=f-l,m=d+c,w=g-l;t.moveTo(p,f),t.bezierCurveTo(y,b,m,w,d,g),t.stroke()},d=function(t){for(var i=t.angle,n=t.angle,e=0;e<t.kx.length;e++)i+=t.kx[e],n-=t.kx[e],f(t.lx,t.x,t.y,t.mx,i,n,t.nx,t.ox)};s.hx={px:{Ci:{_w:function(t,i){var n,e=i.ax(t.x),r=i.bx(t.y),s=i.Zw;t.c==o.W?(n=this.createRadialGradient(e-2*s/5,r-2*s/5,s/3,e-s/5,r-s/5,5*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#aaa")):(n=this.createRadialGradient(e-2*s/5,r-2*s/5,1,e-s/5,r-s/5,4*s/5),n.addColorStop(0,"#666"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(e-i.ex,r-i.ex,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill()}},qx:a},sx:{Ci:{_w:function(t,i){var n,e=i.ax(t.x),r=i.bx(t.y),s=i.Zw;t.c==o.W?(n=this.createRadialGradient(e-2*s/5,r-2*s/5,2,e-s/5,r-s/5,4*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#ddd")):(n=this.createRadialGradient(e-2*s/5,r-2*s/5,1,e-s/5,r-s/5,4*s/5),n.addColorStop(0,"#111"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(e-i.ex,r-i.ex,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill(),this.beginPath(),this.lineWidth=s/6,t.c==o.W?(this.strokeStyle="#999",this.arc(e+s/8,r+s/8,s/2,0,Math.PI/2,!1)):(this.strokeStyle="#ccc",this.arc(e-s/8,r-s/8,s/2,Math.PI,1.5*Math.PI)),this.stroke()}},qx:a},tx:{Ci:{_w:function(t,i){var n,e=i.ax(t.x),r=i.bx(t.y),s=i.Zw;t.c==o.W?(n=this.createRadialGradient(e-2*s/5,r-2*s/5,s/3,e-s/5,r-s/5,8*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#666")):(n=this.createRadialGradient(e-2*s/5,r-2*s/5,1,e-s/5,r-s/5,3*s/5),n.addColorStop(0,"#555"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(e-i.ex,r-i.ex,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill()}},qx:a},ux:{Ci:{_w:function(t,i){var n,e,r=i.Zw;h=h||Math.ceil(9999999*Math.random()),n=i.ax(t.x),e=i.bx(t.y);var s;if(s=t.c==o.W?"#aaa":"#000",this.beginPath(),this.fillStyle=s,this.arc(n-i.ex,e-i.ex,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill(),t.c==o.W){var u=h%(3+t.x*i.size+t.y)%3,a=i.size*i.size+t.x*i.size+t.y,c=2/a*(h%a);d(0==u?{lx:this,x:n,y:e,mx:r,angle:c,kx:[.1,.12,.11,.1,.09,.09,.09,.09],nx:.25,ox:1.75}:1==u?{lx:this,x:n,y:e,mx:r,angle:c,kx:[.1,.09,.08,.07,.06,.06,.06,.06,.06,.06,.06],nx:.2,ox:1.5}:{lx:this,x:n,y:e,mx:r,angle:c,kx:[.12,.14,.13,.12,.12,.12],nx:.3,ox:2}),s=this.createRadialGradient(n-2*r/5,e-2*r/5,r/3,n-r/5,e-r/5,5*r/5),s.addColorStop(0,"rgba(255,255,255,0.9)"),s.addColorStop(1,"rgba(255,255,255,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.ex,e-i.ex,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill()}else s=this.createRadialGradient(n+.4*r,e+.4*r,0,n+.5*r,e+.5*r,r),s.addColorStop(0,"rgba(32,32,32,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.ex,e-i.ex,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill(),s=this.createRadialGradient(n-.4*r,e-.4*r,0,n-.5*r,e-.5*r,1.5*r),s.addColorStop(0,"rgba(64,64,64,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.ex,e-i.ex,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill()}},qx:a},vx:{Ci:{_w:function(t,i){var n=i.ax(t.x),e=i.bx(t.y),r=i.Zw,s=u("markupLinesWidth",i)||1;t.c==o.W?this.fillStyle="white":this.fillStyle="black",this.beginPath(),this.arc(n,e,Math.max(0,r-s),0,2*Math.PI,!0),this.fill(),this.lineWidth=s,this.strokeStyle="black",this.stroke()}}},CR:{Ci:{_w:function(t,i){var n=i.ax(t.x),e=i.bx(t.y),r=i.Zw;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||u("markupLinesWidth",i)||1,this.beginPath(),this.arc(n-i.ex,e-i.ex,r/2,0,2*Math.PI,!0),this.stroke()}}},LB:{Ci:{_w:function(t,i){var n=i.ax(t.x),e=i.bx(t.y),r=i.Zw,o=t.scale||1,s=t.font||u("font",i)||"";this.fillStyle=t.c||c(i,t.x,t.y);var h=1;1==t.text.length?h=1.5:2==t.text.length&&(h=1.2),this.font=Math.round(h*r*o)+"px "+s,this.beginPath(),this.textBaseline="middle",this.textAlign="center",this.fillText(t.text,n,e,2*r)}},grid:{_w:function(t,i){if(!l(i,t.x,t.y)&&!t.wx){var n=i.ax(t.x),e=i.bx(t.y),r=i.Zw;this.clearRect(n-r,e-r,2*r,2*r)}},clear:function(t,i){l(i,t.x,t.y)||(t.wx=!0,p(i,"grid"),delete t.wx)}}},xx:{Ci:{_w:function(t,i){var n=i.ax(t.x),e=i.bx(t.y),r=Math.round(i.Zw);this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||u("markupLinesWidth",i)||1,this.beginPath(),this.rect(Math.round(n-r/2)-i.ex,Math.round(e-r/2)-i.ex,r,r),this.stroke()}}},Qh:{Ci:{_w:function(t,i){var n=i.ax(t.x),e=i.bx(t.y),r=i.Zw;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||u("markupLinesWidth",i)||1,this.beginPath(),this.moveTo(n-i.ex,e-i.ex-Math.round(r/2)),this.lineTo(Math.round(n-r/2)-i.ex,Math.round(e+r/3)+i.ex),this.lineTo(Math.round(n+r/2)+i.ex,Math.round(e+r/3)+i.ex),this.closePath(),this.stroke()}}},yx:{Ci:{_w:function(t,i){var n=i.ax(t.x),e=i.bx(t.y),r=i.Zw;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineCap="round",this.lineWidth=2*(t.lineWidth||u("markupLinesWidth",i)||1)-1,this.beginPath(),this.moveTo(Math.round(n-r/2),Math.round(e-r/2)),this.lineTo(Math.round(n+r/2),Math.round(e+r/2)),this.moveTo(Math.round(n+r/2)-1,Math.round(e-r/2)),this.lineTo(Math.round(n-r/2)-1,Math.round(e+r/2)),this.stroke(),this.lineCap="butt"}}},SL:{Ci:{_w:function(t,i){var n=i.ax(t.x),e=i.bx(t.y),r=i.Zw;this.fillStyle=t.c||c(i,t.x,t.y),this.beginPath(),this.rect(n-r/2,e-r/2,r,r),this.fill()}}},zx:{Ci:{_w:function(t,i){var n=i.ax(t.x),e=i.bx(t.y),r=i.Zw;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=2*(t.lineWidth||u("markupLinesWidth",i)||1),this.beginPath(),this.arc(n-r/3,e-r/3,r/6,0,2*Math.PI,!0),this.stroke(),this.beginPath(),this.arc(n+r/3,e-r/3,r/6,0,2*Math.PI,!0),this.stroke(),this.beginPath(),this.moveTo(n-r/1.5,e),this.bezierCurveTo(n-r/1.5,e+r/2,n+r/1.5,e+r/2,n+r/1.5,e),this.stroke()}}},outline:{Ci:{_w:function(t,i){t.alpha?this.globalAlpha=t.alpha:this.globalAlpha=.3,t.Ax?s.hx[t.Ax].Ci._w.call(this,t,i):i.gx.Ci._w.call(this,t,i),this.globalAlpha=1}}},mini:{Ci:{_w:function(t,i){i.Zw=i.Zw/2,t.Ax?s.hx[t.Ax].Ci._w.call(this,t,i):i.gx.Ci._w.call(this,t,i),i.Zw=2*i.Zw}}}},s.Hs={grid:{_w:function(t,i){var n,e,r,o,s,h;this.fillStyle=u("coordinatesColor",i),this.textBaseline="middle",this.textAlign="center",this.font=i.Zw*i.coordFontSize+"px "+(i.font||""),r=i.ax(-.75),o=i.ax(i.size-.25),s=i.bx(-.75),h=i.bx(i.size-.25);for(var a=0;a<i.size;a++)n=a+"A".charCodeAt(0),n>="I".charCodeAt(0)&&n++,e=i.bx(a),this.fillText(i.size-a,r,e),this.fillText(i.size-a,o,e),e=i.ax(a),this.fillText(String.fromCharCode(n),e,s),this.fillText(String.fromCharCode(n),e,h);this.fillStyle="black"}}},s.Bx=function(){this.Js=document.createElement("canvas"),this.context=this.Js.getContext("2d"),this.Vw=t.devicePixelRatio||1,this.Vw>1&&this.context.scale(this.Vw,this.Vw)},s.Bx.prototype={constructor:s.Bx,Ww:function(t,i){this.Js.width=t,this.Js.style.width=t/this.Vw+"px",this.Js.height=i,this.Js.style.height=i/this.Vw+"px"},uo:function(t,i){this.Js.style.position="absolute",this.Js.style.zIndex=i,t.appendChild(this.Js)},Cx:function(t){t.removeChild(this.Js)},getContext:function(){return this.context},_w:function(t){},clear:function(){this.context.clearRect(0,0,this.Js.width,this.Js.height)}},s.Dx=o.Ow(s.Bx,function(){this.super.call(this)}),s.Dx.prototype._w=function(t){var i;this.context.beginPath(),this.context.lineWidth=u("gridLinesWidth",t),this.context.strokeStyle=u("gridLinesColor",t);var n=Math.round(t.left),e=Math.round(t.top),r=Math.round(t.Xs*(t.size-1)),o=Math.round(t.Ys*(t.size-1));this.context.strokeRect(n-t.ex,e-t.ex,r,o);for(var s=1;s<t.size-1;s++)i=Math.round(t.ax(s))-t.ex,this.context.moveTo(i,e),this.context.lineTo(i,e+o),i=Math.round(t.bx(s))-t.ex,this.context.moveTo(n,i),this.context.lineTo(n+r,i);if(this.context.stroke(),this.context.fillStyle=u("starColor",t),t.Ex[t.size])for(var h in t.Ex[t.size])this.context.beginPath(),this.context.arc(t.ax(t.Ex[t.size][h].x)-t.ex,t.bx(t.Ex[t.size][h].y)-t.ex,u("starSize",t),0,2*Math.PI,!0),this.context.fill()},s.Fx=o.Ow(s.Bx,function(){this.init(4)}),s.Fx.prototype.init=function(i){var n,e;this.Gx=i,this.elements=[],this.Hx=[],this.Vw=t.devicePixelRatio||1;for(var r=0;r<i;r++)n=document.createElement("canvas"),e=n.getContext("2d"),this.Vw>1&&e.scale(this.Vw,this.Vw),this.elements.push(n),this.Hx.push(e)},s.Fx.prototype.uo=function(t,i){for(var n=0;n<this.Gx;n++)this.elements[n].style.position="absolute",this.elements[n].style.zIndex=i,t.appendChild(this.elements[n])},s.Fx.prototype.Cx=function(t){for(var i=0;i<this.Gx;i++)t.removeChild(this.elements[i])},s.Fx.prototype.getContext=function(t){return t.x%2?t.y%2?this.Hx[0]:this.Hx[1]:t.y%2?this.Hx[2]:this.Hx[3]},s.Fx.prototype.clear=function(t,i){for(var n=0;n<this.Gx;n++)this.Hx[n].clearRect(0,0,this.elements[n].width,this.elements[n].height)},s.Fx.prototype.Ww=function(t,i){for(var n=0;n<this.Gx;n++)this.elements[n].width=t,this.elements[n].style.width=t/this.Vw+"px",this.elements[n].height=i,this.elements[n].style.height=i/this.Vw+"px"},s.Ix=o.Ow(s.Fx,function(t,i,n){this.init(2),this.shadowSize=void 0===i?1:i,this.ys=t}),s.Ix.prototype.getContext=function(t){return!(t.x%2&&t.y%2)&&(t.x%2||t.y%2)?this.Hx[1]:this.Hx[0]},s.Ix.prototype.Ww=function(t,i){this.super.prototype.Ww.call(this,t,i);for(var n=0;n<this.Gx;n++)this.Hx[n].setTransform(1,0,0,1,Math.round(this.shadowSize*this.ys.Zw/7),Math.round(this.shadowSize*this.ys.Zw/7))};var g=function(t,i){var n=i.ax(t.x),e=i.bx(t.y),r=i.Zw;this.clearRect(n-2*r-i.ex,e-2*r-i.ex,4*r,4*r)},v=function(){return 3*this.width/(4*(this.Tw+1-this.Rw)+2)-this.Xs*this.Rw},y=function(){return 3*this.height/(4*(this.Uw+1-this.Sw)+2)-this.Ys*this.Sw},b=function(){return 4*this.width/(4*(this.Tw+1-this.Rw)+2)},m=function(){return 4*this.height/(4*(this.Uw+1-this.Sw)+2)},w=function(t,i){for(var n,e=0;e<this.Ss[t][i].length;e++){var r=this.Ss[t][i][e];n=r.type?"string"==typeof r.type?s.hx[r.type]:r.type:this.gx;for(var o in n)n[o].clear?n[o].clear.call(this[o].getContext(r),r,this):g.call(this[o].getContext(r),r,this)}},x=function(t,i){for(var n,e=0;e<this.Ss[t][i].length;e++){var r=this.Ss[t][i][e];n=r.type?"string"==typeof r.type?s.hx[r.type]:r.type:this.gx;for(var o in n)n[o]._w.call(this[o].getContext(r),r,this)}},k=function(t){var i,n;i=t.layerX*this.Vw,i-=this.left,i/=this.Xs,i=Math.round(i),n=t.layerY*this.Vw,n-=this.top,n/=this.Ys,n=Math.round(n);var e=t.offsetY*this.Vw;return e-=this.top,e/=this.Ys,e=Math.round(e),e!==n&&console.error("Using layerY we get",n," BUT using offsetY it would be",e),{x:i>=this.size?-1:i,y:n>=this.size?-1:n}},j=function(){this.Js.style.width=this.width/this.Vw+"px",this.Js.style.height=this.height/this.Vw+"px",this.Zw=u("stoneSize",this),this.ex=u("linesShift",this);for(var t=0;t<this.Gx.length;t++)this.Gx[t].Ww(this.width,this.height)};s.prototype={constructor:s,init:function(){this.Ss=[];for(var t=0;t<this.size;t++){this.Ss[t]=[];for(var i=0;i<this.size;i++)this.Ss[t][i]=[]}this.ix=[],this.Gx=[],this.Jx=[],this.Js=document.createElement("div"),this.Js.className="wgo-board",this.Js.style.position="relative",this.background&&("#"==this.background[0]?this.Js.style.backgroundColor=this.background:(this.Js.style.backgroundImage="url('"+this.background+"')",this.Js.style.backgroundColor="#c75")),this.grid=new s.Dx,this.qx=new s.Ix(this,u("shadowSize",this)),this.Ci=new s.Fx,this.Kx(this.grid,100),this.Kx(this.qx,200),this.Kx(this.Ci,300)},eo:function(t){this.width=t,this.width*=this.Vw,this.Ys=this.Xs=b.call(this),this.left=v.call(this),this.height=(this.Uw-this.Sw+1.5)*this.Ys,this.top=y.call(this),j.call(this),this.Lx()},co:function(t){this.height=t,this.height*=this.Vw,this.Xs=this.Ys=m.call(this),this.top=y.call(this),this.width=(this.Tw-this.Rw+1.5)*this.Xs,this.left=v.call(this),j.call(this),this.Lx()},Ww:function(t,i){this.width=t||parseInt(this.Js.style.width,10),this.width*=this.Vw,this.height=i||parseInt(this.Js.style.height,10),this.height*=this.Vw,this.Xs=b.call(this),this.Ys=m.call(this),this.left=v.call(this),this.top=y.call(this),j.call(this),this.Lx()},Mx:function(){return this.section},Nx:function(t,i,n,e){this.section="object"==typeof t?t:{top:t,right:i,bottom:n,left:e},this.Rw=this.section.left,this.Sw=this.section.top,this.Tw=this.size-1-this.section.right,this.Uw=this.size-1-this.section.bottom,this.Ww()},Ox:function(t){var t=t||19;if(t!=this.size){this.size=t,this.Ss=[];for(var i=0;i<this.size;i++){this.Ss[i]=[];for(var n=0;n<this.size;n++)this.Ss[i][n]=[]}this.Tw=this.size-1-this.section.right,this.Uw=this.size-1-this.section.bottom,this.Ww()}},Lx:function(){for(var t=0;t<this.Gx.length;t++)this.Gx[t].clear(this),this.Gx[t]._w(this);for(var t=0;t<this.size;t++)for(var i=0;i<this.size;i++)x.call(this,t,i);for(var t=0;t<this.ix.length;t++){var n=this.ix[t],e=n.Yp;for(var r in e)e[r]._w.call(this[r].getContext(n.jx),n.jx,this)}},ax:function(t){return this.left+t*this.Xs},bx:function(t){return this.top+t*this.Ys},Kx:function(t,i){t.uo(this.Js,i),t.Ww(this.width,this.height),this.Gx.push(t)},Px:function(t){var i=this.Gx.indexOf(t);i>=0&&(this.Gx.splice(i,1),t.Cx(this.Js))},update:function(t){var i;if(t.remove&&"all"==t.remove)this.Qx();else if(t.remove)for(i=0;i<t.remove.length;i++)this.Rs(t.remove[i]);if(t.add)for(i=0;i<t.add.length;i++)this.Ts(t.add[i])},Ts:function(t){if(t.constructor!=Array){w.call(this,t.x,t.y);for(var i=this.Ss[t.x][t.y],n=0;n<i.length;n++)if(i[n].type==t.type)return i[n]=t,void x.call(this,t.x,t.y);t.type?i.push(t):i.unshift(t),x.call(this,t.x,t.y)}else for(var e=0;e<t.length;e++)this.Ts(t[e])},Rs:function(t){if(t.constructor!=Array){for(var i,n=0;n<this.Ss[t.x][t.y].length;n++)if(this.Ss[t.x][t.y][n].type==t.type){i=n;break}void 0!==i&&(w.call(this,t.x,t.y),this.Ss[t.x][t.y].splice(i,1),x.call(this,t.x,t.y))}else for(var e=0;e<t.length;e++)this.Rs(t[e])},Zs:function(t,i){this.Ss[t][i].length&&(w.call(this,t,i),this.Ss[t][i]=[])},Qx:function(){this.Ss=[];for(var t=0;t<this.size;t++){this.Ss[t]=[];for(var i=0;i<this.size;i++)this.Ss[t][i]=[]}this.Lx()},Gs:function(t,i){this.ix.push({Yp:t,jx:i}),this.Lx()},Rx:function(t,i){for(var n=0;n<this.ix.length;n++){var e=this.ix[n];if(e.Yp==t&&e.jx==i)return this.ix.splice(n,1),this.Lx(),!0}return!1},addEventListener:function(t,i){var n=this,e={type:t,Sx:i,Tx:function(t){var e=k.call(n,t);i(e.x,e.y,t)}};this.Js.addEventListener(t,e,!0),this.Jx.push(e)},removeEventListener:function(t,i){for(var n=0;n<this.Jx.length;n++){var e=this.Jx[n];if(e.type==t&&e.Sx==i)return this.Js.removeEventListener(e.type,e,!0),this.Jx.splice(n,1),!0}return!1},Ux:function(){return{Vx:o.clone(this.Ss),Wx:o.clone(this.ix)}},Xx:function(t){this.Ss=t.Vx||this.Ss,this.ix=t.Wx||this.ix,this.Lx()}},s.default={size:19,width:0,height:0,font:"Calibri",lineWidth:1,Yw:!1,Ex:{19:[{x:3,y:3},{x:9,y:3},{x:15,y:3},{x:3,y:9},{x:9,y:9},{x:15,y:9},{x:3,y:15},{x:9,y:15},{x:15,y:15}],13:[{x:3,y:3},{x:9,y:3},{x:3,y:9},{x:9,y:9}],9:[{x:4,y:4}]},gx:s.hx.ux,starSize:1,shadowSize:1,stoneSize:1,section:{top:0,right:0,bottom:0,left:0},background:o.Hw+"wood1.jpg",Kp:{}},o.Fs=s,t.WGo=o}(window)},{}],107:[function(t,i,n){var e,r,o,s=t("superagent"),h=t("es6-promise").Promise,u=t("./get-base-url"),a=t("./http-header-safe-json");s.parse["application/octect-stream"]=function(t){return t},e=function(t,i){return{status:t.status,error:(i?i.text:null)||t.toString(),response:i}},o=function(t,i){t.text="",t.Yx("binary"),t.v("data",function(i){t.text+=i}),t.v("end",function(){i()})},r=function(t,i,n,r,c,l){if("user"!==n)throw new Error("Unexpected auth type: "+n);return new h(function(n,h){function p(t){n&&n(t)}function f(t){h&&h(t)}function d(t,i){var n;t?f(e(t,i)):(n=JSON.parse(i.headers["dropbox-api-result"]),i.Zx?n.fileBlob=i.Zx.response:n.$x=i._x.text,p(n))}var g;g=s.ay(u(r)+t).set("Authorization","Bearer "+c).set("Dropbox-API-Arg",a(i)).v("request",function(){this.Zx&&(this.Zx.responseType="blob")}),l&&(g=g.set("Dropbox-API-Select-User",l)),"undefined"==typeof window?g.buffer(!0).parse(o).end(d):g.end(d)})},i.g=r},{"./get-base-url":110,"./http-header-safe-json":111,"es6-promise":141,"superagent":145}],108:[function(t,i,n){var e,r=t("./request-constants");t("./object-assign-polyfill"),e=function(t){t=t||{},this.accessToken=t.accessToken,this.clientId=t.clientId,this.by=t.by},e.prototype.ey=function(t){this.accessToken=t},e.prototype.gy=function(){return this.accessToken},e.prototype.hy=function(t){this.clientId=t},e.prototype.iy=function(){return this.clientId},e.prototype.sr=function(t,i){var n,e=this.iy();if(!e)throw new Error("A client id is required. You can set the client id using .setClientId().");if(!t)throw new Error("A redirect uri is required.");return n="https://www.dropbox.com/oauth2/authorize?response_type=token&client_id="+e,t&&(n=n+"&redirect_uri="+t),i&&(n=n+"&state="+i),n},e.prototype.jy=function(t,i,n,e,o){var s=null;switch(o){case r.ky:s=this.ly();break;case r.my:s=this.ny();break;case r.oy:s=this.py();break;default:throw new Error("Invalid request style: "+o)}return s(t,i,n,e,this.gy(),this.by)},e.prototype.qy=function(t){e.prototype.sy=t},e.prototype.ly=function(){return void 0===e.prototype.sy&&(e.prototype.sy=t("./rpc-request")),e.prototype.sy},e.prototype.ty=function(t){e.prototype.uy=t},e.prototype.ny=function(){return void 0===e.prototype.uy&&(e.prototype.uy=t("./download-request")),e.prototype.uy},e.prototype.vy=function(t){e.prototype.wy=t},e.prototype.py=function(){return void 0===e.prototype.wy&&(e.prototype.wy=t("./upload-request")),e.prototype.wy},i.g=e},{"./download-request":107,"./object-assign-polyfill":113,"./request-constants":114,"./rpc-request":116,"./upload-request":117}],109:[function(t,i,n){var e,r=t("./dropbox-base"),o=t("./routes");e=function(t){r.call(this,t)},e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype=Object.assign(e.prototype,o),e.prototype.xy=function(t){return this.jy("sharing/get_shared_link_file",t,"api","download")},i.g=e},{"./dropbox-base":108,"./routes":115}],110:[function(t,i,n){function e(t){return"https://"+t+".dropboxapi.com/2/"}i.g=e},{}],111:[function(t,i,n){function e(t){return JSON.stringify(t).replace(r,function(t){return"\\u"+("000"+t.charCodeAt(0).toString(16)).slice(-4)})}var r=/[\u007f-\uffff]/g;i.g=e},{}],112:[function(t,i,n){var e=t("./dropbox");i.g=e},{"./dropbox":109}],113:[function(t,i,n){"function"!=typeof Object.assign&&function(){Object.assign=function(t){"use strict";var i,n,e,r;if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(i=Object(t),n=1;n<arguments.length;n++)if(void 0!==(e=arguments[n])&&null!==e)for(r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);return i}}()},{}],114:[function(t,i,n){var e={ky:"rpc",my:"download",oy:"upload"};i.g=e},{}],115:[function(t,i,n){var e={};e.yy=function(t){return this.jy("auth/token/from_oauth1",t,"app","api","rpc")},e.zy=function(t){return this.jy("auth/token/revoke",t,"user","api","rpc")},e.Ay=function(t){return this.jy("files/alpha/get_metadata",t,"user","api","rpc")},e.By=function(t){return this.jy("files/alpha/upload",t,"user","content","upload")},e.Cy=function(t){return this.jy("files/copy",t,"user","api","rpc")},e.Dy=function(t){
return this.jy("files/copy_batch",t,"user","api","rpc")},e.Ey=function(t){return this.jy("files/copy_batch/check",t,"user","api","rpc")},e.Fy=function(t){return this.jy("files/copy_reference/get",t,"user","api","rpc")},e.Gy=function(t){return this.jy("files/copy_reference/save",t,"user","api","rpc")},e.Fr=function(t){return this.jy("files/create_folder",t,"user","api","rpc")},e.Hr=function(t){return this.jy("files/delete",t,"user","api","rpc")},e.Hy=function(t){return this.jy("files/delete_batch",t,"user","api","rpc")},e.Iy=function(t){return this.jy("files/delete_batch/check",t,"user","api","rpc")},e.Cr=function(t){return this.jy("files/download",t,"user","content","download")},e.Jy=function(t){return this.jy("files/get_metadata",t,"user","api","rpc")},e.Ky=function(t){return this.jy("files/get_preview",t,"user","content","download")},e.Ly=function(t){return this.jy("files/get_temporary_link",t,"user","api","rpc")},e.My=function(t){return this.jy("files/get_thumbnail",t,"user","content","download")},e.xr=function(t){return this.jy("files/list_folder",t,"user","api","rpc")},e.Ny=function(t){return this.jy("files/list_folder/continue",t,"user","api","rpc")},e.Oy=function(t){return this.jy("files/list_folder/get_latest_cursor",t,"user","api","rpc")},e.Py=function(t){return this.jy("files/list_folder/longpoll",t,"noauth","notify","rpc")},e.Qy=function(t){return this.jy("files/list_revisions",t,"user","api","rpc")},e.Jr=function(t){return this.jy("files/move",t,"user","api","rpc")},e.Ry=function(t){return this.jy("files/move_batch",t,"user","api","rpc")},e.Sy=function(t){return this.jy("files/move_batch/check",t,"user","api","rpc")},e.Ty=function(t){return this.jy("files/permanently_delete",t,"user","api","rpc")},e.Uy=function(t){return this.jy("files/properties/add",t,"user","api","rpc")},e.Vy=function(t){return this.jy("files/properties/overwrite",t,"user","api","rpc")},e.Wy=function(t){return this.jy("files/properties/remove",t,"user","api","rpc")},e.Xy=function(t){return this.jy("files/properties/template/get",t,"user","api","rpc")},e.Yy=function(t){return this.jy("files/properties/template/list",t,"user","api","rpc")},e.Zy=function(t){return this.jy("files/properties/update",t,"user","api","rpc")},e.$y=function(t){return this.jy("files/restore",t,"user","api","rpc")},e._y=function(t){return this.jy("files/save_url",t,"user","api","rpc")},e.az=function(t){return this.jy("files/save_url/check_job_status",t,"user","api","rpc")},e.bz=function(t){return this.jy("files/search",t,"user","api","rpc")},e.Dr=function(t){return this.jy("files/upload",t,"user","content","upload")},e.cz=function(t){return this.jy("files/upload_session/append",t,"user","content","upload")},e.dz=function(t){return this.jy("files/upload_session/append_v2",t,"user","content","upload")},e.ez=function(t){return this.jy("files/upload_session/finish",t,"user","content","upload")},e.fz=function(t){return this.jy("files/upload_session/finish_batch",t,"user","api","rpc")},e.gz=function(t){return this.jy("files/upload_session/finish_batch/check",t,"user","api","rpc")},e.hz=function(t){return this.jy("files/upload_session/start",t,"user","content","upload")},e.iz=function(t){return this.jy("paper/docs/archive",t,"user","api","rpc")},e.jz=function(t){return this.jy("paper/docs/download",t,"user","api","download")},e.kz=function(t){return this.jy("paper/docs/folder_users/list",t,"user","api","rpc")},e.lz=function(t){return this.jy("paper/docs/folder_users/list/continue",t,"user","api","rpc")},e.mz=function(t){return this.jy("paper/docs/get_folder_info",t,"user","api","rpc")},e.nz=function(t){return this.jy("paper/docs/list",t,"user","api","rpc")},e.oz=function(t){return this.jy("paper/docs/list/continue",t,"user","api","rpc")},e.pz=function(t){return this.jy("paper/docs/permanently_delete",t,"user","api","rpc")},e.qz=function(t){return this.jy("paper/docs/sharing_policy/get",t,"user","api","rpc")},e.rz=function(t){return this.jy("paper/docs/sharing_policy/set",t,"user","api","rpc")},e.sz=function(t){return this.jy("paper/docs/users/add",t,"user","api","rpc")},e.tz=function(t){return this.jy("paper/docs/users/list",t,"user","api","rpc")},e.uz=function(t){return this.jy("paper/docs/users/list/continue",t,"user","api","rpc")},e.vz=function(t){return this.jy("paper/docs/users/remove",t,"user","api","rpc")},e.wz=function(t){return this.jy("sharing/add_file_member",t,"user","api","rpc")},e.xz=function(t){return this.jy("sharing/add_folder_member",t,"user","api","rpc")},e.yz=function(t){return this.jy("sharing/change_file_member_access",t,"user","api","rpc")},e.zz=function(t){return this.jy("sharing/check_job_status",t,"user","api","rpc")},e.Az=function(t){return this.jy("sharing/check_remove_member_job_status",t,"user","api","rpc")},e.Bz=function(t){return this.jy("sharing/check_share_job_status",t,"user","api","rpc")},e.Cz=function(t){return this.jy("sharing/create_shared_link",t,"user","api","rpc")},e.Dz=function(t){return this.jy("sharing/create_shared_link_with_settings",t,"user","api","rpc")},e.Ez=function(t){return this.jy("sharing/get_file_metadata",t,"user","api","rpc")},e.Fz=function(t){return this.jy("sharing/get_file_metadata/batch",t,"user","api","rpc")},e.Gz=function(t){return this.jy("sharing/get_folder_metadata",t,"user","api","rpc")},e.Hz=function(t){return this.jy("sharing/get_shared_link_file",t,"user","content","download")},e.Iz=function(t){return this.jy("sharing/get_shared_link_metadata",t,"user","api","rpc")},e.Jz=function(t){return this.jy("sharing/get_shared_links",t,"user","api","rpc")},e.Kz=function(t){return this.jy("sharing/list_file_members",t,"user","api","rpc")},e.Lz=function(t){return this.jy("sharing/list_file_members/batch",t,"user","api","rpc")},e.Mz=function(t){return this.jy("sharing/list_file_members/continue",t,"user","api","rpc")},e.Nz=function(t){return this.jy("sharing/list_folder_members",t,"user","api","rpc")},e.Oz=function(t){return this.jy("sharing/list_folder_members/continue",t,"user","api","rpc")},e.Pz=function(t){return this.jy("sharing/list_folders",t,"user","api","rpc")},e.Qz=function(t){return this.jy("sharing/list_folders/continue",t,"user","api","rpc")},e.Rz=function(t){return this.jy("sharing/list_mountable_folders",t,"user","api","rpc")},e.Sz=function(t){return this.jy("sharing/list_mountable_folders/continue",t,"user","api","rpc")},e.Tz=function(t){return this.jy("sharing/list_received_files",t,"user","api","rpc")},e.Uz=function(t){return this.jy("sharing/list_received_files/continue",t,"user","api","rpc")},e.Vz=function(t){return this.jy("sharing/list_shared_links",t,"user","api","rpc")},e.Wz=function(t){return this.jy("sharing/modify_shared_link_settings",t,"user","api","rpc")},e.Xz=function(t){return this.jy("sharing/mount_folder",t,"user","api","rpc")},e.Yz=function(t){return this.jy("sharing/relinquish_file_membership",t,"user","api","rpc")},e.Zz=function(t){return this.jy("sharing/relinquish_folder_membership",t,"user","api","rpc")},e.$z=function(t){return this.jy("sharing/remove_file_member",t,"user","api","rpc")},e._z=function(t){return this.jy("sharing/remove_file_member_2",t,"user","api","rpc")},e.aA=function(t){return this.jy("sharing/remove_folder_member",t,"user","api","rpc")},e.bA=function(t){return this.jy("sharing/revoke_shared_link",t,"user","api","rpc")},e.cA=function(t){return this.jy("sharing/share_folder",t,"user","api","rpc")},e.dA=function(t){return this.jy("sharing/transfer_folder",t,"user","api","rpc")},e.eA=function(t){return this.jy("sharing/unmount_folder",t,"user","api","rpc")},e.fA=function(t){return this.jy("sharing/unshare_file",t,"user","api","rpc")},e.gA=function(t){return this.jy("sharing/unshare_folder",t,"user","api","rpc")},e.hA=function(t){return this.jy("sharing/update_file_member",t,"user","api","rpc")},e.iA=function(t){return this.jy("sharing/update_folder_member",t,"user","api","rpc")},e.jA=function(t){return this.jy("sharing/update_folder_policy",t,"user","api","rpc")},e.kA=function(t){return this.jy("users/get_account",t,"user","api","rpc")},e.lA=function(t){return this.jy("users/get_account_batch",t,"user","api","rpc")},e.mA=function(t){return this.jy("users/get_current_account",t,"user","api","rpc")},e.nA=function(t){return this.jy("users/get_space_usage",t,"user","api","rpc")},i.g=e},{}],116:[function(t,i,n){var e=t("superagent"),r=t("es6-promise").Promise,o=t("./get-base-url"),s=function(t,i){return{status:t.status,error:(i?i.text:null)||t.toString(),response:i}},h=function(t,i,n,h,u,a){return new r(function(r,c){function l(t){r&&r(t)}function p(t){c&&c(t)}function f(t,i){t?p(s(t,i)):l(i.body)}var d;switch(i||(i=null),d=e.ay(o(h)+t).type("application/json"),n){case"team":case"user":d.set("Authorization","Bearer "+u);break;case"noauth":break;default:throw new Error("Unhandled auth type: "+n)}a&&(d=d.set("Dropbox-API-Select-User",a)),d.send(i).end(f)})};i.g=h},{"./get-base-url":110,"es6-promise":141,"superagent":145}],117:[function(t,i,n){var e=t("superagent"),r=t("es6-promise").Promise,o=t("./get-base-url"),s=t("./http-header-safe-json"),h=function(t,i){return{status:t.status,error:(i?i.text:null)||t.toString(),response:i}},u=function(t,i,n,u,a,c){if("user"!==n)throw new Error("Unexpected auth type: "+n);return new r(function(n,r){function l(t){n&&n(t)}function p(t){r&&r(t)}function f(t,i){t?p(h(t,i)):l(i.body)}var d,g=i.contents;delete i.contents,d=e.ay(o(u)+t).type("application/octet-stream").set("Authorization","Bearer "+a).set("Dropbox-API-Arg",s(i)),c&&(d=d.set("Dropbox-API-Select-User",c)),d.send(g).end(f)})};i.g=u},{"./get-base-url":110,"./http-header-safe-json":111,"es6-promise":141,"superagent":145}],118:[function(t,i,n){function e(t){if(t)return r(t)}function r(t){for(var i in e.prototype)t[i]=e.prototype[i];return t}void 0!==i&&(i.g=e),e.prototype.v=e.prototype.addEventListener=function(t,i){return this.oA=this.oA||{},(this.oA["$"+t]=this.oA["$"+t]||[]).push(i),this},e.prototype.A=function(t,i){function n(){this.C(t,n),i.apply(this,arguments)}return n.pA=i,this.v(t,n),this},e.prototype.C=e.prototype.removeListener=e.prototype.D=e.prototype.removeEventListener=function(t,i){if(this.oA=this.oA||{},0==arguments.length)return this.oA={},this;var n=this.oA["$"+t];if(!n)return this;if(1==arguments.length)return delete this.oA["$"+t],this;for(var e,r=0;r<n.length;r++)if((e=n[r])===i||e.pA===i){n.splice(r,1);break}return this},e.prototype.F=function(t){this.oA=this.oA||{};var i=[].slice.call(arguments,1),n=this.oA["$"+t];if(n){n=n.slice(0);for(var e=0,r=n.length;e<r;++e)n[e].apply(this,i)}return this},e.prototype.Jx=function(t){return this.oA=this.oA||{},this.oA["$"+t]||[]},e.prototype.qA=function(t){return!!this.Jx(t).length}},{}],119:[function(t,i,n){i.g=1/0},{}],120:[function(t,i,n){i.g=1},{}],121:[function(t,i,n){"use strict";var e=t("./_map");i.g=function(t){function i(t,i){return function(t){i(t)}}return e(t,i)}},{"./_map":123}],122:[function(t,i,n){"use strict";var e=t("./a"),r=t("./_map");i.g=function(t){function i(t,i){return function(n,r){function o(t,i){return!!r[i]}if(n)return void i(n);i(null,e(r)?t.filter(o):function(){var i={};return Object.keys(t).forEach(function(n){o(null,n)&&(i[n]=t[n])}),i}())}}return r(t,i)}},{"./_map":123,"./a":124}],123:[function(t,i,n){"use strict";var e=t("./a"),r=t("./once"),o=t("./concurrent"),s=t("./CONCURRENTLY"),h=t("./SERIAL");i.g=function t(i,n,u){function a(t,h,u,a){var c=arguments;2===c.length&&(u=h,h=s),3===c.length&&"number"!=typeof h&&(a=u,u=h,h=s);var l=Object.keys(t),p=e(t)?[]:{};l.forEach(function(i){p[i]=function(n){3===u.length?u(t[i],i,n):u(t[i],n)}}),o(p,i||h,n?n(t,r(a)):a)}return u||(a.js=t(h,n,!0)),a}},{"./CONCURRENTLY":119,"./SERIAL":120,"./a":124,"./concurrent":125,"./once":137}],124:[function(t,i,n){"use strict";i.g=function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],125:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./a"),o=t("./once"),s=t("./queue"),h=t("./errored"),u=t("./debounce"),a=t("./CONCURRENTLY");i.g=function(t,i,n){function c(i,n){function r(){var t=e(arguments);h(t,l)||(d[i]=t.shift(),n())}u(t[i],[r])}"function"==typeof i&&(n=i,i=a);var l=o(n),p=s(c,i),f=Object.keys(t),d=r(t)?[]:{};p.unshift(f),p.v("drain",function(){l(null,d)})}},{"./CONCURRENTLY":119,"./a":124,"./debounce":128,"./errored":131,"./once":137,"./queue":138,"atoa":134}],126:[function(t,i,n){"use strict";i.g={rA:t("./curry"),sA:t("./concurrent"),js:t("./series"),tA:t("./waterfall"),ps:t("./each"),map:t("./map"),filter:t("./filter"),uA:t("./queue"),emitter:t("./emitter")}},{"./concurrent":125,"./curry":127,"./each":129,"./emitter":130,"./filter":132,"./map":133,"./queue":138,"./series":139,"./waterfall":140}],127:[function(t,i,n){"use strict";var e=t("atoa");i.g=function(){var t=e(arguments),i=t.shift();return function(){var n=e(arguments);i.apply(i,t.concat(n))}}},{"atoa":134}],128:[function(t,i,n){"use strict";var e=t("ticky");i.g=function(t,i,n){t&&e(function(){t.apply(n||null,i||[])})}},{"ticky":135}],129:[function(t,i,n){"use strict";i.g=t("./_each")()},{"./_each":121}],130:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./debounce");i.g=function(t,i){var n=i||{},o={};return void 0===t&&(t={}),t.v=function(i,n){return o[i]?o[i].push(n):o[i]=[n],t},t.A=function(i,n){return n.vA=!0,t.v(i,n),t},t.C=function(i,n){var e=arguments.length;if(1===e)delete o[i];else if(0===e)o={};else{var r=o[i];if(!r)return t;r.splice(r.indexOf(n),1)}return t},t.F=function(){var i=e(arguments);return t.wA(i.shift()).apply(this,i)},t.wA=function(i){var s=(o[i]||[]).slice(0);return function(){var o=e(arguments),h=this||t;if("error"===i&&n.throws!==!1&&!s.length)throw 1===o.length?o[0]:o;return s.forEach(function(e){n.async?r(e,o,h):e.apply(h,o),e.vA&&t.C(i,e)}),t}},t}},{"./debounce":128,"atoa":134}],131:[function(t,i,n){"use strict";var e=t("./debounce");i.g=function(t,i,n){var r=t.shift();if(r)return n&&n.xA(),e(i,[r]),!0}},{"./debounce":128}],132:[function(t,i,n){"use strict";i.g=t("./_filter")()},{"./_filter":122}],133:[function(t,i,n){"use strict";i.g=t("./_map")()},{"./_map":123}],134:[function(t,i,n){i.g=function(t,i){return Array.prototype.slice.call(t,i)}},{}],135:[function(t,i,n){var e,r="function"==typeof setImmediate;e=r?function(t){setImmediate(t)}:function(t){setTimeout(t,0)},i.g=e},{}],136:[function(t,i,n){"use strict";i.g=function(){}},{}],137:[function(t,i,n){"use strict";var e=t("./noop");i.g=function(t){function i(){n||(n=!0,(t||e).apply(null,arguments))}var n;return i.xA=function(){n=!0},i}},{"./noop":136}],138:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./a"),o=t("./once"),s=t("./emitter"),h=t("./debounce");i.g=function(t,i){function n(t,i,n){(r(i)?i:[i]).forEach(function(i){l[t]({Nw:i,done:n})}),h(u)}function u(){if(!(c||p>=f)){if(!l.length)return void(0===p&&d.F("drain"));p++;var i=l.pop();t(i.Nw,o(a.bind(null,i))),h(u)}}function a(t){p--,h(t.done,e(arguments,1)),h(u)}var c,l=[],p=0,f=i||1,d=s({push:n.bind(null,"push"),unshift:n.bind(null,"unshift"),pause:function(){c=!0},resume:function(){c=!1,h(u)},pending:l});return Object.defineProperty&&!Object.yA&&Object.defineProperty(d,"length",{get:function(){return l.length}}),d}},{"./a":124,"./debounce":128,"./emitter":130,"./once":137,"atoa":134}],139:[function(t,i,n){"use strict";var e=t("./concurrent"),r=t("./SERIAL");i.g=function(t,i){e(t,r,i)}},{"./SERIAL":120,"./concurrent":125}],140:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./once"),o=t("./errored"),s=t("./debounce");i.g=function(t,i){function n(){var i=e(arguments),u=t.shift();if(u){if(o(i,h))return;i.push(r(n)),s(u,i)}else s(h,arguments)}var h=r(i);n()}},{"./debounce":128,"./errored":131,"./once":137,"atoa":134}],141:[function(t,i,n){(function(e,r){!function(t,e){"object"==typeof n&&void 0!==i?i.g=e():"function"==typeof define&&define.zA?define(e):t.AA=e()}(this,function(){"use strict";function i(t){return"function"==typeof t||"object"==typeof t&&null!==t}function n(t){return"function"==typeof t}function o(t){W=t}function s(t){U=t}function h(){return function(){R(a)}}function u(){var t=setTimeout;return function(){return t(a,1)}}function a(){for(var t=0;t<N;t+=2){(0,J[t])(J[t+1]),J[t]=void 0,J[t+1]=void 0}N=0}function c(t,i){var n=arguments,e=this,r=new this.constructor(p);void 0===r[tt]&&G(r);var o=e.DA;return o?function(){var t=n[o-1];U(function(){return E(o,r,t,e.EA)})}():q(e,r,t,i),r}function l(t){var i=this;if(t&&"object"==typeof t&&t.constructor===i)return t;var n=new i(p);return w(n,t),n}function p(){}function f(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function g(t){try{return t.then}catch(t){return rt.error=t,rt}}function v(t,i,n,e){try{t.call(i,n,e)}catch(t){return t}}function y(t,i,n){U(function(t){var e=!1,r=v(n,i,function(n){e||(e=!0,i!==n?w(t,n):k(t,n))},function(i){e||(e=!0,j(t,i))},"Settle: "+(t.Lo||" unknown promise"));!e&&r&&(e=!0,j(t,r))},t)}function b(t,i){i.DA===nt?k(t,i.EA):i.DA===et?j(t,i.EA):q(i,void 0,function(i){return w(t,i)},function(i){return j(t,i)})}function m(t,i,e){i.constructor===t.constructor&&e===c&&i.constructor.resolve===l?b(t,i):e===rt?j(t,rt.error):void 0===e?k(t,i):n(e)?y(t,i,e):k(t,i)}function w(t,n){t===n?j(t,f()):i(n)?m(t,n,g(n)):k(t,n)}function x(t){t.FA&&t.FA(t.EA),B(t)}function k(t,i){t.DA===it&&(t.EA=i,t.DA=nt,0!==t.GA.length&&U(B,t))}function j(t,i){t.DA===it&&(t.DA=et,t.EA=i,U(x,t))}function q(t,i,n,e){var r=t.GA,o=r.length;t.FA=null,r[o]=i,r[o+nt]=n,r[o+et]=e,0===o&&t.DA&&U(B,t)}function B(t){var i=t.GA,n=t.DA;if(0!==i.length){for(var e=void 0,r=void 0,o=t.EA,s=0;s<i.length;s+=3)e=i[s],r=i[s+n],e?E(n,e,r,o):r(o);t.GA.length=0}}function S(){this.error=null}function A(t,i){try{return t(i)}catch(t){return ot.error=t,ot}}function E(t,i,e,r){var o=n(e),s=void 0,h=void 0,u=void 0,a=void 0;if(o){if(s=A(e,r),s===ot?(a=!0,h=s.error,s=null):u=!0,i===s)return void j(i,d())}else s=r,u=!0;i.DA!==it||(o&&u?w(i,s):a?j(i,h):t===nt?k(i,s):t===et&&j(i,s))}function C(t,i){try{i(function(i){w(t,i)},function(i){j(t,i)})}catch(i){j(t,i)}}function M(){return st++}function G(t){t[tt]=st++,t.DA=void 0,t.EA=void 0,t.GA=[]}function D(t,i){this.HA=t,this.IA=new t(p),this.IA[tt]||G(this.IA),H(i)?(this.JA=i,this.length=i.length,this.KA=i.length,this.EA=new Array(this.length),0===this.length?k(this.IA,this.EA):(this.length=this.length||0,this.LA(),0===this.KA&&k(this.IA,this.EA))):j(this.IA,T())}function T(){return new Error("Array Methods must be provided an Array")}function z(t){return new D(this,t).IA}function _(t){var i=this;return new i(H(t)?function(n,e){for(var r=t.length,o=0;o<r;o++)i.resolve(t[o]).then(n,e)}:function(t,i){return i(new TypeError("You must pass an array to race."))})}function O(t){var i=this,n=new i(p);return j(n,t),n}function I(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function L(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function P(t){this[tt]=M(),this.EA=this.DA=void 0,this.GA=[],p!==t&&("function"!=typeof t&&I(),this instanceof P?C(this,t):L())}function Y(){var t=void 0;if(void 0!==r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var i=t.Promise;if(i){var n=null;try{n=Object.prototype.toString.call(i.resolve())}catch(t){}if("[object Promise]"===n&&!i.cast)return}t.Promise=P}var F=void 0;F=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var H=F,N=0,R=void 0,W=void 0,U=function(t,i){J[N]=t,J[N+1]=i,2===(N+=2)&&(W?W(a):$())},K="undefined"!=typeof window?window:void 0,X=K||{},Z=X.MutationObserver||X.WebKitMutationObserver,V="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),Q="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,J=new Array(1e3),$=void 0;$=V?function(){return function(){return e.m(a)}}():Z?function(){var t=0,i=new Z(a),n=document.createTextNode("");return i.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():Q?function(){var t=new MessageChannel;return t.port1.onmessage=a,function(){return t.port2.postMessage(0)}}():void 0===K&&"function"==typeof t?function(){try{var i=t,n=i("vertx");return R=n.BA||n.CA,h()}catch(t){return u()}}():u();var tt=Math.random().toString(36).substring(16),it=void 0,nt=1,et=2,rt=new S,ot=new S,st=0;return D.prototype.LA=function(){for(var t=this.length,i=this.JA,n=0;this.DA===it&&n<t;n++)this.MA(i[n],n)},D.prototype.MA=function(t,i){var n=this.HA,e=n.resolve;if(e===l){var r=g(t);if(r===c&&t.DA!==it)this.NA(t.DA,i,t.EA);else if("function"!=typeof r)this.KA--,this.EA[i]=t;else if(n===P){var o=new n(p);m(o,t,r),this.OA(o,i)}else this.OA(new n(function(i){return i(t)}),i)}else this.OA(e(t),i)},D.prototype.NA=function(t,i,n){var e=this.IA;e.DA===it&&(this.KA--,t===et?j(e,n):this.EA[i]=n),0===this.KA&&k(e,this.EA)},D.prototype.OA=function(t,i){var n=this;q(t,void 0,function(t){return n.NA(nt,i,t)},function(t){return n.NA(et,i,t)})},P.all=z,P.race=_,P.resolve=l,P.reject=O,P.PA=o,P.QA=s,P.RA=U,P.prototype={constructor:P,then:c,"catch":function(t){return this.then(null,t)}},Y(),P.SA=Y,P.Promise=P,P})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"_process":2}],142:[function(t,i,n){i.g=function(t,i){var n=i||document;if(n.createStyleSheet){var e=n.createStyleSheet();return e.cssText=t,e.ownerNode}var r=n.getElementsByTagName("head")[0],o=n.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(n.createTextNode(t)),r.appendChild(o),o},i.g.TA=function(t){if(document.createStyleSheet)return document.createStyleSheet(t).ownerNode;var i=document.getElementsByTagName("head")[0],n=document.createElement("link");return n.rel="stylesheet",n.href=t,i.appendChild(n),n}},{}],143:[function(t,i,n){i.g=t("cssify")},{"cssify":142}],144:[function(t,i,n){i.g=function(t,i,n){for(var e=0,r=t.length,o=3==arguments.length?n:t[e++];e<r;)o=i.call(null,o,t[e],++e,t);return o}},{}],145:[function(t,i,n){function e(){}function r(t){switch({}.toString.call(t)){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(t){if(!m(t))return t;var i=[];for(var n in t)null!=t[n]&&s(i,n,t[n]);return i.join("&")}function s(t,i,n){if(Array.isArray(n))return n.forEach(function(n){s(t,i,n)});t.push(encodeURIComponent(i)+"="+encodeURIComponent(n))}function h(t){for(var i,n,e={},r=t.split("&"),o=0,s=r.length;o<s;++o)n=r[o],i=n.split("="),e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]);return e}function u(t){var i,n,e,r,o=t.split(/\r?\n/),s={};o.pop();for(var h=0,u=o.length;h<u;++h)n=o[h],i=n.indexOf(":"),e=n.slice(0,i).toLowerCase(),r=x(n.slice(i+1)),s[e]=r;return s}function a(t){return/[\/+]json\b/.test(t)}function c(t){return t.split(/ *; */).shift()}function l(t){return y(t.split(/ *; */),function(t,i){var n=i.split(/ *= */),e=n.shift(),r=n.shift();return e&&r&&(t[e]=r),t},{})}function p(t,i){i=i||{},this.$A=t,this.Zx=this.$A.Zx,this.text="HEAD"!=this.$A.method&&(""===this.Zx.responseType||"text"===this.Zx.responseType)||void 0===this.Zx.responseType?this.Zx.responseText:null,this.statusText=this.$A.Zx.statusText,this._A(this.Zx.status),this.aB=this.headers=u(this.Zx.getAllResponseHeaders()),this.aB["content-type"]=this.Zx.getResponseHeader("content-type"),this.bB(this.aB),this.body="HEAD"!=this.$A.method?this.cB(this.text?this.text:this.Zx.response):null}function f(t,i){var n=this;this.pB=this.pB||[],this.method=t,this.url=i,this.aB={},this.qB={},this.v("end",function(){var t=null,i=null;try{i=new p(n)}catch(i){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.rB=i,t.sB=n.Zx&&n.Zx.responseText?n.Zx.responseText:null,t.dB=n.Zx&&n.Zx.status?n.Zx.status:null,n.Sx(t)}if(n.F("response",i),t)return n.Sx(t,i);if(i.status>=200&&i.status<300)return n.Sx(t,i);var e=new Error(i.statusText||"Unsuccessful HTTP response");e.rB=t,e.response=i,e.status=i.status,n.Sx(e,i)})}function d(t,i){var n=w("DELETE",t);return i&&n.end(i),n}var g,v=t("emitter"),y=t("reduce"),b=t("./request-base"),m=t("./is-object");g="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var w=i.g=t("./request").bind(null,f);w.UA=function(){if(!(!g.XMLHttpRequest||g.location&&"file:"==g.location.protocol&&g.VA))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1};var x="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};w.WA=o,w.XA=h,w.types={Fo:"text/html",json:"application/json",YA:"application/xml",ZA:"application/x-www-form-urlencoded","form":"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},w.ya={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify},w.parse={"application/x-www-form-urlencoded":h,"application/json":JSON.parse},p.prototype.get=function(t){return this.aB[t.toLowerCase()]},p.prototype.bB=function(t){var i=this.aB["content-type"]||"";this.type=c(i);var n=l(i);for(var e in n)this[e]=n[e]},p.prototype.cB=function(t){var i=w.parse[this.type];return!i&&a(this.type)&&(i=w.parse["application/json"]),i&&t&&(t.length||t instanceof Object)?i(t):null},p.prototype._A=function(t){1223===t&&(t=204);var i=t/100|0;this.status=this.dB=t,this.eB=i,this.info=1==i,this.ok=2==i,this.fB=4==i,this.gB=5==i,this.error=(4==i||5==i)&&this.hB(),this.iB=202==t,this.jB=204==t,this.kB=400==t,this.lB=401==t,this.mB=406==t,this.nB=404==t,this.oB=403==t},p.prototype.hB=function(){var t=this.$A,i=t.method,n=t.url,e="cannot "+i+" "+n+" ("+this.status+")",r=new Error(e);return r.status=this.status,r.method=i,r.url=n,r},w.Response=p,v(f.prototype);for(var k in b)f.prototype[k]=b[k];f.prototype.abort=function(){if(!this.tB)return this.tB=!0,this.Zx&&this.Zx.abort(),this.clearTimeout(),this.F("abort"),this},f.prototype.type=function(t){return this.set("Content-Type",w.types[t]||t),this},f.prototype.responseType=function(t){return this.uB=t,this},f.prototype.accept=function(t){return this.set("Accept",w.types[t]||t),this},f.prototype.vB=function(t,i,n){switch(n||(n={type:"basic"}),n.type){case"basic":var e=btoa(t+":"+i);this.set("Authorization","Basic "+e);break;case"auto":this.username=t,this.password=i}return this},f.prototype.wB=function(t){return"string"!=typeof t&&(t=o(t)),t&&this.pB.push(t),this},f.prototype.xB=function(t,i,n){return this.yB().append(t,i,n||i.name),this},f.prototype.yB=function(){return this.zB||(this.zB=new g.FormData),this.zB},f.prototype.send=function(t){var i=m(t),n=this.qB["content-type"];if(i&&m(this.AB))for(var e in t)this.AB[e]=t[e];else"string"==typeof t?(n||this.type("form"),n=this.qB["content-type"],this.AB="application/x-www-form-urlencoded"==n?this.AB?this.AB+"&"+t:t:(this.AB||"")+t):this.AB=t;return!i||r(t)?this:(n||this.type("json"),this)},p.prototype.parse=function(t){return g.console&&console.warn("Client-side parse() method has been renamed to serialize(). This method is not compatible with superagent v2.0"),this.ya(t),this},p.prototype.ya=function(t){return this.BB=t,this},f.prototype.Sx=function(t,i){var n=this.CB;this.clearTimeout(),n(t,i)},f.prototype.DB=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.EB=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.Sx(t)},f.prototype.FB=function(){var t=this.GB,i=new Error("timeout of "+t+"ms exceeded");i.timeout=t,this.Sx(i)},f.prototype.withCredentials=function(){return this.HB=!0,this},f.prototype.end=function(t){var i=this,n=this.Zx=w.UA(),o=this.pB.join("&"),s=this.GB,h=this.zB||this.AB;this.CB=t||e,n.onreadystatechange=function(){if(4==n.readyState){var t;try{t=n.status}catch(i){t=0}if(0==t){if(i.IB)return i.FB();if(i.tB)return;return i.DB()}i.F("end")}};var u=function(t){t.total>0&&(t.JB=t.loaded/t.total*100),t.direction="download",i.F("progress",t)};this.qA("progress")&&(n.onprogress=u);try{n.upload&&this.qA("progress")&&(n.upload.onprogress=u)}catch(t){}if(s&&!this.KB&&(this.KB=setTimeout(function(){i.IB=!0,i.abort()},s)),o&&(o=w.WA(o),this.url+=~this.url.indexOf("?")?"&"+o:"?"+o),this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0),this.HB&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof h&&!r(h)){var c=this.qB["content-type"],l=this.BB||w.ya[c?c.split(";")[0]:""];!l&&a(c)&&(l=w.ya["application/json"]),l&&(h=l(h))}for(var p in this.aB)null!=this.aB[p]&&n.setRequestHeader(p,this.aB[p]);return this.uB&&(n.responseType=this.uB),this.F("request",this),n.send(void 0!==h?h:null),this},w.Request=f,w.get=function(t,i,n){var e=w("GET",t);return"function"==typeof i&&(n=i,i=null),i&&e.wB(i),n&&e.end(n),e},w.head=function(t,i,n){var e=w("HEAD",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e},w["del"]=d,w["delete"]=d,w.MB=function(t,i,n){var e=w("PATCH",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e},w.ay=function(t,i,n){var e=w("POST",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e},w.put=function(t,i,n){var e=w("PUT",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e}},{"./is-object":146,"./request":148,"./request-base":147,"emitter":118,"reduce":144}],146:[function(t,i,n){function e(t){return null!=t&&"object"==typeof t}i.g=e},{}],147:[function(t,i,n){var e=t("./is-object");n.clearTimeout=function(){return this.GB=0,clearTimeout(this.KB),this},n.parse=function(t){return this.BB=t,this},n.timeout=function(t){return this.GB=t,this},n.then=function(t,i){return this.end(function(n,e){n?i(n):t(e)})},n.NB=function(t){return t(this),this},n.get=function(t){return this.qB[t.toLowerCase()]},n.OB=n.get,n.set=function(t,i){if(e(t)){for(var n in t)this.set(n,t[n]);return this}return this.qB[t.toLowerCase()]=i,this.aB[t]=i,this},n.PB=function(t){return delete this.qB[t.toLowerCase()],delete this.aB[t],this},n.QB=function(t,i){return this.yB().append(t,i),this}},{"./is-object":146}],148:[function(t,i,n){function e(t,i,n){return"function"==typeof n?new t("GET",i).end(n):2==arguments.length?new t("GET",i):new t(i,n)}i.g=e},{}],149:[function(t,i,n){i.g={"name":"1g0","version":"0.4.9","description":"","author":"Olivier Lombart (kubicle)","license":"TBD","scripts":{"build":"browserify js/ui/htmlApp.js -t lessify | uglifyjs -o build/bld.js -m --mangle-props=unquoted --reserved-file build/reserved.json --reserve-domprops -c properties=false,pure_funcs=['log.debug','test.assert']","dev-build":"watchify js/test/testApp.js -o build/devBuild.js -t lessify -v","test":"node js/test/ciTestApp.js --ci","coverage":"node node_modules/istanbul/lib/cli.js cover js/test/ciTestApp.js -x **/frankie/** -x **/droopy/** -- --cover"},"main":"js/ui/htmlApp.js","repository":{"type":"git","url":"https://github.com/kubicle/1g0"},"bugs":{"url":"https://github.com/kubicle/1g0/issues"},"keywords":["baduk","go","igo","weiqi"],"dependencies":{"contra":"~1.9.4","dropbox":"~2.5.2"},"devDependencies":{"istanbul":"~0.3.22","codeclimate-test-reporter":"~0.1.1","browserify":"~10.2.4","lessify":"~1.0.1","watchify":"~3.2.2","uglify-js":"~2.8.18"}}},{}]},{},[95]);
=======
!function t(i,n,e){function r(s,h){if(!n[s]){if(!i[s]){var u="function"==typeof require&&require;if(!h&&u)return u(s,!0);if(o)return o(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var c=n[s]={g:{}};i[s][0].call(c.g,function(t){var n=i[s][1][t];return r(n||t)},c,c.g,t,i,n,e)}return n[s].g}for(var o="function"==typeof require&&require,s=0;s<e.length;s++)r(e[s]);return r}({1:[function(t,i,n){"function"==typeof Object.create?i.g=function(t,i){t.h=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,i:!1,j:!0,k:!0}})}:i.g=function(t,i){t.h=i;var n=function(){};n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],2:[function(t,i,n){function e(){c=!1,h.length?a=h.concat(a):l=-1,a.length&&r()}function r(){if(!c){var t=setTimeout(e);c=!0;for(var i=a.length;i;){for(h=a,a=[];++l<i;)h[l].l();l=-1,i=a.length}h=null,c=!1,clearTimeout(t)}}function o(t,i){this.o=t,this.p=i}function s(){}var h,u=i.g={},a=[],c=!1,l=-1;u.m=function(t){var i=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)i[n-1]=arguments[n];a.push(new o(t,i)),1!==a.length||c||setTimeout(r,0)},o.prototype.l=function(){this.o.apply(null,this.p)},u.title="browser",u.q=!0,u.s={},u.t=[],u.version="",u.u={},u.v=s,u.addListener=s,u.A=s,u.C=s,u.removeListener=s,u.D=s,u.F=s,u.G=function(t){throw new Error("process.binding is not supported")},u.H=function(){return"/"},u.I=function(t){throw new Error("process.chdir is not supported")},u.J=function(){return 0}},{}],3:[function(t,i,n){i.g=function(t){return t&&"object"==typeof t&&"function"==typeof t.K&&"function"==typeof t.fill&&"function"==typeof t.L}},{}],4:[function(t,i,n){(function(i,e){function r(t,i){var e={U:[],V:s};return arguments.length>=3&&(e.X=arguments[2]),arguments.length>=4&&(e.Y=arguments[3]),g(i)?e.Z=i:i&&n.$(e,i),x(e.Z)&&(e.Z=!1),x(e.X)&&(e.X=2),x(e.Y)&&(e.Y=!1),x(e._)&&(e._=!0),e.Y&&(e.V=o),u(e,t,e.X)}function o(t,i){var n=r.ba[i];return n?"["+r.Y[n][0]+"m"+t+"["+r.Y[n][1]+"m":t}function s(t,i){return t}function h(t){var i={};return t.forEach(function(t,n){i[t]=!0}),i}function u(t,i,e){if(t._&&i&&z(i.aa)&&i.aa!==n.aa&&(!i.constructor||i.constructor.prototype!==i)){var r=i.aa(e,t);return m(r)||(r=u(t,r,e)),r}var o=a(t,i);if(o)return o;var s=Object.keys(i),g=h(s);if(t.Z&&(s=Object.getOwnPropertyNames(i)),S(i)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(i);if(0===s.length){if(z(i)){var v=i.name?": "+i.name:"";return t.V("[Function"+v+"]","special")}if(k(i))return t.V(RegExp.prototype.toString.call(i),"regexp");if(M(i))return t.V(Date.prototype.toString.call(i),"date");if(S(i))return c(i)}var y="",b=!1,w=["{","}"];if(d(i)&&(b=!0,w=["[","]"]),z(i)){y=" [Function"+(i.name?": "+i.name:"")+"]"}if(k(i)&&(y=" "+RegExp.prototype.toString.call(i)),M(i)&&(y=" "+Date.prototype.toUTCString.call(i)),S(i)&&(y=" "+c(i)),0===s.length&&(!b||0==i.length))return w[0]+y+w[1];if(e<0)return k(i)?t.V(RegExp.prototype.toString.call(i),"regexp"):t.V("[Object]","special");t.U.push(i);var x;return x=b?l(t,i,e,g,s):s.map(function(n){return p(t,i,e,g,n,b)}),t.U.pop(),f(x,y,w)}function a(t,i){if(x(i))return t.V("undefined","undefined");if(m(i)){var n="'"+JSON.stringify(i).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.V(n,"string")}return b(i)?t.V(""+i,"number"):g(i)?t.V(""+i,"boolean"):v(i)?t.V("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,i,n,e,r){for(var o=[],s=0,h=i.length;s<h;++s)T(i,String(s))?o.push(p(t,i,n,e,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(p(t,i,n,e,r,!0))}),o}function p(t,i,n,e,r,o){var s,h,a;if(a=Object.getOwnPropertyDescriptor(i,r)||{value:i[r]},a.get?h=a.set?t.V("[Getter/Setter]","special"):t.V("[Getter]","special"):a.set&&(h=t.V("[Setter]","special")),T(e,r)||(s="["+r+"]"),h||(t.U.indexOf(a.value)<0?(h=v(n)?u(t,a.value,null):u(t,a.value,n-1),h.indexOf("\n")>-1&&(h=o?h.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+h.split("\n").map(function(t){return"   "+t}).join("\n"))):h=t.V("[Circular]","special")),x(s)){if(o&&r.match(/^\d+$/))return h;s=JSON.stringify(""+r),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.V(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.V(s,"string"))}return s+": "+h}function f(t,i,n){var e=0;return t.reduce(function(t,i){return e++,i.indexOf("\n")>=0&&e++,t+i.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===i?"":i+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+i+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function v(t){return null===t}function y(t){return null==t}function b(t){return"number"==typeof t}function m(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function x(t){return void 0===t}function k(t){return j(t)&&"[object RegExp]"===B(t)}function j(t){return"object"==typeof t&&null!==t}function M(t){return j(t)&&"[object Date]"===B(t)}function S(t){return j(t)&&("[object Error]"===B(t)||t instanceof Error)}function z(t){return"function"==typeof t}function q(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function B(t){return Object.prototype.toString.call(t)}function D(t){return t<10?"0"+t.toString(10):t.toString(10)}function A(){var t=new Date,i=[D(t.getHours()),D(t.getMinutes()),D(t.getSeconds())].join(":");return[t.getDate(),I[t.getMonth()],i].join(" ")}function T(t,i){return Object.prototype.hasOwnProperty.call(t,i)}n.format=function(t){if(!m(t)){for(var i=[],n=0;n<arguments.length;n++)i.push(r(arguments[n]));return i.join(" ")}for(var n=1,e=arguments,o=e.length,s=String(t).replace(/%[sdj%]/g,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(e[n++]);case"%d":return Number(e[n++]);case"%j":try{return JSON.stringify(e[n++])}catch(t){return"[Circular]"}default:return t}}),h=e[n];n<o;h=e[++n])v(h)||!j(h)?s+=" "+h:s+=" "+r(h);return s},n.M=function(t,r){function o(){if(!s){if(i.O)throw new Error(r);i.P?console.trace(r):console.error(r),s=!0}return t.apply(this,arguments)}if(x(e.process))return function(){return n.M(t,r).apply(this,arguments)};if(i.N===!0)return t;var s=!1;return o};var C,E={};n.R=function(t){if(x(C)&&(C=i.s.S||""),t=t.toUpperCase(),!E[t])if(new RegExp("\\b"+t+"\\b","i").test(C)){var e=i.T;E[t]=function(){var i=n.format.apply(n,arguments);console.error("%s %d: %s",t,e,i)}}else E[t]=function(){};return E[t]},n.aa=r,r.Y={"bold":[1,22],"italic":[3,23],"underline":[4,24],"inverse":[7,27],"white":[37,39],"grey":[90,39],"black":[30,39],"blue":[34,39],"cyan":[36,39],"green":[32,39],"magenta":[35,39],"red":[31,39],"yellow":[33,39]},r.ba={"special":"cyan","number":"yellow","boolean":"yellow","undefined":"grey","null":"bold","string":"green","date":"magenta","regexp":"red"},n.isArray=d,n.ca=g,n.da=v,n.ea=y,n.fa=b,n.ga=m,n.ha=w,n.ia=x,n.ja=k,n.ka=j,n.la=M,n.ma=S,n.na=z,n.oa=q,n.isBuffer=t("./support/isBuffer");var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",A(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n.$=function(t,i){if(!i||!j(i))return t;for(var n=Object.keys(i),e=n.length;e--;)t[n[e]]=i[n[e]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":3,"_process":2,"inherits":1}],5:[function(t,i,n){i.g={"#appTitle":"1g0: let's play go!","#cancelAction":"Cancel","#confirmTitle":"Confirm","#problem":"Problem","#ok":"OK","#yes":"YES","#no":"NO","#cancel":"Cancel","#close":"Close","#none":"-","#play":"Play","#load":"Load","#newGame":"New game","#myGames":"My games","#importGame":"Import games","#exportGame":"Export game","#downloadLatest":"Update from %1","#fromFile":"From file:","#selectFile":"Select file","#recentGames":"Recent games:","#fromText":"From copy/paste:","#fromTextHelp":"Paste game in SGF format, e.g. (;FF[4]...)","#invalidSgf":'Invalid SGF game\n(game starts with "%1...")',"#archivedGames":"Archived games","#deleteGame":"Delete","#deleteGameConfirm":"Do you really want to delete this game?","#archiveGame":"Archive","#archiveGameConfirm":"Do you want to archive this game? (you can restore it later)","#showArchivedGames":"Archived games","#restoreGame":"Restore","#empty":"(empty)","#myGamesHelp":"Any game you create or load/edit will be added to this list","#settings":"Settings","#colorTheme":"Color theme","#setupDropbox":"Setup Dropbox","#review":"Study","#endStudy":"End study","#evalScore":"Evaluate score","#rewindAll":"Back to game start","#resign":"Resign","#pass":"Pass","#undo":"Undo","#resignConfirm":"Do you really want to resign?","#syncGame":"Sync this game","#syncMyGames":"Sync my games","#syncStart":"Connecting...","#noCloud":"Not connected to cloud","#archivedGame":"[archived %1]","#remote":"[remote %1]","#uploaded":"Uploaded: ","#downloaded":"Downloaded: ","#alreadySync":"Already in sync: ","#synced":"Synced: ","#deleted":"Deleted: ","#archived":"Archived: ","#unarchived":"Unarchived: ","#undeleted":"Undeleted: ","#syncDone":"Sync completed."}},{}],6:[function(t,i,n){i.g={".cafeAuLait":{".menuBtn":{"backgroundColor":"#704f43"},".topTitle":{"backgroundColor":"#5c4137"}},".neonBlack":{"body":{"backgroundColor":"#000"},".btn":{"backgroundColor":"#02192b","color":"#daebef","borderColor":"#5d80c6"},".btn+toggled":{"backgroundColor":"#380966","color":"#cad904"},".menuBtn":{"backgroundColor":"#0e4571"},".topTitle":{"backgroundColor":"#0b3557"},".statusBar":{"backgroundColor":"#c7cced","border":"#07b2ff 1px solid","boxShadow":"3px 3px 20px #537cc6"},".board":{"backgroundColor":"#002"},".mainControls":{"color":"#daebef"},".dialog":{"backgroundColor":"#0d0217","color":"#daebef","boxShadow":"#3fb 3px 3px 20px","border":"solid #b395d7 1px"},".dialogTitle":{"backgroundColor":"#0b3557","color":"#fffaff","textShadow":"#06b1ff 4px 4px 7px","borderColor":"#fff","boxShadow":"#00abff 3px 3px 20px"},".playerBtn":{"backgroundColor":"#5034a9"},".sizeBtn":{"backgroundColor":"#5034a9"},".boardImgFrame":{"backgroundColor":"#09132a","boxShadow":"#3fb 3px 3px 20px"},".curSize":{"textShadow":"#0a9da9 3px 3px 5px"},".gameList":{"border":"1px solid #8ea3da","backgroundColor":"#000"},".oneGame+selected":{"backgroundColor":"#2a4990"},".dropDwn":{"backgroundColor":"#000"},".inputBox":{"backgroundColor":"#000"},".devDiv":{"backgroundColor":"#5a3571","color":"#38cead","border":"1px solid #400ac1"},".devLogBox":{"color":"#000"}},".bottleGreen":{"body":{"backgroundColor":"#000"},".btn":{"backgroundColor":"#022b10","color":"#fff","borderColor":"#5dc677"},".btn+toggled":{"backgroundColor":"#380966","color":"#cad904"},".menuBtn":{"backgroundColor":"#146c43"},".topTitle":{"backgroundColor":"#0b573e"},".statusBar":{"backgroundColor":"#8ca197","border":"#2d8722 1px solid","boxShadow":"3px 3px 20px #537cc6"},".board":{"backgroundColor":"#002600"},".mainControls":{"color":"#eee"},".dialog":{"backgroundColor":"#071903","color":"#eee","boxShadow":"#3ff 2px 2px 15px","border":"solid #000 1px"},".dialogTitle":{"backgroundColor":"#0b573e","color":"#fffaff","textShadow":"#06b1ff 4px 4px 7px","borderColor":"#fff","boxShadow":"#00abff 3px 3px 20px"},".playerBtn":{"backgroundColor":"#107733"},".sizeBtn":{"backgroundColor":"#107733"},".boardImgFrame":{"backgroundColor":"#0c2529","boxShadow":"#3ff 2px 2px 15px"},".curSize":{"textShadow":"#0a9da9 3px 3px 5px"},".gameList":{"border":"1px solid #8ea3da","backgroundColor":"#000"},".oneGame+selected":{"backgroundColor":"#2a4990"},".dropDwn":{"backgroundColor":"#000"},".inputBox":{"backgroundColor":"#000"},".devDiv":{"backgroundColor":"#5a3571","color":"#38cead","border":"1px solid #400ac1"},".devLogBox":{"color":"#000"}}}},{}],7:[function(t,i,n){i.g={"server-url":"https://ig0.herokuapp.com/","dropbox-clientId":"gdap2n66j8rl89n"}},{}],8:[function(t,i,n){i.g={".cgos":{"useAreaScoring":!0,"usePositionalSuperko":!0},".chinese":{"useAreaScoring":!0,"usePositionalSuperko":!0},".japanese":{}}},{}],9:[function(t,i,n){"use strict";function e(t){this.pa=null,this.qa=t,this.ra=null,this.sa={},this.ta=null,this.ua=0}function r(t){return(t.length-t.replace(/;[BW]\[/g,"").length)/3}function o(t){return(t.length-t.replace(/\(;/g,"").length)/2-1}function s(t,i){return 0===i?"":", "+i+" "+t}function h(t){return t||0===t?" "+t:""}function u(t){var i=t.Ka(),n=parseInt(i);return isNaN(n)?n=19:i=i.substr(i.indexOf(" ")+1),String.fromCharCode(90-n)+"|"+i}function a(t,i){return u(t).localeCompare(u(i))}var c=t("./hh/getText"),l=t("./net/goSites"),p=t("./SgfReader");i.g=e;e.prototype.va=function(){var t={};return t["sgf"]=this.qa,t["tagMap"]=this.sa,t["serverStamp"]=this.ta,t["lastChange"]=this.ua,t},e.prototype.wa=function(t){if(this.qa)throw new Error("Game already initialized");return"string"==typeof t&&"("===t[0]?(this.qa=t,!0):!!t["sgf"]&&(this.qa=t["sgf"],this.sa=t["tagMap"]||{},this.ta=t["serverStamp"]||null,this.ua=t["lastChange"]||0,!0)},e.prototype.xa=function(t,i){if(!p.ya(t))return i.push(c("#invalidSgf",t.substr(0,15))),!1;if(this.qa)throw new Error("Game already initialized");return this.qa=t,this.za(i)},e.prototype.za=function(t){var i=new p;return!!i.Aa(this.qa,t)&&(this.ra=i.Ba(),!0)},e.prototype.Ca=function(t,i){var n=new p;if(!n.Aa(t.Da(),i))return null;var e=n.Ba();return this.ra||this.za(i)?(this.ra.Ca(e),!0):null},e.prototype.Ea=function(t,i){var n=this.sa[t];if(n)return n;var e=i,r=this.qa.indexOf(t+"[");if(r>=0){var o=this.qa.substring(r+t.length+1,this.qa.indexOf("]",r));switch(typeof i){case"number":e=parseFloat(o);break;default:e=o}}return void 0!==e&&(this.sa[t]=e),e},e.prototype.Fa=function(t){var i=this.Ea(t,"?");return i.length<=10?i:i.substr(0,9).trim()+"."},e.prototype.Da=function(){return this.qa},e.prototype.Ga=function(t){return t!==this.qa&&(this.qa=t,this.ta=null,this.ua=Date.now(),!0)},e.prototype.Ha=function(t,i){this.ta=t,this.ua=i},e.prototype.Ia=function(){return this.ta},e.prototype.Ja=function(){return this.ua},e.prototype.Ka=function(){var t="",i=this.Ea("SZ",19);return 19!==i&&(t+=i+"x"+i+" "),t+=this.Fa("PW")+"/"+this.Fa("PB"),t+=s("mov.",r(this.qa)),t+=s("var.",o(this.qa))},e.prototype.La=function(){if(this.pa)return this.pa;var t="",i=this.Ea("SZ",19);return 19!==i&&(t+=i+"x"+i+" "),t+=this.Fa("PW")+"-VS-"+this.Fa("PB"),t+=h(this.Ea("DT")),t+=h(this.Ma("PC")),t+=h(this.Ma("SO")),t+=h(this.Ma("EV")),t=t.replace(/[\\\/]/g,"-"),this.pa=t,t},e.prototype.Ma=function(t){var i=this.Ea(t);return i?l.Na(t,i):i},e.Oa=a},{"./SgfReader":24,"./hh/getText":63,"./net/goSites":75}],10:[function(t,i,n){"use strict";function e(){this.Pa()}i.g=e,e.prototype.Pa=function(){this.Qa={}},e.prototype.Ra=function(){this.Pa(),this.Sa("date",(new Date).toISOString().substr(0,10))},e.prototype.Ta=function(t){this.Pa();for(var i in t)this.Qa[i]=t[i]},e.prototype.Ua=function(t){return this.Qa[t]},e.prototype.Sa=function(t,i){this.Qa[t]=i},e.prototype.Va=function(){return this.Qa},e.prototype.Wa=function(t,i,n){this.Sa("boardSize",t),this.Sa("komi",i),this.Sa("rules",n)}},{}],11:[function(t,i,n){"use strict";function e(){this.eb(y),this.fb=null,this.gb()}var r=t("./constants"),o=t("./Goban"),s=t("./HandicapSetter"),h=t("./log"),u=t("./Move"),a=t("../config/rules.json"),c=u.Xa,l=u.Ya,p=u.Za,f=u.$a,d=u._a,g=r.ab,v=r.bb,y=r.cb;i.g=e,e.prototype.gb=function(){this.history=[],this.hb=[],this.ib=null,this.jb=0,this.kb=this.lb=g,this.mb=this.nb=!1,this.ob=this.pb=null},e.prototype.qb=function(t){this.eb(t.rb,!0),this.sb(t.fb.tb,t.ib,t.jb),this.ub(t.lb),this.vb(t.history)},e.prototype.wb=function(){this.fb.clear(),this.history=[],this.kb=this.lb,this.xb()},e.prototype.eb=function(t,i){this.rb=t,t=t||"unspecified";var n=a["."+t.toLowerCase()];if(!n){if(!i)throw new Error("Invalid rules: "+t+"\nValid values: "+Object.keys(a).map(function(t){return t.substr(1)}).join(", "));n=a["."+y.toLowerCase()]}this.usePositionalSuperko=n.usePositionalSuperko||!1,this.useAreaScoring=n.useAreaScoring||!1},e.prototype.yb=function(){return this.rb},e.prototype.sb=function(t,i,n){if(this.gb(),this.fb&&t===this.fb.tb)this.fb.clear();else if(this.fb=new o(t),this.fb.tb!==t)return this.zb("Size could not be set: "+t);return this.fb.Ab(this.usePositionalSuperko),this.jb=void 0!==n?n:i?.5:6.5,i=i||0,!!this.Bb(i)},e.prototype.ub=function(t){this.kb=this.lb=t},e.prototype.Bb=function(t){if(this.history.length>0)throw new Error("Handicap cannot be changed during a game");if(0===t||"0"===t)return this.ib=null,this.ub(g),!0;var i,n,e;if(""+~~t==""+t)for(e=~~t,i=s.Cb(this.fb.tb,e),this.ib=[],n=0;n<i.length;n++)this.ib.push(d(i[n][0],i[n][1]));else e=t.length,this.ib=t;return this.ib.length||(this.ib=null),this.xb(),this.ub(this.ib?v:g),!(e&&(!this.ib||this.ib.length!==e))||this.zb("Handicap could not be set: "+t)},e.prototype.xb=function(){var t=this.ib;if(t)for(var i=0;i<t.length;i++){var n=f(t[i]);this.fb.Db(n[0],n[1],n[2]||g)}},e.prototype.Eb=function(){return this.ib},e.prototype.Fb=function(){return this.ib?this.ib.length:0},e.prototype.Gb=function(t,i){if(h.error&&h.error(t),!i)throw new Error(t);return i.push(t),!1},e.prototype.vb=function(t,i){if(!t||!t.length)return!0;for(var n=0;n<t.length;n++)if(!this.Hb(t[n]))return this.Gb("Failed playing loaded move #"+(n+1)+":\n"+this.Ib().join(", "),i);return!0},e.prototype.Jb=function(t,i){return!t||this.vb(t.split(","),i)},e.prototype.Hb=function(t){if(this.nb&&t.indexOf("undo")<0)return this.zb("Game already ended");if(/^[B|W]?-?[a-z][1-2]?[0-9]$/.test(t))return this.Kb(t);var i=p(t);if(i.startsWith("pass"))return this.Lb();if(i.startsWith("resi"))return this.Mb(l(t));if("undo"===i)return this.Nb();if("half_undo"===i)return this.Nb(!0);if(i.startsWith("hand")){var n=i.substr(i.indexOf(":")+1);return this.Bb(n.split("-"))}return i.startsWith("load:")?this.Jb(i.slice(5)):this.zb("Invalid command: "+i.substr(0,20))},e.prototype.Kb=function(t){var i=f(t);3===i.length&&(this.kb=i[2]);var n=i[0],e=i[1];return this.fb.Ob(n,e,this.kb)?(this.fb.Db(n,e,this.kb),this.Pb(t),this.Qb(),!0):this.zb("Invalid move: "+t)},e.prototype.Mb=function(t,i){t=void 0!==t?t:this.kb,this.ob=t,this.pb=i;var n=c("resign",t)+(i?"-"+i:"");return this.Pb(n),this.Qb(),this.nb=!0,this.mb=!1,!0},e.prototype.Lb=function(){var t=this.history[this.history.length-1];return t&&t.endsWith("pass")&&(this.mb=!0),this.Pb(c("pass",this.kb)),this.Qb(),!0},e.prototype.Rb=function(t,i){return this.mb?(this.mb=!1,t?(this.nb=!0,!0):(i!==this.kb&&(this.history.pop(),this.Qb()),!0)):this.zb("The game is not ending yet")},e.prototype.Sb=function(){return this.history.length},e.prototype.Tb=function(){var t="";this.ib&&(t="handicap:"+this.ib.join("-")+",");var i=this.history;return i[0]=c(p(i[0]),this.lb),t+i.join(",")},e.prototype.zb=function(t){return this.hb.push(t),!1},e.prototype.Ib=function(){var t=this.hb;return this.hb=[],t},e.prototype.Qb=function(){this.kb=1-this.kb},e.prototype.Pb=function(t){return this.history.push(t)},e.prototype.Nb=function(t){var i=t?1:2;if(this.history.length<i)return this.zb("Nothing to undo");this.nb=this.mb=!1;for(var n=i;n>=1;n--){var e=this.history.pop();!e.endsWith("pass")&&e.indexOf("resi")<0&&this.fb.Ub()}return t&&this.Qb(),!0}},{"../config/rules.json":8,"./Goban":16,"./HandicapSetter":19,"./Move":21,"./constants":50,"./log":71}],12:[function(t,i,n){"use strict";function e(t){this.Vb=t,this.Wb=null,this.Xb=!1,this.ra=null,this.Yb=null,this.Zb=this.$b=null,this._b=new r}var r=t("./GameInfo"),o=t("./GameInVault"),s=t("./ReviewTree"),h=t("./SgfReader"),u=t("./SgfWriter");i.g=e,e.prototype.ac=function(){this.Wb=null,this.Xb=!1,this.ra=new s(this.Vb.Eb()),this.Yb=[],this._b.Ra(),this.bc()},e.prototype.cc=function(){return this.Wb||(this.Wb=new o),this.dc(),this.Wb},e.prototype.ec=function(t,i){return!!this.fc(t.Da(),i)&&(this.Wb=t,!0)},e.prototype.bc=function(){var t=this.Vb;this._b.Wa(t.fb.tb,t.jb,t.yb())},e.prototype.gc=function(){return(!this.Yb||this.Yb.join()!==this.Vb.history.join())&&(this.Yb=this.Vb.history.concat(),this.ra.hc(this.Yb),!0)},e.prototype.dc=function(){if(!this.Xb){var t=this.ra.getBookmark();this.gc(),this.ra.ic(t)}var i=this.Zb=this.Zb||new u,n=i.jc(this._b,this.ra);this.Wb.Ga(n)},e.prototype.kc=function(){return this.Xb=!0,this.gc(),this.ra},e.prototype.lc=function(){this.Xb=!1},e.prototype.fc=function(t,i,n){var e=this.$b=this.$b||new h;return!!e.Aa(t,i,n)&&(this.Vb.sb(e.mc,e.nc(),e.jb),this.Vb.eb(e.Ua("rules"),!0),this._b.Ta(e.oc),this.Wb=null,this.ra=e.Ba(),this.Yb=null,this.Vb.vb(e.pc(),i))},e.prototype.qc=function(t,i){return!!this.Vb.Jb(t,i)&&(this._b.Ra(),this.bc(),!0)}},{"./GameInVault":9,"./GameInfo":10,"./ReviewTree":22,"./SgfReader":24,"./SgfWriter":25}],13:[function(t,i,n){"use strict";function e(t){this.rc=t,this.sc()}var r=t("./GameInVault"),o=t("./GameVaultList"),s=t("./MostRecentlyUsedList");i.g=e,e.prototype.sc=function(){this.tc=new o(this.rc,"myActiveGames"),this.uc=new o(this.rc,"archivedGames"),this.vc=new o(this.rc,"recentGames"),this.wc=new s(this.rc,"mostRecentGames",5),this.tc.xc("myGames")},e.prototype.yc=function(t){return this.tc.zc(t)||null},e.prototype.Ac=function(t){var i=this.wc.getItem(t);return this.vc.zc(i)||null},e.prototype.Bc=function(t){this.Cc(t),this.tc.Dc(t)},e.prototype.Ec=function(t){this.tc.Dc(t)},e.prototype.Fc=function(t){return this.tc.zc(t)},e.prototype.Gc=function(){return this.tc.Hc()};e.Ic={Jc:0,ACTIVE:1,Kc:2,Lc:-1},e.prototype.Mc=function(t){return this.tc.zc(t)?1:this.uc.zc(t)?2:this.Nc(t)?-1:0},e.prototype.Oc=function(t){return this.uc.zc(t)},e.prototype.Pc=function(){return this.uc.Hc()},e.prototype.Qc=function(t){return this.tc.Rc(t)},e.prototype.Sc=function(t){return this.uc.Rc(t)},e.prototype.Nc=function(t){return this.tc.Nc(t)||this.uc.Nc(t)},e.prototype.Tc=function(t){return this.tc.Uc(this.uc,t)},e.prototype.Vc=function(t){return this.uc.Uc(this.tc,t)},e.prototype.Wc=function(t){this.uc.Dc(t)},e.prototype.Xc=function(t,i){var n=new r;if(!n.xa(t,i))return null;var e=this.tc.zc(n.La());return e&&!n.Ca(e,i)?null:n},e.prototype.Yc=function(t){this.rc.Zc("interruptedGame",t.va())},e.prototype.$c=function(){var t=this.rc._c("interruptedGame");if(!t)return null;var i=new r;return i.wa(t)?(this.rc.Zc("interruptedGame",null),i):(console.error("Invalid serialized game"),null)},e.prototype.ad=function(){for(var t=this.wc.bd(),i=[],n=0;n<t.length;n++){var e=this.vc.zc(t[n]);e&&i.push(e.Ka())}return i},e.prototype.Cc=function(t){this.vc.Dc(t);var i=t.La();this.wc.dd(i)&&this.vc.Rc(i)}},{"./GameInVault":9,"./GameVaultList":14,"./MostRecentlyUsedList":20}],14:[function(t,i,n){"use strict";function e(t,i){this.rc=t,this.ed=i,this.fd={},this.gd=null,this.hd={},this.jd()}var r=t("./GameInVault");i.g=e;e.prototype.jd=function(){this.gd=this.rc._c(this.ed,{}),this.hd=this.rc._c(this.ed+"~",{});for(var t in this.gd){var i=new r;i.wa(this.gd[t]),this.fd[t]=i}},e.prototype.xc=function(t){for(var i=this.rc._c(t,[]),n=0;n<i.length;n++){var e=new r(i[n]),o=e.La();this.fd[o]=e,this.gd[o]=e.va()}this.rc.Zc(this.ed,this.gd),this.rc.Zc(t,void 0)},e.prototype.Dc=function(t){var i=t.La();this.fd[i]=t,this.gd[i]=t.va(),this.rc.Zc(this.ed,this.gd),this.hd[i]&&(delete this.hd[i],this.rc.Zc(this.ed+"~",this.hd))},e.prototype.kd=function(t){return!!this.fd[t]&&(delete this.fd[t],delete this.gd[t],this.rc.Zc(this.ed,this.gd),!0)},e.prototype.Rc=function(t){return!!this.kd(t)&&(this.hd[t]=Date.now(),this.rc.Zc(this.ed+"~",this.hd),!0)},e.prototype.Nc=function(t){return this.hd[t]},e.prototype.Hc=function(){var t=[];for(var i in this.fd)t.push(this.fd[i]);return t},e.prototype.zc=function(t){return this.fd[t]},e.prototype.Uc=function(t,i){var n=this.fd[i];return!!n&&(this.kd(i),t.Dc(n),!0)}},{"./GameInVault":9}],15:[function(t,i,n){"use strict";function e(t,i,n){this.ld=t||{},this.md=i||{},this.name=n||"#"+o++}var r=t("./helper"),o=1;i.g=e;e.prototype.clone=function(t){return new e(r.clone(this.ld),r.clone(this.md),t)},e.prototype.nd=function(t){this.md=t},e.prototype.toString=function(){var t="{"+this.name+" - ";for(var i in this.ld)t+=i+":"+this.ld[i].toFixed(2)+", ";return t.od(", ")+"}"},e.prototype.pd=function(t){var i=0;for(var n in this.ld){var e=this.ld[n],r=t.ld[n];r<0!=e<0?r<0?(e-=r,r=0):(r-=e,e=0):(e=Math.abs(e),r=Math.abs(r));var o;o=0===r?e>1?1:e:0===e?r>1?1:r:1-(r>=e?e/r:r/e),i+=o}return i},e.prototype.get=function(t,i,n,e){void 0===n&&(n=null),void 0===e&&(e=null);var r=this.ld[t];if(r)return r;if(this.ld[t]=i,(n||e)&&(this.md[t]=[n,e]),n&&e&&n>e)throw new Error("Limits are invalid: "+n+" > "+e);return i},e.prototype.va=function(){return JSON.stringify(this)},e.qd=function(t){var i=JSON.parse(t);this.ld=i.ld,this.md=i.md},e.prototype.rd=function(t,i,n,e,r){var o=this.ld,s=t.ld;i.nd(this.md),n.nd(this.md);var h=i.ld,u=n.ld,a=~~(Math.random()*o.length),c=~~(Math.random()*a),l=0;for(var p in o)l<c||l>a?(h[p]=o[p],u[p]=s[p]):(h[p]=s[p],u[p]=o[p]),Math.random()<e&&(h[p]=this.sd(p,h[p],r)),Math.random()<e&&(u[p]=this.sd(p,u[p],r)),l++},e.prototype.sd=function(t,i,n){var e,r=this.md[t];if(r){var o=r[0],s=r[1];if(Math.random()<n)e=o+Math.random()*(s-o);else{e=i*(1+2*Math.random()*.05-.05),o&&e<o&&(e=o),s&&e>s&&(e=s)}}else e=i+10*(Math.random()-.5);return e},e.prototype.td=function(){for(var t in this.ld)this.ld[t]=this.sd(t,this.ld[t],1);return this}},{"./helper":51}],16:[function(t,i,n){"use strict";function e(t){if(void 0===t&&(t=19),t!==~~t||t<3)throw new Error("Invalid goban size: "+t);this.tb=t,this.vd=new o(t,u),this.grid=new o(t,s.ud),this.wd=this.grid.xd;var i,n;for(n=t;n>=1;n--)for(i=t;i>=1;i--)this.wd[n][i]=new s(this,i,n,a);for(n=1;n<=t;n++)for(i=1;i<=t;i++)this.wd[n][i].yd();e.zd=new h(this,new s(this,-50,-50,a),-100,0),this.Ad=[e.zd],this.Bd=[e.zd],this.Cd=[],this.Dd=0,this.history=[],this.Ab(!1),this.Ed=0}var r=t("./constants"),o=t("./Grid"),s=t("./Stone"),h=t("./Group"),u=(t("./test"),r.ud),a=r.EMPTY;i.g=e,e.prototype.clear=function(){for(var t=1;t<=this.tb;t++)for(var i=1;i<=this.tb;i++){var n=this.wd[t][i];n.group&&n.group.clear()}this.Ad.shift(),this.Bd.shift(),this.Cd.concat(this.Ad),this.Cd.concat(this.Bd),this.Ad.length=0,this.Bd.length=0,this.Ad.push(e.zd),this.Bd.push(e.zd),this.Dd=0,this.history.length=0,this.Ab(!1),this.Ed=0},e.prototype.Fd=function(t,i){var n=++this.Dd,e=this.Cd.pop();return e?e.Gd(t,i,n):e=new h(this,t,i,n),e},e.prototype.Hd=function(t){t.Id===this.Dd&&this.Dd--,this.Cd.push(t)},e.prototype.Jd=function(){return this.grid.Kd()},e.prototype.Ld=function(t){this.vd.Ld(t);for(var i=this.tb;i>=1;i--)for(var n=1;n<=this.tb;n++){var e=this.vd.xd[i][n];e!==a&&this.Db(n,i,e)}},e.prototype.Md=function(){for(var t={},i=this.tb;i>=1;i--)for(var n=this.tb;n>=1;n--){var e=this.wd[i][n].group;e&&(t[e.Id]=e)}return t},e.prototype.Nd=function(){for(var t,i="Board:\n"+this.toString()+"\nGroups:\n"+this.grid.Od(function(t){return t.group?""+t.group.Id:"."})+"\nStones in groups:\n",n={},e=this.grid.xd,r=0;t=e[r],r<e.length;r++)for(var o,s=t,h=0;o=s[h],h<s.length;h++)o&&o.group&&(n[o.group.Id]=o.group);for(var u=1;u<=this.Dd;u++)n[u]&&(i+=n[u].Nd()+"\n");return i},e.prototype.toString=function(){return this.grid.Od()},e.prototype.Ob=function(t,i,n){if(t<1||t>this.tb||i<1||i>this.tb)return!1;var e=this.wd[i][t];if(e.color!==a)return!1;if(e.Pd(n))return!1;if(this.Qd){if(this.Rd[this.Sd(t,i,n)])return!1}else if(e.Td(n))return!1;return!0},e.prototype.Ud=function(t,i){return this.wd[i][t]},e.prototype.Vd=function(t,i){return this.wd[i][t].color},e.prototype.Wd=function(t,i){return this.wd[i][t].Wd()},e.prototype.Sb=function(){return this.history.length},e.prototype.Db=function(t,i,n){this.Xd(t,i,n);var e=this.wd[i][t];if(e.color!==a)throw new Error("Tried to play on existing stone in "+e);return this.Yd(t,i,n)},e.prototype.Ub=function(){if(!this.history.length)throw new Error("Extra undo");this.history.pop().Zd(),this.Xd()},e.prototype.Yd=function(t,i,n){var e=this.wd[i][t];return e.Pd(n),this.history.push(e),this.Ed++,e.$d(n),e},e.prototype._d=function(){this.history.pop().Zd()},e.prototype.ae=function(){return this.Ad[this.Ad.length-1]},e.prototype.be=function(){return this.history[this.history.length-1]},e.prototype.ce=function(t){t=t||[0,0];for(var i=this.Ad.length-1;i>=0;i--){var n=this.Ad[i];t[n.color]+=n.de.length}return t},e.prototype.Ab=function(t){if(this.history.length>0)throw new Error("Superko rule changed during game");this.Qd=t,t?(this.ee=this.fe(),this.ge=[],this.Rd={}):(this.ee=null,this.ge=this.Rd=null)},e.prototype.Xd=function(t,i,n){this.Qd?t?(this.ge.push(this.ee),this.Rd[this.ee]=this.history.length,this.ee=this.Sd(t,i,n)):(this.ee=this.ge.pop(),this.Rd[this.ee]=null):this.ee=null},e.prototype.Sd=function(t,i,n){for(var e=this.he(this.ee,t,i,n),r=this.Ud(t,i).ie(1-n),o=r.length-1;o>=0;o--)if(!(r[o].je>1))for(var s=r[o].de,h=s.length-1;h>=0;h--){var u=s[h];e=this.he(e,u.ke,u.le,a)}return e},e.prototype.me=function(){return this.Qd?this.ee:(this.ee||(this.ee=this.Jd()),this.ee)};var c="0".charCodeAt();e.prototype.fe=function(){for(var t="",i="",n=this.tb,e=1;e<=n;e++)for(var r=this.wd[e],o=1;o<=n;o++)t+=String.fromCharCode(c+r[o].color+1),4===t.length&&(i+=String.fromCharCode(parseInt(t,3)+33),t="");return t.length&&(t=(t+"000").substr(0,4),i+=String.fromCharCode(parseInt(t,3)+33)),i},e.prototype.he=function(t,i,n,e){var r,o=(n-1)*this.tb+(i-1),s=~~(o/4),h=o%4;if(e===a){var u=("000"+(t.charCodeAt(s)-33).toString(3)).slice(-4),c=u.substr(0,h)+"0"+u.substr(h+1);r=parseInt(c,3)+33}else r=t.charCodeAt(s)+(1<<e)*Math.pow(3,3-h);return t.substr(0,s)+String.fromCharCode(r)+t.substr(s+1)}},{"./Grid":17,"./Group":18,"./Stone":26,"./constants":50,"./test":76}],17:[function(t,i,n){"use strict";function e(t,i,n){if(void 0===i)throw new Error("Grid init value must be defined");this.tb=t,void 0===n?this.xd=u.oe(t+2,t+2,i):(this.xd=u.oe(t+2,t+2,n),this.init(i))}function r(t){if(t===l)return"(BORDER)";if(t>=e.we)return String.fromCharCode("A".charCodeAt()+t-e.we);if(t<e.ye||t>=e.ue.length)throw new Error("Invalid color "+t);return t<0&&(t+=e.ue.length),e.ue[t]}function o(t){return r("number"==typeof t?t:t.color)}function s(t){for(var i="",n=t.length-1;n>=0;n--)i+=t[n];return i}var h=t("./constants"),u=t("./helper"),a=t("./Move"),c=a.ne,l=h.ud;i.g=e,e.pe="+",e.qe="?",e.re="@O",e.se="&#",e.te="-:",e.ue=e.re+e.se+e.te+e.qe+e.pe,e.ve=e.qe+e.pe+e.ue,e.we=100,e.xe=-1,e.ye=-2,e.ze=2,e.Ae=4,e.Be=[0,0,-1,1,1,-1,-1,1],e.Ce="-'?.:",e.prototype.init=function(t){if(void 0===t)throw new Error("Grid init value must be defined");for(var i=this.tb;i>=1;i--)for(var n=this.xd[i],e=this.tb;e>=1;e--)n[e]=t},e.prototype.K=function(t){if(t.tb!==this.tb)throw new Error("Cannot copy between different sized grids");for(var i=this.tb;i>=1;i--)for(var n=this.xd[i],e=t.xd[i],r=this.tb;r>=1;r--)n[r]=e[r];return this},e.prototype.De=function(t){var i=t.grid;if(i.tb!==this.tb)throw new Error("Cannot copy between different sized grids");for(var n=this.tb;n>=1;n--)for(var e=this.xd[n],r=i.xd[n],o=this.tb;o>=1;o--)e[o]=r[o].color;return this},e.Ee=function(t){return e.ve.indexOf(t)+e.ye},e.prototype.Od=function(t){return this.Fe(!0,"\n",t||o)},e.prototype.Kd=function(t){return this.Fe(!1,",",t||o)},e.prototype.Fe=function(t,i,n){var r,o,s,h=new e(this.tb,"").xd,u=1;for(o=this.tb;o>=1;o--)for(r=1;r<=this.tb;r++)null!==(s=n(this.xd[o][r]))&&(h[o][r]=s,u=Math.max(u,s.length));var a=u,l="          ",p="";for(o=this.tb;o>=1;o--){for(t&&(p+="%2d".format(o)+" "),r=1;r<=this.tb;r++)s=h[o][r],s.length<a&&(s=l.substr(1,a-s.length)+s),p+=s;p+=i}if(t){for(p+="   ",r=1;r<=this.tb;r++)p+=l.substr(1,a-1)+c(r);p+="\n"}return"\n"!==i&&(p=p.Ge()),p},e.prototype.toString=function(){for(var t="",i=this.tb;i>=1;i--){for(var n=1;n<=this.tb;n++)t+=r(this.xd[i][n]);t+="\n"}return t},e.prototype.Jd=function(){return"object"==typeof this.xd[1][1]?this.Kd(function(t){return r(t.color)}):this.Kd(function(t){return r(t)})},e.prototype.Ld=function(t){
var i=t.split(/\"|,/);if(i.length!==this.tb)throw new Error("Invalid image: "+i.length+" rows instead of "+this.tb);for(var n=this.tb;n>=1;n--){var r=i[this.tb-n];if(r.length!==this.tb)throw new Error("Invalid image: row "+r);for(var o=1;o<=this.tb;o++)this.xd[n][o]=e.Ee(r[o-1])}},e.He=function(t){return t.split(",").reverse().join()},e.Ie=function(t){return t.split(",").map(s).join()},e.Je=function(t){return s(t)},e.Ke=function(t){for(var i="",n=t.split(","),e=n[0].length-1;e>=0;e--){i+=",";for(var r=0;r<n.length;r++)i+=n[r][e]}return i.substr(1)}},{"./Move":21,"./constants":50,"./helper":51}],18:[function(t,i,n){"use strict";function e(t,i,n,e){this.fb=t,this.de=[i],this.je=n,this.color=i.color,this.Me=null,this.Ne=null,this.Oe=null,this.Id=e,this.Pe=null,this.Qe=this.Re=0}var r=t("./constants"),o=t("./log"),s=t("./Move"),h=s.Le,u=r.EMPTY;i.g=e,e.prototype.Gd=function(t,i,n){this.de.length=0,this.de.push(t),this.je=i,this.color=t.color,this.Me=this.Ne=this.Oe=null,this.Id=n,this.Qe=this.Re=0},e.prototype.clear=function(){for(var t=this.de.length-1;t>=0;t--)this.de[t].clear();this.fb.Hd(this)},e.prototype.toString=function(t){if(0===t)return"#"+this.Id;if(1===t)return this.de[0]+" x"+this.de.length;for(var i,n="{group #"+this.Id+" of "+this.de.length+" "+h(this.color)+" stones [",e=this.de,r=0;i=e[r],r<e.length;r++)n+=i.Se()+",";return n=n.Ge(),n+="], lives:"+this.je,this.Me&&(n+=" MERGED with #"+this.Me.Id),this.Oe&&(n+=" KILLED by "+this.Oe.Se()),n+="}"},e.prototype.Te=function(){return this.de.length&&this.de[0].group===this},e.prototype.Nd=function(){return this.toString()},e.prototype.Ue=function(){return this.de.map(function(t){return t.Se()}).sort().join(",")},e.prototype.Ve=function(){for(var t,i=[],n=this.de,e=0;t=n[e],e<n.length;e++)for(var r,o=t.We,s=0;r=o[s],s<o.length;s++)r.color===u&&i.indexOf(r)<0&&i.push(r);if(i.length!==this.je)throw new Error("Wrong life count for group");return i},e.prototype.Xe=function(){for(var t,i=[],n=1-this.color,e=this.de,r=0;t=e[r],r<e.length;r++)for(var s,h=t.We,u=0;s=h[u],u<h.length;u++)s.color===n&&i.indexOf(s.group)<0&&i.push(s.group);return o.Ye&&i.length,i},e.prototype.Ze=function(t){for(var i,n=-1,e=t.We,r=0;i=e[r],r<e.length;r++)if(i.color===u){n++;for(var s,h=i.We,a=0;s=h[a],a<h.length;a++)if(s.group===this&&s!==t){n--;break}}return o.Ye,n},e.prototype.$e=function(t){if(o.Ye,this.de.push(t),this.je+=this.Ze(t),this.je<0)throw new Error("Unexpected error (lives<0 on connect)");o.Ye},e.prototype._e=function(t){if(o.Ye,this.de.length>1){if(this.je-=this.Ze(t),this.je<0)throw new Error("Lives<0 on disconnect")}else this.fb.Hd(this),o.Ye;if(this.de.pop()!==t)throw new Error("Unexpected error (disconnect order)")},e.prototype.af=function(t){if(--this.je<=0)return this.bf(t)},e.prototype.cf=function(t){if(this.je--,o.Ye,this.je<1)throw new Error("Unexpected error (lives<1 on attack by resucitated)")},e.prototype.df=function(t){this.je++,o.Ye},e.prototype.ef=function(t,i){if(t.Me===this||t===this||this.color!==t.color)throw new Error("Invalid merge");o.Ye,this.je+=t.de.length;for(var n,e=t.de,r=0;n=e[r],r<e.length;r++)n.ff(this),this.$e(n);t.Me=this,t.Ne=i,this.fb.Bd.push(t),o.Ye},e.prototype.gf=function(t){o.Ye;for(var i,n=t.de,e=n.length-1;i=n[e],e>=0;e--)this._e(i),i.ff(t);this.je-=t.de.length,t.Ne=t.Me=null,o.Ye},e.prototype.hf=function(t){for(var i=this.fb.Bd,n=i.length-1;n>=0;n--){var e=i[n];if(e.Ne!==t||e.Me!==this)break;this.gf(e),i.pop()}},e.prototype.bf=function(t){if(o.Ye,this.je<0)throw new Error("Unexpected error (lives<0)");for(var i,n=this.de,e=0;i=n[e],e<n.length;e++){for(var r,s=i.ie(1-this.color),h=0;r=s[h],h<s.length;h++)r.df(i);i.jf()}this.Oe=t,this.fb.Ad.push(this),o.Ye},e.prototype.kf=function(){this.Oe=null,this.je=1;for(var t,i=this.de,n=0;t=i[n],n<i.length;n++){t.lf(this);for(var e,r=t.ie(1-this.color),o=0;e=r[o],o<r.length;o++)e.cf(t)}},e.mf=function(t){for(var i=t.fb.Ad,n=i.length-1;n>=0;n--){var e=i[n];if(e.Oe!==t)break;i.pop(),o.Ye,e.kf()}}},{"./Move":21,"./constants":50,"./log":71}],19:[function(t,i,n){"use strict";function e(){}i.g=new e,e.prototype.Cb=function(t,i){if(i>4&&(t<9||t%2==0)&&(i=4),t<=5)return[];for(var n=t<13?2:3,e=1+n,r=(1+t)/2,o=t-n,s=[],h=0;h<i;h++){switch(i%2==1&&i>4&&h===i-1&&(h=8),h){case 0:var u=e,a=e;break;case 1:u=o,a=o;break;case 2:u=e,a=o;break;case 3:u=o,a=e;break;case 4:u=e,a=r;break;case 5:u=o,a=r;break;case 6:u=r,a=e;break;case 7:u=r,a=o;break;case 8:u=r,a=r}s.push([u,a])}return s}},{}],20:[function(t,i,n){"use strict";function e(t,i,n){this.rc=t,this.ed=i,this.nf=n,this.pf=t._c(i,[])}i.g=e,e.prototype.dd=function(t){var i,n=this.pf.indexOf(t);if(0!==n)return n<0?(this.pf.unshift(t),this.pf.length>this.nf&&(i=this.pf.splice(this.nf))):(this.pf.splice(n,1),this.pf.unshift(t)),this.rc.Zc(this.ed,this.pf),i},e.prototype.getItem=function(t){return this.pf[t]},e.prototype.bd=function(){return this.pf}},{}],21:[function(t,i,n){"use strict";function e(t){switch(t[0]){case"B":return h;case"W":return u;default:return}}function r(t){return"B"!==t[0]&&"W"!==t[0]?t:"-"!==t[1]?t.substr(1):t.substr(2)}function o(t,i){var n=a.indexOf(t[0])+1,e=parseInt(t.substr(1,2));if(!n||isNaN(e)){if(i)return null;throw new Error("Illegal move parsed: "+t)}return[n,e]}var s=t("./constants"),h=s.ab,u=s.bb,a="abcdefghjklmnopqrstuvwxyz",c=["black","white"];n.Ya=e,n.Za=r,n.Xa=function(t,i){return(i===h?"B-":"W-")+t},n.Le=function(t){return c[t]},n.qf=o,n.$a=function(t){var i=e(t);void 0!==i&&(t=r(t));var n=o(t,!0);if(!n){if("pass"===t||t.startsWith("resi"))return null;throw new Error("Illegal move parsed: "+t)}return void 0!==i?n.concat(i):n},n._a=function(t,i){return a[t-1]+i},n.ne=function(t){return a[t-1]}},{"./constants":50}],22:[function(t,i,n){"use strict";function e(t){this.root=new r(null,[]),this.rf=-1,this.sf=this.root,this.tf=-1,this.uf(t)}function r(t,i,n){this.vf=t,this.wf=t?t.wf+t.xf.length:0,this.xf=i,this.oc=n||[],this.children=null,this.yf=null,this.zf=!1}function o(t,i){return u(t)===u(i)}var s=t("./constants"),h=t("./Move"),u=h.Za,a=s.ab,c=s.bb;i.g=e,r.prototype.Af=function(){return[this.xf,this.oc]},r.prototype.Bf=function(t){for(var i=0;i<this.children.length;i++)if(o(t,this.children[i].xf[0]))return this.children[i];return null},r.prototype.Cf=function(t){var i=new r(this,[t]);return this.children.push(i),i},r.prototype.Df=function(){this.children||(this.children=[],this.Cf(""))},r.prototype.Ef=function(){this.children.unshift(new r(this,[""]))},r.prototype.Ff=function(){return""===this.xf[0]},r.prototype.Gf=function(){if(!this.children)return null;var t=this.children[0];return t.Ff()?null:t},r.prototype.Hf=function(){if(this.yf)return this.yf;if(!this.children)return null;var t=this.children[0];return t.Ff()&&(t=this.children[1]),t||null},r.prototype.If=function(t){var i=this.children;i.splice(i.indexOf(t),1),i.length||(this.children=null),this.yf===t&&(this.yf=null)},r.prototype.Jf=function(t,i){var n=this.xf.splice(t),e=this.oc.splice(t);if(!n.length)throw new Error("Invalid split at end");var o=new r(this,n,e);o.zf=i,o.yf=this.yf;var s=o.children=this.children;if(s)for(var h=0;h<s.length;h++)s[h].vf=o;this.children=[o]},r.prototype.Kf=function(t,i){var n;if(t===this.xf.length){if(!this.children)throw new Error("Unexpected fork");n=this.Bf(i)||this.Cf(i)}else this.Jf(t,this.zf),n=new r(this,[i]),this.children.push(n);return this.yf=n,n},r.prototype.Lf=function(){for(var t=this;t;)t.zf=!1,t=t.Gf()},r.prototype.Mf=function(){this.zf=!0;var t=this.vf.children;t[0]!==this&&(t.splice(t.indexOf(this),1),t[0].Ff()?t[0]=this:t.unshift(this))},r.prototype.Nf=function(t){t+1!==this.xf.length?(this.Jf(t+1,!1),this.Ef()):this.children&&!this.children[0].Ff()&&this.Ef()},e.prototype.uf=function(t){if(t&&!t.length)throw new Error("empty setupMoves array");this.Of=t,this.lb=t?c:a},e.prototype.nc=function(){return this.Of},e.prototype.Pf=function(){return this.root},e.prototype.Qf=function(){return this.tf<0?null:this.sf.xf[this.tf]},e.prototype.Rf=function(){return this.sf.wf+this.tf},e.prototype.Sf=function(){return this.sf.zf},e.prototype.getBookmark=function(){return[this.sf,this.tf]},e.prototype.ic=function(t){this.sf=t[0],this.tf=t[1]},e.prototype.Tf=function(){this.sf=this.root,this.tf=-1},e.prototype.Uf=function(){return this.sf.oc[this.tf]},e.prototype.Vf=function(t){if(t){var i=this.sf.oc[this.tf];i||(i=this.sf.oc[this.tf]={});for(var n in t)i[n]=t[n]}},e.prototype.Wf=function(t){return t.wf%2==0?this.lb:1-this.lb},e.prototype.Xf=function(t){var i=this.sf;if(++this.tf===i.xf.length){if(!i.children)return i.xf.push(t)}else if(o(t,i.xf[this.tf]))return;this.sf=i.Kf(this.tf,t),this.tf=0},e.prototype.Yf=function(t){var i=this.sf;this.tf===i.xf.length-1&&i.zf&&i.Df(),this.Xf(t)},e.prototype.Zf=function(){this.sf.Df()},e.prototype.$f=function(){if(this.tf>0)this.tf--;else if(this.sf!==this.root)this.sf=this.sf.vf,this.tf=this.sf.xf.length-1;else{if(this.tf===-1)return!1;this.tf=-1}return!0},e.prototype._f=function(t){var i=this.sf;if(this.tf===i.xf.length-1){if(!(i=t?i.Gf():i.Hf()))return null;this.sf=i,this.tf=0}else this.tf++;return this.sf.xf[this.tf]},e.prototype.ag=function(){return this._f()},e.prototype.bg=function(){return this._f(!0)},e.prototype.cg=function(){var t=this.sf,i=this.tf,n=this._f();return this.sf=t,this.tf=i,n},e.prototype.dg=function(){var t=this.sf;if(this.tf<t.xf.length-1)return null;var i=t.children;if(!i)return null;if(1===i.length)return null;var n=[];t.zf||""===i[0].xf[0]||n.push("");for(var e=0;e<i.length;e++)n.push(i[e].xf[0]);return n},e.prototype.hc=function(t){this.root.Lf(),this.rf=t.length,this.root.zf=!0,this.sf=this.root,this.tf=-1;for(var i=this.sf,n=0;n<t.length;n++)this.Xf(t[n]),this.sf!==i&&(i=this.sf,i.Mf());i.Nf(this.tf)},e.prototype.eg=function(){for(var t=[],i=this.root;;){i.zf=!0;for(var n=0;n<i.xf.length;n++)t.push(i.xf[n]);if(!i.children)break;i=i.children[0]}return i.Ff()?(t.pop(),this.sf=i.vf,this.sf.If(i)):this.sf=i,this.tf=this.sf.xf.length-1,this.rf=t.length,t},e.prototype.fg=function(){return this.rf},e.prototype.gg=function(t){if(this.tf!==this.sf.xf.length-1)return!1;var i=this.sf.Bf(t);return!(!i||i.zf)&&(this.sf.If(i),!0)},e.prototype.Ca=function(t){for(var i=this.eg(),n=t.eg(),e=Math.min(i.length,n.length),r=!1,o=0;o<e;o++)if(i[o]!==n[o]){r=!0;break}n.length>e&&!r&&this.hc(n);var s=this.getBookmark();this.Tf(),t.Tf(),this.hg(t),this.ic(s)},e.prototype.hg=function(t){for(var i;!(i=t.dg());){var n=t._f();if(!n)return;this.Yf(n),this.Vf(t.Uf())}for(var e=this.getBookmark(),r=t.getBookmark(),o=0;o<i.length;o++)this.Yf(i[o]),t.Yf(i[o]),this.hg(t),this.ic(e),t.ic(r)}},{"./Move":21,"./constants":50}],23:[function(t,i,n){"use strict";function e(t){this.Vb=t,this.ig=new s.kg.jg(t)}function r(t){return 0===t?"Tie game":a(t>0?c:l)+" wins by "+o(Math.abs(t))}function o(t){return 1!==t?t+" points":"1 point"}var s=t("./ai"),h=t("./constants"),u=t("./Move"),a=u.Le,c=h.ab,l=h.bb;i.g=e,e.prototype.lg=function(){var t=this.mg()[0];return t[c]-t[l]},e.prototype.ng=function(){return this.og(this.mg())},e.prototype.pg=function(){return this.mg()},e.prototype.qg=function(){return this.ig.qg()},e.prototype.mg=function(){var t=this.Vb;return null!==t.ob?["resi",1-t.ob,t.pb]:(this.ig.rg(t.fb),this.ig.sg())},e.prototype.og=function(t){if("resi"===t[0]){var i,n=a(t[1]),e=a(1-t[1]);switch(t[2]){case"time":i=e+" ran out of time";break;case null:case void 0:i=e+" resigned";break;default:i=e+" disqualified: "+t[2]}return[n+" won ("+i+")"]}if(!t||2!==t.length)throw new Error("Invalid score info: "+t);var s=t[0],h=t[1];if(s.length!==h.length)throw new Error("Invalid score info");var u=[],p=s[c]-s[l];u.push(r(p));for(var f=c;f<=l;f++){var d=h[f],g=d[0],v=d[1],y=d[2],b=0!==v?" "+(v<0?"-":"+")+" "+Math.abs(v)+" prisoners":"",m=y>0?" + "+y+" komi":"",w=v||y?" ("+g+b+m+")":"";u.push(a(f)+": "+o(s[f])+w)}return u}},{"./Move":21,"./ai":49,"./constants":50}],24:[function(t,i,n){"use strict";function e(){y||s(),this.text=null,this.tg=null,this.mc=this.jb=0,this.Of=this.Yb=this.xf=null,this.ug=null,this.ra=null,this.oc=null,this.kb=p,this.vg=!1}function r(t,i,n){g[t]=[i,n],v[n]=t}function o(t,i){y[t]=i}function s(){g={},v={},y={},r("GM","int",null),r("FF","int","fileFormat"),r("SZ","int","boardSize"),r("AB","move",null),r("AW","move",null),r("HA","int","handicap"),r("KM","real","komi"),r("RU","text","rules"),r("RE","text","result"),r("PB","text","playerBlack"),r("PW","text","playerWhite"),r("BS","int","blackSpecies"),r("WS","int","whiteSpecies"),r("LT","flag","enforceLosingOnTime"),r("SO","text","source"),r("ID","text","gameId"),r("AP","text","application"),r("BR","text","blackRank"),r("WR","text","whiteRank"),r("BT","text","blackTeam"),r("WT","text","whiteTeam"),r("TM","text","timeLimit"),r("OT","text","overtimeMethod"),r("EV","text","event"),r("RO","text","round"),r("DT","text","date"),r("PC","text","place"),r("GN","text","gameName"),r("ON","text","openingPlayed"),r("GC","text","gameComment"),r("C","text","comment"),r("N","text","nodeName"),r("US","text","userName"),r("AN","text","analyseAuthor"),r("CP","text","copyright"),r("CA","text","characterSet"),r("ST","text","variationStyle"),o("B","move"),o("W","move"),o("AB","move"),o("AW","move"),o("BL",null),o("WL",null),o("C","text"),o("CR",null),o("BM",null),o("N",null)}function h(t){if(t.Bg("a","z"))return t.charCodeAt()-97;if(t.Bg("A","Z"))return t.charCodeAt()-39;throw new Error("Invalid coordinate value: "+t)}function u(t){for(var i=0;;){var n=t.indexOf("]",i);if(n===-1)return-1;if("\\"!==t[n-1])return n;i=n+1}}var a=t("./constants"),c=t("./log"),l=t("./ReviewTree"),p=a.ab,f=a.bb,d=["B","W"],g=null,v=null,y=null;i.g=e,e.wg=function(){return y||s(),v},e.ya=function(t){var i=t.trim();return"("===i[0]&&";"===i.substr(1).trim()[0]},e.prototype.xg=function(t,i){if(!e.ya(t))throw new Error("Not an SGF file");this.yg(t),this.zg(),this.Ag(i)},e.prototype.Aa=function(t,i,n){try{return this.xg(t,n),!0}catch(t){var e="Failed loading SGF moves:\n"+t;if(!i)throw new Error(e);return i.push(e),!1}},e.prototype.nc=function(){return this.Of},e.prototype.pc=function(){return this.Yb},e.prototype.Ba=function(){return this.ra},e.prototype.Ua=function(t,i){var n=this.oc[t];return void 0!==n?n:i};e.prototype.Cg=function(t){if(this.mc)throw new Error("SZ set twice");this.mc=t},e.prototype.Dg=function(t){if(!this.mc)throw new Error("Move seen before SZ is known");return""===t||"tt"===t&&this.mc<=19?"pass":"abcdefghjklmnopqrstuvwxyz"[h(t[0])]+(this.mc-h(t[1]))},e.prototype.Xf=function(t,i,n){if(!this.vg&&n)t!==this.kb&&(i=d[t]+i),this.kb=t,this.Of.push(i);else{if(this.vg){if(t!==this.kb)throw new Error("Bad move color: "+d[t]+i)}else this.vg=!0,i=d[t]+i;this.kb=1-t,this.xf.push(i)}},e.prototype.Eg=function(t){var i=this.xf.length-1;this.ug[i]=(this.ug[i]||"")+t},e.prototype.Fg=function(t,i){switch(i){case"text":return t;case"int":return parseInt(t);case"real":return parseFloat(t);case"flag":return!0;case"move":return this.Dg(t);default:throw new Error("Invalid tag type: "+i)}},e.prototype.Gg=function(t,i){var n=y[t];if(void 0===n)return c.warn&&c.warn("Unknown property "+t+"["+i+"] ignored");if(n){var e=this.Fg(i,n);switch(t){case"B":return this.Xf(p,e);case"W":return this.Xf(f,e);case"AB":return this.Xf(p,e,!0);case"AW":return this.Xf(f,e,!0);case"C":return this.Eg(i)}}},e.prototype.Ag=function(t){this.ra=new l,this.Hg(this.tg,1),this.Of.length||(this.Of=null),this.ra.uf(this.Of),this.Yb=this.ra.eg(),void 0!==t&&(this.Yb=this.Yb.slice(0,t))},e.prototype.Hg=function(t,i){for(var n=i;n<t.length;n++){var e=t[n];if("seq"!==e[0]){this.xf=[],this.ug=[];for(var r=0;r<e.length;r+=2){var o=e[r]||o,s=e[r+1];this.Gg(o,s)}for(var h=0;h<this.xf.length;h++)this.ra.Yf(this.xf[h]),this.ug[h]&&this.ra.Vf({Ig:this.ug[h]})}else{if(!e[1].length){this.ra.Zf();continue}var u=this.ra.getBookmark(),a=this.kb;this.Hg(e,1),this.kb=a,this.ra.ic(u)}}},e.prototype.Jg=function(t,i){var n=g[t];if(void 0===n)return this.oc[t]=i,c.Kg("Unknown property in SGF header: "+t+"["+i+"]");var e=n[0],r=n[1],o=this.Fg(i,e);return r&&(this.oc[r]=o),o},e.prototype.zg=function(){this.mc=this.jb=0,this.oc={},this.Of=[],this.kb=p,this.vg=!1;for(var t=this.tg[0],i=0;i<=t.length-1;i+=2){var n=t[i],e=t[i+1],r=this.Jg(n,e);switch(n){case"GM":if(1!==r)throw new Error("SGF game is not a GO game");break;case"FF":(r<3||r>4)&&c.warn&&c.warn("SGF format "+r+". Not sure we handle it well.");break;case"SZ":this.Cg(r);break;case"KM":this.jb=r;break;case"AB":this.Xf(p,r,!0);break;case"AW":this.Xf(f,r,!0)}}},e.prototype.yg=function(t){this.text=t,this.tg=[],t=this.Lg(t),""!==(t=this.Mg(t))&&this.Ng("Trailing text ignored",t)},e.prototype.Mg=function(t){for(t=this.Og("(",t),t=this.Lg(t);";"===t[0];)t=this.Pg(t);for(;"("===t[0];){var i=this.tg;this.tg=["seq"],t=this.Mg(t),i.push(this.tg),this.tg=i}return t=this.Og(")",t),t=this.Lg(t)},e.prototype.Pg=function(t){t=this.Og(";",t);for(var i=[];;){for(var n=0;t[n]&&t[n].Bg("A","Z");)n++;var e=t.substr(0,n);if(""===e)break;for(i.push(e),t=this.Og(e,t);;){t=this.Og("[",t);var r=u(t);r<0&&this.Ng("Missing ']'",t);var o=t.substr(0,r);if(i.push(o),t=this.Og(o+"]",t),"["!==t[0])break;i.push(null)}}return this.tg.push(i),t=this.Lg(t)},e.prototype.Lg=function(t){return t.trim()},e.prototype.Og=function(t,i){return i.startsWith(t)||this.Ng(t+" expected",i),i.replace(t,"").trim()},e.prototype.Ng=function(t,i){throw new Error("Syntax error: '"+t+"' at ..."+i.substr(0,20)+"...")}},{"./ReviewTree":22,"./constants":50,"./log":71}],25:[function(t,i,n){"use strict";function e(){this.ra=null,this.tb=0,this.Qg="",this.Rg="",l||r()}function r(){l={};for(var t=0;t<p.length;t++){var i=p[t];l[i]=!0}for(t=0;t<f.length;t++)l[f[t]]=!0}function o(t,i){return void 0===i||null===i?"":t+"["+i+"]"}var s=t("./constants"),h=t("./Move"),u=t("./SgfReader"),a=h.$a,c=s.ab,l=null,p=["playerWhite","playerBlack","source","event","place","boardSize","komi","rules","date"],f=["fileFormat","handicap"];i.g=e,e.prototype.Sg=function(t,i){this.tb=t.Ua("boardSize");for(var n=u.wg(),e=t.Va(),r="",s=0;s<p.length;s++){var h=p[s];r+=o(n[h],e[h])}for(var a in e)l[a]||(r+=o(n[a],e[a]));return r+=this.Tg(i)},e.prototype.Tg=function(t){if(!t)return"";this.Qg="A",this.Rg="B";for(var i=o("HA",t.length),n=0;n<t.length;n++)i+=this.Ug(t[n]);return i},e.prototype.Ug=function(t){if(""===t)return"";var i,n=this.Qg,e=this.Rg,r=a(t);if(r)void 0!==r[2]&&(e=r[2]===c?"B":"W"),i=String.fromCharCode(96+r[0])+String.fromCharCode(97+this.tb-r[1]);else{if(!t.endsWith("pass"))return null;i=""}return""===n&&(this.Rg="W"===e?"B":"W"),n+e+"["+i+"]"},e.prototype.Vg=function(t,i){for(var n="",e=0;e<t.length;e++){var r=this.Ug(t[e]);if(null===r)break;n+=";"+r,i[e]&&i[e].Ig&&(n+="C["+i[e].Ig+"]")}return n},e.prototype.Wg=function(t){this.Rg=this.ra.Wf(t)===c?"B":"W";var i=t.Af(),n=this.Vg(i[0],i[1]);if(t.children)for(var e=0;e<t.children.length;e++)n+="("+this.Wg(t.children[e])+")";return n},e.prototype.jc=function(t,i){this.ra=i;var n="(;FF[4]GM[1]"+this.Sg(t,i.nc());return this.Qg="",(n+=this.Wg(i.Pf()))+")"}},{"./Move":21,"./SgfReader":24,"./constants":50}],26:[function(t,i,n){"use strict";function e(t,i,n,e){this.fb=t,this.ke=i,this.le=n,this.color=e,this.group=null,this.We=[],this.Zg=[]}var r=t("./constants"),o=t("./Group"),s=t("./Move"),h=s._a,u=r.EMPTY,a=r.ud,c=r.Xg,l=r.Yg;i.g=e,e.ud=new e(null,-1,-1,a);var p=e.$g=[[0,1],[1,0],[0,-1],[-1,0]],f=e._g=[[1,1],[1,-1],[-1,-1],[-1,1]];e.prototype.clear=function(){this.color=u,this.group=null},e.prototype.yd=function(){for(var t=this.fb.wd,i=l;i>=c;i--){var n=t[this.le+p[i][1]][this.ke+p[i][0]];n.color===u&&this.We.push(n),this.Zg.push(n),n=t[this.le+f[i][1]][this.ke+f[i][0]],this.Zg.push(n)}},e.prototype.toString=function(){return this.color===u?this.Se():(this.color?"W":"B")+"-"+this.Se()},e.prototype.Se=function(){return h(this.ke,this.le)},e.prototype.ah=function(){return this.bh().map(function(t){return t.Se()}).sort().join(",")},e.prototype.Wd=function(){return this.color===u},e.prototype.dh=function(){return 2===this.We.length},e.prototype.eh=function(){var t=this.fb,i=t.tb-1;return t.Ud(1===this.ke?2:i,1===this.le?2:i)},e.prototype.fh=function(){return this.We.length<=3},e.prototype.gh=function(){var t=this.fb.tb,i=this.ke,n=this.le;return Math.min(Math.min(i-1,t-i),Math.min(n-1,t-n))},e.prototype.Pd=function(t){for(var i=this.We.length-1;i>=0;i--){var n=this.We[i];if(n.color===u)return!1;if(n.color!==t){if(1===n.group.je)return!1}else if(n.group.je>1)return!1}return!0},e.prototype.Td=function(t){for(var i=null,n=this.We.length-1;n>=0;n--){var e=this.We[n].group;if(e&&e.color===1-t&&1===e.je){if(i)return!1;i=e}}if(!i)return!1;if(1!==i.de.length)return!1;var r=i.de[0];if(this.fb.be()!==r)return!1;var o=this.fb.ae();if(!o||o.Oe!==r||1!==o.de.length)return!1;var s=o.de[0];return s.ke===this.ke&&s.le===this.le},e.prototype.jf=function(){this.color=u,this.group=null},e.prototype.lf=function(t){this.group=t,this.color=t.color},e.prototype.$d=function(t){this.color=t;var i=this.ie(t);0===i.length?this.group=this.fb.Fd(this,this.hh()):(this.group=i[0],this.group.$e(this));for(var n=this.ie(1-t),e=n.length-1;e>=0;e--)n[e].af(this);for(var r=1;r<i.length;r++)this.group.ef(i[r],this)},e.prototype.Zd=function(){this.group.hf(this),this.group._e(this);for(var t=this.ie(1-this.color),i=t.length-1;i>=0;i--)t[i].df(this);this.group=null,this.color=u,o.mf(this)},e.prototype.ff=function(t){this.group=t},e.prototype.ie=function(t){for(var i=[],n=this.We,e=n.length-1;e>=0;e--){var r=n[e];r.color===t&&i.indexOf(r.group)<0&&i.push(r.group)}return i},e.prototype.bh=function(){for(var t=[],i=this.We,n=i.length-1;n>=0;n--){var e=i[n];e.color===u&&t.push(e)}return t},e.prototype.hh=function(){for(var t=0,i=this.We,n=i.length-1;n>=0;n--)i[n].color===u&&t++;return t},e.prototype.ih=function(t,i){for(var n=0,e=this.We,r=e.length-1;r>=0;r--)e[r].color===t&&(i&&i.push(e[r]),n++);return n},e.prototype.jh=function(t){for(var i=this.We,n=i.length-1;n>=0;n--)if(i[n].group===t)return!0;return!1}},{"./Group":18,"./Move":21,"./constants":50}],27:[function(t,i,n){"use strict";function e(t){s.call(this,t)}var r=t("../../constants"),o=t("./DiamondZone"),s=t("./Heuristic"),h=t("util").inherits,u=t("../../log"),a=t("../../Move"),c=(t("../../test"),a.Le),l=r.EMPTY,p=r.ud,f=r.kh,d=r.lh,g=r.mh,v=r.nh,y=r.oh,b=r.ph,m=r.qh,w=r.rh,x=r.sh,k=r.th,j=r.uh,M=r.vh;h(e,s),i.g=e,e.prototype.wh=function(t,i,n){var e=this.fb.Ud(t,i);if(this.xh[i][t]<0)return 0;var r,o=1-n;if(this.yh(e,n)&&this.yh(e,o)){var s=[];r=[],1!==this.zh(e,o,s,r)||r.length||this.Bh.Ah(s,e,e,o)}var h=[];switch(r=[],this.zh(e,n,h,r)){case 0:return this.Ch(e,n,h);case 1:this.Bh.Ah(h,e,e,n);for(var u=r.length-1;u>=0;u--)this.Bh.Ah(h,e,r[u],n);return 0;default:return 0}},e.prototype.zh=function(t,i,n,e){for(var r=1-i,s=0,h=0,u=0,a=!1,c=0;c<8;c++){var S=c%2,z=t.Zg[c];switch(z.color){case p:case l:continue;case i:var q=z.group;S?h++:(s++,1===q.je&&(a=!0)),n.indexOf(q)<0&&n.push(q);break;default:if(1===z.group.je)break;S||u++}}if(n.length<2)return-1;if(4===s)return a?1:0;var B=new o(t,i),D=B.Dh;B.normalize();var A,T,C;if(t.fh()){if(t.dh())return 0;if(3===s)return a?1:0;if(2===s){if(a)return 1;if(D[d].color!==i){if(B.Eh("2n","?.?o*o---"),!u)return 0}else{if(B.Eh("2n","?o..*o---"),D[m].color===l)return 0;if(!u)return 0;if(D[v].group.je<=3)return 0}}else if(1===s){if(B.Eh("1n","B.?.*A---"),!u)return 0;if(D[d].color===l){if(D[v].group.je<4)return 0;if(C=D[m],C.color===i)return 0;C.color===l&&(e.push(C),e.push(D[d]))}}else{if(B.Eh("02","B.A.*.---"),!u)return 0;if(D[d].color===l)return 0;if(u>1)return-1;if(1===D[b].group.je||1===D[m].group.je)return-1}return 1}if(3===s){if(a)return 1;if(!u)return 0;if(B.Eh("3n","?x?o*o?o?"),3===n.length)return 1;if(n.length,D[v].group===D[g].group){if(B.Eh("3n","?x?A*B?A."),D[x].color===l)return 0}else if(D[w].color===l)return 0;return 1}if(2===s){if(D[y].group===D[g].group)return B.Eh("2n","B.?.*A?A?"),u||D[w].color===r&&D[m].color===r?1:0;if(D[d].color===i){if(B.Eh("2n","?B?.*.?A?"),4===h)return 0;if(3===h){if(B.Eh("23",".BB.*.AAA"),!u)return 0;if(1===u){if(D[v].color===r)return 0;if(D[j].color!==r||D[j].group.je<3)return 0}}else if(2===h)if(D[m].color===i){if(B.Eh("22",".BB.*..AA"),!u)return 0;if(1===u&&D[v].color===r)return 0}else if(D[b].color===i){if(B.Eh("22","BB..*..AA"),u)return 1;if(D[w].color!==r||D[m].color!==r)return 0;e.push(D[v]),e.push(D[y]),D[w].color!==r&&e.push(D[w]),D[m].color!==r&&e.push(D[m])}else{if(B.Eh("22",".B..*.AAA"),u)return 1;if(D[b].color!==r||D[m].color!==r)return 0;e.push(D[v]),e.push(D[y]),D[b].color!==r&&e.push(D[b]),D[m].color!==r&&e.push(D[m])}else{if(1!==h)return B.Eh("20",".B..*..A."),u?1:D[v].fh()||D[y].fh()?0:D[M].fh()&&(T=D[y],0===this.Fh[r][T.le][T.ke])?0:D[j].fh()&&(A=D[v],0===this.Fh[r][A.le][A.ke])?0:(D[v].ih(r)<3&&e.push(D[v]),D[y].ih(r)<3&&e.push(D[y]),1);if(B.Eh("21",".B..*..AA"),!u)return 0}}else if(B.Eh("2n","?.?.*B?A."),3===h){if(B.Eh("23","C.B.*BAA."),2===n.length)return 0;if(D[x].color===l){if(D[j].color!==r||D[k].color!==r)return 0;if(u<2)return 0}else e.push(D[d]),e.push(D[v])}else if(2===h)if(D[x].color===l){if(D[b].color!==i)return B.Eh("22","..B.*BAA "),0;if(B.Eh("22","o...*ooo "),0===u)return 0;if(2===n.length)return D[g].group!==D[y].group?0:D[v].color===l?-1:D[m].color===l?(e.push(D[d]),1):-1;D[v].color===l&&e.push(D[v])}else{if(D[x].color===i){if(B.Eh("22","B...*A.AA"),2===u)return-1;var E=D[m].color===r,I=D[w].color===r;return 0===u?E||I?(e.push(D[d]),e.push(D[v]),1):0:(D[v].color!==l||I?D[d].color!==l||E||e.push(D[y]):e.push(D[v]),1)}if(D[b].color!==i){if(B.Eh("22","..B.*BAAx"),2===u)return 1;if(0===u){if(D[b].color!==l)return 1;e.push(D[b]),e.push(D[d]),e.push(D[v])}return 1}if(B.Eh("22","o...*ooox"),u)return 1;var G=D[j].color,P=D[k].color;if(D[y].group.je>2&&G!==r)return 0;D[m].color!==l||G===r&&P===r||e.push(D[m]),a||(e.push(D[d]),e.push(D[v]))}else if(1===h){if(D[b].color===i)return B.Eh("21","C...*B.A."),u||(e.push(D[d]),e.push(D[v])),1;if(B.Eh("21","....*BAA."),D[x].color===l)return 0;if(1===D[x].group.je)return 0;D[d].color===l&&e.push(D[d]),D[v].color===l&&e.push(D[v])}else{if(B.Eh("20","....*B.A."),D[x].color===l)return 0;if(!u){if(1===D[f].gh())return 0;e.push(D[d]),e.push(D[v])}}}else if(1===s)if(4===h){if(0===u)return 0}else if(3===h){if(D[b].color!==i){if(D[y].color===l)return 0}else if(D[y].color===l){if(D[M].color!==r)return 0;if(D[b].group===D[m].group)return 0;0===u?(e.push(D[v]),e.push(D[d]),e.push(D[y])):1===u&&D[v].color===r&&(e.push(D[d]),e.push(D[y]))}}else if(2===h){if(D[b].color===l&&D[y].color===l)return 0}else B.Eh("11","..B.*..A."),u||(e.push(D[y]),D[x].color===l&&(e.push(D[d]),e.push(D[v]),D[M].color!==r&&e.push(D[x])));else if(4===h){if(0===u&&n.length<4)return 0}else{if(3!==h)return D[w].color===i&&D[x].color===i?(B.Eh("02","....*.B.A"),D[g].color===l?-1:D[g].group.je<=2?1:-1):(B.Eh("02","B...*...A"),1);if(D[y].color===l&&D[x].group===D[w].group||D[g].color===l&&D[x].group===D[m].group)return 0}return 1},e.prototype.Ch=function(t,i,n){if(i!==this.color)return 0;u.debug&&(c(i),n[0],n[1]);var e=this.Ih.Hh.Gh(t);if(e.Jh(t)&&2===n.length){if(this.Ih.Kh)return.5;var r=this.Bh.Lh(n[0].Pe);return r>0&&r<1?.5:0}return e.color!==i?0:this.Ih.Kh?-.5:-1},e.prototype.Mh=function(t,i){return[this.fb.Ud(t.ke,i.le),this.fb.Ud(i.ke,t.le)]},e.prototype.Nh=function(t,i,n){var e=Math.abs(i.ke-t.ke),r=Math.abs(i.le-t.le);if(e+r===1)return 0;var o,s=1-n,h=0;if(1===e&&1===r){var u=this.Mh(t,i),a=u[0],c=u[1];if(a.color===n||c.color===n)return 0;if(a.color===s&&h++,c.color===s&&h++,0===h)return 0;if(2===h)return 99;var l=a.color===s?0:1,p=u[l],f=u[1-l];return t.fh()||i.fh()?1===f.gh()?p.group.je>2?1:0:0!==f.ih(s)?1:0:1===f.gh()?0!==f.ih(s)?1:0:1}if(e+r===2){if(o=this.fb.Ud((t.ke+i.ke)/2,(t.le+i.le)/2),o.color===n)return 0;if(o.color===s)return o.group.je;for(var d=o.We.length-1;d>=0;d--)o.We[d].color===s&&h++;return h>=1?1:t.fh()&&i.fh()?0:.5}if(e+r===3&&t.fh()&&i.fh()){for(var g=this.Oh(t,i),v=0,y=g.length-1;y>=0;y--)o=g[y],o.color===s&&(v+=o.group.je),0!==o.ih(s)&&(v+=1);return v}return e+r},e.prototype.yh=function(t,i){for(var n=[],e=t.We.length-1;e>=0;e--){var r=t.We[e];switch(r.color){case l:n.push(r);break;case i:if(r.group.je>1)return r;break;default:if(1===r.group.je)return r.group.Xe()[0].de[0]}}for(var o=2,s=n.length-1;s>=0;s--)for(var h=n[s],u=h.We.length-1;u>=0;u--){var a=h.We[u];if(a!==t&&(a.color===i&&0!==this.Bh.Lh(a.group.Pe))){var c=this.Nh(t,a,i);if(!(c>=2)&&(o-=2-c)<=.5)return a}}return null}},{"../../Move":21,"../../constants":50,"../../log":71,"../../test":76,"./DiamondZone":28,"./Heuristic":31,"util":4}],28:[function(t,i,n){"use strict";function e(t,i){this.color=i,this.Dh=new Array(13);var n=t.ke,e=t.le,r=t.fb.wd,o=t.fb.tb,s=this.Dh,h=u.ud;s[l]=t,s[p]=r[e+1][n],s[v]=r[e+1][n-1],s[y]=r[e+1][n+1],s[f]=r[e-1][n],s[b]=r[e-1][n-1],s[m]=r[e-1][n+1],s[d]=r[e][n-1],s[g]=r[e][n+1],s[k]=n>2?r[e][n-2]:h,s[j]=n<o-1?r[e][n+2]:h,s[x]=e>2?r[e-2][n]:h,s[w]=e<o-1?r[e+2][n]:h}function r(t){return t===a?S:M[t+1]}function o(t,i){for(var n="",e=0;e<i.length;e++){var o=i[e];n+="string"==typeof o?o:r(t[o].color)}return n}var s=t("../../constants"),h=t("../../Grid"),u=t("../../Stone"),a=s.ud,c=s.EMPTY,l=s.kh,p=s.lh,f=s.mh,d=s.nh,g=s.oh,v=s.ph,y=s.qh,b=s.rh,m=s.sh,w=s.th,x=s.Ph,k=s.uh,j=s.vh;i.g=e;var M=h.pe+h.re,S="|";e.prototype.toString=function(){var t=this.Dh;return o(t,[" "," ",w," "," "])+"\n"+o(t,[" ",v,p,y," "])+"\n"+o(t,[k,d,"*",g,j])+"\n"+o(t,[" ",b,f,m," "])+"\n"+o(t,[" "," ",x," "," "])+"\n"},e.prototype.Qh=function(){var t,i=this.Dh;t=i[p],i[p]=i[f],i[f]=t,t=i[w],i[w]=i[x],i[x]=t,t=i[v],i[v]=i[b],i[b]=t,t=i[y],i[y]=i[m],i[m]=t},e.prototype.Rh=function(){var t,i=this.Dh;t=i[d],i[d]=i[g],i[g]=t,t=i[k],i[k]=i[j],i[j]=t,t=i[v],i[v]=i[y],i[y]=t,t=i[b],i[b]=i[m],i[m]=t},e.prototype.Sh=function(){var t,i=this.Dh;t=i[d],i[d]=i[f],i[f]=i[g],i[g]=i[p],i[p]=t,t=i[k],i[k]=i[x],i[x]=i[j],i[j]=i[w],i[w]=t,t=i[v],i[v]=i[b],i[b]=i[m],i[m]=i[y],i[y]=t},e.prototype.Th=function(){var t,i=this.Dh;t=i[d],i[d]=i[p],i[p]=i[g],i[g]=i[f],i[f]=t,t=i[k],i[k]=i[w],i[w]=i[j],i[j]=i[x],i[x]=t,t=i[v],i[v]=i[y],i[y]=i[m],i[m]=i[b],i[b]=t},e.prototype.normalize=function(){var t,i=this.color,n=this.Dh;if(n[l].fh()){n[p].color===a?this.Qh():n[d].color===a?this.Th():n[g].color===a&&this.Sh();var e=n[d].color===i,r=n[g].color===i;return void(e&&!r?this.Rh():e===r&&n[v].color===i&&n[y].color!==i&&this.Rh())}var o=!1,s=!0,h=!0,u=n[p].color===i?1:0,c=n[f].color===i?1:0,w=n[d].color===i?1:0,x=n[g].color===i?1:0;u>c?(this.Qh(),w>x&&this.Rh(),w!==x&&(o=!0)):u<c?(w>x&&this.Rh(),w!==x&&(o=!0)):c?w>x?this.Th():x>w?this.Sh():(s=!1,w&&(h=!1)):w>x?this.Th():x>w?this.Sh():(w?this.Th():h=!1,s=!1);var k=n[y].color===i?1:0,j=n[b].color===i?1:0;if(s&&o)n[p].color!==i&&n[d].color!==i&&k&&!j&&(this.Sh(),this.Rh());else{var M=n[v].color===i?1:0,S=n[m].color===i?1:0;s||(M+k>j+S?(this.Qh(),t=M,M=j,j=t,t=k,k=S,S=t):o||(o=!0,!h&&M<k&&j<S?this.Sh():!h&&M>k&&j>S?this.Th():o=!1)),!o&&(j>S||j===S&&M>k)&&this.Rh()}};var z=[v,p,y,d,l,g,b,f,m],q=["TL","TOP","TR","LEFT","CENTER","RIGHT","BL","BOTTOM","BR"];e.prototype.Eh=function(t,i){for(var n=this.Dh,e=this.color,r=1-e,o={},s=0,h=0,u=0;u<z.length;u++){var l=n[z[u]],p=i[u],f=l.color;switch(f===e&&(u%2?s++:h++),p){case"o":if(f===e)continue;break;case"A":case"B":case"C":case"D":if(f!==e)break;var d=o[p];if(d){if(d!==l.group)break}else o[p]=l.group;continue;case"*":case" ":if(f===c)continue;break;case".":if(f!==e)continue;break;case"x":if(f===r)continue;break;case"?":continue;case"-":if(f===a)continue}return p+"!="+f+" in "+q[u]+"\n"+this}var g=parseInt(t[0]),v=parseInt(t[1]);return s!==g?"numDirects="+s:!(!isNaN(v)&&h!==v)||"numDiags="+h}},{"../../Grid":17,"../../Stone":26,"../../constants":50}],29:[function(t,i,n){"use strict";function e(t){r.call(this,t)}var r=t("./Heuristic");(0,t("util").inherits)(e,r),i.g=e,e.prototype.Uh=function(){this.Ih.Hh.Vh()}},{"./Heuristic":31,"util":4}],30:[function(t,i,n){"use strict";function e(t){s.call(this,t),this.grid=new o(this.tb,u),this.Wh=t.Yh.Xh}
var r=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,u=r.ud;h(e,s),i.g=e,e.prototype.Uh=function(){var t=this.fb;this.Ih.Hh.Zh(t,this.grid),this.$h()},e.prototype.$h=function(){var t=this.Ih.Hh._h;for(var i in t)for(var n=~~i,e=t[n],r=e.group.color,o=e.ai.length-1;o>=0;o--){var s=e.ai[o];s.Jh&&this.Wh.bi(s.ci,r)}}},{"../../Grid":17,"../../constants":50,"./Heuristic":31,"util":4}],31:[function(t,i,n){"use strict";function e(t){this.Ih=t,this.fi(),this.fb=t.fb,this.tb=t.fb.tb,this.gi=new o(this.tb,0,u),this.hi=t.hi,this.color=this.ii=null,this.ji()}var r=t("../../constants"),o=t("../../Grid"),s=t("../../log"),h=t("../../helper"),u=r.ud,a=r.di,c=r.ei;i.g=e,e.prototype.fi=function(){var t=this.constructor;this.name=t.name||h.ki(t),this.name.length<5&&(this.name+=this.Ih.li.length)},e.prototype.ji=function(){var t=this.Ih.Yh;this.mi=t.ni,this.Bh=t.Xh,this.xh=t.oi?t.oi.gi.xd:null,this.pi=t.qi,this.ri=t.si,this.Fh=t.ti?t.ti.Fh:null},e.prototype.ui=function(t){this.color=t,this.ii=1-t},e.prototype.Uh=function(t,i){for(var n=s.level,e=this.Ih.color,r=this.gi.xd,o=1;o<=this.tb;o++)for(var h=1;h<=this.tb;h++){var u=t[o][h];if(!(u<a)){u===c&&this.name===this.Ih.vi&&s.wi(s.xi);var l=r[o][h]=this.wh(h,o,e);i[o][h]+=l,u===c&&s.wi(n)}}},e.prototype.yi=function(t,i,n){var e=this.gi.xd[i][t];e&&(n[this.name]=e)},e.prototype.zi=function(t,i,n,e){return this.Ih.Ai.get(this.name+"-"+t,i,n,e)}},{"../../Grid":17,"../../constants":50,"../../helper":51,"../../log":71}],32:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.Bi=null}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),u=t("../../Move"),a=(t("../../test"),u.Le),c=u._a,l=r.EMPTY;s(e,o),i.g=e,e.prototype.Ci=function(t,i){for(var n=t.Xe(),e=n.length-1;e>=0;e--){var r=n[e];if(!(r.je>1)){var o=r.de.length;if(o>=i)return!0;for(var s=r.Xe(),h=s.length-1;h>=0;h--)if((o+=s[h].je-1)>=i)return!0}}return!1},e.prototype.Di=function(t,i){for(var n=0,e=0,r=0,o=t.We.length-1;o>=0;o--){var s=t.We[o];switch(s.color){case l:r++;break;case i:r+=s.group.je-1,n++;break;default:1===s.group.je&&(e+=s.group.de.length)}}switch(e){case 0:return!(r<=1);case 1:return!!r||!n;default:return!0}},e.prototype.Ei=function(t,i,n,e){for(var r=!1,o=!1,s=1-i[0].color,h=i.length-1;h>=0;h--){var u=i[h];1===u.je&&(o=!0,(!n||1===n&&e)&&this.Bh.Fi(t,s),n||(!this.Gi(u,n)||this.Ci(u,1)?this.Bh.Hi(u,t):this.Ih.Kh&&(r=!0)))}return r&&this.Bh.Ii(t),o},e.prototype.Ji=function(t,i,n){if(!i.jh(n))return!1;for(var e=i.ie(n.color),r=e.length-1;r>=0;r--){var o=e[r];if(o.je>2)return!1;if(!t.jh(o))return!1}return!0},e.prototype.Ki=function(t,i,n,e,r,o){for(var s,u=!1,c=t.ie(e),l=i.length-1;l>=0;l--)if(s=i[l],2===s.je&&!this.Ci(s,2)&&(0!==n.length||1!==c.length||2!==c[0].je)){if(1===n.length&&0===c.length){if(!this.Ji(t,n[0],s))continue;u=!0,h.debug&&a(e)}r||!s.Pe.Li()?o.push(s):h.debug&&a(e)}return u},e.prototype.Mi=function(t,i,n){return!(!n||i.je!==n.je)&&(!!n.Te()&&!(t.jh(n)&&n.Ze(t)<1))},e.prototype.Ni=function(t,i,n,e){for(var r=!1,o=i.length-1;o>=0;o--){var s=i[o],h=s.je;h>2&&this.Mi(t,s,null)?(n||this.Bh.Oi(s,t),r=!0):h>=2&&0===n&&!e&&(n||this.Bh.Pi(s,t))}return r},e.prototype.Qi=function(){this.Bi=[]},e.prototype.wh=function(t,i,n){return this.Ri(t,i,n,0),0},e.prototype.Ri=function(t,i,n,e,r){var o=this.fb.Ud(t,i),s=o.ie(1-n);if(!s.length)return!1;var u=o.bh(),l=this.Ei(o,s,e,r),p=[],f=this.Ki(o,s,u,n,e,p),d=!1;if(0===e&&(f&&!l?(this.Bi.push(o),this.xh[i][t]+=2,this.xh[i][t]):this.xh[i][t]<-2&&(d=!0,this.xh[i][t]-=1e3,h.debug)),!f&&u.length<=1&&!this.Di(o,n))return!1;var g=this.Ni(o,s,e,d);if(!p.length)return l||g;this.fb.Yd(t,i,n);for(var v=[!1,!1,!1],y=p.length-1;y>=0;y--)if(h.debug&&(a(n),p[y]),!this.Gi(p[y],e)){if(1===p.length){p.pop();break}v[y]=!0}this.fb._d();var b=this.Si(o,p,v,e);return h.debug&&(l||g||b)&&(a(n),c(t,i)),l||g||b},e.prototype.Si=function(t,i,n,e){switch(i.length){case 0:return!1;case 1:return!n[0]&&(e||this.Bh.Hi(i[0],t),!0);case 3:case 2:return e||(n[1]?this.Bh.Hi(i[0],t):this.Bh.Hi(i[1],t)),!0;default:throw new Error("Unexpected in Hunter#getMultipleChaseThreat")}},e.prototype.Gi=function(t,i){var n=t.Ve();if(1!==n.length)throw new Error("Unexpected: hunter #1: "+n.length);var e=n[0],r=t.color,o=!0;return this.Di(e,r)&&(this.fb.Yd(e.ke,e.le,r),o=this.Ti(e,i),this.fb._d()),h.debug,o},e.prototype.Ui=function(t){for(var i=1-t.color,n=t.We,e=n.length-1;e>=0;e--){var r=n[e];if(r.color===i){var o=r.group;if(1===o.je){return o.Ve()[0].jh(t.group)?this.Gi(o,1)?1:-1:1}}}return 0},e.prototype.Ti=function(t,i){var n=t.group;if(n.je<=1)return!0;if(n.je>2)return!1;var e=this.Ui(t);if(0!==e)return e<0;var r=t.bh();if(2!==r.length&&(r=n.Ve()),2!==r.length)throw new Error("Unexpected: hunter #2");var o=r[0],s=r[1];h.debug;var u=1-n.color;return this.Ri(o.ke,o.le,u,i+1)||this.Ri(s.ke,s.le,u,i+1)},e.prototype.Vi=function(t){return this.Ti(t,1)},e.prototype.Wi=function(t,i,n){return this.Ri(t,i,n,1,n===this.ii)}},{"../../Move":21,"../../constants":50,"../../log":71,"../../test":76,"./Heuristic":31,"util":4}],33:[function(t,i,n){"use strict";function e(t){s.call(this,t),this.Xi=[new o(this.tb,u),new o(this.tb,u)],this.Fh=[this.Xi[c].xd,this.Xi[l].xd]}var r=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,u=r.ud,a=r.EMPTY,c=r.ab,l=r.bb;h(e,s),i.g=e,e.prototype.Uh=function(){this.Xi[c].init(0),this.Xi[l].init(0);for(var t=1;t<=this.tb;t++)for(var i=1;i<=this.tb;i++){var n=this.fb.Ud(i,t),e=n.color;if(e!==a)for(var r,o=this.Fh[e],s=n.We,h=0;r=s[h],h<s.length;h++)if(o[r.le][r.ke]+=2,r.color===a)for(var u,p=r.We,f=0;u=p[f],f<p.length;f++)u!==n&&(o[u.le][u.ke]+=1)}}},{"../../Grid":17,"../../constants":50,"./Heuristic":31,"util":4}],34:[function(t,i,n){"use strict";function e(t){u.call(this,t),this.debug=!1,this.grid=new s(this.tb,null),this.Yi=[],this.Zi="",this.$i=this.zi("spaceInvasion",2,.01,4),this._i=this.zi("pressure",1,.01,2)}function r(){this.dj=null,this.ej=[!1,!1],this.fj=0,this.gj=[],this.hj=[],this.ij=[]}function o(t,i,n){this.name=t,this.fj=i,this.group=n,this.mj=1/0}var s=t("../../Grid"),h=t("./boan/GroupInfo"),u=t("./Heuristic"),a=t("util").inherits,c=t("../../log"),l=t("../../Move"),p=(t("../../test"),l.Le);a(e,u),i.g=e,e.prototype.Uh=function(){this.debug=this.Ih.aj,this.grid.init(null),this.Yi.length=0},e.prototype.bj=function(t,i){u.prototype.Uh.call(this,t,i)},e.prototype.wh=function(t,i){var n=this.grid.xd[i][t];return n?n.cj():0},e.prototype.yi=function(t,i,n){var e=this.grid.xd[i][t];e&&e.cj(n,this.name)},r.prototype.cj=function(t,i){var n=this.fj;t&&n&&(t[i+"-base"]=n);var e=this.gj;if(!e.length)return n;for(var r=e.length-1;r>=0;r--){var o=e[r],s=o.fj*this.hj[r];if(n+=s,t){var h=this.hj[r];t[i+"-"+o+(1!==h?" factor:"+h.toFixed(2):"")]=s}}return n},e.prototype.jj=function(t,i){return this.grid.xd[i][t]},e.prototype.kj=function(t,i){var n=this.grid.xd[i][t];return n||(this.grid.xd[i][t]=n=new r,n)},e.prototype.bi=function(t,i){c.debug&&p(i),this.kj(t.ke,t.le).dj=i},e.prototype.lj=function(t,i){var n=this.jj(t.ke,t.le);return n&&n.dj===i},e.prototype.Fi=function(t,i){this.kj(t.ke,t.le).ej[i]=!0},e.prototype.ej=function(t,i){var n=this.jj(t.ke,t.le);return n&&n.ej[i]},o.prototype.toString=function(){return this.name+(this.mj!==1/0?" minMoves:"+this.mj:"")+" score:"+this.fj.toFixed(2)},e.prototype.nj=function(t,i,n){this.Zi=t+" on "+i.toString(1),n.ke===this.Ih.oj&&n.le===this.Ih.pj?(c.wi(c.xi),this.Zi):c.level===c.xi&&c.wi(c.qj)},e.prototype.rj=function(t){var i=this.Yi[t.Id];if(i)return i;for(var n=2*t.de.length,e=t.Ve(),r=0,s=e.length-1;s>=0;s--)r+=e[s].hh();return n+=this.$i*Math.max(0,r-1),this.Yi[t.Id]=i=new o("life/death of "+t.toString(1),n,t),i},e.prototype.sj=function(t,i,n,e){if(!i)throw new Error("Unexpected");n=n||1,e=e||1,c.debug&&n&&n.toFixed(2);var r=this.kj(i.ke,i.le),o=r.gj,s=r.hj,h=r.ij,u=o.indexOf(t);return u<0?(o.push(t),s.push(n),h.push(e)):(s[u]=Math.max(s[u],n),h[u]=Math.min(h[u],e)),t.mj=Math.min(t.mj,e),t},e.prototype.Lh=function(t){var i=t.Lh;if(void 0!==i)return i;var n,e=t.tj;n=e?e.uj:[t];var r=this.pi.vj(n);return i=t.Lh=this.wj(r,t.group.color===this.Ih.kb)},e.prototype.wj=function(t,i){return t>=2?1:t<1.5?0:i?1:.5},e.prototype.xj=function(t,i,n,e,r,o){e=e||1;var s,u=t[0].group.color===this.Ih.kb,a=this.pi.vj(t),l=this.wj(a,u);if(o){s=l-this.wj(a+o,!0),s=Math.min(2*s,1)}else s=1-l;if(e*=s,c.debug&&h.yj(t),e<.1)return void(c.debug&&h.yj(t));for(var p=r||0,f=t.length-1;f>=0;f--)p+=t[f].group.je;for(f=t.length-1;f>=0;f--)this.zj(t[f].group,i,n,e,p)},e.prototype.zj=function(t,i,n,e,r){if(!(e<.1)){var o=this.rj(t);return n||this.Aj(t,i,e,r),this.sj(o,i,e,r)}},e.prototype.Aj=function(t,i,n,e){if(!(1===t.de.length&&t.de[0].dh()||0===i.hh()&&t.de.length<3)){e=e||1;for(var r=t.Xe(),o=r.length-1;o>=0;o--){var s=r[o];s.je===e&&(this.zj(s,i,!0,n,e),this.Bj(s,i,n,e))}}},e.prototype.Bj=function(t,i,n,e){for(var r=t.Pe.Cj(i),o=r.length-1;o>=0;o--)this.xj(r[o],i,!0,n,e)},e.prototype.Pi=function(t,i){var n=1/(t.je+1)*this._i;if(this.Lh(t.Pe)<.5){if(!this.Ih.Kh)return 0;n=this.hi}this.kj(i.ke,i.le).fj+=n,this.debug&&i.ke===this.Ih.oj&&i.le===this.Ih.pj&&c.Kg("MoveInfo "+p(1-t.color)+" - pressure at "+i+": "+n.toFixed(2))},e.prototype.Ii=function(t){this.kj(t.ke,t.le).fj+=this.hi},e.prototype.Oi=function(t,i){this.debug&&this.nj("race",t,i);var n=t.Pe,e=n.tj?n.tj.uj:[n];this.xj(e,i,!1)},e.prototype.Dj=function(t,i,n,e){this.debug&&this.nj("eye threat",t,i);var r=t.Pe,o=r.tj?r.tj.uj:[r];return this.xj(o,i,n===t.color,void 0,void 0,-e),!0},e.prototype.Ah=function(t,i,n,e){var r=t[0];this.debug&&this.nj("cut",r,i);for(var o=e===r.color,s=r.Pe.Ej(t,i),h=s.length-1;h>=0;h--)this.xj(s[h],n,o,void 0,1)},e.prototype.Hi=function(t,i){this.debug&&this.nj("kill",t,i);for(var n=t.Pe.Cj(i),e=n.length-1;e>=0;e--)this.xj(n[e],i,!1);this.zj(t,i,!1,1,t.je)},e.prototype.Fj=function(t,i){this.debug&&this.nj("rescue",t,i),this.Bj(t,i),this.zj(t,i,!0)}},{"../../Grid":17,"../../Move":21,"../../log":71,"../../test":76,"./Heuristic":31,"./boan/GroupInfo":45,"util":4}],35:[function(t,i,n){"use strict";function e(t){r.call(this,t),this.Gj=null}var r=t("./Heuristic"),o=t("util").inherits,s=t("../../log"),h=t("../../Move"),u=h._a;o(e,r),i.g=e,e.prototype.Qi=function(){this.Gj||(this.Gj=this.Ih.Yh.Hj)},e.prototype.wh=function(t,i,n){if(this.Fh[1-n][i][t]<2&&this.Fh[n][i][t]<2&&0===this.fb.Ud(t,i).ih(n))return 0;var e=this.fb.Yd(t,i,n),r=e.group,o=0;return s.debug&&u(t,i),1===r.je?1===r.de.length&&e.bh()[0].Td(this.ii)?s.debug:(o-=2*r.de.length,s.debug):2===r.je&&(s.debug,this.Gj.Vi(e)&&(o-=2*r.de.length,s.debug)),this.fb._d(),o}},{"../../Move":21,"../../log":71,"./Heuristic":31,"util":4}],36:[function(t,i,n){"use strict";function e(t){s.call(this,t),this.Mj=[new o(this.tb,a),new o(this.tb,a)],this.Nj=this.zi("wideSpaceToEye",.7,.01,1),this.Oj=this.zi("stoneCountToEye",.33,.25,1)}var r=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,u=t("../../log"),a=r.ud,c=r.Ij,l=r.Jj,p=r.EMPTY,f=r.ab,d=r.bb,g=r.Kj,v=r.Lj;h(e,s),i.g=e,e.prototype.Uh=function(){this.Pj()},e.prototype.Pj=function(){this.Mj[g].init(p),this.Mj[v].init(p);for(var t=this.tb;t>=1;t--)for(var i=this.tb;i>=1;i--){var n=this.fb.Ud(i,t);if(n.color===p){var e=this.Qj(i,t,n);if(null!==e){var r=this.Ih.Hh.Gh(n);if(!r.Rj&&!this.Bh.lj(n,e)){for(var o=n.We,s=null,h=this.Fh[1-e],a=1,f=o.length-1;f>=0;f--){var d=o[f];d.color===e&&(s=d.group),1!==a||d.fh()||0!==h[d.le][d.ke]||d.hh()!==d.We.length||(a=2)}if(!s){if(!n.dh())continue;if(!(s=n.eh().group))continue}if(n.fh()){for(var y=!1,b=1-e,m=l;m>=c;m-=2){var w=n.Zg[m];if(w.color===b){y=!0;break}}if(y)continue}var x=(i+t)%2,k=this.Mj[x].xd;k[t][i]=e,s.Pe.Sj(x,a),u.debug}}}}},e.prototype.Tj=function(t,i){var n=t.ke,e=t.le,r=(n+e)%2;return this.Mj[r].xd[e][n]===i},e.prototype.Qj=function(t,i,n){var e=this.Fh[f][i][t],r=this.Fh[d][i][t],o=e>r?f:d,s=Math.max(e,r),h=Math.min(e,r);if(h>1)return null;var u=0,a=this.tb;return 1===h&&n.dh()&&n.eh().color===p&&u++,1!==t&&t!==a&&1!==i&&i!==a||u++,s+u-3-h<0?null:o},e.prototype.Uj=function(t){for(var i=0,n=t.color,e=this.Fh[1-n],r=this.Fh[n],o=t.de,s=o.length-1;s>=0;s--){var h=o[s];if(!h.fh())for(var u=h.Zg.length-1;u>=0;u--){var a=h.Zg[u];if(a.color===p&&!(r[a.le][a.ke]>4)){var c=e[a.le][a.ke];if(!(c>1)){var l=a.gh();if(0!==l)if(1!==l){var f=a.ke-h.ke,d=a.le-h.le,g=a.ke+f,v=a.le+d;0===e[v][g]&&i++}else{if(c>0)continue;i++}}}}}return i},e.prototype.vj=function(t){for(var i=0,n=0,e=t.length-1;e>=0;e--){var r=t[e];i+=r.Vj(),n+=r.group.de.length}n<6&&(i=Math.min(i,n*this.Oj));var o=0;for(e=t.length-1;e>=0;e--)o+=this.Uj(t[e].group);return i+=o*this.Nj}},{"../../Grid":17,"../../constants":50,"../../log":71,"./Heuristic":31,"util":4}],37:[function(t,i,n){"use strict";function e(t){h.call(this,t),this.Yj=new s(this.tb,f),this.Zj=this.Yj.xd,this.$j=new s(this.tb,f),this.Xi=[new s(this.tb,f),new s(this.tb,f)],this._j=new s(this.tb,f),this.ak()}function r(t,i,n){switch(t){case b:return[i,1];case m:return[1,i];case w:return[i,n];case x:return[n,i]}}var o=t("../../constants"),s=t("../../Grid"),h=t("./Heuristic"),u=t("util").inherits,a=t("../../log"),c=t("../../Move"),l=t("../../Stone"),p=c.Le,f=o.ud,d=o.EMPTY,g=o.ab,v=o.bb,y=o.NEVER,b=o.Wj,m=o.oh,w=o.Xj,x=o.nh,k=o.Xg,j=o.Yg,M=s.Be,S=l.$g,z=l._g;u(e,h),i.g=e,e.prototype.Uh=function(){this.Yj.De(this.fb),this.bk(g),this.bk(v),this.ck()},e.prototype.dk=function(t,i,n){var e=n===g?-1:1,r=y;return s.Be[2+this.Xi[g].xd[i][t]]===e&&r++,s.Be[2+this.Xi[v].xd[i][t]]===e&&r++,r},e.prototype.ek=function(t,i,n){return this._j.xd[i][t]*(n===g?1:-1)},e.prototype.fk=function(t,i,n){return s.Be[2+this.Xi[1-n].xd[i][t]]*(n===g?1:-1)},e.prototype.toString=function(){return"\nBLACK first:\n"+this.Xi[g]+"WHITE first:\n"+this.Xi[v]},e.prototype.gk=function(){this.Yj.De(this.fb);var t=this.Xi[g];this.hk(this.Yj,t.K(this.Yj)),this.ik(t.xd,v),this.ik(t.xd,g);var i=this.Ih.Hh;return i.rg(this.fb),[i.qg().xd,i.sg()]},e.prototype.hk=function(t,i){for(var n=t.xd,e=i.xd,r=~~(2*Math.random()),o=this.tb;o>=1;o--)for(var s=n[o],h=this.tb;h>=1;h--)s[h]===d&&(this.jk(n,e,h,o,r,1-r)?(this.kk(e,h,o,r),r=1-r):this.jk(n,e,h,o,1-r,r)&&this.kk(e,h,o,1-r))},e.prototype.lk=function(t){return this.Xi[t].Kd(function(t){return"@?O"[s.Be[2+t]+1]})},e.prototype.mk=function(t){for(t=this.fb.Sb()-t;t-- >0;)this.fb._d()},e.prototype.bk=function(t){var i=this.fb.Sb(),n=this.Xi[t];this.nk(n,t),this.Ih.Hh.pk(this.fb,n,t),this.mk(i)},e.prototype.ck=function(){for(var t=this.Xi[g].xd,i=this.Xi[v].xd,n=this._j.xd,e=this.tb;e>=1;e--)for(var r=this.tb;r>=1;r--)n[e][r]=(M[2+t[e][r]]+M[2+i[e][r]])/2;a.debug&&this.Yj},e.prototype.nk=function(t,i){this.qk=null,this.rk(this.Yj,t.K(this.Yj),i),a.debug,this.ik(t.xd,i),a.debug,this.sk(this.$j.K(t)),this.qk=this.$j.xd,a.debug&&this.$j,this.rk(this.Yj,t.K(this.Yj),i),a.debug,this.ik(t.xd,i),a.debug},e.prototype.rk=function(t,i,n){a.debug&&p(n);for(var e=t.xd,r=i.xd,o=this.tb;o>=1;o--)for(var s=e[o],h=this.tb;h>=1;h--)s[h]===d&&this.jk(e,r,h,o,n,1-n)&&this.kk(r,h,o,n)},e.prototype.sk=function(t){for(var i=t.xd,n=1;n<=this.tb;n++)for(var e=1;e<=this.tb;e++)if(this.Zj[n][e]===d){var r=i[n][e];if(r!==d){var o=this.tk(i,e,n,1-r);0===o&&(i[n][e]=d)}}},e.prototype.jk=function(t,i,n,e,r,o){switch(this.tk(t,n,e,r)){case 0:if(!this.uk(t,n,e,r))return!1;break;case 4:return!1;case 3:if(0===this.tk(t,n,e,o))return!1}return!0},e.prototype.kk=function(t,i,n,e,r){if(this.qk){if(!r&&this.qk[n][i]===d)return;if(this.fb.Ud(i,n).Pd(e))return;this.fb.Yd(i,n,e)}t[n][i]=e},e.prototype.tk=function(t,i,n,e){for(var r=0,o=k;o<=j;o++){var s=S[o];t[n+s[1]][i+s[0]]===e&&r++}return r},e.prototype.uk=function(t,i,n,e){for(var r=k;r<=j;r++){var o=z[r];if(t[n+o[1]][i+o[0]]===e)return!0}return!1},e.prototype.ak=function(){for(var t=[],i=k;i<=j;i++)for(var n=S[i][0],e=S[i][1],o=this.tb-1;o>=2;o--){var s=r(i,o,this.tb);t.push([s[0],s[1],n,e])}this.vk=t},e.prototype.ik=function(t,i){for(var n,e,r,o,s,h,u=this.vk,a=u.length-1;a>=0;a--){var c=u[a],l=c[0],p=c[1];if(t[p][l]===d){var f=c[2],g=c[3],v=l+f,y=p+g,b=t[y][v];if(b===d){var m=v+f,w=y+g;if((b=t[w][m])===d){var x=m+f;if((b=t[w+g][x])===d);else{if(b!==i)continue;if(n=t[p-f][l-g],e=t[p+f][l+g],r=t[y-f][v-g],o=t[y+f][v+g],s=t[w-f][m-g],h=t[w+f][m+g],n===b&&r===b&&s===b)continue;if(e===b&&o===b&&h===b)continue;if(this.kk(t,m,w,b,!0),n===b&&r===b)continue;if(e===b&&o===b)continue;if(this.kk(t,v,y,b,!0),n===b||e===b)continue;this.kk(t,l,p,b,!0)}}else{if(b!==i)continue;if(n=t[p-f][l-g],e=t[p+f][l+g],r=t[y-f][v-g],o=t[y+f][v+g],n!==1-b&&r===b)continue;if(e!==1-b&&o===b)continue;if(this.kk(t,v,y,b,!0),n===b||e===b)continue;this.kk(t,l,p,b,!0)}}else{if(b!==i)continue;if(n=t[p-f][l-g],e=t[p+f][l+g],r=t[y-f][v-g],o=t[y+f][v+g],n===b&&r!==1-b)continue;if(e===b&&o!==1-b)continue;this.kk(t,l,p,b,!0)}}}}},{"../../Grid":17,"../../Move":21,"../../Stone":26,"../../constants":50,"../../log":71,"./Heuristic":31,"util":4}],38:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.wk=[],this.xk=this.zi("allyInfl",.03,.01,1),this.yk=this.zi("enemyInfl",.13,.01,1)}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),u=t("../../Move"),a=t("../../Stone"),c=u.Le,l=u._a,p=r.EMPTY,f=a.$g,d=r.Xg,g=r.Yg;s(e,o),i.g=e,e.prototype.Uh=function(t,i){var n=this.wk;n.length=0,o.prototype.Uh.call(this,t,i);for(var e=n.length-1;e>=0;e--)this.zk(n[e],i)},e.prototype.wh=function(t,i,n){return this.Ak(t,i,1-n,!0),this.Ak(t,i,n)},e.prototype.Bk=function(t,i,n,e,r){if(!(this.xh[t.le][t.ke]<0)){var o=1-n.group.color,s=this.mi.yh(t,o);s&&(this.Bh.Lh(s.group.Pe)<.5||(h.debug&&(c(1-o),e.toFixed(2)),r[t.le][t.ke]+=e,this.gi.xd[t.le][t.ke]+=e))}},e.prototype.zk=function(t,i){var n=t[0],e=t[1],r=t[2];if(this.Bk(n,n,e,r,i),!this.Bh.ej(n,e.color)){var o=e.group;if(!n.jh(o))for(var s=0;s<8;s++){var h=n.Zg[s];h.color===p&&(h.jh(o)&&this.Bk(h,n,e,r,i))}}},e.prototype.Ak=function(t,i,n,e){var r=this.Fh[1-n][i][t];if(0===r)return 0;var o=this.Fh[n][i][t];if(o>=4)return 0;if(!e&&this.xh[i][t]<0)return 0;var s=this.fb.Ud(t,i);if(0===s.hh())return 0;var u=this.mi.yh(s,n);if(!u)return 0;if(!e&&!this.mi.yh(s,1-n))return 0;var a=this.Ck(t,i,n),p=a+this.yk*r-this.xk*o;return p*=this.Bh.Lh(u.group.Pe),e?p?(h.debug&&(l(t,i),p.toFixed(2)),this.wk.push([s,u,p])):0:(h.debug&&(c(n),l(t,i),p.toFixed(2)),p)},e.prototype.Dk=function(t,i,n,e,r){var o=this.fb.Ud(t,i);if(o.color!==p)return 0;var s=this.ri.fk(t,i,e);if(o.fh()&&(s/=2),s<=0)return 0;if(0==--r)return s;var h=f[n][0],u=f[n][1],a=f[(n+3)%4],c=a[0],l=a[1];return s+=this.Dk(t+h+c,i+u+l,n,e,r),s+=this.Dk(t+h-c,i+u-l,n,e,r)};e.prototype.Ck=function(t,i,n){for(var e=Math.max(0,this.ri.fk(t,i,n)),r=d;r<=g;r++)e+=this.Dk(t+f[r][0],i+f[r][1],r,n,1);var o=this.fb.Ud(t,i);return o.dh()?e=Math.max(e-1,0):o.fh()&&(e=Math.max(e-.85,0)),e}},{"../../Move":21,"../../Stone":26,"../../constants":50,"../../log":71,"./Heuristic":31,"util":4}],39:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.Gj=null}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),u=t("../../Move"),a=u.Le,c=r.EMPTY,l=r.ud;s(e,o),i.g=e,e.prototype.Qi=function(){this.Gj||(this.Gj=this.Ih.Yh.Hj)},e.prototype.wh=function(t,i){var n=this.fb.Ud(t,i);return this.Ek(t,i,n),0},e.prototype.Ek=function(t,i,n){for(var e,r,o=[],s=this.color,u=n.ie(s),c=0;r=u[c],c<u.length;c++)1===r.je?o.push(r):2===r.je&&o.push(r);if(o.length&&(h.debug&&(a(s),o[0],o.length>1&&o.length),this.Gj.Wi(t,i,this.ii))){this.fb.Yd(t,i,s),h.debug&&a(s);var l=!this.Gj.Vi(n);this.fb._d();var p;if(!l){for(e=o.length-1;e>=0;e--)if(r=o[e],1!==r.je){var f=r.Ve();if(p=f[0]===n?f[1]:f[0],this.fb.Yd(p.ke,p.le,s),l=!this.Gj.Vi(p),this.fb._d(),l)break}if(!l)return void(h.debug&&a(this.color));n=p}for(e=o.length-1;e>=0;e--)r=o[e],p&&1===r.je||(this.Bh.Fj(r,n),h.debug)}},e.prototype.Fk=function(t,i,n){var e=0,r=0,o=this.tb;if(1===i||i===o)r=1;else{if(1!==n&&n!==o)throw new Error("not along border");e=1}var s=r,h=e;if(this.fb.Ud(i+s,n+h).color===l&&(s=-s,h=-h),this.fb.Ud(i+s,n+h).group!==t){var u=t.color,a=this.fb.Ud(i+e,n+r);for(a.group===t&&(e=-e,r=-r);;)switch(i+=e,n+=r,a=this.fb.Ud(i,n),a.color){case l:return null;case u:return a.group.je>2?a.group:null;case c:var p=this.fb.Ud(i+s,n+h);if(p.color===c)continue;return p.color===1-u?null:p.group.je>2?p.group:null;default:return null}}}},{"../../Move":21,"../../constants":50,"../../log":71,"./Heuristic":31,"util":4}],40:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.Mj=t.Yh.qi.Mj}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),u=t("../../Move"),a=u.Le,c=r.EMPTY,l=r.NEVER,p=r.Gk,f=r.Kj,d=r.Lj;s(e,o),i.g=e,e.prototype.Uh=function(t,i){o.prototype.Uh.call(this,t,i);var n=this.Ih.Hh._h;for(var e in n){var r=n[~~e].group;this.Hk(i,r)}},e.prototype.Hk=function(t,i){var n=[];if(i.Pe.Ik(n)===p){var e=this.fb.Ud(n[0],n[1]);h.debug&&a(this.color),this.Bh.Dj(i,e,this.color,.5)}},e.prototype.wh=function(t,i,n){var e=this.fb.Ud(t,i);return this.Jk(e,n),this.Jk(e,1-n),this.Kk(e,n)},e.prototype.Jk=function(t,i){if(this.ri.dk(t.ke,t.le,i)!==l){var n=this.Ih.Hh.Gh(t);n.Rj&&n.color===i?this.Lk(t,i,n):this.Mk(t,i)}},e.prototype.Lk=function(t,i,n){switch(n.Nk){case 1:for(var e=t.We.length-1;e>=0;e--){var r=t.We[e];if(r.color===i&&1===r.group.je)return h.debug&&a(i),this.Bh.Dj(r.group,t,i,1)}return;case 2:var o=n.Rj;if(this.Bh.lj(t,i))return this.Bh.Dj(o.group,t,i,1);if(o.Ok>1)return;var s=o.Pk.length&&o.Pk[0].group;if(s&&t.jh(s)&&(1===s.je||!t.dh()))return this.Bh.Dj(o.group,t,i,1);return;default:return}},e.prototype.Mk=function(t,i){if(!(this.xh[t.le][t.ke]<0)&&this.mi.yh(t,1-i)){for(var n=this.Mj[f].xd,e=this.Mj[d].xd,r=this.Fh[1-i],o=null,s=null,h=0,u=t.We.length-1;u>=0;u--){var a=t.We[u];switch(a.color){case c:var l=a.ke,p=a.le;if(n[p][l]===i||e[p][l]===i){if(1===r[p][l]&&2!==r[t.le][t.ke])continue;o=a,h++,o.dh()&&2===o.hh()&&h++}break;case i:s||(s=a.group)}}o&&(s||(s=o.ie(i)[0]),this.Bh.Dj(s,t,i,h/2))}},e.prototype.Kk=function(t,i){var n,e=t.bh(),r=e.length,o=this.Ih.Hh.Gh(t);if(o.Rj&&o.color===i){if(0===r)return-1;if(1===r)return this.pi.Tj(e[0],i)?0:-1;if(1===this.Bh.Lh(o.Rj))return 0;var s=t.ih(i);if(3===r&&1===s)return.5;for(n=r-1;n>=0;n--){var h=e[n];if(!this.Bh.lj(h,i)&&1===h.hh())return.5}}else{e=t.bh();var u=!1;for(n=r-1;n>=0&&!u;n--)u=this.pi.Tj(e[n],i);if(!u)return 0;if(t.dh())return-1;if(t.fh())return-.2;if(r>=3&&!this.Fh[1-i][t.le][t.ke])return 1}return 0}},{"../../Move":21,"../../constants":50,"../../log":71,"./Heuristic":31,"util":4}],41:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.Qk=this.zi("enemyInfl",.07,.01,.5),this.Rk=this.zi("allyInfl",.5,.01,.5),this.Sk=this.zi("border",10,0,20),this.Tk=this.tb<=9?[0,.2,.8,.95,1]:[0,.2,.8,1,.95,.8]}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=r.EMPTY;s(e,o),i.g=e,e.prototype.wh=function(t,i){var n=0;if(!this.Ih.Kh){var e=this.ri.ek(t,i,this.color);e<0&&(n+=e)}for(var r=this.fb.Ud(t,i),o=this.Fh[this.ii],s=this.Fh[this.color],u=o[i][t],a=s[i][t],c=r.We.length-1;c>=0;c--){var l=r.We[c];if(l.color!==h)return n;u+=o[l.le][l.ke],a+=s[l.le][l.ke]}var p=1+this.tb/9*(this.Qk*Math.max(u-3,0)+this.Rk*Math.max(a-3,0)),f=this.Tk.length-1,d=Math.min(this.gh(t),f),g=Math.min(this.gh(i),f);return n+this.Tk[d]*this.Tk[g]*this.Sk/p},e.prototype.gh=function(t){return Math.min(t-1,this.tb-t)}},{"../../constants":50,"./Heuristic":31,"util":4}],42:[function(t,i,n){"use strict";function e(t){this.Uk=t.group.Id,this.uj=[t],t.tj=this}function r(t){return"#"+t.group.Id}var o=t("../../../log");i.g=e,e.prototype.toString=function(){return this.uj.map(r).toString()},e.prototype.Vk=function(t){if(!t.tj)return o.debug&&this.toString(),this.uj.push(t),void(t.tj=this);if(t.tj.Uk!==this.Uk){o.debug&&(t.tj.toString(),this.toString());for(var i=t.tj.uj,n=i.length-1;n>=0;n--)this.uj.push(i[n]),i[n].tj=this}},e.prototype.remove=function(t){var i=this.uj.indexOf(t);if(i<0)throw new Error("Band.remove on wrong Band");this.uj.splice(i,1),t.tj=null,o.debug&&this.toString()},e.Wk=function(t){if(1===t.length)throw new Error("add Band of 1");for(var i=null,n=0;n<t.length;n++)if(t[n].Pe.tj){i=t[n].Pe.tj;break}var r=0;for(i||(i=new e(t[r++].Pe)),n=r;n<t.length;n++)i.Vk(t[n].Pe)}},{"../../../log":71}],43:[function(t,i,n){"use strict";function e(t){this.Vb=t,this.version="chuckie",this.mode=null,this.Kh=!1,this.fb=null,this.$k=null,this.gi=null,this._k=[],this._h=null,this.al=[0,0],this.bl=[0,0],this.cl=null}function r(t){return t>1&&t<2?t-1:t}function o(t){if(!(t[m]===t[w]||t[m]>=x&&t[w]>=x))return t[m]=r(t[m]),t[w]=r(t[w]),t[m]>t[w]?m:w}function s(t,i){for(var n=0;n<i.length;n++){var e=i[n];p.debug&&(t.name,e.group.Id),e.yl()!==k&&(i[n]=null)}var r=0;for(n=0;n<i.length;n++)i[n]&&(i[n].zl(t.name+": liveliness="+i[n].Al.toFixed(4)),r++);return r}function h(t,i){for(var n=0;n<i.length;n++)i[n].zl(t.name);return i.length}function u(){return 0}var a=t("../../../constants"),c=t("../../../Grid"),l=t("./GroupInfo"),p=t("../../../log"),f=t("../../../Move"),d=t("./Void"),g=t("./ZoneFiller"),v=f.Le,y=a.EMPTY,b=a.ud,m=a.ab,w=a.bb,x=l.Xk,k=l.Yk,j=l.Zk;i.g=e,e.prototype.rg=function(t){p.debug,this.al[m]=this.al[w]=0,this.bl[m]=this.bl[w]=0,this.gi&&this.gi.tb===t.tb||(this.gi=new c(t.tb,b)),this.dl(0,t,this.gi)&&(this.el(),this.Kh||t.ce(this.bl))},e.prototype.qg=function(){return this.gi},e.prototype.sg=function(){var t=this.al,i=this.bl,n=this.Vb.jb;return[[t[m]+i[w],t[w]+i[m]+n],[[t[m],i[w],0],[t[w],i[m],n]]]},e.prototype.Gh=function(t){return this.$k.xd[t.le][t.ke]},e.prototype.Zh=function(t,i){this.dl(2,t,i)},e.prototype.Vh=function(){this.el()},e.prototype.pk=function(t,i,n){this.dl(1,t,i)&&this.el(n)},e.prototype.Jd=function(){return this.$k.Jd()},e.prototype.Nd=function(){for(var t,i="Grid:\n"+this.$k.Od()+"Voids:\n",n=this._k,e=0;t=n[e],e<n.length;e++)i+=t.toString()+"\n";i+="Groups:\n";for(var r in this._h)i+=this._h[~~r].toString()+"\n";return this.al&&(i+="Score:"+this.al.map(function(t,i){return" player "+i+": "+t+" points"})),i},e.prototype.dl=function(t,i,n){return this.mode=t,this.Kh=this.Vb.useAreaScoring&&0===t,this.fb=i,this.$k=n,this.cl=new g(i,n),0!==i.Sb()&&(n.De(i),this.fl(),this.gl(),this.hl(),!0)},e.prototype.el=function(t){2===this.mode?this.il():(this.jl(),this.il(t),this.kl(),this.ll())},e.prototype.ml=function(t,i){var n=this._h[t.Id];n||(t.Pe&&t.Pe.Hh===this?t.Pe.nl():t.Pe=new l(t,this),n=this._h[t.Id]=t.Pe),n.ol.push(i)},e.prototype.fl=function(){p.debug;var t=c.we;this._h={},this._k.length=0;for(var i,n,e=this.fb,r=new d(e,t++),o=1;o<=e.tb;o++)for(var s=1;s<=e.tb;s++){var h=this.cl.pl(s,o,y,r);if(0!==h){this._k.push(r);for(var u=m;u<=w;u++)for(n=r.ql[u],i=n.length-1;i>=0;i--)this.ml(n[i],r);r=new d(e,t++)}}},e.prototype.gl=function(){for(var t in this._h)this._h[~~t].rl()},e.prototype.hl=function(){p.debug;for(var t=this._k,i=t.length,n=i-1;n>=0;n--)t[n].sl();for(var e;;){for(e=!1,n=i-1;n>=0;n--)t[n].tl()&&(e=!0);if(!e)break}for(n=i-1;n>=0;n--)t[n].ul()},e.prototype.jl=function(){if(!this.Kh){var t=this.fb;if(!(t.Sb()<2*t.tb))for(var i=[0,0],n=[0,0];;){for(var e=!1,r=this._k.length-1;r>=0;r--){var s=this._k[r];if(void 0===s.color&&!(s.Nk>2*t.tb)){i[m]=i[w]=n[m]=n[w]=0;for(var h=m;h<=w;h++)for(var u=s.ql[h].length-1;u>=0;u--){var a=s.ql[h][u].Pe;i[h]+=a.vl(),n[h]+=a.wl()}if(!(n[m]>4&&n[w]>4)){var c=o(i);void 0!==c?(p.debug&&(v(c),i[c].toFixed(4),i[1-c].toFixed(4)),s.xl(c),e=!0):p.debug&&i[0]}}}if(!e)break}}};var M={name:"brothers",l:l.prototype.Bl},S={name:"singleEye",l:l.prototype.Cl,Dl:s},z={name:"race",l:l.prototype.yl,Dl:u},q={name:"atari",l:l.prototype.El},B={name:"final",l:l.prototype.Fl},D=[];D[0]=[M,q,S,z,B],D[1]=[M,S],D[2]=[M,S,z],e.prototype.Gl=function(t,i){p.debug&&t.name;var n=0,e=0,r=[];for(var o in this._h){var s=this._h[~~o];if(!s.Hl&&!s.Il)switch(e++,t.l.call(s,i)){case k:r.push(s);break;case j:n++}}return r.length&&(n+=t.Dl?t.Dl(t,r):h(t,r)),p.debug&&n&&t.name,n===e?0:0===n?e:-n},e.prototype.il=function(t){if(!this.Kh){for(var i,n=D[this.mode],e=0;e<n.length;){if(0===(i=this.Gl(n[e++],t)))return void this.hl();i<0&&(e=0,this.hl())}p.debug}},e.prototype.kl=function(){for(var t=[],i=this._k.length-1;i>=0;i--){var n=this._k[i];t[m]=t[w]=!1;for(var e=m;e<=w;e++)for(var r,o=n.ql[e],s=0;r=o[s],s<o.length;s++)if(this.Kh||r.Pe.vl()>=2){t[e]=!0;break}t[m]&&t[w]?n.Jl():this.Kh&&(n.color=t[m]?m:w)}},e.prototype.ll=function(){this.Kl(),this.Ll(),this.Ml()},e.prototype.Kl=function(){if(this.Kh)for(var t in this._h){var i=this._h[~~t].group;this.al[i.color]+=i.de.length}},e.prototype.Ll=function(){if(!this.Kh)for(var t in this._h){var i=this._h[~~t];if(i.Il){for(var n=!1,e=i.Nl.length-1;e>=0;e--)if(!i.Nl[e].Pe.Il){n=!0;break}var r=i.group.color;if(!i.Nl.length||n){var o=i.group.de[0],s=this.cl.pl(o.ke,o.le,r,c.ze+r);this.bl[r]+=s,this.al[1-r]+=s}else for(var h=i.ol.length-1;h>=0;h--)i.ol[h].xl(r)}}},e.prototype.Ml=function(){for(var t=this.$k.xd,i=[],n=this._k.length-1;n>=0;n--){var e=this._k[n],r=e.Ol(this.Kh?null:i);if(r){this.al[e.color]+=r-i.length,this.cl.pl(e.ke,e.le,e,c.Ae+e.color);for(var o=i.length-1;o>=0;o--){var s=i[o];t[s.le][s.ke]=c.ye}}else this.cl.pl(e.ke,e.le,e,c.ye)}}},{"../../../Grid":17,"../../../Move":21,"../../../constants":50,"../../../log":71,"./GroupInfo":45,"./Void":46,"./ZoneFiller":47}],44:[function(t,i,n){"use strict";function e(t,i){this.ci=t,this.ql=[],this.color=i[0].color,this.Jh=!1,this.Pl(i)}i.g=e,e.prototype.Pl=function(t){for(var i=this.ql,n=t.length-1;n>=0;n--){var e=t[n];i.indexOf(e)<0&&i.push(e)}}},{}],45:[function(t,i,n){"use strict";function e(t,i){this.Hh=i,this.Ql=[],this.ol=[],this.Pk=[],this.Nl=[],this.Rl=[0,0],this.ai=[],this.Sl=[],this.Tl=[],this.group=t,this.nl()}function r(t){return t>f?t>d?"ALWAYS":"SOMETIMES":"NEVER"}function o(t,i,n){for(var e=i.length-1;e>=0;e--)for(var r=i[e].Pe,o=t.length-1;o>=0;o--)if(!(t[o].indexOf(r)<0)){n!==-1&&n!==o?(t[n]=t[n].concat(t[o]),t.splice(o,1),o<n&&n--):n=o;break}return n}function s(t,i,n,e){var r=-1;r=o(t,n,r),r=o(t,e,r),r<0?t.push([i]):t[r].push(i)}function h(t,i,n){switch(t){case 4:return 4===i[2];case 5:return 1===i[3]&&3===i[2];case 6:if(2===i[3]&&4===i[2]){for(var e=0,r=0;r<6;r++)if(!n[r].fh()&&++e>2)return!1;return!0}return 1===i[4]&&3===i[2]&&2===i[1];default:return!1}}function u(t){return.0202===t||1.0202===t}var a=t("../../../constants"),c=t("./Band"),l=t("../../../log"),p=a.EMPTY,f=a.NEVER,d=a.Gk,g=a.ALWAYS,v=a.Kj,y=a.Lj;i.g=e;var b=e.Yk=-1,m=e.Zk=1,w=e.Ul=0,x=e.Xk=1e3;e.prototype.nl=function(){this.Ok=this.Al=0,this.Ql.length=0,this.ol.length=0,this.tj=null,this.Hl=this.Il=!1,this.Lh=void 0,this.Vl=void 0,this.Pk.length=0,this.Nl.length=0,this.Rl[v]=this.Rl[y]=0,this.ai.length=0,this.Sl.length=0,this.Tl.length=0,this.Wl=0},e.Xl=function(t){return"#"+t.group.Id},e.prototype.toString=function(){var t=this.tj?this.tj.toString():"";return this.group.toString()+" (isAlive:"+this.Hl+" isDead:"+this.Il+" voids:"+this.Ql.length+" brothers:["+t+"] deadEnemies:["+this.Pk.map(e.Xl)+"])"},e.prototype.Yl=function(t){return l.debug,this.Ql.push(t),this.Ok++,this},e.prototype.Zl=function(t){var i=this.Ql.indexOf(t);if(i===-1)throw new Error("remove unknown void");l.debug,this.Ql.splice(i,1),this.Ok--},e.prototype.rl=function(){for(var t=this.group,i=t.color,n=[],e=[],r=[],o=t.Ve(),s=o.length-1;s>=0;s--)for(var h=o[s],u=h.We,a=null,l=u.length-1;l>=0;l--){var p=u[l];if(p.color===i&&p.group!==t){a=p.group;var f=n.indexOf(a);f>=0?r[f]!==h&&(e[f]=!1):(n.push(a),e.push(!0),r.push(h))}}if(n.length){for(var d=n.length-1;d>=0;d--)if(e[d]){var g=r[d],v=this.Hh.Gh(g).$l(g,[t,n[d]]);this.ai.push(v),this.Sl.push(n[d])}else this.Tl.push(n[d]);n.push(t),c.Wk(n)}},e.yj=function(t){return"subband["+t.length+" groups: "+t.map(function(t){return t.group.toString(1)}).join(", ")+"]"},e.prototype._l=function(t){for(var i=[],n=this.Sl.length-1;n>=0;n--)this.ai[n].ci!==t&&i.push(this.Sl[n]);return i},e.prototype.Ej=function(t,i){for(var n,e=[],r=t.length-1;r>=0;r--){var o=t[r].Pe,h=o.tj;if(h){
if(h===n)continue;n=h;for(var u=h.uj.length-1;u>=0;u--){var a=h.uj[u];s(e,a,a.Tl,a._l(i))}}else e.push([o])}return e},e.prototype.Cj=function(t){var i=this.tj;if(!i)return[];for(var n=[],e=i.uj.length-1;e>=0;e--){var r=i.uj[e];r!==this&&s(n,r,r.Tl,r._l(t))}return n},e.prototype.am=function(){if(this.Ok>=2)return f;var t=this.Vj();return t>=3?f:0===t?g:d},e.prototype.bm=function(){if(this.am()===f)return!1;if(this.Tl.length)return!1;for(var t=this.group.color,i=0,n=0,e=this.ol.length-1;e>=0;e--){var r=this.ol[e];r.color===t&&0!==r.cm&&(i++,r.cm>=3&&n++,this.Pk.length&&n++)}return!(i+n>=2)},e.prototype.zl=function(t){this.Il=!0;for(var i=this.ol,n=this.group.color,e=1-n,r=null,o=i.length-1;o>=0;o--){var s=i[o],h=s.ql[e],u=0;if(h.length){for(var a=h.length-1;a>=0;a--)u+=h[a].de.length;s.Nk>u||(s.xl(e),r=s)}}if(!r)return void l.debug;for(var c=this.Nl=this.group.Xe(),p=c.length-1;p>=0;p--){var f=c[p];f.Pe.Pk.push(this);for(var d=p-1;d>=0;d--){var g=c[d],v=g.Pe;if(v.Sl.indexOf(f)===-1){v.Sl.push(f);var y=r.$l(r.dm[0],[f,g]);v.ai.push(y)}}}l.debug},e.prototype.vl=function(t){if(this.Hl||this.Ok>=2&&!this.Il)return x;for(var i,n=0,e=this.group.color,r=this.group.je,o=this.ol.length-1;o>=0;o--){var s=this.ol[o],h=s.Nk;if(s.Rj)s.Rj===this&&(n+=h);else{var u=s.ql[e];if(1===u.length)n+=h;else{var a=this.group.Id,c=a;for(i=u.length-1;i>=0;i--)c=Math.min(u[i].Id,c);a===c&&(n+=h)}}}if(n=Math.min(r,n)/100,t||(n+=r/1e4),this.Il)return 0+n;var p=0,f=0;if(!t&&this.tj){var d=this.tj.uj;for(i=d.length-1;i>=0;i--)d[i]!==this&&(f+=d[i].vl(!0))}if(!t){var d=this.Tl;for(i=d.length-1;i>=0;i--)p+=d[i].Pe.vl(!0);for(d=this.Sl,i=d.length-1;i>=0;i--)p+=d[i].Pe.vl(!0)}return p!==f&&(l.debug,p=f),this.Ok+p+n},e.prototype.Ik=function(t){if(this.Ok>1)return g;if(0===this.Ok)return f;var i=this.Ql[0],n=i.Nk;if(n>6)return g;var e=this.group,r=e.color;if(n<3&&!i.ql[1-r].length)return f;l.debug;for(var o,s=null,u=0,a=0,c=0,v=null,y=null,b=0,m=i.dm,w=!1,x=[0,0,0,0,0],k=0;k<n;k++){for(var j=m[k],M=0,S=0,z=0,q=j.We.length-1;q>=0;q--){var B=j.We[q];switch(B.color){case p:z++;break;case r:S++;break;default:if(1===B.group.je){z++,b+=2;break}M++,v?B.group!==v&&(y=B.group):v=B.group}}if(M){if(z+(S?1:0)<2)continue}else if(b++,o=j,x[z]++,z<2)continue;if(l.debug,c++,j.dh()&&(w=!0),s&&!s.dh()){if(M<a)continue;if(z+M<=u+a)continue}s=j,a=M,u=z}if(w&&c>1&&c--,l.debug,!s)return f;if(1===b&&!y&&v&&v.de.length<3&&this.em(v,o,s))return f;if(c>=2){if(a)return g;if(!h(n,x,m))return g}return t[0]=s.ke,t[1]=s.le,d},e.prototype.em=function(t,i,n){for(var e=i.We.length-1;e>=0;e--){var r=i.We[e];if(r.color===p&&r!==n&&r.jh(t))return!0}return!1},e.prototype.Bl=function(){if(!this.tj)return w;for(var t=this.tj.uj,i=0,n=!1,e=t.length-1;e>=0;e--){var r=t[e];r!==this&&(n||r.Hl?n=r.Hl=!0:(i+=r.Ok)>=2&&(n=r.Hl=!0))}return n?(l.debug,this.Hl=!0,m):w},e.prototype.fm=function(){if(this.tj)return!1;if(this.group.de.length>=6)return!1;for(var t=this.ol.length-1;t>=0;t--)if(this.ol[t].color===this.group.color)return!1;return!0},e.prototype.Cl=function(t){if(this.Ok>=2)return this.Hl=!0,l.debug,m;if(this.fm())return b;var i=[],n=this.Ik(i);if(n===d){if(this.Wl=.5,void 0===t)return w;t!==this.group.color&&(n=f)}return n===f?(this.Wl=0,this.tj||this.Pk.length?w:this.gm()>=1.5?w:(this.Al=this.vl(),b)):(this.Hl=!0,this.Wl=1,l.debug&&r(n),m)},e.prototype.yl=function(){var t=this.group.Xe();if(!t.length)return b;for(var i=this.Al||this.vl(),n=u(i)&&!this.Sl.length&&!this.Tl.length,e=null,r=n?this.group.Ve():null,o=0;o<t.length;o++){var s=t[o],h=s.Pe,a=h.vl(),c=i-a;if(l.debug&&(this.group.Id,i.toFixed(4),a.toFixed(4),s.Id),c>0)return l.debug,this.Vl=!1,w;if(0===c&&(l.debug&&this.group,n)){if(h.Vl===!1||a!==i||s.de.length<3)continue;for(var p=r.length-1;p>=0;p--){var f=r[p];if(!f.jh(s)&&this.Hh.Gh(f).Rj!==this){n=!1;break}}n&&(e=h)}}return n&&e?(this.Vl=!0,w):b},e.prototype.El=function(){return this.group.je>1?w:b},e.prototype.Fl=function(){var t=this.Al=this.vl();if(t>=2)return this.Hl=!0,l.debug,m;if(this.Vl)return this.Hl=!0,l.debug,m;for(var i=this.Sl.length-1;i>=0;i--)if(this.Sl[i].Pe.Hl)return this.Hl=!0,l.debug&&this.Sl[i],m;return b},e.prototype.hm=function(t,i){if(this.tj){for(var n=this.tj.uj,e=0,r=n.length-1;r>=0;r--)e+=t.call(n[r],i);return e}return t.call(this,i)},e.prototype.Sj=function(t,i){this.Rl[t]+=i},e.prototype.Li=function(){for(var t=1-this.group.color,i=this.ol.length-1;i>=0;i--){if(this.ol[i].color!==t)return!1}return!0},e.prototype.im=function(){for(var t=this.group.color,i=this.ol.length-1;i>=0;i--){var n=this.ol[i];if(void 0===n.color)for(var e=n.ql[1-t],r=e.length-1;r>=0;r--){var o=e[r],s=o.Pe.wl();if(s<6)return 1}}return 0},e.prototype.Vj=function(){return this.Ok+this.Wl+this.im()+(this.Rl[v]+this.Rl[y])/2},e.prototype.gm=function(){return this.hm(this.Vj)},e.prototype.jm=function(){return this.group.de.length},e.prototype.wl=function(){return this.hm(this.jm)}},{"../../../constants":50,"../../../log":71,"./Band":42}],46:[function(t,i,n){"use strict";function e(t,i){this.fb=t,this.code=i,this.ke=this.le=0,this.Nk=0,this.ql=null,this.dm=null,this.km=void 0,this.color=void 0,this.Rj=void 0,this.lm=!1,this.mm=!1,this.cm=-1,this.ai=null,this.nm=!1}function r(t){return t?g[t]:g[0]}function o(t){for(var i=t.length-1;i>=0;i--)if(!t[i].Pe.Il)return!1;return!0}function s(t){return"#"+t.Id}var h=t("../../../constants"),u=t("./FakeSpot"),a=t("../../../log"),c=t("../../../Move"),l=c.Le,p=c._a,f=h.ab,d=h.bb,g=["void","eye","fake","dame"];i.g=e,e.prototype.om=function(t,i){return this.ke=t,this.le=i,this.ai=[],this.ql=[[],[]],this.dm=[],this.ql},e.prototype.pm=function(t,i){this.Nk++,this.dm.push(this.fb.Ud(t,i))},e.prototype.$l=function(t,i){a.debug&&i.map(function(t){return t.Id}),this.mm=!0;var n=this.dm.indexOf(t),e=this.ai[n];return e?e.Pl(i):e=this.ai[n]=new u(t,i),e},e.prototype.sl=function(){var t=this.ql[f],i=this.ql[d],n=o(t),e=o(i);if(n&&e)return!this.lm&&void 0!==this.color&&this.qm();if(1===this.km)return!1;if(!n&&!e)return!1;var r=n?d:f;return this.nm=!t.length||!i.length,this.mm?this.rm(r):(this.cm=this.Nk,this.sm(r))},e.prototype.rm=function(t){this.km=2,this.color=t,this.Rj&&(this.Rj.Zl(this),this.Rj=null);for(var i=this.ai.length-1;i>=0;i--){var n=this.ai[i];n&&(n.Jh=!1)}return!0},e.prototype.tl=function(){if(2!==this.km)return!1;var t=this.cm,i=this.cm=this.Nk-this.tm();return a.debug,i!==t},e.prototype.tm=function(t){t||(t=[]);for(var i=this.ai.length-1;i>=0;i--){var n=this.ai[i];if(n&&n.color===this.color)for(var e=n.ql,r=e.length-1;r>=0;r--)if(e[r].Pe.bm()){a.debug&&!n.Jh&&n.ci,n.Jh=!0,t.push(n.ci);break}}return t.length},e.prototype.Jh=function(t){for(var i=this.ai.length-1;i>=0;i--){var n=this.ai[i];if(n&&n.color===this.color&&n.ci===t)return n.Jh}return!1},e.prototype.ul=function(){if(2===this.km){if(0===this.cm){if(this.Rj)throw new Error("NEVER HAPPENS");return void a.debug}a.debug;var t=this.color;return this.color=this.km=void 0,this.sm(t)}},e.prototype.sm=function(t){return this.nm?(this.um(t),!0):this.xl(t)},e.prototype.vm=function(t){for(var i=this.ql[t],n=i[0],e=0,r=i.length-1;r>=0;r--){var o=i[r],s=o.de.length;o.je>1&&s>e&&(n=o,e=s)}this.Rj=n.Pe.Yl(this)},e.prototype.um=function(t){return a.debug&&l(t),this.km=1,this.color=t,this.vm(t),!0},e.prototype.xl=function(t){if(t===this.color)return!1;a.debug&&l(t),this.Rj&&(this.Rj.Zl(this),this.Rj=null),this.color=t;for(var i=this.ql[1-t],n=i.length-1;n>=0;n--)for(var e=i[n].Pe.ol,r=e.length-1;r>=0;r--)if(e[r]!==this&&e[r].color===t)return!0;return this.vm(t),!0},e.prototype.Jl=function(){a.debug,this.Rj&&(this.Rj.Zl(this),this.Rj=null),this.km=3,this.color=void 0},e.prototype.qm=function(){a.debug;var t=this.color;if(void 0===t)throw new Error("dead group's eye of undefined owner");this.lm=!0,this.mm=!1,this.Rj&&(this.Rj.Zl(this),this.Rj=null),this.km=1,this.color=1-t;for(var i=this.ql[t],n=i.length-1;n>=0;n--){var e=i[n].Pe;if(e.Nl.length)return this.Rj=e.Nl[0].Pe.Yl(this),!0}return!0},e.prototype.Ol=function(t){return void 0===this.color?0:(t&&(t.length=0,this.mm&&this.tm(t)),this.Nk)},e.prototype.wm=function(t){var i=t.group;return this.ql[i.color].indexOf(i)>-1},e.prototype.toString=function(){return"{"+r(this.km)+"-"+p(this.ke,this.le)+" vcount:"+this.Nk+" black:"+(this.ql[f].map(s).toString()||"-")+" white:"+(this.ql[d].map(s).toString()||"-")+"}"}},{"../../../Move":21,"../../../constants":50,"../../../log":71,"./FakeSpot":44}],47:[function(t,i,n){"use strict";function e(t,i){this.fb=t,this.xd=i.xd,this.ql=null,this.xm=null}var r=t("../../../constants"),o=r.ud;i.g=e,e.prototype.pl=function(t,i,n,e){if(this.xd[i][t]!==n)return 0;this.xm=n;var r="number"!=typeof e?e:null;this.ql=r&&r.om(t,i);for(var o,s,h,u=0,a=this.xd,c=[[t,i,i]];o=c.pop();)if(s=o[0],i=o[1],h=o[2],a[i][s]===n){for(;this.ym(s,i-1);)i--;for(;this.ym(s,h+1);)h++;u+=h-i+1;for(var l=s-1;l<=s+1;l+=2){for(var p=null,f=i;f<=h;f++)l<s&&(a[f][s]=e,r&&r.pm(s,f)),this.ym(l,f)?p||(p=f):p&&(c.push([l,p,f-1]),p=null);p&&c.push([l,p,h])}}return u},e.prototype.ym=function(t,i){var n=this.xd[i][t];if(n===o)return!1;if(n===this.xm)return!0;if(!this.ql)return!1;if("number"!=typeof n)return!1;var e=this.fb.Ud(t,i).group;if(!e)throw new Error("Unexpected: ZoneFiller replacing a group");var r=this.ql[n];return r.indexOf(e)===-1&&r.push(e),!1}},{"../../../constants":50}],48:[function(t,i,n){"use strict";function e(t,i,n){this.name="Chuckie",this.Vb=t,this.Hh=new o(t),this.Am(n),this.setColor(i)}function r(t,i){return i[1]-t[1]}var o=t("./boan/BoardAnalyser"),s=t("../../constants"),h=t("../../Genes"),u=t("../../Grid"),a=t("../../log"),c=t("../../Move"),l=t("../../test"),p=t("./boan/ZoneFiller"),f=t("./Connector"),d=t("./GroupAnalyser"),g=t("./GroupsAndVoids"),v=t("./Hunter"),y=t("./Influence"),b=t("./MoveInfo"),m=t("./NoEasyPrisoner"),w=t("./PotentialEyes"),x=t("./PotentialTerritory"),k=t("./Pusher"),j=t("./Savior"),M=t("./Shaper"),S=t("./Spacer"),z=c.$a,q=c._a,B=s.ud,D=s.ab,A=s.di,T=s.zm,C=s.ei;i.g=e,e.Bm="Chuckie",e.Cm="0.1",e.jg=o,e.Dm=p,e.prototype.Em=function(t){var i=new t(this);return this.li.push(i),i},e.prototype.Fm=function(){var t=this.Yh={};this.li=[],t.Xh=this.Em(b),t.si=this.Em(x),t.Gm=this.Em(g),t.ti=this.Em(y),t.qi=this.Em(w),t.Hm=this.Em(d),t.oi=this.Em(m),t.Im=this.Em(j),t.Hj=this.Em(v),t.ni=this.Em(f),t.Jm=this.Em(S),t.Km=this.Em(k),t.Lm=this.Em(M);for(var i=0;i<this.li.length;i++)this.li[i].ji()},e.prototype.setColor=function(t){this.color=t;for(var i=0;i<this.li.length;i++)this.li[i].ui(t)},e.prototype.Am=function(t){this.Ai=t||this.Ai||new h,this.hi=this.zi("smallerMove",.03,.01,.1),this.fb!==this.Vb.fb&&(this.fb=this.Vb.fb,this.tb=this.fb.tb,this.Kh=this.Vb.useAreaScoring,this.Mm=new u(this.tb,B),this.gi=new u(this.tb,0,B),this.Fm()),this.kb=D,this.Nm=this.Om=0,this.Pm=this.Qm=this.Rm=0,this.Sm=!1,this.oj=this.pj=-1,this.vi=null},e.prototype.Tm=function(t){for(var i=0;i<this.li.length;i++){var n=this.li[i];if(n.name===t)return n}return null},e.prototype.zi=function(t,i,n,e){return void 0===n&&(n=null),void 0===e&&(e=null),this.Ai.get(this.name+"-"+t,i,n,e)},e.prototype.Um=function(t,i,n){this.Pm=n,this.Qm=t,this.Rm=i,this.Sm=1!==this.Vm},e.prototype.Wm=function(t,i,n){if(n>this.Pm)this.Vm=1,this.Um(t,i,n);else{if(this.Vm++,Math.random()*this.Vm>=1)return;this.Um(t,i,n)}},e.prototype.Xm=function(){this.Nm++;var t=this.Mm.xd,i=this.gi.xd;this.Ym(),this.Zm(t,i),this.$m(t,i);var n=this._m(t,i);return a.wi(this.aj?a.xi:a.qj),n},e.prototype.Ym=function(){this.Pm=this.hi-.001,this.Qm=-1,this.kb=this.Vb.kb,this.aj=!!a.debug,a.wi(a.qj)},e.prototype.Zm=function(t,i){for(var n=1;n<=this.tb;n++)for(var e=1;e<=this.tb;e++)this.fb.Ob(e,n,this.color)?(t[n][e]=A,i[n][e]=0):t[n][e]=T;if(this.oj!==-1){if(t[this.pj][this.oj]===T)throw new Error("Invalid test move: "+this.oj+","+this.pj);t[this.pj][this.oj]=C}},e.prototype.$m=function(t,i){for(var n=0;n<this.li.length;n++){var e=this.li[n];a.wi(this.aj&&this.vi===e.name?a.xi:a.qj);var r=Date.now();e.Qi&&e.Qi(),e.Uh(t,i);var o=Date.now()-r;o>=3&&!l.an&&a.bn("Slowness: "+e.name+" took "+o+"ms")}this.Yh.Xh.bj(t,i)},e.prototype._m=function(t,i){for(var n=1;n<=this.tb;n++)for(var e=1;e<=this.tb;e++)t[n][e]<A||i[n][e]<this.Pm||this.Wm(e,n,i[n][e]);return this.Pm<this.hi?"pass":(this.Sm&&this.Om++,q(this.Qm,this.Rm))},e.prototype.cn=function(){return this.Yh.si.gk()},e.prototype.dn=function(){var t=this.Yh.si;return t.Uh(),t._j.xd},e.prototype.en=function(t,i){this.oj=t,this.pj=i,this.Xm(),this.oj=-1},e.prototype.fn=function(t,i){for(var n={},e=0;e<this.li.length;e++)this.li[e].yi(t,i,n);return n},e.prototype.gn=function(t,i){return this.en(t,i),this.gi.xd[i][t]},e.prototype.hn=function(t,i,n){return this.en(t,i),this.Tm(n).gi.xd[i][t]},e.prototype.jn=function(t){this.vi=t},e.prototype.kn=function(t,i){var n=z(t);if(!n)return"";var e=n[0],o=n[1];if(i){if(!this.fb.Ob(e,o,this.Vb.kb))return"Invalid move: "+t;this.en(e,o)}var s=this.fn(e,o),h=this.gi.xd[o][e],u=[];for(var a in s)0!==s[a]&&u.push([a,s[a]]);u.sort(r);for(var c=t+" ("+h.toFixed(2)+")\n",l=0;l<u.length;l++)c+="- "+u[l][0]+": "+u[l][1].toFixed(2)+"\n";return c}},{"../../Genes":15,"../../Grid":17,"../../Move":21,"../../constants":50,"../../log":71,"../../test":76,"./Connector":27,"./GroupAnalyser":29,"./GroupsAndVoids":30,"./Hunter":32,"./Influence":33,"./MoveInfo":34,"./NoEasyPrisoner":35,"./PotentialEyes":36,"./PotentialTerritory":37,"./Pusher":38,"./Savior":39,"./Shaper":40,"./Spacer":41,"./boan/BoardAnalyser":43,"./boan/ZoneFiller":47}],49:[function(t,i,n){"use strict";function e(){this.ln=null,this.kg=this.mn=this.nn=this.on=null}i.g=new e,e.prototype.pn=function(t){this.ln={};for(var i=0;i<t.length;i++){var n=t[i];this.ln[n.name]=n.qn}var e=t.length-1;this.kg=this.mn=t[e].qn,this.nn=e>=1?t[e-1].qn:null,this.on=e>=2?t[e-2].qn:null}},{}],50:[function(t,i,n){"use strict";function e(){this.Kj=0,this.Lj=1,this.ud=-99,this.EMPTY=-1,this.ab=0,this.bb=1,this.di=0,this.ei=1,this.zm=-1,this.NEVER=0,this.Gk=1,this.ALWAYS=2,this.Xg=0,this.Yg=3,this.Jj=7,this.Ij=1,this.Wj=this.lh=0,this.oh=1,this.Xj=this.mh=2,this.nh=3,this.ph=4,this.qh=5,this.rh=6,this.sh=7,this.th=8,this.Ph=9,this.uh=10,this.vh=11,this.kh=12,this.cb="Japanese",this.rn="Chinese",this.sn=0,this.tn=1}i.g=new e},{}],51:[function(t,i,n){"use strict";function e(t){return"\n"!==t.slice(-1)?0:"\r\n"!==t.slice(-2)?1:2}n.ki=function(t){return t.name||t.toString().split(/ |\(/,2)[1]},n.clone=function(t){if(null===t||void 0===t)return t;var i;if(t instanceof Array){i=[];for(var n=0,e=t.length;n<e;n++)i[n]=t[n]}else{if("object"!=typeof t)throw new Error("clone called on "+typeof t);if("function"==typeof t.clone)return t.clone();i={};for(var r in t){var o=t[r];"function"!=typeof o&&(i[r]=o)}}return i},String.prototype.od=function(t){if(void 0===t)return this.substr(0,this.length-e(this));var i=this.length-t.length;return this.substr(i)===t?this.substr(0,i):this.toString()},String.prototype.Ge=function(t){if(void 0===t)t=e(this)||1;else if("number"!=typeof t)throw new Error("Invalid parameter type for String.count: "+typeof t);return this.substr(0,this.length-t)},String.prototype.startsWith||(String.prototype.startsWith=function(t){return this.substr(0,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t){return this.substr(this.length-t.length)===t}),String.prototype.format=function(t){if("%"!==this[0])throw new Error("Invalid format: "+this.toString());var i,n=this.slice(1,-1),e=0,r=this.slice(-1);switch(r){case"d":case"x":var o=" ";"0"===n[e]&&(e++,o="0");var s=parseInt(n.substr(e));i=t.toString("x"===r?16:10);for(var h=s-i.length;h>0;h--)i=o+i;return i;case"f":var u="";if("+"===n[e]&&(e++,t>0&&(u="+")),"."!==n[e++])break;var a=parseInt(n.substr(e));return u+t.toFixed(a)}throw new Error("Unknown format: "+this.toString())},String.prototype.Bg=function(t,i){return this>=t&&this<=i},n.un=function(t,i){for(var n=new Array(t),e=t-1;e>=0;e--)n[e]=i;return n},n.oe=function(t,i,e){for(var r=new Array(t),o=r[0]=n.un(i,e),s=t-1;s>=1;s--)r[s]=o.concat();return r},Array.new=function(t,i){if(void 0===t)return[];if(void 0===i)return new Array(t);var n,e=[];if("function"==typeof i)for(n=0;n<t;n++)e[n]=i(n);else for(n=0;n<t;n++)e[n]=i;return e},Array.prototype.vn=function(t){for(var i=this.length,n=0;n<t.length;n++){var e=t[n];this.indexOf(e)===-1&&this.push(e)}return this.length-i}},{}],52:[function(t,i,n){"use strict";function e(t){this.options=t,this.wn=[],this.parent=document.body,this.xn=o.yn(null,"contextMenu")}function r(){this.contextMenu.zn(),this.action&&this.action.call(this)}t("./contextMenu.less");var o=t("./Dome"),s=t("./getText"),h=t("./PopupDlg"),u=t("./tapBehavior"),a=t(".");i.g=e,e.prototype.An=function(t,i){var n=o.yn(this.xn,"menuItem").Bn(t);return n.action=i,n.contextMenu=this,u(n,r),this.wn.push(n),n},e.prototype.Cn=function(t){var i;this.options&&this.options.Dn?i=this.zn.bind(this):this.An(s("#cancelAction"),null),h.En(this.xn,this.parent,i);var n=o.Fn(t),e=n.left+n.width/2,r=n.top+n.height/2,u=o.Fn(this.xn);e=Math.max(10,Math.min(e,a.Gn-u.width-10)),r=Math.max(10,Math.min(r,a.Hn-u.height-10)),this.xn.In("left",Math.round(e)+"px"),this.xn.In("top",Math.round(r)+"px")},e.prototype.zn=function(){h.Jn(this.xn)}},{".":64,"./Dome":53,"./PopupDlg":58,"./contextMenu.less":61,"./getText":63,"./tapBehavior":67}],53:[function(t,i,n){"use strict";function e(t,i,n,r){this.type=i;var o=this.Kn=document.createElement(i);this.name=r,this.Ln=!1,n&&(o.className=n),a&&a.Mn(o,n),t&&(t instanceof e?t.Kn:t).appendChild(o),c&&c.add(r||n,this)}function r(t,i,n,e){this.left=t,this.top=i,this.width=n,this.height=e}function o(){this.mo={}}var s=t("./fileHelper"),h=t("./tapBehavior"),u=null,a=null,c=null,l=1;i.g=e,e.init=function(t,i){a=t,u=i},e.prototype.Nn=function(t,i){return(t instanceof e?t.Kn:t).appendChild(this.Kn),this.Ln=i,u&&i&&u.addElement(this.Kn),this},e.prototype.appendChild=function(t,i){return t.Nn(this,i)},e.removeChild=function(t,i){i&&(u&&i.Ln&&u.On(i.Kn),t instanceof e&&(t=t.Kn),t.removeChild(i.Kn))},e.prototype.removeChild=function(t){e.removeChild(this,t)},e.prototype.Pn=function(){return this.Kn.childElementCount},e.prototype.Qn=function(){this.Kn.innerHTML=null},e.prototype.Bn=function(t){return this.Kn.textContent=t,this},e.prototype.Rn=function(t){return this.Kn.innerHTML=t,this},e.prototype.setAttribute=function(t,i){return this.Kn.setAttribute(t,i),this},e.prototype.In=function(t,i){return this.Kn.style[t]=i,this},e.prototype.Sn=function(t){return t===this.Tn()?this:(this.Kn.style.display=t?"":"none",this.Un=!!t,u&&this.Ln&&(t?u.addElement(this.Kn):u.On(this.Kn)),this)},e.prototype.Tn=function(){return this.Un||void 0===this.Un},e.prototype.Vn=function(t){return this.Kn.disabled=!t,this.Wn("disabled",!t),this},e.prototype.text=function(){return this.Kn.textContent},e.prototype.Xn=function(){return this.Kn.innerHTML},e.prototype.value=function(){return this.Kn.value},e.prototype.Yn=function(){return this.Kn.checked},e.prototype.Zn=function(){return this.Kn},e.prototype.clear=function(){this.Kn.innerHTML=""},e.prototype.v=function(t,i){var n=this;this.Kn.addEventListener(t,function(t){i.call(n,t)})},e.prototype.Wn=function(t,i){var n=this.Kn,e=n.className,r=" "+e+" ",o=" "+t+" ",s=r.indexOf(o);if(i){if(s>=0)return;a&&a.toggle(n,t,i),n.className=e+" "+t}else{if(s<0)return;n.className=r.replace(o," ").trim(),a&&a.toggle(n,t,i)}},e.prototype.$n=function(){this.Kn.scrollTop=this.Kn.scrollHeight},e.yn=function(t,i,n){return new e(t,"div",i,n||i)},e.prototype.yn=function(t,i){return new e(this,"div",t,i||t)},e._n=function(t,i,n,r){var o=new e(t,"button",i+"Button",i);return n&&(o.Kn.innerText=n),o.v("click",r),o},e.ao=function(t,i,n,r){var o=new e(t,"div","btn "+i,i);return o.Bn(n),h(o,r),o},e.bo=function(t,i,n){var r=e.ao(t,i,null,n);return r.yn(i+"Icon btnIcon"),r},e.co=function(t,i,n,r){var o=new e(t,"a",i,i);return o.setAttribute("href",r),o.Bn(n),o},e.eo=function(t,i,n){return new e(t,"div",i,i).Bn(n)},e.fo=function(t){return new e(t,"br")},e.ho=function(t,i,n,r){var o=i+"Label";e.eo(t,o+" inputLbl",n,o);var s=new e(t,"input",i+"Input inputBox",i);return void 0!==r&&(s.Kn.value=r),s},e.io=function(t,i,n,r,o){var s=new e(t,"div",i+"Div chkBoxDiv"),h=new e(s,"input",i+"ChkBox chkBox",i),u=h.Kn;return u.type="checkbox",u.name=i,void 0!==r&&(u.value=r),u.id=i+"ChkBox"+(void 0!==r?r:l++),o&&(u.checked=!0),new e(s,"label",i+"ChkLabel chkLbl",i).Bn(n).setAttribute("for",u.id),h},e.jo=function(t,i,n,r,o){r||(r=n);for(var s=[],h=0;h<n.length;h++){var u=s[h]=new e(t,"input",i+"RadioBtn radioBtn",i),a=u.Kn;a.type="radio",a.name=i,a.value=r[h],a.id=i+"Radio"+r[h],r[h]===o&&(a.checked=!0),new e(t,"label",i+"RadioLbl radioLbl",i).Bn(n[h]).setAttribute("for",a.id)}return s},e.ko=function(t){for(var i=0;i<t.length;i++)if(t[i].Kn.checked)return t[i].Kn.value},e.lo=function(t,i,n,r,o){if(r||(r=n),"byIndex"===r)for(r=[],u=0;u<n.length;u++)r.push(u);var s=new e(t,"select",i+"DropDwn dropDwn",i);s.values=r;for(var h=0,u=0;u<n.length;u++){var a=new e(s,"option").Kn;a.value=r[u],a.textContent=n[u],r[u]===o&&(h=u)}return s.Kn.selectedIndex=h,s},e.prototype.select=function(t){var i=this.values.indexOf(t);i!==-1&&(this.Kn.selectedIndex=i)},e.Fn=function(t){var i=(t.Kn||t).getBoundingClientRect();return new r(i.left,i.top,i.width,i.height)},e.no=function(){return c=new o},e.oo=function(){c=null},o.prototype.add=function(t,i){this.mo[t]=i},o.prototype.get=function(t){return this.mo[t]},o.prototype.Vn=function(t,i,n){"ALL"===t&&(t=Object.keys(this.mo));for(var e=0;e<t.length;e++)if(!n||n.indexOf(t[e])===-1){var r=this.mo[t[e]];r?r.Vn(i):console.error("Invalid control name:",t[e])}},o.prototype.Sn=function(t,i,n){"ALL"===t&&(t=Object.keys(this.mo));for(var e=0;e<t.length;e++)if(!n||n.indexOf(t[e])===-1){var r=this.mo[t[e]];r?r.Sn(i):console.error("Invalid control name:",t[e])}},e.po=function(t){document.head.getElementsByTagName("title")[0].textContent=t},e.qo=function(){var t=window.getSelection();if(!t.rangeCount)return null;var i=t.getRangeAt(0),n=i.startContainer.data;return n?n.substring(i.startOffset,i.endOffset):null},e.ro=function(t,i,n){var e=new Blob([t],{type:n||"text/plain"}),r=document.createElement("a");r.href=URL.createObjectURL(e),r.download=i,r.click()},e.prototype.so=function(){var t=this.Kn.files;return t&&t.length>0},e.prototype.to=function(t){var i=this.Kn.files;return i?!!i.length&&(s.uo(i[0],t),!0):console.error("Invalid field type for uploadFile: "+this.type)}},{"./fileHelper":62,"./tapBehavior":67}],54:[function(t,i,n){"use strict";function e(){}i.g=e,e.vo=function(t,i){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==~~n.readyState)return 200!=~~n.status?i("xhrError: "+n.status):void i(null,n.response)},n.open("GET",t,!0),n.send()},e.wo=function(t,i){return e.vo("./assets/"+t,i)},e.ro=function(t,i){return e.vo(t,i)}},{}],55:[function(t,i,n){"use strict";function e(t){this.ed=t?"localPref_"+t:"localPref",this.xo=!1,this.yo=null,this.map={},this.zo=this.Ao.bind(this),this.Bo=console.error}i.g=e,e.prototype.Co=function(t){this.Bo=t},e.prototype.Do=function(){if(!this.Eo(this.ed)){var t=window.localStorage.getItem("currentVersion");this.Eo(t)&&(this.xo=!0)}},e.prototype.Fo=function(){this.yo&&this.Ao()},e.prototype.Go=function(){this.yo||(this.yo=window.setTimeout(this.zo,6e4))},e.prototype.Eo=function(t){try{var i=window.localStorage.getItem(t);return!!i&&(this.map=JSON.parse(i),!0)}catch(t){this.Bo("Cannot load local preferences: "+t)}},e.prototype.Ao=function(){window.clearTimeout(this.yo),this.yo=null;try{window.localStorage.setItem(this.ed,JSON.stringify(this.map)),this.xo&&(window.localStorage.setItem("currentVersion",this.ed),this.xo=!1)}catch(t){this.Bo("Cannot save local preferences: "+t)}},e.prototype._c=function(t,i){var n=this.map[t];return void 0!==n?n:i},e.prototype.Zc=function(t,i){this.map[t]=i,this.Go()}},{}],56:[function(t,i,n){"use strict";function e(t,i,n){this.parent=t=t||document.body,n=n||{};var e=this.Ho=r.yn(null,"notifPopup").Sn(!1);n.title&&e.yn("title").Bn(n.title),n.Io&&(this.Jo=r.ao(e,"closeBtn",o("#close"),this.close.bind(this))),this.content=e.yn("content"),this.Tn=!1,this.Ko=n.Ko,this.Ko?s.En(this.Ho,this.parent):e.Nn(t),i&&(this.Lo(i),this.show())}t("./notificationPopup.less");var r=t("./Dome"),o=t("./getText"),s=t("./PopupDlg"),h=t("./Transit");i.g=e,e.prototype.Mo=function(t){this.Jo&&this.Jo.Sn(t)},e.prototype.Lo=function(t){this.content.yn("msg").Bn(t),this.content.$n()},e.prototype.close=function(){this.hide()},e.prototype.clear=function(){this.content.Qn()},e.prototype.show=function(){this.Tn||(this.Tn=!0,this.Ho.Sn(!0),s.No(this.Ho))},e.prototype.hide=function(){this.Tn&&(this.Tn=!1,this.Ko?s.Jn(this.Ho):new h(this.Ho).from("opacity",1).Oo("opacity",0).start(500))}},{"./Dome":53,"./PopupDlg":58,"./Transit":60,"./getText":63,"./notificationPopup.less":65}],57:[function(t,i,n){"use strict";function e(){this.Po={},this.Qo=null,this.Ro=""}function r(t,i){for(var n in i)t.style[n]=i[n]}function o(t,i,n,e){var r,o=n[i],s=e[i];if(o)for(r in o)t.style[r]=s?s[r]||null:null;if(s)for(r in s)t.style[r]=s[r]}i.g=new e,e.prototype.So=function(t,i){this.Po=t,this.To(i,!0),this.Mn(document.body,"body")},e.prototype.Uo=function(){return Object.keys(this.Po)},e.prototype.To=function(t,i){if(t!==this.Ro){var n=this.Qo;if(this.Ro=t,this.Qo=this.Po[t],!i)for(var e=document.all,r=0;r<e.length;r++){var o=e[r];this.Vo(o,n)}}},e.prototype.Mn=function(t,i){if(this.Qo){var n=this.Qo[t.localName];if(n&&r(t,n),i&&(n=this.Qo["."+i],n&&r(t,n),i.indexOf(" ")>=0))for(var e=i.split(" "),o=0;o<e.length;o++)(n=this.Qo["."+e[o]])&&r(t,n)}},e.prototype.Vo=function(t,i){o(t,t.localName,i,this.Qo);for(var n=t.className.split(" "),e=0;e<n.length;e++)o(t,"."+n[e],i,this.Qo)},e.prototype.Wo=function(t,i,n){var e=this.Qo[i+"+"+n];if(e){var r=this.Qo[i]||{};for(var o in e)t.style[o]=r[o]||null}},e.prototype.toggle=function(t,i,n){if(this.Qo){var e,o=t.className.split(" ");if(n){var s=this.Qo[t.localName+"+"+i];for(s&&r(t,s),e=0;e<o.length;e++)(s=this.Qo["."+o[e]+"+"+i])&&r(t,s)}else for(this.Wo(t,t.localName,i),e=0;e<o.length;e++)this.Wo(t,"."+o[e],i)}}},{}],58:[function(t,i,n){"use strict";function e(){var t=this.Xo;t.options&&(t.options.Yo=this.id),o.Jn(t.Ho),t.Zo&&t.Zo(t.options)}function r(t,i,n,r){var o=h.ao(t,"popupDlgBtn",n,e);o.Xo=i,o.id=r}function o(t,i,n,e,s){this.parent=t||document.body,this.options=e,this.Zo=s;var a=this.Ho=h.yn(null,"popupDlg dialog");a.yn("dialogTitle").Bn(n||u("#problem"));var c=a.yn("content");h.eo(c,"message",i);for(var l=e&&e.buttons||[u("#ok")],p=a.yn("btnDiv"),f=0;f<l.length;f++)r(p,this,l[f],f);o.En(this.Ho,this.parent)}function s(t){var i=h.yn(null,"popupOverlay");return t&&(t=t.Kn||t,i.In("left",t.offsetLeft+"px"),i.In("top",t.offsetTop+"px"),i.In("width",t.scrollWidth+2+"px"),i.In("height",t.scrollHeight+2+"px")),i}t("./popupDlg.less");var h=t("./Dome"),u=t("./getText"),a=t("./tapBehavior"),c=t("./Transit");i.g=o,o.En=function(t,i,n){var e=t.$o=s(i);e.parent=i,e.Nn(i),t.Nn(e,!0),e.In("opacity",1),n&&a(e,n)},o.Jn=function(t){var i=t.$o;if(!i.parent)return console.error("Already detached overlay",t);i.In("opacity",0),window.setTimeout(function(n){t.Sn(!1),h.removeChild(n,i)},300,i.parent),i.parent=null},o._o=function(t,i,n){var e={buttons:[u("#yes"),u("#no")]};new o(t,i,u("#confirmTitle"),e,function(t){0===t.Yo&&n()})},o.No=function(t){new c(t).from("opacity",0).Oo("opacity",1).start(500)}},{"./Dome":53,"./Transit":60,"./getText":63,"./popupDlg.less":66,"./tapBehavior":67}],59:[function(t,i,n){"use strict";function e(t){this.ap={},this.bp=t.bp,this.cp=t.cp,this.dp(t),this.ep()}function r(){this.lp.gp(),this.lp.bp(this.id)}function o(){this.lp.gp()}function s(){this.removeEventListener(l.yp,s),this.zp.$o.Sn(!1)}t("./topMenu.less");var h=t("./Dome"),u=t("."),a=t("./tapBehavior"),c=t("./touchManager"),l=t("./Transit");i.g=e,e.prototype.fp=function(){this.gp()},e.prototype.hp=function(){return this.ip.Kn.clientHeight},e.prototype.jp=function(t){this.kp.Bn(t)},e.prototype.mp=function(t){return this.np.yn(t||"menuSeparator")},e.prototype.op=function(t,i,n){var e=this.np.yn("menuOption "+t).Bn(i);return e.id=t,e.lp=this,this.ap[t]=e,a(e,r),n&&e.yn("icon"),e},e.prototype.An=function(t){return this.np.appendChild(t)},e.prototype.removeItem=function(t){this.np.removeChild(t)},e.prototype.dp=function(t){var i=this.$o=h.yn(null,"topMenuOverlay");i.lp=this,i.Sn(!1),i.In("opacity",0),i.Nn(document.body),a(i,o);var n=h.yn(null,"topMenu"),e=this.ip=h.yn(n,"menuBtn");e.yn("menuBtnIcon btnIcon"),a(e,this.pp.bind(this)),this.kp=n.yn("topTitle"),this.width=~~(.85*u.Gn);var r=this.qp=n.yn("slideMenu"),s=this.np=r.yn("menuContent");s.In("width",this.width+"px"),s.In("minHeight",u.Hn+"px"),r.yn("sideHandle").In("height",u.Hn+"px");var c=s.yn("menuTitle").Bn(t.rp);a(c,this.gp.bind(this)),this.sp(-this.width),n.Nn(document.body)},e.prototype.sp=function(t){this.tp=t,this.qp.In(l.up,"translate3D("+t+"px,0,0)")},e.prototype.vp=function(t){var i=Math.max(50,~~(Math.abs(t-this.tp)/this.width*300));this.qp.In(l.wp,l.xp+" "+i+"ms ease-out"),this.sp(t)},e.prototype.pp=function(){var t=!1;if(this.$o.Tn()||(t=!0,this.$o.Sn(!0)),this.cp&&t){var i=this.$o.Kn.clientWidth;i++,this.$o.In("opacity",.7)}this.vp(0)},e.prototype.gp=function(){this.cp&&this.$o.In("opacity",0),this.qp.Kn.addEventListener(l.yp,s),this.qp.Kn.zp=this,this.vp(-this.width)},e.prototype.ep=function(){var t,i,n,e,r=this;c.Ap(this.qp.Kn,function(o,s){switch(o){case"dragStart":return t=s,i=n=r.tp,e=i<0?-1:1,r.qp.In(l.wp,null),void r.$o.Sn(!0);case"drag":var h=i+(s-t);if(h===n)return;return e=h-n,h>0&&(h=0),n=h,r.sp(h),void(r.cp&&r.$o.In("opacity",.7*(1+h/r.width)));case"dragEnd":return void(e>0?r.pp():r.gp());case"tap":return r.gp();default:console.error("TopMenu received: "+o)}},{Bp:!0,Cp:0})}},{".":64,"./Dome":53,"./Transit":60,"./tapBehavior":67,"./topMenu.less":68,"./touchManager":69}],60:[function(t,i,n){"use strict";function e(t){this.Kn=t.Kn||t,this.Dp={},this.Ep={},this.Fp={},this.timeout=null,this.Gp=null,this.Hp=null}function r(t,i){window.clearTimeout(t.timeout),t.timeout=null,t.Kn.style[e.wp]=t.Gp,!i&&t.Hp&&t.Hp(),t.Hp=null}i.g=e,e.prototype.from=function(t,i){return this.Ep[t]=i,this},e.prototype.Oo=function(t,i){return this.Fp[t]=i,this},e.prototype.start=function(t,i){var n=this.Kn;n.Ip&&n.Ip.timeout&&r(n.Ip,!0),n.Ip=this,this.Gp=n.style[e.wp],n.style[e.wp]=null;for(var o in this.Ep)this.Dp[o]=n.style[o],n.style[o]=this.Ep[o];n.clientHeight||(n=n),n.style[e.wp]="all "+t+"ms ease-in-out";for(o in this.Fp)this.Dp.hasOwnProperty(o)||(this.Dp[o]=n.style[o]),n.style[o]=this.Fp[o];return this.Hp=i,this.timeout=window.setTimeout(r,t,this),this},e.prototype.reverse=function(t,i){var n=this.Fp;this.Fp=this.Ep,this.Ep=n,this.start(t,i)},e.prototype.Jp=function(t,i){this.Fp=this.Dp,this.Dp={},this.Ep={},this.start(t,i)},function(){void 0===document.body.style.webkitTransition?(e.wp="transition",e.yp="transitionend",e.up="transform",e.xp="transform"):(e.wp="webkitTransition",e.yp="webkitTransitionEnd",e.up="webkitTransform",e.xp="-webkit-transform")}()},{}],61:[function(t,i,n){var e=".contextMenu {\n  position: relative;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  width: 150px;\n  background-color: rgba(120, 120, 120, 0.2);\n  border-radius: 7px;\n  border: 1px solid #58636d;\n}\n.contextMenu .menuItem {\n  margin: 1px 1px 0 1px;\n  padding: 11px;\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.7);\n  color: #e4e4e4;\n}\n";t("lessify")(e),i.g=e},{"lessify":136}],62:[function(t,i,n){"use strict";n.uo=function(t,i){var n=new FileReader;n.onloadend=function(){return i(n.result)},n.readAsText(t)}},{}],63:[function(t,i,n){"use strict";function e(t){var i=h[t];if(void 0===i)return"("+t+")"
;if(arguments.length<=1)return i;for(var n=1;n<arguments.length;n++)i=i.replace("%"+n,arguments[n]);return i}var r=t("./GetFile"),o=t("../log"),s=t("../../assets/i18n_en.json"),h=s;i.g=e,e.init=function(t,i){if(h=s,"en"===t)return i();var n="i18n_"+t+".json";r.wo(n,function(t,e){if(t)return o.error("Failed to get file "+n+": "+t),i(t);h=JSON.parse(e),i()})}},{"../../assets/i18n_en.json":5,"../log":71,"./GetFile":54}],64:[function(t,i,n){"use strict";var e=t("./Dome");n.init=function(t,i){e.init(t,i),n.Gn=document.documentElement.clientWidth,n.Hn=document.documentElement.clientHeight,1456===n.Hn&&(n.Hn+=159)}},{"./Dome":53}],65:[function(t,i,n){var e=".notifPopup {\n  z-index: 3000;\n  border-radius: 13px;\n  background-color: rgba(0, 0, 0, 0.7);\n}\n.notifPopup .title {\n  height: 100px;\n  line-height: 100px;\n  padding: 0 20px;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  border-radius: 12px;\n  background-color: rgba(78, 77, 77, 0.2);\n  color: #ffffff;\n  font-size: 38px;\n}\n.notifPopup .closeBtn {\n  position: absolute;\n  top: 0;\n  right: 0;\n  height: 100px;\n  line-height: 100px;\n}\n.notifPopup .content {\n  padding: 20px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  color: white;\n  font-size: 30px;\n}\n";t("lessify")(e),i.g=e},{"lessify":136}],66:[function(t,i,n){var e=".popupOverlay {\n  z-index: 2000;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.7);\n  transition: opacity 300ms ease-out;\n  opacity: 0;\n}\n.popupDlg {\n  margin: 0 80px;\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.popupDlg .content {\n  padding: 20px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.popupDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.popupDlg .btnDiv .popupDlgBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n}\n";t("lessify")(e),i.g=e},{"lessify":136}],67:[function(t,i,n){"use strict";var e=t("./touchManager");i.g=function(t,i){e.Ap(t.Kn,function(n){if(!t.Kn.disabled)return"tap"===n?(i.call(t),!0):void 0})}},{"./touchManager":69}],68:[function(t,i,n){var e='.topMenuOverlay {\n  z-index: 1900;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: #000;\n  -webkit-transition: opacity 300ms ease-out;\n  transition: opacity 300ms ease-out;\n  -webkit-transform: translate3D(0, 0, 0);\n  transform: translate3D(0, 0, 0);\n}\n.topMenu {\n  width: 100%;\n  height: 130px;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n}\n.topMenu .menuBtn {\n  display: inline-block;\n  width: 130px;\n  height: 100%;\n  background-color: #000;\n}\n.topMenu .menuBtn .menuBtnIcon {\n  background-image: url("assets/menuBtn.png");\n  -webkit-filter: invert(1) grayscale(1);\n  filter: invert(1) grayscale(1);\n}\n.topMenu .topTitle {\n  display: inline-block;\n  vertical-align: top;\n  width: calc(100% - 130px);\n  height: 100%;\n  overflow: hidden;\n  background-color: #333;\n  color: #fff;\n  padding-left: 31px;\n  font-size: 30px;\n  line-height: 130px;\n}\n.topMenu .slideMenu {\n  z-index: 1901;\n  position: absolute;\n  top: 0;\n}\n.topMenu .sideHandle {\n  width: 10px;\n  display: inline-block;\n  vertical-align: top;\n}\n.topMenu .menuContent {\n  display: inline-block;\n  overflow-x: hidden;\n  background-color: #000;\n  color: #fff;\n}\n.topMenu .menuContent .menuTitle {\n  height: 140px;\n  line-height: 140px;\n  padding-left: 50px;\n  font-size: 43px;\n  border-bottom: 1px solid #909090;\n  background-color: #323435;\n}\n.topMenu .menuContent .menuOption {\n  padding: 0 140px;\n  height: 140px;\n  line-height: 140px;\n  font-size: 50px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.topMenu .menuContent .menuSeparator {\n  border-bottom: 1px solid #777;\n}\n';t("lessify")(e),i.g=e},{"lessify":136}],69:[function(t,i,n){"use strict";function e(){this.Kp=this.Lp=0,this.Mp=this.Np=!1,this.startTime=this.Op=0,this.Pp=[],this.Qp=0,this.Rp=null,this.Sp=!1,r()}function r(){window.addEventListener("mousemove",function t(){d.Sp=!0,window.removeEventListener("mousemove",t)})}function o(t){if(d.Mp)return d.Tp();d.Up(t.changedTouches[0],t,t.currentTarget)}function s(t){d.Vp(t.changedTouches[0],t)}function h(t){if(t.changedTouches.length>1)return d.Tp();d.Wp(t.changedTouches[0],t)}function u(){d.Tp()}function a(t){t.button===f&&d.Up(t,t,t.currentTarget)}function c(t){t.button===f&&d.Vp(t,t)}function l(t){d.Wp(t,t)}function p(t,i,n){i.Yp&&(i.$p=null,t.eq(i,n))}var f=0,d=i.g=new e;e.prototype.Xp=function(t){this.Pp.push(t),this.Qp++,t.Yp=!0,t.addEventListener("touchmove",h),t.addEventListener("touchend",s),t.addEventListener("touchcancel",u),1===this.Qp&&(document.addEventListener("mousemove",l),document.addEventListener("mouseup",c))},e.prototype.Zp=function(t){var i=this.Pp.indexOf(t);if(i<0)return console.error("_stopListening: not a target",t);this.Pp[i]=null,this.Qp--,t.Yp=!1,t.$p&&window.clearTimeout(t.$p),t.removeEventListener("touchmove",h),t.removeEventListener("touchend",s),t.removeEventListener("touchcancel",u),0===this.Qp&&(document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",c),this.Pp.length=0)},e.prototype._p=function(){this.aq(null)},e.prototype.aq=function(t){for(var i=0;i<this.Pp.length;i++){var n=this.Pp[i];n&&n!==t&&this.Zp(n)}this.Rp=t},e.prototype.Up=function(t,i,n){this.Np&&this.bq(),this.Xp(n),this.Kp=t.clientX,this.Lp=t.clientY,this.startTime=Date.now();var e=n.cq;if(e.Bp&&!this.Mp){var r=e.dq;0===r?i.preventDefault():e.$p=window.setTimeout(p,r,this,n,t)}},e.prototype.Wp=function(t,i){var n=Date.now();if(n-this.Op<50)return i.preventDefault();this.Op=n;var e;if(this.Mp)return e=this.Rp.cq,e.fq("drag",t.pageX-e.gq,t.pageY-e.hq),i.preventDefault();for(var r=Math.abs(t.clientX-this.Kp)+Math.abs(t.clientY-this.Lp),o=0;o<this.Pp.length;o++){var s=this.Pp[o];if(s&&(e=s.cq,!(r<e.iq)))if(e.Bp){if(!(n-this.startTime<e.dq)){this.eq(s,t);break}this.Zp(s)}else this.Zp(s)}i.preventDefault()},e.prototype.Vp=function(t,i){i.preventDefault();var n,e;if(this.Np=!0,this.Mp){n=this.Rp,e=n.cq;if(Date.now()-this.startTime<e.jq)return this.Tp();this.Mp=!1,this.Zp(n),e.fq("dragEnd",t.pageX-e.gq,t.pageY-e.hq)}else{for(var r=0;r<this.Pp.length&&(!(n=this.Pp[r])||(e=n.cq,!e.fq("tap",t.pageX-e.gq,t.pageY-e.hq)));r++);this._p()}this.Np=!1},e.prototype.bq=function(){console.warn("Cleaning up touchManager"),this.Np=!1,this._p()},e.prototype.eq=function(t,i){this.Mp=!0,this.startTime=Date.now(),this.aq(t);var n=t.cq;n.fq("dragStart",i.pageX-n.gq,i.pageY-n.hq)},e.prototype.Tp=function(){this.Mp&&(this.Mp=!1,this.Rp.cq.fq("dragCancel")),this._p()},e.prototype.Ap=function(t,i,n){n=n||{};var e={fq:i,iq:void 0!==n.kq?n.kq:10};n.Bp&&(e.Bp=!0,e.dq=n.lq||0,e.jq=void 0!==n.Cp?n.Cp:100,e.gq=t.offsetLeft,e.hq=t.offsetTop),t.cq=e,t.addEventListener("touchstart",o),t.addEventListener("mousedown",a)}},{}],70:[function(t,i,n){"use strict";function e(t){return decodeURIComponent(t.replace(o," "))}var r=/([^&=]+)=?([^&]*)/g,o=/\+/g;n.mq=function(t){t=(t||window.location.search).substring(1);for(var i={};;){var n=r.exec(t);if(!n)break;i[e(n[1])]=e(n[2])}return i},n.nq=function(t){var i=document.createElement("a");i.href=t,i.click()}},{}],71:[function(t,i,n){"use strict";function e(){this.level=NaN,this.oq=null,this.xi=0,this.qj=1,this.pq=2,this.ERROR=3,this.qq=4,this.rq=!1,this.Ye=!1}var r=console;e.prototype.wi=function(t){t!==this.level&&(this.level=t,this.debug=t<=0?this.sq:null,this.info=t<=1?this.Kg:null,this.warn=t<=2?this.bn:null,this.error=t<=3?this.tq:null,this.fatal=t<=4?this.uq:null)},e.prototype.vq=function(t){this.oq=t},e.prototype.wq=function(t,i){var n=this;return function(e){n.level>t||n.oq&&!n.oq(t,e)||i.call(r,e)}};var o=i.g=new e;e.prototype.sq=o.wq(0,r.debug),e.prototype.Kg=o.wq(1,r.info),e.prototype.bn=o.wq(2,r.warn),e.prototype.tq=o.wq(3,r.error),e.prototype.uq=o.wq(4,r.error),o.wi(1)},{}],72:[function(t,i,n){"use strict";function e(){this.appName=r.name,this.appVersion=r.version,this.xq=null,this.yq=null}var r=t("../package.json");i.g=new e},{"../package.json":142}],73:[function(t,i,n){"use strict";function e(){var t=window.location;return t.protocol+"//"+t.host+t.pathname}function r(t){this.Dq=t,this.Eq=null,this.files=null,this.Fq=null}var o=t("Dropbox"),s=t("../hh/fileHelper"),h=t("../hh/getText"),u=t("../../config/net.json"),a=t("../hh/PopupDlg"),c=t("../hh/urlHelper");n.zq=function(t){var i=c.mq(window.location.hash);if(i["error"])return t.Zc("dbxToken",null),new a(null,i["error_description"],h("#problem")+": "+i["error"],{},function(){t.Fo(),c.nq(e())}),!1;var n=i["access_token"];return!!n&&(t.Zc("dbxToken",n),t.Fo(),c.nq(e()),!0)},n.Aq=function(t){var i=t._c("dbxToken");return i?new r(i):null},n.Bq=function(){var t=new o({"clientId":u["dropbox-clientId"]}),i=t.Cq(e());c.nq(i)},r.prototype.connect=function(t){this.Eq||(this.Eq=new o({"accessToken":this.Dq})),this.Gq("",t)},r.prototype.Gq=function(t,i){if(!this.Eq)return i(h("#noDropbox"));var n=this;this.Eq.Hq({"path":t}).then(function(t){var e=t["entries"];n.files={};for(var r=0;r<e.length;r++)n.Iq(e[r]);i()}).catch(i)},r.prototype.Iq=function(t){var i=t["path_display"];"file"!==t[".tag"]?this.files[i]={path:i,Jq:!0}:this.files[i]={path:i,timestamp:t["server_modified"]}},r.prototype.Kq=function(t){if("/"!==(t=t||"/"))throw new Error("Unsupported call to getNumEntries + path");return this.Fq=Object.keys(this.files),this.Fq.length},r.prototype.Lq=function(t){var i=this.Fq[t];return i?{path:i,timestamp:this.files[i].timestamp}:null},r.prototype.ro=function(t,i){if(!this.Eq)return i(h("#noDropbox"));this.Eq.Mq({"path":t}).then(function(t){s.uo(t["fileBlob"],function(n){i(null,n,t["server_modified"])})}).catch(i)},r.prototype.to=function(t,i,n){if(!this.Eq)return n(h("#noDropbox"));var e=new Blob([i],{type:"text/plain"}),r=this;this.Eq.Nq({"path":t,"contents":e,"mode":{".tag":"overwrite"},"mute":!0}).then(function(i){var e=i["server_modified"];r.files[t]={timestamp:e},n(null,e)}).catch(n)},r.prototype.Oq=function(t,i){if(!this.Eq)return i(h("#noDropbox"));var n=this;this.Eq.Pq({"path":t}).then(function(){n.files[t]={Jq:!0},i()}).catch(i)},r.prototype.Qq=function(t,i){if(!this.Eq)return i(h("#noDropbox"));var n=this;this.Eq.Rq({"path":t}).then(function(){delete n.files[t],i()}).catch(i)},r.prototype.Sq=function(t,i,n){if(!this.Eq)return n(h("#noDropbox"));var e=this;this.Eq.Tq({"from_path":t,"to_path":i}).then(function(){e.files[i]=e.files[t],delete e.files[t],n()}).catch(n)}},{"../../config/net.json":7,"../hh/PopupDlg":58,"../hh/fileHelper":62,"../hh/getText":63,"../hh/urlHelper":70,"Dropbox":105}],74:[function(t,i,n){"use strict";function e(t,i,n,e){this.rc=t,this.Uq=i,this.Vq=n,this.Wq=e,this.Xq=null,this.Yq=this.Zq=null}function r(t){return"/"+t}function o(t){return p+"/"+t}function s(t){return new Date(t).toISOString().substring(0,19)+"Z"}function h(t){return new Date(t).getTime()}var u=t("contra"),a=t("../GameInVault"),c=t("../GameVault").Ic,l=t("../hh/getText"),p="/archivedGames";i.g=e,e.prototype.connect=function(t){this.Xq={};var i=this;this.Uq.connect(function(n){if(n)return i.$q(n,t);i._q(t)})},e.prototype.$q=function(t,i){var n=t;"string"==typeof t.error&&(n=t.error,void 0!==t.response&&(n+="\nResponse: "+t.response),void 0!==t.status&&(n+="\nStatus: "+t.status)),this.Wq(n),i(t)},e.prototype._q=function(t){for(var i=!1,n=!1,e=this.Uq.Kq(),r=0;r<e;r++){var o=this.Uq.Lq(r),s=o.path;if("/vaultState.json"===s)i=!0;else if(s===p)n=!0;else{var h=s.substr(1);this.Xq[h]=o.timestamp}}n||this.Uq.Oq(p,function(){}),i?this.ar(t):(this.Yq={},this.Zq={},t())},e.br=s,e.cr=h,e.prototype.dr=function(t,i,n){var e=this.Vq.Mc(t);if(e===c.Jc)return n();if(e===c.ACTIVE)return n();switch(e){case c.Kc:var r=this.Vq.Oc(t),o=s(r.Ja());i>o?(this.Vq.Vc(t),this.Wq(l("#unarchived")+t),n()):(this.Wq(l("#archived")+l("#remote",t)),this.er(t,o,n));break;case c.Lc:var h=s(this.Vq.Nc(t));i>h?(this.Wq(l("#undeleted")+t),n()):(this.Wq(l("#deleted")+l("#remote",t)),this.gr(t,h,n));break;default:throw new Error("Unexpected GameState: "+e)}},e.prototype.hr=function(t,i){var n=this;this.ir(r(t),function(e,r,o){if(e)return i(e);n.jr(r,t,o),n.Wq(l("#downloaded")+t),i()})},e.prototype.ir=function(t,i){this.Uq.ro(t,function(t,n,e){if(t)return self.$q(t,i);var r=[],o=new a;if(!o.xa(n,r))return self.$q(r,i);i(null,o,e)})},e.prototype.kr=function(t,i){var n=t.La(),e=this,o=this.Xq[n];return o?o===t.Ia()?(this.Wq(l("#alreadySync")+n),i()):void this.mr(t,r(n),function(r){if(r)return i(r);e.lr(t,n,i)}):this.lr(t,n,i)},e.prototype.mr=function(t,i,n){var e=this;this.ir(i,function(i,r){if(i)return n(i);var o=[];if(!t.Ca(r,o))return e.$q(o,n);n()})},e.prototype.lr=function(t,i,n){var e=!!this.Xq[i];if(!e){var h=s(t.Ja());if(this.Yq[i]>h)return this.Vq.Qc(i),this.Wq(l("#deleted")+i),n();if(this.Zq[i]>=h)return this.Vq.Tc(i),this.Wq(l("#archived")+i),n()}var u=this;this.Uq.to(r(i),t.Da(),function(r,s){return r?u.$q(r,n):(u.jr(t,i,s),e?(u.Wq(l("#synced")+i),n()):u.Yq[i]?(u.Wq(l("#undeleted")+l("#remote",i)),delete u.Yq[i],u.nr(n)):u.Zq[i]?(u.Wq(l("#unarchived")+l("#remote",i)),delete u.Zq[i],u.nr(function(){u.Uq.Qq(o(i),n)})):(u.Wq(l("#uploaded")+i),void n()))})},e.prototype.jr=function(t,i,n){this.Xq[i]=n,t.Ha(n,h(n)),this.Vq.Ec(t)},e.prototype.or=function(t,i,n,e){this.Zq[i]=n,t.Ha(n,h(n)),this.Vq.Wc(t),this.nr(e)},e.prototype.er=function(t,i,n){this.Zq[t]=i;var e=this;this.nr(function(){delete e.Xq[t],e.Uq.Sq(r(t),o(t),n)})},e.prototype.pr=function(t,i){var n=t.La();if(this.Xq[n])return i();var e=t.Ia(),r=this.Zq[n],s=this;if(r===e)return i();var h=o(n);if(!r)return this.Yq[n]?i():this.Uq.to(h,t.Da(),function(e,r){if(e)return i(e);s.Wq(l("#uploaded")+l("#archivedGame",n)),s.or(t,n,r,i)});this.mr(t,h,function(e){if(e)return i(e);s.Uq.to(h,t.Da(),function(e,r){if(e)return i(e);s.Wq(l("#synced")+l("#archivedGame",n)),s.or(t,n,r,i)})})},e.prototype.qr=function(t,i){var n=this;this.ir(o(t),function(e,r,o){if(e)return i(e);n.Wq(l("#downloaded")+l("#archivedGame",t)),n.or(r,t,o,i)})},e.prototype.gr=function(t,i,n){this.Yq[t]=i;var e=this;this.nr(function(){delete e.Xq[t],e.Uq.Qq(r(t),n)})};e.prototype.ar=function(t){var i=this;this.Uq.ro("/vaultState.json",function(n,e){if(n)return i.$q(n,t);var r=JSON.parse(e);i.Yq=r["deletedFiles"]||{},i.Zq=r["archivedFiles"]||{},t()})},e.prototype.nr=function(t){var i={};i["deletedFiles"]=this.Yq,i["archivedFiles"]=this.Zq;var n=JSON.stringify(i);this.Uq.to("/vaultState.json",n,t)},e.prototype.rr=function(t,i){this.kr(t,i)},e.prototype.sr=function(t){var i=this;u.tr([this.ur.bind(this),this.vr.bind(this),this.wr.bind(this),this.xr.bind(this),this.yr.bind(this)],function(n){if(n)return i.$q(n,t);i.Wq(l("#syncDone")),t()})},e.prototype.ur=function(t){var i=this;u.zr.tr(this.Xq,function(t,n,e){i.dr(n,t,e)},t)},e.prototype.vr=function(t){var i=this;u.zr.tr(this.Vq.Gc(),function(t,n){i.kr(t,n)},t)},e.prototype.wr=function(t){var i=this;u.zr.tr(this.Xq,function(t,n,e){if(i.Vq.Fc(n))return e();i.hr(n,e)},t)},e.prototype.xr=function(t){var i=this;u.zr.tr(this.Vq.Pc(),function(t,n){i.pr(t,n)},t)},e.prototype.yr=function(t){var i=this;u.zr.tr(this.Zq,function(t,n,e){if(i.Vq.Mc(n)!==c.Jc)return e();i.qr(n,e)},t)}},{"../GameInVault":9,"../GameVault":13,"../hh/getText":63,"contra":119}],75:[function(t,i,n){"use strict";var e=t("../../config/net.json");n.Ar=function(t){var i,n=(t.Ua("source")||"").toLowerCase(),e=t.Ua("place")||"";return n.indexOf("littlegolem")>=0?(i=t.Ua("event"),i?{Br:"LittleGolem",id:i}:null):n.indexOf("www.dragongoserver")>=0?(i=n.substr(n.indexOf("gid=")+4),{Br:"DragonGo",id:i}):e.indexOf("online-go.com/game/")>=0?(i=e.substr(e.indexOf("/game/")+6),{Br:"OGS",id:i}):null},n.Cr=function(t,i){return e["server-url"]+"getgame?site="+t+"&id="+i},n.Dr=function(t){switch(t.Br){case"LittleGolem":return"http://www.littlegolem.net/servlet/sgf/"+t.id+"/game.sgf";case"DragonGo":return"http://www.dragongoserver.net/sgf.php?gid="+t.id+"&owned_comments=1";case"OGS":return"https://online-go.com/api/v1/games/"+t.id+"/sgf";default:return null}};var r={"http://www.littlegolem.com":"LittleGolem","OGS: http://online-go.com/game/":"OGS:","http://www.dragongoserver.net/game.php?gid=":"DragonGo:"};n.Na=function(t,i){for(var n in r)i=i.replace(n,r[n]);return"EV"===t&&""+parseInt(i)===i&&(i="EV:"+i),i}},{"../../config/net.json":7}],76:[function(t,i,n){"use strict";function e(){this.debug=!1,this.Er=this.an=!1,this.Fr=null,this.Gr=null}i.g=new e,e.prototype.Hr=function(t,i){this.Fr=new t,i(this.Fr)},e.prototype.assert=function(t,i){if(t!==!0)throw new Error("assertion failed: "+(i||t))}},{}],77:[function(t,i,n){"use strict";function e(){this.Ir=null,this.Jr=null,this.fb=null,this.tb=0,this.Kr=null,this.cursor={type:"CR",x:0,y:0},this.Lr=!1,this.Mr={type:null,x:0,y:0}}function r(t){switch(t){case-1:return{type:"mini",c:p.B};case-.5:return{type:"outline",c:p.B};case 0:return null;case.5:return{type:"outline",c:p.W};case 1:return{type:"mini",c:p.W};default:return null}}function o(t){switch(t){case u.Ae+v:case u.ze+g:return{type:"mini",c:p.B};case u.Ae+g:case u.ze+v:return{type:"mini",c:p.W};case u.ye:return{type:"SL",c:"grey"};default:return null}}function s(t){if(null===t)return null;var i=1,n=0,e=2,r=0;if(void 0!==x&&(n=x),void 0!==k&&(e=k),void 0!==j&&(r=j),t===r)return null;for(var o=t.toFixed(e),s=n;s<e;s++)o=o.od("0");if(o=o.od("."),"0."===o.substr(0,2)&&(o=o.slice(1)),0===r){if("0"===o||".0"===o)return null;i=t<1?.6:1}return{type:"LB",text:o,scale:i}}var h=t("../constants"),u=t("../Grid"),a=t("../log"),c=t("../Move"),l=t("../hh/touchManager");t("../../lib/wgo.js");var p=window.WGo,f=c.ne,d=c._a,g=h.bb,v=h.ab,y=h.EMPTY,b=window.devicePixelRatio||1,m={};m[p.B]=v,m[p.W]=g;var w={};w[y]=null,w[v]=p.B,w[g]=p.W;i.g=e,e.prototype.create=function(t,i,n,e){var r=n.tb;if(this.fb=n,!this.Ir||this.tb!==r){this.tb=r,e=e||{};var o=e.Nr?0:-.23,s={size:r,width:i,section:{top:o,left:o,right:o,bottom:o},coordFontSize:.6};switch(e.background){case"wood":s.background=(window.Or||".")+"/assets/wood1.jpg";break;default:s.background="#c75"}t.clear(),this.Ir=new p.Pr(t.Zn(),s),this.Lr=!1,this.Mr.type=null,e.Nr||this.Ir.Qr(p.Pr.Rr),this.Sr()}},e.prototype.Sr=function(){var t=this;l.Ap(this.Ir.Tr,function(i,n,e){if("dragCancel"===i)return t.Ur(-1,-1);"drag"===i.substr(0,4)&&(e-=65*b);var r=t.Vr(n,e);switch(n=r[0],e=r[1],i){case"dragStart":case"drag":return t.Ur(n,e);case"dragEnd":if(t.Ur(-1,-1),Date.now()-t.Wr<300)return;return t.Xr(n,e);case"tap":return t.Xr(n,e)}},{Bp:!0,lq:300,Cp:500})},e.prototype.Yr=function(t){this.Zr=w[t]},e.prototype.Ur=function(t,i){var n=this.$r(t,i);if(this.Lr){if(t===this.cursor.x&&i===this.cursor.y)return;this.Ir._r(this.cursor)}this.Lr=n,n&&(this.cursor.x=t,this.cursor.y=i,this.Wr=Date.now(),this.Ir.as[t][i][0]?(this.cursor.type="SL",this.cursor.c=void 0):(this.cursor.type=void 0,this.cursor.c=this.Zr),this.Ir.bs(this.cursor))},e.prototype.cs=function(t,i,n){this.Mr.type&&this.Ir._r(this.Mr),this.Mr.type=t,t&&(this.Mr.x=i-1,this.Mr.y=this.tb-n,this.Ir.bs(this.Mr))},e.prototype.ds=function(t,i,n,e){this.Ir.bs({x:i-1,y:this.tb-n,type:"LB",text:t,scale:e?1.1:.8})},e.prototype.$r=function(t,i){return t>=0&&i>=0&&t<this.tb&&i<this.tb},e.prototype.Xr=function(t,i){var n=t+1,e=this.tb-i;if(!this.$r(t,i))return this.Jr("!"+(n>=1&&n<=this.tb?f(n):e));if(this.fb.Vd(n,e)===y){var r=d(n,e);this.Jr(r)}},e.prototype.es=function(t){this.Jr=t},e.prototype.Vr=function(t,i){var n=this.Ir;return t=Math.round((t*b-n.left)/n.gs),i=Math.round((i*b-n.top)/n.hs),[t,i]},e.prototype.refresh=function(){var t=!1;"regular"!==this.Kr&&(this.Kr="regular",t=!0);for(var i=0;i<this.tb;i++)for(var n=0;n<this.tb;n++){var e=this.fb.Vd(n+1,this.tb-i),r=w[e],o=this.Ir.as[n][i][0];t&&(o=null,this.Ir.js(n,i)),null===r?o&&this.Ir.js(n,i):o&&o.c===r||(o&&this.Ir.js(n,i),this.Ir.bs({x:n,y:i,c:r}))}},e.prototype.show=function(t,i,n){this.refresh(),this.Kr=t;for(var e=0;e<this.tb;e++)for(var r=0;r<this.tb;r++){var o=n(i[this.tb-e][r+1]);o&&(o.x=r,o.y=e,this.Ir.bs(o))}};var x,k,j;e.prototype.ks=function(t,i,n){x=t,k=i,j=n};var M={_j:r,ls:o,value:s};e.prototype.ms=function(t,i){var n=M[t];if(!n)return a.error&&a.error("invalid display type: "+t);this.show(t,i,n)},e.prototype.ns=function(t){this.show("scoring",t,o)}},{"../../lib/wgo.js":99,"../Grid":17,"../Move":21,"../constants":50,"../hh/touchManager":69,"../log":71}],78:[function(t,i,n){"use strict";function e(t,i){this.Vq=t,this.Zo=i,this.dp(),s.No(this.Ho)}t("./importDlg.less");var r=t("../hh/Dome"),o=t("../hh/getText"),s=t("../hh/PopupDlg");i.g=e,e.prototype.dp=function(){var t=this.Ho=r.yn(null,"importDialog dialog");t.Sn(!1),t.yn("dialogTitle").Bn(o("#importGame"));var i=this.os=t.yn("mainDiv");this.ps=r.ho(i,"loadGame",o("#fromFile")).setAttribute("type","file").setAttribute("id","fileInput").Sn(!1),new r(i,"label","btn fileInputBtn").Bn(o("#selectFile")).setAttribute("for","fileInput"),this.ps.v("change",this.qs.bind(this)),r.fo(i);var n=i.yn("moves");this.xf=r.ho(n,"moves",o("#fromText")),n.yn("loadMovesInfo").Bn(o("#fromTextHelp"));var e=t.yn("btnDiv");r.ao(e,"loadBtn",o("#load"),this.qs.bind(this)),r.ao(e,"cancelBtn",o("#cancel"),this.rs.bind(this)),t.Sn(!0),s.En(t,document.body)},e.prototype.qs=function(){if(this.ps.so()){var t=this;this.ps.to(function(i){t.ss(i)})}else this.ss(this.xf.value())},e.prototype.ss=function(t){if(t){var i=[],n=this.Vq.Xc(t,i);if(!n)return new s(null,i.join("\n"));this.Zo({Vb:n})&&s.Jn(this.Ho)}},e.prototype.rs=function(){s.Jn(this.Ho),this.Zo({ts:!0})}},{"../hh/Dome":53,"../hh/PopupDlg":58,"../hh/getText":63,"./importDlg.less":89}],79:[function(t,i,n){"use strict";function e(t,i,n){var e=this.Kn=t.yn("moveIndicator "+i);this.us=e.yn("label").Bn(n);var r=e.yn("icon");this.vs=r.yn("text")}t("./moveIndicator.less");var r=t("../constants"),o=r.bb,s=r.ab;i.g=e,e.prototype.ws=function(t,i,n){this.Kn.Sn(null!==t),null!==t&&(this.Kn.Wn("black",i===s),this.Kn.Wn("white",i===o),this.vs.Bn(t),n&&this.us.Bn(n))}},{"../constants":50,"./moveIndicator.less":90}],80:[function(t,i,n){"use strict";function e(t,i){this.Vq=t,this.xs=i,this.ys=!1,this.zs=null,this.As=null,this.dp(),this.jd(),u.No(this.Ho)}function r(){this.Cs.Bs(this)}t("./myArchivedGamesDlg.less");var o=t("../hh/Dome"),s=t("../GameInVault"),h=t("../hh/getText"),u=t("../hh/PopupDlg"),a=t("../hh/tapBehavior");i.g=e,e.prototype.Bs=function(t){this.zs&&this.zs.Wn("selected",!1),t.Wn("selected",!0),this.zs=t,this.As=t.pa,this.Ds()},e.prototype.Es=function(){this.Fs.Pn()||this.Fs.yn("emptyMsg").Bn(h("#empty")),this.zs=null,this.Ds()},e.prototype.Ds=function(){var t=!!this.zs;this.Gs.Vn(t),this.Hs.Vn(t)},e.prototype.Is=function(){if(this.zs){var t=h("#deleteGameConfirm")+"\n\n"+this.zs.text(),i=this;u._o(null,t,function(){i.Vq.Sc(i.As)||console.error("Failed to delete gameId: "+i.As),i.Fs.removeChild(i.zs),i.Es()})}},e.prototype.Js=function(){this.zs&&this.Vq.Vc(this.As)&&(this.ys=!0,this.Fs.removeChild(this.zs),this.Es())},e.prototype.jd=function(){var t=this.Vq.Pc();t.sort(s.Oa),this.Fs.Qn();for(var i=0;i<t.length;i++){var n=t[i],e=this.Fs.yn("oneGame").Bn(n.Ka());e.pa=n.La(),e.Cs=this,a(e,r)}this.Es()},e.prototype.dp=function(){var t=this.Ho=o.yn(null,"myArchivedGamesDialog dialog");t.Sn(!1),t.yn("dialogTitle").Bn(h("#archivedGames"));var i=this.os=t.yn("mainDiv");this.Fs=i.yn("gameList"),this.Gs=o.ao(i,"delGameBtn",h("#deleteGame"),this.Is.bind(this)),this.Hs=o.ao(i,"restoreGameBtn",h("#restoreGame"),this.Js.bind(this));var n=t.yn("btnDiv");o.ao(n,"closeBtn",h("#close"),this.Ks.bind(this)),t.Sn(!0),u.En(t,document.body)},e.prototype.Ks=function(){u.Jn(this.Ho),this.ys&&this.xs()}},{"../GameInVault":9,"../hh/Dome":53,"../hh/PopupDlg":58,"../hh/getText":63,"../hh/tapBehavior":67,"./myArchivedGamesDlg.less":91}],81:[function(t,i,n){"use strict";function e(t,i){this.Vq=t,this.Zo=i,this.result={},this.zs=null,this.As=null,this.dp(),this.jd(),c.No(this.Ho)}function r(){this.Cs.Bs(this)}function o(){var t=this.Cs;t.Es(),t.Ns.Vn(this.value()>0)}t("./myGamesDlg.less");var s=t("../hh/Dome"),h=t("../GameInVault"),u=t("../hh/getText"),a=t("./MyArchivedGamesDlg"),c=t("../hh/PopupDlg"),l=t("../hh/tapBehavior");i.g=e,e.prototype.Bs=function(t){this.zs&&this.zs.Wn("selected",!1),t.Wn("selected",!0),this.zs=t,this.As=t.pa,this.Ds(),this.Ls.select(0)},e.prototype.Es=function(){this.Fs.Pn()||this.Fs.yn("emptyMsg").Bn(u("#myGamesHelp")),this.zs&&this.zs.Wn("selected",!1),this.zs=null,this.Ds()},e.prototype.Ds=function(){var t=!!this.zs;this.Gs.Vn(t),this.Ms.Vn(t),this.Ns.Vn(t)},e.prototype.Is=function(){if(this.zs){var t=u("#deleteGameConfirm")+"\n\n"+this.zs.text(),i=this;c._o(null,t,function(){i.Vq.Qc(i.As)||console.error("Failed to delete gameId: "+i.As),i.Fs.removeChild(i.zs),i.Es()})}},e.prototype.Os=function(){if(this.zs){var t=u("#archiveGameConfirm")+"\n\n"+this.zs.text(),i=this;c._o(null,t,function(){i.Vq.Tc(i.As)&&(i.Fs.removeChild(i.zs),i.Es())})}},e.prototype.Ps=function(){new a(this.Vq,this.jd.bind(this))},e.prototype.jd=function(){var t=this.Vq.Gc();t.sort(h.Oa),this.Fs.Qn();for(var i=0;i<t.length;i++){var n=t[i],e=this.Fs.yn("oneGame").Bn(n.Ka());e.pa=n.La(),e.Cs=this,l(e,r)}this.Es()},e.prototype.dp=function(){var t=this.Ho=s.yn(null,"myGamesDialog dialog");t.Sn(!1),t.yn("dialogTitle").Bn(u("#myGames"));var i=this.os=t.yn("mainDiv");this.Fs=this.os.yn("gameList"),this.Gs=s.ao(i,"delGameBtn",u("#deleteGame"),this.Is.bind(this)),this.Ms=s.ao(i,"archiveGameBtn",u("#archiveGame"),this.Os.bind(this)),this.Qs=s.ao(i,"showArchiveBtn",u("#showArchivedGames"),this.Ps.bind(this));var n=i.yn();s.eo(n,"inputLbl",u("#recentGames"));var e=[u("#none")].concat(this.Vq.ad());this.Ls=s.lo(n,"recentGames",e,"byIndex"),this.Ls.v("change",o),this.Ls.Cs=this;var r=t.yn("btnDiv");this.Ns=s.ao(r,"loadBtn",u("#load"),this.qs.bind(this)),s.ao(r,"cancelBtn",u("#cancel"),this.ss.bind(this,!0)),t.Sn(!0),c.En(t,document.body)},e.prototype.qs=function(){var t=this.Ls.value();t>0?(this.result.Vb=this.Vq.Ac(t-1),this.ss()):this.zs&&(this.result.Vb=this.Vq.yc(this.As),this.ss())},e.prototype.ss=function(t){this.result.ts=!!t,this.Zo(this.result)&&c.Jn(this.Ho)}},{"../GameInVault":9,"../hh/Dome":53,"../hh/PopupDlg":58,"../hh/getText":63,"../hh/tapBehavior":67,"./MyArchivedGamesDlg":80,"./myGamesDlg.less":92}],82:[function(t,i,n){"use strict";function e(t,i){this.Zo=i,this.Rs=t.tb,this.Ss=t.Ss,this.dp(t),this.Ts(),this.Us(),u.No(this.Ho)}t("./newGameDlg.less");var r=t("../ai"),o=t("../constants"),s=t("../hh/Dome"),h=t("../hh/getText"),u=t("../hh/PopupDlg"),a=t("../hh/Transit"),c=o.ab,l=o.bb,p=[5,7,9,13,19];i.g=e,e.prototype.Ts=function(){var t=this.Rs;this.Vs.Bn(t+" x "+t);var i=t+"x"+t;this.Ws.In("backgroundImage",'url("assets/'+i+'.png")'),this.Ws.In("backgroundSize",Math.ceil(t/19*100)+"%"),this.Xs.Vn(t>5),this.Ys.Vn(t<19)},e.prototype.Zs=function(t){var i=p.indexOf(this.Rs)+t;this.Rs=p[i],this.Ts()},e.prototype.Us=function(){this.$s[c].Wn("robot",this.Ss[c]),this.$s[l].Wn("robot",this.Ss[l])},e.prototype._s=function(t){this.Ss[t]=!this.Ss[t],this.Us()},e.prototype.dp=function(t){this.options=t;var i=this.Ho=s.yn(document.body,"newGameDialog dialog");i.Sn(!1),i.yn("dialogTitle").Bn("Start a new game");var n=i.yn("mainDiv"),e=n.yn("centeredDiv").yn("boardDiv");this.$s=[],this.$s[0]=s.bo(e,"playerBtn",this._s.bind(this,0));var o=this.at=e.yn("sizeBox");this.Ys=s.bo(o,"sizeBtn",this.Zs.bind(this,1)),this.Ws=o.yn("boardImgFrame").yn("boardImg"),this.Vs=this.Ws.yn("curSize"),this.Xs=s.bo(o,"sizeBtn",this.Zs.bind(this,-1)),this.Xs.Wn("down",!0),this.$s[1]=s.bo(e,"white playerBtn",this._s.bind(this,1)),this.bt=s.ao(n,"advancedBtn","More options >>",this.ct.bind(this));var u=this.dt=i.yn("advancedDiv");s.eo(u,"inputLbl","Handicap:"),this.et=s.lo(u,"handicap",[0,2,3,4,5,6,7,8,9],null,t.et);var a=u.yn("rules");s.eo(a,"inputLbl","Rules:"),this.rules=s.lo(a,"rules",["Japanese","Chinese"],null,t.rules);var c=Object.keys(r.ln);if(c.length>1){var l=u.yn();s.eo(l,"inputLbl","Black AI:"),this.kg=s.lo(l,"defaultAi",c,null,r.kg.name),s.eo(l,"defAiInfo","(White AI always uses latest AI version)")}var p=s.ao(i,"startBtn",h("#play"),this.ft.bind(this));i.Sn(!0);var f=this.dt.Kn.clientHeight+p.Kn.clientHeight+24;this.dt.In("marginTop",-f+"px")},e.prototype.ct=function(){this.gt?(this.ht=!this.ht,this.gt.Jp(200)):(this.dt.Sn(!0),this.ht=!0,this.gt=new a(this.dt).Oo("marginTop","0").start(200)),this.bt.Bn("More options"+(this.ht?" <<":" >>"))},e.prototype.ft=function(){var t=this.options;t.tb=this.Rs,t.et=~~this.et.value(),t.Ss=this.Ss,r.kg=this.kg?r.ln[this.kg.value()]:r.kg,t.rules=this.rules.value(),this.ss()},e.prototype.ss=function(){this.close(),this.Zo(this.options)},e.prototype.close=function(){s.removeChild(document.body,this.Ho)}},{"../ai":49,"../constants":50,"../hh/Dome":53,"../hh/PopupDlg":58,"../hh/Transit":60,"../hh/getText":63,"./newGameDlg.less":93}],83:[function(t,i,n){"use strict";function e(t){this.parent=t,this.it=null}t("./progressLog.less");var r=t("../hh/NotificationPopup");i.g=e,e.prototype.start=function(t,i){this.it=new r(this.parent,null,{Io:!0,Ko:!0,title:t}),this.it.Mo(!1),this.it.Lo(i),this.it.show()},e.prototype.stop=function(){this.it.Mo(!0),this.it=null},e.prototype.Lo=function(t){this.it.Lo(t)}},{"../hh/NotificationPopup":56,"./progressLog.less":94}],84:[function(t,i,n){"use strict";function e(t){this.Xb=!1,this.xq=t,this.Vb=t.Vb,this.jt=t.jt,this.ra=null,this.kt=null,this.Wh=null}t("./reviewUi.less");var r=t("../constants"),o=t("../hh/ContextMenu"),s=t("../hh/Dome"),h=t("../hh/getText"),u=t("../Move"),a=u.$a;i.g=e,e.prototype.lt=function(){this.Xb=!1,this.ra=null},e.prototype.nt=function(t,i,n){this.kt=s.no(),this.ot=s.ao(t,"study","",this.pt.bind(this)),s.ao(i,"back10","<<",this.qt.bind(this,-10)),s.ao(i,"back1","<",this.qt.bind(this,-1)),s.ao(i,"forw1",">",this.qt.bind(this,1)),s.ao(i,"forw10",">>",this.qt.bind(this,10)),this.rt=s.bo(n,"pruneBtn",this.st.bind(this))},e.prototype.tt=function(){this.ot.Bn(this.Xb?"...":h("#review")),this.kt.Sn(["back1","back10","forw1","forw10","pruneBtn"],this.Xb)},e.prototype.pt=function(){if(!this.Xb)return this.ut();var t=new o({Dn:!0});t.An(h("#evalScore"),this.vt.bind(this)),t.An(h("#rewindAll"),this.wt.bind(this)),t.An(h("#endStudy"),this.xt.bind(this)),t.Cn(this.ot)},e.prototype.vt=function(){var t=this.xq.yt(r.ab).cn();this.xq.Ir.ns(t[0]),this.Wh.Bn(this.xq.zt.og(t[1]).join("\n"))},e.prototype.st=function(){var t=this.ra;if(t.Sf())return!1;for(var i;;){if(i=t.Qf(),!t.$f())return!1;if(this.Vb.Hb("half_undo"),t.dg())break}return!!t.gg(i)&&(this.At(),!0)},e.prototype.ut=function(){this.Xb=!0,this.ra=this.jt.kc(),this.Wh=this.xq.Bt,this.xq.tt(),this.At()},e.prototype.xt=function(){this.Xb=!1,this.Ct(),this.jt.lc(),this.Dt(),this.xq.Et(),this.xq.Ft(),this.xq.tt()},e.prototype.Gt=function(t){if(!this.Vb.Hb(t))return this.xq.statusMessage(this.Vb.Ib().join("\n"));this.ra.Yf(t),this.At()},e.prototype.qt=function(t){for(var i,n=this.ra,e=0;e<t&&(i=n.ag())&&(this.Vb.Hb(i),!n.dg());e++);for(e=0;e>t&&n.$f()&&(this.Vb.Hb("half_undo"),!n.dg());e--);this.At()},e.prototype.wt=function(){this.ra.Tf(),this.Vb.wb(),this.At()},e.prototype.Ct=function(){for(this.ra.Tf(),this.Vb.wb();;){var t=this.ra.bg();if(!t)break;this.Vb.Hb(t)}},e.prototype.At=function(){this.xq.Et();var t=this.ra,i=t.cg();if(this.kt.Vn(["forw1","forw10"],i),this.kt.Vn(["back1","back10"],t.Rf()>=0),this.rt.Sn(!t.Sf()),i||this.xq.Ht(),this.It(i),this.xq.Jt){var n=t.Qf();n&&n.length<=3&&this.xq.Kt(n)}},e.prototype.Dt=function(){this.Wh.Qn()},e.prototype.It=function(t){if(this.Wh.Qn(),this.xq.Ft(t),t){var i=this.ra.dg();i&&this.Lt(t,i)}this.Mt()},
e.prototype.Lt=function(t,i){for(var n=0;n<i.length;n++){var e=i[n];if(e){var r=e===t||0===n,o=a(e),h=n?String.fromCharCode(64+n):"*";o?this.xq.Ir.ds(h,o[0],o[1],r):h=e,s.ao(this.Wh,"variationBtn",h,this.Gt.bind(this,e))}}},e.prototype.Mt=function(){var t=this.ra.Uf();t&&t.Ig&&this.Wh.yn("moveComment").Bn(t.Ig)}},{"../Move":21,"../constants":50,"../hh/ContextMenu":52,"../hh/Dome":53,"../hh/getText":63,"./reviewUi.less":95}],85:[function(t,i,n){"use strict";function e(t){var i=this.Ho=s.yn(null,"settingDlg dialog");i.yn("dialogTitle").Bn(u("#settings"));var n=i.yn("content"),e=a.Uo();s.eo(n,"inputLbl",u("#colorTheme")+":"),s.lo(n,"theme",e,null,a.Ro).v("change",function(){var i=this.value();a.To(i),t.Zc("theme",i)});var h=n.yn("cloudDiv");s.eo(h,"inputLbl",u("#syncMyGames")+":"),s.ao(h,"dropboxBtn",u("#setupDropbox"),r);var l=i.yn("btnDiv");s.ao(l,"okBtn",u("#ok"),o).Xo=this,c.En(i,document.body)}function r(){h.Bq()}function o(){var t=this.Xo;c.Jn(t.Ho)}t("./settingDlg.less");var s=t("../hh/Dome"),h=t("../net/DropboxHelper"),u=t("../hh/getText"),a=t("../hh/Painter"),c=t("../hh/PopupDlg");i.g=e},{"../hh/Dome":53,"../hh/Painter":57,"../hh/PopupDlg":58,"../hh/getText":63,"../net/DropboxHelper":73,"./settingDlg.less":96}],86:[function(t,i,n){"use strict";function e(t){this.Pt(),this.rc=L,this.Vb=new c,this.zt=new B(this.Vb),this.jt=new l(this.Vb),this.Vq=new p(L),this.Qt=new q(this),this.Ir=null,this.Rt=new j(document.body),this.St=a.Aq(L),this.Tt=0,this.Ut=!this.Vt,t&&this.Vb.qb(t)}t("./ui.less");var r=t("../ai"),o=t("./Board"),s=t("../../config/colors.json"),h=t("../constants"),u=t("../hh/Dome"),a=t("../net/DropboxHelper"),c=t("../GameLogic"),l=t("../GameRecord"),p=t("../GameVault"),f=t("../hh/GetFile"),d=t("../hh/getText"),g=t("../net/goSites"),v=t("../hh"),y=t("./ImportDlg"),b=t("../main"),m=t("../Move"),w=t("./MoveIndicator"),x=t("./MyGamesDlg"),k=t("./NewGameDlg"),j=t("./ProgressLog"),M=t("../hh/Painter"),S=t("../hh/PopupDlg"),z=t("../hh/LocalPref"),q=t("./ReviewUi"),B=t("../ScoreAnalyser"),D=t("./SettingDlg"),A=t("../net/SyncHelper"),T=t("./UiTopMenu"),C=m.$a,E=m.Za,I=h.bb,G=h.ab,P=h.tn,_=h.sn,L=new z("1g0_1");e.Nt=function(){L.Do(),M.So(s,L._c("theme",".neonBlack")),v.init(M),document.body.style.height=v.Hn+"px",d.init("en",function(){a.zq(L)||(new e).Ot()})},i.g=e,e.prototype.Pt=function(){this.tb=9,this.et=0,this.Ss=[P,_],this.Wt=!1},e.prototype.Ot=function(){u.po(b.appName+(this.Ut?"":" dev")),window.addEventListener("beforeunload",this.Xt.bind(this,"unloading")),window.addEventListener("visibilitychange",this.Xt.bind(this,"visibility")),window.setInterval(this.Xt.bind(this,"autosave"),3e5),this.Tt=L._c("newGameIndex",1),this.Yt=new T(this.Zt.bind(this));var t=this.Vq.$c();if(t){if(this.$t(t))return;this.Pt()}this._t()},e.prototype.Xt=function(t){("visibility"!==t?document.hidden:!document.hidden)||(this.Wt&&this.Vq.Yc(this.jt.cc()),L.Zc("newGameIndex",this.Tt),L.Fo())},e.prototype.au=function(){this.Wt&&(this.Vq.Bc(this.jt.cc()),this.Wt=!1)},e.prototype.Zt=function(t){switch(t){case"newGame":this._t();break;case"myGames":this.bu();break;case"importGame":this.cu();break;case"exportGame":this.du();break;case"syncGame":this.eu();break;case"syncMyGames":this.fu();break;case"settings":new D(L);break;case"downloadLatest":this.gu()}},e.prototype.hu=function(t){this.rules=t,this.Vb.eb(t)},e.prototype.Et=function(){this.Ir.refresh(),this.iu&&this.ju()},e.prototype.ku=function(t,i,n,e){var r=this.lu="compact"===t,s=this.mu=u.yn(i,"gameUi");n&&s.yn(r?"testTitle":"pageTitle").Bn(n),this.nu=s.yn("board"),e&&(this.ou=s.yn("boardDesc").Rn(e));var h=s.yn("underBoard");this.pu(h),this.qu(h),this.Ut||this.ru();var a=this.Vb.fb.tb+2;if(r)this.su=28*a;else{this.tt();var c=v.Hn-10-this.Yt.hp()-h.Kn.clientHeight;this.su=Math.min(c,v.Gn-15)}this.Ir=new o,this.Ir.es(this.tu.bind(this))},e.prototype.uu=function(){this.Yt.vu(!!this.St),this.mu&&(u.removeChild(document.body,this.mu),this.mu=null,this.Ir=null)},e.prototype._t=function(){if(!this.wu){this.au(),this.uu();var t={tb:this.tb,et:this.et,Ss:this.Ss,rules:this.rules},i=this;this.wu=new k(t,function(t){return i.tb=t.tb,i.et=t.et,i.Ss=[t.Ss[G]?P:_,t.Ss[I]?P:_],i.hu(t.rules),i.xu(),i.wu=null,!0})}},e.prototype.bu=function(){this.au(),this.uu();var t=this;new x(this.Vq,function(i){return i.ts?(t.yu(),!0):t.$t(i.Vb)})},e.prototype.cu=function(){this.au(),this.uu();var t=this;new y(this.Vq,function(i){return i.ts?(t.yu(),!0):t.$t(i.Vb)})},e.prototype.yu=function(){this.mu||this.wu||this._t()},e.prototype.pu=function(t){var i=this.zu=t.yn("statusBar");this.Au=new w(i,"lastMove","Last:"),this.Bt=i.yn("message"),this.Bu=new w(i,"nextPlayer","Next:")},e.prototype.Ft=function(t){var i=this.Vb.history;if(i.length){var n=E(i[i.length-1]);this.Au.ws(n,1-this.Vb.kb,"#"+i.length+":");var e=C(n);e?this.Ir.cs("CR",e[0],e[1]):this.Ir.cs(null)}else this.Au.ws(null);t=this.Vb.nb?null:E(t||""),this.Bu.ws(t,this.Vb.kb),this.Ir.Yr(this.Vb.kb)},e.prototype.statusMessage=function(t){t.indexOf("\n")===-1&&(t="\n"+t),this.Bt.Bn(t)},e.prototype.qu=function(t){var i=this.Cu=t.yn("mainControls"),n=i.yn("leftDiv"),e=i.yn("mainDiv"),r=i.yn("rightDiv"),o=this;this.lu||this.Qt.nt(n,e,r),this.controls=u.no(),u.ao(e,"bPass",d("#pass"),function(){o.Du("pass")}),u.ao(e,"next","Next",function(){o.Eu(1)}),u.ao(e,"next10","Next 10",function(){o.Eu(10)}),u.ao(r,"nextAll","Finish",function(){o.Eu()}),u.ao(e,"bUndo",d("#undo"),function(){o.Fu()}),u.ao(e,"accept","Accept",function(){o.Gu(!0)}),u.ao(e,"refuse","Refuse",function(){o.Gu(!1)}),u.ao(e,"newg",d("#newGame"),this._t.bind(this)),u.ao(r,"bResi",d("#resign"),this.Hu.bind(this)),this.Iu=n.yn("aiVsAiFlags"),this.Ju=u.io(this.Iu,"animated","Animated")},e.prototype.tt=function(){var t=this.Qt.Xb,i=this.Vb.nb,n=this.Vb.mb,e=!(i||n||t),r=this.Ss[G]&&this.Ss[I],o=this.lu;o||this.Qt.tt(),this.controls.Sn(["accept","refuse"],n&&!t),this.controls.Sn(["bUndo","bPass","bResi"],e&&!r),this.controls.Sn(["next","next10","nextAll"],e&&r),this.controls.Sn(["aiVsAiFlags"],e&&r&&!o),this.controls.Sn(["newg"],i&&!t&&!o),this.Ut||this.Ku(e,t,r)},e.prototype.$t=function(t){this.Lu();var i=[];return this.jt.ec(t,i)?(this.wu&&(this.wu=this.wu.close()),this.Ss=[void 0,void 0],this.Mu(),this.Nu(),!0):(new S(null,i.join("\n")),this.uu(),!1)},e.prototype.xu=function(){this.Lu();var t=this.jt._b;t.Sa("source",b.appName),t.Sa("event",this.Tt++),this.Mu(),this.statusMessage("Game started. Your turn..."),this.Nu()},e.prototype.Lu=function(){this.au(),this.Qt.lt(),this.Vb.sb(this.tb,this.et,this.jb),this.jt.ac()},e.prototype.Ou=function(){this.jt.ac(),this.Mu()},e.prototype.Mu=function(){this.Pu();var t=this.Vb;this.tb=t.fb.tb,this.et=t.Fb(),this.rules=t.yb(),this.Ut||this.Vt(),this.mu||this.ku("main",document.body);var i=this.lu?void 0:{background:"wood"};this.Ir.create(this.nu,this.su,t.fb,i),this.Qu()},e.prototype.Pu=function(){this.Ru=[];for(var t=this.jt._b,i=G;i<=I;i++){var n=i===G?"playerBlack":"playerWhite",e=t.Ua(n);if(void 0===this.Ss[i]&&(e&&e.indexOf(r.mn.Bm)>=0?this.Ss[i]=P:this.Ss[i]=_),this.Ss[i]){var o=this.yt(i).constructor;e||t.Sa(n,o.Bm+"-"+o.Cm)}else e||t.Sa(n,"human")}},e.prototype.Qu=function(){this.Et(),this.Ft(),this.tt()},e.prototype.yt=function(t){var i=this.Ru[t];if(i)return i;var n=t===G?r.kg:r.mn;return i=this.Ru[t]=new n(this.Vb,t)},e.prototype.Nu=function(){this.Wt=!0,this.Yt.Su(this.jt._b,!!this.St),this.Ht()||this.Tu()},e.prototype.tu=function(t){if("!"===t[0])return!this.Ut&&this.Uu(t.substr(1));var i=this.Qt.Xb;if(i||this.Jt)return!this.Ut&&this.Jt&&this.Vu(t,null,!0),void(i&&this.Qt.Gt(t));this.Wu||this.Ss[this.Vb.kb]&&this.Ut||this.Vb.mb||this.Vb.nb||this.Du(t)},e.prototype.Ht=function(){return this.Vb.mb?(this.Xu(),!0):!!this.Vb.nb&&(this.cj(),this.Yu(),!0)},e.prototype.cj=function(){var t=this.zt.ng();this.Zu=t.join("\n")},e.prototype.Xu=function(){this.cj(),this.statusMessage(this.Zu),this.tt(),this.Ir.ns(this.zt.qg().xd)},e.prototype.Gu=function(t){var i=this.Vb.kb;if(this.Ss[i]&&!this.Ss[1-i]&&(i=1-i),this.Vb.Rb(t,i),t)return this.Yu();this.statusMessage("Score in dispute. Continue playing..."),this.tt(),this.Et(),this.Ss[G]&&this.Ss[I]||this.Tu()},e.prototype.Yu=function(){this.statusMessage(this.Zu),this.tt()},e.prototype.$u=function(t){var i=this._u=this.Ru[this.Vb.kb],n=Date.now();this.Wu=!0;var e=i.Xm(),r=Math.max(0,(t||0)-(Date.now()-n));window.setTimeout(function(t){t.av(e),t.Wu=!1},r,this)},e.prototype.bv=function(t){var i=this._u=this.Ru[this.Vb.kb];this.cv=i.Om;var n=i.Xm();return this.av(n,t),n},e.prototype.av=function(t,i){this.Vb.Hb(t),i||(this.Et(),this.Ft(),this.statusMessage(""),this.iu&&this.Vu(t,this._u,!1)),this.Ht()},e.prototype.Du=function(t){if(!this.Ht()){if(!this.Vb.Hb(t))return this.statusMessage(this.Vb.Ib().join("\n"));this.Et(),this.Ft(),this.statusMessage(""),this.Ss[this.Vb.kb]&&this.$u(500)}},e.prototype.Hu=function(){var t=this;S._o(this.mu,d("#resignConfirm"),function(){t.Vb.Hb("resi"),t.Ft(),t.Ht()})},e.prototype.Fu=function(){var t="undo";if((this.Ss[G]===this.Ss[I]||this.Jt)&&(t="half_undo"),!this.Vb.Hb(t))return this.statusMessage(this.Vb.Ib().join("\n"));this.Et(),this.Ft(),this.statusMessage('Performed "'+t+'"')},e.prototype.Tu=function(t){this.Ss[this.Vb.kb]&&this.bv(t)},e.prototype.Eu=function(t){var i=1===t,n=this.Ju.Yn(),e=!i&&!n;this.Tu(e),i||this.Vb.mb||window.setTimeout(function(i){i.Eu(t-1)},n?100:0,this)},e.prototype.du=function(){var t=this.jt.cc();u.ro(t.Da(),t.La()+".sgf")},e.prototype.gu=function(){var t=this.Yt.dv,i=g.Cr(t.Br,t.id),n=this;f.ro(i,function(t,i){if(t)return n.statusMessage(t);var e=[],r=n.Vq.Xc(i,e);if(!r)return new S(null,e.join("\n"));n.$t(r)})},e.prototype.eu=function(){this.Rt.start(d("#syncGame"),d("#syncStart"));var t=this;this.ev(function(i,n){if(i)return t.Rt.stop();var e=t.jt.cc();n.rr(e,function(){t.$t(e),t.Rt.stop()})})},e.prototype.fu=function(){this.Rt.start(d("#syncMyGames"),d("#syncStart"));var t=this;this.ev(function(i,n){if(i)return t.Rt.stop();n.sr(function(){t.Rt.stop()})})},e.prototype.ev=function(t){if(this.fv)return t(null,this.fv);var i=new A(L,this.St,this.Vq,this.Rt.Lo.bind(this.Rt)),n=this;i.connect(function(e){if(e)return t(e);n.fv=i,t(null,i)})}},{"../../config/colors.json":6,"../GameLogic":11,"../GameRecord":12,"../GameVault":13,"../Move":21,"../ScoreAnalyser":23,"../ai":49,"../constants":50,"../hh":64,"../hh/Dome":53,"../hh/GetFile":54,"../hh/LocalPref":55,"../hh/Painter":57,"../hh/PopupDlg":58,"../hh/getText":63,"../main":72,"../net/DropboxHelper":73,"../net/SyncHelper":74,"../net/goSites":75,"./Board":77,"./ImportDlg":78,"./MoveIndicator":79,"./MyGamesDlg":81,"./NewGameDlg":82,"./ProgressLog":83,"./ReviewUi":84,"./SettingDlg":85,"./UiTopMenu":87,"./ui.less":97}],87:[function(t,i,n){"use strict";function e(t){this.gv(t)}function r(t,i){return i?t+i:""}t("./uiTopMenu.less");var o=t("../hh/Dome"),s=t("../hh/getText"),h=t("../net/goSites"),u=t("../main"),a=t("../hh/TopMenu");i.g=e,e.prototype.hp=function(){return this.lp.hp()},e.prototype.gv=function(t){var i=this.lp=new a({bp:t,rp:u.appName+" V"+u.appVersion});i.op("settings",s("#settings"),!0),i.mp(),i.op("myGames",s("#myGames"),!0),i.op("newGame",s("#newGame"),!0),i.op("importGame",s("#importGame"),!0),this.hv=i.op("syncMyGames",s("#syncMyGames"),!0),i.mp(),this.iv=i.An(o.yn(null,"gameInfo")),this.jv=i.op("downloadLatest",""),this.kv=i.op("syncGame",s("#syncGame")),this.lv=i.op("exportGame",s("#exportGame")),i.mp()},e.prototype.vu=function(t){this.lp.jp(s("#appTitle")),this.kv.Sn(!1),this.hv.Sn(t),this.iv.Bn(""),this.jv.Sn(!1),this.lv.Sn(!1)},e.prototype.Su=function(t,i){this.lp.jp(t.Ua("playerWhite")+" VS "+t.Ua("playerBlack")+" (B)");var n="komi: "+(t.Ua("komi")||0);n+=r(", hand: ",t.Ua("handicap")),n+=r(", rules: ",t.Ua("rules")),n+=r(", date: ",t.Ua("date")),n+=r(", source: ",t.Ua("source")),n+=r(", event: ",t.Ua("event")),n+=r(", place: ",t.Ua("place")),this.iv.Bn(n),this.kv.Sn(i);var e=this.dv=h.Ar(t);e&&(this.jv.Bn(s("#downloadLatest",e.Br)),this.jv.Sn(!0)),this.lv.Sn(!0)}},{"../hh/Dome":53,"../hh/TopMenu":59,"../hh/getText":63,"../main":72,"../net/goSites":75,"./uiTopMenu.less":98}],88:[function(t,i,n){"use strict";var e=t("../ai"),r=[{name:"Chuckie",qn:t("../ai/chuckie")}];e.pn(r),t("./Ui").Nt()},{"../ai":49,"../ai/chuckie":48,"./Ui":86}],89:[function(t,i,n){var e=".importDialog {\n  margin: 50px;\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  top: 40%;\n}\n.importDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.importDialog .mainDiv .groupFrame {\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 7px;\n}\n.importDialog .mainDiv .fileInputBtn {\n  margin: 35px 15px;\n}\n.importDialog .mainDiv .moves {\n  margin: 35px 0;\n}\n.importDialog .mainDiv .movesInput {\n  width: 50%;\n}\n.importDialog .mainDiv .loadMovesInfo {\n  font-size: 50%;\n  font-style: italic;\n  margin-left: 203px;\n}\n.importDialog .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.importDialog .btnDiv .loadBtn,\n.importDialog .btnDiv .cancelBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  width: 240px;\n  font-size: 48px;\n}\n";t("lessify")(e),i.g=e},{"lessify":136}],90:[function(t,i,n){var e=".moveIndicator {\n  height: 80px;\n  text-align: center;\n}\n.moveIndicator.black .icon {\n  background-color: #000;\n}\n.moveIndicator.black .text {\n  color: #fff;\n  text-shadow: #000 0 0 3px;\n}\n.moveIndicator.white .icon {\n  background-color: #fff;\n}\n.moveIndicator.white .text {\n  color: #000;\n  text-shadow: #fff 0 0 3px;\n}\n.moveIndicator .label {\n  font-size: 30px;\n}\n.moveIndicator .icon {\n  display: inline-block;\n  position: relative;\n  width: 68px;\n  height: 68px;\n  border: 1px solid rgba(127, 127, 127, 0.5);\n  border-radius: 50px;\n}\n.moveIndicator .icon .text {\n  position: relative;\n  width: 84px;\n  text-align: center;\n  left: -8px;\n  top: 12px;\n  font-size: 35px;\n  font-weight: bold;\n}\n";t("lessify")(e),i.g=e},{"lessify":136}],91:[function(t,i,n){var e=".myArchivedGamesDialog {\n  margin: 0 65px;\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.myArchivedGamesDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.myArchivedGamesDialog .delGameBtn,\n.myArchivedGamesDialog .restoreGameBtn {\n  vertical-align: top;\n  margin: 20px 12px 20px 0;\n  width: 220px;\n  height: 120px;\n  line-height: 120px;\n}\n.myArchivedGamesDialog .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.myArchivedGamesDialog .btnDiv .closeBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  width: 240px;\n  font-size: 48px;\n}\n";t("lessify")(e),i.g=e},{"lessify":136}],92:[function(t,i,n){var e=".myGamesDialog {\n  margin: 0 40px;\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.myGamesDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.myGamesDialog .mainDiv .recentGamesDropDwn {\n  max-width: calc(100% - 230px);\n  font-size: 48px;\n  margin: 35px 0;\n}\n.myGamesDialog .delGameBtn,\n.myGamesDialog .archiveGameBtn,\n.myGamesDialog .showArchiveBtn {\n  vertical-align: top;\n  margin: 20px 12px 20px 0;\n  width: 220px;\n  height: 120px;\n  line-height: 120px;\n}\n.myGamesDialog .showArchiveBtn {\n  line-height: initial;\n  padding: 25px;\n}\n.myGamesDialog .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.myGamesDialog .btnDiv .loadBtn,\n.myGamesDialog .btnDiv .cancelBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  width: 240px;\n  font-size: 48px;\n}\n";t("lessify")(e),i.g=e},{"lessify":136}],93:[function(t,i,n){var e='.newGameDialog {\n  margin: 50px;\n}\n.newGameDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.newGameDialog .mainDiv .centeredDiv {\n  margin-top: 40px;\n  text-align: center;\n}\n.newGameDialog .boardDiv .sizeBox {\n  display: inline-block;\n  position: relative;\n  width: 240px;\n  max-width: 33%;\n  text-align: center;\n  margin: 10px 18px 0 20px;\n}\n.newGameDialog .playerBtn {\n  position: relative;\n  vertical-align: top;\n  top: 162px;\n  left: 2px;\n  width: 200px;\n  max-width: 26%;\n  height: 200px;\n}\n.newGameDialog .playerBtn .playerBtnIcon {\n  background-image: url("assets/humanBlue.png");\n  -webkit-filter: brightness(0);\n  filter: brightness(0);\n  background-size: 80%;\n}\n.newGameDialog .playerBtn.robot .playerBtnIcon {\n  background-size: contain;\n  background-image: url("assets/robotBlue.png");\n}\n.newGameDialog .playerBtn.white .playerBtnIcon {\n  -webkit-filter: invert(1) grayscale(1);\n  filter: invert(1) grayscale(1);\n}\n.newGameDialog .sizeBtn {\n  position: relative;\n  width: 170px;\n  max-width: 88%;\n  height: 120px;\n  margin: 0 0 10px;\n}\n.newGameDialog .sizeBtn .sizeBtnIcon {\n  background-image: url("assets/upBlue.png");\n  background-size: 80%;\n  -webkit-filter: brightness(0);\n  filter: brightness(0);\n}\n.newGameDialog .sizeBtn.down {\n  margin-top: 4px;\n}\n.newGameDialog .sizeBtn.down .sizeBtnIcon {\n  background-image: url("assets/downBlue.png");\n}\n.newGameDialog .boardImgFrame {\n  display: inline-block;\n  position: relative;\n  width: 100%;\n  height: 240px;\n  background-color: #d1cac1;\n  border-radius: 5px;\n  box-shadow: black 3px 3px 6px;\n}\n.newGameDialog .boardImgFrame .boardImg {\n  width: 100%;\n  height: 100%;\n  background: url("assets/19x19.png") 50% no-repeat;\n}\n.newGameDialog .boardImgFrame .curSize {\n  position: absolute;\n  top: -4px;\n  width: 100%;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  text-align: center;\n  color: white;\n  text-shadow: black 3px 3px 5px;\n}\n.newGameDialog .advancedBtn {\n  width: 248px;\n  height: 100px;\n  line-height: 92px;\n  margin: 40px 10px 25px;\n  background-color: #faf7f5;\n  border: 1px solid #a7a7a7;\n}\n.newGameDialog .advancedDiv .rules {\n  display: inline-block;\n  margin-left: 87px;\n}\n.newGameDialog .advancedDiv .defAiInfo {\n  font-size: 50%;\n  font-style: italic;\n  width: 400px;\n  display: inline-block;\n}\n.newGameDialog .startBtn {\n  margin: 16px 0 10px -5px;\n  position: relative;\n  left: calc(100% - 240px);\n  width: 240px;\n  font-size: 48px;\n}\n';t("lessify")(e),i.g=e},{"lessify":136}],94:[function(t,i,n){var e=".notifPopup {\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  margin: 0 auto;\n  width: 1020px;\n  max-width: 90%;\n  border: 1px solid rgba(255, 255, 255, 0.33);\n}\n.notifPopup .content {\n  height: 300px;\n  overflow-y: scroll;\n  font-size: 20px;\n}\n";t("lessify")(e),i.g=e},{"lessify":136}],95:[function(t,i,n){var e='.gameUi .statusBar .variationBtn {\n  margin: 1px;\n  width: 120px;\n  height: 112px;\n  line-height: 112px;\n}\n.gameUi .statusBar .moveComment {\n  margin-top: 2px;\n  background-color: white;\n  color: black;\n  border-radius: 5px;\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  text-align: left;\n  font-size: 22px;\n  font-weight: normal;\n  padding: 2px 4px;\n}\n.gameUi .mainControls .btn.back10,\n.gameUi .mainControls .btn.back1,\n.gameUi .mainControls .btn.forw1,\n.gameUi .mainControls .btn.forw10 {\n  max-width: 22%;\n}\n.gameUi .mainControls .btn.pruneBtn {\n  max-width: 120px;\n}\n.gameUi .mainControls .btn.pruneBtn .btnIcon {\n  background-image: url("assets/pruning.png");\n  -webkit-filter: sepia(0.9) brightness(3);\n  filter: sepia(0.9) brightness(3);\n  background-size: auto 87%;\n}\n';t("lessify")(e),i.g=e},{"lessify":136}],96:[function(t,i,n){var e=".settingDlg {\n  z-index: 2000;\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  margin: 0 20%;\n  width: 60%;\n}\n.settingDlg .content {\n  padding: 20px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.settingDlg .content .cloudDiv {\n  margin-top: 20px;\n}\n.settingDlg .content .dropboxBtn {\n  display: block;\n  margin: 10px;\n  width: 300px;\n}\n.settingDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: 0 0 -10px 0;\n}\n.settingDlg .btnDiv .okBtn {\n  float: right;\n}\n";t("lessify")(e),i.g=e},{"lessify":136}],97:[function(t,i,n){var e='body {\n  background-color: #865e50;\n  font-family: "Arial";\n  margin: 0px;\n  height: 2048px;\n}\ndiv {\n  box-sizing: border-box;\n}\n::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 7px;\n  height: 7px;\n}\n::-webkit-scrollbar-track {\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.2);\n  -webkit-border-radius: 10px;\n  border-radius: 7px;\n  margin: 1px;\n}\n::-webkit-scrollbar-thumb {\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, 0.5);\n}\n.downloadLink {\n  text-decoration: none;\n  color: white;\n}\n.pageTitle {\n  margin-top: 7px;\n  margin-bottom: 7px;\n  font-size: 40px;\n  font-weight: bold;\n}\n.subTitle {\n  font-size: 30px;\n  margin-top: 0.5em;\n  margin-bottom: 5px;\n}\n.logBox {\n  font-size: 28px;\n  font-family: "Arial";\n  background-color: white;\n  border: solid #cca 1px;\n  border-radius: 8px;\n  padding: 5px;\n  overflow-y: auto;\n  word-wrap: break-word;\n}\n.inputLbl {\n  display: inline-block;\n  margin: 0 5px 0 10px;\n  font-size: 28px;\n}\n.inputBox {\n  margin: 17px 0 17px 0;\n  min-height: 1cm;\n  text-align: left;\n  font-size: 42px;\n  color: inherit;\n}\n.btn {\n  display: inline-block;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  box-sizing: border-box;\n  padding: 0 2px;\n  border-radius: 13px;\n  width: 160px;\n  height: 120px;\n  line-height: 120px;\n  text-align: center;\n  font-size: 28px;\n  border: 1px solid #7a6c5c;\n  background-color: #af9e8e;\n  color: #000000;\n}\n.btn.toggled {\n  background-color: #AD4343;\n}\n.btn.disabled {\n  color: #000;\n  border-style: hidden;\n  opacity: 0.6;\n}\n.btn.pressed {\n  border-style: outset;\n}\n.btnIcon {\n  width: 100%;\n  height: 100%;\n  background-position: 50%;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n.chkBoxDiv {\n  display: inline-block;\n  margin-right: 10px;\n}\n.chkBox {\n  margin: 5px 3px 14px 2px;\n  width: 29px;\n  height: 1.5em;\n}\n.chkLbl {\n  font-size: 28px;\n}\n.dropDwn {\n  font-size: 42px;\n  margin: 17px 13px 17px 13px;\n  color: inherit;\n}\n.radioBtn {\n  margin: 17px 0px 17px 13px;\n  width: 29px;\n  height: 1.5em;\n}\n.radioLbl {\n  margin-right: 13px;\n}\n.dialog {\n  padding: 10px;\n  background-color: #ffffee;\n  color: #000000;\n  border: solid #cca 1px;\n  border-radius: 10px;\n  font-family: Arial;\n  font-size: 42px;\n}\n.dialogTitle {\n  font-size: 50px;\n  background-color: #ffebce;\n  color: #000000;\n  border: solid 1px rgba(195, 50, 50, 0.2);\n  border-radius: 10px;\n  margin: -6px;\n  margin-bottom: 15px;\n  padding: 10px 0px 10px 12px;\n}\nbody .contextMenu {\n  width: 500px;\n  border-radius: 9px;\n  border: 1px solid #58636d;\n  background-color: #3b3d47;\n}\nbody .contextMenu .menuItem {\n  font-size: 30px;\n  padding: 50px;\n  background-color: #000;\n  border: 1px solid #505050;\n  border-radius: 9px;\n}\n.gameList {\n  position: relative;\n  border: 1px solid #a9a9a9;\n  border-radius: 6px;\n  max-height: 450px;\n  min-height: 160px;\n  overflow-y: auto;\n  overflow-x: hidden;\n  background-color: #fff;\n}\n.gameList .oneGame {\n  padding: 5px;\n}\n.gameList .oneGame.selected {\n  background-color: #b7b29e;\n  border-radius: 5px;\n}\n.gameList .emptyMsg {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  position: absolute;\n  width: 100%;\n  text-align: center;\n  font-style: italic;\n  opacity: 0.7;\n}\n.gameUi {\n  padding: 2px;\n}\n.gameUi .board {\n  margin: 5px 0;\n  background-color: #402f23;\n  border-radius: 7px;\n}\n.gameUi .board .wgo-board {\n  margin: 0 auto;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  /* disables grey shade on long-tap for Safari */\n  /* Below avoid issues when tap-hold on Android */\n  -webkit-user-select: none;\n  -webkit-touch-callout: none;\n}\n.gameUi .boardDesc {\n  margin-top: 3px;\n  font-weight: bold;\n  font-style: italic;\n}\n.gameUi .btn {\n  width: 200px;\n}\n.gameUi .underBoard {\n  padding-bottom: 5px;\n}\n.gameUi .statusBar {\n  position: relative;\n  height: 130px;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: row;\n  flex-direction: row;\n  background-color: #dfc2ac;\n  border: rgba(0, 0, 0, 0.7) 1px solid;\n  border-radius: 7px;\n}\n.gameUi .statusBar .lastMove {\n  margin: 0 15px;\n}\n.gameUi .statusBar .message {\n  -webkit-flex: 1;\n  flex: 1;\n  white-space: pre-wrap;\n  overflow-y: auto;\n  font-size: 26px;\n  font-weight: bold;\n  text-align: center;\n  padding-top: 5px;\n}\n.gameUi .statusBar .nextPlayer {\n  margin: 0 8px 0 15px;\n}\n.gameUi .mainControls {\n  margin-top: 10px;\n}\n.gameUi .mainControls .leftDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 20%;\n  padding-left: 10px;\n  text-align: left;\n}\n.gameUi .mainControls .leftDiv .animatedDiv {\n  margin: 16px;\n}\n.gameUi .mainControls .mainDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 60%;\n  text-align: center;\n}\n.gameUi .mainControls .mainDiv .btn {\n  margin: 0 3px;\n  height: 200px;\n  line-height: 200px;\n  max-width: 44%;\n}\n.gameUi .mainControls .rightDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 20%;\n  text-align: right;\n}\n.gameUi .mainControls .leftDiv .btn,\n.gameUi .mainControls .rightDiv .btn {\n  background-color: #5c4137;\n  color: #faebd7;\n  max-width: 100%;\n}\n.gameUi .mainControls .leftDiv .btn.toggled,\n.gameUi .mainControls .rightDiv .btn.toggled {\n  background-color: #AD4343;\n}\n.gameUi .mainControls .leftDiv .btn.resi,\n.gameUi .mainControls .rightDiv .btn.resi {\n  height: 100px;\n  line-height: 100px;\n  width: 150px;\n}\n.gameInfo {\n  padding: 15px 20px 15px 100px;\n  font-size: 32px;\n  background-color: #282a2b;\n}\n';t("lessify")(e),i.g=e},{"lessify":136}],98:[function(t,i,n){var e=".topMenu .menuOption {\n  position: relative;\n}\n.topMenu .menuOption .icon {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 140px;\n  height: 140px;\n  background-repeat: no-repeat;\n  -webkit-filter: invert(0.6) grayscale(1);\n  filter: invert(0.6) grayscale(1);\n}\n.topMenu .menuOption.settings .icon {\n  background-image: url(assets/settings.png);\n  background-size: 94px;\n  background-position: 20px;\n}\n.topMenu .menuOption.myGames .icon {\n  background-image: url(assets/myGames.png);\n  background-size: 94px;\n  background-position: 20px;\n}\n.topMenu .menuOption.newGame .icon {\n  background-image: url(assets/robotBlue.png);\n  background-size: 104px;\n  background-position: 17px 0;\n}\n.topMenu .menuOption.importGame .icon {\n  background-image: url(assets/import.png);\n  background-size: 70px;\n  background-position: 29px 30px;\n}\n.topMenu .menuOption.syncMyGames .icon {\n  background-image: url(assets/cloudSync.png);\n  background-size: 100px;\n  background-position: 18px 22px;\n}\n";t("lessify")(e),i.g=e},{"lessify":136}],99:[function(t,i,n){!function(t,i){"use strict";var n=document.getElementsByTagName("script"),e=n[n.length-1].src.split("?")[0],r=e.split("/").slice(0,-1).join("/")+"/",o={version:"2.3.1",B:1,W:-1,mv:!0,nv:r,lang:"en",ov:{pv:{}}};o.opera=navigator.userAgent.search(/(opera)(?:.*version)?[ \/]([\w.]+)/i)!=-1,o.qv=navigator.userAgent.search(/(webkit)[ \/]([\w.]+)/i)!=-1,o.rv=navigator.userAgent.search(/(msie) ([\w.]+)/i)!=-1,o.sv=navigator.userAgent.search(/(mozilla)(?:.*? rv:([\w.]+))?/i)!=-1&&!o.qv&&!o.rv,o.tv=function(t){var i=o.ov[o.lang][t]||o.ov.pv[t];if(i){for(var n=1;n<arguments.length;n++)i=i.replace("$",arguments[n]);return i}return t},o.uv=function(t,i){return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.super=t,i},o.vv=function(){throw Error("unimplemented abstract method")},o.clone=function(t){if(t&&"object"==typeof t){var i=t.constructor==Array?[]:{};for(var n in t)t[n]==t?i[n]=t:i[n]=o.clone(t[n]);return i}return t},o.wv=function(t){return t&&"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t};var s=function(i,n){var n=n||{};for(var e in n)this[e]=n[e];for(var e in o.Pr.default)void 0===this[e]&&(this[e]=o.Pr.default[e]);for(var e in s.Po.default)void 0===this.Qo[e]&&(this.Qo[e]=s.Po.default[e]);this.xv=this.section.left,this.yv=this.section.top,this.zv=this.size-1-this.section.right,this.Av=this.size-1-this.section.bottom,this.init(),i.appendChild(this.Tr),this.Bv=t.devicePixelRatio||1,this.width&&this.height?this.Cv(this.width,this.height):this.width?this.Dv(this.width):this.height&&this.Ev(this.height)};s.Po={},s.Po.Fv={shadowColor:"rgba(32,32,32,0.5)",shadowTransparentColor:"rgba(32,32,32,0)",shadowBlur:0,shadowSize:function(t){return t.shadowSize},markupBlackColor:"rgba(255,255,255,0.8)",markupWhiteColor:"rgba(0,0,0,0.8)",markupNoneColor:"rgba(0,0,0,0.8)",markupLinesWidth:function(t){return t.Gv?t.Hv/7:t.lineWidth},gridLinesWidth:1,gridLinesColor:function(t){return"rgba(0,0,0,"+Math.min(1,t.Hv/15)+")"},starColor:"#000",starSize:function(t){return t.starSize*(t.width/300+1)},stoneSize:function(t){return t.stoneSize*Math.min(t.gs,t.hs)/2},coordinatesColor:"rgba(0,0,0,0.7)",font:function(t){return t.font},linesShift:.5},s.Po.default={shadowColor:"rgba(62,32,32,0.5)",shadowTransparentColor:"rgba(62,32,32,0)",shadowBlur:function(t){return.1*t.Hv},shadowSize:1,markupBlackColor:"rgba(255,255,255,0.9)",markupWhiteColor:"rgba(0,0,0,0.7)",markupNoneColor:"rgba(0,0,0,0.7)",markupLinesWidth:function(t){return t.Hv/8},gridLinesWidth:function(t){return t.Hv/15},gridLinesColor:"#654525",starColor:"#531",starSize:function(t){return t.Hv/8+1},stoneSize:function(t){return Math.min(t.gs,t.hs)/2},coordinatesColor:"#531",Iv:"rgba(0,32,128,0.8)",font:"calibri",linesShift:.25};var h,u=function(t,i){return"function"==typeof i.Qo[t]?i.Qo[t](i):i.Qo[t]},a={Jv:function(t,i){var n=i.Kv(t.x),e=i.Lv(t.y),r=i.Hv;this.beginPath();var o=u("shadowBlur",i),s=Math.max(0,r-.5),h=this.createRadialGradient(n-i.Mv,e-i.Mv,s-1-o,n-i.Mv,e-i.Mv,s+o);h.addColorStop(0,u("shadowColor",i)),h.addColorStop(1,u("shadowTransparentColor",i)),this.fillStyle=h,this.arc(n-i.Mv,e-i.Mv,s+o,0,2*Math.PI,!0),this.fill()},clear:function(t,i){var n=i.Kv(t.x),e=i.Lv(t.y),r=i.Hv;this.clearRect(n-1.1*r-i.Mv,e-1.1*r-i.Mv,2.2*r,2.2*r)}},c=function(t,i,n){return t.as[i][n][0].c==o.B?u("markupBlackColor",t):t.as[i][n][0].c==o.W?u("markupWhiteColor",t):u("markupNoneColor",t)},l=function(t,i,n){return t.as[i][n][0]&&t.as[i][n][0].c==o.W||t.as[i][n][0].c==o.B},p=function(t,i){var n;t[i].clear(),t[i].Jv(t);for(var e=0;e<t.size;e++)for(var r=0;r<t.size;r++)for(var o=0;o<t.as[e][r].length;o++){var h=t.as[e][r][o];n=h.type?"string"==typeof h.type?s.Ov[h.type]:h.type:t.Nv,n[i]&&n[i].Jv.call(t[i].getContext(h),h,t)}for(var u=0;u<t.Pv.length;u++){var h=t.Pv[u],n=h.bp;n[i]&&n[i].Jv.call(t[i].getContext(h.Qv),h.Qv,t)}},f=function(t,i,n,e,r,o,s,h){t.strokeStyle="rgba(64,64,64,0.2)",t.lineWidth=e/30*h,t.beginPath(),e-=Math.max(1,t.lineWidth);var u,a,i,c,l,p=i+e*Math.cos(r*Math.PI),f=n+e*Math.sin(r*Math.PI),d=i+e*Math.cos(o*Math.PI),g=n+e*Math.sin(o*Math.PI);d>p?(u=(g-f)/(d-p),a=Math.atan(u)):d==p?a=Math.PI/2:(u=(g-f)/(d-p),a=Math.atan(u)-Math.PI);var v=s*e;c=Math.sin(a)*v,l=Math.cos(a)*v;var y=p+c,b=f-l,m=d+c,w=g-l;t.moveTo(p,f),
t.bezierCurveTo(y,b,m,w,d,g),t.stroke()},d=function(t){for(var i=t.angle,n=t.angle,e=0;e<t.Rv.length;e++)i+=t.Rv[e],n-=t.Rv[e],f(t.Sv,t.x,t.y,t.Tv,i,n,t.Uv,t.Vv)};s.Ov={Wv:{ci:{Jv:function(t,i){var n,e=i.Kv(t.x),r=i.Lv(t.y),s=i.Hv;t.c==o.W?(n=this.createRadialGradient(e-2*s/5,r-2*s/5,s/3,e-s/5,r-s/5,5*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#aaa")):(n=this.createRadialGradient(e-2*s/5,r-2*s/5,1,e-s/5,r-s/5,4*s/5),n.addColorStop(0,"#666"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(e-i.Mv,r-i.Mv,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill()}},Xv:a},Yv:{ci:{Jv:function(t,i){var n,e=i.Kv(t.x),r=i.Lv(t.y),s=i.Hv;t.c==o.W?(n=this.createRadialGradient(e-2*s/5,r-2*s/5,2,e-s/5,r-s/5,4*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#ddd")):(n=this.createRadialGradient(e-2*s/5,r-2*s/5,1,e-s/5,r-s/5,4*s/5),n.addColorStop(0,"#111"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(e-i.Mv,r-i.Mv,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill(),this.beginPath(),this.lineWidth=s/6,t.c==o.W?(this.strokeStyle="#999",this.arc(e+s/8,r+s/8,s/2,0,Math.PI/2,!1)):(this.strokeStyle="#ccc",this.arc(e-s/8,r-s/8,s/2,Math.PI,1.5*Math.PI)),this.stroke()}},Xv:a},Zv:{ci:{Jv:function(t,i){var n,e=i.Kv(t.x),r=i.Lv(t.y),s=i.Hv;t.c==o.W?(n=this.createRadialGradient(e-2*s/5,r-2*s/5,s/3,e-s/5,r-s/5,8*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#666")):(n=this.createRadialGradient(e-2*s/5,r-2*s/5,1,e-s/5,r-s/5,3*s/5),n.addColorStop(0,"#555"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(e-i.Mv,r-i.Mv,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill()}},Xv:a},$v:{ci:{Jv:function(t,i){var n,e,r=i.Hv;h=h||Math.ceil(9999999*Math.random()),n=i.Kv(t.x),e=i.Lv(t.y);var s;if(s=t.c==o.W?"#aaa":"#000",this.beginPath(),this.fillStyle=s,this.arc(n-i.Mv,e-i.Mv,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill(),t.c==o.W){var u=h%(3+t.x*i.size+t.y)%3,a=i.size*i.size+t.x*i.size+t.y,c=2/a*(h%a);d(0==u?{Sv:this,x:n,y:e,Tv:r,angle:c,Rv:[.1,.12,.11,.1,.09,.09,.09,.09],Uv:.25,Vv:1.75}:1==u?{Sv:this,x:n,y:e,Tv:r,angle:c,Rv:[.1,.09,.08,.07,.06,.06,.06,.06,.06,.06,.06],Uv:.2,Vv:1.5}:{Sv:this,x:n,y:e,Tv:r,angle:c,Rv:[.12,.14,.13,.12,.12,.12],Uv:.3,Vv:2}),s=this.createRadialGradient(n-2*r/5,e-2*r/5,r/3,n-r/5,e-r/5,5*r/5),s.addColorStop(0,"rgba(255,255,255,0.9)"),s.addColorStop(1,"rgba(255,255,255,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.Mv,e-i.Mv,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill()}else s=this.createRadialGradient(n+.4*r,e+.4*r,0,n+.5*r,e+.5*r,r),s.addColorStop(0,"rgba(32,32,32,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.Mv,e-i.Mv,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill(),s=this.createRadialGradient(n-.4*r,e-.4*r,0,n-.5*r,e-.5*r,1.5*r),s.addColorStop(0,"rgba(64,64,64,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.Mv,e-i.Mv,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill()}},Xv:a},_v:{ci:{Jv:function(t,i){var n=i.Kv(t.x),e=i.Lv(t.y),r=i.Hv,s=u("markupLinesWidth",i)||1;t.c==o.W?this.fillStyle="white":this.fillStyle="black",this.beginPath(),this.arc(n,e,Math.max(0,r-s),0,2*Math.PI,!0),this.fill(),this.lineWidth=s,this.strokeStyle="black",this.stroke()}}},CR:{ci:{Jv:function(t,i){var n=i.Kv(t.x),e=i.Lv(t.y),r=i.Hv;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||u("markupLinesWidth",i)||1,this.beginPath(),this.arc(n-i.Mv,e-i.Mv,r/2,0,2*Math.PI,!0),this.stroke()}}},LB:{ci:{Jv:function(t,i){var n=i.Kv(t.x),e=i.Lv(t.y),r=i.Hv,o=t.scale||1,s=t.font||u("font",i)||"";this.fillStyle=t.c||c(i,t.x,t.y);var h=1;1==t.text.length?h=1.5:2==t.text.length&&(h=1.2),this.font=Math.round(h*r*o)+"px "+s,this.beginPath(),this.textBaseline="middle",this.textAlign="center",this.fillText(t.text,n,e,2*r)}},grid:{Jv:function(t,i){if(!l(i,t.x,t.y)&&!t.aw){var n=i.Kv(t.x),e=i.Lv(t.y),r=i.Hv;this.clearRect(n-r,e-r,2*r,2*r)}},clear:function(t,i){l(i,t.x,t.y)||(t.aw=!0,p(i,"grid"),delete t.aw)}}},bw:{ci:{Jv:function(t,i){var n=i.Kv(t.x),e=i.Lv(t.y),r=Math.round(i.Hv);this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||u("markupLinesWidth",i)||1,this.beginPath(),this.rect(Math.round(n-r/2)-i.Mv,Math.round(e-r/2)-i.Mv,r,r),this.stroke()}}},qh:{ci:{Jv:function(t,i){var n=i.Kv(t.x),e=i.Lv(t.y),r=i.Hv;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||u("markupLinesWidth",i)||1,this.beginPath(),this.moveTo(n-i.Mv,e-i.Mv-Math.round(r/2)),this.lineTo(Math.round(n-r/2)-i.Mv,Math.round(e+r/3)+i.Mv),this.lineTo(Math.round(n+r/2)+i.Mv,Math.round(e+r/3)+i.Mv),this.closePath(),this.stroke()}}},cw:{ci:{Jv:function(t,i){var n=i.Kv(t.x),e=i.Lv(t.y),r=i.Hv;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineCap="round",this.lineWidth=2*(t.lineWidth||u("markupLinesWidth",i)||1)-1,this.beginPath(),this.moveTo(Math.round(n-r/2),Math.round(e-r/2)),this.lineTo(Math.round(n+r/2),Math.round(e+r/2)),this.moveTo(Math.round(n+r/2)-1,Math.round(e-r/2)),this.lineTo(Math.round(n-r/2)-1,Math.round(e+r/2)),this.stroke(),this.lineCap="butt"}}},SL:{ci:{Jv:function(t,i){var n=i.Kv(t.x),e=i.Lv(t.y),r=i.Hv;this.fillStyle=t.c||c(i,t.x,t.y),this.beginPath(),this.rect(n-r/2,e-r/2,r,r),this.fill()}}},dw:{ci:{Jv:function(t,i){var n=i.Kv(t.x),e=i.Lv(t.y),r=i.Hv;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=2*(t.lineWidth||u("markupLinesWidth",i)||1),this.beginPath(),this.arc(n-r/3,e-r/3,r/6,0,2*Math.PI,!0),this.stroke(),this.beginPath(),this.arc(n+r/3,e-r/3,r/6,0,2*Math.PI,!0),this.stroke(),this.beginPath(),this.moveTo(n-r/1.5,e),this.bezierCurveTo(n-r/1.5,e+r/2,n+r/1.5,e+r/2,n+r/1.5,e),this.stroke()}}},outline:{ci:{Jv:function(t,i){t.alpha?this.globalAlpha=t.alpha:this.globalAlpha=.3,t.ew?s.Ov[t.ew].ci.Jv.call(this,t,i):i.Nv.ci.Jv.call(this,t,i),this.globalAlpha=1}}},mini:{ci:{Jv:function(t,i){i.Hv=i.Hv/2,t.ew?s.Ov[t.ew].ci.Jv.call(this,t,i):i.Nv.ci.Jv.call(this,t,i),i.Hv=2*i.Hv}}}},s.Rr={grid:{Jv:function(t,i){var n,e,r,o,s,h;this.fillStyle=u("coordinatesColor",i),this.textBaseline="middle",this.textAlign="center",this.font=i.Hv*i.coordFontSize+"px "+(i.font||""),r=i.Kv(-.75),o=i.Kv(i.size-.25),s=i.Lv(-.75),h=i.Lv(i.size-.25);for(var a=0;a<i.size;a++)n=a+"A".charCodeAt(0),n>="I".charCodeAt(0)&&n++,e=i.Lv(a),this.fillText(i.size-a,r,e),this.fillText(i.size-a,o,e),e=i.Kv(a),this.fillText(String.fromCharCode(n),e,s),this.fillText(String.fromCharCode(n),e,h);this.fillStyle="black"}}},s.fw=function(){this.Tr=document.createElement("canvas"),this.context=this.Tr.getContext("2d"),this.Bv=t.devicePixelRatio||1,this.Bv>1&&this.context.scale(this.Bv,this.Bv)},s.fw.prototype={constructor:s.fw,Cv:function(t,i){this.Tr.width=t,this.Tr.style.width=t/this.Bv+"px",this.Tr.height=i,this.Tr.style.height=i/this.Bv+"px"},Nn:function(t,i){this.Tr.style.position="absolute",this.Tr.style.zIndex=i,t.appendChild(this.Tr)},gw:function(t){t.removeChild(this.Tr)},getContext:function(){return this.context},Jv:function(t){},clear:function(){this.context.clearRect(0,0,this.Tr.width,this.Tr.height)}},s.hw=o.uv(s.fw,function(){this.super.call(this)}),s.hw.prototype.Jv=function(t){var i;this.context.beginPath(),this.context.lineWidth=u("gridLinesWidth",t),this.context.strokeStyle=u("gridLinesColor",t);var n=Math.round(t.left),e=Math.round(t.top),r=Math.round(t.gs*(t.size-1)),o=Math.round(t.hs*(t.size-1));this.context.strokeRect(n-t.Mv,e-t.Mv,r,o);for(var s=1;s<t.size-1;s++)i=Math.round(t.Kv(s))-t.Mv,this.context.moveTo(i,e),this.context.lineTo(i,e+o),i=Math.round(t.Lv(s))-t.Mv,this.context.moveTo(n,i),this.context.lineTo(n+r,i);if(this.context.stroke(),this.context.fillStyle=u("starColor",t),t.iw[t.size])for(var h in t.iw[t.size])this.context.beginPath(),this.context.arc(t.Kv(t.iw[t.size][h].x)-t.Mv,t.Lv(t.iw[t.size][h].y)-t.Mv,u("starSize",t),0,2*Math.PI,!0),this.context.fill()},s.jw=o.uv(s.fw,function(){this.init(4)}),s.jw.prototype.init=function(i){var n,e;this.kw=i,this.elements=[],this.lw=[],this.Bv=t.devicePixelRatio||1;for(var r=0;r<i;r++)n=document.createElement("canvas"),e=n.getContext("2d"),this.Bv>1&&e.scale(this.Bv,this.Bv),this.elements.push(n),this.lw.push(e)},s.jw.prototype.Nn=function(t,i){for(var n=0;n<this.kw;n++)this.elements[n].style.position="absolute",this.elements[n].style.zIndex=i,t.appendChild(this.elements[n])},s.jw.prototype.gw=function(t){for(var i=0;i<this.kw;i++)t.removeChild(this.elements[i])},s.jw.prototype.getContext=function(t){return t.x%2?t.y%2?this.lw[0]:this.lw[1]:t.y%2?this.lw[2]:this.lw[3]},s.jw.prototype.clear=function(t,i){for(var n=0;n<this.kw;n++)this.lw[n].clearRect(0,0,this.elements[n].width,this.elements[n].height)},s.jw.prototype.Cv=function(t,i){for(var n=0;n<this.kw;n++)this.elements[n].width=t,this.elements[n].style.width=t/this.Bv+"px",this.elements[n].height=i,this.elements[n].style.height=i/this.Bv+"px"},s.mw=o.uv(s.jw,function(t,i,n){this.init(2),this.shadowSize=void 0===i?1:i,this.Ir=t}),s.mw.prototype.getContext=function(t){return!(t.x%2&&t.y%2)&&(t.x%2||t.y%2)?this.lw[1]:this.lw[0]},s.mw.prototype.Cv=function(t,i){this.super.prototype.Cv.call(this,t,i);for(var n=0;n<this.kw;n++)this.lw[n].setTransform(1,0,0,1,Math.round(this.shadowSize*this.Ir.Hv/7),Math.round(this.shadowSize*this.Ir.Hv/7))};var g=function(t,i){var n=i.Kv(t.x),e=i.Lv(t.y),r=i.Hv;this.clearRect(n-2*r-i.Mv,e-2*r-i.Mv,4*r,4*r)},v=function(){return 3*this.width/(4*(this.zv+1-this.xv)+2)-this.gs*this.xv},y=function(){return 3*this.height/(4*(this.Av+1-this.yv)+2)-this.hs*this.yv},b=function(){return 4*this.width/(4*(this.zv+1-this.xv)+2)},m=function(){return 4*this.height/(4*(this.Av+1-this.yv)+2)},w=function(t,i){for(var n,e=0;e<this.as[t][i].length;e++){var r=this.as[t][i][e];n=r.type?"string"==typeof r.type?s.Ov[r.type]:r.type:this.Nv;for(var o in n)n[o].clear?n[o].clear.call(this[o].getContext(r),r,this):g.call(this[o].getContext(r),r,this)}},x=function(t,i){for(var n,e=0;e<this.as[t][i].length;e++){var r=this.as[t][i][e];n=r.type?"string"==typeof r.type?s.Ov[r.type]:r.type:this.Nv;for(var o in n)n[o].Jv.call(this[o].getContext(r),r,this)}},k=function(t){var i,n;i=t.layerX*this.Bv,i-=this.left,i/=this.gs,i=Math.round(i),n=t.layerY*this.Bv,n-=this.top,n/=this.hs,n=Math.round(n);var e=t.offsetY*this.Bv;return e-=this.top,e/=this.hs,e=Math.round(e),e!==n&&console.error("Using layerY we get",n," BUT using offsetY it would be",e),{x:i>=this.size?-1:i,y:n>=this.size?-1:n}},j=function(){this.Tr.style.width=this.width/this.Bv+"px",this.Tr.style.height=this.height/this.Bv+"px",this.Hv=u("stoneSize",this),this.Mv=u("linesShift",this);for(var t=0;t<this.kw.length;t++)this.kw[t].Cv(this.width,this.height)};s.prototype={constructor:s,init:function(){this.as=[];for(var t=0;t<this.size;t++){this.as[t]=[];for(var i=0;i<this.size;i++)this.as[t][i]=[]}this.Pv=[],this.kw=[],this.nw=[],this.Tr=document.createElement("div"),this.Tr.className="wgo-board",this.Tr.style.position="relative",this.background&&("#"==this.background[0]?this.Tr.style.backgroundColor=this.background:(this.Tr.style.backgroundImage="url('"+this.background+"')",this.Tr.style.backgroundColor="#c75")),this.grid=new s.hw,this.Xv=new s.mw(this,u("shadowSize",this)),this.ci=new s.jw,this.ow(this.grid,100),this.ow(this.Xv,200),this.ow(this.ci,300)},Dv:function(t){this.width=t,this.width*=this.Bv,this.hs=this.gs=b.call(this),this.left=v.call(this),this.height=(this.Av-this.yv+1.5)*this.hs,this.top=y.call(this),j.call(this),this.pw()},Ev:function(t){this.height=t,this.height*=this.Bv,this.gs=this.hs=m.call(this),this.top=y.call(this),this.width=(this.zv-this.xv+1.5)*this.gs,this.left=v.call(this),j.call(this),this.pw()},Cv:function(t,i){this.width=t||parseInt(this.Tr.style.width,10),this.width*=this.Bv,this.height=i||parseInt(this.Tr.style.height,10),this.height*=this.Bv,this.gs=b.call(this),this.hs=m.call(this),this.left=v.call(this),this.top=y.call(this),j.call(this),this.pw()},qw:function(){return this.section},rw:function(t,i,n,e){this.section="object"==typeof t?t:{top:t,right:i,bottom:n,left:e},this.xv=this.section.left,this.yv=this.section.top,this.zv=this.size-1-this.section.right,this.Av=this.size-1-this.section.bottom,this.Cv()},sw:function(t){var t=t||19;if(t!=this.size){this.size=t,this.as=[];for(var i=0;i<this.size;i++){this.as[i]=[];for(var n=0;n<this.size;n++)this.as[i][n]=[]}this.zv=this.size-1-this.section.right,this.Av=this.size-1-this.section.bottom,this.Cv()}},pw:function(){for(var t=0;t<this.kw.length;t++)this.kw[t].clear(this),this.kw[t].Jv(this);for(var t=0;t<this.size;t++)for(var i=0;i<this.size;i++)x.call(this,t,i);for(var t=0;t<this.Pv.length;t++){var n=this.Pv[t],e=n.bp;for(var r in e)e[r].Jv.call(this[r].getContext(n.Qv),n.Qv,this)}},Kv:function(t){return this.left+t*this.gs},Lv:function(t){return this.top+t*this.hs},ow:function(t,i){t.Nn(this.Tr,i),t.Cv(this.width,this.height),this.kw.push(t)},tw:function(t){var i=this.kw.indexOf(t);i>=0&&(this.kw.splice(i,1),t.gw(this.Tr))},update:function(t){var i;if(t.remove&&"all"==t.remove)this.uw();else if(t.remove)for(i=0;i<t.remove.length;i++)this._r(t.remove[i]);if(t.add)for(i=0;i<t.add.length;i++)this.bs(t.add[i])},bs:function(t){if(t.constructor!=Array){w.call(this,t.x,t.y);for(var i=this.as[t.x][t.y],n=0;n<i.length;n++)if(i[n].type==t.type)return i[n]=t,void x.call(this,t.x,t.y);t.type?i.push(t):i.unshift(t),x.call(this,t.x,t.y)}else for(var e=0;e<t.length;e++)this.bs(t[e])},_r:function(t){if(t.constructor!=Array){for(var i,n=0;n<this.as[t.x][t.y].length;n++)if(this.as[t.x][t.y][n].type==t.type){i=n;break}void 0!==i&&(w.call(this,t.x,t.y),this.as[t.x][t.y].splice(i,1),x.call(this,t.x,t.y))}else for(var e=0;e<t.length;e++)this._r(t[e])},js:function(t,i){this.as[t][i].length&&(w.call(this,t,i),this.as[t][i]=[])},uw:function(){this.as=[];for(var t=0;t<this.size;t++){this.as[t]=[];for(var i=0;i<this.size;i++)this.as[t][i]=[]}this.pw()},Qr:function(t,i){this.Pv.push({bp:t,Qv:i}),this.pw()},vw:function(t,i){for(var n=0;n<this.Pv.length;n++){var e=this.Pv[n];if(e.bp==t&&e.Qv==i)return this.Pv.splice(n,1),this.pw(),!0}return!1},addEventListener:function(t,i){var n=this,e={type:t,ww:i,xw:function(t){var e=k.call(n,t);i(e.x,e.y,t)}};this.Tr.addEventListener(t,e,!0),this.nw.push(e)},removeEventListener:function(t,i){for(var n=0;n<this.nw.length;n++){var e=this.nw[n];if(e.type==t&&e.ww==i)return this.Tr.removeEventListener(e.type,e,!0),this.nw.splice(n,1),!0}return!1},yw:function(){return{zw:o.clone(this.as),Aw:o.clone(this.Pv)}},Bw:function(t){this.as=t.zw||this.as,this.Pv=t.Aw||this.Pv,this.pw()}},s.default={size:19,width:0,height:0,font:"Calibri",lineWidth:1,Gv:!1,iw:{19:[{x:3,y:3},{x:9,y:3},{x:15,y:3},{x:3,y:9},{x:9,y:9},{x:15,y:9},{x:3,y:15},{x:9,y:15},{x:15,y:15}],13:[{x:3,y:3},{x:9,y:3},{x:3,y:9},{x:9,y:9}],9:[{x:4,y:4}]},Nv:s.Ov.$v,starSize:1,shadowSize:1,stoneSize:1,section:{top:0,right:0,bottom:0,left:0},background:o.nv+"wood1.jpg",Qo:{}},o.Pr=s,t.WGo=o}(window)},{}],100:[function(t,i,n){var e,r,o,s=t("superagent"),h=t("es6-promise").Promise,u=t("./get-base-url"),a=t("./http-header-safe-json");s.parse["application/octect-stream"]=function(t){return t},e=function(t,i){return{status:t.status,error:(i?i.text:null)||t.toString(),response:i}},o=function(t,i){t.text="",t.Cw("binary"),t.v("data",function(i){t.text+=i}),t.v("end",function(){i()})},r=function(t,i,n,r,c,l){if("user"!==n)throw new Error("Unexpected auth type: "+n);return new h(function(n,h){function p(t){n&&n(t)}function f(t){h&&h(t)}function d(t,i){var n;t?f(e(t,i)):(n=JSON.parse(i.headers["dropbox-api-result"]),i.Dw?n.fileBlob=i.Dw.response:n.Ew=i.Fw.text,p(n))}var g;g=s.Gw(u(r)+t).set("Authorization","Bearer "+c).set("Dropbox-API-Arg",a(i)).v("request",function(){this.Dw&&(this.Dw.responseType="blob")}),l&&(g=g.set("Dropbox-API-Select-User",l)),"undefined"==typeof window?g.buffer(!0).parse(o).end(d):g.end(d)})},i.g=r},{"./get-base-url":103,"./http-header-safe-json":104,"es6-promise":134,"superagent":138}],101:[function(t,i,n){var e,r=t("./request-constants");t("./object-assign-polyfill"),e=function(t){t=t||{},this.accessToken=t.accessToken,this.clientId=t.clientId,this.Hw=t.Hw},e.prototype.Iw=function(t){this.accessToken=t},e.prototype.Jw=function(){return this.accessToken},e.prototype.Kw=function(t){this.clientId=t},e.prototype.Lw=function(){return this.clientId},e.prototype.Cq=function(t,i){var n,e=this.Lw();if(!e)throw new Error("A client id is required. You can set the client id using .setClientId().");if(!t)throw new Error("A redirect uri is required.");return n="https://www.dropbox.com/oauth2/authorize?response_type=token&client_id="+e,t&&(n=n+"&redirect_uri="+t),i&&(n=n+"&state="+i),n},e.prototype.Mw=function(t,i,n,e,o){var s=null;switch(o){case r.Nw:s=this.Ow();break;case r.Pw:s=this.Qw();break;case r.Rw:s=this.Sw();break;default:throw new Error("Invalid request style: "+o)}return s(t,i,n,e,this.Jw(),this.Hw)},e.prototype.Tw=function(t){e.prototype.Uw=t},e.prototype.Ow=function(){return void 0===e.prototype.Uw&&(e.prototype.Uw=t("./rpc-request")),e.prototype.Uw},e.prototype.Vw=function(t){e.prototype.Ww=t},e.prototype.Qw=function(){return void 0===e.prototype.Ww&&(e.prototype.Ww=t("./download-request")),e.prototype.Ww},e.prototype.Xw=function(t){e.prototype.Yw=t},e.prototype.Sw=function(){return void 0===e.prototype.Yw&&(e.prototype.Yw=t("./upload-request")),e.prototype.Yw},i.g=e},{"./download-request":100,"./object-assign-polyfill":106,"./request-constants":107,"./rpc-request":109,"./upload-request":110}],102:[function(t,i,n){var e,r=t("./dropbox-base"),o=t("./routes");e=function(t){r.call(this,t)},e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype=Object.assign(e.prototype,o),e.prototype.Zw=function(t){return this.Mw("sharing/get_shared_link_file",t,"api","download")},i.g=e},{"./dropbox-base":101,"./routes":108}],103:[function(t,i,n){function e(t){return"https://"+t+".dropboxapi.com/2/"}i.g=e},{}],104:[function(t,i,n){function e(t){return JSON.stringify(t).replace(r,function(t){return"\\u"+("000"+t.charCodeAt(0).toString(16)).slice(-4)})}var r=/[\u007f-\uffff]/g;i.g=e},{}],105:[function(t,i,n){var e=t("./dropbox");i.g=e},{"./dropbox":102}],106:[function(t,i,n){"function"!=typeof Object.assign&&function(){Object.assign=function(t){"use strict";var i,n,e,r;if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(i=Object(t),n=1;n<arguments.length;n++)if(void 0!==(e=arguments[n])&&null!==e)for(r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);return i}}()},{}],107:[function(t,i,n){var e={Nw:"rpc",Pw:"download",Rw:"upload"};i.g=e},{}],108:[function(t,i,n){var e={};e.$w=function(t){return this.Mw("auth/token/from_oauth1",t,"app","api","rpc")},e._w=function(t){return this.Mw("auth/token/revoke",t,"user","api","rpc")},e.ax=function(t){return this.Mw("files/alpha/get_metadata",t,"user","api","rpc")},e.bx=function(t){return this.Mw("files/alpha/upload",t,"user","content","upload")},e.ex=function(t){return this.Mw("files/copy",t,"user","api","rpc")},e.gx=function(t){return this.Mw("files/copy_batch",t,"user","api","rpc")},e.hx=function(t){return this.Mw("files/copy_batch/check",t,"user","api","rpc")},e.ix=function(t){return this.Mw("files/copy_reference/get",t,"user","api","rpc")},e.jx=function(t){return this.Mw("files/copy_reference/save",t,"user","api","rpc")},e.Pq=function(t){return this.Mw("files/create_folder",t,"user","api","rpc")},e.Rq=function(t){return this.Mw("files/delete",t,"user","api","rpc")},e.kx=function(t){return this.Mw("files/delete_batch",t,"user","api","rpc")},e.lx=function(t){return this.Mw("files/delete_batch/check",t,"user","api","rpc")},e.Mq=function(t){return this.Mw("files/download",t,"user","content","download")},e.mx=function(t){return this.Mw("files/get_metadata",t,"user","api","rpc")},e.nx=function(t){return this.Mw("files/get_preview",t,"user","content","download")},e.ox=function(t){return this.Mw("files/get_temporary_link",t,"user","api","rpc")},e.px=function(t){return this.Mw("files/get_thumbnail",t,"user","content","download")},e.Hq=function(t){return this.Mw("files/list_folder",t,"user","api","rpc")},e.qx=function(t){return this.Mw("files/list_folder/continue",t,"user","api","rpc")},e.sx=function(t){return this.Mw("files/list_folder/get_latest_cursor",t,"user","api","rpc")},e.tx=function(t){return this.Mw("files/list_folder/longpoll",t,"noauth","notify","rpc")},e.ux=function(t){return this.Mw("files/list_revisions",t,"user","api","rpc")},e.Tq=function(t){return this.Mw("files/move",t,"user","api","rpc")},e.vx=function(t){return this.Mw("files/move_batch",t,"user","api","rpc")},e.wx=function(t){return this.Mw("files/move_batch/check",t,"user","api","rpc")},e.xx=function(t){return this.Mw("files/permanently_delete",t,"user","api","rpc")},e.yx=function(t){return this.Mw("files/properties/add",t,"user","api","rpc")},e.zx=function(t){return this.Mw("files/properties/overwrite",t,"user","api","rpc")},e.Ax=function(t){return this.Mw("files/properties/remove",t,"user","api","rpc")},e.Bx=function(t){return this.Mw("files/properties/template/get",t,"user","api","rpc")},e.Cx=function(t){return this.Mw("files/properties/template/list",t,"user","api","rpc")},e.Dx=function(t){return this.Mw("files/properties/update",t,"user","api","rpc")},e.Ex=function(t){return this.Mw("files/restore",t,"user","api","rpc")},e.Fx=function(t){return this.Mw("files/save_url",t,"user","api","rpc")},e.Gx=function(t){return this.Mw("files/save_url/check_job_status",t,"user","api","rpc")},e.Hx=function(t){return this.Mw("files/search",t,"user","api","rpc")},e.Nq=function(t){return this.Mw("files/upload",t,"user","content","upload")},e.Ix=function(t){return this.Mw("files/upload_session/append",t,"user","content","upload")},e.Jx=function(t){return this.Mw("files/upload_session/append_v2",t,"user","content","upload")},e.Kx=function(t){return this.Mw("files/upload_session/finish",t,"user","content","upload")},e.Lx=function(t){return this.Mw("files/upload_session/finish_batch",t,"user","api","rpc")},e.Mx=function(t){return this.Mw("files/upload_session/finish_batch/check",t,"user","api","rpc")},e.Nx=function(t){return this.Mw("files/upload_session/start",t,"user","content","upload")},e.Ox=function(t){return this.Mw("paper/docs/archive",t,"user","api","rpc")},e.Px=function(t){return this.Mw("paper/docs/download",t,"user","api","download")},e.Qx=function(t){return this.Mw("paper/docs/folder_users/list",t,"user","api","rpc")},e.Rx=function(t){return this.Mw("paper/docs/folder_users/list/continue",t,"user","api","rpc")},e.Sx=function(t){return this.Mw("paper/docs/get_folder_info",t,"user","api","rpc")},e.Tx=function(t){return this.Mw("paper/docs/list",t,"user","api","rpc")},e.Ux=function(t){return this.Mw("paper/docs/list/continue",t,"user","api","rpc")},e.Vx=function(t){return this.Mw("paper/docs/permanently_delete",t,"user","api","rpc")},e.Wx=function(t){return this.Mw("paper/docs/sharing_policy/get",t,"user","api","rpc")},e.Xx=function(t){return this.Mw("paper/docs/sharing_policy/set",t,"user","api","rpc")},e.Yx=function(t){return this.Mw("paper/docs/users/add",t,"user","api","rpc")},e.Zx=function(t){return this.Mw("paper/docs/users/list",t,"user","api","rpc")},e.$x=function(t){return this.Mw("paper/docs/users/list/continue",t,"user","api","rpc")},e._x=function(t){return this.Mw("paper/docs/users/remove",t,"user","api","rpc")},e.ay=function(t){return this.Mw("sharing/add_file_member",t,"user","api","rpc")},e.by=function(t){return this.Mw("sharing/add_folder_member",t,"user","api","rpc")},e.ey=function(t){return this.Mw("sharing/change_file_member_access",t,"user","api","rpc")},e.gy=function(t){return this.Mw("sharing/check_job_status",t,"user","api","rpc")},e.hy=function(t){return this.Mw("sharing/check_remove_member_job_status",t,"user","api","rpc")},e.iy=function(t){return this.Mw("sharing/check_share_job_status",t,"user","api","rpc")},e.jy=function(t){return this.Mw("sharing/create_shared_link",t,"user","api","rpc")},e.ky=function(t){return this.Mw("sharing/create_shared_link_with_settings",t,"user","api","rpc")},e.ly=function(t){return this.Mw("sharing/get_file_metadata",t,"user","api","rpc")},e.my=function(t){return this.Mw("sharing/get_file_metadata/batch",t,"user","api","rpc")},e.ny=function(t){return this.Mw("sharing/get_folder_metadata",t,"user","api","rpc")},e.oy=function(t){return this.Mw("sharing/get_shared_link_file",t,"user","content","download")},e.py=function(t){return this.Mw("sharing/get_shared_link_metadata",t,"user","api","rpc")},e.qy=function(t){return this.Mw("sharing/get_shared_links",t,"user","api","rpc")},e.sy=function(t){return this.Mw("sharing/list_file_members",t,"user","api","rpc")},e.ty=function(t){return this.Mw("sharing/list_file_members/batch",t,"user","api","rpc")},e.uy=function(t){return this.Mw("sharing/list_file_members/continue",t,"user","api","rpc")},e.vy=function(t){return this.Mw("sharing/list_folder_members",t,"user","api","rpc")},e.wy=function(t){return this.Mw("sharing/list_folder_members/continue",t,"user","api","rpc")},e.xy=function(t){return this.Mw("sharing/list_folders",t,"user","api","rpc")},e.yy=function(t){return this.Mw("sharing/list_folders/continue",t,"user","api","rpc")},e.zy=function(t){return this.Mw("sharing/list_mountable_folders",t,"user","api","rpc")},e.Ay=function(t){return this.Mw("sharing/list_mountable_folders/continue",t,"user","api","rpc")},e.By=function(t){return this.Mw("sharing/list_received_files",t,"user","api","rpc")},e.Cy=function(t){return this.Mw("sharing/list_received_files/continue",t,"user","api","rpc")},e.Dy=function(t){return this.Mw("sharing/list_shared_links",t,"user","api","rpc")},e.Ey=function(t){return this.Mw("sharing/modify_shared_link_settings",t,"user","api","rpc")},e.Fy=function(t){return this.Mw("sharing/mount_folder",t,"user","api","rpc")},e.Gy=function(t){return this.Mw("sharing/relinquish_file_membership",t,"user","api","rpc")},e.Hy=function(t){return this.Mw("sharing/relinquish_folder_membership",t,"user","api","rpc")},e.Iy=function(t){return this.Mw("sharing/remove_file_member",t,"user","api","rpc")},e.Jy=function(t){return this.Mw("sharing/remove_file_member_2",t,"user","api","rpc")},e.Ky=function(t){return this.Mw("sharing/remove_folder_member",t,"user","api","rpc")},e.Ly=function(t){return this.Mw("sharing/revoke_shared_link",t,"user","api","rpc")},e.My=function(t){return this.Mw("sharing/share_folder",t,"user","api","rpc")},e.Ny=function(t){return this.Mw("sharing/transfer_folder",t,"user","api","rpc")},e.Oy=function(t){return this.Mw("sharing/unmount_folder",t,"user","api","rpc")},e.Py=function(t){return this.Mw("sharing/unshare_file",t,"user","api","rpc")},e.Qy=function(t){return this.Mw("sharing/unshare_folder",t,"user","api","rpc")},e.Ry=function(t){return this.Mw("sharing/update_file_member",t,"user","api","rpc")},e.Sy=function(t){return this.Mw("sharing/update_folder_member",t,"user","api","rpc")},e.Ty=function(t){return this.Mw("sharing/update_folder_policy",t,"user","api","rpc")},e.Uy=function(t){return this.Mw("users/get_account",t,"user","api","rpc")},e.Vy=function(t){return this.Mw("users/get_account_batch",t,"user","api","rpc")},e.Wy=function(t){return this.Mw("users/get_current_account",t,"user","api","rpc")},e.Xy=function(t){return this.Mw("users/get_space_usage",t,"user","api","rpc")},i.g=e},{}],109:[function(t,i,n){var e=t("superagent"),r=t("es6-promise").Promise,o=t("./get-base-url"),s=function(t,i){return{status:t.status,error:(i?i.text:null)||t.toString(),response:i}},h=function(t,i,n,h,u,a){return new r(function(r,c){function l(t){r&&r(t)}function p(t){c&&c(t)}function f(t,i){t?p(s(t,i)):l(i.body)}var d;switch(i||(i=null),d=e.Gw(o(h)+t).type("application/json"),n){case"team":case"user":d.set("Authorization","Bearer "+u);break;case"noauth":break;default:throw new Error("Unhandled auth type: "+n)}a&&(d=d.set("Dropbox-API-Select-User",a)),d.send(i).end(f)})};i.g=h},{"./get-base-url":103,"es6-promise":134,"superagent":138}],110:[function(t,i,n){var e=t("superagent"),r=t("es6-promise").Promise,o=t("./get-base-url"),s=t("./http-header-safe-json"),h=function(t,i){return{status:t.status,error:(i?i.text:null)||t.toString(),response:i}},u=function(t,i,n,u,a,c){if("user"!==n)throw new Error("Unexpected auth type: "+n);return new r(function(n,r){function l(t){n&&n(t)}function p(t){r&&r(t)}function f(t,i){t?p(h(t,i)):l(i.body)}var d,g=i.contents;delete i.contents,d=e.Gw(o(u)+t).type("application/octet-stream").set("Authorization","Bearer "+a).set("Dropbox-API-Arg",s(i)),c&&(d=d.set("Dropbox-API-Select-User",c)),d.send(g).end(f)})};i.g=u},{"./get-base-url":103,"./http-header-safe-json":104,"es6-promise":134,"superagent":138}],111:[function(t,i,n){function e(t){if(t)return r(t)}function r(t){for(var i in e.prototype)t[i]=e.prototype[i];return t}void 0!==i&&(i.g=e),e.prototype.v=e.prototype.addEventListener=function(t,i){return this.Yy=this.Yy||{},(this.Yy["$"+t]=this.Yy["$"+t]||[]).push(i),this},e.prototype.A=function(t,i){function n(){this.C(t,n),i.apply(this,arguments)}return n.Zy=i,this.v(t,n),this},e.prototype.C=e.prototype.removeListener=e.prototype.D=e.prototype.removeEventListener=function(t,i){if(this.Yy=this.Yy||{},0==arguments.length)return this.Yy={},this;var n=this.Yy["$"+t];if(!n)return this;if(1==arguments.length)return delete this.Yy["$"+t],this;for(var e,r=0;r<n.length;r++)if((e=n[r])===i||e.Zy===i){n.splice(r,1);break}return this},e.prototype.F=function(t){this.Yy=this.Yy||{};var i=[].slice.call(arguments,1),n=this.Yy["$"+t];if(n){n=n.slice(0);for(var e=0,r=n.length;e<r;++e)n[e].apply(this,i)}return this},e.prototype.nw=function(t){return this.Yy=this.Yy||{},this.Yy["$"+t]||[]},e.prototype.$y=function(t){return!!this.nw(t).length}},{}],112:[function(t,i,n){i.g=1/0},{}],113:[function(t,i,n){i.g=1},{}],114:[function(t,i,n){"use strict";var e=t("./_map");i.g=function(t){function i(t,i){return function(t){i(t)}}return e(t,i)}},{"./_map":116}],115:[function(t,i,n){"use strict";var e=t("./a"),r=t("./_map");i.g=function(t){function i(t,i){return function(n,r){function o(t,i){return!!r[i]}if(n)return void i(n);i(null,e(r)?t.filter(o):function(){var i={};return Object.keys(t).forEach(function(n){o(null,n)&&(i[n]=t[n])}),i}())}}return r(t,i)}},{"./_map":116,"./a":117}],116:[function(t,i,n){"use strict";var e=t("./a"),r=t("./once"),o=t("./concurrent"),s=t("./CONCURRENTLY"),h=t("./SERIAL");i.g=function t(i,n,u){function a(t,h,u,a){var c=arguments;2===c.length&&(u=h,h=s),3===c.length&&"number"!=typeof h&&(a=u,u=h,h=s);var l=Object.keys(t),p=e(t)?[]:{};l.forEach(function(i){p[i]=function(n){3===u.length?u(t[i],i,n):u(t[i],n)}}),o(p,i||h,n?n(t,r(a)):a)}return u||(a.tr=t(h,n,!0)),a}},{"./CONCURRENTLY":112,"./SERIAL":113,"./a":117,"./concurrent":118,"./once":130}],117:[function(t,i,n){"use strict";i.g=function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],118:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./a"),o=t("./once"),s=t("./queue"),h=t("./errored"),u=t("./debounce"),a=t("./CONCURRENTLY");i.g=function(t,i,n){function c(i,n){function r(){var t=e(arguments);h(t,l)||(d[i]=t.shift(),n())}u(t[i],[r])}"function"==typeof i&&(n=i,i=a);var l=o(n),p=s(c,i),f=Object.keys(t),d=r(t)?[]:{};p.unshift(f),p.v("drain",function(){l(null,d)})}},{"./CONCURRENTLY":112,"./a":117,"./debounce":121,"./errored":124,"./once":130,"./queue":131,"atoa":127}],119:[function(t,i,n){"use strict";i.g={_y:t("./curry"),az:t("./concurrent"),tr:t("./series"),bz:t("./waterfall"),zr:t("./each"),map:t("./map"),filter:t("./filter"),cz:t("./queue"),emitter:t("./emitter")}},{"./concurrent":118,"./curry":120,"./each":122,"./emitter":123,"./filter":125,"./map":126,"./queue":131,"./series":132,"./waterfall":133}],120:[function(t,i,n){"use strict";var e=t("atoa");i.g=function(){var t=e(arguments),i=t.shift();return function(){var n=e(arguments);i.apply(i,t.concat(n))}}},{"atoa":127}],121:[function(t,i,n){"use strict";var e=t("ticky");i.g=function(t,i,n){t&&e(function(){t.apply(n||null,i||[])})}},{"ticky":128}],122:[function(t,i,n){"use strict";i.g=t("./_each")()},{"./_each":114}],123:[function(t,i,n){"use strict"
;var e=t("atoa"),r=t("./debounce");i.g=function(t,i){var n=i||{},o={};return void 0===t&&(t={}),t.v=function(i,n){return o[i]?o[i].push(n):o[i]=[n],t},t.A=function(i,n){return n.dz=!0,t.v(i,n),t},t.C=function(i,n){var e=arguments.length;if(1===e)delete o[i];else if(0===e)o={};else{var r=o[i];if(!r)return t;r.splice(r.indexOf(n),1)}return t},t.F=function(){var i=e(arguments);return t.ez(i.shift()).apply(this,i)},t.ez=function(i){var s=(o[i]||[]).slice(0);return function(){var o=e(arguments),h=this||t;if("error"===i&&n.throws!==!1&&!s.length)throw 1===o.length?o[0]:o;return s.forEach(function(e){n.async?r(e,o,h):e.apply(h,o),e.dz&&t.C(i,e)}),t}},t}},{"./debounce":121,"atoa":127}],124:[function(t,i,n){"use strict";var e=t("./debounce");i.g=function(t,i,n){var r=t.shift();if(r)return n&&n.fz(),e(i,[r]),!0}},{"./debounce":121}],125:[function(t,i,n){"use strict";i.g=t("./_filter")()},{"./_filter":115}],126:[function(t,i,n){"use strict";i.g=t("./_map")()},{"./_map":116}],127:[function(t,i,n){i.g=function(t,i){return Array.prototype.slice.call(t,i)}},{}],128:[function(t,i,n){var e,r="function"==typeof setImmediate;e=r?function(t){setImmediate(t)}:function(t){setTimeout(t,0)},i.g=e},{}],129:[function(t,i,n){"use strict";i.g=function(){}},{}],130:[function(t,i,n){"use strict";var e=t("./noop");i.g=function(t){function i(){n||(n=!0,(t||e).apply(null,arguments))}var n;return i.fz=function(){n=!0},i}},{"./noop":129}],131:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./a"),o=t("./once"),s=t("./emitter"),h=t("./debounce");i.g=function(t,i){function n(t,i,n){(r(i)?i:[i]).forEach(function(i){l[t]({tv:i,done:n})}),h(u)}function u(){if(!(c||p>=f)){if(!l.length)return void(0===p&&d.F("drain"));p++;var i=l.pop();t(i.tv,o(a.bind(null,i))),h(u)}}function a(t){p--,h(t.done,e(arguments,1)),h(u)}var c,l=[],p=0,f=i||1,d=s({push:n.bind(null,"push"),unshift:n.bind(null,"unshift"),pause:function(){c=!0},resume:function(){c=!1,h(u)},pending:l});return Object.defineProperty&&!Object.gz&&Object.defineProperty(d,"length",{get:function(){return l.length}}),d}},{"./a":117,"./debounce":121,"./emitter":123,"./once":130,"atoa":127}],132:[function(t,i,n){"use strict";var e=t("./concurrent"),r=t("./SERIAL");i.g=function(t,i){e(t,r,i)}},{"./SERIAL":113,"./concurrent":118}],133:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./once"),o=t("./errored"),s=t("./debounce");i.g=function(t,i){function n(){var i=e(arguments),u=t.shift();if(u){if(o(i,h))return;i.push(r(n)),s(u,i)}else s(h,arguments)}var h=r(i);n()}},{"./debounce":121,"./errored":124,"./once":130,"atoa":127}],134:[function(t,i,n){(function(e,r){!function(t,e){"object"==typeof n&&void 0!==i?i.g=e():"function"==typeof define&&define.hz?define(e):t.iz=e()}(this,function(){"use strict";function i(t){return"function"==typeof t||"object"==typeof t&&null!==t}function n(t){return"function"==typeof t}function o(t){F=t}function s(t){N=t}function h(){return function(){U(a)}}function u(){var t=setTimeout;return function(){return t(a,1)}}function a(){for(var t=0;t<R;t+=2){(0,$[t])($[t+1]),$[t]=void 0,$[t+1]=void 0}R=0}function c(t,i){var n=arguments,e=this,r=new this.constructor(p);void 0===r[tt]&&T(r);var o=e.lz;return o?function(){var t=n[o-1];N(function(){return B(o,r,t,e.mz)})}():M(e,r,t,i),r}function l(t){var i=this;if(t&&"object"==typeof t&&t.constructor===i)return t;var n=new i(p);return w(n,t),n}function p(){}function f(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function g(t){try{return t.then}catch(t){return rt.error=t,rt}}function v(t,i,n,e){try{t.call(i,n,e)}catch(t){return t}}function y(t,i,n){N(function(t){var e=!1,r=v(n,i,function(n){e||(e=!0,i!==n?w(t,n):k(t,n))},function(i){e||(e=!0,j(t,i))},"Settle: "+(t.nz||" unknown promise"));!e&&r&&(e=!0,j(t,r))},t)}function b(t,i){i.lz===nt?k(t,i.mz):i.lz===et?j(t,i.mz):M(i,void 0,function(i){return w(t,i)},function(i){return j(t,i)})}function m(t,i,e){i.constructor===t.constructor&&e===c&&i.constructor.resolve===l?b(t,i):e===rt?j(t,rt.error):void 0===e?k(t,i):n(e)?y(t,i,e):k(t,i)}function w(t,n){t===n?j(t,f()):i(n)?m(t,n,g(n)):k(t,n)}function x(t){t.oz&&t.oz(t.mz),S(t)}function k(t,i){t.lz===it&&(t.mz=i,t.lz=nt,0!==t.pz.length&&N(S,t))}function j(t,i){t.lz===it&&(t.lz=et,t.mz=i,N(x,t))}function M(t,i,n,e){var r=t.pz,o=r.length;t.oz=null,r[o]=i,r[o+nt]=n,r[o+et]=e,0===o&&t.lz&&N(S,t)}function S(t){var i=t.pz,n=t.lz;if(0!==i.length){for(var e=void 0,r=void 0,o=t.mz,s=0;s<i.length;s+=3)e=i[s],r=i[s+n],e?B(n,e,r,o):r(o);t.pz.length=0}}function z(){this.error=null}function q(t,i){try{return t(i)}catch(t){return ot.error=t,ot}}function B(t,i,e,r){var o=n(e),s=void 0,h=void 0,u=void 0,a=void 0;if(o){if(s=q(e,r),s===ot?(a=!0,h=s.error,s=null):u=!0,i===s)return void j(i,d())}else s=r,u=!0;i.lz!==it||(o&&u?w(i,s):a?j(i,h):t===nt?k(i,s):t===et&&j(i,s))}function D(t,i){try{i(function(i){w(t,i)},function(i){j(t,i)})}catch(i){j(t,i)}}function A(){return st++}function T(t){t[tt]=st++,t.lz=void 0,t.mz=void 0,t.pz=[]}function C(t,i){this.qz=t,this.rz=new t(p),this.rz[tt]||T(this.rz),H(i)?(this.sz=i,this.length=i.length,this.tz=i.length,this.mz=new Array(this.length),0===this.length?k(this.rz,this.mz):(this.length=this.length||0,this.uz(),0===this.tz&&k(this.rz,this.mz))):j(this.rz,E())}function E(){return new Error("Array Methods must be provided an Array")}function I(t){return new C(this,t).rz}function G(t){var i=this;return new i(H(t)?function(n,e){for(var r=t.length,o=0;o<r;o++)i.resolve(t[o]).then(n,e)}:function(t,i){return i(new TypeError("You must pass an array to race."))})}function P(t){var i=this,n=new i(p);return j(n,t),n}function _(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function L(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function O(t){this[tt]=A(),this.mz=this.lz=void 0,this.pz=[],p!==t&&("function"!=typeof t&&_(),this instanceof O?D(this,t):L())}function V(){var t=void 0;if(void 0!==r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var i=t.Promise;if(i){var n=null;try{n=Object.prototype.toString.call(i.resolve())}catch(t){}if("[object Promise]"===n&&!i.cast)return}t.Promise=O}var W=void 0;W=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var H=W,R=0,U=void 0,F=void 0,N=function(t,i){$[R]=t,$[R+1]=i,2===(R+=2)&&(F?F(a):Q())},Y="undefined"!=typeof window?window:void 0,K=Y||{},X=K.MutationObserver||K.WebKitMutationObserver,J="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),Z="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,$=new Array(1e3),Q=void 0;Q=J?function(){return function(){return e.m(a)}}():X?function(){var t=0,i=new X(a),n=document.createTextNode("");return i.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():Z?function(){var t=new MessageChannel;return t.port1.onmessage=a,function(){return t.port2.postMessage(0)}}():void 0===Y&&"function"==typeof t?function(){try{var i=t,n=i("vertx");return U=n.jz||n.kz,h()}catch(t){return u()}}():u();var tt=Math.random().toString(36).substring(16),it=void 0,nt=1,et=2,rt=new z,ot=new z,st=0;return C.prototype.uz=function(){for(var t=this.length,i=this.sz,n=0;this.lz===it&&n<t;n++)this.vz(i[n],n)},C.prototype.vz=function(t,i){var n=this.qz,e=n.resolve;if(e===l){var r=g(t);if(r===c&&t.lz!==it)this.wz(t.lz,i,t.mz);else if("function"!=typeof r)this.tz--,this.mz[i]=t;else if(n===O){var o=new n(p);m(o,t,r),this.xz(o,i)}else this.xz(new n(function(i){return i(t)}),i)}else this.xz(e(t),i)},C.prototype.wz=function(t,i,n){var e=this.rz;e.lz===it&&(this.tz--,t===et?j(e,n):this.mz[i]=n),0===this.tz&&k(e,this.mz)},C.prototype.xz=function(t,i){var n=this;M(t,void 0,function(t){return n.wz(nt,i,t)},function(t){return n.wz(et,i,t)})},O.all=I,O.race=G,O.resolve=l,O.reject=P,O.yz=o,O.zz=s,O.Az=N,O.prototype={constructor:O,then:c,"catch":function(t){return this.then(null,t)}},V(),O.Bz=V,O.Promise=O,O})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"_process":2}],135:[function(t,i,n){i.g=function(t,i){var n=i||document;if(n.createStyleSheet){var e=n.createStyleSheet();return e.cssText=t,e.ownerNode}var r=n.getElementsByTagName("head")[0],o=n.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(n.createTextNode(t)),r.appendChild(o),o},i.g.Cz=function(t){if(document.createStyleSheet)return document.createStyleSheet(t).ownerNode;var i=document.getElementsByTagName("head")[0],n=document.createElement("link");return n.rel="stylesheet",n.href=t,i.appendChild(n),n}},{}],136:[function(t,i,n){i.g=t("cssify")},{"cssify":135}],137:[function(t,i,n){i.g=function(t,i,n){for(var e=0,r=t.length,o=3==arguments.length?n:t[e++];e<r;)o=i.call(null,o,t[e],++e,t);return o}},{}],138:[function(t,i,n){function e(){}function r(t){switch({}.toString.call(t)){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(t){if(!m(t))return t;var i=[];for(var n in t)null!=t[n]&&s(i,n,t[n]);return i.join("&")}function s(t,i,n){if(Array.isArray(n))return n.forEach(function(n){s(t,i,n)});t.push(encodeURIComponent(i)+"="+encodeURIComponent(n))}function h(t){for(var i,n,e={},r=t.split("&"),o=0,s=r.length;o<s;++o)n=r[o],i=n.split("="),e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]);return e}function u(t){var i,n,e,r,o=t.split(/\r?\n/),s={};o.pop();for(var h=0,u=o.length;h<u;++h)n=o[h],i=n.indexOf(":"),e=n.slice(0,i).toLowerCase(),r=x(n.slice(i+1)),s[e]=r;return s}function a(t){return/[\/+]json\b/.test(t)}function c(t){return t.split(/ *; */).shift()}function l(t){return y(t.split(/ *; */),function(t,i){var n=i.split(/ *= */),e=n.shift(),r=n.shift();return e&&r&&(t[e]=r),t},{})}function p(t,i){i=i||{},this.Jz=t,this.Dw=this.Jz.Dw,this.text="HEAD"!=this.Jz.method&&(""===this.Dw.responseType||"text"===this.Dw.responseType)||void 0===this.Dw.responseType?this.Dw.responseText:null,this.statusText=this.Jz.Dw.statusText,this.Kz(this.Dw.status),this.Lz=this.headers=u(this.Dw.getAllResponseHeaders()),this.Lz["content-type"]=this.Dw.getResponseHeader("content-type"),this.Mz(this.Lz),this.body="HEAD"!=this.Jz.method?this.Nz(this.text?this.text:this.Dw.response):null}function f(t,i){var n=this;this.$z=this.$z||[],this.method=t,this.url=i,this.Lz={},this._z={},this.v("end",function(){var t=null,i=null;try{i=new p(n)}catch(i){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.aA=i,t.bA=n.Dw&&n.Dw.responseText?n.Dw.responseText:null,t.Oz=n.Dw&&n.Dw.status?n.Dw.status:null,n.ww(t)}if(n.F("response",i),t)return n.ww(t,i);if(i.status>=200&&i.status<300)return n.ww(t,i);var e=new Error(i.statusText||"Unsuccessful HTTP response");e.aA=t,e.response=i,e.status=i.status,n.ww(e,i)})}function d(t,i){var n=w("DELETE",t);return i&&n.end(i),n}var g,v=t("emitter"),y=t("reduce"),b=t("./request-base"),m=t("./is-object");g="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var w=i.g=t("./request").bind(null,f);w.Dz=function(){if(!(!g.XMLHttpRequest||g.location&&"file:"==g.location.protocol&&g.Ez))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1};var x="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};w.Fz=o,w.Gz=h,w.types={Xn:"text/html",json:"application/json",Hz:"application/xml",Iz:"application/x-www-form-urlencoded","form":"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},w.va={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify},w.parse={"application/x-www-form-urlencoded":h,"application/json":JSON.parse},p.prototype.get=function(t){return this.Lz[t.toLowerCase()]},p.prototype.Mz=function(t){var i=this.Lz["content-type"]||"";this.type=c(i);var n=l(i);for(var e in n)this[e]=n[e]},p.prototype.Nz=function(t){var i=w.parse[this.type];return!i&&a(this.type)&&(i=w.parse["application/json"]),i&&t&&(t.length||t instanceof Object)?i(t):null},p.prototype.Kz=function(t){1223===t&&(t=204);var i=t/100|0;this.status=this.Oz=t,this.Pz=i,this.info=1==i,this.ok=2==i,this.Qz=4==i,this.Rz=5==i,this.error=(4==i||5==i)&&this.Sz(),this.Tz=202==t,this.Uz=204==t,this.Vz=400==t,this.Wz=401==t,this.Xz=406==t,this.Yz=404==t,this.Zz=403==t},p.prototype.Sz=function(){var t=this.Jz,i=t.method,n=t.url,e="cannot "+i+" "+n+" ("+this.status+")",r=new Error(e);return r.status=this.status,r.method=i,r.url=n,r},w.Response=p,v(f.prototype);for(var k in b)f.prototype[k]=b[k];f.prototype.abort=function(){if(!this.cA)return this.cA=!0,this.Dw&&this.Dw.abort(),this.clearTimeout(),this.F("abort"),this},f.prototype.type=function(t){return this.set("Content-Type",w.types[t]||t),this},f.prototype.responseType=function(t){return this.dA=t,this},f.prototype.accept=function(t){return this.set("Accept",w.types[t]||t),this},f.prototype.eA=function(t,i,n){switch(n||(n={type:"basic"}),n.type){case"basic":var e=btoa(t+":"+i);this.set("Authorization","Basic "+e);break;case"auto":this.username=t,this.password=i}return this},f.prototype.fA=function(t){return"string"!=typeof t&&(t=o(t)),t&&this.$z.push(t),this},f.prototype.gA=function(t,i,n){return this.hA().append(t,i,n||i.name),this},f.prototype.hA=function(){return this.iA||(this.iA=new g.FormData),this.iA},f.prototype.send=function(t){var i=m(t),n=this._z["content-type"];if(i&&m(this.jA))for(var e in t)this.jA[e]=t[e];else"string"==typeof t?(n||this.type("form"),n=this._z["content-type"],this.jA="application/x-www-form-urlencoded"==n?this.jA?this.jA+"&"+t:t:(this.jA||"")+t):this.jA=t;return!i||r(t)?this:(n||this.type("json"),this)},p.prototype.parse=function(t){return g.console&&console.warn("Client-side parse() method has been renamed to serialize(). This method is not compatible with superagent v2.0"),this.va(t),this},p.prototype.va=function(t){return this.kA=t,this},f.prototype.ww=function(t,i){var n=this.lA;this.clearTimeout(),n(t,i)},f.prototype.mA=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.nA=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.ww(t)},f.prototype.oA=function(){var t=this.pA,i=new Error("timeout of "+t+"ms exceeded");i.timeout=t,this.ww(i)},f.prototype.withCredentials=function(){return this.qA=!0,this},f.prototype.end=function(t){var i=this,n=this.Dw=w.Dz(),o=this.$z.join("&"),s=this.pA,h=this.iA||this.jA;this.lA=t||e,n.onreadystatechange=function(){if(4==n.readyState){var t;try{t=n.status}catch(i){t=0}if(0==t){if(i.rA)return i.oA();if(i.cA)return;return i.mA()}i.F("end")}};var u=function(t){t.total>0&&(t.sA=t.loaded/t.total*100),t.direction="download",i.F("progress",t)};this.$y("progress")&&(n.onprogress=u);try{n.upload&&this.$y("progress")&&(n.upload.onprogress=u)}catch(t){}if(s&&!this.tA&&(this.tA=setTimeout(function(){i.rA=!0,i.abort()},s)),o&&(o=w.Fz(o),this.url+=~this.url.indexOf("?")?"&"+o:"?"+o),this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0),this.qA&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof h&&!r(h)){var c=this._z["content-type"],l=this.kA||w.va[c?c.split(";")[0]:""];!l&&a(c)&&(l=w.va["application/json"]),l&&(h=l(h))}for(var p in this.Lz)null!=this.Lz[p]&&n.setRequestHeader(p,this.Lz[p]);return this.dA&&(n.responseType=this.dA),this.F("request",this),n.send(void 0!==h?h:null),this},w.Request=f,w.get=function(t,i,n){var e=w("GET",t);return"function"==typeof i&&(n=i,i=null),i&&e.fA(i),n&&e.end(n),e},w.head=function(t,i,n){var e=w("HEAD",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e},w["del"]=d,w["delete"]=d,w.uA=function(t,i,n){var e=w("PATCH",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e},w.Gw=function(t,i,n){var e=w("POST",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e},w.put=function(t,i,n){var e=w("PUT",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e}},{"./is-object":139,"./request":141,"./request-base":140,"emitter":111,"reduce":137}],139:[function(t,i,n){function e(t){return null!=t&&"object"==typeof t}i.g=e},{}],140:[function(t,i,n){var e=t("./is-object");n.clearTimeout=function(){return this.pA=0,clearTimeout(this.tA),this},n.parse=function(t){return this.kA=t,this},n.timeout=function(t){return this.pA=t,this},n.then=function(t,i){return this.end(function(n,e){n?i(n):t(e)})},n.vA=function(t){return t(this),this},n.get=function(t){return this._z[t.toLowerCase()]},n.wA=n.get,n.set=function(t,i){if(e(t)){for(var n in t)this.set(n,t[n]);return this}return this._z[t.toLowerCase()]=i,this.Lz[t]=i,this},n.xA=function(t){return delete this._z[t.toLowerCase()],delete this.Lz[t],this},n.yA=function(t,i){return this.hA().append(t,i),this}},{"./is-object":139}],141:[function(t,i,n){function e(t,i,n){return"function"==typeof n?new t("GET",i).end(n):2==arguments.length?new t("GET",i):new t(i,n)}i.g=e},{}],142:[function(t,i,n){i.g={"name":"1g0","version":"0.4.3","description":"","author":"Olivier Lombart (kubicle)","license":"TBD","scripts":{"build":"browserify js/ui/htmlApp.js -t lessify | uglifyjs -o build/bld.js -m --mangle-props=unquoted --reserved-file build/reserved.json --reserve-domprops --mangle-regex=\"/^[a-zA-Z0-9_]+$/\" -c properties=false,pure_funcs=['log.debug','test.assert']","dev-build":"watchify js/test/testApp.js -o build/devBuild.js -t lessify -v","test":"node js/test/ciTestApp.js --ci","coverage":"node node_modules/istanbul/lib/cli.js cover js/test/ciTestApp.js -x **/frankie/** -x **/droopy/** -- --cover"},"main":"js/ui/htmlApp.js","repository":{"type":"git","url":"https://github.com/kubicle/1g0"},"bugs":{"url":"https://github.com/kubicle/1g0/issues"},"keywords":["baduk","go","igo","weiqi"],"dependencies":{"contra":"~1.9.4","dropbox":"~2.5.2"},"devDependencies":{"istanbul":"~0.3.22","codeclimate-test-reporter":"~0.1.1","browserify":"~10.2.4","lessify":"~1.0.1","watchify":"~3.2.2","uglify-js":"~2.8.18"}}},{}]},{},[88]);
>>>>>>> refs/remotes/origin/master
