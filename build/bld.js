!function t(i,n,e){function r(s,h){if(!n[s]){if(!i[s]){var a="function"==typeof require&&require;if(!h&&a)return a(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};i[s][0].call(c.exports,function(t){var n=i[s][1][t];return r(n||t)},c,c.exports,t,i,n,e)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<e.length;s++)r(e[s]);return r}({1:[function(t,i,n){function e(){c=!1,h.length?u=h.concat(u):p=-1,u.length&&r()}function r(){if(!c){var t=setTimeout(e);c=!0;for(var i=u.length;i;){for(h=u,u=[];++p<i;)h[p].g();p=-1,i=u.length}h=null,c=!1,clearTimeout(t)}}function o(t,i){this.i=t,this.j=i}function s(){}var h,a=i.exports={},u=[],c=!1,p=-1;a.h=function(t){var i=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)i[n-1]=arguments[n];u.push(new o(t,i)),1!==u.length||c||setTimeout(r,0)},o.prototype.g=function(){this.i.apply(null,this.j)},a.title="browser",a.k=!0,a.l={},a.m=[],a.version="",a.o={},a.p=s,a.addListener=s,a.q=s,a.s=s,a.removeListener=s,a.t=s,a.u=s,a.v=function(t){throw new Error("process.binding is not supported")},a.A=function(){return"/"},a.C=function(t){throw new Error("process.chdir is not supported")},a.D=function(){return 0}},{}],2:[function(t,i,n){i.exports={"#noInternet":"Error: no internet connection","#httpReqError":"Http error %1 while requesting %2","#appTitle":"1g0: let's play go!","#cancelAction":"Cancel","#confirmTitle":"Confirm","#problem":"Problem","#helpTip":"Help tip","#ok":"OK","#yes":"YES","#no":"NO","#cancel":"Cancel","#close":"Close","#none":"-","#play":"Play","#load":"Load","#newGame":"New game","#myGames":"My games","#importGame":"Import games","#exportGame":"Export game","#downloadLatest":"Update from %1","#fromFile":"From file:","#selectFile":"Select file","#recentGames":"Recent games:","#fromText":"From copy/paste:","#fromTextHelp":"Paste game in SGF format, e.g. (;FF[4]...)","#invalidSgf":'Invalid SGF game\n(game starts with "%1...")',"#mergeDivergence":"Merge error: games diverge at move #%1","#archivedGames":"Archived games","#deleteGame":"Delete","#deleteGameConfirm":"Do you really want to delete this game?","#archiveGame":"Archive","#archiveGameConfirm":"Do you want to archive this game? (you can restore it later)","#showArchivedGames":"Archived games","#restoreGame":"Restore","#empty":"(empty)","#myGamesHelp":"Any game you create or load/edit will be added to this list","#confirmSave":"Do you want to save this game, so you can continue it or study it later?","#settings":"Settings","#colorTheme":"Color theme","#setupDropbox":"Setup Dropbox","#devMenu":"Dev Menu","#resetAll":"Reset all","#resetAllConfirm":"All your unsynced game studies will be lost, are you sure?","#review":"Study","#endStudy":"End study","#evalScore":"Evaluate score","#bookmark":"Bookmark on/off","#rewindAll":"Go to game start","#gotoLastMove":"Go to game last move","#prune":"Delete this variation","#pruneConfirm":"Delete variation %1?\n(%3 moves starting by %2)","#resign":"Resign","#pass":"Pass","#undo":"Undo","#next":"Next","#nextN":"Next %1","#finish":"Finish","#accept":"Accept","#refuse":"Refuse","#slowAutomatic":"Slower","#gameStarted":"Game started...","#resignConfirm":"Do you really want to resign?","#cycleBookmarks":"Use this button to cycle through bookmarks. First, move to another position and set another bookmark.","#add":"Add","#remove":"Remove","#getLatestGame":"Get latest game moves","#retrieving":"Retrieving game %2 from %1...","#retrieved":"Game updated.","#syncGame":"Sync this game","#syncMyGames":"Sync my games","#syncStart":"Connecting...","#noCloud":"Not connected to cloud","#archivedGame":"[archived %1]","#remote":"[remote %1]","#uploaded":"Uploaded: ","#downloaded":"Downloaded: ","#alreadySync":"Already in sync: ","#synced":"Synced: ","#deleted":"Deleted: ","#archived":"Archived: ","#unarchived":"Unarchived: ","#undeleted":"Undeleted: ","#syncDone":"Sync completed."}},{}],3:[function(t,i,n){i.exports={"preload":{"5x5.png":"1","7x7.png":"1","9x9.png":"1","13x13.png":"1","19x19.png":"1","cloudSync.png":"1","cycle.png":"1","down.png":"1","empty.png":"1","human.png":"1","import.png":"1","lastReal.png":"1","menuBtn.png":"1","myGames.png":"1","prune.png":"1","refresh.png":"1","robot.png":"1","scoring.png":"1","settings.png":"1","trash.png":"1","up.png":"1","wood.jpg":"1"},"onDemand":{"i18n_en.json":"0.1"}}},{}],4:[function(t,i,n){i.exports={".cafeAuLait":{".menuBtn":{"backgroundColor":"#704f43"},".topMenu":{"backgroundColor":"#5c4137"},".btnInfo":{"color":"#483710"},".btn+disabled":{"opacity":.4}},".neonBlack":{"body":{"backgroundColor":"#000"},".btn":{"backgroundColor":"#02192b","color":"#daebef","borderColor":"#5d80c6"},".btn+toggled":{"backgroundColor":"#380966","color":"#cad904"},".btn+disabled":{"opacity":.6},".menuBtn":{"backgroundColor":"#0e4571"},".topMenu":{"backgroundColor":"#0b3557"},".statusBar":{"backgroundColor":"#c7cced","border":"#07b2ff 1px solid","boxShadow":"3px 3px 20px #537cc6"},".board":{"backgroundColor":"#002"},".mainControls":{"color":"#daebef"},".dialog":{"backgroundColor":"#0d0217","color":"#daebef","boxShadow":"#3fb 3px 3px 20px","border":"solid #b395d7 1px"},".dialogTitle":{"backgroundColor":"#0b3557","color":"#fffaff","textShadow":"#06b1ff 4px 4px 7px","borderColor":"#fff","boxShadow":"#00abff 3px 3px 20px"},".playerBtn":{"backgroundColor":"#5283ff"},".sizeBtn":{"backgroundColor":"#5283ff"},".boardImgFrame":{"backgroundColor":"#09132a","boxShadow":"#3fb 3px 3px 20px"},".curSize":{"textShadow":"#0a9da9 3px 3px 5px"},".gameList":{"border":"1px solid #8ea3da","backgroundColor":"#000"},".oneGame+selected":{"backgroundColor":"#2a4990"},".dropDwn":{"backgroundColor":"#000"},".inputBox":{"backgroundColor":"#000"},".devDiv":{"backgroundColor":"#5a3571","color":"#38cead","border":"1px solid #400ac1"},".devLogBox":{"color":"#000"}},".bottleGreen":{"body":{"backgroundColor":"#000"},".btn":{"backgroundColor":"#022b10","color":"#fff","borderColor":"#5dc677"},".btn+toggled":{"backgroundColor":"#380966","color":"#cad904"},".btn+disabled":{"opacity":.6},".menuBtn":{"backgroundColor":"#146c43"},".topMenu":{"backgroundColor":"#0b573e"},".statusBar":{"backgroundColor":"#8ca197","border":"#2d8722 1px solid","boxShadow":"3px 3px 20px #537cc6"},".board":{"backgroundColor":"#002600"},".mainControls":{"color":"#eee"},".dialog":{"backgroundColor":"#071903","color":"#eee","boxShadow":"#3ff 2px 2px 15px","border":"solid #000 1px"},".dialogTitle":{"backgroundColor":"#0b573e","color":"#fffaff","textShadow":"#06b1ff 4px 4px 7px","borderColor":"#fff","boxShadow":"#00abff 3px 3px 20px"},".playerBtn":{"backgroundColor":"#107733"},".sizeBtn":{"backgroundColor":"#107733"},".boardImgFrame":{"backgroundColor":"#0c2529","boxShadow":"#3ff 2px 2px 15px"},".curSize":{"textShadow":"#0a9da9 3px 3px 5px"},".gameList":{"border":"1px solid #8ea3da","backgroundColor":"#000"},".oneGame+selected":{"backgroundColor":"#2a4990"},".dropDwn":{"backgroundColor":"#000"},".inputBox":{"backgroundColor":"#000"},".devDiv":{"backgroundColor":"#5a3571","color":"#38cead","border":"1px solid #400ac1"},".devLogBox":{"color":"#000"}}}},{}],5:[function(t,i,n){i.exports={"confirm-delete-moves":3}},{}],6:[function(t,i,n){i.exports={"server-url":"https://ig0.herokuapp.com/","dropbox-clientId":"gdap2n66j8rl89n"}},{}],7:[function(t,i,n){i.exports={".cgos":{"useAreaScoring":!0,"usePositionalSuperko":!0},".chinese":{"useAreaScoring":!0,"usePositionalSuperko":!0},".japanese":{}}},{}],8:[function(t,i,n){i.exports={"preload":{"scorer.js":"!0.1"},"onDemand":{"ai-chuckie.js":"0.1","ai-droopy.js":"0.1","ai-frankie.js":"0.1"}}},{}],9:[function(t,i,n){"use strict";function e(t){this.F=t,this.G=null,this.H=null,this.I=null,this.J=null,this.K=null,this.L={},this.M=null,this.N=0}function r(t,i){return 0===i?"":", "+i+" "+t}function o(t){return t||0===t?" "+t:""}function s(t){var i=t.wa(),n=parseInt(i);return isNaN(n)?n=19:i=i.substr(i.indexOf(" ")+1),String.fromCharCode(90-n)+"|"+i}function h(t,i){return s(t).localeCompare(s(i))}var a=t("./GameInfo"),u=t("./hh/getText"),c=t("./net/goSites"),p=t("./ReviewTree"),l=t("./SgfReader"),f=t("./SgfWriter");i.exports=e;e.prototype.O=function(){var t={};return t["sgf"]=this.P(),t["tagMap"]=this.L,t["serverStamp"]=this.M,t["lastChange"]=this.N,t},e.prototype.R=function(t){if(this.F)throw new Error("Game already initialized");return"string"==typeof t&&"("===t[0]?(this.F=t,!0):!!t["sgf"]&&(this.F=t["sgf"],this.L=t["tagMap"]||{},this.M=t["serverStamp"]||null,this.N=t["lastChange"]||0,!0)},e.prototype.S=function(t,i,n,e){this.H=new p(e),this.J=e||[],this.I=new a,this.I.S(),this.I.T(t,i,n,this.J.length)},e.prototype.U=function(t,i,n){if(!l.V(t))return i.push(u("#invalidSgf",t.substr(0,15))),!1;if(this.F)throw new Error("Game already initialized");return this.F=t,this.X(i,n)},e.prototype.X=function(t,i){var n=new l;return!!n.Y(this.F,t,i)&&(this.I=new a,this.I.Z(n.$),this.H=n._(),this.J=n.aa()||[],this.K=n.ba(),!0)},e.prototype.ca=function(t,i){var n=this._(),e=t._(),r=n.ca(e);return r!==-1?(i.push(u("#mergeDivergence",r+1)),!1):(this.K=n.da(),this.F=null,!0)},e.prototype.ea=function(t){if(!this.K||this.K.join()!==t.join()){var i=this._();this.K=t.concat(),i.ea(t)}},e.prototype.fa=function(){return this.I||this.X(),this.I},e.prototype._=function(){return this.H||this.X(),this.H},e.prototype.aa=function(){return this.J||this.X(),this.J},e.prototype.ba=function(){return this.K||(this.K=this._().da()),this.K},e.prototype.P=function(){return this.F||this.ga(),this.F},e.prototype.ga=function(){var t=new f,i=t.ha(this.I,this.H);this.ia(i)},e.prototype.ia=function(t){return t!==this.F&&(this.F=t,this.L={},this.M=null,this.N=Date.now(),!0)},e.prototype.ja=function(t,i){var n=this.L[t];if(n)return n;var e=i,r=this.F.indexOf(t+"[");if(r>=0){var o=this.F.substring(r+t.length+1,this.F.indexOf("]",r));switch(typeof i){case"number":e=parseFloat(o);break;default:e=o}}return void 0!==e&&(this.L[t]=e),e},e.prototype.ka=function(t){var i=this.ja(t,"?");return i.length<=10?i:i.substr(0,9).trim()+"."},e.prototype.la=function(){var t=this.L["movCount"];return void 0!==t?t:(t=this.ba().length,this.L["movCount"]=t,t)},e.prototype.ma=function(){var t=this.L["varCount"];if(void 0!==t)return t;var i=this._(),n=i.na();for(i.oa(),t=0;;){var e=i.pa();if(!i.qa())break;t+=e?e.length-1:0}return t+=e?e.length:i.ra()?1:0,i.sa(n),this.L["varCount"]=t,t},e.prototype.ta=function(t,i){this.M=t,this.N=i},e.prototype.ua=function(){return this.M},e.prototype.va=function(){return this.N},e.prototype.wa=function(){this.F||this.ga();var t="",i=this.ja("SZ",19);return 19!==i&&(t+=i+"x"+i+" "),t+=this.ka("PW")+"/"+this.ka("PB"),t+=r("mov.",this.la()),t+=r("var.",this.ma())},e.prototype.xa=function(){if(this.G)return this.G;this.F||this.ga();var t="",i=this.ja("SZ",19);return 19!==i&&(t+=i+"x"+i+" "),t+=this.ka("PW")+"-VS-"+this.ka("PB"),t+=o(this.ja("DT")),t+=o(this.ya("PC")),t+=o(this.ya("SO")),t+=o(this.ya("EV")),t=t.replace(/[\\\/]/g,"-"),this.G=t,t},e.prototype.ya=function(t){var i=this.ja(t);return i?c.za(t,i):i},e.Aa=h},{"./GameInfo":10,"./ReviewTree":21,"./SgfReader":23,"./SgfWriter":24,"./hh/getText":46,"./net/goSites":59}],10:[function(t,i,n){"use strict";function e(){this.Ba()}i.exports=e,e.prototype.Ba=function(){this.Ca={}},e.prototype.S=function(){this.Ba(),this.Da("date",(new Date).toISOString().substr(0,10))},e.prototype.Z=function(t){this.Ba();for(var i in t)this.Ca[i]=t[i]},e.prototype.Ea=function(t){return this.Ca[t]},e.prototype.Da=function(t,i){this.Ca[t]=i},e.prototype.Fa=function(){return this.Ca},e.prototype.T=function(t,i,n,e){this.Da("boardSize",t),this.Da("komi",i),this.Da("rules",n),e&&this.Da("handicap",e)},e.prototype.Ga=function(t,i,n){var e=t?"W":"B",r=i||n||"Resign";this.Da("result",e+"+"+r)},e.prototype.Ha=function(){return this.Ea("result")}},{}],11:[function(t,i,n){"use strict";function e(){this.Qa(m),this.Ra=null,this.Sa()}var r=t("./constants"),o=t("./Goban"),s=t("./HandicapSetter"),h=t("./log"),a=t("./Move"),u=t("../config/rules.json"),c=a.Ia,p=a.Ja,l=a.Ka,f=a.La,d=a.Ma,g=r.Na,v=r.Oa,m=r.Pa;i.exports=e,e.prototype.Sa=function(){this.history=[],this.Ta=[],this.Ua=null,this.Va=0,this.Wa=this.Xa=g,this.Ya=this.Za=!1,this.$a=this._a=null},e.prototype.ab=function(t){this.Qa(t.bb,!0),this.cb(t.Ra.eb,t.Ua,t.Va),this.fb(t.Xa),this.gb(t.history)},e.prototype.hb=function(){this.Ra.clear(),this.history=[],this.Wa=this.Xa,this.Ya=this.Za=!1,this.ib()},e.prototype.Qa=function(t,i){this.bb=t,t=t||"unspecified";var n=u["."+t.toLowerCase()];if(!n){if(!i)throw new Error("Invalid rules: "+t+"\nValid values: "+Object.keys(u).map(function(t){return t.substr(1)}).join(", "));n=u["."+m.toLowerCase()]}this.usePositionalSuperko=n.usePositionalSuperko||!1,this.useAreaScoring=n.useAreaScoring||!1},e.prototype.jb=function(){return this.bb},e.prototype.cb=function(t,i,n){if(this.Sa(),this.Ra&&t===this.Ra.eb)this.Ra.clear();else if(this.Ra=new o(t),this.Ra.eb!==t)return this.kb("Size could not be set: "+t);return this.Ra.lb(this.usePositionalSuperko),this.Va=void 0!==n?n:.5,i=i||0,!!this.mb(i)},e.prototype.nb=function(t){this.Va=t},e.prototype.fb=function(t){this.Wa=this.Xa=t},e.prototype.mb=function(t){if(this.history.length>0)throw new Error("Handicap cannot be changed during a game");if(0===t||"0"===t)return this.Ua=null,this.fb(g),!0;var i,n,e;if(""+~~t==""+t)for(e=~~t,i=s.ob(this.Ra.eb,e),this.Ua=[],n=0;n<i.length;n++)this.Ua.push(d(i[n][0],i[n][1]));else e=t.length,this.Ua=t;return this.Ua.length||(this.Ua=null),this.ib(),this.fb(this.Ua?v:g),!(e&&(!this.Ua||this.Ua.length!==e))||this.kb("Handicap could not be set: "+t)},e.prototype.ib=function(){var t=this.Ua;if(t)for(var i=0;i<t.length;i++){var n=f(t[i]);this.Ra.pb(n[0],n[1],n[2]||g)}},e.prototype.qb=function(){return this.Ua},e.prototype.rb=function(){return this.Ua?this.Ua.length:0},e.prototype.sb=function(t,i){if(h.error&&h.error(t),!i)throw new Error(t);return i.push(t),!1},e.prototype.gb=function(t,i){if(!t||!t.length)return!0;for(var n=0;n<t.length;n++)if(!this.tb(t[n]))return this.sb("Failed playing loaded move #"+(n+1)+":\n"+this.ub().join(", "),i);return!0},e.prototype.vb=function(t,i){return!t||this.gb(t.split(","),i)},e.prototype.tb=function(t){if(this.Za&&t.indexOf("undo")<0)return this.kb("Game already ended");if(/^[B|W]?-?[a-z][1-2]?[0-9]$/.test(t))return this.wb(t);var i=l(t);if(i.startsWith("pass"))return this.xb();if(i.startsWith("resi"))return this.yb(p(t));if("undo"===i)return this.zb();if("half_undo"===i)return this.zb(!0);if(i.startsWith("hand")){var n=i.substr(i.indexOf(":")+1);return this.mb(n.split("-"))}return i.startsWith("load:")?this.vb(i.slice(5)):this.kb("Invalid command: "+i.substr(0,20))},e.prototype.wb=function(t){var i=f(t);3===i.length&&(this.Wa=i[2]);var n=i[0],e=i[1];return this.Ra.Ab(n,e,this.Wa)?(this.Ra.pb(n,e,this.Wa),this.Bb(t),this.Cb(),!0):this.kb("Invalid move: "+t)},e.prototype.yb=function(t,i){t=void 0!==t?t:this.Wa,this.$a=t,this._a=i;var n=c("resign",t)+(i?"-"+i:"");return this.Bb(n),this.Cb(),this.Za=!0,this.Ya=!1,!0},e.prototype.xb=function(){var t=this.history[this.history.length-1];return t&&t.endsWith("pass")&&(this.Ya=!0),this.Bb(c("pass",this.Wa)),this.Cb(),!0},e.prototype.Db=function(){if(!this.Ya)return this.kb("Game is not ending yet");this.Ya=!1,this.Za=!0},e.prototype.Eb=function(){for(this.Ya=!1;this.history[this.history.length-1].endsWith("pass");)this.history.pop(),this.Cb()},e.prototype.Fb=function(){return this.history.length},e.prototype.Gb=function(){return this.history},e.prototype.Hb=function(){var t="";this.Ua&&(t="handicap:"+this.Ua.join("-")+",");var i=this.history;return i[0]=c(l(i[0]),this.Xa),t+i.join(",")},e.prototype.kb=function(t){return this.Ta.push(t),!1},e.prototype.ub=function(){var t=this.Ta;return this.Ta=[],t},e.prototype.Cb=function(){this.Wa=1-this.Wa},e.prototype.Bb=function(t){return this.history.push(t)},e.prototype.zb=function(t){var i=t?1:2;if(this.history.length<i)return this.kb("Nothing to undo");this.Za=this.Ya=!1;for(var n=i;n>=1;n--){var e=this.history.pop();!e.endsWith("pass")&&e.indexOf("resi")<0&&this.Ra.Ib()}return t&&this.Cb(),!0}},{"../config/rules.json":7,"./Goban":14,"./HandicapSetter":17,"./Move":19,"./constants":27,"./log":55}],12:[function(t,i,n){"use strict";function e(t){this.Jb=t,this.Kb=null,this.Lb()}var r=t("./GameInVault"),o=t("./GameVaultList"),s=t("./MostRecentlyUsedList");i.exports=e,e.prototype.Lb=function(){this.Mb=new o(this.Jb,"myActiveGames"),this.Nb=new o(this.Jb,"archivedGames"),this.Ob=new o(this.Jb,"recentGames"),this.Pb=new s(this.Jb,"mostRecentGames",5),this.Mb.Qb("myGames")},e.prototype.Rb=function(t){return this.Kb&&this.Sb(),this.Kb=t,this.Kb},e.prototype.Tb=function(){return this.Kb},e.prototype.Sb=function(){var t=this.Kb;return t&&(this.Kb=null,this.Mb.Ub(t),this.Vb(t)),t},e.prototype.Wb=function(t){var i=this.Pb.getItem(t);return this.Ob.Xb(i)||null},e.prototype.Yb=function(t){this.Mb.Ub(t)},e.prototype.Zb=function(t){return this.Mb.Xb(t)||null},e.prototype.$b=function(){return this.Mb._b()};e.ac={bc:0,ACTIVE:1,cc:2,dc:-1},e.prototype.ec=function(t){return this.Mb.Xb(t)?1:this.Nb.Xb(t)?2:this.fc(t)?-1:0},e.prototype.gc=function(t){return this.Nb.Xb(t)},e.prototype.hc=function(){return this.Nb._b()},e.prototype.ic=function(t){return this.Mb.jc(t)},e.prototype.kc=function(t){return this.Nb.jc(t)},e.prototype.fc=function(t){return this.Mb.fc(t)||this.Nb.fc(t)},e.prototype.lc=function(t){return this.Mb.mc(this.Nb,t)},e.prototype.nc=function(t){return this.Nb.mc(this.Mb,t)},e.prototype.oc=function(t){this.Nb.Ub(t)},e.prototype.pc=function(t,i){var n=new r;if(!n.U(t,i))return null;var e=this.Mb.Xb(n.xa());return e?e.ca(n,i)?e:null:n},e.prototype.qc=function(t){this.Jb.rc("interruptedGame",t.O())},e.prototype.sc=function(){var t=this.Jb.tc("interruptedGame");if(!t)return null;var i=new r;return i.R(t)?(this.Jb.rc("interruptedGame",null),i):(console.error("Invalid serialized game"),null)},e.prototype.uc=function(){for(var t=this.Pb.vc(),i=[],n=0;n<t.length;n++){var e=this.Ob.Xb(t[n]);e&&i.push(e.wa())}return i},e.prototype.Vb=function(t){this.Ob.Ub(t);var i=t.xa();this.Pb.wc(i)&&this.Ob.jc(i)}},{"./GameInVault":9,"./GameVaultList":13,"./MostRecentlyUsedList":18}],13:[function(t,i,n){"use strict";function e(t,i){this.Jb=t,this.xc=i,this.yc={},this.zc=null,this.Ac={},this.Bc()}var r=t("./GameInVault");i.exports=e;e.prototype.Bc=function(){this.zc=this.Jb.tc(this.xc,{}),this.Ac=this.Jb.tc(this.xc+"~",{});for(var t in this.zc){var i=new r;i.R(this.zc[t]),this.yc[t]=i}},e.prototype.Qb=function(t){for(var i=this.Jb.tc(t,[]),n=0;n<i.length;n++){var e=new r(i[n]),o=e.xa();this.yc[o]=e,this.zc[o]=e.O()}this.Jb.rc(this.xc,this.zc),this.Jb.rc(t,void 0)},e.prototype.Ub=function(t){var i=t.xa();this.yc[i]=t,this.zc[i]=t.O(),this.Jb.rc(this.xc,this.zc),this.Ac[i]&&(delete this.Ac[i],this.Jb.rc(this.xc+"~",this.Ac))},e.prototype.Cc=function(t){return!!this.yc[t]&&(delete this.yc[t],delete this.zc[t],this.Jb.rc(this.xc,this.zc),!0)},e.prototype.jc=function(t){return!!this.Cc(t)&&(this.Ac[t]=Date.now(),this.Jb.rc(this.xc+"~",this.Ac),!0)},e.prototype.fc=function(t){return this.Ac[t]},e.prototype._b=function(){var t=[];for(var i in this.yc)t.push(this.yc[i]);return t},e.prototype.Xb=function(t){return this.yc[t]},e.prototype.mc=function(t,i){var n=this.yc[i];return!!n&&(this.Cc(i),t.Ub(n),!0)}},{"./GameInVault":9}],14:[function(t,i,n){"use strict";function e(t){if(void 0===t&&(t=19),t!==~~t||t<3)throw new Error("Invalid goban size: "+t);this.eb=t,this.Ec=new o(t,a),this.grid=new o(t,s.Dc),this.Fc=this.grid.Gc;var i,n;for(n=t;n>=1;n--)for(i=t;i>=1;i--)this.Fc[n][i]=new s(this,i,n,u);for(n=1;n<=t;n++)for(i=1;i<=t;i++)this.Fc[n][i].Hc();e.Ic=new h(this,new s(this,-50,-50,u),-100,0),this.Jc=[e.Ic],this.Kc=[e.Ic],this.Lc=[],this.Mc=0,this.history=[],this.lb(!1),this.Nc=0}var r=t("./constants"),o=t("./Grid"),s=t("./Stone"),h=t("./Group"),a=(t("./test"),r.Dc),u=r.EMPTY;i.exports=e,e.prototype.clear=function(){for(var t=1;t<=this.eb;t++)for(var i=1;i<=this.eb;i++){var n=this.Fc[t][i];n.group&&n.group.clear()}this.Jc.shift(),this.Kc.shift(),this.Lc.concat(this.Jc),this.Lc.concat(this.Kc),this.Jc.length=0,this.Kc.length=0,this.Jc.push(e.Ic),this.Kc.push(e.Ic),this.Mc=0,this.history.length=0,this.lb(!1),this.Nc=0},e.prototype.Oc=function(t,i){var n=++this.Mc,e=this.Lc.pop();return e?e.Pc(t,i,n):e=new h(this,t,i,n),e},e.prototype.Qc=function(t){t.Rc===this.Mc&&this.Mc--,this.Lc.push(t)},e.prototype.Sc=function(){return this.grid.Tc()},e.prototype.Uc=function(t){this.Ec.Uc(t);for(var i=this.eb;i>=1;i--)for(var n=1;n<=this.eb;n++){var e=this.Ec.Gc[i][n];e!==u&&this.pb(n,i,e)}},e.prototype.Vc=function(){for(var t={},i=this.eb;i>=1;i--)for(var n=this.eb;n>=1;n--){var e=this.Fc[i][n].group;e&&(t[e.Rc]=e)}return t},e.prototype.Wc=function(){for(var t,i="Board:\n"+this.toString()+"\nGroups:\n"+this.grid.Xc(function(t){return t.group?""+t.group.Rc:"."})+"\nStones in groups:\n",n={},e=this.grid.Gc,r=0;t=e[r],r<e.length;r++)for(var o,s=t,h=0;o=s[h],h<s.length;h++)o&&o.group&&(n[o.group.Rc]=o.group);for(var a=1;a<=this.Mc;a++)n[a]&&(i+=n[a].Wc()+"\n");return i},e.prototype.toString=function(){return this.grid.Xc()},e.prototype.Ab=function(t,i,n){if(t<1||t>this.eb||i<1||i>this.eb)return!1;var e=this.Fc[i][t];if(e.color!==u)return!1;if(e.Yc(n))return!1;if(this.Zc){if(this.$c[this._c(t,i,n)])return!1}else if(e.ad(n))return!1;return!0},e.prototype.bd=function(t,i){return this.Fc[i][t]},e.prototype.dd=function(t,i){return this.Fc[i][t].color},e.prototype.ed=function(t,i){return this.Fc[i][t].ed()},e.prototype.fd=function(){return this.history.length},e.prototype.pb=function(t,i,n){this.gd(t,i,n);var e=this.Fc[i][t];if(e.color!==u)throw new Error("Tried to play on existing stone in "+e);return this.hd(t,i,n)},e.prototype.Ib=function(){if(!this.history.length)throw new Error("Extra undo");this.history.pop().jd(),this.gd()},e.prototype.hd=function(t,i,n){var e=this.Fc[i][t];return e.Yc(n),this.history.push(e),this.Nc++,e.kd(n),e},e.prototype.ld=function(){this.history.pop().jd()},e.prototype.md=function(){return this.Jc[this.Jc.length-1]},e.prototype.nd=function(){return this.history[this.history.length-1]},e.prototype.od=function(t){t=t||[0,0];for(var i=this.Jc.length-1;i>0;i--){var n=this.Jc[i];t[n.color]+=n.pd.length}return t},e.prototype.lb=function(t){if(this.history.length>0)throw new Error("Superko rule changed during game");this.Zc=t,t?(this.qd=this.rd(),this.sd=[],this.$c={}):(this.qd=null,this.sd=this.$c=null)},e.prototype.gd=function(t,i,n){this.Zc?t?(this.sd.push(this.qd),this.$c[this.qd]=this.history.length,this.qd=this._c(t,i,n)):(this.qd=this.sd.pop(),this.$c[this.qd]=null):this.qd=null},e.prototype._c=function(t,i,n){for(var e=this.td(this.qd,t,i,n),r=this.bd(t,i).ud(1-n),o=r.length-1;o>=0;o--)if(!(r[o].vd>1))for(var s=r[o].pd,h=s.length-1;h>=0;h--){var a=s[h];e=this.td(e,a.wd,a.xd,u)}return e},e.prototype.yd=function(){return this.Zc?this.qd:(this.qd||(this.qd=this.Sc()),this.qd)};var c="0".charCodeAt();e.prototype.rd=function(){for(var t="",i="",n=this.eb,e=1;e<=n;e++)for(var r=this.Fc[e],o=1;o<=n;o++)t+=String.fromCharCode(c+r[o].color+1),4===t.length&&(i+=String.fromCharCode(parseInt(t,3)+33),t="");return t.length&&(t=(t+"000").substr(0,4),i+=String.fromCharCode(parseInt(t,3)+33)),i},e.prototype.td=function(t,i,n,e){var r,o=(n-1)*this.eb+(i-1),s=~~(o/4),h=o%4;if(e===u){var a=("000"+(t.charCodeAt(s)-33).toString(3)).slice(-4),c=a.substr(0,h)+"0"+a.substr(h+1);r=parseInt(c,3)+33}else r=t.charCodeAt(s)+(1<<e)*Math.pow(3,3-h);return t.substr(0,s)+String.fromCharCode(r)+t.substr(s+1)}},{"./Grid":15,"./Group":16,"./Stone":25,"./constants":27,"./test":60}],15:[function(t,i,n){"use strict";function e(t,i,n){if(void 0===i)throw new Error("Grid init value must be defined");this.eb=t,void 0===n?this.Gc=a.Ad(t+2,t+2,i):(this.Gc=a.Ad(t+2,t+2,n),this.init(i))}function r(t){if(t===p)return"(BORDER)";if(t>=e.Id)return String.fromCharCode("A".charCodeAt()+t-e.Id);if(t<e.Kd||t>=e.Gd.length)throw new Error("Invalid color "+t);return t<0&&(t+=e.Gd.length),e.Gd[t]}function o(t){return r("number"==typeof t?t:t.color)}function s(t){for(var i="",n=t.length-1;n>=0;n--)i+=t[n];return i}var h=t("./constants"),a=t("./helper"),u=t("./Move"),c=u.zd,p=h.Dc;i.exports=e,e.Bd="+",e.Cd="?",e.Dd="@O",e.Ed="&#",e.Fd="-:",e.Gd=e.Dd+e.Ed+e.Fd+e.Cd+e.Bd,e.Hd=e.Cd+e.Bd+e.Gd,e.Id=100,e.Jd=-1,e.Kd=-2,e.Ld=2,e.Md=4,e.Nd=[0,0,-1,1,1,-1,-1,1],e.Od="-'?.:",e.prototype.init=function(t){if(void 0===t)throw new Error("Grid init value must be defined");for(var i=this.eb;i>=1;i--)for(var n=this.Gc[i],e=this.eb;e>=1;e--)n[e]=t},e.prototype.Pd=function(t){if(t.eb!==this.eb)throw new Error("Cannot copy between different sized grids");for(var i=this.eb;i>=1;i--)for(var n=this.Gc[i],e=t.Gc[i],r=this.eb;r>=1;r--)n[r]=e[r];return this},e.prototype.Qd=function(t){var i=t.grid;if(i.eb!==this.eb)throw new Error("Cannot copy between different sized grids");for(var n=this.eb;n>=1;n--)for(var e=this.Gc[n],r=i.Gc[n],o=this.eb;o>=1;o--)e[o]=r[o].color;return this},e.Rd=function(t){return e.Hd.indexOf(t)+e.Kd},e.prototype.Xc=function(t){return this.Sd(!0,"\n",t||o)},e.prototype.Tc=function(t){return this.Sd(!1,",",t||o)},e.Td=function(t){return t.indexOf(",")},e.prototype.Sd=function(t,i,n){var r,o,s,h=new e(this.eb,"").Gc,a=1;for(o=this.eb;o>=1;o--)for(r=1;r<=this.eb;r++)null!==(s=n(this.Gc[o][r]))&&(h[o][r]=s,a=Math.max(a,s.length));var u=a,p="          ",l="";for(o=this.eb;o>=1;o--){for(t&&(l+="%2d".format(o)+" "),r=1;r<=this.eb;r++)s=h[o][r],s.length<u&&(s=p.substr(1,u-s.length)+s),l+=s;l+=i}if(t){for(l+="   ",r=1;r<=this.eb;r++)l+=p.substr(1,u-1)+c(r);l+="\n"}return"\n"!==i&&(l=l.Ud()),l},e.prototype.toString=function(){for(var t="",i=this.eb;i>=1;i--){for(var n=1;n<=this.eb;n++)t+=r(this.Gc[i][n]);t+="\n"}return t},e.prototype.Sc=function(){return"object"==typeof this.Gc[1][1]?this.Tc(function(t){return r(t.color)}):this.Tc(function(t){return r(t)})},e.prototype.Uc=function(t){var i=t.split(/\"|,/);if(i.length!==this.eb)throw new Error("Invalid image: "+i.length+" rows instead of "+this.eb);for(var n=this.eb;n>=1;n--){var r=i[this.eb-n];if(r.length!==this.eb)throw new Error("Invalid image: row "+r);for(var o=1;o<=this.eb;o++)this.Gc[n][o]=e.Rd(r[o-1])}},e.Vd=function(t){return t.split(",").reverse().join()},e.Wd=function(t){return t.split(",").map(s).join()},e.Xd=function(t){return s(t)},e.Yd=function(t){for(var i="",n=t.split(","),e=n[0].length-1;e>=0;e--){i+=",";for(var r=0;r<n.length;r++)i+=n[r][e]}return i.substr(1)}},{"./Move":19,"./constants":27,"./helper":28}],16:[function(t,i,n){"use strict";function e(t,i,n,e){this.Ra=t,this.pd=[i],this.vd=n,this.color=i.color,this.$d=null,this._d=null,this.ae=null,this.Rc=e,this.be=null,this.ce=this.de=0}var r=t("./constants"),o=t("./log"),s=t("./Move"),h=s.Zd,a=r.EMPTY;i.exports=e,e.prototype.Pc=function(t,i,n){this.pd.length=0,this.pd.push(t),this.vd=i,this.color=t.color,this.$d=this._d=this.ae=null,this.Rc=n,this.ce=this.de=0},e.prototype.clear=function(){for(var t=this.pd.length-1;t>=0;t--)this.pd[t].clear();this.Ra.Qc(this)},e.prototype.toString=function(t){if(0===t)return"#"+this.Rc;if(1===t)return this.pd[0]+" x"+this.pd.length;for(var i,n="{group #"+this.Rc+" of "+this.pd.length+" "+h(this.color)+" stones [",e=this.pd,r=0;i=e[r],r<e.length;r++)n+=i.ee()+",";return n=n.Ud(),n+="], lives:"+this.vd,this.$d&&(n+=" MERGED with #"+this.$d.Rc),this.ae&&(n+=" KILLED by "+this.ae.ee()),n+="}"},e.prototype.fe=function(){return this.pd.length&&this.pd[0].group===this},e.prototype.Wc=function(){return this.toString()},e.prototype.ge=function(){return this.pd.map(function(t){return t.ee()}).sort().join(",")},e.prototype.he=function(){for(var t,i=[],n=this.pd,e=0;t=n[e],e<n.length;e++)for(var r,o=t.ie,s=0;r=o[s],s<o.length;s++)r.color===a&&i.indexOf(r)<0&&i.push(r);if(i.length!==this.vd)throw new Error("Wrong life count for group");return i},e.prototype.je=function(){for(var t,i=[],n=1-this.color,e=this.pd,r=0;t=e[r],r<e.length;r++)for(var s,h=t.ie,a=0;s=h[a],a<h.length;a++)s.color===n&&i.indexOf(s.group)<0&&i.push(s.group);return o.ke&&i.length,i},e.prototype.le=function(t){for(var i,n=-1,e=t.ie,r=0;i=e[r],r<e.length;r++)if(i.color===a){n++;for(var s,h=i.ie,u=0;s=h[u],u<h.length;u++)if(s.group===this&&s!==t){n--;break}}return o.ke,n},e.prototype.me=function(t){if(o.ke,this.pd.push(t),this.vd+=this.le(t),this.vd<0)throw new Error("Unexpected error (lives<0 on connect)");o.ke},e.prototype.ne=function(t){if(o.ke,this.pd.length>1){if(this.vd-=this.le(t),this.vd<0)throw new Error("Lives<0 on disconnect")}else this.Ra.Qc(this),o.ke;if(this.pd.pop()!==t)throw new Error("Unexpected error (disconnect order)")},e.prototype.oe=function(t){if(--this.vd<=0)return this.pe(t)},e.prototype.qe=function(t){if(this.vd--,o.ke,this.vd<1)throw new Error("Unexpected error (lives<1 on attack by resucitated)")},e.prototype.re=function(t){this.vd++,o.ke},e.prototype.se=function(t,i){if(t.$d===this||t===this||this.color!==t.color)throw new Error("Invalid merge");o.ke,this.vd+=t.pd.length;for(var n,e=t.pd,r=0;n=e[r],r<e.length;r++)n.te(this),this.me(n);t.$d=this,t._d=i,this.Ra.Kc.push(t),o.ke},e.prototype.ue=function(t){o.ke;for(var i,n=t.pd,e=n.length-1;i=n[e],e>=0;e--)this.ne(i),i.te(t);this.vd-=t.pd.length,t._d=t.$d=null,o.ke},e.prototype.ve=function(t){for(var i=this.Ra.Kc,n=i.length-1;n>=0;n--){var e=i[n];if(e._d!==t||e.$d!==this)break;this.ue(e),i.pop()}},e.prototype.pe=function(t){if(o.ke,this.vd<0)throw new Error("Unexpected error (lives<0)");for(var i,n=this.pd,e=0;i=n[e],e<n.length;e++){for(var r,s=i.ud(1-this.color),h=0;r=s[h],h<s.length;h++)r.re(i);i.we()}this.ae=t,this.Ra.Jc.push(this),o.ke},e.prototype.xe=function(){this.ae=null,this.vd=1;for(var t,i=this.pd,n=0;t=i[n],n<i.length;n++){t.ye(this);for(var e,r=t.ud(1-this.color),o=0;e=r[o],o<r.length;o++)e.qe(t)}},e.ze=function(t){for(var i=t.Ra.Jc,n=i.length-1;n>=0;n--){var e=i[n];if(e.ae!==t)break;i.pop(),o.ke,e.xe()}}},{"./Move":19,"./constants":27,"./log":55}],17:[function(t,i,n){"use strict";function e(){}i.exports=new e,e.prototype.ob=function(t,i){if(i>4&&(t<9||t%2==0)&&(i=4),t<=5)return[];for(var n=t<13?2:3,e=1+n,r=(1+t)/2,o=t-n,s=[],h=0;h<i;h++){switch(i%2==1&&i>4&&h===i-1&&(h=8),h){case 0:var a=e,u=e;break;case 1:a=o,u=o;break;case 2:a=e,u=o;break;case 3:a=o,u=e;break;case 4:a=e,u=r;break;case 5:a=o,u=r;break;case 6:a=r,u=e;break;case 7:a=r,u=o;break;case 8:a=r,u=r}s.push([a,u])}return s}},{}],18:[function(t,i,n){"use strict";function e(t,i,n){this.Jb=t,this.xc=i,this.Ae=n,this.Be=t.tc(i,[])}i.exports=e,e.prototype.wc=function(t){var i,n=this.Be.indexOf(t);if(0!==n)return n<0?(this.Be.unshift(t),this.Be.length>this.Ae&&(i=this.Be.splice(this.Ae))):(this.Be.splice(n,1),this.Be.unshift(t)),this.Jb.rc(this.xc,this.Be),i},e.prototype.getItem=function(t){return this.Be[t]},e.prototype.vc=function(){return this.Be}},{}],19:[function(t,i,n){"use strict";function e(t){switch(t[0]){case"B":return h;case"W":return a;default:return}}function r(t){return"B"!==t[0]&&"W"!==t[0]?t:"-"!==t[1]?t.substr(1):t.substr(2)}function o(t,i){var n=u.indexOf(t[0])+1,e=parseInt(t.substr(1,2));if(!n||isNaN(e)){if(i)return null;throw new Error("Illegal move parsed: "+t)}return[n,e]}var s=t("./constants"),h=s.Na,a=s.Oa,u="abcdefghjklmnopqrstuvwxyz",c=["black","white"];n.Ja=e,n.Ka=r,n.Ia=function(t,i){return(i===h?"B-":"W-")+t},n.Zd=function(t){return c[t]},n.Ce=o,n.La=function(t){var i=e(t);void 0!==i&&(t=r(t));var n=o(t,!0);if(!n){if("pass"===t||t.startsWith("resi"))return null;throw new Error("Illegal move parsed: "+t)}return void 0!==i?n.concat(i):n},n.Ma=function(t,i){return u[t-1]+i},n.zd=function(t){return u[t-1]}},{"./constants":27}],20:[function(t,i,n){"use strict";function e(t,i){this.De=t,this.Ee=i,this.Fe=null,this.Ge=!1}var r=t("./GameInVault");i.exports=e,e.prototype.He=function(t,i,n,e){var o=this.De;o.Qa(e),o.cb(t,i,n)
;var s=this.Fe=new r;s.S(o.Ra.eb,o.Va,o.jb(),o.qb()),this.Ee&&this.Ee.Rb(s)},e.prototype.Ie=function(){var t=this.De;this.Fe=new r,this.Fe.S(t.Ra.eb,t.Va,t.jb(),t.qb())},e.prototype.Je=function(t,i,n){var e=new r;return!!e.U(t,i,n)&&this.Ke(e,i)},e.prototype.Ke=function(t,i){var n=t.fa();return this.De.cb(n.Ea("boardSize"),t.aa(),n.Ea("komi")),this.De.Qa(n.Ea("rules"),!0),!!this.De.gb(t.ba(),i)&&(this.Fe=t,this.Ee&&this.Ee.Rb(t),!0)},e.prototype.qc=function(){this.Le(),this.Ee.qc(this.Fe)},e.prototype.sc=function(){return this.Ee.sc()},e.prototype.Me=function(){return!!this.Ee.Zb(this.Fe.xa())},e.prototype.Sb=function(){if(this.Fe)return this.Le(),this.Ee.Sb()},e.prototype.Ne=function(t){this.Ee.ic(t.xa())},e.prototype.pc=function(t,i){return this.Sb(),this.Ee.pc(t,i)},e.prototype.Oe=function(){return this.Le(),{F:this.Fe.P(),id:this.Fe.xa()}},e.prototype.fa=function(){return this.Fe.fa()},e.prototype.Pe=function(t,i){this.Fe.fa().Da(t,i)},e.prototype.Le=function(){this.Ge||this.Fe.ea(this.De.history),this.Fe.ga()},e.prototype.Qe=function(){return this.Ge=!0,this.Fe.ea(this.De.history),this.Fe._()},e.prototype.Re=function(){this.Ge=!1},e.prototype.Se=function(){return this.De.Ra},e.prototype.Te=function(){return this.De.Ra.history},e.prototype.Ue=function(){return this.De.Ra.eb},e.prototype.Ve=function(){return this.De.useAreaScoring},e.prototype.We=function(){return this.De.usePositionalSuperko},e.prototype.Xe=function(){return this.De.Wa},e.prototype.Ye=function(){return this.De.Za?"ENDED":this.Ha()&&!this.Ge?"ENDED":this.De.Ya?"ENDING":null},e.prototype.Gb=function(){return this.De.history},e.prototype.tb=function(t){return this.De.tb(t)?"":this.De.ub().join("\n")},e.prototype.Eb=function(){this.De.Eb()},e.prototype.Db=function(t,i){this.De.Db(),this.Fe.fa().Ga(t,i)},e.prototype.Ze=function(){this.De.tb("resi"),this.Fe.fa().Ga(this.De.Wa)},e.prototype.Ha=function(){return this.Fe.fa().Ha()}},{"./GameInVault":9}],21:[function(t,i,n){"use strict";function e(t){this.root=new r(null,[]),this.$e=-1,this._e=this.root,this.af=-1,this.bf(t)}function r(t,i,n){this.cf=t,this.df=t?t.df+t.ef.length:0,this.ef=i,this.$=n||[],this.children=null,this.ff=!1}function o(t,i,n){this.Cf=t,this.Df=i,this.Ef=n}function s(t,i){return u(t)===u(i)}var h=t("./constants"),a=t("./Move"),u=a.Ka,c=h.Na,p=h.Oa;i.exports=e,r.prototype.gf=function(){return[this.ef,this.$]},r.prototype.hf=function(t){for(var i=0;i<this.children.length;i++)if(s(t,this.children[i].ef[0]))return this.children[i];return null},r.prototype.jf=function(t){var i=new r(this,[t]);return this.children.push(i),i},r.prototype.kf=function(){this.children||(this.children=[],this.jf(""))},r.prototype.lf=function(){this.children.unshift(new r(this,[""]))},r.prototype.mf=function(){return""===this.ef[0]},r.prototype.nf=function(){if(!this.children)return null;var t=this.children[0];return t.mf()?null:t},r.prototype.pf=function(){if(!this.children)return null;var t=this.children[0];return t.mf()&&(t=this.children[1]),t||null},r.prototype.qf=function(){if(this.children)throw new Error("Invalid _deleteLastMove");if(this.ef.length>1)return this.ef.length--,this;var t=this.cf;return t.rf(this),t},r.prototype.rf=function(t){var i=this.children;i.splice(i.indexOf(t),1),i.length||(this.children=null)},r.prototype.sf=function(t,i){var n=this.ef.splice(t),e=this.$.splice(t);if(!n.length)throw new Error("Invalid split at end");var o=new r(this,n,e);o.ff=i;var s=o.children=this.children;if(s)for(var h=0;h<s.length;h++)s[h].cf=o;this.children=[o]},r.prototype.tf=function(t,i){var n;if(t===this.ef.length){if(!this.children)throw new Error("Unexpected fork");n=this.hf(i)||this.jf(i)}else this.sf(t,this.ff),n=new r(this,[i]),this.children.push(n);return n},r.prototype.uf=function(){for(var t=this;t;)t.ff=!1,t=t.nf()},r.prototype.vf=function(){this.ff=!0;var t=this.cf.children;t[0]!==this&&(t.splice(t.indexOf(this),1),t[0].mf()?t[0]=this:t.unshift(this))},r.prototype.wf=function(t){t+1!==this.ef.length?(this.sf(t+1,!1),this.lf()):this.children&&!this.children[0].mf()&&this.lf()},r.prototype.xf=function(){var t=this.ef.length;if(this.children)for(var i=0;i<this.children.length;i++)t+=this.children[i].xf();return t},e.prototype.bf=function(t){if(t&&!t.length)throw new Error("empty setupMoves array");this.J=t,this.Xa=t?p:c},e.prototype.aa=function(){return this.J},e.prototype.yf=function(){return this.root},e.prototype.zf=function(){return this.af<0?null:this._e.ef[this.af]},e.prototype.Af=function(){return this._e.df+this.af},e.prototype.Bf=function(){return this._e.ff},e.prototype.na=function(){return[this._e,this.af]},e.prototype.sa=function(t){this._e=t[0],this.af=t[1]},e.prototype.Ff=function(t){if(!(t.Ef<t.Df.ef.length)){var i=this._e,n=this.af;this.Gf(t),t.Df=this._e,t.Ef=this.af,this._e=i,this.af=n}},e.prototype.getBookmark=function(){for(var t=this.Af()+1,i=new Array(t),n=this._e,e=this.af,r=t-1;r>=0;r--)i[r]=this.zf(),this.Hf();return this._e=n,this.af=e,new o(i,n,e)},e.prototype.Gf=function(t){this.oa();for(var i=t.Cf,n=0;n<i.length;n++)this.If(i[n])},e.prototype.Jf=function(t){return this.Ff(t),this._e===t.Df&&this.af===t.Ef},e.prototype.Kf=function(t){return t.Cf},e.prototype.Lf=function(){return this.getBookmark().Cf},e.prototype.oa=function(){this._e=this.root,this.af=-1},e.prototype.Mf=function(){return this._e.$[this.af]},e.prototype.Nf=function(t){if(t){var i=this._e.$[this.af];i||(i=this._e.$[this.af]={});for(var n in t)i[n]=t[n]}},e.prototype.Of=function(t){return t.df%2==0?this.Xa:1-this.Xa},e.prototype.Pf=function(t){var i=this._e;if(++this.af===i.ef.length){if(!i.children)return i.ef.push(t)}else if(s(t,i.ef[this.af]))return;this._e=i.tf(this.af,t),this.af=0},e.prototype.If=function(t){var i=this._e;this.af===i.ef.length-1&&i.ff&&i.kf(),this.Pf(t)},e.prototype.Qf=function(){this._e.kf()},e.prototype.Hf=function(){if(this.af>0)this.af--;else if(this._e!==this.root)this._e=this._e.cf,this.af=this._e.ef.length-1;else{if(this.af===-1)return!1;this.af=-1}return!0},e.prototype.Rf=function(t){for(;t>0;){if(t<=this.af)return void(this.af-=t);if(t-=this.af+1,this.af=0,this.Hf(),this.af===-1)break}},e.prototype.Sf=function(t){var i=this._e;if(this.af===i.ef.length-1){if(!(i=t?i.nf():i.pf()))return null;this._e=i,this.af=0}else this.af++;return this._e.ef[this.af]},e.prototype.Tf=function(){return this.Sf()},e.prototype.qa=function(){return this.Sf(!0)},e.prototype.Uf=function(){var t=this._e;return this.af===t.ef.length-1&&!t.pf()},e.prototype.ra=function(){var t=this._e,i=this.af,n=this.Sf();return this._e=t,this.af=i,n},e.prototype.pa=function(){var t=this._e;if(this.af<t.ef.length-1)return null;var i=t.children;if(!i)return null;if(1===i.length)return null;if(2===i.length&&""===i[0].ef[0])return null;var n=[];t.ff||""===i[0].ef[0]||n.push("");for(var e=0;e<i.length;e++)n.push(i[e].ef[0]);return n},e.prototype.ea=function(t){this.root.uf(),this.$e=t.length,this.root.ff=!0,this._e=this.root,this.af=-1;for(var i=this._e,n=0;n<t.length;n++)this.Pf(t[n]),this._e!==i&&(i=this._e,i.vf());i.wf(this.af)},e.prototype.da=function(){for(var t=[],i=this.root;;){i.ff=!0;for(var n=0;n<i.ef.length;n++)t.push(i.ef[n]);if(!i.children)break;i=i.children[0]}return i.mf()?(t.pop(),this._e=i.cf):this._e=i,this.af=this._e.ef.length-1,this.$e=t.length,t},e.prototype.Vf=function(){return this.$e},e.prototype.Wf=function(t){var i=this._e.hf(t);if(!i)throw new Error("Invalid variation "+t);return i.xf()},e.prototype.Xf=function(t){if(this.af!==this._e.ef.length-1)return!1;var i=this._e.hf(t);return!(!i||i.ff)&&(this._e.rf(i),!0)},e.prototype.Yf=function(){var t=this._e;if(t.ff)return!1;if(t.children)return!1;var i=t.ef.length;return this.af===i-1&&(this._e=t.qf(),this.af=this._e.ef.length-1,!0)},e.prototype.ca=function(t){var i=this.Zf(t);return i!==-1?i:(this.oa(),t.oa(),this.$f(t),-1)},e.prototype.Zf=function(t){for(var i=this.da(),n=t.da(),e=Math.min(i.length,n.length),r=0;r<e;r++)if(i[r]!==n[r])return r;return n.length>e&&this.ea(n),-1},e.prototype.$f=function(t){for(var i,n=0;!(i=t.pa());){var e=t.Sf();if(!e)break;n++,this.If(e),this.Nf(t.Mf())}if(i)for(var r=0;r<i.length;r++){var o=i[r];""!==o&&(this.If(o),t.If(o),this.$f(t),this.Hf(),t.Hf())}n&&(this.Rf(n),t.Rf(n))}},{"./Move":19,"./constants":27}],22:[function(t,i,n){"use strict";function e(t){this.De=t;var i=a.ag("scorer.js");this.bg=new i}function r(t){return 0===t?"Tie game":u(t>0?c:p)+" wins by "+o(Math.abs(t))}function o(t){return 1!==t?t+" points":"1 point"}var s=t("./constants"),h=t("./Move"),a=t("./loaders")._f,u=h.Zd,c=s.Na,p=s.Oa;i.exports=e,e.prototype.cg=function(t){var i=(t||this.dg())[0];return i[c]-i[p]},e.prototype.eg=function(t){return this.fg(t)},e.prototype.gg=function(){return this.dg()},e.prototype.getScoringGrid=function(){return this.bg["getScoringGrid"]()},e.prototype.dg=function(){var t=this.De;if(null!==t.$a)return["resi",1-t.$a,t._a];var i=t.Ra;if(0!==i.fd()){var n=t.useAreaScoring?null:i.od();return this.bg["countScore"](i.Sc(),n,t.Va),this.bg["getScoreInfo"]()}},e.prototype.fg=function(t){if("resi"===t[0]){var i,n=u(t[1]),e=u(1-t[1]);switch(t[2]){case"time":i=e+" ran out of time";break;case null:case void 0:i=e+" resigned";break;default:i=e+" disqualified: "+t[2]}return[n+" won ("+i+")"]}if(!t||2!==t.length)throw new Error("Invalid score info: "+t);var s=t[0],h=t[1];if(s.length!==h.length)throw new Error("Invalid score info");var a=[],l=s[c]-s[p];a.push(r(l));for(var f=c;f<=p;f++){var d=h[f],g=d[0],v=d[1],m=d[2],y=0!==v?" "+(v<0?"-":"+")+" "+Math.abs(v)+" prisoners":"",b=m>0?" + "+m+" komi":"",w=v||m?" ("+g+y+b+")":"";a.push(u(f)+": "+o(s[f])+w)}return a}},{"./Move":19,"./constants":27,"./loaders":54}],23:[function(t,i,n){"use strict";function e(){m||s(),this.text=null,this.hg=null,this.ig=this.Va=0,this.J=this.K=this.ef=null,this.jg=null,this.H=null,this.$=null,this.Wa=l,this.kg=!1}function r(t,i,n){g[t]=[i,n],v[n]=t}function o(t,i){m[t]=i}function s(){g={},v={},m={},r("GM","int",null),r("FF","int","fileFormat"),r("SZ","int","boardSize"),r("AB","move",null),r("AW","move",null),r("HA","int","handicap"),r("KM","real","komi"),r("RU","text","rules"),r("RE","text","result"),r("PB","text","playerBlack"),r("PW","text","playerWhite"),r("BS","int","blackSpecies"),r("WS","int","whiteSpecies"),r("LT","flag","enforceLosingOnTime"),r("SO","text","source"),r("ID","text","gameId"),r("AP","text","application"),r("BR","text","blackRank"),r("WR","text","whiteRank"),r("BT","text","blackTeam"),r("WT","text","whiteTeam"),r("TM","text","timeLimit"),r("OT","text","overtimeMethod"),r("EV","text","event"),r("RO","text","round"),r("DT","text","date"),r("PC","text","place"),r("GN","text","gameName"),r("ON","text","openingPlayed"),r("GC","text","gameComment"),r("C","text","comment"),r("N","text","nodeName"),r("US","text","userName"),r("AN","text","analyseAuthor"),r("CP","text","copyright"),r("CA","text","characterSet"),r("ST","text","variationStyle"),o("B","move"),o("W","move"),o("AB","move"),o("AW","move"),o("BL",null),o("WL",null),o("C","text"),o("CR",null),o("BM",null),o("N",null)}function h(t){if(t.qg("a","z"))return t.charCodeAt()-97;if(t.qg("A","Z"))return t.charCodeAt()-39;throw new Error("Invalid coordinate value: "+t)}function a(t){for(var i=0;;){var n=t.indexOf("]",i);if(n===-1)return-1;if("\\"!==t[n-1])return n;i=n+1}}var u=t("./constants"),c=t("./log"),p=t("./ReviewTree"),l=u.Na,f=u.Oa,d=["B","W"],g=null,v=null,m=null;i.exports=e,e.lg=function(){return m||s(),v},e.V=function(t){var i=t.trim();return"("===i[0]&&";"===i.substr(1).trim()[0]},e.prototype.mg=function(t,i){if(!e.V(t))throw new Error("Not an SGF file");this.ng(t),this.og(),this.pg(i)},e.prototype.Y=function(t,i,n){try{return this.mg(t,n),!0}catch(t){var e="Failed loading SGF moves:\n"+t;if(!i)throw new Error(e);return i.push(e),!1}},e.prototype.aa=function(){return this.J},e.prototype.ba=function(){return this.K},e.prototype._=function(){return this.H},e.prototype.Ea=function(t,i){var n=this.$[t];return void 0!==n?n:i};e.prototype.rg=function(t){if(this.ig)throw new Error("SZ set twice");this.ig=t},e.prototype.sg=function(t){if(!this.ig)throw new Error("Move seen before SZ is known");return""===t||"tt"===t&&this.ig<=19?"pass":"abcdefghjklmnopqrstuvwxyz"[h(t[0])]+(this.ig-h(t[1]))},e.prototype.tg=function(t,i,n){n?(t!==this.Wa&&(i=d[t]+i),this.Wa=t,this.J.push(i)):(this.kg=!0,i=d[t]+i,this.Wa=1-t,this.ef.push(i))},e.prototype.Pf=function(t,i,n){if(!this.kg)return this.tg(t,i,n);t!==this.Wa&&(i=d[t]+i),this.Wa=1-t,this.ef.push(i)},e.prototype.ug=function(t){var i=this.ef.length-1;this.jg[i]=(this.jg[i]||"")+t},e.prototype.vg=function(t,i){switch(i){case"text":return t;case"int":return parseInt(t);case"real":return parseFloat(t);case"flag":return!0;case"move":return this.sg(t);default:throw new Error("Invalid tag type: "+i)}},e.prototype.wg=function(t,i){var n=m[t];if(void 0===n)return c.warn&&c.warn("Unknown property "+t+"["+i+"] ignored");if(n){var e=this.vg(i,n);switch(t){case"B":return this.Pf(l,e);case"W":return this.Pf(f,e);case"AB":return this.Pf(l,e,!0);case"AW":return this.Pf(f,e,!0);case"C":return this.ug(i)}}},e.prototype.pg=function(t){this.H=new p,this.xg(this.hg,1),this.J.length||(this.J=null),this.H.bf(this.J),this.K=this.H.da(),void 0!==t&&(this.K=this.K.slice(0,t))},e.prototype.xg=function(t,i){for(var n=i;n<t.length;n++){var e=t[n];if("seq"!==e[0]){this.ef=[],this.jg=[];for(var r=0;r<e.length;r+=2){var o=e[r]||o,s=e[r+1];this.wg(o,s)}for(var h=0;h<this.ef.length;h++)this.H.If(this.ef[h]),this.jg[h]&&this.H.Nf({yg:this.jg[h]})}else{if(!e[1].length){this.H.Qf();continue}var a=this.H.na(),u=this.Wa;this.xg(e,1),this.Wa=u,this.H.sa(a)}}},e.prototype.zg=function(t,i){var n=g[t];if(void 0===n)return this.$[t]=i,c.Ag("Unknown property in SGF header: "+t+"["+i+"]");var e=n[0],r=n[1],o=this.vg(i,e);return r&&(this.$[r]=o),o},e.prototype.og=function(){this.ig=this.Va=0,this.$={},this.J=[],this.Wa=l,this.kg=!1;for(var t=this.hg[0],i=0;i<=t.length-1;i+=2){var n=t[i],e=t[i+1],r=this.zg(n,e);switch(n){case"GM":if(1!==r)throw new Error("SGF game is not a GO game");break;case"FF":(r<3||r>4)&&c.warn&&c.warn("SGF format "+r+". Not sure we handle it well.");break;case"SZ":this.rg(r);break;case"KM":this.Va=r;break;case"AB":this.Pf(l,r,!0);break;case"AW":this.Pf(f,r,!0)}}},e.prototype.ng=function(t){this.text=t,this.hg=[],t=this.Bg(t),""!==(t=this.Cg(t))&&this.Dg("Trailing text ignored",t)},e.prototype.Cg=function(t){for(t=this.Eg("(",t),t=this.Bg(t);";"===t[0];)t=this.Fg(t);for(;"("===t[0];){var i=this.hg;this.hg=["seq"],t=this.Cg(t),i.push(this.hg),this.hg=i}return t=this.Eg(")",t),t=this.Bg(t)},e.prototype.Fg=function(t){t=this.Eg(";",t);for(var i=[];;){for(var n=0;t[n]&&t[n].qg("A","Z");)n++;var e=t.substr(0,n);if(""===e)break;for(i.push(e),t=this.Eg(e,t);;){t=this.Eg("[",t);var r=a(t);r<0&&this.Dg("Missing ']'",t);var o=t.substr(0,r);if(i.push(o),t=this.Eg(o+"]",t),"["!==t[0])break;i.push(null)}}return this.hg.push(i),t=this.Bg(t)},e.prototype.Bg=function(t){return t.trim()},e.prototype.Eg=function(t,i){return i.startsWith(t)||this.Dg(t+" expected",i),i.replace(t,"").trim()},e.prototype.Dg=function(t,i){throw new Error("Syntax error: '"+t+"' at ..."+i.substr(0,20)+"...")}},{"./ReviewTree":21,"./constants":27,"./log":55}],24:[function(t,i,n){"use strict";function e(){this.H=null,this.eb=0,this.Gg="",this.Hg="",p||r()}function r(){p={};for(var t=0;t<l.length;t++){var i=l[t];p[i]=!0}for(t=0;t<f.length;t++)p[f[t]]=!0}function o(t,i){return void 0===i||null===i?"":t+"["+i+"]"}var s=t("./constants"),h=t("./Move"),a=t("./SgfReader"),u=h.La,c=s.Na,p=null,l=["playerWhite","playerBlack","source","event","place","boardSize","komi","rules","date"],f=["fileFormat","handicap"];i.exports=e,e.prototype.Ig=function(t,i){this.eb=t.Ea("boardSize");for(var n=a.lg(),e=t.Fa(),r="",s=0;s<l.length;s++){var h=l[s];r+=o(n[h],e[h])}for(var u in e)p[u]||(r+=o(n[u],e[u]));return r+=this.Jg(i)},e.prototype.Jg=function(t){if(!t)return"";this.Gg="A",this.Hg="B";for(var i=o("HA",t.length),n=0;n<t.length;n++)i+=this.Kg(t[n]);return i},e.prototype.Kg=function(t){if(""===t)return"";var i,n=this.Gg,e=this.Hg,r=u(t);if(r)void 0!==r[2]&&(e=r[2]===c?"B":"W"),i=String.fromCharCode(96+r[0])+String.fromCharCode(97+this.eb-r[1]);else{if(!t.endsWith("pass"))return null;i=""}return""===n&&(this.Hg="W"===e?"B":"W"),n+e+"["+i+"]"},e.prototype.Lg=function(t,i){for(var n="",e=0;e<t.length;e++){var r=this.Kg(t[e]);if(null===r)break;n+=";"+r,i[e]&&i[e].yg&&(n+="C["+i[e].yg+"]")}return n},e.prototype.Mg=function(t){this.Hg=this.H.Of(t)===c?"B":"W";var i=t.gf(),n=this.Lg(i[0],i[1]);if(t.children)for(var e=0;e<t.children.length;e++)n+="("+this.Mg(t.children[e])+")";return n},e.prototype.ha=function(t,i){this.H=i;var n="(;FF[4]GM[1]"+this.Ig(t,i.aa());return this.Gg="",(n+=this.Mg(i.yf()))+")"}},{"./Move":19,"./SgfReader":23,"./constants":27}],25:[function(t,i,n){"use strict";function e(t,i,n,e){this.Ra=t,this.wd=i,this.xd=n,this.color=e,this.group=null,this.ie=[],this.Pg=[]}var r=t("./constants"),o=t("./Group"),s=t("./Move"),h=s.Ma,a=r.EMPTY,u=r.Dc,c=r.Ng,p=r.Og;i.exports=e,e.Dc=new e(null,-1,-1,u);var l=e.Qg=[[0,1],[1,0],[0,-1],[-1,0]],f=e.Rg=[[1,1],[1,-1],[-1,-1],[-1,1]];e.prototype.clear=function(){this.color=a,this.group=null},e.prototype.Hc=function(){for(var t=this.Ra.Fc,i=p;i>=c;i--){var n=t[this.xd+l[i][1]][this.wd+l[i][0]];n.color===a&&this.ie.push(n),this.Pg.push(n),n=t[this.xd+f[i][1]][this.wd+f[i][0]],this.Pg.push(n)}},e.prototype.toString=function(){return this.color===a?this.ee():(this.color?"W":"B")+"-"+this.ee()},e.prototype.ee=function(){return h(this.wd,this.xd)},e.prototype.Sg=function(){return this.Tg().map(function(t){return t.ee()}).sort().join(",")},e.prototype.ed=function(){return this.color===a},e.prototype.Ug=function(){return 2===this.ie.length},e.prototype.Vg=function(){var t=this.Ra,i=t.eb-1;return t.bd(1===this.wd?2:i,1===this.xd?2:i)},e.prototype.Wg=function(){return this.ie.length<=3},e.prototype.Xg=function(){var t=this.Ra.eb,i=this.wd,n=this.xd;return Math.min(Math.min(i-1,t-i),Math.min(n-1,t-n))},e.prototype.Yc=function(t){for(var i=this.ie.length-1;i>=0;i--){var n=this.ie[i];if(n.color===a)return!1;if(n.color!==t){if(1===n.group.vd)return!1}else if(n.group.vd>1)return!1}return!0},e.prototype.ad=function(t){for(var i=null,n=this.ie.length-1;n>=0;n--){var e=this.ie[n].group;if(e&&e.color===1-t&&1===e.vd){if(i)return!1;i=e}}if(!i)return!1;if(1!==i.pd.length)return!1;var r=i.pd[0];if(this.Ra.nd()!==r)return!1;var o=this.Ra.md();if(!o||o.ae!==r||1!==o.pd.length)return!1;var s=o.pd[0];return s.wd===this.wd&&s.xd===this.xd},e.prototype.we=function(){this.color=a,this.group=null},e.prototype.ye=function(t){this.group=t,this.color=t.color},e.prototype.kd=function(t){this.color=t;var i=this.ud(t);0===i.length?this.group=this.Ra.Oc(this,this.Yg()):(this.group=i[0],this.group.me(this));for(var n=this.ud(1-t),e=n.length-1;e>=0;e--)n[e].oe(this);for(var r=1;r<i.length;r++)this.group.se(i[r],this)},e.prototype.jd=function(){this.group.ve(this),this.group.ne(this);for(var t=this.ud(1-this.color),i=t.length-1;i>=0;i--)t[i].re(this);this.group=null,this.color=a,o.ze(this)},e.prototype.te=function(t){this.group=t},e.prototype.ud=function(t){for(var i=[],n=this.ie,e=n.length-1;e>=0;e--){var r=n[e];r.color===t&&i.indexOf(r.group)<0&&i.push(r.group)}return i},e.prototype.Tg=function(){for(var t=[],i=this.ie,n=i.length-1;n>=0;n--){var e=i[n];e.color===a&&t.push(e)}return t},e.prototype.Yg=function(){for(var t=0,i=this.ie,n=i.length-1;n>=0;n--)i[n].color===a&&t++;return t},e.prototype.Zg=function(t,i){for(var n=0,e=this.ie,r=e.length-1;r>=0;r--)e[r].color===t&&(i&&i.push(e[r]),n++);return n},e.prototype.$g=function(t){for(var i=this.ie,n=i.length-1;n>=0;n--)if(i[n].group===t)return!0;return!1}},{"./Group":16,"./Move":19,"./constants":27}],26:[function(t,i,n){"use strict";function e(){this._g={},this.ah="",this.bh=null}function r(t){var i=t.dh(".js");return i.startsWith(s)&&(i=i.substr(3)),i[0].toUpperCase()+i.substr(1)}var o=t("../loaders")._f,s="ai-",h=["prepareGame","getMove/getMoveAsync","notePlayedMove"];i.exports=new e,e.prototype.eh=function(){for(var t=o.fh(),i=[],n=0;n<t.length;n++){var e=t[n];e.startsWith(s)&&i.push(r(e))}return i},e.prototype.gh=function(t){t=t.toUpperCase();for(var i=o.fh(),n=0;n<i.length;n++){var e=i[n];if(e.startsWith(s)){if(r(e).toUpperCase()===t)return e}}return null},e.prototype.hh=function(t,i){var n=this.gh(t);if(!n)return i("Unknown AI: "+t);var e=this._g[n];if(e)this.ih(n,e),i(null,e);else{var r=this;o.jh(n,function(t){return t?i(t):(e=o.ag(n),(t=o.kh(e,h))?i("Invalid AI script: "+n+": "+t):(r._g[n]=e,r.ih(n,e),void i(null,e)))})}},e.prototype.ih=function(t,i){this.ah=t,this.bh=i},e.prototype.lh=function(t){var i=this.gh(t);if(!i)throw new Error("Unknown AI: "+t);var n=this._g[i];if(!n)throw new Error("AI not loaded: "+i);return n},e.prototype.mh=function(){return this.ah?r(this.ah):""}},{"../loaders":54}],27:[function(t,i,n){"use strict";function e(){this.nh=0,this.oh=1,this.Dc=-99,this.EMPTY=-1,this.Na=0,this.Oa=1,this.ph=0,this.qh=1,this.rh=-1,this.NEVER=0,this.sh=1,this.ALWAYS=2,this.Ng=0,this.Og=3,this.th=7,this.uh=1,this.vh=this.wh=0,this.xh=1,this.yh=this.zh=2,this.Ah=3,this.Bh=4,this.Ch=5,this.Dh=6,this.Eh=7,this.Fh=8,this.Gh=9,this.Hh=10,this.Ih=11,this.Jh=12,this.Pa="Japanese",this.Kh="Chinese",this.Lh=0,this.Mh=1}i.exports=new e},{}],28:[function(t,i,n){"use strict";function e(t){return"\n"!==t.slice(-1)?0:"\r\n"!==t.slice(-2)?1:2}n.Nh=function(t){return t.name||t.toString().split(/ |\(/,2)[1]},n.clone=function(t){if(null===t||void 0===t)return t;var i;if(t instanceof Array){i=[];for(var n=0,e=t.length;n<e;n++)i[n]=t[n]}else{if("object"!=typeof t)throw new Error("clone called on "+typeof t);if("function"==typeof t.clone)return t.clone();i={};for(var r in t){var o=t[r];"function"!=typeof o&&(i[r]=o)}}return i},String.prototype.dh=function(t){if(void 0===t)return this.substr(0,this.length-e(this));var i=this.length-t.length;return this.substr(i)===t?this.substr(0,i):this.toString()},String.prototype.Ud=function(t){if(void 0===t)t=e(this)||1;else if("number"!=typeof t)throw new Error("Invalid parameter type for String.count: "+typeof t);return this.substr(0,this.length-t)},String.prototype.startsWith||(String.prototype.startsWith=function(t){return this.substr(0,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t){return this.substr(this.length-t.length)===t}),String.prototype.format=function(t){if("%"!==this[0])throw new Error("Invalid format: "+this.toString());var i,n=this.slice(1,-1),e=0,r=this.slice(-1);switch(r){case"d":case"x":var o=" ";"0"===n[e]&&(e++,o="0");var s=parseInt(n.substr(e));i=t.toString("x"===r?16:10);for(var h=s-i.length;h>0;h--)i=o+i;return i;case"f":var a="";if("+"===n[e]&&(e++,t>0&&(a="+")),"."!==n[e++])break;var u=parseInt(n.substr(e));return a+t.toFixed(u)}throw new Error("Unknown format: "+this.toString())},String.prototype.qg=function(t,i){return this>=t&&this<=i},n.Oh=function(t,i){for(var n=new Array(t),e=t-1;e>=0;e--)n[e]=i;return n},n.Ad=function(t,i,e){for(var r=new Array(t),o=r[0]=n.Oh(i,e),s=t-1;s>=1;s--)r[s]=o.concat();return r},Array.prototype.Ph=function(t){for(var i=this.length,n=0;n<t.length;n++){var e=t[n];this.indexOf(e)===-1&&this.push(e)}return this.length-i}},{}],29:[function(require,module,exports){"use strict";function AssetLoader(){this.Qh=!1,this.Rh=null,this.Sh={},this.Jb=null,this.Th=null,this.Uh=null}var CachedAsset=require("./CachedAsset"),contra=require("contra"),GetFile=require("./GetFile"),LocalPref=require("./LocalPref"),log=require("../log"),VERSION_SEPARATOR="-",MAX_CONCURRENT_LOAD=4;module.exports=AssetLoader,AssetLoader.prototype.Vh=function(t){this.Uh=t},AssetLoader.prototype.Wh=function(t,i,n,e){this.Rh=t,this.Xh=i,this.Yh=n,this.Jb=new LocalPref(i),this.Jb.Zh(),this.$h();var r=n+"file_list.json";this.Uh&&this.Uh._h(r);var o=this;GetFile.ai(r,function(t,i){t?log.warn("Failed to load store list: "+r):o.Th=JSON.parse(i),o.bi(e)})},AssetLoader.prototype.ci=function(){this.Jb.ci()},AssetLoader.prototype.fh=function(){return Object.keys(this.Th)},AssetLoader.prototype.bi=function(t){var i=this;contra.di(this.Rh.preload,4,function(t,n,e){if(i.Sh[n])return e();i.Uh&&i.Uh._h(n),i.Sh[n]=new CachedAsset(i,n,t).preload(e)},function(n){i.Qh=!0,n&&log.error(n),t()})},AssetLoader.prototype.ei=function(t,i){this.Sh[t]=new CachedAsset(this,t,"0.1").fi(i)},AssetLoader.prototype.gi=function(t,i){this.hi(i,this.ii.bind(this,t))},AssetLoader.prototype.jh=function(t,i){this.hi(t,i)},AssetLoader.prototype.ji=function(t){var i=this.Sh[t];return i?i.ki():log.error("asset not loaded: "+t)},AssetLoader.prototype.hi=function(t,i){var n=this.Sh[t];if(n)return n.getData(i);var e=this.Rh.onDemand[t];if(e)return this.Sh[t]=new CachedAsset(this,t,e).getData(i);i("unlisted asset: "+t)},AssetLoader.prototype.ii=function(t,i,n){if(this.Qh)return i?log.error(i):void(n.startsWith("file:")?t.li("backgroundImage",'url("'+n.substr(5)+'")'):t.li("backgroundImage",'url("data:image/png;base64,'+btoa(n)+'")'))},AssetLoader.prototype.$h=function(){for(var t=this.Jb.mi(),i=0;i<t.length;i++){var n=t[i];this.Rh.preload[n]||this.Rh.onDemand[n]||this.Jb.ni(n)}},AssetLoader.prototype.oi=function(t,i){if(!this.Th)return{pi:this.qi(t,i),version:i};var n=this.Th[t];if(!n)return null;"string"==typeof n&&(n=[n]);for(var e=n.length-1;e>=0;e--){var r=n[e];if(this.ri(r,i))return{pi:this.qi(t,r),version:r}}return null},AssetLoader.prototype.qi=function(t,i){var n=t.lastIndexOf(".");n<0&&(n=t.length);var e=t.substr(0,n)+"-"+i+t.substr(n);return this.Yh+e},AssetLoader.prototype.ri=function(t,i){var n=t.split("."),e=i.split(".");return(void 0===e[0]||e[0]===n[0])&&((void 0===e[1]||e[1]<=n[1])&&(void 0===e[2]||e[2]<=n[2]))},AssetLoader.prototype.si=function(t,i){this.Jb.rc(t,i)},AssetLoader.prototype.ti=function(t){return this.Jb.tc(t,null)},AssetLoader.prototype.ui=function(t){this.Jb.rc(t,null)},AssetLoader.prototype.ag=function(scriptName){var script=this.ji(scriptName);if(!script)throw new Error("Script not found: "+scriptName);return"string"!=typeof script?script:eval("var module={exports:{}},exports=module.exports;"+script+"module.exports")},AssetLoader.prototype.kh=function(t,i){for(var n=t.prototype,e=0;e<i.length;e++){var r=i[e],o=r,s=null;if(r.indexOf("/")>=0){var h=r.split("/");o=h[0],s=h[1]}if("function"!=typeof n[o]&&(!s||"function"!=typeof n[s]))return"Missing API: "+r}}},{"../log":55,"./CachedAsset":30,"./GetFile":33,"./LocalPref":34,"contra":108}],30:[function(t,i,n){"use strict";function e(t,i,n){this.vi=t,this.wi=i,this.xi=n,this.yi=!1,this.zi=0,this.data=null,this.Ai=""}var r=t("./GetFile"),o=t("../log");i.exports=e,e.prototype.preload=function(t){return this.yi=!0,this.Bi(t),this};e.prototype.Ci=function(){var t=this.Ai+"##"+this.data;this.vi.si(this.wi,t)},e.prototype.Di=function(){var t=this.vi.ti(this.wi);if(!t)return!1;var i=t.substr(0,12),n=i.indexOf("##"),e=i.substr(0,n);return"!"!==this.xi[0]&&this.vi.ri(e,this.xi)?(this.data=t.substr(n+"##".length),this.Ai=e,!0):(this.vi.ui(this.wi),!1)},e.prototype.getData=function(t){return this.data?t(null,this.data):this.Bi(t),this},e.prototype.ki=function(){return this.data},e.prototype.fi=function(t){return this.data=t,this},e.prototype.Bi=function(t){if(this.Di())return t(null,this.data);var i="!"!==this.xi[0]?this.xi:this.xi.substr(1),n=this.vi.oi(this.wi,i);if(!n)return t("No remote version for: "+this.wi+", "+i);r.ai(n.pi,this.Ei.bind(this,n.version,t))},e.prototype.Ei=function(t,i,n,e){var r=this.yi;if(this.yi=!1,n)return o.error("_onLoad: "+n),this.zi++,i(r?null:n);this.data=e,this.Ai=t,"!"!==this.xi[0]&&this.Ci(),i(null,r?null:e)}},{"../log":55,"./GetFile":33}],31:[function(t,i,n){"use strict";function e(t){this.options=t,this.Fi=[],this.parent=document.body,this.Gi=s.Hi(null,"contextMenu"),this.Ii=!1}function r(){this.contextMenu.Ii&&(this.Ji&&this.Ji.call(this,this.name),this.Ki("selected",!0),window.setTimeout(this.contextMenu.Li.bind(this.contextMenu)))}t("./contextMenu.less");var o=t("../loaders").vi,s=t("./Dome"),h=t("./getText"),a=t("./PopupDlg"),u=t("./tapBehavior");i.exports=e,e.prototype.Mi=function(t,i,n){var e=n&&n.name,o=n&&n.Ni,h="menuItem"+(e?" "+e:""),a=s.Hi(this.Gi,h).Oi(1);return a.icon=a.Hi("icon").Pi(1.5),o&&this.Qi(a,o),a.label=a.Hi("text").Ri(t),a.name=e,a.Ji=i,a.contextMenu=this,u(a,r),this.Fi.push(a),a},e.prototype.Qi=function(t,i){o.gi(t.icon,i)},e.prototype.Si=function(t,i,n){var e;this.options&&this.options.Ti?e=this.Li.bind(this):this.Mi(h("#cancelAction"),null),a.Ui(this.Gi,this.parent,e);var r=s.Vi(t),o=s.Vi(this.Gi);o.Wi(r,i,n),s.Xi(o),this.Gi.li("left",o.left+"px"),this.Gi.li("top",o.top+"px"),this.Ii=!0},e.prototype.Li=function(){this.Ii&&(this.Ii=!1,a.Yi(this.Gi))}},{"../loaders":54,"./Dome":32,"./PopupDlg":38,"./contextMenu.less":43,"./getText":46,"./tapBehavior":50}],32:[function(t,i,n){"use strict";function e(t,i,n,r){this.type=i;var o=this.Zi=document.createElement(i);this.name=r,this.$i=!1,n&&(o.className=n),f&&f._i(o,n),t&&(t instanceof e?t.Zi:t).appendChild(o),d&&d.add(r||n,this)}function r(){var t=document.documentElement.clientWidth,i=document.documentElement.clientHeight;i===m&&(i+=y),h=new c(0,0,t,i),e.aj=t,e.bj=i;var n=window.devicePixelRatio||1;a=50+25*(n-1)}function o(){if((window.devicePixelRatio||1)>=1.5){var t=v;document.documentElement.style["fontSize"]=t+"px"}}function s(){this.Gj={}}t("./dome.less");var h,a,u=t("./fileHelper"),c=t("./Rect"),p=t("./tapBehavior"),l=null,f=null,d=null,g=1,v=23,m=1137,y=119;i.exports=e,e.init=function(t,i){f=t,l=i,r(),o()},e.prototype.cj=function(t,i){return(t instanceof e?t.Zi:t).appendChild(this.Zi),this.$i=i,l&&i&&l.addElement(this.Zi),this},e.prototype.appendChild=function(t,i){return t.cj(this,i)},e.removeChild=function(t,i){i&&(l&&i.$i&&l.dj(i.Zi),t instanceof e&&(t=t.Zi),t.removeChild(i.Zi))},e.prototype.removeChild=function(t){e.removeChild(this,t)},e.prototype.ej=function(){return this.Zi.childElementCount},e.prototype.fj=function(){this.Zi.innerHTML=null},e.prototype.Ri=function(t){return this.Zi.textContent=t,this},e.prototype.gj=function(t){return this.Zi.innerHTML=t,this},e.prototype.setAttribute=function(t,i){return this.Zi.setAttribute(t,i),this},e.prototype.li=function(t,i){return this.Zi.style[t]=i,this},e.prototype.hj=function(t){return t===this.ij()?this:(this.Zi.style.display=t?"":"none",this.jj=!!t,l&&this.$i&&(t?l.addElement(this.Zi):l.dj(this.Zi)),this)},e.prototype.ij=function(){return this.jj||void 0===this.jj},e.prototype.kj=function(t){return this.Zi.disabled=!t,this.Ki("disabled",!t),this},e.prototype.Pi=function(t){return this.li("width",t*a+"px")},e.prototype.Oi=function(t){return this.li("height",t*a+"px")},e.prototype.lj=function(t){return this.li("minWidth",t*a+"px")},e.prototype.mj=function(t){return this.li("minHeight",t*a+"px")},e.prototype.text=function(){return this.Zi.textContent},e.prototype.nj=function(){return this.Zi.innerHTML},e.prototype.value=function(){return this.Zi.value},e.prototype.oj=function(){return this.Zi.checked},e.prototype.pj=function(){return this.Zi},e.prototype.clear=function(){this.Zi.innerHTML=""},e.prototype.p=function(t,i){var n=this;this.Zi.addEventListener(t,function(t){i.call(n,t)})},e.prototype.Ki=function(t,i){var n=this.Zi,e=n.className,r=" "+e+" ",o=" "+t+" ",s=r.indexOf(o);if(i){if(s>=0)return;f&&f.toggle(n,t,i),n.className=e+" "+t}else{if(s<0)return;n.className=r.replace(o," ").trim(),f&&f.toggle(n,t,i)}},e.prototype.qj=function(){this.Zi.scrollTop=this.Zi.scrollHeight},e.Hi=function(t,i,n){return new e(t,"div",i,n||i)},e.prototype.Hi=function(t,i){return new e(this,"div",t,i||t)},e.rj=function(t,i,n,r){var o=new e(t,"button",i+"Button",i);return n&&(o.Zi.innerText=n),o.p("click",r),o},e.sj=function(t,i,n,r){var o=new e(t,"div","btn "+i,i);return n&&(o.tj=o.Hi(i+"Text btnText").Ri(n)),p(o,r),o},e.prototype.uj=function(t){this.tj.Ri(t)},e.vj=function(t,i,n,r){var o=e.sj(t,i,r,n)
;return o.icon=o.Hi(i+"Icon btnIcon"),o},e.wj=function(t,i,n,r){var o=new e(t,"a",i,i);return o.setAttribute("href",r),o.Ri(n),o},e.xj=function(t,i,n){return new e(t,"div",i,i).Ri(n)},e.yj=function(t){return new e(t,"br")},e.zj=function(t,i,n,r,o){var s=n||o?e.Hi(t,i+"Div"):t;n&&e.Hi(s,i+"Label inputLbl").Ri(n);var h=new e(s,"input",i+"Input inputBox",i);return h.Aj=s,o&&e.Hi(s,i+"Desc inputDesc").Ri(o),void 0!==r&&(h.Zi.value=r),h},e.Bj=function(t,i,n,r,o){var s=new e(t,"div",i+"Div chkBoxDiv"),h=new e(s,"input",i+"ChkBox chkBox",i),a=h.Zi;return a.type="checkbox",a.name=i,void 0!==r&&(a.value=r),a.id=i+"ChkBox"+(void 0!==r?r:g++),o&&(a.checked=!0),new e(s,"label",i+"ChkLabel chkLbl",i).Ri(n).setAttribute("for",a.id),h},e.Cj=function(t,i,n,r,o){r||(r=n);for(var s=[],h=0;h<n.length;h++){var a=s[h]=new e(t,"input",i+"RadioBtn radioBtn",i),u=a.Zi;u.type="radio",u.name=i,u.value=r[h],u.id=i+"Radio"+r[h],r[h]===o&&(u.checked=!0),new e(t,"label",i+"RadioLbl radioLbl",i).Ri(n[h]).setAttribute("for",u.id)}return s},e.Dj=function(t){for(var i=0;i<t.length;i++)if(t[i].Zi.checked)return t[i].Zi.value},e.Ej=function(t,i,n,r,o){if(r||(r=n),"byIndex"===r)for(r=[],u=0;u<n.length;u++)r.push(u);var s=new e(t,"select",i+"DropDwn dropDwn",i).li("fontSize",.6*a+"px");s.values=r;for(var h=0,u=0;u<n.length;u++){var c=new e(s,"option").Zi;c.value=r[u],c.textContent=n[u],r[u]===o&&(h=u)}return s.Zi.selectedIndex=h,s},e.prototype.select=function(t){var i=this.values.indexOf(t);i!==-1&&(this.Zi.selectedIndex=i)},e.Vi=function(t){var i=(t.Zi||t).getBoundingClientRect();return 0===i.width&&0===i.height&&console.error("newRect on invisible element",t),new c(i.left,i.top,i.width,i.height)},e.Xi=function(t){t.Fj(h,10)},e.Hj=function(){return d=new s},e.Ij=function(){d=null},s.prototype.add=function(t,i){this.Gj[t]=i},s.prototype.get=function(t){return this.Gj[t]},s.prototype.kj=function(t,i,n){"ALL"===t&&(t=Object.keys(this.Gj));for(var e=0;e<t.length;e++)if(!n||n.indexOf(t[e])===-1){var r=this.Gj[t[e]];r?r.kj(i):console.error("Invalid control name:",t[e])}},s.prototype.hj=function(t,i,n){"ALL"===t&&(t=Object.keys(this.Gj));for(var e=0;e<t.length;e++)if(!n||n.indexOf(t[e])===-1){var r=this.Gj[t[e]];r?r.hj(i):console.error("Invalid control name:",t[e])}},e.Jj=function(t){document.head.getElementsByTagName("title")[0].textContent=t},e.Kj=function(){var t=window.getSelection();if(!t.rangeCount)return null;var i=t.getRangeAt(0),n=i.startContainer.data;return n?n.substring(i.startOffset,i.endOffset):null},e.ai=function(t,i,n){var e=new Blob([t],{type:n||"text/plain"}),r=document.createElement("a");r.href=URL.createObjectURL(e),r.download=i,r.click()},e.prototype.Lj=function(){var t=this.Zi.files;return t&&t.length>0},e.prototype.Mj=function(t){var i=this.Zi.files;return i?!!i.length&&(u.Nj(i[0],t),!0):console.error("Invalid field type for uploadFile: "+this.type)}},{"./Rect":39,"./dome.less":44,"./fileHelper":45,"./tapBehavior":50}],33:[function(t,i,n){"use strict";function e(t,i){var n=new XMLHttpRequest,e=void 0!==n.responseType;e?n.responseType="arraybuffer":n.overrideMimeType("text/plain; charset=x-user-defined"),n.onreadystatechange=function(){if(4==~~n.readyState){if(200!=~~n.status){var r;r=0===n.status?s("#noInternet"):s("#httpReqError",n.status,t),h.error(r),u&&u._h(t+": "+r,h.ERROR);var o=new Error(r);return o.code=n.status,i(o)}var a,c,p="";if(e){var l=new Uint8Array(n.response);for(a=l.byteLength,c=0;c<a;c++)p+=String.fromCharCode(255&l[c])}else{var f=n.responseText;for(a=f.length,c=0;c<a;c++)p+=String.fromCharCode(255&f[c])}i(null,p)}};var o=r(t);u&&u._h("Requesting "+o,h.Oj),n.open("GET",o,!0),n.send()}function r(t){return"."===t[0]||"/"===t[0]?t:(o||(o=window.location.href.substr(0,window.location.href.lastIndexOf("/")+1)),o+t)}var o,s=t("./getText"),h=t("../log"),a={},u=null;n.ai=function(t,i){return void 0!==a[t]?i(null,a[t]):"file:"===window.location.protocol?i(null,"file:"+t):e(t,i)},n.Pj=function(t,i){a[t]=i},n.Vh=function(t){u=t}},{"../log":55,"./getText":46}],34:[function(t,i,n){"use strict";function e(t,i){this.Qj=t,this.Rj=i,this.xc=r+t+(i?"_"+i:""),this.Sj=!1,this.Tj=null,this.map={},this.Uj=this.Vj.bind(this),this.Wj=console.error,1===i&&"1g0"===t&&window.localStorage.getItem("currentVersion")&&(window.localStorage.removeItem("currentVersion"),window.localStorage.setItem(this.Xj(),this.xc))}var r="localPref_";i.exports=e,e.prototype.ci=function(){this.Tj=window.clearTimeout(this.Tj),this.Sj=!1,this.map={},window.localStorage.removeItem(this.xc),window.localStorage.removeItem(this.Xj())},e.prototype.Yj=function(t){this.Wj=t},e.prototype.Zh=function(){if(!this.Bi(this.xc)&&this.version){var t=window.localStorage.getItem(this.Xj());t||(t=r+this.Qj),this.Bi(t)&&(this.Sj=!0)}},e.prototype.Xj=function(){return r+this.Qj+"_currentKey"},e.prototype.Zj=function(){this.Tj&&this.Vj()},e.prototype.$j=function(){this.Tj||(this.Tj=window.setTimeout(this.Uj,6e4))},e.prototype.Bi=function(t){try{var i=window.localStorage.getItem(t);return!!i&&(this.map=JSON.parse(i),!0)}catch(t){this.Wj("Cannot load local preferences: "+t)}},e.prototype.Vj=function(){this.Tj=window.clearTimeout(this.Tj);try{window.localStorage.setItem(this.xc,JSON.stringify(this.map)),this.Sj&&(window.localStorage.setItem(this.Xj(),this.xc),this.Sj=!1)}catch(t){this.Wj("Cannot save local preferences: "+t)}},e.prototype.mi=function(){return Object.keys(this.map)},e.prototype.ni=function(t){delete this.map[t]},e.prototype.tc=function(t,i){var n=this.map[t];return void 0!==n?n:i},e.prototype.rc=function(t,i){return this.map[t]=i,this.$j(),i}},{}],35:[function(t,i,n){"use strict";function e(){this.level=NaN,this._j=null,this.Oj=o,this.ak=s,this.bk=h,this.ERROR=a,this.ck=u,this.dk=!1,this.ke=!1}var r=console,o=0,s=1,h=2,a=3,u=4;i.exports=e,e.prototype.ek=function(t){t!==this.level&&(this.level=t,this.debug=t<=o?this.fk:null,this.info=t<=s?this.Ag:null,this.warn=t<=h?this.gk:null,this.error=t<=a?this.hk:null,this.fatal=t<=u?this.ik:null)},e.prototype.jk=function(t){this._j=t},e.prototype.fk=function(t){this.kk(o,r.debug,t)},e.prototype.Ag=function(t){this.kk(s,r.info,t)},e.prototype.gk=function(t){this.kk(h,r.warn,t)},e.prototype.hk=function(t){this.kk(a,r.error,t)},e.prototype.ik=function(t){this.kk(u,r.error,t)},e.prototype.kk=function(t,i,n){t<this.level||this._j&&!this._j(t,n)||i.call(r,n)}},{}],36:[function(t,i,n){"use strict";function e(t,i,n){this.parent=t=t||document.body,n=n||{};var e="notifPopup"+(n.className?" "+n.className:""),h=this.lk=r.Hi(null,e).hj(!1);n.title&&h.Hi("title").Oi(1).Hi("text").Ri(n.title),n.mk&&(this.nk=r.sj(h,"closeBtn",o("#close"),this.close.bind(this)).Oi(1)),this.content=h.Hi("content"),this.ij=!1,this.pk=n.pk,this.pk?s.Ui(this.lk,this.parent):h.cj(t),i&&(this._h(i),this.show())}t("./notificationPopup.less");var r=t("./Dome"),o=t("./getText"),s=t("./PopupDlg"),h=t("./Transit");i.exports=e,e.prototype.qk=function(t){this.nk&&this.nk.hj(t)},e.prototype._h=function(t,i){var n=this.content.Hi("msg").Ri(t);void 0!==i&&n.Ki("level"+i,!0),this.content.qj()},e.prototype.close=function(){this.hide()},e.prototype.clear=function(){this.content.fj()},e.prototype.show=function(){this.ij||(this.ij=!0,this.lk.hj(!0),s.rk(this.lk))},e.prototype.hide=function(){this.ij&&(this.ij=!1,this.pk?s.Yi(this.lk):new h(this.lk).from("opacity",1).sk("opacity",0).start(500))}},{"./Dome":32,"./PopupDlg":38,"./Transit":42,"./getText":46,"./notificationPopup.less":48}],37:[function(t,i,n){"use strict";function e(){this.tk={},this.uk=null,this.vk=""}function r(t,i){for(var n in i)t.style[n]=i[n]}function o(t,i,n,e){var r,o=n[i],s=e[i];if(o)for(r in o)t.style[r]=s?s[r]||null:null;if(s)for(r in s)t.style[r]=s[r]}i.exports=new e,e.prototype.wk=function(t,i){this.tk=t,this.xk(i,!0),this._i(document.body,"body")},e.prototype.yk=function(){return Object.keys(this.tk)},e.prototype.xk=function(t,i){if(t!==this.vk){var n=this.uk;if(this.vk=t,this.uk=this.tk[t],!i)for(var e=document.all,r=0;r<e.length;r++){var o=e[r];this.zk(o,n)}}},e.prototype._i=function(t,i){if(this.uk){var n=this.uk[t.localName];if(n&&r(t,n),i&&(n=this.uk["."+i],n&&r(t,n),i.indexOf(" ")>=0))for(var e=i.split(" "),o=0;o<e.length;o++)(n=this.uk["."+e[o]])&&r(t,n)}},e.prototype.zk=function(t,i){o(t,t.localName,i,this.uk);for(var n=t.className.split(" "),e=0;e<n.length;e++)o(t,"."+n[e],i,this.uk)},e.prototype.Ak=function(t,i,n){var e=this.uk[i+"+"+n];if(e){var r=this.uk[i]||{};for(var o in e)t.style[o]=r[o]||null}},e.prototype.toggle=function(t,i,n){if(this.uk){var e,o=t.className.split(" ");if(n){var s=this.uk[t.localName+"+"+i];for(s&&r(t,s),e=0;e<o.length;e++)(s=this.uk["."+o[e]+"+"+i])&&r(t,s)}else for(this.Ak(t,t.localName,i),e=0;e<o.length;e++)this.Ak(t,"."+o[e],i)}}},{}],38:[function(t,i,n){"use strict";function e(){var t=this.Bk;t.options&&(t.options.Ck=this.id),o.Yi(t.lk),t.Dk&&t.Dk(t.options)}function r(t,i,n,r){var o=h.sj(t,"popupDlgBtn",n,e).Oi(1).lj(2);o.Bk=i,o.id=r}function o(t,i,n,e,s){this.parent=t||document.body,this.options=e,this.Dk=s;var u=this.lk=h.Hi(null,"popupDlg dialog");u.Hi("dialogTitle").Ri(n||a("#problem"));var c=u.Hi("content");h.xj(c,"message",i);for(var p=e&&e.buttons||[a("#ok")],l=u.Hi("btnDiv"),f=0;f<p.length;f++)r(l,this,p[f],f);o.Ui(this.lk,this.parent)}function s(t){var i=h.Hi(null,"popupOverlay");return t&&(t=t.Zi||t,i.li("left",t.offsetLeft+"px"),i.li("top",t.offsetTop+"px"),i.li("width",t.scrollWidth+2+"px"),i.li("height",t.scrollHeight+2+"px")),i}t("./popupDlg.less");var h=t("./Dome"),a=t("./getText"),u=t("./tapBehavior"),c=t("./Transit");i.exports=o,o.Ui=function(t,i,n){var e=t.Ek=s(i);e.parent=i,e.cj(i),t.cj(e,!0),e.li("opacity",1),n&&u(e,n)},o.Yi=function(t){var i=t.Ek;if(!i.parent)return console.error("Already detached overlay",t);i.li("opacity",0),window.setTimeout(function(n){t.hj(!1),h.removeChild(n,i)},300,i.parent),i.parent=null},o.Fk=function(t,i,n,e){var r={buttons:[a("#yes"),a("#no")]};new o(t,i,a("#confirmTitle"),r,function(t){0===t.Ck&&n(e)})},o.rk=function(t){new c(t).from("opacity",0).sk("opacity",1).start(500)}},{"./Dome":32,"./Transit":42,"./getText":46,"./popupDlg.less":49,"./tapBehavior":50}],39:[function(t,i,n){"use strict";function e(t,i,n,e){this.left=t,this.top=i,this.width=n,this.height=e}i.exports=e,e.prototype.Wi=function(t,i,n){var e=t.left,r=t.top;switch(i){case 1:e+=t.width+15;break;case-1:e+=-this.width-15;break;case void 0:case 0:e+=t.width/2-this.width/2;break;default:e+=i*t.width}switch(n){case 1:r+=t.height+15;break;case void 0:case-1:r+=-this.height-15;break;case 0:r+=t.height/2-this.height/2;break;default:r+=n*t.height}this.left=Math.round(e),this.top=Math.round(r)},e.prototype.Fj=function(t,i){var n=Math.max(Math.min(this.left,t.width-this.width-i),i),e=Math.max(Math.min(this.top,t.height-this.height-i),i);this.left=Math.round(n),this.top=Math.round(e)}},{}],40:[function(t,i,n){"use strict";function e(t){this.Hk={},this.Ik=t.Ik,this.Jk=t.Jk,this.Kk(t),this.Lk()}function r(){this.Qk.Nk()}function o(){this.removeEventListener(p.dl,o),this.el.Ek.hj(!1)}t("./topMenu.less");var s=t("../loaders").vi,h=t("./Dome"),a=t("./tapBehavior"),u=t("./TopMenuOption"),c=t("./touchManager"),p=t("./Transit"),l={height:1.1,Gk:2};i.exports=e,e.prototype.Mk=function(){this.Nk()},e.prototype.Ok=function(t){this.Pk.Ri(t)},e.prototype.Rk=function(t){return this.Sk.Hi(t||"menuSeparator")},e.prototype.Tk=function(t,i,n){var e=new u(this,t,i,l);return n&&s.gi(e.icon,n),this.Hk[t]=e,e},e.prototype.Uk=function(t){this.Nk(),this.Ik(t)},e.prototype.Mi=function(t){return this.Sk.appendChild(t)},e.prototype.removeItem=function(t){this.Sk.removeChild(t)},e.prototype.Kk=function(t){var i=this.Ek=h.Hi(null,"topMenuOverlay");i.Qk=this,i.hj(!1),i.li("opacity",0),i.cj(document.body),a(i,r);var n=h.Hi(null,"topMenu").Oi(1),e=this.Vk=h.Hi(n,"menuBtn").Pi(1),o=e.Hi("menuBtnIcon btnIcon");s.gi(o,"menuBtn.png"),a(e,this.Wk.bind(this)),this.Pk=n.Hi("topTitle"),this.width=Math.min(~~(.85*h.aj),675);var u=this.Xk=n.Hi("slideMenu"),c=this.Sk=u.Hi("menuContent");c.li("width",this.width+"px"),c.li("minHeight",h.bj+"px"),u.Hi("sideHandle").li("height",h.bj+"px");var p=c.Hi("menuTitle").Oi(1.5),l=p.Hi("text").Ri(t.Yk);a(l,this.Nk.bind(this)),this.Zk(-this.width),n.cj(document.body)},e.prototype.Zk=function(t){this.$k=t,this.Xk.li(p._k,"translate3D("+t+"px,0,0)")},e.prototype.al=function(t){var i=Math.max(50,~~(Math.abs(t-this.$k)/this.width*300));this.Xk.li(p.bl,p.cl+" "+i+"ms ease-out"),this.Zk(t)},e.prototype.Wk=function(){var t=!1;if(this.Ek.ij()||(t=!0,this.Ek.hj(!0)),this.Jk&&t){var i=this.Ek.Zi.clientWidth;i++,this.Ek.li("opacity",.7)}this.al(0)},e.prototype.Nk=function(){this.Jk&&this.Ek.li("opacity",0),this.Xk.Zi.addEventListener(p.dl,o),this.Xk.Zi.el=this,this.al(-this.width)},e.prototype.Lk=function(){var t,i,n,e,r=this;c.fl(this.Xk.Zi,function(o,s){switch(o){case"dragStart":return t=s,i=n=r.$k,e=i<0?-1:1,r.Xk.li(p.bl,null),void r.Ek.hj(!0);case"drag":var h=i+(s-t);if(h===n)return;return e=h-n,h>0&&(h=0),n=h,r.Zk(h),void(r.Jk&&r.Ek.li("opacity",.7*(1+h/r.width)));case"dragEnd":return void(e>0?r.Wk():r.Nk());case"tap":return r.Nk()}},{gl:!0,hl:0})}},{"../loaders":54,"./Dome":32,"./TopMenuOption":41,"./Transit":42,"./tapBehavior":50,"./topMenu.less":51,"./touchManager":52}],41:[function(t,i,n){"use strict";function e(t,i,n,e){var s=this.il=t.Sk.Hi("menuOption "+i).Oi(e.height);s.jl=this,this.icon=s.Hi("icon").Pi(e.Gk),this.label=s.Hi("label").Ri(n),this.Qk=t,this.id=i,o(s,r)}function r(){var t=this.jl;t.Qk.Uk(t.id)}var o=t("./tapBehavior");i.exports=e,e.prototype.hj=function(t){this.il.hj(t)},e.prototype.Ri=function(t){this.label.Ri(t)}},{"./tapBehavior":50}],42:[function(t,i,n){"use strict";function e(t){this.Zi=t.Zi||t,this.kl={},this.ll={},this.ml={},this.timeout=null,this.nl=null,this.ol=null}function r(t,i){window.clearTimeout(t.timeout),t.timeout=null,t.Zi.style[e.bl]=t.nl,!i&&t.ol&&t.ol(),t.ol=null}i.exports=e,e.prototype.from=function(t,i){return this.ll[t]=i,this},e.prototype.sk=function(t,i){return this.ml[t]=i,this},e.prototype.start=function(t,i){var n=this.Zi;n.pl&&n.pl.timeout&&r(n.pl,!0),n.pl=this,this.nl=n.style[e.bl],n.style[e.bl]=null;for(var o in this.ll)this.kl[o]=n.style[o],n.style[o]=this.ll[o];n.clientHeight||(n=n),n.style[e.bl]="all "+t+"ms ease-in-out";for(o in this.ml)this.kl.hasOwnProperty(o)||(this.kl[o]=n.style[o]),n.style[o]=this.ml[o];return this.ol=i,this.timeout=window.setTimeout(r,t,this),this},e.prototype.reverse=function(t,i){var n=this.ml;this.ml=this.ll,this.ll=n,this.start(t,i)},e.prototype.ql=function(t,i){this.ml=this.kl,this.kl={},this.ll={},this.start(t,i)},function(){void 0===document.body.style.webkitTransition?(e.bl="transition",e.dl="transitionend",e._k="transform",e.cl="transform"):(e.bl="webkitTransition",e.dl="webkitTransitionEnd",e._k="webkitTransform",e.cl="-webkit-transform")}()},{}],43:[function(t,i,n){var e=".contextMenu {\n  position: absolute;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  cursor: default;\n  max-width: 70%;\n  background-color: rgba(120, 120, 120, 0.2);\n  border-radius: 7px;\n  border: 1px solid #58636d;\n}\n.contextMenu .menuItem {\n  position: relative;\n  margin: 1px 1px 0 1px;\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.7);\n  color: #e4e4e4;\n}\n.contextMenu .menuItem.pressed {\n  background-color: #333;\n}\n.contextMenu .menuItem.selected {\n  background-color: #555;\n}\n.contextMenu .menuItem .icon {\n  display: inline-block;\n  vertical-align: top;\n  position: relative;\n  left: 0;\n  top: 0.5rem;\n  height: calc(100% - 1rem);\n  background-position: 50%;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n.contextMenu .menuItem .text {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  display: inline-block;\n  vertical-align: top;\n  position: relative;\n  font-size: 1.2rem;\n  max-width: 50vw;\n  max-height: 100%;\n  overflow: hidden;\n}\n";t("lessify")(e),i.exports=e},{"lessify":125}],44:[function(t,i,n){var e='body {\n  background-color: #865e50;\n  font-size: 1rem;\n  font-family: "Arial";\n  margin: 0px;\n  height: 2048px;\n}\ndiv {\n  box-sizing: border-box;\n}\n::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 7px;\n  height: 7px;\n}\n::-webkit-scrollbar-track {\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.2);\n  -webkit-border-radius: 10px;\n  border-radius: 7px;\n  margin: 1px;\n}\n::-webkit-scrollbar-thumb {\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, 0.5);\n}\n.btn {\n  position: relative;\n  display: inline-block;\n  vertical-align: top;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  cursor: default;\n  box-sizing: border-box;\n  padding: 0 2px;\n  border-radius: 13px;\n  min-width: 4rem;\n  font-size: 1rem;\n  text-align: center;\n  border: 1px solid #7a6c5c;\n  background-color: #af9e8e;\n  color: #000;\n}\n.btn.disabled {\n  color: #000;\n  border-style: hidden;\n  opacity: 0.5;\n}\n.btn.pressed {\n  border-style: outset;\n  -webkit-filter: brightness(1.5);\n  filter: brightness(1.5);\n}\n.btnIcon {\n  position: absolute;\n  left: 2px;\n  top: 2px;\n  width: calc(100% - 4px);\n  height: calc(100% - 4px);\n  background-position: 50%;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n.btnText {\n  position: relative;\n  margin: 0 3px;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  z-index: 1;\n  max-height: 100%;\n  overflow: hidden;\n}\n.inputLbl {\n  display: inline-block;\n  margin: 0 5px 0 10px;\n  font-size: 1rem;\n}\n.inputBox {\n  display: inline-block;\n  margin: 0.5rem 0;\n  min-height: 3rem;\n  text-align: left;\n  font-size: 1.3rem;\n  color: inherit;\n}\n.inputDesc {\n  display: inline-block;\n  margin-left: 1rem;\n  max-width: 30%;\n  vertical-align: middle;\n  font-size: 0.9rem;\n  font-style: italic;\n}\n.chkBoxDiv {\n  display: inline-block;\n  margin-right: 10px;\n}\n.chkBox {\n  margin: 5px 3px 14px 2px;\n  width: 1rem;\n  height: 1rem;\n}\n.chkLbl {\n  font-size: 1rem;\n}\n.dropDwn {\n  margin: 17px 13px 17px 13px;\n  color: inherit;\n}\n.radioBtn {\n  margin: 17px 0px 17px 13px;\n  width: 29px;\n  height: 1.5em;\n}\n.radioLbl {\n  margin-right: 13px;\n}\n.dialog {\n  position: relative;\n  margin: 0 auto;\n  max-width: 750px;\n  padding: 10px;\n  background-color: #ffe;\n  color: #000;\n  border: solid #cca 1px;\n  border-radius: 10px;\n  font-family: Arial;\n  font-size: 1rem;\n}\n.dialogTitle {\n  font-size: 2rem;\n  background-color: #ffebce;\n  color: #000;\n  border: solid 1px rgba(195, 50, 50, 0.2);\n  border-radius: 10px;\n  margin: -6px;\n  margin-bottom: 15px;\n  padding: 10px 0px 10px 12px;\n}\n';t("lessify")(e),i.exports=e},{"lessify":125}],45:[function(t,i,n){"use strict";n.Nj=function(t,i){var n=new FileReader;n.onloadend=function(){return i(n.result)},n.readAsText(t)}},{}],46:[function(t,i,n){"use strict";function e(t){var i=o[t];if(void 0===i&&(i=r[t]),void 0===i)return"("+t+")";if(arguments.length<=1)return i;for(var n=1;n<arguments.length;n++)i=i.replace("%"+n,arguments[n]);return i}var r=t("../../assets/i18n_en-0.1.json"),o=r;i.exports=e,e.rl=function(t,i,n){var e="i18n_"+t+".json";i.jh(e,function(t,i){if(t)return n();o=JSON.parse(i),n()})}},{"../../assets/i18n_en-0.1.json":2}],47:[function(t,i,n){"use strict";var e=t("./Dome");n.init=function(t,i){e.init(t,i)}},{"./Dome":32}],48:[function(t,i,n){var e=".notifPopup {\n  z-index: 3000;\n  border-radius: 13px;\n  background-color: rgba(0, 0, 0, 0.7);\n}\n.notifPopup .title {\n  line-height: 100px;\n  padding: 0 1rem;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  border-radius: 12px;\n  background-color: rgba(77, 77, 77, 0.5);\n}\n.notifPopup .title .text {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  position: relative;\n  color: #fff;\n  font-size: 1.5rem;\n}\n.notifPopup .closeBtn {\n  position: absolute;\n  top: 0;\n  right: 0;\n}\n.notifPopup .content {\n  padding: 1.2rem;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  font-size: 1.2rem;\n  color: white;\n  height: 300px;\n  overflow-y: scroll;\n}\n.notifPopup .content .level0 {\n  color: #888;\n}\n.notifPopup .content .level1 {\n  color: #0a0;\n}\n.notifPopup .content .level2 {\n  color: #fb0;\n}\n.notifPopup .content .level3 {\n  color: #f33;\n  font-weight: bold;\n}\n.notifPopup .content .msg {\n  max-height: 999999px;\n  margin-bottom: 0.5rem;\n}\n";t("lessify")(e),i.exports=e},{"lessify":125}],49:[function(t,i,n){var e=".popupOverlay {\n  z-index: 2000;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.7);\n  transition: opacity 300ms ease-out;\n  opacity: 0;\n}\n.popupDlg {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  max-width: 75%;\n}\n.popupDlg .content {\n  padding: 20px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.popupDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n}\n.popupDlg .btnDiv .popupDlgBtn {\n  float: right;\n  margin-left: 0.5rem;\n}\n";t("lessify")(e),i.exports=e},{"lessify":125}],50:[function(t,i,n){"use strict";var e=t("./touchManager");i.exports=function(t,i){e.fl(t.Zi,function(n){switch(n){case"tap":if(t.Zi.disabled)return;return i.call(t),!0;case"pressed":if(t.Zi.disabled)return;return t.Ki("pressed",!0);case"released":return t.Ki("pressed",!1)}})}},{"./touchManager":52}],51:[function(t,i,n){var e=".topMenuOverlay {\n  z-index: 1900;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: #000;\n  -webkit-transition: opacity 300ms ease-out;\n  transition: opacity 300ms ease-out;\n  -webkit-transform: translate3D(0, 0, 0);\n  transform: translate3D(0, 0, 0);\n}\n.topMenu {\n  width: 100%;\n  background-color: #333;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  cursor: default;\n}\n.topMenu .menuBtn {\n  position: relative;\n  display: inline-block;\n  height: 100%;\n  background-color: #000;\n}\n.topMenu .menuBtn.pressed {\n  -webkit-filter: brightness(1.5);\n  filter: brightness(1.5);\n}\n.topMenu .menuBtn .menuBtnIcon {\n  -webkit-filter: invert(1) grayscale(1);\n  filter: invert(1) grayscale(1);\n}\n.topMenu .topTitle {\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  display: inline-block;\n  vertical-align: top;\n  width: calc(100% - 130px);\n  overflow: hidden;\n  color: #fff;\n  padding-left: 1em;\n  font-size: 1.5rem;\n}\n.topMenu .slideMenu {\n  z-index: 1901;\n  position: absolute;\n  top: 0;\n}\n.topMenu .sideHandle {\n  width: 10px;\n  display: inline-block;\n  vertical-align: top;\n}\n.topMenu .menuContent {\n  display: inline-block;\n  overflow-x: hidden;\n  background-color: #000;\n  color: #fff;\n}\n.topMenu .menuTitle {\n  padding-left: 1.6rem;\n  font-size: 1.6rem;\n  border-bottom: 1px solid #909090;\n  background-color: #323435;\n}\n.topMenu .menuTitle .text {\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.topMenu .menuOption {\n  position: relative;\n  font-size: 1.4rem;\n}\n.topMenu .menuOption.pressed {\n  background-color: #444;\n}\n.topMenu .menuOption .icon {\n  display: inline-block;\n  height: 100%;\n  background-size: auto 70%;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.topMenu .menuOption .label {\n  display: inline-block;\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.topMenu .menuSeparator {\n  border-bottom: 1px solid #777;\n}\n";t("lessify")(e),i.exports=e},{"lessify":125}],52:[function(t,i,n){"use strict";function e(){this.sl=this.tl=0,this.ul=this.vl=!1,this.startTime=this.wl=0,this.xl=[],this.yl=0,this.zl=null,this.Al=!1,r()}function r(){window.addEventListener("mousemove",function t(){d.Al=!0,window.removeEventListener("mousemove",t)})}function o(t){if(d.ul)return d.Bl();d.Cl(t.changedTouches[0],t,t.currentTarget)}function s(t){d.Dl(t.changedTouches[0],t)}function h(t){if(t.changedTouches.length>1)return d.Bl();d.El(t.changedTouches[0],t)}function a(){d.Bl()}function u(t){t.button===f&&d.Cl(t,t,t.currentTarget)}function c(t){t.button===f&&d.Dl(t,t)}function p(t){d.El(t,t)}function l(t,i,n){i.Hl.Jl=null,t.Ol(i,n)}var f=0,d=i.exports=new e;e.prototype.Fl=function(t){return!(this.xl.indexOf(t)>=0)&&(this.xl.push(t),this.yl++,t.Hl.Gl("pressed"),t.addEventListener("touchmove",h),t.addEventListener("touchend",s),t.addEventListener("touchcancel",a),1===this.yl&&(document.addEventListener("mousemove",p),document.addEventListener("mouseup",c)),!0)},e.prototype.Il=function(t){var i=this.xl.indexOf(t);if(i<0)return console.error("target not listening",t);this.xl[i]=null,this.yl--;var n=t.Hl;n.Gl("released"),n.Jl&&(n.Jl=window.clearTimeout(n.Jl)),t.removeEventListener("touchmove",h),t.removeEventListener("touchend",s),t.removeEventListener("touchcancel",a),0===this.yl&&(document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",c),this.xl.length=0)},e.prototype.Kl=function(){this.Ll(null)},e.prototype.Ll=function(t){for(var i=0;i<this.xl.length;i++){var n=this.xl[i];n&&n!==t&&this.Il(n)}this.zl=t},e.prototype.Cl=function(t,i,n){if(this.vl&&this.Ml(),this.Fl(n)){this.sl=t.clientX,this.tl=t.clientY,this.startTime=Date.now();var e=n.Hl;if(e.gl&&!this.ul){var r=e.Nl;0===r?i.preventDefault():e.Jl=window.setTimeout(l,r,this,n,t)}}},e.prototype.El=function(t,i){var n=Date.now();if(n-this.wl<50)return i.preventDefault();this.wl=n;var e;if(this.ul)return e=this.zl.Hl,e.Gl("drag",t.pageX-e.Pl,t.pageY-e.Ql),i.preventDefault();for(var r=Math.abs(t.clientX-this.sl)+Math.abs(t.clientY-this.tl),o=0;o<this.xl.length;o++){var s=this.xl[o];if(s&&(e=s.Hl,!(r<e.Rl)))if(e.gl){if(!(n-this.startTime<e.Nl)){this.Ol(s,t);break}this.Il(s)}else this.Il(s)}i.preventDefault()},e.prototype.Dl=function(t,i){i.preventDefault();var n,e;if(this.vl=!0,this.ul){n=this.zl,e=n.Hl;Date.now()-this.startTime<e.Sl?this.Bl():(this.ul=!1,this.Il(n),e.Gl("dragEnd",t.pageX-e.Pl,t.pageY-e.Ql))}else{for(var r=0;r<this.xl.length&&(!(n=this.xl[r])||(e=n.Hl,!e.Gl("tap",t.pageX-e.Pl,t.pageY-e.Ql)));r++);this.Kl()}this.vl=!1},e.prototype.Ml=function(){console.warn("Cleaning up touchManager"),this.vl=!1,this.Kl()},e.prototype.Ol=function(t,i){this.ul=!0,this.startTime=Date.now(),this.Ll(t);var n=t.Hl;n.Gl("dragStart",i.pageX-n.Pl,i.pageY-n.Ql)},e.prototype.Bl=function(){this.ul&&(this.ul=!1,this.zl.Hl.Gl("dragCancel")),this.Kl()},e.prototype.fl=function(t,i,n){n=n||{};var e={Gl:i,Rl:void 0!==n.Tl?n.Tl:10};n.gl&&(e.gl=!0,e.Nl=n.Ul||0,e.Sl=void 0!==n.hl?n.hl:100,e.Pl=t.offsetLeft,e.Ql=t.offsetTop),t.Hl=e,t.addEventListener("touchstart",o),t.addEventListener("mousedown",u)}},{}],53:[function(t,i,n){"use strict";function e(t){return decodeURIComponent(t.replace(o," "))}var r=/([^&=]+)=?([^&]*)/g,o=/\+/g;n.Vl=function(t){t=(t||window.location.search).substring(1);for(var i={};;){var n=r.exec(t);if(!n)break;i[e(n[1])]=e(n[2])}return i},n.Wl=function(t){document.location.href=t},n.Xl=function(){var t=window.location;return t.protocol+"//"+t.host+t.pathname},n.Yl=function(){n.Wl(n.Xl())}},{}],54:[function(t,i,n){var e=t("../config/assets.json"),r=t("./hh/AssetLoader"),o=t("contra"),s=t("./hh/GetFile"),h=t("./hh/getText"),a=t("../config/scripts.json"),u=new r,c=new r;n.vi=u,n._f=c,n.init=function(t,i,n){i&&(s.Vh(i),u.Vh(i),c.Vh(i)),o.Zl([function(i){u.Wh(e,t+"_assets","assets/",i)},function(t){h.rl("en",u,t)},function(i){c.Wh(a,t+"_scripts","build/",i)},function(){n()}])}},{"../config/assets.json":3,"../config/scripts.json":8,"./hh/AssetLoader":29,"./hh/GetFile":33,"./hh/getText":46,"contra":108}],55:[function(t,i,n){"use strict";var e=t("./hh/Logger"),r=new e;r.ek(r.ak),i.exports=r},{"./hh/Logger":35}],56:[function(t,i,n){"use strict";function e(){this.appName=r.name,this.appVersion=r.version,this.$l=null,this._l=null}var r=t("../package.json");i.exports=new e},{"../package.json":131}],57:[function(t,i,n){"use strict";function e(t){this.em=t,this.fm=null,this.files=null,this.gm=null}var r=t("Dropbox"),o=t("../hh/fileHelper"),s=t("../hh/getText"),h=t("../../config/net.json"),a=t("../hh/PopupDlg"),u=t("../hh/urlHelper");n.am=function(t){var i=u.Vl(window.location.hash);if(i["error"])return t.rc("dbxToken",null),new a(null,i["error_description"],s("#problem")+": "+i["error"],{},function(){t.Zj(),u.Yl()}),!1;var n=i["access_token"];return!!n&&(t.rc("dbxToken",n),t.Zj(),u.Yl(),!0)},n.bm=function(t){var i=t.tc("dbxToken");return i?new e(i):null},n.cm=function(){var t=new r({"clientId":h["dropbox-clientId"]}),i=t.dm(u.Xl());u.Wl(i)},e.prototype.connect=function(t){this.fm||(this.fm=new r({"accessToken":this.em})),this.hm("",t)},e.prototype.hm=function(t,i){if(!this.fm)return i(s("#noDropbox"));var n=this;this.fm.im({"path":t}).then(function(t){var e=t["entries"];n.files={};for(var r=0;r<e.length;r++)n.jm(e[r]);i()}).catch(i)},e.prototype.jm=function(t){var i=t["path_display"];"file"!==t[".tag"]?this.files[i]={path:i,km:!0}:this.files[i]={path:i,timestamp:t["server_modified"]}},e.prototype.lm=function(t){if("/"!==(t=t||"/"))throw new Error("Unsupported call to getNumEntries + path");return this.gm=Object.keys(this.files),this.gm.length},e.prototype.mm=function(t){var i=this.gm[t];return i?{path:i,timestamp:this.files[i].timestamp}:null},e.prototype.ai=function(t,i){if(!this.fm)return i(s("#noDropbox"));this.fm.nm({"path":t}).then(function(t){o.Nj(t["fileBlob"],function(n){i(null,n,t["server_modified"])})}).catch(i)},e.prototype.Mj=function(t,i,n){if(!this.fm)return n(s("#noDropbox"));var e=new Blob([i],{type:"text/plain"}),r=this;this.fm.om({"path":t,"contents":e,"mode":{".tag":"overwrite"},"mute":!0}).then(function(i){var e=i["server_modified"];r.files[t]={timestamp:e},n(null,e)}).catch(n)},e.prototype.pm=function(t,i){if(!this.fm)return i(s("#noDropbox"));var n=this;this.fm.qm({"path":t}).then(function(){n.files[t]={km:!0},i()}).catch(i)},e.prototype.rm=function(t,i){if(!this.fm)return i(s("#noDropbox"));var n=this;this.fm.sm({"path":t}).then(function(){delete n.files[t],i()}).catch(i)},e.prototype.tm=function(t,i,n){if(!this.fm)return n(s("#noDropbox"));var e=this;this.fm.um({"from_path":t,"to_path":i}).then(function(){e.files[i]=e.files[t],delete e.files[t],n()}).catch(n)}},{"../../config/net.json":6,"../hh/PopupDlg":38,"../hh/fileHelper":45,"../hh/getText":46,"../hh/urlHelper":53,"Dropbox":94}],58:[function(t,i,n){"use strict";function e(t,i,n,e){this.Jb=t,this.vm=i,this.Ee=n,this.wm=e,this.xm=null,this.ym=this.zm=null}function r(t){return"/"+t}function o(t){return f+"/"+t}function s(t){return new Date(t).toISOString().substring(0,19)+"Z"}function h(t){return new Date(t).getTime()}var a=t("contra"),u=t("../GameInVault"),c=t("../GameVault").ac,p=t("../hh/getText"),l=t("../log"),f="/archivedGames";i.exports=e,e.prototype.connect=function(t){this.xm={};var i=this;this.vm.connect(function(n){if(n)return i.Am(n,t);i.Bm(t)})},e.prototype.Am=function(t,i){var n=t;"string"==typeof t.error&&(n=t.error,void 0!==t.response&&(n+="\nResponse: "+t.response),
void 0!==t.status&&(n+="\nStatus: "+t.status)),this.wm(n,l.ERROR),i(t)},e.prototype.Bm=function(t){for(var i=!1,n=!1,e=this.vm.lm(),r=0;r<e;r++){var o=this.vm.mm(r),s=o.path;if("/vaultState.json"===s)i=!0;else if(s===f)n=!0;else{var h=s.substr(1);this.xm[h]=o.timestamp}}n||this.vm.pm(f,function(){}),i?this.Cm(t):(this.ym={},this.zm={},t())},e.Dm=s,e.Em=h,e.prototype.Fm=function(t,i,n){var e=this.Ee.ec(t);if(e===c.bc)return n();if(e===c.ACTIVE)return n();switch(e){case c.cc:var r=this.Ee.gc(t),o=s(r.va());i>o?(this.Ee.nc(t),this.wm(p("#unarchived")+t,l.bk),n()):(this.wm(p("#archived")+p("#remote",t),l.Oj),this.Gm(t,o,n));break;case c.dc:var h=s(this.Ee.fc(t));i>h?(this.wm(p("#undeleted")+t,l.bk),n()):(this.wm(p("#deleted")+p("#remote",t),l.Oj),this.Hm(t,h,n));break;default:throw new Error("Unexpected GameState: "+e)}},e.prototype.Im=function(t,i){var n=this;this.Jm(r(t),function(e,r,o){if(e)return i(e);n.Km(r,t,o),n.wm(p("#downloaded")+t,l.ak),i()})},e.prototype.Jm=function(t,i){this.vm.ai(t,function(t,n,e){if(t)return self.Am(t,i);var r=[],o=new u;if(!o.U(n,r))return self.Am(r.join("\n"),i);i(null,o,e)})},e.prototype.Lm=function(t,i){var n=t.xa(),e=this,o=this.xm[n];return o?o===t.ua()?(this.wm(p("#alreadySync")+n,l.Oj),i()):void this.Nm(t,r(n),function(r){if(r)return i(r);e.Mm(t,n,i)}):this.Mm(t,n,i)},e.prototype.Nm=function(t,i,n){var e=this;this.Jm(i,function(i,r){if(i)return n(i);var o=[];if(!t.ca(r,o))return i=t.xa()+": "+o.join("\n"),e.Am(i,n);n()})},e.prototype.Mm=function(t,i,n){var e=!!this.xm[i];if(!e){var h=s(t.va());if(this.ym[i]>h)return this.Ee.ic(i),this.wm(p("#deleted")+i,l.Oj),n();if(this.zm[i]>=h)return this.Ee.lc(i),this.wm(p("#archived")+i,l.Oj),n()}var a=this;this.vm.Mj(r(i),t.P(),function(r,s){return r?a.Am(r,n):(a.Km(t,i,s),e?(a.wm(p("#synced")+i,l.ak),n()):a.ym[i]?(a.wm(p("#undeleted")+p("#remote",i),l.bk),delete a.ym[i],a.Om(n)):a.zm[i]?(a.wm(p("#unarchived")+p("#remote",i),l.Oj),delete a.zm[i],a.Om(function(){a.vm.rm(o(i),n)})):(a.wm(p("#uploaded")+i,l.Oj),void n()))})},e.prototype.Km=function(t,i,n){this.xm[i]=n,t.ta(n,h(n)),this.Ee.Yb(t)},e.prototype.Pm=function(t,i,n,e){this.zm[i]=n,t.ta(n,h(n)),this.Ee.oc(t),this.Om(e)},e.prototype.Gm=function(t,i,n){this.zm[t]=i;var e=this;this.Om(function(){delete e.xm[t],e.vm.tm(r(t),o(t),n)})},e.prototype.Qm=function(t,i){var n=t.xa();if(this.xm[n])return i();var e=t.ua(),r=this.zm[n],s=this;if(r===e)return i();var h=o(n);if(!r)return this.ym[n]?i():this.vm.Mj(h,t.P(),function(e,r){if(e)return i(e);s.wm(p("#uploaded")+p("#archivedGame",n),l.Oj),s.Pm(t,n,r,i)});this.Nm(t,h,function(e){if(e)return i(e);s.vm.Mj(h,t.P(),function(e,r){if(e)return i(e);s.wm(p("#synced")+p("#archivedGame",n),l.bk),s.Pm(t,n,r,i)})})},e.prototype.Rm=function(t,i){var n=this;this.Jm(o(t),function(e,r,o){if(e)return i(e);n.wm(p("#downloaded")+p("#archivedGame",t),l.Oj),n.Pm(r,t,o,i)})},e.prototype.Hm=function(t,i,n){this.ym[t]=i;var e=this;this.Om(function(){delete e.xm[t],e.vm.rm(r(t),n)})};e.prototype.Cm=function(t){var i=this;this.vm.ai("/vaultState.json",function(n,e){if(n)return i.Am(n,t);var r=JSON.parse(e);i.ym=r["deletedFiles"]||{},i.zm=r["archivedFiles"]||{},t()})},e.prototype.Om=function(t){var i={};i["deletedFiles"]=this.ym,i["archivedFiles"]=this.zm;var n=JSON.stringify(i);this.vm.Mj("/vaultState.json",n,t)},e.prototype.Sm=function(t,i){if(t===this.Ee.Tb())throw new Error("syncOneGame(unsaved)");this.Lm(t,i)},e.prototype.Tm=function(t){if(this.Ee.Tb())throw new Error("syncAll with unsaved");var i=this;a.Zl([this.Um.bind(this),this.Vm.bind(this),this.Wm.bind(this),this.Xm.bind(this),this.Ym.bind(this)],function(n){if(n)return i.Am(n,t);i.wm(p("#syncDone")),t()})},e.prototype.Um=function(t){var i=this;a.di.Zl(this.xm,function(t,n,e){i.Fm(n,t,e)},t)},e.prototype.Vm=function(t){var i=this;a.di.Zl(this.Ee.$b(),function(t,n){i.Lm(t,n)},t)},e.prototype.Wm=function(t){var i=this;a.di.Zl(this.xm,function(t,n,e){if(i.Ee.Zb(n))return e();i.Im(n,e)},t)},e.prototype.Xm=function(t){var i=this;a.di.Zl(this.Ee.hc(),function(t,n){i.Qm(t,n)},t)},e.prototype.Ym=function(t){var i=this;a.di.Zl(this.zm,function(t,n,e){if(i.Ee.ec(n)!==c.bc)return e();i.Rm(n,e)},t)}},{"../GameInVault":9,"../GameVault":12,"../hh/getText":46,"../log":55,"contra":108}],59:[function(t,i,n){"use strict";var e=t("../../config/net.json");n.Zm=function(t){var i,n=(t.Ea("source")||"").toLowerCase(),e=t.Ea("place")||"";return n.indexOf("littlegolem")>=0?(i=t.Ea("event"),i?{site:"LittleGolem",id:i}:null):n.indexOf("www.dragongoserver")>=0?(i=n.substr(n.indexOf("gid=")+4),{site:"DragonGo",id:i}):e.indexOf("online-go.com/game/")>=0?(i=e.substr(e.indexOf("/game/")+6),{site:"OGS",id:i}):null},n.$m=function(t,i){return e["server-url"]+"getgame?site="+t+"&id="+i},n._m=function(t){switch(t.site){case"LittleGolem":return"http://www.littlegolem.net/servlet/sgf/"+t.id+"/game.sgf";case"DragonGo":return"http://www.dragongoserver.net/sgf.php?gid="+t.id+"&owned_comments=1";case"OGS":return"https://online-go.com/api/v1/games/"+t.id+"/sgf";default:return null}};var r={"http://www.littlegolem.com":"LittleGolem","OGS: http://online-go.com/game/":"OGS:","http://www.dragongoserver.net/game.php?gid=":"DragonGo:"};n.za=function(t,i){for(var n in r)i=i.replace(n,r[n]);return"EV"===t&&""+parseInt(i)===i&&(i="EV:"+i),i}},{"../../config/net.json":6}],60:[function(t,i,n){"use strict";function e(){this.debug=!1,this.an=this.bn=!1,this.cn=null,this.dn=null}i.exports=new e,e.prototype.en=function(t,i){this.cn=new t,i(this.cn)},e.prototype.assert=function(t,i){if(t!==!0)throw new Error("assertion failed: "+(i||t))}},{}],61:[function(t,i,n){"use strict";function e(){this.fn=null,this.gn=null,this.Ra=null,this.eb=0,this.hn=null,this.cursor={type:"CR",x:0,y:0},this.jn=!1,this.kn={type:null,x:0,y:0}}function r(t){switch(t){case-1:return{type:"mini",c:f.B};case-.5:return{type:"outline",c:f.B};case 0:return null;case.5:return{type:"outline",c:f.W};case 1:return{type:"mini",c:f.W};default:return null}}function o(t){switch(t){case u.Md+m:case u.Ld+v:return{type:"mini",c:f.B};case u.Md+v:case u.Ld+m:return{type:"mini",c:f.W};case u.Kd:return{type:"SL",c:"grey"};default:return null}}function s(t){if(null===t)return null;var i=1,n=0,e=2,r=0;if(void 0!==k&&(n=k),void 0!==j&&(e=j),void 0!==D&&(r=D),t===r)return null;for(var o=t.toFixed(e),s=n;s<e;s++)o=o.dh("0");if(o=o.dh("."),"0."===o.substr(0,2)&&(o=o.slice(1)),0===r){if("0"===o||".0"===o)return null;i=t<1?.6:1}return{type:"LB",text:o,scale:i}}var h=t("../loaders").vi,a=t("../constants"),u=t("../Grid"),c=t("../log"),p=t("../Move"),l=t("../hh/touchManager");t("../../lib/wgo.js");var f=window.WGo,d=p.zd,g=p.Ma,v=a.Oa,m=a.Na,y=a.EMPTY,b=window.devicePixelRatio||1,w={};w[f.B]=m,w[f.W]=v;var x={};x[y]=null,x[m]=f.B,x[v]=f.W;i.exports=e,e.prototype.create=function(t,i,n,e){var r=n.eb;if(this.Ra=n,!this.fn||this.eb!==r){this.eb=r,e=e||{};var o=e.ln?0:-.23,s={size:r,width:i,section:{top:o,left:o,right:o,bottom:o},coordFontSize:.6};switch(e.background){case"wood":var a=h.ji("wood.jpg");s.background=a.startsWith("file:")?a.substr(5):"data:image/png;base64,"+btoa(a);break;default:s.background="#c75"}t.clear(),this.fn=new f.mn(t.pj(),s),this.jn=!1,this.kn.type=null,e.ln||this.fn.nn(f.mn.on),this.pn()}},e.prototype.pn=function(){var t=this;l.fl(this.fn.qn,function(i,n,e){if("dragCancel"===i)return t.rn(-1,-1);"drag"===i.substr(0,4)&&(e-=65*b);var r=t.sn(n,e);switch(n=r[0],e=r[1],i){case"dragStart":case"drag":return t.rn(n,e);case"dragEnd":if(t.rn(-1,-1),Date.now()-t.tn<300)return;return t.un(n,e);case"tap":return t.un(n,e)}},{gl:!0,Ul:300,hl:500})},e.prototype.vn=function(t){this.wn=x[t]},e.prototype.rn=function(t,i){var n=this.xn(t,i);if(this.jn){if(t===this.cursor.x&&i===this.cursor.y)return;this.fn.yn(this.cursor)}this.jn=n,n&&(this.cursor.x=t,this.cursor.y=i,this.tn=Date.now(),this.fn.zn[t][i][0]?(this.cursor.type="SL",this.cursor.c=void 0):(this.cursor.type=void 0,this.cursor.c=this.wn),this.fn.An(this.cursor))},e.prototype.Bn=function(t,i,n){this.kn.type&&this.fn.yn(this.kn),this.kn.type=t,t&&(this.kn.x=i-1,this.kn.y=this.eb-n,this.fn.An(this.kn))},e.prototype.Cn=function(t,i,n,e){this.fn.An({x:i-1,y:this.eb-n,type:"LB",text:t,scale:e?1.1:.8})},e.prototype.xn=function(t,i){return t>=0&&i>=0&&t<this.eb&&i<this.eb},e.prototype.un=function(t,i){var n=t+1,e=this.eb-i;if(!this.xn(t,i))return this.gn("!"+(n>=1&&n<=this.eb?d(n):e));if(this.Ra.dd(n,e)===y){var r=g(n,e);this.gn(r)}},e.prototype.Dn=function(t){this.gn=t},e.prototype.sn=function(t,i){var n=this.fn;return t=Math.round((t*b-n.left)/n.En),i=Math.round((i*b-n.top)/n.Fn),[t,i]},e.prototype.refresh=function(){var t=!1;"regular"!==this.hn&&(this.hn="regular",t=!0);for(var i=0;i<this.eb;i++)for(var n=0;n<this.eb;n++){var e=this.Ra.dd(n+1,this.eb-i),r=x[e],o=this.fn.zn[n][i][0];t&&(o=null,this.fn.Gn(n,i)),null===r?o&&this.fn.Gn(n,i):o&&o.c===r||(o&&this.fn.Gn(n,i),this.fn.An({x:n,y:i,c:r}))}},e.prototype.show=function(t,i,n){this.refresh(),this.hn=t;for(var e=0;e<this.eb;e++)for(var r=0;r<this.eb;r++){var o=n(i[this.eb-e][r+1]);o&&(o.x=r,o.y=e,this.fn.An(o))}};var k,j,D;e.prototype.Hn=function(t,i,n){k=t,j=i,D=n};var S={In:r,Jn:o,value:s};e.prototype.Kn=function(t,i){var n=S[t];if(!n)return c.error&&c.error("invalid display type: "+t);this.show(t,i,n)},e.prototype.Ln=function(t){this.show("scoring",t,o)}},{"../../lib/wgo.js":88,"../Grid":15,"../Move":19,"../constants":27,"../hh/touchManager":52,"../loaders":54,"../log":55}],62:[function(t,i,n){"use strict";function e(t){this.Jb=t;var i=this.lk=s.Hi(null,"devDlg dialog");i.Hi("dialogTitle").Ri(h("#devMenu"));var n=i.Hi("content");s.sj(n,"resetAllBtn",h("#resetAll"),r).Oi(1.2).Bk=this;var e=i.Hi("btnDiv");s.sj(e,"closeBtn",h("#close"),o).Oi(1.2).Bk=this,u.Ui(i,document.body)}function r(){u.Fk(null,h("#resetAllConfirm"),function(t){t.Jb.ci(),a.vi.ci(),a._f.ci(),c.Yl()},this.Bk)}function o(){u.Yi(this.Bk.lk)}t("./devDlg.less");var s=t("../hh/Dome"),h=t("../hh/getText"),a=t("../loaders"),u=t("../hh/PopupDlg"),c=t("../hh/urlHelper");i.exports=e},{"../hh/Dome":32,"../hh/PopupDlg":38,"../hh/getText":46,"../hh/urlHelper":53,"../loaders":54,"./devDlg.less":75}],63:[function(t,i,n){"use strict";function e(t,i,n,e){this.Mn=i,this.Nn=n,this.On=e,this.Pn=null,this.Qn=null,this.list=t.Hi("gameList")}function r(){this.Un.Vn(this)}t("./gameList.less");var o=t("../GameInVault"),s=t("../hh/tapBehavior");i.exports=e,e.prototype.Rn=function(){return this.Qn},e.prototype.Sn=function(){return this.Pn.text()},e.prototype.Tn=function(t){t.sort(o.Aa),this.list.fj();for(var i=0;i<t.length;i++){var n=t[i],e=this.list.Hi("oneGame").Oi(1);e.Hi("text").Ri(n.wa()),e.G=n.xa(),e.Un=this,s(e,r)}},e.prototype.Vn=function(t){this.Pn&&this.Pn.Ki("selected",!1),t.Ki("selected",!0),this.Pn=t,this.Qn=t.G,this.Nn.call(this.Mn,this.Qn)},e.prototype.Wn=function(){this.Pn&&this.Pn.Ki("selected",!1),this.list.ej()||this.list.Hi("emptyMsg").Ri(this.On),this.Pn=null,this.Qn=null,this.Nn.call(this.Mn,this.Qn)},e.prototype.Xn=function(){this.Pn&&(this.list.removeChild(this.Pn),this.Wn())}},{"../GameInVault":9,"../hh/tapBehavior":50,"./gameList.less":76}],64:[function(t,i,n){"use strict";function e(t){s.emitter(this),this.Yn=t,this.scorer=new f(t.De),this.Zn=new l(this,t.De),this.fn=null,this.$n=0,this._n=!this.ao}t("./ui.less");var r=t("./Board"),o=t("../constants"),s=t("contra"),h=t("../hh/Dome"),a=t("../hh/getText"),u=t("../Move"),c=t("./MoveIndicator"),p=t("../hh/PopupDlg"),l=t("./ReviewUi"),f=t("../ScoreAnalyser"),d=u.La,g=u.Ka,v=o.Oa,m=o.Na;i.exports=e,e.prototype.bo=function(){this.fn.refresh(),this.co&&this.eo()},e.prototype.fo=function(t,i,n,e){var o=this.ho="compact"===t,s=this.io=h.Hi(i,"gameUi");n&&s.Hi(o?"testTitle":"pageTitle").Ri(n),this.jo=s.Hi("board"),e&&(this.ko=s.Hi("boardDesc").gj(e));var a=s.Hi("underBoard");if(this.lo(a),this.mo(a),o)this.no=28*(this.Yn.Ue()+2);else{this.oo();var u=h.bj-10-s.Zi.offsetTop-a.Zi.clientHeight;this.no=Math.min(u,h.aj-15)}this.fn=new r,this.fn.Dn(this.po.bind(this))},e.prototype.lo=function(t){var i=this.qo=t.Hi("statusBar").Oi(1);this.ro=new c(i,1,"lastMove","Last:"),this.so=i.Hi("msgBar"),this.to=new c(i,1,"nextMove","Next:")},e.prototype.uo=function(t){var i=this.Yn.Xe(),n=this.Yn.Gb();if(n.length){var e=g(n[n.length-1]);this.ro.vo(e,1-i,"#"+n.length+":");var r=d(e);r?this.fn.Bn("CR",r[0],r[1]):this.fn.Bn(null)}else this.ro.vo(null);t=this.Yn.Ye()?null:g(t||""),this.to.vo(t,i),this.fn.vn(i)},e.prototype.statusMessage=function(t){t.indexOf("\n")===-1&&(t="\n"+t),this.so.Ri(t)},e.prototype.mo=function(t){var i=this.wo=t.Hi("mainControls"),n=i.Hi("leftDiv"),e=i.Hi("mainDiv"),r=i.Hi("rightDiv");this.ho||this.Zn.xo(n,e,r,1.2),this.controls=h.Hj(),h.sj(e,"bPass",a("#pass"),this.yo.bind(this,"pass")).Oi(1),h.sj(e,"bUndo",a("#undo"),this.zo.bind(this)).Oi(1),h.sj(e,"next",a("#next"),this.Ao.bind(this,1)).Oi(1.2),h.sj(e,"next10",a("#nextN",10),this.Ao.bind(this,10)).Oi(1.2),h.sj(e,"accept",a("#accept"),this.Bo.bind(this)).Oi(1.2).Pi(2),h.sj(e,"refuse",a("#refuse"),this.Co.bind(this)).Oi(1.2).Pi(2),h.sj(e,"newg",a("#newGame"),this.u.bind(this,"backToNewGame")).Oi(1.2).Pi(2),h.sj(r,"bResi",a("#resign"),this.Ze.bind(this)).Oi(.9),h.sj(r,"nextAll",a("#finish"),this.Ao.bind(this)).Oi(.9),this.Do=n.Hi("aiVsAiFlags"),this.Eo=h.Bj(this.Do,"animated",a("#slowAutomatic")),this._n||this.Fo(),h.Ij()},e.prototype.oo=function(){var t=this.Yn.Ye(),i="ENDING"===t,n="ENDED"===t,e=this.Zn.Ge,r=!t&&!e,o=this.Go[m]&&this.Go[v],s=this.ho;s||this.Zn.oo(),this.controls.hj(["accept","refuse"],i&&!e),this.controls.hj(["bUndo","bPass","bResi"],r&&!o),this.controls.hj(["next","next10","nextAll"],r&&o),this.controls.hj(["aiVsAiFlags"],r&&o&&!s),this.controls.hj(["newg"],n&&!e&&!s),this._n||this.Ho(r,e,o,s)},e.prototype.Io=function(t){this.Go=[t[m],t[v]],this._n||this.ao(),this.io||this.fo("main",document.body);var i=this.ho?void 0:{background:"wood"};this.fn.create(this.jo,this.no,this.Yn.Se(),i),this.bo(),this.uo(),this.oo()},e.prototype.Jo=function(){this.Ko=0,this.Lo()||(this.Mo(),this.Yn.Gb().length<=1&&this.statusMessage(a("#gameStarted")))},e.prototype.No=function(){this.Zn.Oo()},e.prototype.Po=function(){this.io&&(h.removeChild(document.body,this.io),this.io=null,this.fn=null)},e.prototype.Qo=function(){return!!this.io},e.prototype.po=function(t){if("!"===t[0])return!this._n&&this.Ro(t.substr(1));var i=this.Zn.Ge;if(i||this.So)return!this._n&&this.So&&this.To(t,null,!0),void(i&&this.Zn.Uo(t));this.Vo||this.Go[this.Yn.Xe()]&&this._n||this.Yn.Ye()||this.yo(t)},e.prototype.Mo=function(){this.Wo=Date.now();var t=this.Yn.Xe();this.Go[t]&&(this.Vo=!0),this.u("nextPlayerTurn",t,void 0)},e.prototype.yo=function(t){var i=this.Yn.Xe(),n=this.Yn.tb(t);if(n)return this.statusMessage(n);this.Vo=!1,this.u("playerMove",i,t),this.Lo()||(this.bo(),this.uo(),this.statusMessage(""),this.Go[m]&&this.Go[v]?this.Xo():this.Mo())},e.prototype.Ao=function(t){this.Ko=t?t-1:1/0,this.Mo()},e.prototype.Xo=function(){if(this.Ko){this.Ko--;var t=this.Eo.oj();window.setTimeout(function(t){t.Mo()},t?500:0,this)}},e.prototype.Lo=function(){switch(this.Yn.Ye()){case"ENDING":return this.Yo(),!0;case"ENDED":return this.dg(),this.Zo(),!0;default:return!1}},e.prototype.dg=function(){var t=this.Yn.Ha();this.$o=this.scorer.gg(),this.$o?this._o=t||this.scorer.eg(this.$o).join("\n"):this._o="Null game"},e.prototype.Yo=function(){this.dg(),this.statusMessage(this._o),this.oo(),this.$o?this.fn.Ln(this.scorer.getScoringGrid()):(this.Yn.Db(m,0),this.Zo())},e.prototype.Bo=function(){var t=this.scorer.cg(this.$o);this.Yn.Db(t>0?m:v,Math.abs(t)),this.Zo()},e.prototype.Co=function(){this.Yn.Eb(),this.statusMessage("Score in dispute. Continue playing..."),this.bo(),this.uo(),this.oo(),this.Go[m]&&this.Go[v]||this.Mo()},e.prototype.Zo=function(){this.statusMessage(this._o),this.oo()},e.prototype.Ze=function(){p.Fk(null,a("#resignConfirm"),function(t){t.Yn.Ze(),t.uo(),t.Lo()},this)},e.prototype.zo=function(){var t=this.Go[m]===this.Go[v]||this.So,i=this.Yn.tb(t?"half_undo":"undo");if(i)return this.statusMessage(i);this.bo(),this.uo()}},{"../Move":19,"../ScoreAnalyser":22,"../constants":27,"../hh/Dome":32,"../hh/PopupDlg":38,"../hh/getText":46,"./Board":61,"./MoveIndicator":66,"./ReviewUi":71,"./ui.less":86,"contra":108}],65:[function(t,i,n){"use strict";function e(t,i){this.Ee=t,this.Dk=i,this.Kk(),s.rk(this.lk)}t("./importDlg.less");var r=t("../hh/Dome"),o=t("../hh/getText"),s=t("../hh/PopupDlg");i.exports=e,e.prototype.Kk=function(){var t=this.lk=r.Hi(null,"importDialog dialog");t.hj(!1),t.Hi("dialogTitle").Ri(o("#importGame"));var i=this.ap=t.Hi("mainDiv");this.loadGame=r.zj(i,"loadGame",o("#fromFile")).setAttribute("type","file").setAttribute("id","fileInput").hj(!1),new r(this.loadGame.Aj,"label","btn fileInputBtn").setAttribute("for","fileInput").Oi(1.2).Hi("btnText").Ri(o("#selectFile")),this.loadGame.p("change",this.bp.bind(this)),r.yj(i),this.ef=r.zj(i,"moves",o("#fromText"),void 0,o("#fromTextHelp"));var n=t.Hi("btnDiv");r.sj(n,"loadBtn",o("#load"),this.bp.bind(this)).Oi(1.2),r.sj(n,"cancelBtn",o("#cancel"),this.cp.bind(this)).Oi(1.2),t.hj(!0),s.Ui(t,document.body)},e.prototype.bp=function(){if(this.loadGame.Lj()){var t=this;this.loadGame.Mj(function(i){t.dp(i)})}else this.dp(this.ef.value())},e.prototype.dp=function(t){if(t){var i=[],n=this.Ee.pc(t,i);if(!n)return new s(null,i.join("\n"));this.Dk({ep:n})&&s.Yi(this.lk)}},e.prototype.cp=function(){s.Yi(this.lk),this.Dk({fp:!0})}},{"../hh/Dome":32,"../hh/PopupDlg":38,"../hh/getText":46,"./importDlg.less":78}],66:[function(t,i,n){"use strict";function e(t,i,n,e){var r=this.Zi=t.Hi("moveIndicator "+n).Pi(i);this.gp=r.Hi("label").Ri(e),r.Hi("stone").Hi("icon"),this.hp=r.Hi("text")}t("./moveIndicator.less");var r=t("../constants"),o=r.Oa,s=r.Na;i.exports=e,e.prototype.vo=function(t,i,n){this.Zi.hj(null!==t),null!==t&&(this.Zi.Ki("black",i===s),this.Zi.Ki("white",i===o),this.hp.Ri(t),n&&this.gp.Ri(n))}},{"../constants":27,"./moveIndicator.less":79}],67:[function(t,i,n){"use strict";function e(t,i){this.Ee=t,this.ip=i,this.jp=!1,this.Kk(),this.Un.Tn(this.Ee.hc()),this.Un.Wn(),h.rk(this.lk)}t("./myArchivedGamesDlg.less");var r=t("../hh/Dome"),o=t("./GameList"),s=t("../hh/getText"),h=t("../hh/PopupDlg");i.exports=e,e.prototype.kp=function(){var t=!!this.Un.Rn();this.lp.kj(t),this.mp.kj(t)},e.prototype.np=function(){var t=this.Un.Rn();if(t){var i=s("#deleteGameConfirm")+"\n\n"+this.Un.Sn();h.Fk(null,i,function(i){i.Ee.kc(t)||console.error("Failed to delete gameId: "+t),i.Un.Xn()},this)}},e.prototype.op=function(){var t=this.Un.Rn();t&&this.Ee.nc(t)&&(this.Un.Xn(),this.jp=!0)},e.prototype.Kk=function(){var t=this.lk=r.Hi(null,"myArchivedGamesDialog dialog");t.hj(!1),t.Hi("dialogTitle").Ri(s("#archivedGames"));var i=this.ap=t.Hi("mainDiv");this.Un=new o(this.ap,this,this.kp,s("#empty")),this.lp=r.sj(i,"delGameBtn",s("#deleteGame"),this.np.bind(this)).Oi(1.2),this.mp=r.sj(i,"restoreGameBtn",s("#restoreGame"),this.op.bind(this)).Oi(1.2);var n=t.Hi("btnDiv");r.sj(n,"closeBtn",s("#close"),this.pp.bind(this)).Oi(1.2),t.hj(!0),h.Ui(t,document.body)},e.prototype.pp=function(){h.Yi(this.lk),this.jp&&this.ip()}},{"../hh/Dome":32,"../hh/PopupDlg":38,"../hh/getText":46,"./GameList":63,"./myArchivedGamesDlg.less":80}],68:[function(t,i,n){"use strict";function e(t,i){this.Ee=t,this.Dk=i,this.result={},this.Kk(),this.Bc(),u.rk(this.lk)}function r(){var t=this.Mn;t.Un.Wn(),t.sp.kj(this.value()>0)}t("./myGamesDlg.less");var o=t("../hh/Dome"),s=t("./GameList"),h=t("../hh/getText"),a=t("./MyArchivedGamesDlg"),u=t("../hh/PopupDlg");i.exports=e,e.prototype.qp=function(){var t=!!this.Un.Rn();this.lp.kj(t),this.rp.kj(t),this.sp.kj(t),t&&this.tp.select(0)},e.prototype.np=function(){var t=this.Un.Rn();if(t){var i=h("#deleteGameConfirm")+"\n\n"+this.Un.Sn();u.Fk(null,i,function(i){i.Ee.ic(t)||console.error("Failed to delete gameId: "+t),i.Un.Xn()},this)}},e.prototype.up=function(){var t=this.Un.Rn();if(t){var i=h("#archiveGameConfirm")+"\n\n"+this.Un.Sn();u.Fk(null,i,function(i){i.Ee.lc(t)&&i.Un.Xn()},this)}},e.prototype.vp=function(){new a(this.Ee,this.Bc.bind(this))},e.prototype.Bc=function(){this.Un.Tn(this.Ee.$b()),this.qp(),this.Un.Wn()},e.prototype.Kk=function(){var t=this.lk=o.Hi(null,"myGamesDialog dialog");t.hj(!1),t.Hi("dialogTitle").Ri(h("#myGames"));var i=this.ap=t.Hi("mainDiv");this.Un=new s(this.ap,this,this.qp,h("#myGamesHelp")),this.lp=o.sj(i,"delGameBtn",h("#deleteGame"),this.np.bind(this)).Oi(1.2),this.rp=o.sj(i,"archiveGameBtn",h("#archiveGame"),this.up.bind(this)).Oi(1.2),this.wp=o.sj(i,"showArchiveBtn",h("#showArchivedGames"),this.vp.bind(this)).Oi(1.2);var n=i.Hi();o.xj(n,"inputLbl",h("#recentGames"));var e=[h("#none")].concat(this.Ee.uc());this.tp=o.Ej(n,"recentGames",e,"byIndex"),this.tp.p("change",r),this.tp.Mn=this;var a=t.Hi("btnDiv");this.sp=o.sj(a,"loadBtn",h("#load"),this.bp.bind(this)).Oi(1.2),o.sj(a,"cancelBtn",h("#cancel"),this.dp.bind(this,!0)).Oi(1.2),t.hj(!0),u.Ui(t,document.body)},e.prototype.bp=function(){var t=this.tp.value();if(t>0)return this.result.ep=this.Ee.Wb(t-1),void this.dp();var i=this.Un.Rn();i&&(this.result.ep=this.Ee.Zb(i),this.dp())},e.prototype.dp=function(t){this.result.fp=!!t,this.Dk(this.result)&&u.Yi(this.lk)}},{"../hh/Dome":32,"../hh/PopupDlg":38,"../hh/getText":46,"./GameList":63,"./MyArchivedGamesDlg":67,"./myGamesDlg.less":81}],69:[function(t,i,n){"use strict";function e(t,i){this.Dk=i,this.xp=t.eb,this.yp=[t.zp,t.Ap],this.Bp=t.Bp,this.Cp=t.Cp,this.Go=[],this.Kk(t),this.Dp(),this.Ep(l),this.Ep(f),c.rk(this.lk)}function r(){}t("./newGameDlg.less");var o=t("../ai"),s=t("../loaders").vi,h=t("../constants"),a=t("../hh/Dome"),u=t("../hh/getText"),c=t("../hh/PopupDlg"),p=t("../hh/Transit"),l=h.Na,f=h.Oa,d=[5,7,9,13,19];i.exports=e,e.prototype.Dp=function(){var t=this.xp;this.Fp.Ri(t+" x "+t),s.gi(this.Gp,t+"x"+t+".png"),this.Gp.li("backgroundSize",Math.ceil(t/19*100)+"%"),this.Hp.kj(t>5),this.Ip.kj(t<19)},e.prototype.Jp=function(t){var i=d.indexOf(this.xp)+t;this.xp=d[i],this.Dp()},e.prototype.Ep=function(t){var i=this.Go[t]=!!o.gh(this.yp[t]);s.gi(this.Kp[t].icon,i?"robot.png":"human.png"),this.Lp[t].uj(this.yp[t])},e.prototype.Mp=function(t){this.Go[t]=!this.Go[t],this.Go[t]?this.yp[t]=this.Cp:this.yp[t]=this.Bp,this.Ep(t)},e.prototype.Np=function(t,i){var n=t.Hi("playerBox"),e=i?"white":"black";this.Kp[i]=a.vj(n,e+" playerBtn",this.Mp.bind(this,i)),(this.Lp[i]=a.sj(n,"playerName",this.yp[i],r).Oi(1)).Op=this},e.prototype.Kk=function(t){this.options=t;var i=this.lk=a.Hi(document.body,"newGameDialog dialog");i.hj(!1),i.Hi("dialogTitle").Ri("Start a new game");var n=i.Hi("mainDiv"),e=n.Hi("centeredDiv").Hi("boardDiv");this.Kp=[],this.Lp=[],this.Np(e,l);var r=this.Pp=e.Hi("sizeBox");this.Ip=a.vj(r,"sizeBtn",this.Jp.bind(this,1)),s.gi(this.Ip.icon,"up.png"),this.Gp=r.Hi("boardImgFrame").Hi("boardImg"),this.Fp=this.Gp.Hi("curSize"),this.Hp=a.vj(r,"sizeBtn",this.Jp.bind(this,-1)),this.Hp.Ki("down",!0),s.gi(this.Hp.icon,"down.png"),this.Np(e,f),this.Qp=a.sj(n,"advancedBtn","More options >>",this.Rp.bind(this)).Oi(1.3);var o=this.Sp=i.Hi("advancedDiv");a.xj(o,"inputLbl","Handicap:"),this.Tp=a.Ej(o,"handicap",[0,2,3,4,5,6,7,8,9],null,t.Tp),a.xj(o,"inputLbl","Komi:"),this.Va=a.Ej(o,"komi",[.5,1.5,2.5,3.5,4.5,5.5,6.5,7.5],null,t.Va);var h=o.Hi("rules");a.xj(h,"inputLbl","Rules:"),this.rules=a.Ej(h,"rules",["Japanese","Chinese"],null,t.rules);var c=a.sj(i,"startBtn",u("#play"),this.Up.bind(this)).Oi(1.3);i.hj(!0);var p=this.Sp.Zi.clientHeight+c.Zi.clientHeight+24;this.Sp.li("marginTop",-p+"px")},e.prototype.Rp=function(){this.Vp?(this.Wp=!this.Wp,this.Vp.ql(200)):(this.Sp.hj(!0),this.Wp=!0,this.Vp=new p(this.Sp).sk("marginTop","0").start(200)),this.Qp.uj("More options"+(this.Wp?" <<":" >>"))},e.prototype.Up=function(){var t=this.options;t.eb=this.xp,t.Tp=~~this.Tp.value(),t.Va=parseFloat(this.Va.value()),t.zp=this.yp[l],t.Ap=this.yp[f],t.rules=this.rules.value(),this.dp()},e.prototype.dp=function(t){if(t)return new c(null,t);this.close(),this.Dk(this.options)},e.prototype.close=function(){a.removeChild(document.body,this.lk)}},{"../ai":26,"../constants":27,"../hh/Dome":32,"../hh/PopupDlg":38,"../hh/Transit":42,"../hh/getText":46,"../loaders":54,"./newGameDlg.less":82}],70:[function(t,i,n){"use strict";function e(t){this.parent=t,this.Xp=null}t("./progressLog.less");var r=t("../hh/NotificationPopup");i.exports=e,e.prototype.start=function(t,i){this.Xp=new r(this.parent,null,{className:"progressLog",mk:!0,pk:!0,title:t}),this.Xp.qk(!1),this.Xp._h(i),this.Xp.show()},e.prototype.stop=function(t,i){t&&this.Xp._h(t,i),this.Xp.qk(!0),this.Xp=null},e.prototype._h=function(t,i){this.Xp._h(t,i)}},{"../hh/NotificationPopup":36,"./progressLog.less":83}],71:[function(t,i,n){"use strict";function e(t,i){this.$l=t,this.ep=i,this.Yn=t.Yn,this.Ge=!1,this.H=null,this.Yp=null,this.Zp=null,this.Oo()}function r(){this.Zn.Uo(this.move)}function o(t){return t?String.fromCharCode(64+t):g}t("./reviewUi.less");var s=t("../loaders").vi,h=t("../constants"),a=t("../hh/ContextMenu"),u=t("../hh/Dome"),c=t("../hh/getText"),p=t("../../config/misc.json"),l=t("../Move"),f=t("../hh/PopupDlg"),d=l.La,g="*";i.exports=e,e.prototype.Oo=function(){this.Ge&&this.$p(),this.Ge=!1,this.H=null,this.bookmarks=[],this._p=this.aq=-1,this.bq=[]},e.prototype.xo=function(t,i,n,e){this.Yp=u.Hj(),this.cq=u.sj(t,"study"," ",this.dq.bind(this)).Oi(e),u.sj(i,"back10","<<",this.eq.bind(this)).Oi(e),u.sj(i,"back1","<",this.fq.bind(this)).Oi(e),u.sj(i,"forw1",">",this.gq.bind(this)).Oi(e),u.sj(i,"forw10",">>",this.hq.bind(this)).Oi(e),this.iq=u.sj(n,"toggleMarkBtn",".",this.jq.bind(this)).Oi(e),this.kq=u.vj(n,"cycleBtn",this.lq.bind(this),".").Oi(e),s.gi(this.kq.icon,"cycle.png"),this.mq=u.vj(null,"delMoveBtn",this.nq.bind(this),"."),s.gi(this.mq.icon,"trash.png"),u.Ij()},e.prototype.oo=function(){this.cq.uj(this.Ge?"...":c("#review")),this.Yp.hj(["back1","back10","forw1","forw10","cycleBtn","toggleMarkBtn"],this.Ge),this.Ge&&this.oq()},e.prototype.dq=function(){if(!this.Ge)return this.pq();var t=new a({Ti:!0});t.Mi(c("#rewindAll"),this.qq.bind(this),{name:"rewind",Ni:"empty.png"}),t.Mi(c("#gotoLastMove"),this.rq.bind(this),{name:"lastReal",Ni:"lastReal.png"}),t.Mi(c("#bookmark"),this.jq.bind(this),{name:"bookmark",Ni:"cycle.png"}),t.Mi(c("#evalScore"),this.sq.bind(this),{name:"scoring",Ni:"scoring.png"}),this.H.Bf()||t.Mi(c("#prune"),this.tq.bind(this),{name:"prune",Ni:"prune.png"}),t.Mi(c("#endStudy"),this.$p.bind(this)),t.Si(this.cq,1,0)},e.prototype.sq=function(){var t=this.$l.vq(h.Na).uq();this.$l.fn.Ln(t[0]),this.Zp.Ri(this.$l.scorer.fg(t[1]).join("\n"))},e.prototype.jq=function(){this._p===-1?this.wq():this.xq()},e.prototype.wq=function(){this._p=this.aq=this.bookmarks.length,this.bookmarks.push(this.H.getBookmark()),this.oq()},e.prototype.xq=function(){this.bookmarks.splice(this._p,1),this._p=-1,this.oq(),this.yq=!0},e.prototype.lq=function(){if(this._p!==-1&&1===this.bookmarks.length)return new f(null,c("#cycleBookmarks"),c("#helpTip"));this._p!==-1||this.yq||this.wq();var t=(this.aq+1)%this.bookmarks.length,i=this.bookmarks[t];this.H.Gf(i),this.ep.hb();for(var n=this.H.Kf(i),e=0;e<n.length;e++)this.ep.tb(n[e]);this.zq()},e.prototype.nq=function(){var t=this.H;!t.Bf()&&t.Uf()&&t.Yf()&&(this.bq.pop(),this.ep.tb("half_undo"),this.zq())},e.prototype.tq=function(){var t=this.H;if(!t.Bf()){for(var i,n;(i=t.zf(),t.Hf())&&(this.ep.tb("half_undo"),!t.Bf())&&!(n=t.pa()););var e=t.Wf(i);if(e<p["confirm-delete-moves"])return this.Aq(i);this.zq();var r=o(n?n.indexOf(i):1),s=t.Af()+2,h=c("#pruneConfirm",r,s+"-"+i,e);f.Fk(null,h,this.Aq.bind(this,i))}},e.prototype.Aq=function(t){var i=this.H.Af()+1;this.H.Xf(t),this.bq.splice(i),this.zq()},e.prototype.pq=function(){this.Ge=!0,this.H=this.Yn.Qe(),this.Zp=this.$l.so,this.$l.oo(),this.zq()},e.prototype.$p=function(){this.Ge=!1,this.Bq(),this.Yn.Re(),this.Cq(),this.$l.bo(),this.$l.uo(),this.$l.oo(),this.$l.Lo()},e.prototype.Uo=function(t){if(!this.ep.tb(t))return this.$l.statusMessage(this.ep.ub().join("\n"));this.H.If(t),this.zq()},e.prototype.fq=function(){this.H.Hf()&&(this.ep.tb("half_undo"),this.zq())},e.prototype.eq=function(){for(var t=this.H,i=t.Vf()-1,n=t.Af();t.Hf()&&(this.ep.tb("half_undo"),!t.pa())&&(--n!==i||!t.Bf()););this.zq()},e.prototype.gq=function(){this.Dq&&(this.H.If(this.Dq),this.ep.tb(this.Dq),this.zq())},e.prototype.hq=function(){for(var t=this.H,i=t.Vf()-1,n=t.Af();this.Dq&&(t.If(this.Dq),this.ep.tb(this.Dq),!t.pa())&&(++n!==i||!t.Bf());)this.Eq();this.zq()},e.prototype.Eq=function(){for(var t=this.H.Lf(),i=!0,n=0;n<t.length;n++)if(t[n]!==this.bq[n]){i=!1;break}i?this.Dq=this.bq[n]:(this.bq=t,this.Dq=null),this.Dq||(this.Dq=this.H.ra())},e.prototype.qq=function(){this.H.oa(),this.ep.hb(),this.zq()},e.prototype.rq=function(){this.Bq(),this.zq()},e.prototype.Bq=function(){for(this.H.oa(),this.ep.hb();;){var t=this.H.qa();if(!t)break;this.ep.tb(t)}},e.prototype.zq=function(){this.$l.bo(),this.Eq();var t=this.H,i=t.zf(),n=t.Uf();this._p=-1;for(var e=0;e<this.bookmarks.length;e++)if(t.Jf(this.bookmarks[e])){this._p=this.aq=e;break}this.Yp.kj(["forw1","forw10"],!!this.Dq),this.Yp.kj(["back1","back10"],!!i),this.oq(),this.Fq(i,n,this.Dq),n&&this.$l.Lo(),this.$l.So&&i&&i.length<=3&&this.$l.Gq(i)},e.prototype.oq=function(){this.yq=!1;var t=this.bookmarks.length>0;this.kq.hj(t),this.iq.hj(t),t&&(this._p!==-1?(this.kq.uj(this._p+1+"/"+this.bookmarks.length),this.iq.uj("Remove")):(this.kq.uj(""),this.iq.uj("Add")))},e.prototype.Cq=function(){this.Zp.fj()},e.prototype.Fq=function(t,i,n){if(this.Zp.fj(),this.$l.uo(n),i)t&&!this.H.Bf()&&(this.mq.cj(this.Zp),this.mq.uj(t));else{var e=this.H.pa();e&&this.Hq(e)}this.Iq()},e.prototype.Hq=function(t){for(var i=0;i<t.length;i++){var n=t[i];if(n){var e=d(n),s=o(i),h=this.H.Wf(n);e?this.$l.fn.Cn(s,e[0],e[1]):s=n;var a=u.sj(this.Zp,"variationBtn",s,r).Pi(1.3);a.Zn=this,a.move=n,h&&a.Hi("btnInfo").Ri(h)}}},e.prototype.Iq=function(){var t=this.H.Mf();if(t&&t.yg){var i=t.yg.replace(/\\\]/g,"]");this.Zp.Hi("moveComment").Ri(i)}}},{"../../config/misc.json":5,"../Move":19,"../constants":27,"../hh/ContextMenu":31,"../hh/Dome":32,"../hh/PopupDlg":38,"../hh/getText":46,"../loaders":54,"./reviewUi.less":84}],72:[function(t,i,n){"use strict";function e(t){this.Jb=t;var i=this.lk=a.Hi(null,"settingDlg dialog"),n=i.Hi("dialogTitle").Ri(c("#settings"));f(n,r),n.Bk=this,this.Jq=0;var e=i.Hi("content"),h=p.yk();a.xj(e,"inputLbl",c("#colorTheme")+":"),a.Ej(e,"theme",h,null,p.vk).p("change",function(){var i=this.value();p.xk(i),t.rc("theme",i)});var u=e.Hi("cloudDiv");a.xj(u,"inputLbl",c("#syncMyGames")+":"),a.sj(u,"dropboxBtn",c("#setupDropbox"),o).Oi(1.2);var d=i.Hi("btnDiv");a.sj(d,"okBtn",c("#ok"),s).Oi(1.2).Bk=this,l.Ui(i,document.body)}function r(){++this.Bk.Jq%4||new h(this.Bk.Jb)}function o(){u.cm()}function s(){l.Yi(this.Bk.lk)}t("./settingDlg.less");var h=t("./DevDlg"),a=t("../hh/Dome"),u=t("../net/DropboxHelper"),c=t("../hh/getText"),p=t("../hh/Painter"),l=t("../hh/PopupDlg"),f=t("../hh/tapBehavior");i.exports=e},{"../hh/Dome":32,"../hh/Painter":37,"../hh/PopupDlg":38,"../hh/getText":46,"../hh/tapBehavior":50,"../net/DropboxHelper":57,"./DevDlg":62,"./settingDlg.less":85}],73:[function(t,i,n){function e(){this.Jb=r,this.Lq=!1,this.Ee=new d(r),this.De=new l,this.Yn=new M(this.De,this.Ee),this.Mq=new f(this.Yn),this.Nq=o,this.Oq=p.bm(r),this.Pq=this.Qq.bind(this),this.Rq()}var r,o,s=t("../ai"),h=t("../../config/colors.json"),a=t("contra"),u=t("../constants"),c=t("../hh/Dome"),p=t("../net/DropboxHelper"),l=t("../GameLogic"),f=t("./GameUi"),d=t("../GameVault"),g=t("../hh/GetFile"),v=t("../hh/getText"),m=t("../net/goSites"),y=t("../hh"),b=t("./ImportDlg"),w=t("../loaders"),x=t("../hh/LocalPref"),k=t("../log"),j=t("../main"),D=t("./MyGamesDlg"),S=t("./NewGameDlg"),G=t("../hh/Painter"),M=t("../PendingGame"),E=t("../hh/PopupDlg"),C=t("./ProgressLog"),q=t("./SettingDlg"),_=t("../net/SyncHelper"),T=t("./UiTopMenu"),B=t("../hh/urlHelper"),A=u.Oa,I=u.Na,O=u.Mh,L=u.Lh
;n.Kq=function(){r=new x("1g0",1),r.Zh(),G.wk(h,r.tc("theme",".neonBlack")),y.init(G),p.am(r)||(document.body.style.height=c.bj+"px",o=new C(document.body),o.start("Loading assets"),w.init("1g0",o,function(){o.stop(),new e}))},e.prototype.Rq=function(){c.Jj(j.appName+(this._n?"":" dev")),window.addEventListener("beforeunload",this.Sq.bind(this,"unloading")),window.addEventListener("visibilitychange",this.Sq.bind(this,"visibility")),window.setInterval(this.Sq.bind(this,"autosave"),3e5),this.$n=r.tc("newGameIndex",1),this.Tq=r.tc("newGameSize",9),this.Uq=r.tc("newGameKomi",5.5),this.Vq=r.tc("newGameHandCount",0),this.Wq=r.tc("newGameRules","Japanese"),this.Xq=r.tc("newGameNameB","Chuckie"),this.Yq=r.tc("newGameNameW","You"),this.Zq=new T(this.$q.bind(this)),this.Zq._q(!!this.Oq),this.Mq.p("backToNewGame",this.ar.bind(this)),this.Mq.p("nextPlayerTurn",this.br.bind(this)),this.Mq.p("playerMove",this.cr.bind(this));var t=this.Yn.sc();if(!t||!this.dr(t)){var i=B.Vl(window.location.hash),n=i["site"],e=i["loadGame"];if(n&&e)return this.er({site:n,id:e,gr:!0});this.hr()}},e.prototype.Sq=function(t){("visibility"!==t?document.hidden:!document.hidden)||(this.Lq&&this.Yn.qc(),r.rc("newGameIndex",this.$n),r.Zj())},e.prototype.$q=function(t){switch(t){case"newGame":this.ar();break;case"myGames":this.ir(this.jr);break;case"importGame":this.ir(this.kr);break;case"exportGame":this.lr();break;case"syncGame":this.mr();break;case"syncMyGames":this.ir(this.nr);break;case"settings":new q(r);break;case"downloadLatest":this.er(this.Zq.or)}},e.prototype.pr=function(){this.Zq._q(!!this.Oq),this.Mq.Po()},e.prototype.qr=function(){this.Mq.Qo()||this.Op||this.hr()},e.prototype.ar=function(){this.ir(this.hr)},e.prototype.hr=function(){if(!this.Op){this.rr();var t={eb:this.Tq,Tp:this.Vq,Va:this.Uq,zp:this.Xq,Ap:this.Yq,Bp:"You",Cp:s.mh()||"Chuckie",rules:this.Wq},i=this;this.Op=new S(t,function(t){return i.Tq=r.rc("newGameSize",t.eb),i.Vq=r.rc("newGameHandCount",t.Tp),i.Uq=r.rc("newGameKomi",t.Va),i.Wq=r.rc("newGameRules",t.rules),i.Xq=r.rc("newGameNameB",t.zp),i.Yq=r.rc("newGameNameW",t.Ap),i.sr(),i.Op=null,!0})}},e.prototype.jr=function(){this.rr();var t=this;new D(this.Ee,function(i){return i.fp?(t.qr(),!0):t.dr(i.ep)})},e.prototype.kr=function(){this.rr();var t=this;new b(this.Ee,function(i){return i.fp?(t.qr(),!0):t.dr(i.ep)})},e.prototype.tr=function(){this.Lq&&(this.Yn.Sb(),this.Mq.No(),this.Lq=!1)},e.prototype.ir=function(t){if(!this.Lq)return t&&t.call(this);var i=this.Yn.Me(),n=this.Yn.Sb();return this.Mq.No(),this.Lq=!1,i?t&&t.call(this):this.ur(n,t)},e.prototype.ur=function(t,i){var n=this;new E(null,v("#confirmSave"),v("#confirmTitle"),{buttons:[v("#yes"),v("#no")]},function(e){0!==e.Ck&&n.Yn.Ne(t),i&&i.call(n)})},e.prototype.rr=function(){this.ir(),this.pr()},e.prototype.dr=function(t){var i=[];if(!this.Yn.Ke(t,i))return new E(null,i.join("\n")),this.pr(),!1;this.Op&&(this.Op=this.Op.close());var n=this.Yn.fa(),e=n.Ea("playerBlack"),r=n.Ea("playerWhite");return this.vr(e,r),!0},e.prototype.sr=function(){this.Yn.He(this.Tq,this.Vq,this.Uq,this.Wq),this.Yn.Pe("source",j.appName),this.Yn.Pe("event",this.$n++),this.vr(this.Xq,this.Yq)},e.prototype.vr=function(t,i){this.Go=[!1,!1],this.wr=[];var n=this;a.di([I,A],function(e,r){var o=e===I?t:i;n.Go[e]=s.gh(o)?O:L;var h=e===I?"playerBlack":"playerWhite";n.Yn.Pe(h,o),n.Go[e]?s.hh(o,function(t,i){if(t)return r(t);r(n.xr(o,i,e))}):r()},function(t){if(t)return new E(null,t);n.yr()})},e.prototype.xr=function(t,i,n){for(var e=this.Yn.fa(),r=this.Yn.Te(),o=[],s=0;s<r.length;s++){var h=r[s];o.push([h.wd,h.xd,h.color])}var a={"areaScoring":this.Yn.Ve(),"positionalSuperko":this.Yn.We()};try{(this.wr[n]=new i)["prepareGame"](n,e.Ea("boardSize"),e.Ea("komi"),a,o)}catch(i){return"Problem with "+t+": "+i.message}},e.prototype.yr=function(){this.Mq.Io(this.Go),this.Lq=!0,this.Mq.Jo(),this.Zq.zr(this.Yn.fa(),!!this.Oq)},e.prototype.vq=function(t){return this.wr[t]},e.prototype.br=function(t,i){if(this.Go[t])if(this.wr[t].Ar)this.wr[t].Ar(i,this.Pq);else{var n=this.wr[t].Br();this.Pq(n)}},e.prototype.Qq=function(t){this.Mq.yo(t)},e.prototype.cr=function(t,i){for(var n=I;n<=A;n++)this.Go[n]&&this.wr[n].Cr(t,i)},e.prototype.lr=function(){var t=this.Yn.Oe();c.ai(t.F,t.id+".sgf")},e.prototype.er=function(t){this.Nq.start(v("#getLatestGame"),v("#retrieving",t.site,t.id));var i=m.$m(t.site,t.id),n=this;g.ai(i,function(i,e){if(i)return n.Nq.stop(i,k.ERROR);var r=[];n.tr();var o=n.Yn.pc(e,r);if(!o)return n.Nq.stop(r.join("\n"),k.ERROR);n.dr(o),n.Nq.stop(v("#retrieved")),t.gr&&B.Yl()})},e.prototype.Dr=function(t){if(this.Er)return t(null,this.Er);var i=new _(r,this.Oq,this.Ee,this.Nq._h.bind(this.Nq)),n=this;i.connect(function(e){if(e)return t(e);n.Er=i,t(null,i)})},e.prototype.mr=function(){this.Nq.start(v("#syncGame"),v("#syncStart"));var t=this;this.Dr(function(i,n){if(i)return t.Nq.stop();var e=t.Ee.Tb();t.tr(),n.Sm(e,function(i){i||t.dr(e),t.Nq.stop()})})},e.prototype.nr=function(){this.hr(),this.Nq.start(v("#syncMyGames"),v("#syncStart"));var t=this;this.Dr(function(i,n){if(i)return t.Nq.stop();n.Tm(function(){t.Nq.stop()})})}},{"../../config/colors.json":4,"../GameLogic":11,"../GameVault":12,"../PendingGame":20,"../ai":26,"../constants":27,"../hh":47,"../hh/Dome":32,"../hh/GetFile":33,"../hh/LocalPref":34,"../hh/Painter":37,"../hh/PopupDlg":38,"../hh/getText":46,"../hh/urlHelper":53,"../loaders":54,"../log":55,"../main":56,"../net/DropboxHelper":57,"../net/SyncHelper":58,"../net/goSites":59,"./GameUi":64,"./ImportDlg":65,"./MyGamesDlg":68,"./NewGameDlg":69,"./ProgressLog":70,"./SettingDlg":72,"./UiTopMenu":74,"contra":108}],74:[function(t,i,n){"use strict";function e(t){this.Fr(t)}function r(t,i){return i?t+i:""}t("./uiTopMenu.less");var o=t("../hh/Dome"),s=t("../hh/getText"),h=t("../net/goSites"),a=t("../main"),u=t("../hh/TopMenu");i.exports=e,e.prototype.Fr=function(t){var i=this.Qk=new u({Ik:t,Yk:a.appName+" V"+a.appVersion});i.Tk("settings",s("#settings"),"settings.png"),i.Rk(),i.Tk("myGames",s("#myGames"),"myGames.png"),i.Tk("newGame",s("#newGame"),"robot.png"),i.Tk("importGame",s("#importGame"),"import.png"),this.Gr=i.Tk("syncMyGames",s("#syncMyGames"),"cloudSync.png"),i.Rk(),this.Hr=i.Mi(o.Hi(null,"gameInfo")),this.Ir=i.Tk("downloadLatest","","refresh.png"),this.Jr=i.Tk("syncGame",s("#syncGame")),this.Kr=i.Tk("exportGame",s("#exportGame")),i.Rk()},e.prototype._q=function(t){this.Qk.Ok(s("#appTitle")),this.Jr.hj(!1),this.Gr.hj(t),this.Hr.Ri(""),this.Ir.hj(!1),this.Kr.hj(!1)},e.prototype.zr=function(t,i){this.Qk.Ok(t.Ea("playerWhite")+" VS "+t.Ea("playerBlack")+" (B)");var n="komi: "+(t.Ea("komi")||0);n+=r(", hand: ",t.Ea("handicap")),n+=r(", rules: ",t.Ea("rules")),n+=r(", date: ",t.Ea("date")),n+=r(", source: ",t.Ea("source")),n+=r(", event: ",t.Ea("event")),n+=r(", place: ",t.Ea("place")),n+=r(", result: ",t.Ea("result")),this.Hr.Ri(n),this.Jr.hj(i);var e=this.or=h.Zm(t);e&&this.Ir.Ri(s("#downloadLatest",e.site)),this.Ir.hj(!!e),this.Kr.hj(!0)}},{"../hh/Dome":32,"../hh/TopMenu":40,"../hh/getText":46,"../main":56,"../net/goSites":59,"./uiTopMenu.less":87}],75:[function(t,i,n){var e=".devDlg {\n  z-index: 2000;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  width: 60%;\n}\n.devDlg .content {\n  padding: 1rem;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.devDlg .content .cloudDiv {\n  margin-top: 1rem;\n}\n.devDlg .content .dropboxBtn {\n  display: inline-block;\n  margin: -1rem 0 0 0.5rem;\n  padding: 1rem;\n}\n.devDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n  text-align: right;\n}\n.devDlg .btnDiv .closeBtn {\n  min-width: 20%;\n}\n";t("lessify")(e),i.exports=e},{"lessify":125}],76:[function(t,i,n){var e=".gameList {\n  position: relative;\n  border: 1px solid #a9a9a9;\n  border-radius: 6px;\n  max-height: 20rem;\n  min-height: 9rem;\n  overflow-y: auto;\n  overflow-x: hidden;\n  background-color: #fff;\n  font-size: 1.2rem;\n}\n.gameList .oneGame {\n  position: relative;\n  padding: 5px;\n}\n.gameList .oneGame .text {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  position: absolute;\n}\n.gameList .oneGame.selected {\n  background-color: #b7b29e;\n  border-radius: 5px;\n}\n.gameList .emptyMsg {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  position: absolute;\n  width: 100%;\n  text-align: center;\n  font-style: italic;\n  opacity: 0.7;\n}\n";t("lessify")(e),i.exports=e},{"lessify":125}],77:[function(t,i,n){"use strict";t("./UiMain").Kq()},{"./UiMain":73}],78:[function(t,i,n){var e=".importDialog {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  top: 45%;\n}\n.importDialog .mainDiv .loadGameDiv {\n  display: inline-block;\n  margin: 1rem 0;\n}\n.importDialog .mainDiv .fileInputBtn {\n  vertical-align: middle;\n  min-width: 6rem;\n}\n.importDialog .mainDiv .movesInput {\n  width: 30%;\n}\n.importDialog .mainDiv .movesDesc {\n  max-width: 25%;\n}\n.importDialog .btnDiv {\n  display: inline-block;\n  width: 100%;\n}\n.importDialog .btnDiv .loadBtn,\n.importDialog .btnDiv .cancelBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  min-width: 20%;\n}\n";t("lessify")(e),i.exports=e},{"lessify":125}],79:[function(t,i,n){var e=".moveIndicator {\n  position: relative;\n  height: 100%;\n  text-align: center;\n  padding: 1px 0 0 1px;\n}\n.moveIndicator.black .icon {\n  background-color: #000;\n}\n.moveIndicator.black .text {\n  color: #fff;\n  text-shadow: 0 0 3px #000;\n}\n.moveIndicator.white .icon {\n  background-color: #fff;\n}\n.moveIndicator.white .text {\n  color: #000;\n  text-shadow: 0 0 3px #fff;\n}\n.moveIndicator .label {\n  position: relative;\n  width: 100%;\n  font-size: 0.8rem;\n  line-height: 0.8rem;\n}\n.moveIndicator .stone {\n  width: calc(100% - 0.8rem);\n  height: calc(100% - 0.8rem);\n}\n.moveIndicator .icon {\n  position: relative;\n  left: 0.4rem;\n  top: -1px;\n  width: 100%;\n  height: 100%;\n  border: 1px solid rgba(0, 0, 0, 0.4);\n  border-radius: 50%;\n}\n.moveIndicator .text {\n  position: absolute;\n  width: 100%;\n  top: calc(0.4rem + 50% - 0.5em);\n  line-height: 1em;\n  font-size: 1em;\n  font-weight: bold;\n}\n";t("lessify")(e),i.exports=e},{"lessify":125}],80:[function(t,i,n){var e=".myArchivedGamesDialog {\n  margin: 0 65px;\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.myArchivedGamesDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.myArchivedGamesDialog .delGameBtn,\n.myArchivedGamesDialog .restoreGameBtn {\n  vertical-align: top;\n  margin: 20px 12px 20px 0;\n  min-width: 20%;\n}\n.myArchivedGamesDialog .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.myArchivedGamesDialog .btnDiv .closeBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  width: 20%;\n  font-size: 1.5rem;\n}\n";t("lessify")(e),i.exports=e},{"lessify":125}],81:[function(t,i,n){var e=".myGamesDialog {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.myGamesDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.myGamesDialog .mainDiv .recentGamesDropDwn {\n  max-width: calc(100% - 230px);\n  margin: 0 0 0.5rem 0;\n}\n.myGamesDialog .delGameBtn,\n.myGamesDialog .archiveGameBtn,\n.myGamesDialog .showArchiveBtn {\n  vertical-align: top;\n  margin: 1rem 0.7rem 1rem 0;\n  min-width: 20%;\n}\n.myGamesDialog .btnDiv {\n  width: 100%;\n  display: inline-block;\n}\n.myGamesDialog .btnDiv .loadBtn,\n.myGamesDialog .btnDiv .cancelBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  width: 20%;\n  font-size: 1.5rem;\n}\n";t("lessify")(e),i.exports=e},{"lessify":125}],82:[function(t,i,n){var e=".newGameDialog {\n  margin-top: 2rem;\n}\n.newGameDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.newGameDialog .mainDiv .centeredDiv {\n  margin-top: 20px;\n  text-align: center;\n}\n.newGameDialog .boardDiv .sizeBox {\n  display: inline-block;\n  position: relative;\n  width: 240px;\n  max-width: 33%;\n  text-align: center;\n  margin: 10px 18px 0 20px;\n}\n.newGameDialog .playerBox {\n  display: inline-block;\n  position: relative;\n  vertical-align: top;\n  top: 144px;\n  left: 2px;\n  width: 200px;\n  max-width: 23%;\n  height: 150px;\n  max-height: initial;\n}\n.newGameDialog .playerBtn {\n  width: 100%;\n  height: 100%;\n}\n.newGameDialog .playerBtn .playerBtnIcon {\n  -webkit-filter: brightness(0);\n  filter: brightness(0);\n  background-size: contain;\n}\n.newGameDialog .playerBtn.white .playerBtnIcon {\n  -webkit-filter: invert(1) grayscale(1);\n  filter: invert(1) grayscale(1);\n}\n.newGameDialog .playerName {\n  margin-top: 4px;\n  width: 100%;\n}\n.newGameDialog .sizeBtn {\n  position: relative;\n  width: 170px;\n  max-width: 88%;\n  height: 100px;\n  max-height: initial;\n  margin: 0 0 10px;\n}\n.newGameDialog .sizeBtn .sizeBtnIcon {\n  background-size: 80%;\n  -webkit-filter: brightness(0);\n  filter: brightness(0);\n}\n.newGameDialog .sizeBtn.down {\n  margin-top: 4px;\n}\n.newGameDialog .boardImgFrame {\n  display: inline-block;\n  position: relative;\n  width: 91%;\n  height: 195px;\n  background-color: #d1cac1;\n  border-radius: 5px;\n  box-shadow: black 3px 3px 6px;\n}\n.newGameDialog .boardImgFrame .boardImg {\n  width: 100%;\n  height: 100%;\n  background-position: 50%;\n  background-repeat: no-repeat;\n}\n.newGameDialog .boardImgFrame .curSize {\n  position: absolute;\n  top: -4px;\n  width: 100%;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  cursor: default;\n  text-align: center;\n  color: white;\n  font-size: 2.5rem;\n  text-shadow: 3px 3px 5px #000;\n}\n.newGameDialog .advancedBtn {\n  width: 25%;\n  margin: 20px 10px 7px;\n}\n.newGameDialog .advancedDiv .rules {\n  display: inline-block;\n  margin-left: 87px;\n}\n.newGameDialog .advancedDiv .defAiInfo {\n  font-size: 0.8rem;\n  font-style: italic;\n  width: 400px;\n  display: inline-block;\n}\n.newGameDialog .startBtn {\n  margin: 16px 0 10px -5px;\n  position: relative;\n  left: 75%;\n  width: 25%;\n  font-size: 1.5rem;\n}\n";t("lessify")(e),i.exports=e},{"lessify":125}],83:[function(t,i,n){var e=".notifPopup.progressLog {\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  margin: 0 auto;\n  width: 95%;\n  max-width: 800px;\n  border: 1px solid rgba(255, 255, 255, 0.33);\n}\n.notifPopup.progressLog .content {\n  font-size: 1.2rem;\n}\n";t("lessify")(e),i.exports=e},{"lessify":125}],84:[function(t,i,n){var e=".gameUi .btnIcon {\n  -webkit-filter: sepia(1) brightness(7);\n  filter: sepia(1) brightness(7);\n}\n.gameUi .statusBar .btn {\n  margin: 1px;\n  height: calc(100% - 2px);\n}\n.gameUi .statusBar .delMoveBtn {\n  float: left;\n}\n.gameUi .statusBar .delMoveBtn .btnText {\n  top: 59%;\n  color: #000;\n  text-shadow: 0 0 3px #fff;\n}\n.gameUi .statusBar .variationBtn {\n  margin-right: 0.2rem;\n}\n.gameUi .statusBar .variationBtn .btnInfo {\n  position: absolute;\n  right: 5px;\n  bottom: 1px;\n  color: #aaa;\n}\n.gameUi .statusBar .moveComment {\n  margin-top: 2px;\n  background-color: white;\n  color: black;\n  border-radius: 5px;\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  padding: 2px 4px;\n  white-space: pre-wrap;\n  text-align: left;\n  font-size: 1rem;\n  font-weight: normal;\n}\n.gameUi .mainControls .btn.back10,\n.gameUi .mainControls .btn.back1,\n.gameUi .mainControls .btn.forw1,\n.gameUi .mainControls .btn.forw10 {\n  max-width: 22%;\n}\n.gameUi .mainControls .btn.cycleBtn {\n  margin: 0 0 0.3rem 0.3rem;\n  max-width: calc(50% - 5px);\n}\n.gameUi .mainControls .btn.cycleBtn .btnText {\n  left: 4px;\n  color: #fff;\n}\nbody .contextMenu {\n  border: 1px solid #58636d;\n  background-color: #3b3d47;\n}\nbody .contextMenu .menuItem {\n  padding-right: 20px;\n  background-color: #000;\n  border: 1px solid #505050;\n}\nbody .contextMenu .menuItem .icon {\n  -webkit-filter: grayscale(1) brightness(7);\n  filter: grayscale(1) brightness(7);\n}\nbody .contextMenu .menuItem.scoring .icon {\n  -webkit-filter: brightness(0.8);\n  filter: brightness(0.8);\n}\n";t("lessify")(e),i.exports=e},{"lessify":125}],85:[function(t,i,n){var e=".settingDlg {\n  z-index: 2000;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  width: 60%;\n}\n.settingDlg .content {\n  padding: 1rem;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.settingDlg .content .cloudDiv {\n  margin-top: 1rem;\n}\n.settingDlg .content .dropboxBtn {\n  display: inline-block;\n  margin: -1rem 0 0 0.5rem;\n  padding: 1rem;\n}\n.settingDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n  text-align: right;\n}\n.settingDlg .btnDiv .okBtn {\n  min-width: 20%;\n}\n";t("lessify")(e),i.exports=e},{"lessify":125}],86:[function(t,i,n){var e=".gameUi {\n  padding: 2px;\n}\n.gameUi .board {\n  margin: 5px 0;\n  background-color: #402f23;\n  border-radius: 7px;\n}\n.gameUi .board .wgo-board {\n  margin: 0 auto;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  /* disables grey shade on long-tap for Safari */\n  /* Below avoid issues when tap-hold on Android */\n  -webkit-user-select: none;\n  -webkit-touch-callout: none;\n}\n.gameUi .boardDesc {\n  margin-top: 3px;\n  font-weight: bold;\n  font-style: italic;\n}\n.gameUi .underBoard {\n  padding-bottom: 5px;\n}\n.gameUi .statusBar {\n  position: relative;\n  box-sizing: content-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: row;\n  flex-direction: row;\n  background-color: #dfc2ac;\n  border: rgba(0, 0, 0, 0.7) 1px solid;\n  border-radius: 7px;\n}\n.gameUi .statusBar .msgBar {\n  -webkit-flex: 1;\n  flex: 1;\n  height: 100%;\n  white-space: pre-wrap;\n  overflow-y: auto;\n  font-size: 1rem;\n  font-weight: bold;\n  text-align: center;\n}\n.gameUi .mainControls {\n  margin-top: 10px;\n}\n.gameUi .mainControls .mainDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 50%;\n  text-align: center;\n}\n.gameUi .mainControls .mainDiv .btn {\n  margin: 0 3px;\n  max-width: 45%;\n}\n.gameUi .mainControls .leftDiv,\n.gameUi .mainControls .rightDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 25%;\n}\n.gameUi .mainControls .leftDiv .btn,\n.gameUi .mainControls .rightDiv .btn {\n  background-color: #5c4137;\n  color: #faebd7;\n  max-width: 48%;\n}\n.gameUi .mainControls .leftDiv {\n  text-align: left;\n}\n.gameUi .mainControls .leftDiv .animatedDiv {\n  margin: 16px;\n}\n.gameUi .mainControls .rightDiv {\n  text-align: right;\n}\n";t("lessify")(e),i.exports=e},{"lessify":125}],87:[function(t,i,n){var e=".topMenu .menuOption .icon {\n  -webkit-filter: invert(0.6) grayscale(1);\n  filter: invert(0.6) grayscale(1);\n}\n.topMenu .menuOption.myGames .icon {\n  background-size: auto 45%;\n}\n.topMenu .menuOption.newGame .icon {\n  background-position-y: 0;\n}\n.topMenu .gameInfo {\n  padding: 1rem;\n  font-size: 1.3rem;\n  background-color: #282a2b;\n}\n";t("lessify")(e),i.exports=e},{"lessify":125}],88:[function(t,i,n){!function(t,i){"use strict";var n=document.getElementsByTagName("script"),e=n[n.length-1].src.split("?")[0],r=e.split("/").slice(0,-1).join("/")+"/",o={version:"2.3.1",B:1,W:-1,Lr:!0,Mr:r,lang:"en",Nr:{Or:{}}};o.opera=navigator.userAgent.search(/(opera)(?:.*version)?[ \/]([\w.]+)/i)!=-1,o.Pr=navigator.userAgent.search(/(webkit)[ \/]([\w.]+)/i)!=-1,o.Qr=navigator.userAgent.search(/(msie) ([\w.]+)/i)!=-1,o.Rr=navigator.userAgent.search(/(mozilla)(?:.*? rv:([\w.]+))?/i)!=-1&&!o.Pr&&!o.Qr,o.Sr=function(t){var i=o.Nr[o.lang][t]||o.Nr.Or[t];if(i){for(var n=1;n<arguments.length;n++)i=i.replace("$",arguments[n]);return i}return t},o.Tr=function(t,i){return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.super=t,i},o.Ur=function(){throw Error("unimplemented abstract method")},o.clone=function(t){if(t&&"object"==typeof t){var i=t.constructor==Array?[]:{};for(var n in t)t[n]==t?i[n]=t:i[n]=o.clone(t[n]);return i}return t},o.Vr=function(t){return t&&"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t};var s=function(i,n){var n=n||{};for(var e in n)this[e]=n[e];for(var e in o.mn.default)void 0===this[e]&&(this[e]=o.mn.default[e]);for(var e in s.tk.default)void 0===this.uk[e]&&(this.uk[e]=s.tk.default[e]);this.Wr=this.section.left,this.Xr=this.section.top,this.Yr=this.size-1-this.section.right,this.Zr=this.size-1-this.section.bottom,this.init(),i.appendChild(this.qn),this.$r=t.devicePixelRatio||1,this.width&&this.height?this._r(this.width,this.height):this.width?this.Pi(this.width):this.height&&this.Oi(this.height)};s.tk={},s.tk.as={shadowColor:"rgba(32,32,32,0.5)",shadowTransparentColor:"rgba(32,32,32,0)",shadowBlur:0,shadowSize:function(t){return t.shadowSize},markupBlackColor:"rgba(255,255,255,0.8)",markupWhiteColor:"rgba(0,0,0,0.8)",markupNoneColor:"rgba(0,0,0,0.8)",markupLinesWidth:function(t){return t.bs?t.cs/7:t.lineWidth},gridLinesWidth:1,gridLinesColor:function(t){return"rgba(0,0,0,"+Math.min(1,t.cs/15)+")"},starColor:"#000",starSize:function(t){return t.starSize*(t.width/300+1)},stoneSize:function(t){return t.stoneSize*Math.min(t.En,t.Fn)/2},coordinatesColor:"rgba(0,0,0,0.7)",font:function(t){return t.font},linesShift:.5},s.tk.default={shadowColor:"rgba(62,32,32,0.5)",shadowTransparentColor:"rgba(62,32,32,0)",shadowBlur:function(t){return.1*t.cs},shadowSize:1,markupBlackColor:"rgba(255,255,255,0.9)",markupWhiteColor:"rgba(0,0,0,0.7)",markupNoneColor:"rgba(0,0,0,0.7)",markupLinesWidth:function(t){return t.cs/8},gridLinesWidth:function(t){return t.cs/15},gridLinesColor:"#654525",starColor:"#531",starSize:function(t){return t.cs/8+1},stoneSize:function(t){return Math.min(t.En,t.Fn)/2},coordinatesColor:"#531",ds:"rgba(0,32,128,0.8)",font:"calibri",linesShift:.25};var h,a=function(t,i){return"function"==typeof i.uk[t]?i.uk[t](i):i.uk[t]},u={es:function(t,i){var n=i.gs(t.x),e=i.hs(t.y),r=i.cs;this.beginPath();var o=a("shadowBlur",i),s=Math.max(0,r-.5),h=this.createRadialGradient(n-i.js,e-i.js,s-1-o,n-i.js,e-i.js,s+o);h.addColorStop(0,a("shadowColor",i)),h.addColorStop(1,a("shadowTransparentColor",i)),this.fillStyle=h,this.arc(n-i.js,e-i.js,s+o,0,2*Math.PI,!0),this.fill()},clear:function(t,i){var n=i.gs(t.x),e=i.hs(t.y),r=i.cs;this.clearRect(n-1.1*r-i.js,e-1.1*r-i.js,2.2*r,2.2*r)}},c=function(t,i,n){return t.zn[i][n][0].c==o.B?a("markupBlackColor",t):t.zn[i][n][0].c==o.W?a("markupWhiteColor",t):a("markupNoneColor",t)},p=function(t,i,n){return t.zn[i][n][0]&&t.zn[i][n][0].c==o.W||t.zn[i][n][0].c==o.B},l=function(t,i){var n;t[i].clear(),t[i].es(t);for(var e=0;e<t.size;e++)for(var r=0;r<t.size;r++)for(var o=0;o<t.zn[e][r].length;o++){var h=t.zn[e][r][o];n=h.type?"string"==typeof h.type?s.ls[h.type]:h.type:t.ks,n[i]&&n[i].es.call(t[i].getContext(h),h,t)}for(var a=0;a<t.ms.length;a++){var h=t.ms[a],n=h.Ik;n[i]&&n[i].es.call(t[i].getContext(h.ns),h.ns,t)}},f=function(t,i,n,e,r,o,s,h){t.strokeStyle="rgba(64,64,64,0.2)",t.lineWidth=e/30*h,t.beginPath(),e-=Math.max(1,t.lineWidth);var a,u,i,c,p,l=i+e*Math.cos(r*Math.PI),f=n+e*Math.sin(r*Math.PI),d=i+e*Math.cos(o*Math.PI),g=n+e*Math.sin(o*Math.PI);d>l?(a=(g-f)/(d-l),u=Math.atan(a)):d==l?u=Math.PI/2:(a=(g-f)/(d-l),u=Math.atan(a)-Math.PI);var v=s*e;c=Math.sin(u)*v,p=Math.cos(u)*v;var m=l+c,y=f-p,b=d+c,w=g-p;t.moveTo(l,f),t.bezierCurveTo(m,y,b,w,d,g),t.stroke()},d=function(t){for(var i=t.angle,n=t.angle,e=0;e<t.os.length;e++)i+=t.os[e],n-=t.os[e],f(t.ps,t.x,t.y,t.qs,i,n,t.rs,t.ss)};s.ls={ts:{us:{es:function(t,i){var n,e=i.gs(t.x),r=i.hs(t.y),s=i.cs;t.c==o.W?(n=this.createRadialGradient(e-2*s/5,r-2*s/5,s/3,e-s/5,r-s/5,5*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#aaa")):(n=this.createRadialGradient(e-2*s/5,r-2*s/5,1,e-s/5,r-s/5,4*s/5),n.addColorStop(0,"#666"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(e-i.js,r-i.js,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill()}},vs:u},ws:{us:{es:function(t,i){var n,e=i.gs(t.x),r=i.hs(t.y),s=i.cs;t.c==o.W?(n=this.createRadialGradient(e-2*s/5,r-2*s/5,2,e-s/5,r-s/5,4*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#ddd")):(n=this.createRadialGradient(e-2*s/5,r-2*s/5,1,e-s/5,r-s/5,4*s/5),n.addColorStop(0,"#111"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(e-i.js,r-i.js,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill(),this.beginPath(),this.lineWidth=s/6,t.c==o.W?(this.strokeStyle="#999",this.arc(e+s/8,r+s/8,s/2,0,Math.PI/2,!1)):(this.strokeStyle="#ccc",this.arc(e-s/8,r-s/8,s/2,Math.PI,1.5*Math.PI)),this.stroke()}},vs:u},xs:{us:{es:function(t,i){var n,e=i.gs(t.x),r=i.hs(t.y),s=i.cs;t.c==o.W?(n=this.createRadialGradient(e-2*s/5,r-2*s/5,s/3,e-s/5,r-s/5,8*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#666")):(n=this.createRadialGradient(e-2*s/5,r-2*s/5,1,e-s/5,r-s/5,3*s/5),n.addColorStop(0,"#555"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(e-i.js,r-i.js,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill()}},vs:u},ys:{us:{es:function(t,i){var n,e,r=i.cs;h=h||Math.ceil(9999999*Math.random()),n=i.gs(t.x),e=i.hs(t.y);var s;if(s=t.c==o.W?"#aaa":"#000",this.beginPath(),this.fillStyle=s,this.arc(n-i.js,e-i.js,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill(),t.c==o.W){var a=h%(3+t.x*i.size+t.y)%3,u=i.size*i.size+t.x*i.size+t.y,c=2/u*(h%u);d(0==a?{ps:this,x:n,y:e,qs:r,angle:c,os:[.1,.12,.11,.1,.09,.09,.09,.09],rs:.25,ss:1.75}:1==a?{ps:this,x:n,y:e,qs:r,angle:c,os:[.1,.09,.08,.07,.06,.06,.06,.06,.06,.06,.06],rs:.2,ss:1.5}:{ps:this,x:n,y:e,qs:r,angle:c,os:[.12,.14,.13,.12,.12,.12],rs:.3,ss:2}),s=this.createRadialGradient(n-2*r/5,e-2*r/5,r/3,n-r/5,e-r/5,5*r/5),s.addColorStop(0,"rgba(255,255,255,0.9)"),s.addColorStop(1,"rgba(255,255,255,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.js,e-i.js,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill()}else s=this.createRadialGradient(n+.4*r,e+.4*r,0,n+.5*r,e+.5*r,r),s.addColorStop(0,"rgba(32,32,32,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.js,e-i.js,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill(),s=this.createRadialGradient(n-.4*r,e-.4*r,0,n-.5*r,e-.5*r,1.5*r),s.addColorStop(0,"rgba(64,64,64,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.js,e-i.js,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill()}},vs:u},zs:{us:{es:function(t,i){var n=i.gs(t.x),e=i.hs(t.y),r=i.cs,s=a("markupLinesWidth",i)||1;t.c==o.W?this.fillStyle="white":this.fillStyle="black",this.beginPath(),this.arc(n,e,Math.max(0,r-s),0,2*Math.PI,!0),this.fill(),this.lineWidth=s,this.strokeStyle="black",this.stroke()}}},CR:{us:{es:function(t,i){var n=i.gs(t.x),e=i.hs(t.y),r=i.cs;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||a("markupLinesWidth",i)||1,this.beginPath(),this.arc(n-i.js,e-i.js,r/2,0,2*Math.PI,!0),this.stroke()}}},LB:{us:{es:function(t,i){var n=i.gs(t.x),e=i.hs(t.y),r=i.cs,o=t.scale||1,s=t.font||a("font",i)||"";this.fillStyle=t.c||c(i,t.x,t.y);var h=1;1==t.text.length?h=1.5:2==t.text.length&&(h=1.2),this.font=Math.round(h*r*o)+"px "+s,this.beginPath(),this.textBaseline="middle",this.textAlign="center",this.fillText(t.text,n,e,2*r)}},grid:{es:function(t,i){if(!p(i,t.x,t.y)&&!t.As){var n=i.gs(t.x),e=i.hs(t.y),r=i.cs;this.clearRect(n-r,e-r,2*r,2*r)}},clear:function(t,i){p(i,t.x,t.y)||(t.As=!0,l(i,"grid"),delete t.As)}}},Bs:{us:{es:function(t,i){var n=i.gs(t.x),e=i.hs(t.y),r=Math.round(i.cs);this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||a("markupLinesWidth",i)||1,this.beginPath(),this.rect(Math.round(n-r/2)-i.js,Math.round(e-r/2)-i.js,r,r),this.stroke()}}},Ch:{us:{es:function(t,i){var n=i.gs(t.x),e=i.hs(t.y),r=i.cs;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||a("markupLinesWidth",i)||1,this.beginPath(),this.moveTo(n-i.js,e-i.js-Math.round(r/2)),this.lineTo(Math.round(n-r/2)-i.js,Math.round(e+r/3)+i.js),this.lineTo(Math.round(n+r/2)+i.js,Math.round(e+r/3)+i.js),this.closePath(),this.stroke()}}},Cs:{us:{es:function(t,i){var n=i.gs(t.x),e=i.hs(t.y),r=i.cs;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineCap="round",this.lineWidth=2*(t.lineWidth||a("markupLinesWidth",i)||1)-1,this.beginPath(),this.moveTo(Math.round(n-r/2),Math.round(e-r/2)),this.lineTo(Math.round(n+r/2),Math.round(e+r/2)),this.moveTo(Math.round(n+r/2)-1,Math.round(e-r/2)),this.lineTo(Math.round(n-r/2)-1,Math.round(e+r/2)),this.stroke(),this.lineCap="butt"}}},SL:{us:{es:function(t,i){var n=i.gs(t.x),e=i.hs(t.y),r=i.cs;this.fillStyle=t.c||c(i,t.x,t.y),this.beginPath(),this.rect(n-r/2,e-r/2,r,r),this.fill()}}},Ds:{us:{es:function(t,i){var n=i.gs(t.x),e=i.hs(t.y),r=i.cs;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=2*(t.lineWidth||a("markupLinesWidth",i)||1),this.beginPath(),this.arc(n-r/3,e-r/3,r/6,0,2*Math.PI,!0),this.stroke(),this.beginPath(),this.arc(n+r/3,e-r/3,r/6,0,2*Math.PI,!0),this.stroke(),this.beginPath(),this.moveTo(n-r/1.5,e),this.bezierCurveTo(n-r/1.5,e+r/2,n+r/1.5,e+r/2,n+r/1.5,e),this.stroke()}}},outline:{us:{es:function(t,i){t.alpha?this.globalAlpha=t.alpha:this.globalAlpha=.3,t.Es?s.ls[t.Es].us.es.call(this,t,i):i.ks.us.es.call(this,t,i),this.globalAlpha=1}}},mini:{us:{es:function(t,i){i.cs=i.cs/2,t.Es?s.ls[t.Es].us.es.call(this,t,i):i.ks.us.es.call(this,t,i),i.cs=2*i.cs}}}},s.on={grid:{es:function(t,i){var n,e,r,o,s,h;this.fillStyle=a("coordinatesColor",i),this.textBaseline="middle",this.textAlign="center",this.font=i.cs*i.coordFontSize+"px "+(i.font||""),r=i.gs(-.75),o=i.gs(i.size-.25),s=i.hs(-.75),h=i.hs(i.size-.25);for(var u=0;u<i.size;u++)n=u+"A".charCodeAt(0),n>="I".charCodeAt(0)&&n++,e=i.hs(u),this.fillText(i.size-u,r,e),this.fillText(i.size-u,o,e),e=i.gs(u),this.fillText(String.fromCharCode(n),e,s),this.fillText(String.fromCharCode(n),e,h);this.fillStyle="black"}}},s.Fs=function(){this.qn=document.createElement("canvas"),this.context=this.qn.getContext("2d"),this.$r=t.devicePixelRatio||1,this.$r>1&&this.context.scale(this.$r,this.$r)},s.Fs.prototype={constructor:s.Fs,_r:function(t,i){this.qn.width=t,this.qn.style.width=t/this.$r+"px",this.qn.height=i,this.qn.style.height=i/this.$r+"px"},cj:function(t,i){this.qn.style.position="absolute",this.qn.style.zIndex=i,t.appendChild(this.qn)},Gs:function(t){t.removeChild(this.qn)},getContext:function(){return this.context},es:function(t){},clear:function(){this.context.clearRect(0,0,this.qn.width,this.qn.height)}},s.Hs=o.Tr(s.Fs,function(){this.super.call(this)}),s.Hs.prototype.es=function(t){var i;this.context.beginPath(),this.context.lineWidth=a("gridLinesWidth",t),this.context.strokeStyle=a("gridLinesColor",t);var n=Math.round(t.left),e=Math.round(t.top),r=Math.round(t.En*(t.size-1)),o=Math.round(t.Fn*(t.size-1));this.context.strokeRect(n-t.js,e-t.js,r,o);for(var s=1;s<t.size-1;s++)i=Math.round(t.gs(s))-t.js,this.context.moveTo(i,e),this.context.lineTo(i,e+o),i=Math.round(t.hs(s))-t.js,this.context.moveTo(n,i),this.context.lineTo(n+r,i);if(this.context.stroke(),this.context.fillStyle=a("starColor",t),t.Is[t.size])for(var h in t.Is[t.size])this.context.beginPath(),this.context.arc(t.gs(t.Is[t.size][h].x)-t.js,t.hs(t.Is[t.size][h].y)-t.js,a("starSize",t),0,2*Math.PI,!0),this.context.fill()},s.Js=o.Tr(s.Fs,function(){this.init(4)}),s.Js.prototype.init=function(i){var n,e;this.Ks=i,this.elements=[],this.Ls=[],this.$r=t.devicePixelRatio||1;for(var r=0;r<i;r++)n=document.createElement("canvas"),e=n.getContext("2d"),this.$r>1&&e.scale(this.$r,this.$r),this.elements.push(n),this.Ls.push(e)},s.Js.prototype.cj=function(t,i){for(var n=0;n<this.Ks;n++)this.elements[n].style.position="absolute",this.elements[n].style.zIndex=i,t.appendChild(this.elements[n])},s.Js.prototype.Gs=function(t){for(var i=0;i<this.Ks;i++)t.removeChild(this.elements[i])},s.Js.prototype.getContext=function(t){
return t.x%2?t.y%2?this.Ls[0]:this.Ls[1]:t.y%2?this.Ls[2]:this.Ls[3]},s.Js.prototype.clear=function(t,i){for(var n=0;n<this.Ks;n++)this.Ls[n].clearRect(0,0,this.elements[n].width,this.elements[n].height)},s.Js.prototype._r=function(t,i){for(var n=0;n<this.Ks;n++)this.elements[n].width=t,this.elements[n].style.width=t/this.$r+"px",this.elements[n].height=i,this.elements[n].style.height=i/this.$r+"px"},s.Ms=o.Tr(s.Js,function(t,i,n){this.init(2),this.shadowSize=void 0===i?1:i,this.fn=t}),s.Ms.prototype.getContext=function(t){return!(t.x%2&&t.y%2)&&(t.x%2||t.y%2)?this.Ls[1]:this.Ls[0]},s.Ms.prototype._r=function(t,i){this.super.prototype._r.call(this,t,i);for(var n=0;n<this.Ks;n++)this.Ls[n].setTransform(1,0,0,1,Math.round(this.shadowSize*this.fn.cs/7),Math.round(this.shadowSize*this.fn.cs/7))};var g=function(t,i){var n=i.gs(t.x),e=i.hs(t.y),r=i.cs;this.clearRect(n-2*r-i.js,e-2*r-i.js,4*r,4*r)},v=function(){return 3*this.width/(4*(this.Yr+1-this.Wr)+2)-this.En*this.Wr},m=function(){return 3*this.height/(4*(this.Zr+1-this.Xr)+2)-this.Fn*this.Xr},y=function(){return 4*this.width/(4*(this.Yr+1-this.Wr)+2)},b=function(){return 4*this.height/(4*(this.Zr+1-this.Xr)+2)},w=function(t,i){for(var n,e=0;e<this.zn[t][i].length;e++){var r=this.zn[t][i][e];n=r.type?"string"==typeof r.type?s.ls[r.type]:r.type:this.ks;for(var o in n)n[o].clear?n[o].clear.call(this[o].getContext(r),r,this):g.call(this[o].getContext(r),r,this)}},x=function(t,i){for(var n,e=0;e<this.zn[t][i].length;e++){var r=this.zn[t][i][e];n=r.type?"string"==typeof r.type?s.ls[r.type]:r.type:this.ks;for(var o in n)n[o].es.call(this[o].getContext(r),r,this)}},k=function(t){var i,n;i=t.layerX*this.$r,i-=this.left,i/=this.En,i=Math.round(i),n=t.layerY*this.$r,n-=this.top,n/=this.Fn,n=Math.round(n);var e=t.offsetY*this.$r;return e-=this.top,e/=this.Fn,e=Math.round(e),e!==n&&console.error("Using layerY we get",n," BUT using offsetY it would be",e),{x:i>=this.size?-1:i,y:n>=this.size?-1:n}},j=function(){this.qn.style.width=this.width/this.$r+"px",this.qn.style.height=this.height/this.$r+"px",this.cs=a("stoneSize",this),this.js=a("linesShift",this);for(var t=0;t<this.Ks.length;t++)this.Ks[t]._r(this.width,this.height)};s.prototype={constructor:s,init:function(){this.zn=[];for(var t=0;t<this.size;t++){this.zn[t]=[];for(var i=0;i<this.size;i++)this.zn[t][i]=[]}this.ms=[],this.Ks=[],this.Ns=[],this.qn=document.createElement("div"),this.qn.className="wgo-board",this.qn.style.position="relative",this.background&&("#"==this.background[0]?this.qn.style.backgroundColor=this.background:(this.qn.style.backgroundImage="url('"+this.background+"')",this.qn.style.backgroundColor="#c75")),this.grid=new s.Hs,this.vs=new s.Ms(this,a("shadowSize",this)),this.us=new s.Js,this.Os(this.grid,100),this.Os(this.vs,200),this.Os(this.us,300)},Pi:function(t){this.width=t,this.width*=this.$r,this.Fn=this.En=y.call(this),this.left=v.call(this),this.height=(this.Zr-this.Xr+1.5)*this.Fn,this.top=m.call(this),j.call(this),this.Ps()},Oi:function(t){this.height=t,this.height*=this.$r,this.En=this.Fn=b.call(this),this.top=m.call(this),this.width=(this.Yr-this.Wr+1.5)*this.En,this.left=v.call(this),j.call(this),this.Ps()},_r:function(t,i){this.width=t||parseInt(this.qn.style.width,10),this.width*=this.$r,this.height=i||parseInt(this.qn.style.height,10),this.height*=this.$r,this.En=y.call(this),this.Fn=b.call(this),this.left=v.call(this),this.top=m.call(this),j.call(this),this.Ps()},Qs:function(){return this.section},Rs:function(t,i,n,e){this.section="object"==typeof t?t:{top:t,right:i,bottom:n,left:e},this.Wr=this.section.left,this.Xr=this.section.top,this.Yr=this.size-1-this.section.right,this.Zr=this.size-1-this.section.bottom,this._r()},Ss:function(t){var t=t||19;if(t!=this.size){this.size=t,this.zn=[];for(var i=0;i<this.size;i++){this.zn[i]=[];for(var n=0;n<this.size;n++)this.zn[i][n]=[]}this.Yr=this.size-1-this.section.right,this.Zr=this.size-1-this.section.bottom,this._r()}},Ps:function(){for(var t=0;t<this.Ks.length;t++)this.Ks[t].clear(this),this.Ks[t].es(this);for(var t=0;t<this.size;t++)for(var i=0;i<this.size;i++)x.call(this,t,i);for(var t=0;t<this.ms.length;t++){var n=this.ms[t],e=n.Ik;for(var r in e)e[r].es.call(this[r].getContext(n.ns),n.ns,this)}},gs:function(t){return this.left+t*this.En},hs:function(t){return this.top+t*this.Fn},Os:function(t,i){t.cj(this.qn,i),t._r(this.width,this.height),this.Ks.push(t)},Ts:function(t){var i=this.Ks.indexOf(t);i>=0&&(this.Ks.splice(i,1),t.Gs(this.qn))},update:function(t){var i;if(t.remove&&"all"==t.remove)this.Us();else if(t.remove)for(i=0;i<t.remove.length;i++)this.yn(t.remove[i]);if(t.add)for(i=0;i<t.add.length;i++)this.An(t.add[i])},An:function(t){if(t.constructor!=Array){w.call(this,t.x,t.y);for(var i=this.zn[t.x][t.y],n=0;n<i.length;n++)if(i[n].type==t.type)return i[n]=t,void x.call(this,t.x,t.y);t.type?i.push(t):i.unshift(t),x.call(this,t.x,t.y)}else for(var e=0;e<t.length;e++)this.An(t[e])},yn:function(t){if(t.constructor!=Array){for(var i,n=0;n<this.zn[t.x][t.y].length;n++)if(this.zn[t.x][t.y][n].type==t.type){i=n;break}void 0!==i&&(w.call(this,t.x,t.y),this.zn[t.x][t.y].splice(i,1),x.call(this,t.x,t.y))}else for(var e=0;e<t.length;e++)this.yn(t[e])},Gn:function(t,i){this.zn[t][i].length&&(w.call(this,t,i),this.zn[t][i]=[])},Us:function(){this.zn=[];for(var t=0;t<this.size;t++){this.zn[t]=[];for(var i=0;i<this.size;i++)this.zn[t][i]=[]}this.Ps()},nn:function(t,i){this.ms.push({Ik:t,ns:i}),this.Ps()},Vs:function(t,i){for(var n=0;n<this.ms.length;n++){var e=this.ms[n];if(e.Ik==t&&e.ns==i)return this.ms.splice(n,1),this.Ps(),!0}return!1},addEventListener:function(t,i){var n=this,e={type:t,Ws:i,Xs:function(t){var e=k.call(n,t);i(e.x,e.y,t)}};this.qn.addEventListener(t,e,!0),this.Ns.push(e)},removeEventListener:function(t,i){for(var n=0;n<this.Ns.length;n++){var e=this.Ns[n];if(e.type==t&&e.Ws==i)return this.qn.removeEventListener(e.type,e,!0),this.Ns.splice(n,1),!0}return!1},Ys:function(){return{Zs:o.clone(this.zn),$s:o.clone(this.ms)}},_s:function(t){this.zn=t.Zs||this.zn,this.ms=t.$s||this.ms,this.Ps()}},s.default={size:19,width:0,height:0,font:"Calibri",lineWidth:1,bs:!1,Is:{19:[{x:3,y:3},{x:9,y:3},{x:15,y:3},{x:3,y:9},{x:9,y:9},{x:15,y:9},{x:3,y:15},{x:9,y:15},{x:15,y:15}],13:[{x:3,y:3},{x:9,y:3},{x:3,y:9},{x:9,y:9}],9:[{x:4,y:4}]},ks:s.ls.ys,starSize:1,shadowSize:1,stoneSize:1,section:{top:0,right:0,bottom:0,left:0},background:o.Mr+"wood1.jpg",uk:{}},o.mn=s,t.WGo=o}(window)},{}],89:[function(t,i,n){var e,r,o,s=t("superagent"),h=t("es6-promise").Promise,a=t("./get-base-url"),u=t("./http-header-safe-json");s.parse["application/octect-stream"]=function(t){return t},e=function(t,i){return{status:t.status,error:(i?i.text:null)||t.toString(),response:i}},o=function(t,i){t.text="",t.at("binary"),t.p("data",function(i){t.text+=i}),t.p("end",function(){i()})},r=function(t,i,n,r,c,p){if("user"!==n)throw new Error("Unexpected auth type: "+n);return new h(function(n,h){function l(t){n&&n(t)}function f(t){h&&h(t)}function d(t,i){var n;t?f(e(t,i)):(n=JSON.parse(i.headers["dropbox-api-result"]),i.bt?n.fileBlob=i.bt.response:n.ct=i.dt.text,l(n))}var g;g=s.et(a(r)+t).set("Authorization","Bearer "+c).set("Dropbox-API-Arg",u(i)).p("request",function(){this.bt&&(this.bt.responseType="blob")}),p&&(g=g.set("Dropbox-API-Select-User",p)),"undefined"==typeof window?g.buffer(!0).parse(o).end(d):g.end(d)})},i.exports=r},{"./get-base-url":92,"./http-header-safe-json":93,"es6-promise":123,"superagent":127}],90:[function(t,i,n){var e,r=t("./request-constants");t("./object-assign-polyfill"),e=function(t){t=t||{},this.accessToken=t.accessToken,this.clientId=t.clientId,this.ft=t.ft},e.prototype.gt=function(t){this.accessToken=t},e.prototype.ht=function(){return this.accessToken},e.prototype.it=function(t){this.clientId=t},e.prototype.jt=function(){return this.clientId},e.prototype.dm=function(t,i){var n,e=this.jt();if(!e)throw new Error("A client id is required. You can set the client id using .setClientId().");if(!t)throw new Error("A redirect uri is required.");return n="https://www.dropbox.com/oauth2/authorize?response_type=token&client_id="+e,t&&(n=n+"&redirect_uri="+t),i&&(n=n+"&state="+i),n},e.prototype.kt=function(t,i,n,e,o){var s=null;switch(o){case r.lt:s=this.nt();break;case r.ot:s=this.pt();break;case r.qt:s=this.rt();break;default:throw new Error("Invalid request style: "+o)}return s(t,i,n,e,this.ht(),this.ft)},e.prototype.st=function(t){e.prototype.tt=t},e.prototype.nt=function(){return void 0===e.prototype.tt&&(e.prototype.tt=t("./rpc-request")),e.prototype.tt},e.prototype.ut=function(t){e.prototype.vt=t},e.prototype.pt=function(){return void 0===e.prototype.vt&&(e.prototype.vt=t("./download-request")),e.prototype.vt},e.prototype.wt=function(t){e.prototype.xt=t},e.prototype.rt=function(){return void 0===e.prototype.xt&&(e.prototype.xt=t("./upload-request")),e.prototype.xt},i.exports=e},{"./download-request":89,"./object-assign-polyfill":95,"./request-constants":96,"./rpc-request":98,"./upload-request":99}],91:[function(t,i,n){var e,r=t("./dropbox-base"),o=t("./routes");e=function(t){r.call(this,t)},e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype=Object.assign(e.prototype,o),e.prototype.yt=function(t){return this.kt("sharing/get_shared_link_file",t,"api","download")},i.exports=e},{"./dropbox-base":90,"./routes":97}],92:[function(t,i,n){function e(t){return"https://"+t+".dropboxapi.com/2/"}i.exports=e},{}],93:[function(t,i,n){function e(t){return JSON.stringify(t).replace(r,function(t){return"\\u"+("000"+t.charCodeAt(0).toString(16)).slice(-4)})}var r=/[\u007f-\uffff]/g;i.exports=e},{}],94:[function(t,i,n){var e=t("./dropbox");i.exports=e},{"./dropbox":91}],95:[function(t,i,n){"function"!=typeof Object.assign&&function(){Object.assign=function(t){"use strict";var i,n,e,r;if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(i=Object(t),n=1;n<arguments.length;n++)if(void 0!==(e=arguments[n])&&null!==e)for(r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);return i}}()},{}],96:[function(t,i,n){var e={lt:"rpc",ot:"download",qt:"upload"};i.exports=e},{}],97:[function(t,i,n){var e={};e.zt=function(t){return this.kt("auth/token/from_oauth1",t,"app","api","rpc")},e.At=function(t){return this.kt("auth/token/revoke",t,"user","api","rpc")},e.Bt=function(t){return this.kt("files/alpha/get_metadata",t,"user","api","rpc")},e.Ct=function(t){return this.kt("files/alpha/upload",t,"user","content","upload")},e.Dt=function(t){return this.kt("files/copy",t,"user","api","rpc")},e.Et=function(t){return this.kt("files/copy_batch",t,"user","api","rpc")},e.Ft=function(t){return this.kt("files/copy_batch/check",t,"user","api","rpc")},e.Gt=function(t){return this.kt("files/copy_reference/get",t,"user","api","rpc")},e.Ht=function(t){return this.kt("files/copy_reference/save",t,"user","api","rpc")},e.qm=function(t){return this.kt("files/create_folder",t,"user","api","rpc")},e.sm=function(t){return this.kt("files/delete",t,"user","api","rpc")},e.It=function(t){return this.kt("files/delete_batch",t,"user","api","rpc")},e.Jt=function(t){return this.kt("files/delete_batch/check",t,"user","api","rpc")},e.nm=function(t){return this.kt("files/download",t,"user","content","download")},e.Kt=function(t){return this.kt("files/get_metadata",t,"user","api","rpc")},e.Lt=function(t){return this.kt("files/get_preview",t,"user","content","download")},e.Mt=function(t){return this.kt("files/get_temporary_link",t,"user","api","rpc")},e.Nt=function(t){return this.kt("files/get_thumbnail",t,"user","content","download")},e.im=function(t){return this.kt("files/list_folder",t,"user","api","rpc")},e.Ot=function(t){return this.kt("files/list_folder/continue",t,"user","api","rpc")},e.Pt=function(t){return this.kt("files/list_folder/get_latest_cursor",t,"user","api","rpc")},e.Qt=function(t){return this.kt("files/list_folder/longpoll",t,"noauth","notify","rpc")},e.Rt=function(t){return this.kt("files/list_revisions",t,"user","api","rpc")},e.um=function(t){return this.kt("files/move",t,"user","api","rpc")},e.St=function(t){return this.kt("files/move_batch",t,"user","api","rpc")},e.Tt=function(t){return this.kt("files/move_batch/check",t,"user","api","rpc")},e.Ut=function(t){return this.kt("files/permanently_delete",t,"user","api","rpc")},e.Vt=function(t){return this.kt("files/properties/add",t,"user","api","rpc")},e.Wt=function(t){return this.kt("files/properties/overwrite",t,"user","api","rpc")},e.Xt=function(t){return this.kt("files/properties/remove",t,"user","api","rpc")},e.Yt=function(t){return this.kt("files/properties/template/get",t,"user","api","rpc")},e.Zt=function(t){return this.kt("files/properties/template/list",t,"user","api","rpc")},e.$t=function(t){return this.kt("files/properties/update",t,"user","api","rpc")},e._t=function(t){return this.kt("files/restore",t,"user","api","rpc")},e.au=function(t){return this.kt("files/save_url",t,"user","api","rpc")},e.bu=function(t){return this.kt("files/save_url/check_job_status",t,"user","api","rpc")},e.cu=function(t){return this.kt("files/search",t,"user","api","rpc")},e.om=function(t){return this.kt("files/upload",t,"user","content","upload")},e.du=function(t){return this.kt("files/upload_session/append",t,"user","content","upload")},e.eu=function(t){return this.kt("files/upload_session/append_v2",t,"user","content","upload")},e.fu=function(t){return this.kt("files/upload_session/finish",t,"user","content","upload")},e.gu=function(t){return this.kt("files/upload_session/finish_batch",t,"user","api","rpc")},e.hu=function(t){return this.kt("files/upload_session/finish_batch/check",t,"user","api","rpc")},e.iu=function(t){return this.kt("files/upload_session/start",t,"user","content","upload")},e.ju=function(t){return this.kt("paper/docs/archive",t,"user","api","rpc")},e.ku=function(t){return this.kt("paper/docs/download",t,"user","api","download")},e.lu=function(t){return this.kt("paper/docs/folder_users/list",t,"user","api","rpc")},e.mu=function(t){return this.kt("paper/docs/folder_users/list/continue",t,"user","api","rpc")},e.nu=function(t){return this.kt("paper/docs/get_folder_info",t,"user","api","rpc")},e.ou=function(t){return this.kt("paper/docs/list",t,"user","api","rpc")},e.pu=function(t){return this.kt("paper/docs/list/continue",t,"user","api","rpc")},e.qu=function(t){return this.kt("paper/docs/permanently_delete",t,"user","api","rpc")},e.ru=function(t){return this.kt("paper/docs/sharing_policy/get",t,"user","api","rpc")},e.su=function(t){return this.kt("paper/docs/sharing_policy/set",t,"user","api","rpc")},e.tu=function(t){return this.kt("paper/docs/users/add",t,"user","api","rpc")},e.uu=function(t){return this.kt("paper/docs/users/list",t,"user","api","rpc")},e.vu=function(t){return this.kt("paper/docs/users/list/continue",t,"user","api","rpc")},e.wu=function(t){return this.kt("paper/docs/users/remove",t,"user","api","rpc")},e.xu=function(t){return this.kt("sharing/add_file_member",t,"user","api","rpc")},e.yu=function(t){return this.kt("sharing/add_folder_member",t,"user","api","rpc")},e.zu=function(t){return this.kt("sharing/change_file_member_access",t,"user","api","rpc")},e.Au=function(t){return this.kt("sharing/check_job_status",t,"user","api","rpc")},e.Bu=function(t){return this.kt("sharing/check_remove_member_job_status",t,"user","api","rpc")},e.Cu=function(t){return this.kt("sharing/check_share_job_status",t,"user","api","rpc")},e.Du=function(t){return this.kt("sharing/create_shared_link",t,"user","api","rpc")},e.Eu=function(t){return this.kt("sharing/create_shared_link_with_settings",t,"user","api","rpc")},e.Fu=function(t){return this.kt("sharing/get_file_metadata",t,"user","api","rpc")},e.Gu=function(t){return this.kt("sharing/get_file_metadata/batch",t,"user","api","rpc")},e.Hu=function(t){return this.kt("sharing/get_folder_metadata",t,"user","api","rpc")},e.Iu=function(t){return this.kt("sharing/get_shared_link_file",t,"user","content","download")},e.Ju=function(t){return this.kt("sharing/get_shared_link_metadata",t,"user","api","rpc")},e.Ku=function(t){return this.kt("sharing/get_shared_links",t,"user","api","rpc")},e.Lu=function(t){return this.kt("sharing/list_file_members",t,"user","api","rpc")},e.Mu=function(t){return this.kt("sharing/list_file_members/batch",t,"user","api","rpc")},e.Nu=function(t){return this.kt("sharing/list_file_members/continue",t,"user","api","rpc")},e.Ou=function(t){return this.kt("sharing/list_folder_members",t,"user","api","rpc")},e.Pu=function(t){return this.kt("sharing/list_folder_members/continue",t,"user","api","rpc")},e.Qu=function(t){return this.kt("sharing/list_folders",t,"user","api","rpc")},e.Ru=function(t){return this.kt("sharing/list_folders/continue",t,"user","api","rpc")},e.Su=function(t){return this.kt("sharing/list_mountable_folders",t,"user","api","rpc")},e.Tu=function(t){return this.kt("sharing/list_mountable_folders/continue",t,"user","api","rpc")},e.Uu=function(t){return this.kt("sharing/list_received_files",t,"user","api","rpc")},e.Vu=function(t){return this.kt("sharing/list_received_files/continue",t,"user","api","rpc")},e.Wu=function(t){return this.kt("sharing/list_shared_links",t,"user","api","rpc")},e.Xu=function(t){return this.kt("sharing/modify_shared_link_settings",t,"user","api","rpc")},e.Yu=function(t){return this.kt("sharing/mount_folder",t,"user","api","rpc")},e.Zu=function(t){return this.kt("sharing/relinquish_file_membership",t,"user","api","rpc")},e.$u=function(t){return this.kt("sharing/relinquish_folder_membership",t,"user","api","rpc")},e._u=function(t){return this.kt("sharing/remove_file_member",t,"user","api","rpc")},e.av=function(t){return this.kt("sharing/remove_file_member_2",t,"user","api","rpc")},e.bv=function(t){return this.kt("sharing/remove_folder_member",t,"user","api","rpc")},e.cv=function(t){return this.kt("sharing/revoke_shared_link",t,"user","api","rpc")},e.dv=function(t){return this.kt("sharing/share_folder",t,"user","api","rpc")},e.ev=function(t){return this.kt("sharing/transfer_folder",t,"user","api","rpc")},e.fv=function(t){return this.kt("sharing/unmount_folder",t,"user","api","rpc")},e.gv=function(t){return this.kt("sharing/unshare_file",t,"user","api","rpc")},e.hv=function(t){return this.kt("sharing/unshare_folder",t,"user","api","rpc")},e.iv=function(t){return this.kt("sharing/update_file_member",t,"user","api","rpc")},e.jv=function(t){return this.kt("sharing/update_folder_member",t,"user","api","rpc")},e.kv=function(t){return this.kt("sharing/update_folder_policy",t,"user","api","rpc")},e.lv=function(t){return this.kt("users/get_account",t,"user","api","rpc")},e.mv=function(t){return this.kt("users/get_account_batch",t,"user","api","rpc")},e.nv=function(t){return this.kt("users/get_current_account",t,"user","api","rpc")},e.ov=function(t){return this.kt("users/get_space_usage",t,"user","api","rpc")},i.exports=e},{}],98:[function(t,i,n){var e=t("superagent"),r=t("es6-promise").Promise,o=t("./get-base-url"),s=function(t,i){return{status:t.status,error:(i?i.text:null)||t.toString(),response:i}},h=function(t,i,n,h,a,u){return new r(function(r,c){function p(t){r&&r(t)}function l(t){c&&c(t)}function f(t,i){t?l(s(t,i)):p(i.body)}var d;switch(i||(i=null),d=e.et(o(h)+t).type("application/json"),n){case"team":case"user":d.set("Authorization","Bearer "+a);break;case"noauth":break;default:throw new Error("Unhandled auth type: "+n)}u&&(d=d.set("Dropbox-API-Select-User",u)),d.send(i).end(f)})};i.exports=h},{"./get-base-url":92,"es6-promise":123,"superagent":127}],99:[function(t,i,n){var e=t("superagent"),r=t("es6-promise").Promise,o=t("./get-base-url"),s=t("./http-header-safe-json"),h=function(t,i){return{status:t.status,error:(i?i.text:null)||t.toString(),response:i}},a=function(t,i,n,a,u,c){if("user"!==n)throw new Error("Unexpected auth type: "+n);return new r(function(n,r){function p(t){n&&n(t)}function l(t){r&&r(t)}function f(t,i){t?l(h(t,i)):p(i.body)}var d,g=i.contents;delete i.contents,d=e.et(o(a)+t).type("application/octet-stream").set("Authorization","Bearer "+u).set("Dropbox-API-Arg",s(i)),c&&(d=d.set("Dropbox-API-Select-User",c)),d.send(g).end(f)})};i.exports=a},{"./get-base-url":92,"./http-header-safe-json":93,"es6-promise":123,"superagent":127}],100:[function(t,i,n){function e(t){if(t)return r(t)}function r(t){for(var i in e.prototype)t[i]=e.prototype[i];return t}void 0!==i&&(i.exports=e),e.prototype.p=e.prototype.addEventListener=function(t,i){return this.pv=this.pv||{},(this.pv["$"+t]=this.pv["$"+t]||[]).push(i),this},e.prototype.q=function(t,i){function n(){this.s(t,n),i.apply(this,arguments)}return n.qv=i,this.p(t,n),this},e.prototype.s=e.prototype.removeListener=e.prototype.t=e.prototype.removeEventListener=function(t,i){if(this.pv=this.pv||{},0==arguments.length)return this.pv={},this;var n=this.pv["$"+t];if(!n)return this;if(1==arguments.length)return delete this.pv["$"+t],this;for(var e,r=0;r<n.length;r++)if((e=n[r])===i||e.qv===i){n.splice(r,1);break}return this},e.prototype.u=function(t){this.pv=this.pv||{};var i=[].slice.call(arguments,1),n=this.pv["$"+t];if(n){n=n.slice(0);for(var e=0,r=n.length;e<r;++e)n[e].apply(this,i)}return this},e.prototype.Ns=function(t){return this.pv=this.pv||{},this.pv["$"+t]||[]},e.prototype.rv=function(t){return!!this.Ns(t).length}},{}],101:[function(t,i,n){i.exports=1/0},{}],102:[function(t,i,n){i.exports=1},{}],103:[function(t,i,n){"use strict";var e=t("./_map");i.exports=function(t){function i(t,i){return function(t){i(t)}}return e(t,i)}},{"./_map":105}],104:[function(t,i,n){"use strict";var e=t("./a"),r=t("./_map");i.exports=function(t){function i(t,i){return function(n,r){function o(t,i){return!!r[i]}if(n)return void i(n);i(null,e(r)?t.filter(o):function(){var i={};return Object.keys(t).forEach(function(n){o(null,n)&&(i[n]=t[n])}),i}())}}return r(t,i)}},{"./_map":105,"./a":106}],105:[function(t,i,n){"use strict";var e=t("./a"),r=t("./once"),o=t("./concurrent"),s=t("./CONCURRENTLY"),h=t("./SERIAL");i.exports=function t(i,n,a){function u(t,h,a,u){var c=arguments;2===c.length&&(a=h,h=s),3===c.length&&"number"!=typeof h&&(u=a,a=h,h=s);var p=Object.keys(t),l=e(t)?[]:{};p.forEach(function(i){l[i]=function(n){3===a.length?a(t[i],i,n):a(t[i],n)}}),o(l,i||h,n?n(t,r(u)):u)}return a||(u.Zl=t(h,n,!0)),u}},{"./CONCURRENTLY":101,"./SERIAL":102,"./a":106,"./concurrent":107,"./once":119}],106:[function(t,i,n){"use strict";i.exports=function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],107:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./a"),o=t("./once"),s=t("./queue"),h=t("./errored"),a=t("./debounce"),u=t("./CONCURRENTLY");i.exports=function(t,i,n){function c(i,n){function r(){var t=e(arguments);h(t,p)||(d[i]=t.shift(),n())}a(t[i],[r])}"function"==typeof i&&(n=i,i=u);var p=o(n),l=s(c,i),f=Object.keys(t),d=r(t)?[]:{};l.unshift(f),l.p("drain",function(){p(null,d)})}},{"./CONCURRENTLY":101,"./a":106,"./debounce":110,"./errored":113,"./once":119,"./queue":120,"atoa":116}],108:[function(t,i,n){"use strict";i.exports={sv:t("./curry"),tv:t("./concurrent"),Zl:t("./series"),uv:t("./waterfall"),di:t("./each"),map:t("./map"),filter:t("./filter"),vv:t("./queue"),emitter:t("./emitter")}},{"./concurrent":107,"./curry":109,"./each":111,"./emitter":112,"./filter":114,"./map":115,"./queue":120,"./series":121,"./waterfall":122}],109:[function(t,i,n){"use strict";var e=t("atoa");i.exports=function(){var t=e(arguments),i=t.shift();return function(){var n=e(arguments);i.apply(i,t.concat(n))}}},{"atoa":116}],110:[function(t,i,n){"use strict";var e=t("ticky");i.exports=function(t,i,n){t&&e(function(){t.apply(n||null,i||[])})}},{"ticky":117}],111:[function(t,i,n){"use strict";i.exports=t("./_each")()},{"./_each":103}],112:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./debounce");i.exports=function(t,i){var n=i||{},o={};return void 0===t&&(t={}),t.p=function(i,n){return o[i]?o[i].push(n):o[i]=[n],t},t.q=function(i,n){return n.wv=!0,t.p(i,n),t},t.s=function(i,n){var e=arguments.length;if(1===e)delete o[i];else if(0===e)o={};else{var r=o[i];if(!r)return t;r.splice(r.indexOf(n),1)}return t},t.u=function(){var i=e(arguments);return t.xv(i.shift()).apply(this,i)},t.xv=function(i){var s=(o[i]||[]).slice(0);return function(){var o=e(arguments),h=this||t;if("error"===i&&n.throws!==!1&&!s.length)throw 1===o.length?o[0]:o;return s.forEach(function(e){n.async?r(e,o,h):e.apply(h,o),e.wv&&t.s(i,e)}),t}},t}},{"./debounce":110,"atoa":116}],113:[function(t,i,n){"use strict";var e=t("./debounce");i.exports=function(t,i,n){var r=t.shift();if(r)return n&&n.yv(),e(i,[r]),!0}},{"./debounce":110}],114:[function(t,i,n){"use strict";i.exports=t("./_filter")()},{"./_filter":104}],115:[function(t,i,n){"use strict";i.exports=t("./_map")()},{"./_map":105}],116:[function(t,i,n){i.exports=function(t,i){return Array.prototype.slice.call(t,i)}},{}],117:[function(t,i,n){var e,r="function"==typeof setImmediate;e=r?function(t){setImmediate(t)}:function(t){setTimeout(t,0)},i.exports=e},{}],118:[function(t,i,n){"use strict";i.exports=function(){}},{}],119:[function(t,i,n){"use strict";var e=t("./noop");i.exports=function(t){function i(){n||(n=!0,(t||e).apply(null,arguments))}var n;return i.yv=function(){n=!0},i}},{"./noop":118}],120:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./a"),o=t("./once"),s=t("./emitter"),h=t("./debounce");i.exports=function(t,i){function n(t,i,n){(r(i)?i:[i]).forEach(function(i){p[t]({Sr:i,done:n})}),h(a)}function a(){if(!(c||l>=f)){if(!p.length)return void(0===l&&d.u("drain"));l++;var i=p.pop();t(i.Sr,o(u.bind(null,i))),h(a)}}function u(t){l--,h(t.done,e(arguments,1)),h(a)}var c,p=[],l=0,f=i||1,d=s({push:n.bind(null,"push"),unshift:n.bind(null,"unshift"),pause:function(){c=!0},resume:function(){c=!1,h(a)},pending:p});return Object.defineProperty&&!Object.zv&&Object.defineProperty(d,"length",{get:function(){return p.length}}),d}},{"./a":106,"./debounce":110,"./emitter":112,"./once":119,"atoa":116}],121:[function(t,i,n){"use strict";var e=t("./concurrent"),r=t("./SERIAL");i.exports=function(t,i){e(t,r,i)}},{"./SERIAL":102,"./concurrent":107}],122:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./once"),o=t("./errored"),s=t("./debounce");i.exports=function(t,i){function n(){var i=e(arguments),a=t.shift();if(a){if(o(i,h))return;i.push(r(n)),s(a,i)}else s(h,arguments)}var h=r(i);n()}},{"./debounce":110,"./errored":113,"./once":119,"atoa":116}],123:[function(t,i,n){(function(e,r){!function(t,e){"object"==typeof n&&void 0!==i?i.exports=e():"function"==typeof define&&define.Av?define(e):t.Bv=e()}(this,function(){"use strict";function i(t){return"function"==typeof t||"object"==typeof t&&null!==t}function n(t){return"function"==typeof t}function o(t){W=t}function s(t){Y=t}function h(){return function(){F(u)}}function a(){var t=setTimeout;return function(){return t(u,1)}}function u(){for(var t=0;t<U;t+=2){(0,V[t])(V[t+1]),V[t]=void 0,V[t+1]=void 0}U=0}function c(t,i){var n=arguments,e=this,r=new this.constructor(l);void 0===r[tt]&&_(r);var o=e.Ev;return o?function(){var t=n[o-1];Y(function(){return E(o,r,t,e.Fv)})}():D(e,r,t,i),r}function p(t){var i=this;if(t&&"object"==typeof t&&t.constructor===i)return t;var n=new i(l);return w(n,t),n}function l(){}function f(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function g(t){try{return t.then}catch(t){return rt.error=t,rt}}function v(t,i,n,e){try{t.call(i,n,e)}catch(t){return t}}function m(t,i,n){Y(function(t){var e=!1,r=v(n,i,function(n){e||(e=!0,i!==n?w(t,n):k(t,n))},function(i){e||(e=!0,j(t,i))},"Settle: "+(t.tj||" unknown promise"));!e&&r&&(e=!0,j(t,r))},t)}function y(t,i){i.Ev===nt?k(t,i.Fv):i.Ev===et?j(t,i.Fv):D(i,void 0,function(i){return w(t,i)},function(i){return j(t,i)})}function b(t,i,e){i.constructor===t.constructor&&e===c&&i.constructor.resolve===p?y(t,i):e===rt?j(t,rt.error):void 0===e?k(t,i):n(e)?m(t,i,e):k(t,i)}function w(t,n){t===n?j(t,f()):i(n)?b(t,n,g(n)):k(t,n)}function x(t){t.Gv&&t.Gv(t.Fv),S(t)}function k(t,i){t.Ev===it&&(t.Fv=i,t.Ev=nt,0!==t.Hv.length&&Y(S,t))}function j(t,i){t.Ev===it&&(t.Ev=et,t.Fv=i,Y(x,t))}function D(t,i,n,e){var r=t.Hv,o=r.length;t.Gv=null,r[o]=i,r[o+nt]=n,r[o+et]=e,0===o&&t.Ev&&Y(S,t)}function S(t){var i=t.Hv,n=t.Ev;if(0!==i.length){for(var e=void 0,r=void 0,o=t.Fv,s=0;s<i.length;s+=3)e=i[s],r=i[s+n],e?E(n,e,r,o):r(o);t.Hv.length=0}}function G(){this.error=null}function M(t,i){try{return t(i)}catch(t){return ot.error=t,ot}}function E(t,i,e,r){var o=n(e),s=void 0,h=void 0,a=void 0,u=void 0;if(o){if(s=M(e,r),s===ot?(u=!0,h=s.error,s=null):a=!0,i===s)return void j(i,d())}else s=r,a=!0;i.Ev!==it||(o&&a?w(i,s):u?j(i,h):t===nt?k(i,s):t===et&&j(i,s))}function C(t,i){try{i(function(i){w(t,i)},function(i){j(t,i)})}catch(i){j(t,i)}}function q(){return st++}function _(t){t[tt]=st++,t.Ev=void 0,t.Fv=void 0,t.Hv=[]}function T(t,i){this.Iv=t,this.Jv=new t(l),this.Jv[tt]||_(this.Jv),N(i)?(this.Kv=i,this.length=i.length,this.Lv=i.length,this.Fv=new Array(this.length),0===this.length?k(this.Jv,this.Fv):(this.length=this.length||0,this.Mv(),0===this.Lv&&k(this.Jv,this.Fv))):j(this.Jv,B())}function B(){return new Error("Array Methods must be provided an Array")}function A(t){return new T(this,t).Jv}function I(t){var i=this;return new i(N(t)?function(n,e){for(var r=t.length,o=0;o<r;o++)i.resolve(t[o]).then(n,e)}:function(t,i){return i(new TypeError("You must pass an array to race."))})}function O(t){var i=this,n=new i(l);return j(n,t),n}function L(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function H(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function R(t){this[tt]=q(),this.Fv=this.Ev=void 0,this.Hv=[],l!==t&&("function"!=typeof t&&L(),this instanceof R?C(this,t):H())}function z(){var t=void 0;if(void 0!==r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var i=t.Promise;if(i){var n=null;try{n=Object.prototype.toString.call(i.resolve())}catch(t){}if("[object Promise]"===n&&!i.cast)return}t.Promise=R}var P=void 0;P=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var N=P,U=0,F=void 0,W=void 0,Y=function(t,i){V[U]=t,V[U+1]=i,2===(U+=2)&&(W?W(u):Q())},Z="undefined"!=typeof window?window:void 0,J=Z||{},$=J.MutationObserver||J.WebKitMutationObserver,K="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),X="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,V=new Array(1e3),Q=void 0;Q=K?function(){return function(){return e.h(u)}}():$?function(){var t=0,i=new $(u),n=document.createTextNode("");return i.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():X?function(){var t=new MessageChannel;return t.port1.onmessage=u,function(){return t.port2.postMessage(0)}}():void 0===Z&&"function"==typeof t?function(){try{var i=t,n=i("vertx");return F=n.Cv||n.Dv,h()}catch(t){return a()}}():a();var tt=Math.random().toString(36).substring(16),it=void 0,nt=1,et=2,rt=new G,ot=new G,st=0;return T.prototype.Mv=function(){for(var t=this.length,i=this.Kv,n=0;this.Ev===it&&n<t;n++)this.Nv(i[n],n)},T.prototype.Nv=function(t,i){var n=this.Iv,e=n.resolve;if(e===p){var r=g(t);if(r===c&&t.Ev!==it)this.Ov(t.Ev,i,t.Fv);else if("function"!=typeof r)this.Lv--,this.Fv[i]=t;else if(n===R){var o=new n(l);b(o,t,r),this.Pv(o,i)}else this.Pv(new n(function(i){return i(t)}),i)}else this.Pv(e(t),i)},T.prototype.Ov=function(t,i,n){var e=this.Jv;e.Ev===it&&(this.Lv--,t===et?j(e,n):this.Fv[i]=n),0===this.Lv&&k(e,this.Fv)},T.prototype.Pv=function(t,i){var n=this;D(t,void 0,function(t){return n.Ov(nt,i,t)},function(t){return n.Ov(et,i,t)})},R.all=A,R.race=I,R.resolve=p,R.reject=O,
R.Qv=o,R.Rv=s,R.Sv=Y,R.prototype={constructor:R,then:c,"catch":function(t){return this.then(null,t)}},z(),R.Tv=z,R.Promise=R,R})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"_process":1}],124:[function(t,i,n){i.exports=function(t,i){var n=i||document;if(n.createStyleSheet){var e=n.createStyleSheet();return e.cssText=t,e.ownerNode}var r=n.getElementsByTagName("head")[0],o=n.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(n.createTextNode(t)),r.appendChild(o),o},i.exports.Uv=function(t){if(document.createStyleSheet)return document.createStyleSheet(t).ownerNode;var i=document.getElementsByTagName("head")[0],n=document.createElement("link");return n.rel="stylesheet",n.href=t,i.appendChild(n),n}},{}],125:[function(t,i,n){i.exports=t("cssify")},{"cssify":124}],126:[function(t,i,n){i.exports=function(t,i,n){for(var e=0,r=t.length,o=3==arguments.length?n:t[e++];e<r;)o=i.call(null,o,t[e],++e,t);return o}},{}],127:[function(t,i,n){function e(){}function r(t){switch({}.toString.call(t)){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(t){if(!b(t))return t;var i=[];for(var n in t)null!=t[n]&&s(i,n,t[n]);return i.join("&")}function s(t,i,n){if(Array.isArray(n))return n.forEach(function(n){s(t,i,n)});t.push(encodeURIComponent(i)+"="+encodeURIComponent(n))}function h(t){for(var i,n,e={},r=t.split("&"),o=0,s=r.length;o<s;++o)n=r[o],i=n.split("="),e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]);return e}function a(t){var i,n,e,r,o=t.split(/\r?\n/),s={};o.pop();for(var h=0,a=o.length;h<a;++h)n=o[h],i=n.indexOf(":"),e=n.slice(0,i).toLowerCase(),r=x(n.slice(i+1)),s[e]=r;return s}function u(t){return/[\/+]json\b/.test(t)}function c(t){return t.split(/ *; */).shift()}function p(t){return m(t.split(/ *; */),function(t,i){var n=i.split(/ *= */),e=n.shift(),r=n.shift();return e&&r&&(t[e]=r),t},{})}function l(t,i){i=i||{},this._v=t,this.bt=this._v.bt,this.text="HEAD"!=this._v.method&&(""===this.bt.responseType||"text"===this.bt.responseType)||void 0===this.bt.responseType?this.bt.responseText:null,this.statusText=this._v.bt.statusText,this.aw(this.bt.status),this.bw=this.headers=a(this.bt.getAllResponseHeaders()),this.bw["content-type"]=this.bt.getResponseHeader("content-type"),this.cw(this.bw),this.body="HEAD"!=this._v.method?this.dw(this.text?this.text:this.bt.response):null}function f(t,i){var n=this;this.qw=this.qw||[],this.method=t,this.url=i,this.bw={},this.rw={},this.p("end",function(){var t=null,i=null;try{i=new l(n)}catch(i){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.sw=i,t.tw=n.bt&&n.bt.responseText?n.bt.responseText:null,t.ew=n.bt&&n.bt.status?n.bt.status:null,n.Ws(t)}if(n.u("response",i),t)return n.Ws(t,i);if(i.status>=200&&i.status<300)return n.Ws(t,i);var e=new Error(i.statusText||"Unsuccessful HTTP response");e.sw=t,e.response=i,e.status=i.status,n.Ws(e,i)})}function d(t,i){var n=w("DELETE",t);return i&&n.end(i),n}var g,v=t("emitter"),m=t("reduce"),y=t("./request-base"),b=t("./is-object");g="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var w=i.exports=t("./request").bind(null,f);w.Vv=function(){if(!(!g.XMLHttpRequest||g.location&&"file:"==g.location.protocol&&g.Wv))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1};var x="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};w.Xv=o,w.Yv=h,w.types={nj:"text/html",json:"application/json",Zv:"application/xml",$v:"application/x-www-form-urlencoded","form":"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},w.O={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify},w.parse={"application/x-www-form-urlencoded":h,"application/json":JSON.parse},l.prototype.get=function(t){return this.bw[t.toLowerCase()]},l.prototype.cw=function(t){var i=this.bw["content-type"]||"";this.type=c(i);var n=p(i);for(var e in n)this[e]=n[e]},l.prototype.dw=function(t){var i=w.parse[this.type];return!i&&u(this.type)&&(i=w.parse["application/json"]),i&&t&&(t.length||t instanceof Object)?i(t):null},l.prototype.aw=function(t){1223===t&&(t=204);var i=t/100|0;this.status=this.ew=t,this.fw=i,this.info=1==i,this.ok=2==i,this.gw=4==i,this.hw=5==i,this.error=(4==i||5==i)&&this.iw(),this.jw=202==t,this.kw=204==t,this.lw=400==t,this.mw=401==t,this.nw=406==t,this.ow=404==t,this.pw=403==t},l.prototype.iw=function(){var t=this._v,i=t.method,n=t.url,e="cannot "+i+" "+n+" ("+this.status+")",r=new Error(e);return r.status=this.status,r.method=i,r.url=n,r},w.Response=l,v(f.prototype);for(var k in y)f.prototype[k]=y[k];f.prototype.abort=function(){if(!this.uw)return this.uw=!0,this.bt&&this.bt.abort(),this.clearTimeout(),this.u("abort"),this},f.prototype.type=function(t){return this.set("Content-Type",w.types[t]||t),this},f.prototype.responseType=function(t){return this.vw=t,this},f.prototype.accept=function(t){return this.set("Accept",w.types[t]||t),this},f.prototype.ww=function(t,i,n){switch(n||(n={type:"basic"}),n.type){case"basic":var e=btoa(t+":"+i);this.set("Authorization","Basic "+e);break;case"auto":this.username=t,this.password=i}return this},f.prototype.xw=function(t){return"string"!=typeof t&&(t=o(t)),t&&this.qw.push(t),this},f.prototype.yw=function(t,i,n){return this.zw().append(t,i,n||i.name),this},f.prototype.zw=function(){return this.Aw||(this.Aw=new g.FormData),this.Aw},f.prototype.send=function(t){var i=b(t),n=this.rw["content-type"];if(i&&b(this.Bw))for(var e in t)this.Bw[e]=t[e];else"string"==typeof t?(n||this.type("form"),n=this.rw["content-type"],this.Bw="application/x-www-form-urlencoded"==n?this.Bw?this.Bw+"&"+t:t:(this.Bw||"")+t):this.Bw=t;return!i||r(t)?this:(n||this.type("json"),this)},l.prototype.parse=function(t){return g.console&&console.warn("Client-side parse() method has been renamed to serialize(). This method is not compatible with superagent v2.0"),this.O(t),this},l.prototype.O=function(t){return this.Cw=t,this},f.prototype.Ws=function(t,i){var n=this.Dw;this.clearTimeout(),n(t,i)},f.prototype.Ew=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.Fw=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.Ws(t)},f.prototype.Gw=function(){var t=this.Hw,i=new Error("timeout of "+t+"ms exceeded");i.timeout=t,this.Ws(i)},f.prototype.withCredentials=function(){return this.Iw=!0,this},f.prototype.end=function(t){var i=this,n=this.bt=w.Vv(),o=this.qw.join("&"),s=this.Hw,h=this.Aw||this.Bw;this.Dw=t||e,n.onreadystatechange=function(){if(4==n.readyState){var t;try{t=n.status}catch(i){t=0}if(0==t){if(i.Jw)return i.Gw();if(i.uw)return;return i.Ew()}i.u("end")}};var a=function(t){t.total>0&&(t.Kw=t.loaded/t.total*100),t.direction="download",i.u("progress",t)};this.rv("progress")&&(n.onprogress=a);try{n.upload&&this.rv("progress")&&(n.upload.onprogress=a)}catch(t){}if(s&&!this.Lw&&(this.Lw=setTimeout(function(){i.Jw=!0,i.abort()},s)),o&&(o=w.Xv(o),this.url+=~this.url.indexOf("?")?"&"+o:"?"+o),this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0),this.Iw&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof h&&!r(h)){var c=this.rw["content-type"],p=this.Cw||w.O[c?c.split(";")[0]:""];!p&&u(c)&&(p=w.O["application/json"]),p&&(h=p(h))}for(var l in this.bw)null!=this.bw[l]&&n.setRequestHeader(l,this.bw[l]);return this.vw&&(n.responseType=this.vw),this.u("request",this),n.send(void 0!==h?h:null),this},w.Request=f,w.get=function(t,i,n){var e=w("GET",t);return"function"==typeof i&&(n=i,i=null),i&&e.xw(i),n&&e.end(n),e},w.head=function(t,i,n){var e=w("HEAD",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e},w["del"]=d,w["delete"]=d,w.Mw=function(t,i,n){var e=w("PATCH",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e},w.et=function(t,i,n){var e=w("POST",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e},w.put=function(t,i,n){var e=w("PUT",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e}},{"./is-object":128,"./request":130,"./request-base":129,"emitter":100,"reduce":126}],128:[function(t,i,n){function e(t){return null!=t&&"object"==typeof t}i.exports=e},{}],129:[function(t,i,n){var e=t("./is-object");n.clearTimeout=function(){return this.Hw=0,clearTimeout(this.Lw),this},n.parse=function(t){return this.Cw=t,this},n.timeout=function(t){return this.Hw=t,this},n.then=function(t,i){return this.end(function(n,e){n?i(n):t(e)})},n.Nw=function(t){return t(this),this},n.get=function(t){return this.rw[t.toLowerCase()]},n.Ow=n.get,n.set=function(t,i){if(e(t)){for(var n in t)this.set(n,t[n]);return this}return this.rw[t.toLowerCase()]=i,this.bw[t]=i,this},n.Pw=function(t){return delete this.rw[t.toLowerCase()],delete this.bw[t],this},n.Qw=function(t,i){return this.zw().append(t,i),this}},{"./is-object":128}],130:[function(t,i,n){function e(t,i,n){return"function"==typeof n?new t("GET",i).end(n):2==arguments.length?new t("GET",i):new t(i,n)}i.exports=e},{}],131:[function(t,i,n){i.exports={"name":"1g0","version":"0.4.16","description":"","author":"Olivier Lombart (kubicle)","license":"TBD","scripts":{"build":"browserify js/ui/htmlApp.js -t lessify | uglifyjs -o build/bld.js -m --mangle-props=unquoted --reserved-file build/reserved.json --reserve-domprops -c properties=false,pure_funcs=['log.debug','test.assert']","scorer":"browserify js/scorer/BoardAnalyser.js --standalone scorer -t lessify | uglifyjs -o build/scorer-0.1.js -m --mangle-props=unquoted --reserved-file build/reserved.json --reserve-domprops -c properties=false,pure_funcs=['log.debug','test.assert']","ai-frankie":"browserify js/ai/frankie/index.js --standalone frankie -t lessify | uglifyjs -o build/ai-frankie-0.1.js -m --mangle-props=unquoted --reserved-file build/reserved.json --reserve-domprops -c properties=false,pure_funcs=['log.debug','test.assert']","ai-droopy":"browserify js/ai/droopy/index.js --standalone droopy -t lessify | uglifyjs -o build/ai-droopy-0.1.js -m --mangle-props=unquoted --reserved-file build/reserved.json --reserve-domprops -c properties=false,pure_funcs=['log.debug','test.assert']","ai-chuckie":"browserify js/ai/chuckie/index.js --standalone chuckie -t lessify | uglifyjs -o build/ai-chuckie-0.1.js -m --mangle-props=unquoted --reserved-file build/reserved.json --reserve-domprops -c properties=false,pure_funcs=['log.debug','test.assert']","dev-scorer":"browserify js/scorer/BoardAnalyser.js --standalone scorer -o build/scorer-0.1.js","dev-frankie":"browserify js/ai/frankie/index.js --standalone frankie -o build/ai-frankie-0.1.js","dev-droopy":"browserify js/ai/droopy/index.js --standalone droopy -o build/ai-droopy-0.1.js","dev-chuckie":"browserify js/ai/chuckie/index.js --standalone chuckie -o build/ai-chuckie-0.1.js","dev-build":"watchify js/test/htmlTestApp.js -o build/devBuild.js -t lessify -v","test":"node js/test/ciTestApp.js --ci","coverage":"node node_modules/istanbul/lib/cli.js cover js/test/ciTestApp.js -x **/frankie/** -x **/droopy/** -- --cover"},"main":"js/ui/htmlApp.js","repository":{"type":"git","url":"https://github.com/kubicle/1g0"},"bugs":{"url":"https://github.com/kubicle/1g0/issues"},"keywords":["baduk","go","igo","weiqi"],"dependencies":{"contra":"~1.9.4","dropbox":"~2.5.2"},"devDependencies":{"istanbul":"~0.3.22","codeclimate-test-reporter":"~0.1.1","browserify":"~10.2.4","lessify":"~1.0.1","watchify":"~3.2.2","uglify-js":"~2.8.18"}}},{}]},{},[77]);