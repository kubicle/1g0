!function t(i,n,r){function e(s,h){if(!n[s]){if(!i[s]){var a="function"==typeof require&&require;if(!h&&a)return a(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={g:{}};i[s][0].call(c.g,function(t){var n=i[s][1][t];return e(n?n:t)},c,c.g,t,i,n,r)}return n[s].g}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)e(r[s]);return e}({1:[function(t,i,n){"function"==typeof Object.create?i.g=function(t,i){t.h=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,i:!1,j:!0,k:!0}})}:i.g=function(t,i){t.h=i;var n=function(){};n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],2:[function(t,i,n){function r(){c=!1,h.length?u=h.concat(u):l=-1,u.length&&e()}function e(){if(!c){var t=setTimeout(r);c=!0;for(var i=u.length;i;){for(h=u,u=[];++l<i;)h[l].l();l=-1,i=u.length}h=null,c=!1,clearTimeout(t)}}function o(t,i){this.o=t,this.p=i}function s(){}var h,a=i.g={},u=[],c=!1,l=-1;a.m=function(t){var i=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)i[n-1]=arguments[n];u.push(new o(t,i)),1!==u.length||c||setTimeout(e,0)},o.prototype.l=function(){this.o.apply(null,this.p)},a.title="browser",a.q=!0,a.s={},a.t=[],a.version="",a.u={},a.v=s,a.addListener=s,a.A=s,a.C=s,a.removeListener=s,a.D=s,a.F=s,a.G=function(t){throw new Error("process.binding is not supported")},a.H=function(){return"/"},a.I=function(t){throw new Error("process.chdir is not supported")},a.J=function(){return 0}},{}],3:[function(t,i,n){i.g=function(t){return t&&"object"==typeof t&&"function"==typeof t.K&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],4:[function(t,i,n){(function(i,r){function e(t,i){var r={N:[],O:s};return arguments.length>=3&&(r.P=arguments[2]),arguments.length>=4&&(r.R=arguments[3]),d(i)?r.S=i:i&&n.T(r,i),x(r.S)&&(r.S=!1),x(r.P)&&(r.P=2),x(r.R)&&(r.R=!1),x(r.U)&&(r.U=!0),r.R&&(r.O=o),a(r,t,r.P)}function o(t,i){var n=e.da[i];return n?"["+e.R[n][0]+"m"+t+"["+e.R[n][1]+"m":t}function s(t,i){return t}function h(t){var i={};return t.forEach(function(t,n){i[t]=!0}),i}function a(t,i,r){if(t.U&&i&&C(i.V)&&i.V!==n.V&&(!i.constructor||i.constructor.prototype!==i)){var e=i.V(r,t);return m(e)||(e=a(t,e,r)),e}var o=u(t,i);if(o)return o;var s=Object.keys(i),d=h(s);if(t.S&&(s=Object.getOwnPropertyNames(i)),S(i)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(i);if(0===s.length){if(C(i)){var v=i.name?": "+i.name:"";return t.O("[Function"+v+"]","special")}if(k(i))return t.O(RegExp.prototype.toString.call(i),"regexp");if(M(i))return t.O(Date.prototype.toString.call(i),"date");if(S(i))return c(i)}var y="",b=!1,w=["{","}"];if(g(i)&&(b=!0,w=["[","]"]),C(i)){var x=i.name?": "+i.name:"";y=" [Function"+x+"]"}if(k(i)&&(y=" "+RegExp.prototype.toString.call(i)),M(i)&&(y=" "+Date.prototype.toUTCString.call(i)),S(i)&&(y=" "+c(i)),0===s.length&&(!b||0==i.length))return w[0]+y+w[1];if(0>r)return k(i)?t.O(RegExp.prototype.toString.call(i),"regexp"):t.O("[Object]","special");t.N.push(i);var j;return j=b?l(t,i,r,d,s):s.map(function(n){return f(t,i,r,d,n,b)}),t.N.pop(),p(j,y,w)}function u(t,i){if(x(i))return t.O("undefined","undefined");if(m(i)){var n="'"+JSON.stringify(i).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.O(n,"string")}return b(i)?t.O(""+i,"number"):d(i)?t.O(""+i,"boolean"):v(i)?t.O("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,i,n,r,e){for(var o=[],s=0,h=i.length;h>s;++s)B(i,String(s))?o.push(f(t,i,n,r,String(s),!0)):o.push("");return e.forEach(function(e){e.match(/^\d+$/)||o.push(f(t,i,n,r,e,!0))}),o}function f(t,i,n,r,e,o){var s,h,u;if(u=Object.getOwnPropertyDescriptor(i,e)||{value:i[e]},u.get?h=u.set?t.O("[Getter/Setter]","special"):t.O("[Getter]","special"):u.set&&(h=t.O("[Setter]","special")),B(r,e)||(s="["+e+"]"),h||(t.N.indexOf(u.value)<0?(h=v(n)?a(t,u.value,null):a(t,u.value,n-1),h.indexOf("\n")>-1&&(h=o?h.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+h.split("\n").map(function(t){return"   "+t}).join("\n"))):h=t.O("[Circular]","special")),x(s)){if(o&&e.match(/^\d+$/))return h;s=JSON.stringify(""+e),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.O(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.O(s,"string"))}return s+": "+h}function p(t,i,n){var r=0,e=t.reduce(function(t,i){return r++,i.indexOf("\n")>=0&&r++,t+i.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?n[0]+(""===i?"":i+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+i+" "+t.join(", ")+" "+n[1]}function g(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function v(t){return null===t}function y(t){return null==t}function b(t){return"number"==typeof t}function m(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function x(t){return void 0===t}function k(t){return j(t)&&"[object RegExp]"===T(t)}function j(t){return"object"==typeof t&&null!==t}function M(t){return j(t)&&"[object Date]"===T(t)}function S(t){return j(t)&&("[object Error]"===T(t)||t instanceof Error)}function C(t){return"function"==typeof t}function G(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function T(t){return Object.prototype.toString.call(t)}function D(t){return 10>t?"0"+t.toString(10):t.toString(10)}function O(){var t=new Date,i=[D(t.getHours()),D(t.getMinutes()),D(t.getSeconds())].join(":");return[t.getDate(),H[t.getMonth()],i].join(" ")}function B(t,i){return Object.prototype.hasOwnProperty.call(t,i)}var E=/%[sdj%]/g;n.format=function(t){if(!m(t)){for(var i=[],n=0;n<arguments.length;n++)i.push(e(arguments[n]));return i.join(" ")}for(var n=1,r=arguments,o=r.length,s=String(t).replace(E,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(i){return"[Circular]"}default:return t}}),h=r[n];o>n;h=r[++n])s+=v(h)||!j(h)?" "+h:" "+e(h);return s},n.L=function(t,e){function o(){if(!s){if(i.throwDeprecation)throw new Error(e);i.traceDeprecation?console.trace(e):console.error(e),s=!0}return t.apply(this,arguments)}if(x(r.process))return function(){return n.L(t,e).apply(this,arguments)};if(i.noDeprecation===!0)return t;var s=!1;return o};var U,I={};n.M=function(t){if(x(U)&&(U=i.s.NODE_DEBUG||""),t=t.toUpperCase(),!I[t])if(new RegExp("\\b"+t+"\\b","i").test(U)){var r=i.pid;I[t]=function(){var i=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,i)}}else I[t]=function(){};return I[t]},n.V=e,e.R={bold:[1,22],X:[3,23],Y:[4,24],inverse:[7,27],Z:[37,39],$:[90,39],_:[30,39],blue:[34,39],aa:[36,39],green:[32,39],ba:[35,39],red:[31,39],ca:[33,39]},e.da={ea:"cyan",number:"yellow",fa:"yellow",undefined:"grey",ga:"bold",ha:"green",ia:"magenta",ja:"red"},n.isArray=g,n.ka=d,n.la=v,n.ma=y,n.na=b,n.oa=m,n.pa=w,n.qa=x,n.ra=k,n.sa=j,n.ta=M,n.ua=S,n.va=C,n.wa=G,n.isBuffer=t("./support/isBuffer");var H=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",O(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n.T=function(t,i){if(!i||!j(i))return t;for(var n=Object.keys(i),r=n.length;r--;)t[n[r]]=i[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":3,_process:2,inherits:1}],5:[function(t,i,n){i.g={".cafeAuLait":{},".neonBlack":{body:{backgroundColor:"#000"},button:{backgroundColor:"#000",color:"#f8a3e1",borderColor:"#5d80c6"},"button+toggled":{backgroundColor:"#380966",color:"#cad904"},".statusBar":{backgroundColor:"#c7cced",border:"#07b2ff 1px solid","box-shadow":"3px 3px 20px #537cc6"},".board":{backgroundColor:"#002"},".mainControls":{color:"#fdf"},".settingBtnIcon":{"-webkit-filter":"hue-rotate(67deg) grayscale(0.8) brightness(2)"},".dialog":{backgroundColor:"#0d0217",color:"#fdf",boxShadow:"#3fb 3px 3px 20px",border:"solid #b395d7 1px"},".dialogTitle":{backgroundColor:"#0b3557",color:"#fffaff",textShadow:"#06b1ff 4px 4px 7px",borderColor:"#fff",boxShadow:"#00abff 3px 3px 20px"},".playerButton":{backgroundColor:"#5034a9"},".sizeButton":{backgroundColor:"#5034a9"},".boardImgFrame":{backgroundColor:"#09132a",boxShadow:"#3fb 3px 3px 20px"},".curSize":{textShadow:"#0a9da9 3px 3px 5px"},".dropDwn":{backgroundColor:"#000"},".inputBox":{backgroundColor:"#000"},".groupFrame":{border:"1px solid #5c517b"},".devDiv":{backgroundColor:"#5a3571",color:"#38cead",border:"1px solid #400ac1"},".devLogBox":{color:"#000"}}}},{}],6:[function(t,i,n){i.g={".cgos":{xa:!0,ya:!0},".chinese":{xa:!0,ya:!0},".japanese":{}}},{}],7:[function(t,i,n){"use strict";function r(t){this.history=[],this.Da=[],this.Ea=[],this.Fa=[d,d],this.Ga(v),this.Ha=null,this.Ia=this.Ja=0,this.Ka=this.La=p,this.Ma=this.Na=null,this.Oa=this.Pa=null,t&&this.K(t)}function e(t){switch(t[0]){case"B":return p;case"W":return g;default:return}}function o(t,i){return(i===p?"B-":"W-")+t}var s=t("./constants"),h=t("./Goban"),a=t("./Grid"),u=t("./HandicapSetter"),c=t("./log"),l=t("./SgfReader"),f=t("../config/rules.json"),p=s.za,g=s.Aa,d=s.Ba,v=s.Ca;i.g=r,r.prototype.Qa=function(t,i,n){this.Fa[t]=i,null!==n&&this.Ea[t]||(this.Ea[t]=n)},r.prototype.Ga=function(t,i){t=t||"unspecified",this.Ra=t;var n=f["."+t.toLowerCase()];if(!n){if(!i)throw new Error("Invalid rules: "+t+"\nValid values: "+Object.keys(f).map(function(t){return t.substr(1)}).join(", "));n=f["."+v.toLowerCase()]}this.ya=n.ya||!1,this.xa=n.xa||!1},r.prototype.K=function(t){this.Sa(t.La),this.Fa=t.Fa.concat(),this.Ea=t.Ea.concat(),this.Ga(t.Ra,!0),this.Ta(t.Ha.Ua,t.Ia,t.Ja),this.Va(t.history.join(","))},r.prototype.Ta=function(t,i,n){return this.history.length=0,this.Da.length=0,this.Na=this.Ma=!1,this.Oa=this.Pa=null,this.Ha&&t===this.Ha.Ua?this.Ha.clear():this.Ha=new h(t),this.Ha.Wa(this.ya),i=void 0!==i?i:0,this.Xa(i),this.Ja=void 0!==n?n:i?.5:6.5,this.Ha.Ua!==t?this.Ya("Size could not be set: "+t):this.Ia!==i?this.Ya("Handicap could not be set: "+i):!0},r.prototype.Sa=function(t){this.Ka=this.La=t},r.prototype.Xa=function(t){if(this.history.length>0)throw new Error("Handicap cannot be changed during a game");return this.Ia=u.Za(this.Ha,t),this.Sa(this.Ia>0?g:p),!0},r.prototype.$a=function(t,i){if(c.error&&c.error(t),!i)throw new Error(t);return i.push(t),!1},r.prototype.Va=function(t,i){if(!t)return!0;for(var n=t.split(","),r=0;r<n.length;r++)if(!this._a(n[r]))return this.$a("Failed playing loaded move #"+(r+1)+":\n"+this.ab().join(", "),i);return!0},r.prototype.bb=function(t,i,n){var r=new l;try{r.cb(t,n)}catch(e){return this.$a("Failed loading SGF moves:\n"+e,i)}return this.Ta(r.eb,0,r.Ja),this.Fa[g]=r.fb("whiteSpecies",d),this.Fa[p]=r.fb("blackSpecies",d),this.Ea[g]=r.fb("playerWhite"),this.Ea[p]=r.fb("playerBlack"),this.Ga(r.fb("rules"),!0),this.Va(r.gb(),i)},r.prototype.hb=function(t,i){return l.ib(t)?this.bb(t,i):this.Va(t,i)},r.prototype.jb=function(t){return"B"!==t[0]&&"W"!==t[0]?t:"-"!==t[1]?t.substr(1):t.substr(2)},r.prototype._a=function(t){if(this.Na&&t.indexOf("undo")<0)return this.Ya("Game already ended");if(/^[B|W]?-?[a-z][1-2]?[0-9]$/.test(t))return this.kb(t);var i=this.jb(t);return i.startsWith("pass")?this.lb():i.startsWith("resi")?this.mb(e(t)):"undo"===i?this.nb():"half_undo"===i?this.nb(!0):i.startsWith("hand")?this.Xa(i.split(":")[1]):i.startsWith("load:")?this.Va(i.slice(5)):this.Ya("Invalid command: "+i.substr(0,20))},r.prototype.kb=function(t){var i=this.ob(t);3===i.length&&(this.Ka=i[2]);var n=i[0],r=i[1];return this.Ha.pb(n,r,this.Ka)?(this.Ha.qb(n,r,this.Ka),this.rb(t),this.sb(),!0):this.Ya("Invalid move: "+t)},r.prototype.ob=function(t){var i=e(t);void 0!==i&&(t=this.jb(t));var n=a.tb(t,!0);if(!n){if("pass"===t||t.startsWith("resi"))return null;throw new Error("Illegal move parsed: "+t)}return void 0!==i?n.concat(i):n},r.prototype.mb=function(t,i){t=void 0!==t?t:this.Ka,this.Oa=t,this.Pa=i;var n=o("resign",t)+(i?"-"+i:"");return this.rb(n),this.sb(),this.Na=!0,this.Ma=!1,!0},r.prototype.lb=function(){var t=this.history[this.history.length-1];return t&&t.endsWith("pass")&&(this.Ma=!0),this.rb(o("pass",this.Ka)),this.sb(),!0},r.prototype.ub=function(t,i){return this.Ma?(this.Ma=!1,t?(this.Na=!0,!0):(i!==this.Ka&&(this.history.pop(),this.sb()),!0)):this.Ya("The game is not ending yet")},r.prototype.vb=function(){return this.history.length},r.prototype.wb=function(){var t=this.Ia>0?"handicap:"+this.Ia+",":"",i=this.history,n=i.length&&2===i[0].length?o("",this.La):"";return t+n+i.join(",")},r.prototype.Ya=function(t){return this.Da.push(t),!1},r.prototype.ab=function(){var t=this.Da;return this.Da=[],t},r.prototype.sb=function(){this.Ka=1-this.Ka},r.prototype.rb=function(t){return this.history.push(t)},r.prototype.nb=function(t){var i=t?1:2;if(this.history.length<i)return this.Ya("Nothing to undo");this.Na=this.Ma=!1;for(var n=i;n>=1;n--){var r=this.history.pop();!r.endsWith("pass")&&r.indexOf("resi")<0&&this.Ha.xb()}return t&&this.sb(),!0}},{"../config/rules.json":6,"./Goban":10,"./Grid":11,"./HandicapSetter":13,"./SgfReader":15,"./constants":40,"./log":43}],8:[function(t,i,n){"use strict";function r(t){this.yb=t,this.zb=null,this.Ab=!1}function e(t,i){return void 0===i?"":t+"["+i+"]"}function o(t,i,n){var r=t.indexOf(i+"[");if(0>r)return n;var e=t.substring(r+i.length+1,t.indexOf("]",r));switch(typeof n){case"number":return parseFloat(e);default:return e}}function s(t,i){return o(t,i===u?"PB":"PW")||(o(t,i===u?"BS":"WS",0)?"AI":"Human")}var h=t("./constants"),a=t("./localPref"),u=h.za,c=h.Aa,l=5;i.g=r,r.prototype.Bb=function(){this.Ab=!0},r.prototype.Cb=function(){a.Db("pendingGame",this.Ab?this.Eb():"")},r.prototype.Fb=function(){return a.Gb("pendingGame")},r.prototype.Hb=function(){var t=this.yb,i="";return i+=e("SZ",t.Ha.Ua),i+=e("KM",t.Ja),i+=e("HA",t.Ia),i+=e("RU",t.Ra),i+=e("DT",(new Date).toISOString().substr(0,10)),i+=e("WS",t.Fa[c]),i+=e("BS",t.Fa[u]),i+=e("PW",t.Ea[c]),i+=e("PB",t.Ea[u])},r.prototype.Ib=function(){var t=this.Eb(),i=a.Gb("mostRecentGames",[]);null===this.zb?(i.unshift(t),i.length>l&&i.splice(l)):(i.splice(this.zb,1),i.unshift(t)),a.Db("mostRecentGames",i),this.zb=null,this.Ab=!1},r.prototype.Jb=function(){return this.Kb(this.Hb())},r.prototype.Kb=function(t){var i=o(t,"SZ");return o(t,"DT")+" "+i+"x"+i+" "+s(t,c)+" VS "+s(t,u)},r.prototype.Lb=function(){for(var t=a.Gb("mostRecentGames",[]),i=[],n=0;n<t.length;n++)i.push(this.Kb(t[n]));return i},r.prototype.Mb=function(t){var i=a.Gb("mostRecentGames",[]);return this.zb=t,i[t]},r.prototype.Eb=function(){for(var t=this.yb,i=t.Ha.Ua,n=t.La,r=t.history,e="(;FF[4]GM[1]"+this.Hb(),o=0;o<r.length;o++){var s,h=r[o],a=t.ob(h);if(a)s=String.fromCharCode(96+a[0])+String.fromCharCode(97+i-a[1]),void 0!==a[2]&&(n=a[2]);else{if(!h.endsWith("pass"))break;s=""}e+=";"+(n===u?"B":"W")+"["+s+"]",n=1-n}return e+=")"}},{"./constants":40,"./localPref":42}],9:[function(t,i,n){"use strict";function r(t,i,n){this.Nb=t||{},this.Ob=i||{},this.name=n||"#"+o++}var e=t("./helper"),o=1;i.g=r;var s=.05,h=0,a=1;r.prototype.clone=function(t){return new r(e.clone(this.Nb),e.clone(this.Ob),t)},r.prototype.Pb=function(t){this.Ob=t},r.prototype.toString=function(){var t="{"+this.name+" - ";for(var i in this.Nb)t+=i+":"+this.Nb[i].toFixed(2)+", ";return t.Qb(", ")+"}"},r.prototype.Rb=function(t){var i=0;for(var n in this.Nb){var r=this.Nb[n],e=t.Nb[n];0>e!=0>r?0>e?(r-=e,e=0):(e-=r,r=0):(r=Math.abs(r),e=Math.abs(e));var o;o=0===e?r>1?1:r:0===r?e>1?1:e:1-(e>=r?r/e:e/r),i+=o}return i},r.prototype.get=function(t,i,n,r){void 0===n&&(n=null),void 0===r&&(r=null);var e=this.Nb[t];if(e)return e;if(this.Nb[t]=i,(n||r)&&(this.Ob[t]=[n,r]),n&&r&&n>r)throw new Error("Limits are invalid: "+n+" > "+r);return i},r.prototype.Sb=function(){return JSON.stringify(this)},r.Tb=function(t){var i=JSON.parse(t);this.Nb=i.Nb,this.Ob=i.Ob},r.prototype.Ub=function(t,i,n,r,e){var o=this.Nb,s=t.Nb;i.Pb(this.Ob),n.Pb(this.Ob);var h=i.Nb,a=n.Nb,u=~~(Math.random()*o.length),c=~~(Math.random()*u),l=0;for(var f in o)c>l||l>u?(h[f]=o[f],a[f]=s[f]):(h[f]=s[f],a[f]=o[f]),Math.random()<r&&(h[f]=this.Vb(f,h[f],e)),Math.random()<r&&(a[f]=this.Vb(f,a[f],e)),l++},r.prototype.Vb=function(t,i,n){var r,e=this.Ob[t];if(e){var o=e[h],u=e[a];if(Math.random()<n)r=o+Math.random()*(u-o);else{var c=1+2*Math.random()*s-s;r=i*c,o&&o>r&&(r=o),u&&r>u&&(r=u)}}else r=i+10*(Math.random()-.5);return r},r.prototype.Wb=function(){for(var t in this.Nb)this.Nb[t]=this.Vb(t,this.Nb[t],1);return this}},{"./helper":41}],10:[function(t,i,n){"use strict";function r(t){if(void 0===t&&(t=19),t!==~~t||3>t)throw new Error("Invalid goban size: "+t);this.Ua=t,this.Yb=new o(t,a),this.Zb=new o(t,s.Xb),this.$b=this.Zb._b;var i,n;for(n=t;n>=1;n--)for(i=t;i>=1;i--)this.$b[n][i]=new s(this,i,n,u);for(n=1;t>=n;n++)for(i=1;t>=i;i++)this.$b[n][i].ac();r.bc=new h(this,new s(this,-50,-50,u),-100,0),this.cc=[r.bc],this.dc=[r.bc],this.ec=[],this.fc=0,this.history=[],this.Wa(!1)}var e=t("./constants"),o=t("./Grid"),s=t("./Stone"),h=t("./Group"),a=e.Xb,u=e.EMPTY;i.g=r,r.prototype.clear=function(){for(var t=1;t<=this.Ua;t++)for(var i=1;i<=this.Ua;i++){var n=this.$b[t][i];n.group&&n.group.clear()}this.cc.shift(),this.dc.shift(),this.ec.concat(this.cc),this.ec.concat(this.dc),this.cc.length=0,this.dc.length=0,this.cc.push(r.bc),this.dc.push(r.bc),this.fc=0,this.history.length=0,this.Wa(!1)},r.prototype.gc=function(t,i){var n=++this.fc,r=this.ec.pop();return r?r.hc(t,i,n):r=new h(this,t,i,n),r},r.prototype.ic=function(t){t.jc===this.fc&&this.fc--,this.ec.push(t)},r.prototype.kc=function(){return this.Zb.lc()},r.prototype.mc=function(t){this.Yb.mc(t);for(var i=this.Ua;i>=1;i--)for(var n=1;n<=this.Ua;n++){var r=this.Yb._b[i][n];r!==u&&this.qb(n,i,r)}},r.prototype.nc=function(){for(var t={},i=this.Ua;i>=1;i--)for(var n=this.Ua;n>=1;n--){var r=this.$b[i][n].group;r&&(t[r.jc]=r)}return t},r.prototype.oc=function(){for(var t,i="Board:\n"+this.toString()+"\nGroups:\n"+this.Zb.pc(function(t){return t.group?""+t.group.jc:"."})+"\nStones in groups:\n",n={},r=this.Zb._b,e=0;t=r[e],e<r.length;e++)for(var o,s=t,h=0;o=s[h],h<s.length;h++)o&&o.group&&(n[o.group.jc]=o.group);for(var a=1;a<=this.fc;a++)n[a]&&(i+=n[a].oc()+"\n");return i},r.prototype.toString=function(){return this.Zb.pc()},r.prototype.pb=function(t,i,n){if(1>t||t>this.Ua||1>i||i>this.Ua)return!1;var r=this.$b[i][t];if(r.color!==u)return!1;if(r.qc(n))return!1;if(this.rc){if(this.sc[this.tc(t,i,n)])return!1}else if(r.uc(n))return!1;return!0},r.prototype.vc=function(t,i){return this.$b[i][t]},r.prototype.wc=function(t,i){return this.$b[i][t].color},r.prototype.xc=function(t,i){return this.$b[i][t].xc()},r.prototype.vb=function(){return this.history.length},r.prototype.qb=function(t,i,n){this.yc(t,i,n);var r=this.$b[i][t];if(r.color!==u)throw new Error("Tried to play on existing stone in "+r);return this.zc(t,i,n)},r.prototype.xb=function(){if(!this.history.length)throw new Error("Extra undo");this.history.pop().Ac(),this.yc()},r.prototype.zc=function(t,i,n){var r=this.$b[i][t];return this.history.push(r),r.Bc(n),r},r.prototype.Cc=function(){this.history.pop().Ac()},r.prototype.Dc=function(){return this.cc[this.cc.length-1]},r.prototype.Ec=function(){return this.history[this.history.length-1]},r.prototype.Fc=function(t){t=t||[0,0];for(var i=this.cc.length-1;i>=0;i--){var n=this.cc[i];t[n.color]+=n.Gc.length}return t},r.prototype.Wa=function(t){if(this.history.length>0)throw new Error("Superko rule changed during game");this.rc=t,t?(this.Hc=this.Ic(),this.Jc=[],this.sc={}):(this.Hc=null,this.Jc=this.sc=null)},r.prototype.yc=function(t,i,n){this.rc?t?(this.Jc.push(this.Hc),this.sc[this.Hc]=this.history.length,this.Hc=this.tc(t,i,n)):(this.Hc=this.Jc.pop(),this.sc[this.Hc]=null):this.Hc=null},r.prototype.tc=function(t,i,n){for(var r=this.Kc(this.Hc,t,i,n),e=this.vc(t,i).Lc(1-n),o=e.length-1;o>=0;o--)if(!(e[o].Mc>1))for(var s=e[o].Gc,h=s.length-1;h>=0;h--){var a=s[h];r=this.Kc(r,a.Nc,a.Oc,u)}return r},r.prototype.Pc=function(){return this.rc?this.Hc:(this.Hc||(this.Hc=this.kc()),this.Hc)};var c=33,l="0".charCodeAt();r.prototype.Ic=function(){for(var t="",i="",n=this.Ua,r=1;n>=r;r++)for(var e=this.$b[r],o=1;n>=o;o++)t+=String.fromCharCode(l+e[o].color+1),4===t.length&&(i+=String.fromCharCode(parseInt(t,3)+c),t="");return t.length&&(t=(t+"000").substr(0,4),i+=String.fromCharCode(parseInt(t,3)+c)),i},r.prototype.Kc=function(t,i,n,r){var e,o=(n-1)*this.Ua+(i-1),s=~~(o/4),h=o%4;if(r===u){var a=("000"+(t.charCodeAt(s)-c).toString(3)).slice(-4),l=a.substr(0,h)+"0"+a.substr(h+1);e=parseInt(l,3)+c}else e=t.charCodeAt(s)+(1<<r)*Math.pow(3,3-h);return t.substr(0,s)+String.fromCharCode(e)+t.substr(s+1)}},{"./Grid":11,"./Group":12,"./Stone":16,"./constants":40}],11:[function(t,i,n){"use strict";function r(t,i,n){if(void 0===i)throw new Error("Grid init value must be defined");this.Ua=t,void 0===n?this._b=a.Qc(t+2,t+2,i):(this._b=a.Qc(t+2,t+2,n),this.init(i))}function e(t){if(t===u)return"(BORDER)";if(t>=r.Zc)return String.fromCharCode("A".charCodeAt()+t-r.Zc);if(t<r._c||t>=r.Xc.length)throw new Error("Invalid color "+t);return 0>t&&(t+=r.Xc.length),r.Xc[t]}function o(t){return e("number"==typeof t?t:t.color)}function s(t){for(var i="",n=t.length-1;n>=0;n--)i+=t[n];return i}var h=t("./constants"),a=t("./helper"),u=h.Xb;i.g=r,r.Rc=["black","white"],r.Sc="+",r.Tc="?",r.Uc="@O",r.Vc="&#",r.Wc="-:",r.Xc=r.Uc+r.Vc+r.Wc+r.Tc+r.Sc,r.Yc=r.Tc+r.Sc+r.Xc,r.Zc=100,r.$c=-1,r._c=-2,r.ad=2,r.bd=4,r.dd=[0,0,-1,1,1,-1,-1,1],r.ed="-'?.:",r.prototype.init=function(t){if(void 0===t)throw new Error("Grid init value must be defined");for(var i=this.Ua;i>=1;i--)for(var n=this._b[i],r=this.Ua;r>=1;r--)n[r]=t},r.prototype.K=function(t){if(t.Ua!==this.Ua)throw new Error("Cannot copy between different sized grids");for(var i=this.Ua;i>=1;i--)for(var n=this._b[i],r=t._b[i],e=this.Ua;e>=1;e--)n[e]=r[e];return this},r.prototype.fd=function(t){var i=t.Zb;if(i.Ua!==this.Ua)throw new Error("Cannot copy between different sized grids");for(var n=this.Ua;n>=1;n--)for(var r=this._b[n],e=i._b[n],o=this.Ua;o>=1;o--)r[o]=e[o].color;return this},r.gd=function(t){return r.Rc[t]},r.hd=function(t){return r.Yc.indexOf(t)+r._c},r.prototype.pc=function(t){return this.jd(!0,"\n",t||o)},r.prototype.lc=function(t){return this.jd(!1,",",t||o)},r.prototype.jd=function(t,i,n){var e,o,s,h=new r(this.Ua,"")._b,a=1;for(o=this.Ua;o>=1;o--)for(e=1;e<=this.Ua;e++)s=n(this._b[o][e]),null!==s&&(h[o][e]=s,a=Math.max(a,s.length));var u=a,c="          ",l="";for(o=this.Ua;o>=1;o--){for(t&&(l+="%2d".format(o)+" "),e=1;e<=this.Ua;e++)s=h[o][e],s.length<u&&(s=c.substr(1,u-s.length)+s),l+=s;l+=i}if(t){for(l+="   ",e=1;e<=this.Ua;e++)l+=c.substr(1,u-1)+r.kd(e);l+="\n"}return"\n"!==i&&(l=l.ld()),l},r.prototype.toString=function(){for(var t="",i=this.Ua;i>=1;i--){for(var n=1;n<=this.Ua;n++)t+=e(this._b[i][n]);t+="\n"}return t},r.prototype.kc=function(){return"object"==typeof this._b[1][1]?this.lc(function(t){return e(t.color)}):this.lc(function(t){return e(t)})},r.prototype.mc=function(t){var i=t.split(/\"|,/);if(i.length!==this.Ua)throw new Error("Invalid image: "+i.length+" rows instead of "+this.Ua);for(var n=this.Ua;n>=1;n--){var e=i[this.Ua-n];if(e.length!==this.Ua)throw new Error("Invalid image: row "+e);for(var o=1;o<=this.Ua;o++)this._b[n][o]=r.hd(e[o-1])}},r.md=function(t){return t.split(",").reverse().join()},r.nd=function(t){return t.split(",").map(s).join()},r.od=function(t){return s(t)},r.pd=function(t){for(var i="",n=t.split(","),r=n[0].length-1;r>=0;r--){i+=",";for(var e=0;e<n.length;e++)i+=n[e][r]}return i.substr(1)};var c="abcdefghjklmnopqrstuvwxyz";r.tb=function(t,i){var n=c.indexOf(t[0])+1,r=parseInt(t.substr(1,2));if(!n||isNaN(r)){if(i)return null;throw new Error("Illegal move parsed: "+t)}return[n,r]},r.qd=function(t,i){return c[t-1]+i},r.kd=function(t){return c[t-1]}},{"./constants":40,"./helper":41}],12:[function(t,i,n){"use strict";function r(t,i,n,r){this.Ha=t,this.Gc=[i],this.Mc=n,this.color=i.color,this.rd=null,this.sd=null,this.td=null,this.jc=r,this.ud=null,this.vd=this.wd=0}var e=t("./constants"),o=t("./Grid"),s=t("./log"),h=e.EMPTY;i.g=r,r.prototype.hc=function(t,i,n){this.Gc.length=0,this.Gc.push(t),this.Mc=i,this.color=t.color,this.rd=this.sd=this.td=null,this.jc=n,this.vd=this.wd=0},r.prototype.clear=function(){for(var t=this.Gc.length-1;t>=0;t--)this.Gc[t].clear();this.Ha.ic(this)},r.prototype.toString=function(t){if(0===t)return"#"+this.jc;if(1===t)return this.Gc[0]+" x"+this.Gc.length;for(var i,n="{group #"+this.jc+" of "+this.Gc.length+" "+o.gd(this.color)+" stones [",r=this.Gc,e=0;i=r[e],e<r.length;e++)n+=i.xd()+",";return n=n.ld(),n+="], lives:"+this.Mc,this.rd&&(n+=" MERGED with #"+this.rd.jc),this.td&&(n+=" KILLED by "+this.td.xd()),n+="}"},r.prototype.yd=function(){return this.Gc.length&&this.Gc[0].group===this},r.prototype.oc=function(){return this.toString()},r.prototype.zd=function(){return this.Gc.map(function(t){return t.xd()}).sort().join(",")},r.prototype.Ad=function(){for(var t,i=[],n=this.Gc,r=0;t=n[r],r<n.length;r++)for(var e,o=t.Bd,s=0;e=o[s],s<o.length;s++)e.color===h&&i.indexOf(e)<0&&i.push(e);if(i.length!==this.Mc)throw new Error("Wrong life count for group");return i},r.prototype.Cd=function(){for(var t,i=[],n=1-this.color,r=this.Gc,e=0;t=r[e],e<r.length;e++)for(var o,h=t.Bd,a=0;o=h[a],a<h.length;a++)o.color===n&&i.indexOf(o.group)<0&&i.push(o.group);return s.Dd,i},r.prototype.Ed=function(t){for(var i,n=-1,r=t.Bd,e=0;i=r[e],e<r.length;e++)if(i.color===h){n++;for(var o,a=i.Bd,u=0;o=a[u],u<a.length;u++)if(o.group===this&&o!==t){n--;break}}return s.Dd,n},r.prototype.Fd=function(t){if(s.Dd,this.Gc.push(t),this.Mc+=this.Ed(t),this.Mc<0)throw new Error("Unexpected error (lives<0 on connect)");s.Dd},r.prototype.Gd=function(t){if(s.Dd,this.Gc.length>1){if(this.Mc-=this.Ed(t),this.Mc<0)throw new Error("Lives<0 on disconnect")}else this.Ha.ic(this),s.Dd;if(this.Gc.pop()!==t)throw new Error("Unexpected error (disconnect order)")},r.prototype.Hd=function(t){return this.Mc--,this.Mc<=0?this.Id(t):void 0},r.prototype.Jd=function(t){if(this.Mc--,s.Dd,this.Mc<1)throw new Error("Unexpected error (lives<1 on attack by resucitated)")},r.prototype.Kd=function(t){this.Mc++,s.Dd},r.prototype.Ld=function(t,i){if(t.rd===this||t===this||this.color!==t.color)throw new Error("Invalid merge");s.Dd,this.Mc+=t.Gc.length;for(var n,r=t.Gc,e=0;n=r[e],e<r.length;e++)n.Md(this),this.Fd(n);t.rd=this,t.sd=i,this.Ha.dc.push(t),s.Dd},r.prototype.Nd=function(t){s.Dd;for(var i,n=t.Gc,r=n.length-1;i=n[r],r>=0;r--)this.Gd(i),i.Md(t);this.Mc-=t.Gc.length,t.sd=t.rd=null,s.Dd},r.prototype.Od=function(t){for(var i=this.Ha.dc,n=i.length-1;n>=0;n--){var r=i[n];if(r.sd!==t||r.rd!==this)break;this.Nd(r),i.pop()}},r.prototype.Id=function(t){if(s.Dd,this.Mc<0)throw new Error("Unexpected error (lives<0)");for(var i,n=this.Gc,r=0;i=n[r],r<n.length;r++){for(var e,o=i.Lc(1-this.color),h=0;e=o[h],h<o.length;h++)e.Kd(i);i.Pd()}this.td=t,this.Ha.cc.push(this),s.Dd},r.prototype.Qd=function(){this.td=null,this.Mc=1;for(var t,i=this.Gc,n=0;t=i[n],n<i.length;n++){t.Rd(this);for(var r,e=t.Lc(1-this.color),o=0;r=e[o],o<e.length;o++)r.Jd(t)}},r.Sd=function(t){for(var i=t.Ha.cc,n=i.length-1;n>=0;n--){var r=i[n];if(r.td!==t)break;i.pop(),s.Dd,r.Qd()}}},{"./Grid":11,"./constants":40,"./log":43}],13:[function(t,i,n){"use strict";function r(){}var e=t("./constants"),o=t("./Grid"),s=e.za,h=e.Aa;i.g=r,r.Za=function(t,i){if(0===i||"0"===i)return 0;if("number"==typeof i||i.indexOf("=")<0)return r.Td(t,~~i);var n;switch(i[0]){case"B":n=s;break;case"W":n=h;break;default:throw new Error('Invalid "hand" command: '+i)}for(var e,a=i.indexOf("="),u=i.substring(a+1).split("-"),c=u,l=0;e=c[l],l<c.length;l++){var f=o.tb(e);t.qb(f[0],f[1],n)}return u.length},r.Td=function(t,i){var n=t.Ua;if(i>4&&(9>n||n%2===0)&&(i=4),5>=n)return 0;for(var r=13>n?2:3,e=1+r,o=(1+n)/2,h=n-r,a=0;i>a;a++){switch(i%2===1&&i>4&&a===i-1&&(a=8),a){case 0:var u=e,c=e;break;case 1:u=h,c=h;break;case 2:u=e,c=h;break;case 3:u=h,c=e;break;case 4:u=e,c=o;break;case 5:u=h,c=o;break;case 6:u=o,c=e;break;case 7:u=o,c=h;break;case 8:u=o,c=o}t.qb(u,c,s)}return i}},{"./Grid":11,"./constants":40}],14:[function(t,i,n){"use strict";function r(t){this.yb=t,this.Ud=new o.Wd.Vd(t)}function e(t){return 1!==t?t+" points":"1 point"}var o=t("./ai"),s=t("./constants"),h=t("./Grid"),a=s.za,u=s.Aa;i.g=r,r.prototype.Xd=function(){var t=this.Yd()[0];return t[a]-t[u]},r.prototype.Zd=function(){return this.$d(this.Yd())},r.prototype._d=function(){return this.Yd()},r.prototype.ae=function(){return this.Ud.ae()},r.prototype.Yd=function(){var t=this.yb,i=t.Ha,n=t.Ja;if(null!==t.Oa)return["resi",1-t.Oa,t.Pa];this.Ud.be(i);var r=this.Ud.ce,e=this.Ud.de,o=[r[a]+e[u],r[u]+e[a]+n],s=[[r[a],e[u],0],[r[u],e[a],n]];return[o,s]},r.prototype.$d=function(t){if("resi"===t[0]){var i,n=h.Rc[t[1]],r=h.Rc[1-t[1]];switch(t[2]){case"time":i=r+" ran out of time";break;case null:case void 0:i=r+" resigned";break;default:i=r+" disqualified: "+t[2]}return[n+" won ("+i+")"]}if(!t||2!==t.length)throw new Error("Invalid score info: "+t);var o=t[0],s=t[1];if(o.length!==s.length)throw new Error("Invalid score info");var c=[],l=o[a]-o[u];c.push(this.ee(l));for(var f=a;u>=f;f++){var p=s[f],g=p[0],d=p[1],v=p[2],y=0!==d?" "+(0>d?"-":"+")+" "+Math.abs(d)+" prisoners":"",b=v>0?" + "+v+" komi":"",m=d||v?" ("+g+y+b+")":"";c.push(h.gd(f)+": "+e(o[f])+m)}return c},r.prototype.ee=function(t){if(0===t)return"Tie game";var i=t>0?a:u;return h.gd(i)+" wins by "+e(Math.abs(t))}},{"./Grid":11,"./ai":39,"./constants":40}],15:[function(t,i,n){"use strict";function r(t,i,n){g[t]=[i,n]}function e(t,i){d[t]=i}function o(){g={},d={},r("GM","int",null),r("FF","int","fileFormat"),r("SZ","int","boardSize"),r("AB","move",null),r("AW","move",null),r("HA","int","handicap"),r("KM","real","komi"),r("RU","text","rules"),r("RE","text","result"),r("PB","text","playerBlack"),r("PW","text","playerWhite"),r("BS","int","blackSpecies"),r("WS","int","whiteSpecies"),r("LT","flag","enforceLosingOnTime"),r("SO","text","source"),r("ID","text","gameId"),r("AP","text","application"),r("BR","text","blackRank"),r("WR","text","whiteRank"),r("BT","text","blackTeam"),r("WT","text","whiteTeam"),r("TM","text","timeLimit"),r("OT","text","overtimeMethod"),r("EV","text","event"),r("RO","text","round"),r("DT","text","date"),r("PC","text","place"),r("GN","text","gameName"),r("ON","text","openingPlayed"),r("GC","text","gameComment"),r("C","text","comment"),r("N","text","nodeName"),r("US","text","userName"),r("AN","text","analyseAuthor"),r("CP","text","copyright"),r("CA","text","characterSet"),r("ST","text",null),e("B","move"),e("W","move"),e("AB","move"),e("AW","move"),e("BL",null),e("WL",null),e("C",null),e("CR",null),e("BM",null),e("N",null)}function s(){d||o(),this.text=null,this.fe=null,this.eb=this.Ja=0,this.ge=null,this.he=null,this.Ka=l,this.ie=null,this.vb=0}function h(t){if(t.me("a","z"))return t.charCodeAt()-97;if(t.me("A","Z"))return t.charCodeAt()-39;throw new Error("Invalid coordinate value: "+t)}function a(t){for(var i=0;;){var n=t.indexOf("]",i);if(-1===n)return-1;if("\\"!==t[n-1])return n;i=n+1}}var u=t("./constants"),c=t("./log"),l=u.za,f=u.Aa,p=["B","W"],g=null,d=null;i.g=s,s.ib=function(t){return t.trim().startsWith("(;")},s.prototype.cb=function(t,i){if(!s.ib(t))throw new Error("Not an SGF file");this.text=t,this.fe=[],this.ge=[[],[]],this.je(t),this.ke(),this.le(i)},s.prototype.gb=function(){return this.ie},s.prototype.fb=function(t,i){var n=this.he[t];return void 0!==n?n:i};var v="abcdefghjklmnopqrstuvwxyz";s.prototype.ne=function(t){if(this.eb)throw new Error("SZ set twice");this.eb=t},s.prototype.oe=function(t){if(!this.eb)throw new Error("Move seen before SZ is known");if(""===t||"tt"===t&&this.eb<=19)return"pass";var i=v[h(t[0])],n=this.eb-h(t[1]);return i+n},s.prototype.pe=function(t,i,n){n||this.vb++;
var r=t===this.Ka?"":p[t];this.vb?(this.Ka=1-t,this.ie.push(r+i)):this.ge[t].push(i)},s.prototype.qe=function(t,i){switch(i){case"text":return t;case"int":return parseInt(t);case"real":return parseFloat(t);case"flag":return!0;case"move":return this.oe(t);default:throw new Error("Invalid tag type: "+i)}},s.prototype.re=function(t,i){var n=d[t];if(void 0===n)return c.warn&&c.warn("Unknown property "+t+"["+i+"] ignored");if(n){var r=this.qe(i,n);switch(t){case"B":return this.pe(l,r);case"W":return this.pe(f,r);case"AB":return this.pe(l,r,!0);case"AW":return this.pe(f,r,!0)}}},s.prototype.se=function(t){var i=this.ge[t];return i.length?"hand:"+p[t]+"="+i.join("-")+",":""},s.prototype.le=function(t){this.ie=[],this.vb=0,this.Ka=null;for(var i=1;i<this.fe.length;i++)for(var n=this.fe[i],r=0;r<n.length;r+=2){var e=n[r]||e,o=n[r+1];this.re(e,o)}var s=t?t-1:this.ie.length;this.ie=(this.se(l)+this.se(f)+this.ie.slice(0,s).join(",")).Qb(",")},s.prototype.te=function(t,i){var n=g[t];if(void 0===n)return this.he[t]=i,c.ue("Unknown property in SGF header: "+t+"["+i+"]");var r=n[0],e=n[1],o=this.qe(i,r);return e&&(this.he[e]=o),o},s.prototype.ke=function(){this.eb=this.Ja=0,this.he={};for(var t=this.fe[0],i=0;i<=t.length-1;i+=2){var n=t[i],r=t[i+1],e=this.te(n,r);switch(n){case"GM":if(1!==e)throw new Error("SGF game is not a GO game");break;case"FF":(3>e||e>4)&&c.warn&&c.warn("SGF format "+e+". Not sure we handle it well.");break;case"SZ":this.ne(e);break;case"KM":this.Ja=e;break;case"AB":this.pe(l,e,!0);break;case"AW":this.pe(f,e,!0)}}},s.prototype.je=function(t){for(t=this.ve(t),t=this.we("(",t),t=this.xe(t),this.ye=!1;!this.ye;)t=this.xe(t);return this.we(")",t)},s.prototype.xe=function(t){if(t=this.ve(t),";"!==t[0])return this.ye=!0,t;t=this.we(";",t);for(var i=[];;){for(var n=0;t[n]&&t[n].me("A","Z");)n++;var r=t.substr(0,n);for(""===r&&this.ze("Property name expected",t),i.push(r),t=this.we(r,t);;){t=this.we("[",t);var e=a(t);0>e&&this.ze("Missing ']'",t);var o=t.substr(0,e);if(i.push(o),t=this.we(o+"]",t),"["!==t[0])break;i.push(null)}if(!t[0]||!t[0].me("A","Z"))break}return this.fe.push(i),t},s.prototype.ve=function(t){return t.trim()},s.prototype.we=function(t,i){return i.startsWith(t)||this.ze(t+" expected",i),i.replace(t,"").trim()},s.prototype.ze=function(t,i){throw new Error("Syntax error: '"+t+"' at ..."+i.substr(0,20)+"...")}},{"./constants":40,"./log":43}],16:[function(t,i,n){"use strict";function r(t,i,n,r){this.Ha=t,this.Nc=i,this.Oc=n,this.color=r,this.group=null,this.Bd=[],this.Ce=[]}var e=t("./constants"),o=t("./Grid"),s=t("./Group"),h=e.EMPTY,a=e.Xb,u=e.Ae,c=e.Be;i.g=r,r.Xb=new r(null,-1,-1,a);var l=r.De=[[0,1],[1,0],[0,-1],[-1,0]],f=r.Ee=[[1,1],[1,-1],[-1,-1],[-1,1]];r.prototype.clear=function(){this.color=h,this.group=null},r.prototype.ac=function(){for(var t=this.Ha.$b,i=c;i>=u;i--){var n=t[this.Oc+l[i][1]][this.Nc+l[i][0]];n.color===h&&this.Bd.push(n),this.Ce.push(n),n=t[this.Oc+f[i][1]][this.Nc+f[i][0]],this.Ce.push(n)}},r.prototype.toString=function(){return this.color===h?this.xd():(this.color?"W":"B")+"-"+this.xd()},r.prototype.xd=function(){return o.qd(this.Nc,this.Oc)},r.prototype.Fe=function(){return this.Ge().map(function(t){return t.xd()}).sort().join(",")},r.prototype.xc=function(){return this.color===h},r.prototype.He=function(){return 2===this.Bd.length},r.prototype.Ie=function(){var t=this.Ha,i=t.Ua-1;return t.vc(1===this.Nc?2:i,1===this.Oc?2:i)},r.prototype.Je=function(){return this.Bd.length<=3},r.prototype.Ke=function(){var t=this.Ha.Ua,i=this.Nc,n=this.Oc;return Math.min(Math.min(i-1,t-i),Math.min(n-1,t-n))},r.prototype.qc=function(t){for(var i=this.Bd.length-1;i>=0;i--){var n=this.Bd[i];if(n.color===h)return!1;if(n.color!==t){if(1===n.group.Mc)return!1}else if(n.group.Mc>1)return!1}return!0},r.prototype.uc=function(t){for(var i=null,n=this.Bd.length-1;n>=0;n--){var r=this.Bd[n].group;if(r&&r.color===1-t&&1===r.Mc){if(i)return!1;i=r}}if(!i)return!1;if(1!==i.Gc.length)return!1;var e=i.Gc[0];if(this.Ha.Ec()!==e)return!1;var o=this.Ha.Dc();if(!o||o.td!==e||1!==o.Gc.length)return!1;var s=o.Gc[0];return s.Nc===this.Nc&&s.Oc===this.Oc},r.prototype.Pd=function(){this.color=h,this.group=null},r.prototype.Rd=function(t){this.group=t,this.color=t.color},r.prototype.Bc=function(t){this.color=t;var i=this.Lc(t);0===i.length?this.group=this.Ha.gc(this,this.Le()):(this.group=i[0],this.group.Fd(this));for(var n=this.Lc(1-t),r=n.length-1;r>=0;r--)n[r].Hd(this);for(var e=1;e<i.length;e++)this.group.Ld(i[e],this)},r.prototype.Ac=function(){this.group.Od(this),this.group.Gd(this);for(var t=this.Lc(1-this.color),i=t.length-1;i>=0;i--)t[i].Kd(this);this.group=null,this.color=h,s.Sd(this)},r.prototype.Md=function(t){this.group=t},r.prototype.Lc=function(t){for(var i=[],n=this.Bd,r=n.length-1;r>=0;r--){var e=n[r];e.color===t&&i.indexOf(e.group)<0&&i.push(e.group)}return i},r.prototype.Ge=function(){for(var t=[],i=this.Bd,n=i.length-1;n>=0;n--){var r=i[n];r.color===h&&t.push(r)}return t},r.prototype.Le=function(){for(var t=0,i=this.Bd,n=i.length-1;n>=0;n--)i[n].color===h&&t++;return t},r.prototype.Me=function(t,i){for(var n=0,r=this.Bd,e=r.length-1;e>=0;e--)r[e].color===t&&(i&&i.push(r[e]),n++);return n},r.prototype.Ne=function(t){for(var i=this.Bd,n=i.length-1;n>=0;n--)if(i[n].group===t)return!0;return!1}},{"./Grid":11,"./Group":12,"./constants":40}],17:[function(t,i,n){"use strict";function r(t){s.call(this,t),this.$e=t.bf.af._e._b,this.cf=t.bf.df}var e=t("../../constants"),o=t("./DiamondZone"),s=(t("../../Grid"),t("./Heuristic")),h=t("util").inherits,a=t("../../log"),u=(t("../../test"),e.EMPTY),c=e.Xb,l=e.Oe,f=e.ALWAYS,p=e.Pe,g=e.Qe,d=e.Re,v=e.Se,y=e.Te,b=e.Ue,m=e.Ve,w=e.We,x=e.Xe,k=e.Ye,j=e.Ze,M=-1,S=0,C=1;h(r,s),i.g=r,r.prototype.ef=function(t,i,n){var r=this.Ha.vc(t,i);if(this.$e[i][t]<0&&!this.cf.ff(r))return a.debug,0;var e;if(this.gf(r,1-n)){var o=[];e=[],this.hf(r,1-n,o,e)!==C||e.length||this.jf["if"](o,r,r,1-n)}var s=[];switch(e=[],this.hf(r,n,s,e)){case S:return this.kf(r,n,s);case C:this.jf["if"](s,r,r,n);for(var h=e.length-1;h>=0;h--)this.jf["if"](s,r,e[h],n);return 0;default:return 0}},r.prototype.hf=function(t,i,n,r){for(var e=1-i,s=0,h=0,a=0,f=!1,G=0;8>G;G++){var T=G%2,D=t.Ce[G];switch(D.color){case c:continue;case u:continue;case i:var O=D.group;T?h++:(s++,1===O.Mc&&(f=!0)),n.indexOf(O)<0&&n.push(O);break;default:if(1===D.group.Mc)break;T||a++}}if(n.length<2)return M;if(4===s)return f?C:S;var B=new o(t,i),E=B.lf;B.normalize();var U,I,H;if(t.Je()){if(t.He())return S;if(3===s)return f?C:S;if(2===s){if(f)return C;if(E[p].color!==i){if(!a)return S}else{if(E[b].color===u)return S;if(!a)return S;if(E[d].group.Mc<=3)return S}}else if(1===s){if(!a)return S;if(E[p].color===u){if(E[d].group.Mc<4)return S;if(H=E[b],H.color===i)return S;H.color===u&&(r.push(H),r.push(E[p]))}}else{if(!a)return S;if(E[p].color===u)return S;if(a>1)return M}return C}if(3===s){if(f)return C;if(!a)return S;if(3===n.length)return C;if(E[d].group===E[g].group){if(E[w].color===u)return S}else if(E[m].color===u)return S;return C}if(2===s){if(E[v].group===E[g].group)return a||E[m].color===e&&E[b].color===e?C:S;if(E[p].color===i){if(4===h)return S;if(3===h){if(!a)return S;if(1===a){if(E[d].color===e)return S;if(E[k].color!==e||E[k].group.Mc<3)return S}}else if(2===h)if(E[b].color===i){if(!a)return S;if(1===a&&E[d].color===e)return S}else if(E[y].color===i){if(a)return C;if(E[m].color!==e||E[b].color!==e)return S;r.push(E[d]),r.push(E[v]),E[m].color!==e&&r.push(E[m]),E[b].color!==e&&r.push(E[b])}else{if(a)return C;if(E[y].color!==e||E[b].color!==e)return S;r.push(E[d]),r.push(E[v]),E[y].color!==e&&r.push(E[y]),E[b].color!==e&&r.push(E[b])}else{if(1!==h)return a?C:E[d].Je()||E[v].Je()?S:E[j].Je()&&(I=E[v],0===this.nf[e][I.Oc][I.Nc])?S:E[k].Je()&&(U=E[d],0===this.nf[e][U.Oc][U.Nc])?S:(E[d].Me(e)<3&&r.push(E[d]),E[v].Me(e)<3&&r.push(E[v]),C);if(!a)return S}}else if(3===h){if(2===n.length)return S;if(E[w].color===u){if(E[k].color!==e||E[x].color!==e)return S;if(2>a)return S}else r.push(E[p]),r.push(E[d])}else if(2===h)if(E[w].color===u){if(E[y].color!==i)return S;if(0===a)return S;if(2===n.length)return E[g].group!==E[v].group?S:E[d].color===u?M:E[b].color===u?(r.push(E[p]),C):M;E[d].color===u&&r.push(E[d])}else{if(E[w].color===i){if(2===a)return M;var A=E[b].color===e,N=E[m].color===e;return 0===a?A||N?(r.push(E[p]),r.push(E[d]),C):S:(E[d].color!==u||N?E[p].color!==u||A||r.push(E[v]):r.push(E[d]),C)}if(E[y].color!==i){if(2===a)return C;if(0===a){if(E[y].color!==u)return C;r.push(E[y]),r.push(E[p]),r.push(E[d])}return C}if(a)return C;if(E[k].color!==e)return S;r.push(E[d]),r.push(E[p]),E[b].color!==u||E[k].color===e&&E[x].color===e||r.push(E[b])}else{if(1!==h){if(E[w].color===u)return S;if(!a){if(1===E[l].Ke())return S;r.push(E[p]),r.push(E[d])}return C}if(E[y].color===i)return a||(r.push(E[p]),r.push(E[d])),C;if(E[w].color===u)return S;if(E[w].group.Mc>(E[g].Je()?2:1))return E[p].color===u&&r.push(E[p]),E[d].color===u&&r.push(E[d]),C}}else if(1===s)if(4===h){if(0===a)return S}else if(3===h){if(E[y].color!==i){if(E[v].color===u)return S}else if(E[v].color===u){if(E[j].color!==e)return S;if(E[y].group===E[b].group)return S}}else if(2===h){if(E[y].color===u&&E[v].color===u)return S}else a||(r.push(E[v]),E[w].color===u&&(r.push(E[p]),r.push(E[d]),E[j].color===u&&r.push(E[w])));else if(4===h){if(0===a&&n.length<4)return S}else{if(3!==h)return E[m].color===i&&E[w].color===i?E[g].color===u?M:E[g].group.Mc<=2?C:M:C;if(E[v].color===u&&E[w].group===E[m].group||E[g].color===u&&E[w].group===E[b].group)return S}return C},r.prototype.kf=function(t,i,n){if(i!==this.color)return 0;a.debug;var r=this.rf.qf.pf(t);if(r.sf(t)&&2===n.length){if(this.rf.tf)return.5;var e=this.jf.uf(n[0].ud);return e>0&&1>e?.5:0}return r.color!==i?0:this.rf.tf?-.5:-1},r.prototype.vf=function(t,i){return[this.Ha.vc(t.Nc,i.Oc),this.Ha.vc(i.Nc,t.Oc)]},r.prototype.wf=function(t,i,n){var r=Math.abs(i.Nc-t.Nc),e=Math.abs(i.Oc-t.Oc);if(r+e===1)return 0;var o,s=1-n,h=0;if(1===r&&1===e){var a=this.vf(t,i),u=a[0],c=a[1];if(u.color===n||c.color===n)return 0;if(u.color===s&&h++,c.color===s&&h++,0===h)return 0;if(2===h)return 99;var l=u.color===s?0:1,f=a[l],p=a[1-l];return t.Je()||i.Je()?1===p.Ke()?f.group.Mc>2?1:0:0!==p.Me(s)?1:0:1===p.Ke()?0!==p.Me(s)?1:0:1}if(r+e===2){if(o=this.Ha.vc((t.Nc+i.Nc)/2,(t.Oc+i.Oc)/2),o.color===n)return 0;if(o.color===s)return o.group.Mc;for(var g=o.Bd.length-1;g>=0;g--)o.Bd[g].color===s&&h++;return h>=1?1:t.Je()&&i.Je()?0:.5}if(r+e===3&&t.Je()&&i.Je()){for(var d=this.betweenStones(t,i),v=0,y=d.length-1;y>=0;y--)o=d[y],o.color===s&&(v+=o.group.Mc),0!==o.Me(s)&&(v+=1);return v}return r+e},r.prototype.gf=function(t,i){for(var n=[],r=t.Bd.length-1;r>=0;r--){var e=t.Bd[r];switch(e.color){case u:n.push(e);break;case i:if(e.group.Mc>1&&e.group.wd<f)return e;break;default:if(1===e.group.Mc)return e.group.Cd()[0].Gc[0]}}for(var o=2,s=n.length-1;s>=0;s--)for(var h=n[s],a=h.Bd.length-1;a>=0;a--){var c=h.Bd[a];if(c!==t&&c.color===i&&c.group.wd!==f){var l=this.wf(t,c,i);if(!(l>=2)&&(o-=2-l,.5>=o))return c}}return null}},{"../../Grid":11,"../../constants":40,"../../log":43,"../../test":45,"./DiamondZone":18,"./Heuristic":21,util:4}],18:[function(t,i,n){"use strict";function r(t,i){this.color=i,this.lf=new Array(13);var n=t.Nc,r=t.Oc,e=t.Ha.$b,o=t.Ha.Ua,s=this.lf,h=a.Xb;s[l]=t,s[f]=e[r+1][n],s[v]=e[r+1][n-1],s[y]=e[r+1][n+1],s[p]=e[r-1][n],s[b]=e[r-1][n-1],s[m]=e[r-1][n+1],s[g]=e[r][n-1],s[d]=e[r][n+1],s[k]=n>2?e[r][n-2]:h,s[j]=o-1>n?e[r][n+2]:h,s[x]=r>2?e[r-2][n]:h,s[w]=o-1>r?e[r+2][n]:h}function e(t){return t===u?S:M[t+1]}function o(t,i){for(var n="",r=0;r<i.length;r++){var o=i[r];n+="string"==typeof o?o:e(t[o].color)}return n}var s=t("../../constants"),h=t("../../Grid"),a=t("../../Stone"),u=s.Xb,c=s.EMPTY,l=s.Oe,f=s.Pe,p=s.Qe,g=s.Re,d=s.Se,v=s.Te,y=s.Ue,b=s.Ve,m=s.We,w=s.Xe,x=s.xf,k=s.Ye,j=s.Ze;i.g=r;var M=h.Sc+h.Uc,S="|";r.prototype.toString=function(){var t=this.lf;return o(t,[" "," ",w," "," "])+"\n"+o(t,[" ",v,f,y," "])+"\n"+o(t,[k,g,"*",d,j])+"\n"+o(t,[" ",b,p,m," "])+"\n"+o(t,[" "," ",x," "," "])+"\n"},r.prototype.yf=function(){var t,i=this.lf;t=i[f],i[f]=i[p],i[p]=t,t=i[w],i[w]=i[x],i[x]=t,t=i[v],i[v]=i[b],i[b]=t,t=i[y],i[y]=i[m],i[m]=t},r.prototype.zf=function(){var t,i=this.lf;t=i[g],i[g]=i[d],i[d]=t,t=i[k],i[k]=i[j],i[j]=t,t=i[v],i[v]=i[y],i[y]=t,t=i[b],i[b]=i[m],i[m]=t},r.prototype.Af=function(){var t,i=this.lf;t=i[g],i[g]=i[p],i[p]=i[d],i[d]=i[f],i[f]=t,t=i[k],i[k]=i[x],i[x]=i[j],i[j]=i[w],i[w]=t,t=i[v],i[v]=i[b],i[b]=i[m],i[m]=i[y],i[y]=t},r.prototype.Bf=function(){var t,i=this.lf;t=i[g],i[g]=i[f],i[f]=i[d],i[d]=i[p],i[p]=t,t=i[k],i[k]=i[w],i[w]=i[j],i[j]=i[x],i[x]=t,t=i[v],i[v]=i[y],i[y]=i[m],i[m]=i[b],i[b]=t},r.prototype.normalize=function(){var t,i=this.color,n=this.lf;if(n[l].Je()){n[f].color===u?this.yf():n[g].color===u?this.Bf():n[d].color===u&&this.Af();var r=n[g].color===i,e=n[d].color===i;return void(r&&!e?this.zf():r===e&&n[v].color===i&&n[y].color!==i&&this.zf())}var o=!1,s=!0,h=!0,a=n[f].color===i?1:0,c=n[p].color===i?1:0,w=n[g].color===i?1:0,x=n[d].color===i?1:0;a>c?(this.yf(),w>x&&this.zf(),w!==x&&(o=!0)):c>a?(w>x&&this.zf(),w!==x&&(o=!0)):c?w>x?this.Bf():x>w?this.Af():(s=!1,w&&(h=!1)):w>x?this.Bf():x>w?this.Af():(w?this.Bf():h=!1,s=!1);var k=n[y].color===i?1:0,j=n[b].color===i?1:0;if(s&&o)n[f].color!==i&&n[g].color!==i&&k&&!j&&(this.Af(),this.zf());else{var M=n[v].color===i?1:0,S=n[m].color===i?1:0;s||(M+k>j+S?(this.yf(),t=M,M=j,j=t,t=k,k=S,S=t):o||(o=!0,!h&&k>M&&S>j?this.Af():!h&&M>k&&j>S?this.Bf():o=!1)),!o&&(j>S||j===S&&M>k)&&this.zf()}};var C=[v,f,y,g,l,d,b,p,m],G=["TL","TOP","TR","LEFT","CENTER","RIGHT","BL","BOTTOM","BR"];r.prototype.mf=function(t,i){for(var n=this.lf,r=this.color,e=1-r,o={},s=0,h=0,a=0;a<C.length;a++){var l=n[C[a]],f=i[a],p=l.color;switch(p===r&&(a%2?s++:h++),f){case"o":if(p===r)continue;break;case"A":case"B":case"C":case"D":if(p!==r)break;var g=o[f];if(g){if(g!==l.group)break}else o[f]=l.group;continue;case"*":case" ":if(p===c)continue;break;case".":if(p!==r)continue;break;case"x":if(p===e)continue;break;case"?":continue;case"-":if(p===u)continue}return f+"!="+p+" in "+G[a]+"\n"+this}var d=parseInt(t[0]),v=parseInt(t[1]);return s!==d?"numDirects="+s:isNaN(v)||h===v?!0:"numDiags="+h}},{"../../Grid":11,"../../Stone":16,"../../constants":40}],19:[function(t,i,n){"use strict";function r(t){e.call(this,t)}var e=t("./Heuristic"),o=t("util").inherits;o(r,e),i.g=r,r.prototype.Cf=function(){this.rf.qf.Df()}},{"./Heuristic":21,util:4}],20:[function(t,i,n){"use strict";function r(t){s.call(this,t),this.Zb=new o(this.Ua,a),this.Ef=t.bf.Ff}var e=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,a=e.Xb;h(r,s),i.g=r,r.prototype.Cf=function(){var t=this.Ha;this.rf.qf.Gf(t,this.Zb),this.Hf()},r.prototype.Hf=function(){var t=this.If,i=t.Jf,n=t.Kf,r=this.rf.qf.Lf;for(var e in r){var o=~~e,s=r[o],h=s.group;h.vd=i[o],h.wd=n[o];for(var a=s.Mf.length-1;a>=0;a--){var u=s.Mf[a];u.sf&&this.Ef.Nf(u.Of,h.color)}}}},{"../../Grid":11,"../../constants":40,"./Heuristic":21,util:4}],21:[function(t,i,n){"use strict";function r(t){this.rf=t,this.Rf(),this.Ha=t.Ha,this.Ua=t.Ha.Ua,this._e=new o(this.Ua,0,a),this.Sf=t.Sf,this.color=this.Tf=null,this.Uf()}var e=t("../../constants"),o=t("../../Grid"),s=t("../../log"),h=t("../../helper"),a=e.Xb,u=e.Pf,c=e.Qf;i.g=r,r.prototype.Rf=function(){var t=this.constructor;this.name=t.name||h.Vf(t),this.name.length<5&&(this.name+=this.rf.Wf.length)},r.prototype.Uf=function(){var t=this.rf.bf;this.Xf=t.Yf,this.jf=t.Ff,this.Zf=t.$f,this.If=t._f,this.nf=t.ag?t.ag.nf:null},r.prototype.bg=function(t){this.color=t,this.Tf=1-t},r.prototype.Cf=function(t,i){for(var n=s.level,r=this.rf.color,e=this._e._b,o=1;o<=this.Ua;o++)for(var h=1;h<=this.Ua;h++){var a=t[o][h];if(!(u>a)){a===c&&this.name===this.rf.cg&&s.dg(s.eg);var l=e[o][h]=this.ef(h,o,r);i[o][h]+=l,a===c&&s.dg(n)}}},r.prototype.fg=function(t,i,n){var r=this._e._b[i][t];r&&(n[this.name]=r)},r.prototype.gg=function(t,i,n,r){return this.rf.hg.get(this.name+"-"+t,i,n,r)}},{"../../Grid":11,"../../constants":40,"../../helper":41,"../../log":43}],22:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.ig=null,this.$e=t.bf.af._e._b}var e=t("../../constants"),o=(t("../../Grid"),t("./Heuristic")),s=t("util").inherits,h=t("../../log"),a=e.ALWAYS,u=e.EMPTY;s(r,o),i.g=r,r.prototype.jg=function(t,i){for(var n=t.Cd(),r=n.length-1;r>=0;r--){var e=n[r];if(!(e.Mc>1)){var o=e.Gc.length;if(o>=i)return!0;for(var s=e.Cd(),h=s.length-1;h>=0;h--)if(o+=s[h].Mc-1,o>=i)return!0}}return!1};var c=1;r.prototype.kg=function(t,i){for(var n=0,r=0,e=0,o=t.Bd.length-1;o>=0;o--){var s=t.Bd[o];switch(s.color){case u:e+=.01;break;case i:e+=.01*(s.group.Mc-1),s.group.vd===a&&(e+=2),n+=1e-4;break;default:1===s.group.Mc&&(r+=s.group.Gc.length)}}return r+e+n},r.prototype.lg=function(t,i,n,r){for(var e=!1,o=!1,s=1-i[0].color,h=i.length-1;h>=0;h--){var a=i[h];1===a.Mc&&((!n||1===n&&r)&&this.jf.mg(t,s),n||!this.ng(a,n)||this.jg(a,1)?(o=!0,n||this.jf.og(a,t)):this.rf.tf&&(e=!0))}return e&&this.jf.pg(t),o},r.prototype.qg=function(t,i,n){if(!i.Ne(n))return!1;for(var r=i.Lc(n.color),e=r.length-1;e>=0;e--){var o=r[e];if(o.Mc>2)return!1;if(!t.Ne(o))return!1}return!0},r.prototype.rg=function(t,i,n,r,e,o){for(var s,a=!1,u=t.Lc(r),c=i.length-1;c>=0;c--)if(s=i[c],2===s.Mc&&!this.jg(s,2)&&(0!==n.length||1!==u.length||2!==u[0].Mc)){if(1===n.length&&0===u.length){if(!this.qg(t,n[0],s))continue;a=!0,h.debug}e||!s.ud.sg()?o.push(s):h.debug}return a},r.prototype.tg=function(t,i,n){return n&&i.Mc===n.Mc&&n.yd()?!(t.Ne(n)&&n.Ed(t)<1):!1},r.prototype.ug=function(t,i,n,r){for(var e=!1,o=i.length-1;o>=0;o--){var s=i[o],h=s.Mc,a=null;h>2&&this.tg(t,s,a)?(n||this.jf.vg(s,t),e=!0):h>=2&&0===n&&!r&&(n||this.jf.wg(s,t))}return e},r.prototype.xg=function(){this.ig=[]},r.prototype.ef=function(t,i,n){return this.yg(t,i,n,0),0},r.prototype.yg=function(t,i,n,r,e){var o=this.Ha.vc(t,i),s=o.Lc(1-n);if(!s.length)return!1;var a=o.Ge(),u=[],l=this.rg(o,s,a,n,r,u);if(0===r&&l&&this.ig.push(o),!l&&a.length<=1){var f=this.kg(o,n);if(f!==c&&(.02>f||f>1&&1.01>f))return!1}var p=this.lg(o,s,r,e),g=!l&&this.$e[i][t]<0,d=this.ug(o,s,r,g);if(!u.length)return p||d;this.Ha.zc(t,i,n);for(var v=[!1,!1,!1],y=u.length-1;y>=0;y--)if(h.debug,!this.ng(u[y],r)){if(1===u.length){u.pop();break}v[y]=!0}this.Ha.Cc();var b=this.zg(o,u,v,r);return h.debug&&(p||d||b),p||d||b},r.prototype.zg=function(t,i,n,r){switch(i.length){case 0:return!1;case 1:return n[0]?!1:(r||this.jf.og(i[0],t),!0);case 3:case 2:return r||(n[1]?this.jf.og(i[0],t):this.jf.og(i[1],t)),!0;default:throw new Error("Unexpected in Hunter#getMultipleChaseThreat")}},r.prototype.ng=function(t,i){var n=t.Ad();if(1!==n.length)throw new Error("Unexpected: hunter #1: "+n.length);var r=n[0],e=this.Ha.zc(r.Nc,r.Oc,t.color),o=this.Ag(e,i);return this.Ha.Cc(),h.debug,o},r.prototype.Bg=function(t){for(var i=1-t.color,n=t.Bd,r=n.length-1;r>=0;r--){var e=n[r];if(e.color===i){var o=e.group;if(1===o.Mc){var s=o.Ad()[0];return s.Ne(t.group)?this.ng(o,1)?1:-1:1}}}return 0},r.prototype.Ag=function(t,i){var n=t.group;if(n.Mc<=1)return!0;if(n.Mc>2)return!1;var r=this.Bg(t);if(0!==r)return 0>r;var e=t.Ge();if(2!==e.length&&(e=n.Ad()),2!==e.length)throw new Error("Unexpected: hunter #2");var o=e[0],s=e[1];h.debug;var a=1-n.color;return this.yg(o.Nc,o.Oc,a,i+1)||this.yg(s.Nc,s.Oc,a,i+1)},r.prototype.Cg=function(t){return this.Ag(t,1)},r.prototype.Dg=function(t,i,n){return this.yg(t,i,n,1,n===this.Tf)},r.prototype.ff=function(t){return-1!==this.ig.indexOf(t)}},{"../../Grid":11,"../../constants":40,"../../log":43,"./Heuristic":21,util:4}],23:[function(t,i,n){"use strict";function r(t){s.call(this,t),this.Eg=[new o(this.Ua,a),new o(this.Ua,a)],this.nf=[this.Eg[c]._b,this.Eg[l]._b]}var e=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,a=e.Xb,u=e.EMPTY,c=e.za,l=e.Aa,f=2,p=1;h(r,s),i.g=r,r.prototype.Cf=function(){this.Eg[c].init(0),this.Eg[l].init(0);for(var t=1;t<=this.Ua;t++)for(var i=1;i<=this.Ua;i++){var n=this.Ha.vc(i,t),r=n.color;if(r!==u)for(var e,o=this.nf[r],s=n.Bd,h=0;e=s[h],h<s.length;h++)if(o[e.Oc][e.Nc]+=f,e.color===u)for(var a,g=e.Bd,d=0;a=g[d],d<g.length;d++)a!==n&&(o[a.Oc][a.Nc]+=p)}}},{"../../Grid":11,"../../constants":40,"./Heuristic":21,util:4}],24:[function(t,i,n){"use strict";function r(t){a.call(this,t),this.debug=!1,this.Zb=new h(this.Ua,null),this.Fg=[],this.Gg="",this.Hg=this.gg("spaceInvasion",2,.01,4),this.Ig=this.gg("pressure",1,.01,2),this.Jg=this.gg("potEyeCoeff2",.78,.75,.85)}function e(){this.Ng=null,this.Og=[!1,!1],this.Pg=0,this.Qg=[],this.Rg=[],this.Sg=[]}function o(t,i,n){this.name=t,this.Pg=i,this.group=n,this.Wg=1/0}var s=t("../../constants"),h=t("../../Grid"),a=(t("./boan/GroupInfo"),t("./Heuristic")),u=t("util").inherits,c=t("../../log"),l=(t("../../test"),s.ALWAYS),f=.1;u(r,a),i.g=r,r.prototype.Cf=function(){this.debug=this.rf.Kg,this.Zb.init(null),this.Fg.length=0},r.prototype.Lg=function(t,i){a.prototype.Cf.call(this,t,i)},r.prototype.ef=function(t,i){var n=this.Zb._b[i][t];return n?n.Mg():0},r.prototype.fg=function(t,i,n){var r=this.Zb._b[i][t];r&&r.Mg(n,this.name)},e.prototype.Mg=function(t,i){var n=this.Pg;t&&n&&(t[i+"-base"]=n);var r=this.Qg;if(!r.length)return n;for(var e=r.length-1;e>=0;e--){var o=r[e],s=o.Pg*this.Rg[e];if(n+=s,t){var h=this.Rg[e],a=1!==h?" factor:"+h.toFixed(2):"";t[i+"-"+o+a]=s}}return n},r.prototype.Tg=function(t,i){return this.Zb._b[i][t]},r.prototype.Ug=function(t,i){var n=this.Zb._b[i][t];return n?n:(this.Zb._b[i][t]=n=new e,n)},r.prototype.Nf=function(t,i){this.Ug(t.Nc,t.Oc).Ng=i},r.prototype.Vg=function(t,i){var n=this.Tg(t.Nc,t.Oc);return n&&n.Ng===i},r.prototype.mg=function(t,i){this.Ug(t.Nc,t.Oc).Og[i]=!0},r.prototype.Og=function(t,i){var n=this.Tg(t.Nc,t.Oc);return n&&n.Og[i]},o.prototype.toString=function(){return this.name+(this.Wg!==1/0?" minMoves:"+this.Wg:"")+" score:"+this.Pg.toFixed(2)},r.prototype.Xg=function(t,i,n){this.Gg=t+" on "+i.toString(1),n.Nc===this.rf.Yg&&n.Oc===this.rf.Zg?c.dg(c.eg):c.level===c.eg&&c.dg(c.$g)},r.prototype._g=function(t){var i=this.Fg[t.jc];if(i)return i;for(var n=2*t.Gc.length,r=t.Ad(),e=0,s=r.length-1;s>=0;s--)e+=r[s].Le();return n+=this.Hg*Math.max(0,e-1),this.Fg[t.jc]=i=new o("life/death of "+t.toString(1),n,t),i},r.prototype.ah=function(t,i,n,r){if(!i)throw new Error("Unexpected");n=n||1,r=r||1,c.debug;var e=this.Ug(i.Nc,i.Oc),o=e.Qg,s=e.Rg,h=e.Sg,a=o.indexOf(t);return 0>a?(o.push(t),s.push(n),h.push(r)):(s[a]=Math.max(s[a],n),h[a]=Math.min(h[a],r)),t.Wg=Math.min(t.Wg,r),t},r.prototype.uf=function(t){var i,n=t.bh;if(n)i=n.dh;else{var r=t.group;if(r.vd===l)return 1;if(r.xDEAD===l)return 0;i=[t]}var e=this.Zf.eh(i);return this.fh(e)},r.prototype.fh=function(t){return t>=2.5?1:1.5>t?0:2>t?.5:this.Jg},r.prototype.gh=function(t,i,n,r,e,o){r=r||1;var s,h=this.Zf.eh(t),a=this.fh(h);if(o){var u=this.fh(h+o);s=a-u,s=Math.min(2*s,1)}else s=1-a;if(r*=s,c.debug,f>r)return void c.debug;for(var l=e||0,p=t.length-1;p>=0;p--)l+=t[p].group.Mc;for(p=t.length-1;p>=0;p--)this.ih(t[p].group,i,n,r,l)},r.prototype.ih=function(t,i,n,r,e){if(!(f>r)){var o=this._g(t);return n||this.jh(t,i,r,e),this.ah(o,i,r,e)}},r.prototype.jh=function(t,i,n,r){if(!(1===t.Gc.length&&t.Gc[0].He()||0===i.Le()&&t.Gc.length<3)){r=r||1;for(var e=t.Cd(),o=e.length-1;o>=0;o--){var s=e[o];s.vd!==l&&s.Mc===r&&(this.ih(s,i,!0,n,r),this.kh(s,i,n,r))}}},r.prototype.kh=function(t,i,n,r){for(var e=t.ud.lh(i),o=e.length-1;o>=0;o--)this.gh(e[o],i,!0,n,r)},r.prototype.wg=function(t,i){var n=1/(t.Mc+1)*this.Ig;if(t.wd===l){if(!this.rf.tf)return 0;n=this.Sf}this.Ug(i.Nc,i.Oc).Pg+=n,this.debug&&i.Nc===this.rf.Yg&&i.Oc===this.rf.Zg&&c.ue("MoveInfo "+h.gd(1-t.color)+" - pressure at "+i+": "+n.toFixed(2))},r.prototype.pg=function(t){this.Ug(t.Nc,t.Oc).Pg+=this.Sf},r.prototype.vg=function(t,i){this.debug&&this.Xg("race",t,i);var n=t.ud,r=n.bh?n.bh.dh:[n];this.gh(r,i,!1)},r.prototype.mh=function(t,i,n,r){this.debug&&this.Xg("eye threat",t,i);var e=t.ud,o=e.bh?e.bh.dh:[e];return this.gh(o,i,n===t.color,void 0,void 0,-r),!0},r.prototype["if"]=function(t,i,n,r){var e=t[0];this.debug&&this.Xg("cut",e,i);for(var o=r===e.color,s=e.ud.nh(t,i),h=s.length-1;h>=0;h--)this.gh(s[h],n,o,void 0,1)},r.prototype.og=function(t,i){this.debug&&this.Xg("kill",t,i);for(var n=t.ud.lh(i),r=n.length-1;r>=0;r--)this.gh(n[r],i,!1);this.ih(t,i,!1,1,t.Mc)},r.prototype.oh=function(t,i){this.debug&&this.Xg("rescue",t,i),this.kh(t,i),this.ih(t,i,!0)}},{"../../Grid":11,"../../constants":40,"../../log":43,"../../test":45,"./Heuristic":21,"./boan/GroupInfo":35,util:4}],25:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.cf=null}var e=t("../../Grid"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log");s(r,o),i.g=r,r.prototype.xg=function(){this.cf||(this.cf=this.rf.bf.df)},r.prototype.ef=function(t,i,n){if(this.nf[1-n][i][t]<2&&this.nf[n][i][t]<2&&0===this.Ha.vc(t,i).Me(n))return 0;var r,o=this.Ha.zc(t,i,n),s=o.group,a=0;return h.debug&&(r=e.qd(t,i)),1===s.Mc?1===s.Gc.length&&o.Ge()[0].uc(this.Tf)?h.debug:(a-=2*s.Gc.length,h.debug):2===s.Mc&&(h.debug,this.cf.Cg(o)&&(a-=2*s.Gc.length,h.debug)),this.Ha.Cc(),a}},{"../../Grid":11,"../../log":43,"./Heuristic":21,util:4}],26:[function(t,i,n){"use strict";function r(t){s.call(this,t),this.th=[new o(this.Ua,u),new o(this.Ua,u)],this.uh=this.gg("wideSpaceToEye",.7,.01,1),this.vh=this.gg("stoneCountToEye",.33,.25,1)}var e=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,a=t("../../log"),u=e.Xb,c=e.ph,l=e.qh,f=e.EMPTY,p=e.za,g=e.Aa,d=e.rh,v=e.sh;h(r,s),i.g=r,r.prototype.Cf=function(){this.wh()},r.prototype.wh=function(){this.th[d].init(f),this.th[v].init(f);for(var t=this.Ua;t>=1;t--)for(var i=this.Ua;i>=1;i--){var n=this.Ha.vc(i,t);if(n.color===f){var r=this.xh(i,t,n);if(null!==r){var e=this.rf.qf.pf(n);if(!e.yh&&!this.jf.Vg(n,r)){for(var o=n.Bd,s=null,h=this.nf[1-r],u=1,p=o.length-1;p>=0;p--){var g=o[p];g.color===r&&(s=g.group),1!==u||g.Je()||0!==h[g.Oc][g.Nc]||g.Le()!==g.Bd.length||(u=2)}if(!s){if(!n.He())continue;if(s=n.Ie().group,!s)continue}if(n.Je()){for(var y=!1,b=1-r,m=l;m>=c;m-=2){var w=n.Ce[m];if(w.color===b){y=!0;break}}if(y)continue}var x=(i+t)%2,k=this.th[x]._b;k[t][i]=r,s.ud.zh(x,u),a.debug}}}}},r.prototype.xh=function(t,i,n){var r=this.nf[p][i][t],e=this.nf[g][i][t],o=r>e?p:g,s=Math.max(r,e),h=Math.min(r,e);if(h>1)return null;var a=0,u=this.Ua;return 1===h&&n.He()&&n.Ie().color===f&&a++,1!==t&&t!==u&&1!==i&&i!==u||a++,0>s+a-3-h?null:o},r.prototype.Ah=function(t){for(var i=0,n=t.color,r=this.nf[1-n],e=t.Ad(),o=e.length-1;o>=0;o--){var s=e[o];if(!(r[s.Oc][s.Nc]>0)){var h=this.rf.qf.pf(s);void 0===h.color&&i++}}return i},r.prototype.eh=function(t){for(var i=0,n=0,r=t.length-1;r>=0;r--){var e=t[r];i+=e.Bh(),n+=e.group.Gc.length}i=Math.min(i,n*this.vh);var o=0;for(r=t.length-1;r>=0;r--)o+=this.Ah(t[r].group);return i+=o*this.uh}},{"../../Grid":11,"../../constants":40,"../../log":43,"./Heuristic":21,util:4}],27:[function(t,i,n){"use strict";function r(t){h.call(this,t),this.Eh=new s(this.Ua,l),this.Fh=this.Eh._b,this.Gh=new s(this.Ua,l),this.Eg=[new s(this.Ua,l),new s(this.Ua,l)],this.Hh=new s(this.Ua,l),this.Ih(),this.Jh=null,this.Jf=[],this.Kf=[]}function e(t,i,n){switch(t){case v:return[i,1];case y:return[1,i];case b:return[i,n];case m:return[n,i]}}var o=t("../../constants"),s=t("../../Grid"),h=t("./Heuristic"),a=t("util").inherits,u=t("../../log"),c=t("../../Stone"),l=o.Xb,f=o.EMPTY,p=o.za,g=o.Aa,d=o.NEVER,v=o.Ch,y=o.Se,b=o.Dh,m=o.Re,w=o.Ae,x=o.Be,k=s.ed,j=s.dd,M=c.De,S=c.Ee;a(r,h),i.g=r,r.prototype.Cf=function(){this.Kh(),this.Eh.fd(this.Ha),this.Lh(p),this.Lh(g),this.Mh()},r.prototype.Kh=function(){this.Jh=this.Ha.nc(),this.Jf.length=0,this.Kf.length=0;for(var t in this.Jh){var i=~~t;this.Jf[i]=this.Kf[i]=d}},r.prototype.Nh=function(){for(var t in this.Jh){for(var i=this.Jh[~~t],n=i;n.rd;)n=n.rd;n.td||n.ud.Oh?this.Kf[i.jc]++:n.ud.Ph&&this.Jf[i.jc]++}},r.prototype.Qh=function(t,i,n){var r=n===p?-1:1,e=d;return s.dd[2+this.Eg[p]._b[i][t]]===r&&e++,s.dd[2+this.Eg[g]._b[i][t]]===r&&e++,e},r.prototype.Rh=function(t,i,n){return this.Hh._b[i][t]*(n===p?1:-1)},r.prototype.Sh=function(t,i,n){var r=s.dd[2+this.Eg[1-n]._b[i][t]];return r*(n===p?1:-1)},r.prototype.toString=function(){return"\n+1=white, -1=black, 0=no one or both\n"+this.Hh.pc(function(t){return 0===t?"    0":"%+.1f".format(t)})+this.Hh.pc(function(t){return k[2+2*t]})},r.prototype.kc=function(){return this.Hh.lc(function(t){return k[2+2*t]})},r.prototype.Th=function(t){return this.Eg[t]},r.prototype.Lh=function(t){var i=this.Ha.vb(),n=this.Eg[t];for(this.Uh(n,t),this.rf.qf.Vh(this.Ha,n,t),this.Nh(),i=this.Ha.vb()-i;i-- >0;)this.Ha.Cc()},r.prototype.Mh=function(){for(var t=this.Eg[p]._b,i=this.Eg[g]._b,n=this.Hh._b,r=this.Ua;r>=1;r--)for(var e=this.Ua;e>=1;e--)n[r][e]=(j[2+t[r][e]]+j[2+i[r][e]])/2;u.debug},r.prototype.Uh=function(t,i){this.Wh=null,this.Xh(this.Eh,t.K(this.Eh),i),u.debug,this.Yh(t._b,i),u.debug,this.reduce(this.Gh.K(t)),this.Wh=this.Gh._b,u.debug,this.Xh(this.Eh,t.K(this.Eh),i),u.debug,this.Yh(t._b,i),u.debug},r.prototype.Xh=function(t,i,n){u.debug;for(var r=t._b,e=i._b,o=this.Ua;o>=1;o--)for(var s=r[o],h=this.Ua;h>=1;h--)s[h]===f&&this.Zh(r,e,h,o,n,1-n)},r.prototype.reduce=function(t){for(var i=t._b,n=1;n<=this.Ua;n++)for(var r=1;r<=this.Ua;r++)if(this.Fh[n][r]===f){var e=i[n][r];if(e!==f){var o=this.$h(i,r,n,1-e);0===o&&(i[n][r]=f)}}},r.prototype.Zh=function(t,i,n,r,e,o){switch(this.$h(t,n,r,e)){case 0:if(!this._h(t,n,r,e,o))return;break;case 4:return;case 3:if(0===this.$h(t,n,r,o))return}return this.ai(i,n,r,e)},r.prototype.ai=function(t,i,n,r,e){if(this.Wh){if(!e&&this.Wh[n][i]===f)return;var o=this.Ha.vc(i,n);if(o.qc(r))return;this.Ha.zc(i,n,r)}t[n][i]=r},r.prototype.$h=function(t,i,n,r){for(var e=0,o=w;x>=o;o++){var s=M[o];t[n+s[1]][i+s[0]]===r&&e++}return e},r.prototype._h=function(t,i,n,r,e){for(var o=w;x>=o;o++){var s=S[o];if(t[n+s[1]][i+s[0]]===r)return!0}return!1},r.prototype.Ih=function(){for(var t=[],i=w;x>=i;i++)for(var n=M[i][0],r=M[i][1],o=this.Ua-1;o>=2;o--){var s=e(i,o,this.Ua);t.push([s[0],s[1],n,r])}this.bi=t},r.prototype.Yh=function(t,i){for(var n,r,e,o,s,h,a=this.bi,u=a.length-1;u>=0;u--){var c=a[u],l=c[0],p=c[1];if(t[p][l]===f){var g=c[2],d=c[3],v=l+g,y=p+d,b=t[y][v];if(b===f){var m=v+g,w=y+d;if(b=t[w][m],b===f){var x=m+g,k=w+d;if(b=t[k][x],b===f);else{if(b!==i)continue;if(n=t[p-g][l-d],r=t[p+g][l+d],e=t[y-g][v-d],o=t[y+g][v+d],s=t[w-g][m-d],h=t[w+g][m+d],n===b&&e===b&&s===b)continue;if(r===b&&o===b&&h===b)continue;if(this.ai(t,m,w,b,!0),n===b&&e===b)continue;if(r===b&&o===b)continue;if(this.ai(t,v,y,b,!0),n===b||r===b)continue;this.ai(t,l,p,b,!0)}}else{if(b!==i)continue;if(n=t[p-g][l-d],r=t[p+g][l+d],e=t[y-g][v-d],o=t[y+g][v+d],n!==1-b&&e===b)continue;if(r!==1-b&&o===b)continue;if(this.ai(t,v,y,b,!0),n===b||r===b)continue;this.ai(t,l,p,b,!0)}}else{if(b!==i)continue;if(n=t[p-g][l-d],r=t[p+g][l+d],e=t[y-g][v-d],o=t[y+g][v+d],n===b&&e!==1-b)continue;if(r===b&&o!==1-b)continue;this.ai(t,l,p,b,!0)}}}}},{"../../Grid":11,"../../Stone":16,"../../constants":40,"../../log":43,"./Heuristic":21,util:4}],28:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.ci=[],this.di=this.gg("allyInfl",.03,.01,1),this.ei=this.gg("enemyInfl",.13,.01,1),this.$e=t.bf.af._e._b}var e=t("../../constants"),o=(t("../../Grid"),t("./Heuristic")),s=t("util").inherits,h=t("../../log"),a=t("../../Stone"),u=e.EMPTY,c=a.De,l=e.Ae,f=e.Be;s(r,o),i.g=r,r.prototype.Cf=function(t,i){var n=this.ci;n.length=0,o.prototype.Cf.call(this,t,i);for(var r=n.length-1;r>=0;r--)this.fi(n[r],i)},r.prototype.ef=function(t,i,n){return this.gi(t,i,1-n,!0),this.gi(t,i,n)},r.prototype.hi=function(t,i,n,r,e){if(!(this.$e[t.Oc][t.Nc]<0)){var o=1-n.group.color,s=this.Xf.gf(t,o);s&&(this.jf.uf(s.group.ud)<.5||(h.debug,e[t.Oc][t.Nc]+=r,this._e._b[t.Oc][t.Nc]+=r))}},r.prototype.fi=function(t,i){var n=t[0],r=t[1],e=t[2];if(this.hi(n,n,r,e,i),!this.jf.Og(n,r.color)){var o=r.group;
if(!n.Ne(o))for(var s=0;8>s;s++){var h=n.Ce[s];h.color===u&&h.Ne(o)&&this.hi(h,n,r,e,i)}}},r.prototype.gi=function(t,i,n,r){var e=this.nf[1-n][i][t];if(0===e)return 0;var o=this.nf[n][i][t];if(o>6)return 0;if(!r&&this.$e[i][t]<0)return 0;var s=this.Ha.vc(t,i);if(0===s.Le())return 0;var a=this.Xf.gf(s,n);if(!a)return 0;if(!r&&!this.Xf.gf(s,1-n))return 0;var u=this.ii(t,i,n),c=u+this.ei*e-this.di*o;return c*=this.jf.uf(a.group.ud),r?c?(h.debug,this.ci.push([s,a,c])):0:(h.debug,c)},r.prototype.ji=function(t,i,n,r,e){var o=this.Ha.vc(t,i);if(o.color!==u)return 0;var s=this.If.Sh(t,i,r);if(o.Je()&&(s/=2),0>=s)return 0;if(0===--e)return s;var h=c[n][0],a=c[n][1],l=c[(n+3)%4],f=l[0],p=l[1];return s+=this.ji(t+h+f,i+a+p,n,r,e),s+=this.ji(t+h-f,i+a-p,n,r,e)};var p=1;r.prototype.ii=function(t,i,n){for(var r=Math.max(0,this.If.Sh(t,i,n)),e=l;f>=e;e++)r+=this.ji(t+c[e][0],i+c[e][1],e,n,p);var o=this.Ha.vc(t,i);return o.He()?r=Math.max(r-1,0):o.Je()&&(r=Math.max(r-.85,0)),r}},{"../../Grid":11,"../../Stone":16,"../../constants":40,"../../log":43,"./Heuristic":21,util:4}],29:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.cf=null}var e=t("../../constants"),o=(t("../../Grid"),t("./Heuristic")),s=t("util").inherits,h=t("../../log"),a=(e.ALWAYS,e.EMPTY),u=e.Xb;s(r,o),i.g=r,r.prototype.xg=function(){this.cf||(this.cf=this.rf.bf.df)},r.prototype.ef=function(t,i){var n=this.Ha.vc(t,i);return this.ki(t,i,n),0},r.prototype.ki=function(t,i,n){for(var r,e,o=[],s=this.color,a=n.Lc(s),u=0;e=a[u],u<a.length;u++)1===e.Mc?o.push(e):2===e.Mc&&o.push(e);if(o.length&&(h.debug,this.cf.Dg(t,i,this.Tf))){this.Ha.zc(t,i,s),h.debug;var c=!this.cf.Cg(n);this.Ha.Cc();var l;if(!c){for(r=o.length-1;r>=0;r--)if(e=o[r],1!==e.Mc){var f=e.Ad();if(l=f[0]===n?f[1]:f[0],this.Ha.zc(l.Nc,l.Oc,s),c=!this.cf.Cg(l),this.Ha.Cc(),c)break}if(!c)return void h.debug;n=l}for(r=o.length-1;r>=0;r--)e=o[r],l&&1===e.Mc||(this.jf.oh(e,n),h.debug)}},r.prototype.li=function(t,i,n){var r=0,e=0,o=this.Ua;if(1===i||i===o)e=1;else{if(1!==n&&n!==o)throw new Error("not along border");r=1}var s=e,h=r;if(this.Ha.vc(i+s,n+h).color===u&&(s=-s,h=-h),this.Ha.vc(i+s,n+h).group!==t){var c=t.color,l=this.Ha.vc(i+r,n+e);for(l.group===t&&(r=-r,e=-e);;)switch(i+=r,n+=e,l=this.Ha.vc(i,n),l.color){case u:return null;case c:return l.group.Mc>2?l.group:null;case a:var f=this.Ha.vc(i+s,n+h);if(f.color===a)continue;return f.color===1-c?null:f.group.Mc>2?f.group:null;default:return null}}}},{"../../Grid":11,"../../constants":40,"../../log":43,"./Heuristic":21,util:4}],30:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.th=t.bf.$f.th,this.$e=t.bf.af._e._b}var e=t("../../constants"),o=(t("../../Grid"),t("./Heuristic")),s=t("util").inherits,h=t("../../log"),a=e.EMPTY,u=e.NEVER,c=e.mi,l=e.ALWAYS,f=e.rh,p=e.sh;s(r,o),i.g=r,r.prototype.Cf=function(t,i){o.prototype.Cf.call(this,t,i);var n=this.If.Jh;for(var r in n){var e=n[~~r];e.wd!==l&&e.vd!==l&&this.ni(i,e)}},r.prototype.ni=function(t,i){var n=[],r=i.ud.oi(n);if(r===c){var e=this.Ha.vc(n[0],n[1]),o=e.Le();h.debug,this.jf.mh(i,e,this.color,o)}},r.prototype.ef=function(t,i,n){var r=this.Ha.vc(t,i);return this.pi(r,n),this.pi(r,1-n),0},r.prototype.pi=function(t,i){if(this.If.Qh(t.Nc,t.Oc,i)!==u&&this.Xf.gf(t,1-i)){var n=this.rf.qf.pf(t);n.yh&&n.yh.group.color===i?this.qi(t,i,n):this.ri(t,i)}},r.prototype.qi=function(t,i,n){if(!(n.si>2))for(var r=t.Bd.length-1;r>=0;r--){var e=t.Bd[r];if(e.color===i&&1===e.group.Mc){h.debug,this.jf.mh(e.group,t,i,1);break}}},r.prototype.ri=function(t,i){for(var n=this.th[f]._b,r=this.th[p]._b,e=null,o=null,s=0,h=t.Bd.length-1;h>=0;h--){var u=t.Bd[h];switch(u.color){case a:n[u.Oc][u.Nc]!==i&&r[u.Oc][u.Nc]!==i||(e=u,s++);break;case i:o||(o=u.group)}}if(e){if(!o){if(this.$e[t.Oc][t.Nc]<0)return;o=e.Lc(i)[0]}o.vd!==l&&o.wd!==l&&this.jf.mh(o,t,i,s)}}},{"../../Grid":11,"../../constants":40,"../../log":43,"./Heuristic":21,util:4}],31:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.ti=this.gg("infl",.07,.01,.5),this.ui=this.gg("border",10,0,20),this.vi=this.Ua<=9?[0,.2,.8,.95,1]:[0,.2,.8,1,.95,.8]}var e=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=e.EMPTY;s(r,o),i.g=r,r.prototype.ef=function(t,i){var n=0,r=0,e=this.Ha.vc(t,i),o=this.nf[this.Tf],s=this.nf[this.color];n+=o[i][t],r+=s[i][t];for(var a=e.Bd.length-1;a>=0;a--){var u=e.Bd[a];if(u.color!==h)return 0;n+=o[u.Oc][u.Nc],r+=s[u.Oc][u.Nc]}var c=1+this.ti*Math.max(n+r-3,0)*(this.Ua/9),l=this.vi.length-1,f=Math.min(this.Ke(t),l),p=Math.min(this.Ke(i),l),g=this.vi[f]*this.vi[p]*this.ui,d=0;return this.rf.tf||(d=this.If.Rh(t,i,this.color),d>0&&(d=0)),d+g/c},r.prototype.Ke=function(t){return Math.min(t-1,this.Ua-t)}},{"../../constants":40,"./Heuristic":21,util:4}],32:[function(t,i,n){"use strict";function r(t){this.wi=t.group.jc,this.dh=[t],t.bh=this}function e(t){return"#"+t.group.jc}var o=t("../../../log");i.g=r,r.prototype.toString=function(){return this.dh.map(e).toString()},r.prototype.xi=function(t){if(!t.bh)return o.debug,this.dh.push(t),void(t.bh=this);if(t.bh.wi!==this.wi){o.debug;for(var i=t.bh.dh,n=i.length-1;n>=0;n--)this.dh.push(i[n]),i[n].bh=this}},r.prototype.remove=function(t){var i=this.dh.indexOf(t);if(0>i)throw new Error("Band.remove on wrong Band");this.dh.splice(i,1),t.bh=null,o.debug},r.yi=function(t){if(1===t.length)throw new Error("add Band of 1");for(var i=null,n=0;n<t.length;n++)if(t[n].ud.bh){i=t[n].ud.bh;break}var e=0;for(i||(i=new r(t[e++].ud)),n=e;n<t.length;n++)i.xi(t[n].ud)}},{"../../../log":43}],33:[function(t,i,n){"use strict";function r(t){this.yb=t,this.version="chuckie",this.mode=null,this.tf=!1,this.Ha=null,this.Di=null,this._e=null,this.Ei=[],this.Lf=null,this.ce=[0,0],this.de=[0,0],this.Fi=null}function e(t){return t>1&&2>t?t-1:t}function o(t){return t[y]===t[b]||t[y]>=m&&t[b]>=m?void 0:(t[y]=e(t[y]),t[b]=e(t[b]),t[y]>t[b]?y:b)}function s(t,i){for(var n=0;n<i.length;n++){var r=i[n];f.debug,r._i()!==w&&(i[n]=null)}var e=0;for(n=0;n<i.length;n++)i[n]&&(i[n].aj(t.name+": liveliness="+i[n].bj.toFixed(4)),e++);return e}function h(t,i){for(var n=0;n<i.length;n++)i[n].aj(t.name);return i.length}function a(){return 0}var u=t("../../../constants"),c=t("../../../Grid"),l=t("./GroupInfo"),f=t("../../../log"),p=t("./Void"),g=t("./ZoneFiller"),d=u.EMPTY,v=u.Xb,y=u.za,b=u.Aa,m=l.zi,w=l.Ai,x=l.Bi,k=l.Ci,j=0,M=1,S=2;i.g=r,r.prototype.be=function(t){f.debug,this.ce[y]=this.ce[b]=0,this.de[y]=this.de[b]=0,this._e&&this._e.Ua===t.Ua||(this._e=new c(t.Ua,v)),this.Gi(j,t,this._e)&&(this.Hi(),this.tf||t.Fc(this.de))},r.prototype.ae=function(){return this._e},r.prototype.pf=function(t){return this.Di._b[t.Oc][t.Nc]},r.prototype.Gf=function(t,i){this.Gi(S,t,i)},r.prototype.Df=function(){this.Hi()},r.prototype.Vh=function(t,i,n){this.Gi(M,t,i)&&this.Hi(n)},r.prototype.kc=function(){return this.Di.kc()},r.prototype.oc=function(){for(var t,i="Grid:\n"+this.Di.pc()+"Voids:\n",n=this.Ei,r=0;t=n[r],r<n.length;r++)i+=t.toString()+"\n";i+="Groups:\n";for(var e in this.Lf)i+=this.Lf[~~e].toString()+"\n";return this.ce&&(i+="Score:"+this.ce.map(function(t,i){return" player "+i+": "+t+" points"})),i},r.prototype.Gi=function(t,i,n){return this.mode=t,this.tf=this.yb.xa&&t===j,this.Ha=i,this.Di=n,this.Fi=new g(i,n),0===i.vb()?!1:(n.fd(i),this.Ii(),this.Ji(),this.Ki(),!0)},r.prototype.Hi=function(t){this.mode===S?this.Li():(this.Mi(),this.Li(t),this.Ni(),this.Oi())},r.prototype.Pi=function(t,i){var n=this.Lf[t.jc];n||(t.ud&&t.ud.qf===this?t.ud.Qi():t.ud=new l(t,this),n=this.Lf[t.jc]=t.ud),n.Ri.push(i)},r.prototype.Ii=function(){f.debug;var t=c.Zc;this.Lf={},this.Ei.length=0;for(var i,n,r=this.Ha,e=new p(r,t++),o=1;o<=r.Ua;o++)for(var s=1;s<=r.Ua;s++){var h=this.Fi.Si(s,o,d,e);if(0!==h){this.Ei.push(e);for(var a=y;b>=a;a++)for(n=e.Ti[a],i=n.length-1;i>=0;i--)this.Pi(n[i],e);e=new p(r,t++)}}},r.prototype.Ji=function(){for(var t in this.Lf)this.Lf[~~t].Ui()},r.prototype.Ki=function(){f.debug;for(var t=this.Ei,i=t.length,n=i-1;n>=0;n--)t[n].Vi();for(var r;;){for(r=!1,n=i-1;n>=0;n--)t[n].Wi()&&(r=!0);if(!r)break}for(n=i-1;n>=0;n--)t[n].Xi()},r.prototype.Mi=function(){if(!this.tf){var t=this.Ha;if(!(t.vb()<2*t.Ua))for(var i=[0,0],n=[0,0];;){for(var r=!1,e=this.Ei.length-1;e>=0;e--){var s=this.Ei[e];if(void 0===s.color&&!(s.si>2*t.Ua)){i[y]=i[b]=n[y]=n[b]=0;for(var h=y;b>=h;h++)for(var a=s.Ti[h].length-1;a>=0;a--){var u=s.Ti[h][a].ud;i[h]+=u.Yi(),n[h]+=u.Zi()}if(!(n[y]>4&&n[b]>4)){var c=o(i);void 0!==c?(f.debug,s.$i(c),r=!0):f.debug}}}if(!r)break}}};var C={name:"brothers",l:l.prototype.cj},G={name:"singleEye",l:l.prototype.dj,ej:s},T={name:"race",l:l.prototype._i,ej:a},D={name:"atari",l:function(){return this.group.Mc<=1?w:k}},O={name:"final",l:function(){return this.fj(2)}},B=[];B[j]=[C,D,G,O],B[M]=[C,G],B[S]=[C,G,T],r.prototype.gj=function(t,i){f.debug;var n=0,r=0,e=[];for(var o in this.Lf){var s=this.Lf[~~o];if(!s.Ph&&!s.Oh)switch(r++,t.l.call(s,i)){case w:e.push(s);break;case x:n++}}return e.length&&(n+=t.ej?t.ej(t,e):h(t,e)),f.debug&&n,n===r?0:0===n?r:-n},r.prototype.Li=function(t){if(!this.tf){for(var i,n=B[this.mode],r=0;r<n.length;){if(i=this.gj(n[r++],t),0===i)return void this.Ki();0>i&&(r=0,this.Ki())}f.debug&&i>0}},r.prototype.Ni=function(){for(var t=[],i=this.Ei.length-1;i>=0;i--){var n=this.Ei[i];t[y]=t[b]=!1;for(var r=y;b>=r;r++)for(var e,o=n.Ti[r],s=0;e=o[s],s<o.length;s++)if(this.tf||e.ud.Yi()>=2){t[r]=!0;break}t[y]&&t[b]?n.hj():this.tf&&(n.color=t[y]?y:b)}},r.prototype.Oi=function(){this.ij(),this.jj(),this.kj()},r.prototype.ij=function(){if(this.tf)for(var t in this.Lf){var i=this.Lf[~~t].group;this.ce[i.color]+=i.Gc.length}},r.prototype.jj=function(){if(!this.tf)for(var t in this.Lf){var i=this.Lf[~~t];if(i.Oh){for(var n=!1,r=i.lj.length-1;r>=0;r--)if(!i.lj[r].ud.Oh){n=!0;break}var e=i.group.color;if(!i.lj.length||n){var o=i.group.Gc[0],s=this.Fi.Si(o.Nc,o.Oc,e,c.ad+e);this.de[e]+=s,this.ce[1-e]+=s}else for(var h=i.Ri.length-1;h>=0;h--)i.Ri[h].$i(e)}}},r.prototype.kj=function(){for(var t=this.Di._b,i=[],n=this.Ei.length-1;n>=0;n--){var r=this.Ei[n],e=r.mj(this.tf?null:i);if(e){this.ce[r.color]+=e-i.length,this.Fi.Si(r.Nc,r.Oc,r,c.bd+r.color);for(var o=i.length-1;o>=0;o--){var s=i[o];t[s.Oc][s.Nc]=c._c}}else this.Fi.Si(r.Nc,r.Oc,r,c._c)}}},{"../../../Grid":11,"../../../constants":40,"../../../log":43,"./GroupInfo":35,"./Void":36,"./ZoneFiller":37}],34:[function(t,i,n){"use strict";function r(t,i){this.Of=t,this.Ti=[],this.color=i[0].color,this.sf=!1,this.nj(i)}i.g=r,r.prototype.nj=function(t){for(var i=this.Ti,n=t.length-1;n>=0;n--){var r=t[n];i.indexOf(r)<0&&i.push(r)}}},{}],35:[function(t,i,n){"use strict";function r(t,i){this.qf=i,this.oj=[],this.Ri=[],this.pj=[],this.lj=[],this.qj=[0,0],this.Mf=[],this.rj=[],this.sj=[],this.group=t,this.Qi()}function e(t,i,n){for(var r=i.length-1;r>=0;r--)for(var e=i[r].ud,o=t.length-1;o>=0;o--)if(!(t[o].indexOf(e)<0)){-1!==n&&n!==o?(t[n]=t[n].concat(t[o]),t.splice(o,1),n>o&&n--):n=o;break}return n}function o(t,i,n,r){var o=-1;o=e(t,n,o),o=e(t,r,o),0>o?t.push([i]):t[o].push(i)}var s=t("../../../constants"),h=t("./Band"),a=t("../../../log"),u=s.EMPTY,c=s.NEVER,l=s.mi,f=s.ALWAYS,p=s.rh,g=s.sh;i.g=r;var d=r.Ai=-1,v=r.Bi=1,y=r.Ci=0,b=r.zi=1e3;r.prototype.Qi=function(){this.tj=this.bj=0,this.oj.length=0,this.Ri.length=0,this.bh=null,this.Ph=this.Oh=!1,this.uj=null,this.pj.length=0,this.lj.length=0,this.qj[p]=this.qj[g]=0,this.Mf.length=0,this.rj.length=0,this.sj.length=0,this.vj=0},r.wj=function(t){return"#"+t.group.jc},r.prototype.toString=function(){var t=this.bh?this.bh.toString():"";return this.group.toString()+" (isAlive:"+this.Ph+" isDead:"+this.Oh+" voids:"+this.oj.length+" brothers:["+t+"] deadEnemies:["+this.pj.map(r.wj)+"])"},r.prototype.xj=function(t){return a.debug,this.oj.push(t),this.tj++,this},r.prototype.yj=function(t){var i=this.oj.indexOf(t);if(-1===i)throw new Error("remove unknown void");a.debug,this.oj.splice(i,1),this.tj--},r.prototype.Ui=function(){for(var t=this.group,i=t.color,n=[],r=[],e=[],o=t.Ad(),s=o.length-1;s>=0;s--)for(var a=o[s],u=a.Bd,c=null,l=u.length-1;l>=0;l--){var f=u[l];if(f.color===i&&f.group!==t){c=f.group;var p=n.indexOf(c);p>=0?e[p]!==a&&(r[p]=!1):(n.push(c),r.push(!0),e.push(a))}}if(n.length){for(var g=n.length-1;g>=0;g--)if(r[g]){var d=e[g],v=this.qf.pf(d).zj(d,[t,n[g]]);this.Mf.push(v),this.rj.push(n[g])}else this.sj.push(n[g]);n.push(t),h.yi(n)}},r.hh=function(t){return"subband["+t.length+" groups: "+t.map(function(t){return t.group.toString(1)}).join(", ")+"]"},r.prototype.Aj=function(t){for(var i=[],n=this.rj.length-1;n>=0;n--)this.Mf[n].Of!==t&&i.push(this.rj[n]);return i},r.prototype.nh=function(t,i){for(var n,r=[],e=t.length-1;e>=0;e--){var s=t[e].ud,h=s.bh;if(h){if(h===n)continue;n=h;for(var a=h.dh.length-1;a>=0;a--){var u=h.dh[a];o(r,u,u.sj,u.Aj(i))}}else r.push([s])}return r},r.prototype.lh=function(t){var i=this.bh;if(!i)return[];for(var n=[],r=i.dh.length-1;r>=0;r--){var e=i.dh[r];e!==this&&o(n,e,e.sj,e.Aj(t))}return n},r.prototype.Bj=function(){if(this.tj>=2)return c;var t=this.Bh();return t>=3?c:0===t?f:l},r.prototype.Cj=function(){if(this.Bj()===c)return!1;if(this.sj.length)return!1;for(var t=this.group.color,i=0,n=0,r=this.Ri.length-1;r>=0;r--){var e=this.Ri[r];e.color===t&&0!==e.Dj&&(i++,e.Dj>=3&&n++,this.pj.length&&n++)}return!(i+n>=2)},r.prototype.aj=function(t){this.Oh=!0;for(var i=this.lj=this.group.Cd(),n=i.length-1;n>=0;n--)i[n].ud.pj.push(this);a.debug},r.prototype.Yi=function(t,i){if(this.Ph||this.tj>=2)return b;for(var n,r=0,e=this.group.color,o=this.group.Mc,s=this.Ri.length-1;s>=0;s--){var h=this.Ri[s],a=Math.min(o,h.si);if(h.yh)h.yh===this&&(r+=a);else{var u=h.Ti[e];if(1===u.length)r+=a;else{var c=this.group.jc,l=c;for(n=u.length-1;n>=0;n--)l=Math.min(u[n].jc,l);c===l&&(r+=a)}}}if(r/=100,i||(r+=o/1e4),this.Oh)return 0+r;var f=0;if(!i&&this.bh){var p=this.bh.dh;for(n=p.length-1;n>=0;n--)p[n]!==this&&(f+=p[n].Yi(t,!0))}var g=t?this.Ej():this.pj.length;return this.tj+g+f+r},r.prototype.oi=function(t){if(this.tj>1)return f;if(0===this.tj)return c;var i=this.oj[0],n=i.si;if(n>6)return f;a.debug;for(var r,e=this.group,o=e.color,s=null,h=0,p=0,g=0,d=null,v=null,y=0,b=i.Fj,m=!1,w=[0,0,0,0,0],x=0;n>x;x++){for(var k=b[x],j=0,M=0,S=0,C=k.Bd.length-1;C>=0;C--){var G=k.Bd[C];switch(G.color){case u:S++;break;case o:M++;break;default:if(1===G.group.Mc){S++,y+=2;break}j++,d?G.group!==d&&(v=G.group):d=G.group}}if(j){if(2>S+(M?1:0))continue}else{if(y++,r=k,2>S)continue;w[S]++}if(a.debug,g++,k.He()&&(m=!0),s&&!s.He()){if(p>j)continue;if(h+p>=S+j)continue}s=k,p=j,h=S}if(m&&g>1&&g--,a.debug,!s)return c;if(1===y&&!v&&d&&d.Gc.length<3&&this.Gj(d,r,s))return c;if(g>=2){var T=4===n&&0===p&&4===w[2],D=5===n&&0===p&&1===w[3]&&3===w[2],O=6===n&&0===p&&2===w[3]&&4===w[2];if(!T&&!D&&!O)return f}return t[0]=s.Nc,t[1]=s.Oc,l},r.prototype.Gj=function(t,i,n){for(var r=i.Bd.length-1;r>=0;r--){var e=i.Bd[r];if(e.color===u&&e!==n&&e.Ne(t))return!0}return!1},r.prototype.Ej=function(){for(var t=this.pj.length,i=t-1;i>=0;i--)for(var n=this.pj[i].Ri,r=n.length-1;r>=0;r--)if(n[r].yh===this){t--;break}return t},r.prototype.cj=function(){if(!this.bh)return y;for(var t=this.bh.dh,i=0,n=!1,r=t.length-1;r>=0;r--){var e=t[r];e!==this&&(n||e.Ph?n=e.Ph=!0:(i+=e.tj,i>=2&&(n=e.Ph=!0)))}return n?(a.debug,this.Ph=!0,v):y},r.prototype.Hj=function(){if(this.bh)return!1;if(this.group.Gc.length>=6)return!1;for(var t=this.Ri.length-1;t>=0;t--)if(this.Ri[t].color===this.group.color)return!1;return!0},r.prototype.dj=function(t){if(this.tj>=2)return this.Ph=!0,a.debug,v;if(this.Hj())return d;var i=[],n=this.oi(i);if(n===l){if(this.vj=.5,void 0===t)return y;t!==this.group.color&&(n=c)}return n===c?(this.vj=0,this.bh||this.pj.length?y:this.Ij()>=1.5?y:(this.bj=this.Yi(),d)):(this.Ph=!0,this.vj=1,a.debug,v)},r.prototype._i=function(){for(var t=this.bj||this.Yi(),i=this.group.Cd(),n=null,r=0;r<i.length;r++){var e=i[r].ud,o=t-e.Yi();if(a.debug,o>0)return a.debug,y;0===o&&(a.debug,n=e)}return n?(this.uj=n,n.uj=this,y):d},r.prototype.fj=function(t){var i=this.bj=this.Yi(!0);return i>=2?(this.Ph=!0,a.debug,v):t>i?(this.bj=i,d):y},r.prototype.Jj=function(t,i){if(this.bh){for(var n=this.bh.dh,r=0,e=n.length-1;e>=0;e--)r+=t.call(n[e],i);return r}return t.call(this,i)},r.prototype.zh=function(t,i){this.qj[t]+=i},r.prototype.sg=function(){for(var t=1-this.group.color,i=this.Ri.length-1;i>=0;i--){var n=this.Ri[i];if(n.color!==t)return!1}return!0},r.prototype.Kj=function(){for(var t=this.group.color,i=this.Ri.length-1;i>=0;i--){var n=this.Ri[i];if(void 0===n.color){for(var r=n.Ti[1-t],e=!0,o=r.length-1;o>=0;o--){var s=r[o];if(s.Gc.length>=6||s.vd===f){e=!1;break}}if(e)return 1}}return 0},r.prototype.Bh=function(){return this.tj+this.vj+this.Kj()+(this.qj[p]+this.qj[g])/2},r.prototype.Ij=function(){return this.Jj(this.Bh)},r.prototype.Lj=function(){return this.group.Gc.length},r.prototype.Zi=function(){return this.Jj(this.Lj)}},{"../../../constants":40,"../../../log":43,"./Band":32}],36:[function(t,i,n){"use strict";function r(t,i){this.Ha=t,this.code=i,this.Nc=this.Oc=0,this.si=0,this.Ti=null,this.Fj=null,this.Mj=void 0,this.color=void 0,this.yh=void 0,this.Nj=!1,this.Oj=!1,this.Dj=-1,this.Mf=null,this.Pj=!1}function e(t){return t?v[t]:v[0]}function o(t){for(var i=t.length-1;i>=0;i--)if(!t[i].ud.Oh)return!1;return!0}function s(t){return"#"+t.jc}var h=t("../../../constants"),a=t("./FakeSpot"),u=t("../../../Grid"),c=t("../../../log"),l=h.za,f=h.Aa,p=1,g=2,d=3,v=["void","eye","fake","dame"];i.g=r,r.prototype.Qj=function(t,i){return this.Nc=t,this.Oc=i,this.Mf=[],this.Ti=[[],[]],this.Fj=[],this.Ti},r.prototype.Rj=function(t,i){this.si++,this.Fj.push(this.Ha.vc(t,i))},r.prototype.zj=function(t,i){c.debug,this.Oj=!0;var n=this.Fj.indexOf(t),r=this.Mf[n];return r?r.nj(i):r=this.Mf[n]=new a(t,i),r},r.prototype.Vi=function(){var t=this.Ti[l],i=this.Ti[f],n=o(t),r=o(i);if(n&&r)return this.Nj||void 0===this.color?!1:this.Sj();if(this.Mj===p)return!1;if(!n&&!r)return!1;var e=n?f:l;return this.Pj=!t.length||!i.length,this.Oj?this.Tj(e):(this.Dj=this.si,this.Uj(e))},r.prototype.Tj=function(t){this.Mj=g,this.color=t,this.yh&&(this.yh.yj(this),this.yh=null);for(var i=this.Mf.length-1;i>=0;i--){var n=this.Mf[i];n&&(n.sf=!1)}return!0},r.prototype.Wi=function(){if(this.Mj!==g)return!1;var t=this.Dj,i=this.Dj=this.si-this.Vj();return c.debug,i!==t},r.prototype.Vj=function(t){t||(t=[]);for(var i=this.Mf.length-1;i>=0;i--){var n=this.Mf[i];if(n&&n.color===this.color)for(var r=n.Ti,e=r.length-1;e>=0;e--)if(r[e].ud.Cj()){c.debug&&!n.sf,n.sf=!0,t.push(n.Of);break}}return t.length},r.prototype.sf=function(t){for(var i=this.Mf.length-1;i>=0;i--){var n=this.Mf[i];if(n&&n.color===this.color&&n.Of===t)return n.sf}return!1},r.prototype.Xi=function(){if(this.Mj===g){if(0===this.Dj){if(this.yh)throw new Error("NEVER HAPPENS");return void c.debug}c.debug;var t=this.color;return this.color=this.Mj=void 0,this.Uj(t)}},r.prototype.Uj=function(t){return this.Pj?this.Wj(t):this.$i(t)},r.prototype.Wj=function(t){c.debug,this.Mj=p,this.color=t;var i=this.Ti[t];return this.yh=i[0].ud.xj(this),!0},r.prototype.$i=function(t){if(t===this.color)return!1;c.debug,this.yh&&(this.yh.yj(this),this.yh=null),this.color=t;for(var i=this.Ti[1-t],n=i.length-1;n>=0;n--)for(var r=i[n].ud.Ri,e=r.length-1;e>=0;e--)if(r[e]!==this&&r[e].color===t)return!0;var o=this.Ti[t];return this.yh=o[0].ud.xj(this),!0},r.prototype.hj=function(){c.debug,this.yh&&(this.yh.yj(this),this.yh=null),this.Mj=d,this.color=void 0},r.prototype.Sj=function(){c.debug;var t=this.color;if(void 0===t)throw new Error("dead group's eye of undefined owner");this.Nj=!0,this.Oj=!1,this.yh&&(this.yh.yj(this),this.yh=null),this.Mj=p,this.color=1-t;for(var i=this.Ti[t],n=i.length-1;n>=0;n--){var r=i[n].ud;if(r.lj.length)return this.yh=r.lj[0].ud.xj(this),!0}return!0},r.prototype.mj=function(t){return void 0===this.color?0:(t&&(t.length=0,this.Oj&&this.Vj(t)),this.si)},r.prototype.Xj=function(t){var i=t.group;return this.Ti[i.color].indexOf(i)>-1},r.prototype.toString=function(){return"{"+e(this.Mj)+"-"+u.qd(this.Nc,this.Oc)+" vcount:"+this.si+" black:"+(this.Ti[l].map(s).toString()||"-")+" white:"+(this.Ti[f].map(s).toString()||"-")+"}"}},{"../../../Grid":11,"../../../constants":40,"../../../log":43,"./FakeSpot":34}],37:[function(t,i,n){"use strict";function r(t,i){this.Ha=t,this._b=i._b,this.Ti=null,this.Yj=null}var e=t("../../../constants"),o=e.Xb;i.g=r,r.prototype.Si=function(t,i,n,r){if(this._b[i][t]!==n)return 0;this.Yj=n;var e="number"!=typeof r?r:null;this.Ti=e&&e.Qj(t,i);for(var o,s,h,a=0,u=this._b,c=[[t,i,i]];o=c.pop();)if(s=o[0],i=o[1],h=o[2],u[i][s]===n){for(;this.Zj(s,i-1);)i--;for(;this.Zj(s,h+1);)h++;a+=h-i+1;for(var l=s-1;s+1>=l;l+=2){for(var f=null,p=i;h>=p;p++)s>l&&(u[p][s]=r,e&&e.Rj(s,p)),this.Zj(l,p)?f||(f=p):f&&(c.push([l,f,p-1]),f=null);f&&c.push([l,f,h])}}return a},r.prototype.Zj=function(t,i){var n=this._b[i][t];if(n===o)return!1;if(n===this.Yj)return!0;if(!this.Ti)return!1;if("number"!=typeof n)return!1;var r=this.Ha.vc(t,i).group;if(!r)throw new Error("Unexpected: ZoneFiller replacing a group");var e=this.Ti[n];return-1===e.indexOf(r)&&e.push(r),!1}},{"../../../constants":40}],38:[function(t,i,n){"use strict";function r(t,i,n){this.name="Chuckie",this.yb=t,this.qf=new o(t),this._j(n),this.setColor(i)}function e(t,i){return i[1]-t[1]}var o=t("./boan/BoardAnalyser"),s=t("../../constants"),h=t("../../Genes"),a=t("../../Grid"),u=t("../../log"),c=t("../../test"),l=t("./boan/ZoneFiller"),f=t("./Connector"),p=t("./GroupAnalyser"),g=t("./GroupsAndVoids"),d=t("./Hunter"),v=t("./Influence"),y=t("./MoveInfo"),b=t("./NoEasyPrisoner"),m=t("./PotentialEyes"),w=t("./PotentialTerritory"),x=t("./Pusher"),k=t("./Savior"),j=t("./Shaper"),M=t("./Spacer"),S=s.Xb,C=s.Pf,G=s.$j,T=s.Qf,D=-1;i.g=r,r.ak="Chuckie",r.bk="0.1",r.Vd=o,r.ck=l,r.prototype.dk=function(t){var i=new t(this);return this.Wf.push(i),i},r.prototype.ek=function(){var t=this.bf={};this.Wf=[],t.Ff=this.dk(y),t._f=this.dk(w),t.fk=this.dk(g),t.ag=this.dk(v),t.$f=this.dk(m),t.gk=this.dk(p),t.af=this.dk(b),t.hk=this.dk(k),t.df=this.dk(d),t.Yf=this.dk(f),t.ik=this.dk(M),t.jk=this.dk(x),t.kk=this.dk(j);for(var i=0;i<this.Wf.length;i++)this.Wf[i].Uf()},r.prototype.setColor=function(t){this.color=t;for(var i=0;i<this.Wf.length;i++)this.Wf[i].bg(t)},r.prototype._j=function(t){this.hg=t||this.hg||new h,this.Sf=this.gg("smallerMove",.03,.01,.1),this.Ha!==this.yb.Ha&&(this.Ha=this.yb.Ha,this.Ua=this.Ha.Ua,this.tf=this.yb.xa,this.lk=new a(this.Ua,S),this._e=new a(this.Ua,0,S),this.ek()),this.mk=this.nk=0,this.pk=this.qk=this.rk=0,this.sk=!1,this.Yg=this.Zg=D,this.cg=null},r.prototype.tk=function(t){for(var i=0;i<this.Wf.length;i++){var n=this.Wf[i];if(n.name===t)return n}return null},r.prototype.gg=function(t,i,n,r){return void 0===n&&(n=null),void 0===r&&(r=null),this.hg.get(this.name+"-"+t,i,n,r)},r.prototype.uk=function(t,i,n){this.pk=n,this.qk=t,this.rk=i,this.sk=1!==this.vk},r.prototype.wk=function(t,i,n){if(n>this.pk)this.vk=1,this.uk(t,i,n);else{if(this.vk++,Math.random()*this.vk>=1)return;this.uk(t,i,n)}},r.prototype.xk=function(){this.mk++;var t=this.lk._b,i=this._e._b;this.yk(),this.zk(t,i),this.Ak(t,i);var n=this.Bk(t,i);return u.dg(this.Kg?u.eg:u.$g),n},r.prototype.yk=function(){this.pk=this.Sf-.001,this.qk=D,this.Kg=!!u.debug,u.dg(u.$g)},r.prototype.zk=function(t,i){for(var n=1;n<=this.Ua;n++)for(var r=1;r<=this.Ua;r++)this.Ha.pb(r,n,this.color)?(t[n][r]=C,i[n][r]=0):t[n][r]=G;if(this.Yg!==D){if(t[this.Zg][this.Yg]===G)throw new Error("Invalid test move: "+this.Yg+","+this.Zg);t[this.Zg][this.Yg]=T}},r.prototype.Ak=function(t,i){for(var n=0;n<this.Wf.length;n++){var r=this.Wf[n];u.dg(this.Kg&&this.cg===r.name?u.eg:u.$g);var e=Date.now();r.xg&&r.xg(),r.Cf(t,i);var o=Date.now()-e;o>=3&&!c.Ck&&u.Dk("Slowness: "+r.name+" took "+o+"ms")}this.bf.Ff.Lg(t,i)},r.prototype.Bk=function(t,i){for(var n=1;n<=this.Ua;n++)for(var r=1;r<=this.Ua;r++)t[n][r]<C||i[n][r]<this.pk||this.wk(r,n,i[n][r]);return this.pk<this.Sf?"pass":(this.sk&&this.nk++,a.qd(this.qk,this.rk))},r.prototype.Ek=function(){var t=this.bf._f;return t.Cf(),t.Hh._b},r.prototype.Fk=function(t,i){this.Yg=t,this.Zg=i,this.xk(),this.Yg=D},r.prototype.Gk=function(t,i){for(var n={},r=0;r<this.Wf.length;r++)this.Wf[r].fg(t,i,n);return n},r.prototype.Hk=function(t,i){return this.Fk(t,i),this._e._b[i][t]},r.prototype.Ik=function(t,i,n){this.Fk(t,i);var r=this.tk(n);return r._e._b[i][t]},r.prototype.Jk=function(t){this.cg=t},r.prototype.Kk=function(t,i){var n=this.yb.ob(t);if(!n)return"";var r=n[0],o=n[1];if(i){if(!this.Ha.pb(r,o,this.yb.Ka))return"Invalid move: "+t;this.Fk(r,o)}var s=this.Gk(r,o),h=this._e._b[o][r],a=[];for(var u in s)0!==s[u]&&a.push([u,s[u]]);a.sort(e);for(var c=t+" ("+h.toFixed(2)+")\n",l=0;l<a.length;l++)c+="- "+a[l][0]+": "+a[l][1].toFixed(2)+"\n";return c}},{"../../Genes":9,"../../Grid":11,"../../constants":40,"../../log":43,"../../test":45,"./Connector":17,"./GroupAnalyser":19,"./GroupsAndVoids":20,"./Hunter":22,"./Influence":23,"./MoveInfo":24,"./NoEasyPrisoner":25,"./PotentialEyes":26,"./PotentialTerritory":27,"./Pusher":28,"./Savior":29,"./Shaper":30,"./Spacer":31,"./boan/BoardAnalyser":33,"./boan/ZoneFiller":37}],39:[function(t,i,n){"use strict";function r(){this.Lk=null,this.Wd=this.Mk=this.Nk=this.Ok=null}i.g=new r,r.prototype.Pk=function(t){this.Lk={};for(var i=0;i<t.length;i++){var n=t[i];this.Lk[n.name]=n.Qk}var r=t.length-1;this.Wd=this.Mk=t[r].Qk,this.Nk=r>=1?t[r-1].Qk:null,this.Ok=r>=2?t[r-2].Qk:null}},{}],40:[function(t,i,n){"use strict";function r(){this.rh=0,this.sh=1,this.Xb=-99,this.EMPTY=-1,this.za=0,this.Aa=1,this.Pf=0,this.Qf=1,this.$j=-1,this.NEVER=0,this.mi=1,this.ALWAYS=2,this.Ae=0,this.Be=3,this.qh=7,this.ph=1,this.Ch=this.Pe=0,this.Se=1,this.Dh=this.Qe=2,this.Re=3,this.Te=4,this.Ue=5,this.Ve=6,this.We=7,this.Xe=8,this.xf=9,this.Ye=10,this.Ze=11,this.Oe=12,this.Ca="Japanese",this.Rk="Chinese",this.Ba=0,this.Sk=1}i.g=new r},{}],41:[function(t,i,n){"use strict";function r(t){return"\n"!==t.slice(-1)?0:"\r\n"!==t.slice(-2)?1:2}n.Vf=function(t){return t.name||t.toString().split(/ |\(/,2)[1]},n.clone=function(t){if(null===t||void 0===t)return t;var i;if(t instanceof Array){i=[];for(var n=0,r=t.length;r>n;n++)i[n]=t[n]}else{if("object"!=typeof t)throw new Error("clone called on "+typeof t);if("function"==typeof t.clone)return t.clone();i={};for(var e in t){var o=t[e];"function"!=typeof o&&(i[e]=o)}}return i},String.prototype.Qb=function(t){if(void 0===t)return this.substr(0,this.length-r(this));var i=this.length-t.length;return this.substr(i)===t?this.substr(0,i):this.toString()},String.prototype.ld=function(t){if(void 0===t)t=r(this)||1;else if("number"!=typeof t)throw new Error("Invalid parameter type for String.count: "+typeof t);return this.substr(0,this.length-t)},String.prototype.startsWith||(String.prototype.startsWith=function(t){return this.substr(0,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t){return this.substr(this.length-t.length)===t}),String.prototype.format=function(t){if("%"!==this[0])throw new Error("Invalid format: "+this.toString());var i,n=this.slice(1,-1),r=0,e=this.slice(-1);switch(e){case"d":case"x":var o=" ";"0"===n[r]&&(r++,o="0");var s=parseInt(n.substr(r));i=t.toString("x"===e?16:10);for(var h=s-i.length;h>0;h--)i=o+i;return i;case"f":var a="";if("+"===n[r]&&(r++,t>0&&(a="+")),"."!==n[r++])break;var u=parseInt(n.substr(r));return a+t.toFixed(u)}throw new Error("Unknown format: "+this.toString())},String.prototype.me=function(t,i){return this>=t&&i>=this},n.Tk=function(t,i){for(var n=new Array(t),r=t-1;r>=0;r--)n[r]=i;return n},n.Qc=function(t,i,r){for(var e=new Array(t),o=e[0]=n.Tk(i,r),s=t-1;s>=1;s--)e[s]=o.concat();return e},Array.Uk=function(t,i){if(void 0===t)return[];if(void 0===i)return new Array(t);var n,r=[];if("function"==typeof i)for(n=0;t>n;n++)r[n]=i(n);else for(n=0;t>n;n++)r[n]=i;return r},Array.prototype.Vk=function(t){for(var i=this.length,n=0;n<t.length;n++){var r=t[n];-1===this.indexOf(r)&&this.push(r)}return this.length-i}},{}],42:[function(t,i,n){"use strict";function r(){this.Wk=null,this.map={},this.Xk=this.Yk.bind(this);try{var t=window.localStorage.getItem(o);t&&(this.map=JSON.parse(t))}catch(i){e.Zk("Cannot load local preferences: "+i)}}var e=t("./log"),o="localPref";r.prototype.terminate=function(){this.Wk&&this.Yk()},r.prototype.$k=function(){this.Wk||(this.Wk=window.setTimeout(this.Xk,6e4))},r.prototype.Yk=function(){window.clearTimeout(this.Wk),this.Wk=null;try{window.localStorage.setItem(o,JSON.stringify(this.map))}catch(t){e.Zk("Cannot save local preferences: "+t)}},r.prototype.Gb=function(t,i){var n=this.map[t];return void 0!==n?n:i},r.prototype.Db=function(t,i){this.map[t]=i,this.$k()},i.g=new r},{"./log":43}],43:[function(t,i,n){"use strict";function r(){this.level=NaN,this._k=null,this.eg=0,this.$g=1,this.al=2,this.ERROR=3,this.bl=4,this.cl=!1,this.Dd=!1}var e=console,o=0,s=1,h=2,a=3,u=4;r.prototype.dg=function(t){t!==this.level&&(this.level=t,this.debug=o>=t?this.dl:null,this.info=s>=t?this.ue:null,this.warn=h>=t?this.Dk:null,this.error=a>=t?this.Zk:null,this.fatal=u>=t?this.el:null)},r.prototype.fl=function(t){this._k=t},r.prototype.gl=function(t,i){var n=this;return function(r){n.level>t||n._k&&!n._k(t,r)||i.call(e,r)}};var c=i.g=new r;r.prototype.dl=c.gl(o,e.debug),r.prototype.ue=c.gl(s,e.info),r.prototype.Dk=c.gl(h,e.warn),r.prototype.Zk=c.gl(a,e.error),r.prototype.el=c.gl(u,e.error),c.dg(s)},{}],44:[function(t,i,n){"use strict";function r(){this.appName=e.name,this.appVersion=e.version,this.hl=null,this.il=null}var e=t("../package.json");i.g=new r},{"../package.json":65}],45:[function(t,i,n){"use strict";function r(){this.debug=!1,this.jl=this.Ck=!1,this.kl=null,this.ll=null}i.g=new r,r.prototype.ml=function(t,i){this.kl=new t,i(this.kl)},r.prototype.assert=function(t){if(t!==!0)throw new Error("assertion failed: "+t)}},{}],46:[function(t,i,n){"use strict";function r(){this.nl=null,this.ol=null,this.Ha=null,this.Ua=0,this.pl=null,this.cursor={type:"CR",x:0,y:0},this.ql=!1,this.rl={type:null,x:0,y:0}}function e(t){switch(t){case-1:return{type:"mini",c:l.B};case-.5:return{type:"outline",c:l.B};case 0:return null;case.5:return{type:"outline",c:l.W};case 1:return{type:"mini",c:l.W};default:return null}}function o(t){switch(t){case a.bd+p:case a.ad+f:return{type:"mini",c:l.B};case a.bd+f:case a.ad+p:return{type:"mini",c:l.W};case a._c:return{type:"SL",c:"grey"};default:return null}}function s(t){if(null===t)return null;var i=1,n=0,r=2,e=0;if(void 0!==b&&(n=b),void 0!==m&&(r=m),void 0!==w&&(e=w),t===e)return null;for(var o=t.toFixed(r),s=n;r>s;s++)o=o.Qb("0");if(o=o.Qb("."),"0."===o.substr(0,2)&&(o=o.slice(1)),0===e){if("0"===o||".0"===o)return null;i=1>t?.6:1}return{type:"LB",text:o,scale:i}}var h=t("../constants"),a=t("../Grid"),u=t("../log"),c=t("./touchManager.js");t("../../lib/wgo.js");var l=window.WGo,f=h.Aa,p=h.za,g=h.EMPTY,d=window.devicePixelRatio||1,v={};v[l.B]=p,v[l.W]=f;var y={};y[g]=null,y[p]=l.B,y[f]=l.W,i.g=r,r.prototype.create=function(t,i,n,r){var e=n.Ua;if(this.Ha=n,!this.nl||this.Ua!==e){this.Ua=e,r=r||{};var o=r.noCoords?0:-.23,s={size:e,width:i,section:{top:o,left:o,right:o,bottom:o},coordFontSize:.6};switch(r.background){case"wood":s.background=(window.rootDir||".")+"/assets/wood1.jpg";break;default:s.background="#c75"}t.clear(),this.nl=new l.sl(t.tl(),s),this.ul=60+this.nl.vl,r.noCoords||this.nl.wl(l.sl.xl),this.yl()}},r.prototype.yl=function(){var t=this;c.zl(this.nl.Al,function(i,n,r){if("dragCancel"===i)return t.Bl(-1,-1);"drag"===i.substr(0,4)&&(r-=t.ul);var e=t.Cl(n,r);switch(n=e[0],r=e[1],i){case"dragStart":return t.Bl(n,r);case"drag":return t.Bl(n,r);case"dragEnd":return t.Bl(-1,-1),t.Dl(n,r);case"tap":return t.Dl(n,r)}})},r.prototype.El=function(t){this.Fl=y[t]},r.prototype.Bl=function(t,i){var n=this.Gl(t,i);if(this.ql){if(t===this.cursor.x&&i===this.cursor.y)return;this.nl.Hl(this.cursor)}this.ql=n,n&&(this.cursor.x=t,this.cursor.y=i,this.nl.Il[t][i][0]?(this.cursor.type="CR",
this.cursor.c=void 0):(this.cursor.type=void 0,this.cursor.c=this.Fl),this.nl.Jl(this.cursor))},r.prototype.Kl=function(t,i,n){this.rl.type&&this.nl.Hl(this.rl),this.rl.type=t,t&&(this.rl.x=i-1,this.rl.y=this.Ua-n,this.nl.Jl(this.rl))},r.prototype.Gl=function(t,i){return t>=0&&i>=0&&t<this.Ua&&i<this.Ua},r.prototype.Dl=function(t,i){var n=t+1,r=this.Ua-i;if(!this.Gl(t,i))return this.ol("!"+(n>=1&&n<=this.Ua?a.kd(n):r));if(this.Ha.wc(n,r)===g){var e=a.qd(n,r);this.ol(e)}},r.prototype.Ll=function(t){this.ol=t},r.prototype.Cl=function(t,i){var n=this.nl;return t=Math.round((t*d-n.left)/n.Ml),i=Math.round((i*d-n.top)/n.Nl),[t,i]},r.prototype.refresh=function(){var t=!1;"regular"!==this.pl&&(this.pl="regular",t=!0);for(var i=0;i<this.Ua;i++)for(var n=0;n<this.Ua;n++){var r=this.Ha.wc(n+1,this.Ua-i),e=y[r],o=this.nl.Il[n][i][0];t&&(o=null,this.nl.Ol(n,i)),null===e?o&&this.nl.Ol(n,i):o&&o.c===e||this.nl.Jl({x:n,y:i,c:e})}},r.prototype.show=function(t,i,n){this.refresh(),this.pl=t;for(var r=0;r<this.Ua;r++)for(var e=0;e<this.Ua;e++){var o=n(i[this.Ua-r][e+1]);o&&(o.x=e,o.y=r,this.nl.Jl(o))}};var b,m,w;r.prototype.Pl=function(t,i,n){b=t,m=i,w=n};var x={Hh:e,Ql:o,value:s};r.prototype.Rl=function(t,i){var n=x[t];return n?void this.show(t,i,n):u.error&&u.error("invalid display type:",t)},r.prototype.Sl=function(t){this.show("scoring",t,o)}},{"../../lib/wgo.js":62,"../Grid":11,"../constants":40,"../log":43,"./touchManager.js":60}],47:[function(t,i,n){"use strict";function r(t,i,n,e){this.type=i,t instanceof r&&(t=t.Tl);var h=this.Tl=t.appendChild(document.createElement(i));e&&"#"===e[0]&&(s.add(e.substr(1),this),"#"===n[0]&&(n=n.substr(1))),n&&(h.className=n),o&&o.Ul(h,n)}function e(){this.pm={}}var o=null,s=null,h=1;r.init=function(t){o=t},i.g=r,r.prototype.Vl=function(t){return this.Tl.textContent=t,this},r.prototype.Wl=function(t){return this.Tl.innerHTML=t,this},r.prototype.setAttribute=function(t,i){return this.Tl.setAttribute(t,i),this},r.prototype.Xl=function(t,i){return this.Tl.style[t]=i,this},r.prototype.Yl=function(t){return t===this.Zl()?this:(this.Tl.style.display=t?"":"none",this.$l=!!t,this)},r.prototype.Zl=function(){return this.$l||void 0===this.$l},r.prototype._l=function(t){return this.Tl.disabled=!t,this.am("disabled",!t),this},r.prototype.text=function(){return this.Tl.textContent},r.prototype.bm=function(){return this.Tl.innerHTML},r.prototype.value=function(){return this.Tl.value},r.prototype.cm=function(){return this.Tl.checked},r.prototype.tl=function(){return this.Tl},r.prototype.clear=function(){this.Tl.innerHTML=""},r.prototype.v=function(t,i){var n=this;this.Tl.addEventListener(t,function(t){i.call(n,t)})},r.prototype.am=function(t,i){var n=this.Tl,r=n.className,e=" "+r+" ",s=" "+t+" ",h=e.indexOf(s);if(i){if(h>=0)return;o&&o.toggle(n,t,i),n.className=r+" "+t}else{if(0>h)return;n.className=e.replace(s," ").trim(),o&&o.toggle(n,t,i)}},r.prototype.dm=function(){this.Tl.scrollTop=this.Tl.scrollHeight},r.em=function(t,i,n){return new r(t,"div",i,n||i)},r.prototype.em=function(t,i){return new r(this,"div",t,i||t)},r.removeChild=function(t,i){t instanceof r&&(t=t.Tl),t.removeChild(i.Tl)},r.prototype.removeChild=function(t){this.Tl.removeChild(t.Tl)},r.fm=function(t,i,n,e){var o=new r(t,"button",i+"Button",i);return n&&(o.Tl.innerText=n),o.v("click",e),o},r.gm=function(t,i,n){var e=r.fm(t,i,null,n);return e.em(i+"BtnIcon btnIcon"),e},r.hm=function(t,i){t.v("click",i)},r.im=function(t,i,n,e){var o=new r(t,"a",i+"Link",i);return o.setAttribute("href",e),o.Vl(n),o},r.jm=function(t,i,n){return new r(t,"span",i,i).Vl(n)},r.km=function(t,i,n,e){var o=i+"Label";r.jm(t,o+" inputLbl",n,o);var s=new r(t,"input",i+"Input inputBox",i);return void 0!==e&&(s.Tl.value=e),s},r.lm=function(t,i,n,e,o){var s=new r(t,"div",i+"Div chkBoxDiv"),a=new r(s,"input",i+"ChkBox chkBox",i),u=a.Tl;return u.type="checkbox",u.name=i,void 0!==e&&(u.value=e),u.id=i+"ChkBox"+(void 0!==e?e:h++),o&&(u.checked=!0),new r(s,"label",i+"ChkLabel chkLbl",i).Vl(n).setAttribute("for",u.id),a},r.mm=function(t,i,n,e,o){e||(e=n);for(var s=[],h=0;h<n.length;h++){var a=s[h]=new r(t,"input",i+"RadioBtn radioBtn",i),u=a.Tl;u.type="radio",u.name=i,u.value=e[h],u.id=i+"Radio"+e[h],e[h]===o&&(u.checked=!0),new r(t,"label",i+"RadioLabel radioLbl",i).Vl(n[h]).setAttribute("for",u.id)}return s},r.nm=function(t){for(var i=0;i<t.length;i++)if(t[i].Tl.checked)return t[i].Tl.value},r.om=function(t,i,n,e,o){e||(e=n);var s=new r(t,"select",i+"DropDwn dropDwn",i);s.values=e;for(var h=0,a=0;a<n.length;a++){var u=new r(s,"option").Tl;u.value=e[a],u.textContent=n[a],e[a]===o&&(h=a)}return s.Tl.selectedIndex=h,s},r.prototype.select=function(t){var i=this.values.indexOf(t);-1!==i&&(this.Tl.selectedIndex=i)},r.gc=function(){return s=new e},e.prototype.add=function(t,i){this.pm[t]=i},e.prototype.get=function(t){return this.pm[t]},e.prototype._l=function(t,i,n){"ALL"===t&&(t=Object.keys(this.pm));for(var r=0;r<t.length;r++)if(!n||-1===n.indexOf(t[r])){var e=this.pm[t[r]];e?e._l(i):console.error("Invalid control name:",t[r])}},e.prototype.Yl=function(t,i,n){"ALL"===t&&(t=Object.keys(this.pm));for(var r=0;r<t.length;r++)if(!n||-1===n.indexOf(t[r])){var e=this.pm[t[r]];e?e.Yl(i):console.error("Invalid control name:",t[r])}},r.qm=function(t){document.head.getElementsByTagName("title")[0].textContent=t},r.rm=function(){var t=window.getSelection();if(!t.rangeCount)return null;var i=t.getRangeAt(0),n=i.startContainer.data;return n?n.substring(i.startOffset,i.endOffset):null},r.sm=function(t,i){var n=new Blob([t],{type:"sgf"}),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download=i,r.click()}},{}],48:[function(t,i,n){"use strict";function r(t,i,n){var r=this.Tl=t.em("moveIndicator "+i);this.tm=r.em("label").Vl(n);var e=r.em("icon");this.um=e.em("text")}t("./moveIndicator.less");var e=t("../constants"),o=e.Aa,s=e.za;i.g=r,r.prototype.vm=function(t,i,n){this.Tl.Yl(null!==t),null!==t&&(this.Tl.am("black",i===s),this.Tl.am("white",i===o),this.um.Vl(t),n&&this.tm.Vl(n))}},{"../constants":40,"./moveIndicator.less":56}],49:[function(t,i,n){"use strict";function r(t,i){this.wm=i,this.xm=t.Ua,this.ym=t.ym,this.zm(t),this.Am(),this.Bm(),this.Cm()}t("./newGameDlg.less");var e=t("../ai"),o=t("../constants"),s=t("./Dome"),h=t("./SettingDlg"),a=t("./Transit"),u=o.za,c=o.Aa,l=[5,7,9,13,19],f="More options",p=" >>",g=" <<";i.g=r,r.prototype.Am=function(){var t=this.xm;this.Dm.Vl(t+" x "+t);var i=t+"x"+t;this.Em.Xl("backgroundImage",'url("assets/'+i+'.png")'),this.Em.Xl("backgroundSize",Math.ceil(t/19*100)+"%"),this.Fm._l(t>5),this.Gm._l(19>t)},r.prototype.Hm=function(t){var i=l.indexOf(this.xm)+t;this.xm=l[i],this.Am()},r.prototype.Bm=function(){this.Im[u].am("robot",this.ym[u]),this.Im[c].am("robot",this.ym[c])},r.prototype.Jm=function(t){this.ym[t]=!this.ym[t],this.Bm()},r.prototype.zm=function(t){this.options=t;var i=this.Km=s.em(document.body,"newGameDialog dialog");i.Yl(!1),i.em("dialogTitle").Vl("Start a new game");var n=i.em("mainDiv");s.gm(n,"setting",this.Lm.bind(this));var r=n.em("centeredDiv").em("boardDiv");this.Im=[],this.Im[0]=s.gm(r,"player",this.Jm.bind(this,0));var o=this.Mm=r.em("sizeBox");this.Dm=o.em("curSize"),this.Gm=s.gm(o,"size",this.Hm.bind(this,1)),this.Em=o.em("boardImgFrame").em("boardImg"),this.Fm=s.gm(o,"size",this.Hm.bind(this,-1)),this.Fm.am("down",!0),this.Im[1]=s.gm(r,"white player",this.Jm.bind(this,1)),this.Nm=s.fm(n,"advanced",f+p,this.Om.bind(this));var h=this.Pm=i.em("advancedDiv");s.jm(h,"inputLbl","Handicap:"),this.Ia=s.om(h,"handicap",[0,2,3,4,5,6,7,8,9],null,t.Ia);var a=h.em("rules");s.jm(a,"inputLbl","Rules:"),this.rules=s.om(a,"rules",["Japanese","Chinese"],null,t.rules);var u=h.em("groupFrame");this.Qm=s.km(u,"loadGame","Game to load:").setAttribute("type","file"),s.jm(u,"inputLbl recentGamesLbl","Recent games:");for(var c=["-"].concat(t.Rm),l=[],g=0;g<c.length;g++)l.push(g);this.Rm=s.om(u,"recentGames",c,l);var d=u.em("moves");this.ie=s.km(d,"moves","Moves to load:",t.ie),d.em("loadMovesInfo").Vl("(SGF format is also accepted)");var v=Object.keys(e.Lk);if(v.length>1){var y=h.em();s.jm(y,"inputLbl","Black AI:"),this.Wd=s.om(y,"defaultAi",v,null,e.Wd.name),s.jm(y,"defAiInfo","(White AI always uses latest AI version)")}var b=s.fm(i,"start","Play",this.Sm.bind(this));i.Yl(!0);var m=this.Pm.Tl.clientHeight+b.Tl.clientHeight+24;this.Pm.Xl("marginTop",-m+"px")},r.prototype.Cm=function(){new a(this.Mm).from("opacity",0).Tm("opacity",1).start(1e3)},r.prototype.Om=function(){this.Um?(this.Vm=!this.Vm,this.Um.Wm(200)):(this.Pm.Yl(!0),this.Vm=!0,this.Um=new a(this.Pm).Tm("marginTop","0").start(200)),this.Nm.Vl(f+(this.Vm?g:p))},r.prototype.Lm=function(){new h},r.prototype.Xm=function(t){t.Ym=t.Zm=void 0;var i=this.Rm.value();if(this.Qm.Tl.files.length){var n=this,r=new FileReader;return r.readAsText(this.Qm.Tl.files[0]),r.onloadend=function(){t.Zm=r.result,n.$m()},!0}return i>0?(t.Ym=i-1,this.$m(),!0):!1},r.prototype.Sm=function(){var t=this.options;t.Ua=this.xm,t.Ia=~~this.Ia.value(),t.ym=this.ym,t.ie=this.ie.value(),e.Wd=this.Wd?e.Lk[this.Wd.value()]:e.Wd,t.rules=this.rules.value(),this.Xm(t)||this.$m()},r.prototype.$m=function(){return this.wm(this.options)?(s.removeChild(document.body,this.Km),!0):!1}},{"../ai":39,"../constants":40,"./Dome":47,"./SettingDlg":52,"./Transit":53,"./newGameDlg.less":57}],50:[function(t,i,n){"use strict";function r(){this._m=null,this.an=""}function e(t,i){for(var n in i)t.style[n]=i[n]}function o(t,i,n,r){var e,o=n[i],s=r[i];if(o)for(e in o)t.style[e]=s?s[e]||null:null;if(s)for(e in s)t.style[e]=s[e]}var s=t("../localPref"),h=t("../../config/colors.json"),a=".neonBlack";i.g=new r,r.prototype.init=function(t){t=t||s.Gb("theme",a),this.bn(t,!0),this.Ul(document.body,"body")},r.prototype.cn=function(){return Object.keys(h)},r.prototype.bn=function(t,i){if(t!==this.an){var n=this._m;if(this.an=t,this._m=h[t],!i){s.Db("theme",t);for(var r=document.all,e=0;e<r.length;e++){var o=r[e];this.dn(o,n)}}}},r.prototype.Ul=function(t,i){if(this._m){var n=this._m[t.localName];if(n&&e(t,n),i&&(n=this._m["."+i],n&&e(t,n),i.indexOf(" ")>=0))for(var r=i.split(" "),o=0;o<r.length;o++)n=this._m["."+r[o]],n&&e(t,n)}},r.prototype.dn=function(t,i){o(t,t.localName,i,this._m);for(var n=t.className.split(" "),r=0;r<n.length;r++)o(t,"."+n[r],i,this._m)},r.prototype.en=function(t,i,n){var r=this._m[i+"+"+n];if(r){var e=this._m[i]||{};for(var o in r)t.style[o]=e[o]||null}},r.prototype.toggle=function(t,i,n){if(this._m){var r,o=t.className.split(" ");if(n){var s=this._m[t.localName+"+"+i];for(s&&e(t,s),r=0;r<o.length;r++)s=this._m["."+o[r]+"+"+i],s&&e(t,s)}else for(this.en(t,t.localName,i),r=0;r<o.length;r++)this.en(t,"."+o[r],i)}}},{"../../config/colors.json":5,"../localPref":42}],51:[function(t,i,n){"use strict";function r(){var t=this.fn;t.options&&(t.options.gn=this.id),s.removeChild(t.parent,t.hn),t.wm&&t.wm(t.options)}function e(t,i,n,e){var o=s.fm(t,"popupDlg",n,r);o.fn=i,o.id=e}function o(t,i,n,r,h){this.parent=t||document.body,this.options=r,this.wm=h,this.hn=o["in"](this.parent);var a=this.hn.em("popupDlg dialog");a.em("dialogTitle").Vl(n||"Problem");var u=a.em("content");s.jm(u,"message",i);for(var c=r&&r.buttons||["OK"],l=a.em("btnDiv"),f=0;f<c.length;f++)e(l,this,c[f],f)}t("./popupDlg.less");var s=t("./Dome");i.g=o,o["in"]=function(t){var i=s.em(t,"popupOverlay"),n=i.Tl.parentElement;return i.Xl("left",n.offsetLeft+"px"),i.Xl("top",n.offsetTop+"px"),i.Xl("height",n.scrollHeight+"px"),i}},{"./Dome":47,"./popupDlg.less":58}],52:[function(t,i,n){"use strict";function r(){var t=this.fn;o.removeChild(t.parent,t.hn)}function e(){this.parent=document.body,this.hn=h["in"](this.parent);var t=this.Km=this.hn.em("settingDlg dialog");t.em("dialogTitle").Vl("Settings");var i=t.em("content"),n=s.cn();o.jm(i,"inputLbl","Color theme:");var e=o.om(i,"theme",n,null,s.an);e.v("change",function(){s.bn(this.value())});var a=t.em("btnDiv"),u=o.fm(a,"ok","OK",r);u.fn=this}t("./settingDlg.less");var o=t("./Dome"),s=t("./Painter"),h=t("./PopupDlg");i.g=e},{"./Dome":47,"./Painter":50,"./PopupDlg":51,"./settingDlg.less":59}],53:[function(t,i,n){"use strict";function r(t){this.Tl=t.Tl||t,this.jn={},this.kn={},this.ln={},this.timeout=null,this.mn=null,this.nn=null}function e(t,i){window.clearTimeout(t.timeout),t.timeout=null,t.Tl.style.webkitTransition=t.mn,!i&&t.nn&&t.nn(),t.nn=null}i.g=r,r.prototype.from=function(t,i){return this.kn[t]=i,this},r.prototype.Tm=function(t,i){return this.ln[t]=i,this},r.prototype.start=function(t,i){var n=this.Tl;n.on&&n.on.timeout&&e(n.on,!0),n.on=this,this.mn=n.style.webkitTransition,n.style.webkitTransition=null;for(var r in this.kn)this.jn[r]=n.style[r],n.style[r]=this.kn[r];n.clientHeight||(n=n);var o="all "+t+"ms ease-in-out";n.style.webkitTransition=o;for(r in this.ln)this.jn.hasOwnProperty(r)||(this.jn[r]=n.style[r]),n.style[r]=this.ln[r];return this.nn=i,this.timeout=window.setTimeout(e,t,this),this},r.prototype.reverse=function(t,i){var n=this.ln;this.ln=this.kn,this.kn=n,this.start(t,i)},r.prototype.Wm=function(t,i){this.ln=this.jn,this.jn={},this.kn={},this.start(t,i)}},{}],54:[function(t,i,n){"use strict";function r(t){this.pn(),this.yb=new a(t),this.qn=new v(this.yb),this.rn=new u(this.yb),this.nl=null,this.initDev?this.initDev():this.sn=!0}t("./ui.less");var e=t("../ai"),o=t("./Board"),s=t("../constants"),h=t("./Dome"),a=t("../GameLogic"),u=t("../GameRecord"),c=t("../main"),l=t("./MoveIndicator"),f=t("./NewGameDlg"),p=t("./Painter"),g=t("./PopupDlg"),d=t("../localPref"),v=t("../ScoreAnalyser"),y=t("./SettingDlg"),b=s.Aa,m=s.za,w=s.Sk,x=s.Ba,k=document.documentElement.clientWidth,j=document.documentElement.clientHeight,M=322;i.g=r,r.prototype.pn=function(){this.Ua=9,this.Ia=0,this.ym=[w,x]},r.prototype.tn=function(){p.init(),h.init(p),window.addEventListener("beforeunload",this.un.bind(this));var t=this.rn.Fb();t&&this.Bb(t)||this.vn(!0)},r.prototype.wn=function(t){this.rules=t,this.yb.Ga(t)},r.prototype.xn=function(t){this.ym=[t[m]?w:x,t[b]?w:x],this.yb.Qa(b,this.ym[b]),this.yb.Qa(m,this.ym[m])},r.prototype.un=function(){this.rn.Cb(),d.terminate()},r.prototype.yn=function(){this.nl.refresh(),this.inDevMode&&this.devDisplay()},r.prototype.zn=function(t,i,n,r){var e=this.An="compact"===t,s=this.Bn=h.em(i,"gameUi");n&&s.em(e?"testTitle":"pageTitle").Vl(n),this.Cn=s.em("board"),r&&(this.Dn=s.em("boardDesc").Wl(r)),this.En(s),this.Fn(s),this.sn||this.createDevControls();var a=this.yb.Ha.Ua+2;e?this.Gn=28*a:this.Gn=Math.min(j-M,k-15);var u=this;this.nl=new o,this.nl.Ll(function(t){return"!"===t[0]?!u.sn&&u.onDevKey(t.substr(1)):u.Hn||u.inEvalMode?!u.sn&&u.showDevData(t,null,!0):void(u.ym[u.yb.Ka]&&u.sn||u.yb.Ma||u.yb.Na||u.In(t))})},r.prototype.Jn=function(){this.Bn&&(h.removeChild(document.body,this.Bn),this.Bn=null,this.nl=null)},r.prototype.Lm=function(){new y},r.prototype.vn=function(t){t||this.rn.Ib(),h.qm(c.appName),this.Jn();var i={Ua:this.Ua,Ia:this.Ia,ym:this.ym,rules:this.rules,ie:"",Rm:this.rn.Lb()},n=this;new f(i,function(t){if(t.Zm)return n.Bb(t.Zm);if(void 0!==t.Ym){var i=n.rn.Mb(t.Ym);return n.Bb(i)}return n.Ua=t.Ua,n.Ia=t.Ia,n.xn(t.ym),n.wn(t.rules),n.Bb(t.ie)})},r.prototype.En=function(t){var i=this.Kn=t.em("statusBar");this.Ln=new l(i,"lastMove","Last:"),this.Mn=i.em("gameInfo"),this.Nn=i.em("message"),this.On=new l(i,"nextPlayer","Next:")},r.prototype.Pn=function(){var t=this.yb.Ea[b]+" VS "+this.yb.Ea[m]+" (B)";t+=", komi: "+this.yb.Ja,this.Ia&&(t+=", hand: "+this.Ia),this.yb.Ra&&(t+=", rules: "+this.yb.Ra),this.Mn.Vl(t)},r.prototype.Qn=function(t){var i=this.yb.history;if(i.length){var n=this.yb.jb(i[i.length-1]);this.Ln.vm(n,1-this.yb.Ka,"#"+i.length+":");var r=this.yb.ob(n);r?this.nl.Kl("CR",r[0],r[1]):this.nl.Kl(null)}else this.Ln.vm(null);t=this.yb.Na?null:this.yb.jb(t||""),this.On.vm(t,this.yb.Ka),this.nl.El(this.yb.Ka)},r.prototype.statusMessage=function(t){-1===t.indexOf("\n")&&(t="\n"+t),this.Nn.Vl(t)},r.prototype.Rn=function(t){this.Sn.Wl(t),this.Sn.Yl(!0)},r.prototype.Fn=function(t){var i=t.em("mainControls"),n=i.em("leftDiv"),r=i.em("mainDiv"),e=i.em("rightDiv");this.Sn=t.em("outputBox").Yl(!1);var o=this;this.Tn=h.gc(),h.fm(n,"#review","Review",function(){o.Un()}),h.gm(n,"setting",this.Lm.bind(this)),h.fm(r,"#back10","<<",function(){o.Vn(-10)}),h.fm(r,"#back1","<",function(){o.Vn(-1)}),h.fm(r,"#forw1",">",function(){o.Vn(1)}),h.fm(r,"#forw10",">>",function(){o.Vn(10)}),this.controls=h.gc(),h.fm(r,"#pass","Pass",function(){o.In("pass")}),h.fm(r,"#next","Next",function(){o.Wn(1)}),h.fm(r,"#next10","Next 10",function(){o.Wn(10)}),h.fm(e,"#nextAll","Finish",function(){o.Wn()}),h.fm(r,"#undo","Undo",function(){o.Xn()}),h.fm(r,"#accept","Accept",function(){o.Yn(!0)}),h.fm(r,"#refuse","Refuse",function(){o.Yn(!1)}),h.fm(r,"#newg","New game",this.vn.bind(this,!1)),h.fm(e,"#resi","Resign",function(){o.Zn()}),h.fm(e,"#save","Get SGF",function(){o.$n()}),this._n=n.em("#aiVsAiFlags"),this.ao=h.lm(this._n,"animated","Animated")},r.prototype.bo=function(){var t=this.Hn,i=this.yb.Na,n=this.yb.Ma,r=!(i||n||t),e=this.ym[m]&&this.ym[b],o=this.An;this.Tn.Yl(["review"],!0),this.Tn.Yl(["back1","back10","forw1","forw10"],t),this.controls.Yl(["accept","refuse"],n&&!t),this.controls.Yl(["undo","pass","resi"],r&&!e),this.controls.Yl(["next","next10","nextAll"],r&&e),this.controls.Yl(["aiVsAiFlags"],r&&e&&!o),this.controls.Yl(["newg","save"],i&&!t&&!o),this.sn||this.toggleDevControls(r,t,e)},r.prototype.co=function(){this["do"]=[];for(var t=m;b>=t;t++)if(this.ym[t]){var i=this.eo(t).constructor;this.yb.Qa(t,w,i.ak+"-"+i.bk)}else this.yb.Qa(t,x,"human")},r.prototype.eo=function(t){var i=this["do"][t];if(i)return i;var n=t===m?e.Wd:e.Mk;return i=this["do"][t]=new n(this.yb,t)},r.prototype.fo=function(){this.Pn(),this.Qn(),this.bo(),this.yn()},r.prototype.ho=function(t){var i=this.yb,n=[];return i.hb(t,n)?(this.ym[b]=i.Fa[b],this.ym[m]=i.Fa[m],!0):(new g(this.Bn,n.join("\n")),this.pn(),!1)},r.prototype.Bb=function(t,i){var n=this.yb;if(!i&&(n.Ta(this.Ua,this.Ia,this.Ja),n.Qa(b,this.ym[b],null),n.Qa(m,this.ym[m],null),t&&!this.ho(t)))return!1;this.co(),this.Ua=n.Ha.Ua,this.Ia=n.Ia,this.rules=n.Ra,this.sn||this.initDev(),this.Bn||this.zn("main",document.body);var r=this.An?void 0:{background:"wood"};return this.nl.create(this.Cn,this.Gn,n.Ha,r),this.fo(),this.rn.Bb(),t||i||this.statusMessage("Game started. Your turn..."),this.io()||i||this.jo(),!0},r.prototype.io=function(){return this.yb.Ma?(this.ko(),!0):this.yb.Na?(this.Mg(),this.lo(),!0):!1},r.prototype.Mg=function(){var t=this.qn.Zd();this.mo=t.join("\n")},r.prototype.ko=function(){this.Mg(),this.statusMessage(this.mo),this.bo(),this.nl.Sl(this.qn.ae()._b)},r.prototype.Yn=function(t){var i=this.yb.Ka;return this.ym[i]&&!this.ym[1-i]&&(i=1-i),this.yb.ub(t,i),t?this.lo():(this.statusMessage("Score in dispute. Continue playing..."),this.bo(),this.yn(),void(this.ym[m]&&this.ym[b]||this.jo()))},r.prototype.lo=function(){this.statusMessage(this.mo),this.Rn(this.rn.Eb()),this.bo()},r.prototype.no=function(t){var i=this.oo=this["do"][this.yb.Ka];this.po=i.nk;var n=i.xk();return this.yb._a(n),t||(this.Qn(),this.statusMessage(""),this.inDevMode&&this.showDevData(n,i,!1)),this.io()?n:(t||this.yn(),n)},r.prototype.In=function(t){if(!this.io()){if(!this.yb._a(t))return this.statusMessage(this.yb.ab().join("\n"));this.yn(),this.Qn(),this.statusMessage(""),window.setTimeout(function(t){t.jo()},500,this)}},r.prototype.Zn=function(){var t=this,i={buttons:["YES","NO"]};new g(this.Bn,"Do you really want to resign?","Confirm",i,function(i){0===i.gn&&(t.yb._a("resi"),t.Qn(),t.io())})},r.prototype.Xn=function(){var t="undo";return(this.ym[m]===this.ym[b]||this.inEvalMode)&&(t="half_undo"),this.yb._a(t)?(this.yn(),this.Qn(),void this.statusMessage('Performed "'+t+'"')):this.statusMessage(this.yb.ab().join("\n"))},r.prototype.jo=function(t){this.ym[this.yb.Ka]&&this.no(t)},r.prototype.Wn=function(t){var i=1===t,n=this.ao.cm(),r=!i&&!n;this.jo(r),i||this.yb.Ma||window.setTimeout(function(i){i.Wn(t-1)},n?100:0,this)},r.prototype.$n=function(){h.sm(this.rn.Eb(),this.rn.Jb()+".sgf")},r.prototype.Un=function(){this.Hn=!this.Hn,this.Tn.get("review").am("toggled",this.Hn),this.bo(),this.Hn?(this.qo=this.yb.history.concat(),this.ro=this.qo.length,this.Vn(0)):this.Vn(this.qo.length-this.ro)},r.prototype.Vn=function(t){this.statusMessage("");for(var i=this.qo,n=this.ro,r=0;t>r&&n!==i.length;r++)this.yb._a(i[n]),n++;for(r=0;r>t&&0!==n;r--)this.yb._a("half_undo"),n--;if(this.ro=n,this.yn(),this.Tn._l(["forw1","forw10"],n!==i.length),this.Tn._l(["back1","back10"],0!==n),this.Qn(i[n]),n===i.length&&this.io(),this.inEvalMode){var e=n>0?i[n-1]:null;e&&e.length<=3&&this.afterReplay(e)}}},{"../GameLogic":7,"../GameRecord":8,"../ScoreAnalyser":14,"../ai":39,"../constants":40,"../localPref":42,"../main":44,"./Board":46,"./Dome":47,"./MoveIndicator":48,"./NewGameDlg":49,"./Painter":50,"./PopupDlg":51,"./SettingDlg":52,"./ui.less":61}],55:[function(t,i,n){"use strict";var r=t("../ai"),e=[{name:"Chuckie",Qk:t("../ai/chuckie")}];r.Pk(e);var o=t("./Ui"),s=new o;s.tn()},{"../ai":39,"../ai/chuckie":38,"./Ui":54}],56:[function(t,i,n){var r='.moveIndicator {\n  height: 80px;\n  text-align: center;\n}\n.moveIndicator.black .icon {\n  background-image: url("assets/stoneBlack.png");\n}\n.moveIndicator.black .text {\n  color: white;\n  text-shadow: #000 0 0 3px;\n}\n.moveIndicator.white .icon {\n  background-image: url("assets/stoneWhite.png");\n}\n.moveIndicator.white .text {\n  color: black;\n  text-shadow: #fff 0 0 3px;\n}\n.moveIndicator .label {\n  font-size: 28px;\n}\n.moveIndicator .icon {\n  display: inline-block;\n  position: relative;\n  top: -3px;\n  background-repeat: no-repeat;\n  background-size: 100%;\n  width: 56px;\n  height: 56px;\n}\n.moveIndicator .icon .text {\n  position: relative;\n  width: 84px;\n  text-align: center;\n  left: -14px;\n  top: 9px;\n  font-size: 28px;\n  font-weight: bold;\n}\n';t("lessify")(r),i.g=r},{lessify:64}],57:[function(t,i,n){var r='.newGameDialog {\n  margin: 100px;\n}\n.newGameDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.newGameDialog .mainDiv .centeredDiv {\n  margin-top: -40px;\n  text-align: center;\n}\n.newGameDialog .boardDiv .sizeBox {\n  display: inline-block;\n  position: relative;\n  width: 240px;\n  max-width: 33%;\n  text-align: center;\n  margin: 10px 18px 0 10px;\n}\n.newGameDialog .boardDiv .sizeBox .curSize {\n  position: absolute;\n  top: 128px;\n  left: 2px;\n  width: 100%;\n  text-align: center;\n  color: white;\n  text-shadow: black 3px 3px 5px;\n}\n.newGameDialog .playerButton {\n  position: relative;\n  vertical-align: top;\n  top: 162px;\n  left: 2px;\n  width: 200px;\n  max-width: 26%;\n  height: 200px;\n}\n.newGameDialog .playerButton .playerBtnIcon {\n  background-image: url("assets/humanBlue.png");\n  -webkit-filter: brightness(0);\n  background-size: 80%;\n}\n.newGameDialog .playerButton.robot .playerBtnIcon {\n  background-size: contain;\n  background-image: url("assets/robotBlue.png");\n}\n.newGameDialog .playerButton.white .playerBtnIcon {\n  -webkit-filter: invert(1) grayscale(1);\n}\n.newGameDialog .sizeButton {\n  position: relative;\n  width: 170px;\n  max-width: 88%;\n  height: 120px;\n  margin: 0 0 10px;\n}\n.newGameDialog .sizeButton .sizeBtnIcon {\n  background-image: url("assets/upBlue.png");\n  background-size: 80%;\n  -webkit-filter: brightness(0);\n}\n.newGameDialog .sizeButton.down {\n  margin-top: 4px;\n}\n.newGameDialog .sizeButton.down .sizeBtnIcon {\n  background-image: url("assets/downBlue.png");\n}\n.newGameDialog .boardImgFrame {\n  display: inline-block;\n  width: 100%;\n  height: 240px;\n  background-color: #d1cac1;\n  border-radius: 5px;\n  box-shadow: black 3px 3px 6px;\n}\n.newGameDialog .boardImgFrame .boardImg {\n  width: 100%;\n  height: 100%;\n  background: url("assets/19x19.png") 50% no-repeat;\n}\n.newGameDialog .advancedButton {\n  width: 248px;\n  height: 100px;\n  margin: 40px 10px 25px;\n  background-color: #faf7f5;\n}\n.newGameDialog .settingButton {\n  position: relative;\n  left: calc(100% - 100px);\n  top: 9px;\n  width: 90px;\n  height: 80px;\n}\n.newGameDialog .settingButton .settingBtnIcon {\n  background-image: url("assets/settings.png");\n  -webkit-filter: sepia(0.9) brightness(3);\n  background-size: auto 87%;\n}\n.newGameDialog .advancedDiv .rules {\n  display: inline-block;\n  margin-left: 87px;\n}\n.newGameDialog .advancedDiv .groupFrame {\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 7px;\n}\n.newGameDialog .advancedDiv .loadGameInput {\n  font-size: 36px;\n}\n.newGameDialog .advancedDiv .recentGamesLbl {\n  display: inline-block;\n}\n.newGameDialog .advancedDiv .recentGamesDropDwn {\n  max-width: 80%;\n  font-size: 36px;\n}\n.newGameDialog .advancedDiv .moves {\n  margin-bottom: 15px;\n}\n.newGameDialog .advancedDiv .movesInput {\n  width: 50%;\n}\n.newGameDialog .advancedDiv .loadMovesInfo {\n  font-size: 50%;\n  font-style: italic;\n  margin-left: 203px;\n}\n.newGameDialog .advancedDiv .defAiInfo {\n  font-size: 50%;\n  font-style: italic;\n  width: 400px;\n  display: inline-block;\n}\n.newGameDialog .startButton {\n  width: 240px;\n  font-size: 48px;\n  position: relative;\n  left: calc(100% - 247px);\n}\n';t("lessify")(r),i.g=r},{lessify:64}],58:[function(t,i,n){var r=".popupOverlay {\n  z-index: 2000;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.popupDlg {\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  margin: 0 auto;\n  width: 60%;\n}\n.popupDlg .content {\n  padding: 20px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.popupDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: 0 0 -10px 0;\n}\n.popupDlg .btnDiv .popupDlgButton {\n  min-width: 220px;\n  min-height: 80px;\n  font-size: 30px;\n  float: right;\n  margin: 10px;\n}\n";t("lessify")(r),i.g=r},{lessify:64}],59:[function(t,i,n){var r=".settingDlg {\n  z-index: 2000;\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  margin: 0 20%;\n  width: 60%;\n}\n.settingDlg .content {\n  padding: 20px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.settingDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: 0 0 -10px 0;\n}\n.settingDlg .btnDiv .okButton {\n  float: right;\n}\n";t("lessify")(r),i.g=r},{lessify:64}],60:[function(t,i,n){"use strict";function r(){this.so=this.to=0,this.uo=this.vo=!1,this.target=null,this.wo=this.startTime=this.xo=0}function e(t){var i=t.currentTarget;return v.wo+=t.changedTouches.length,v.wo>1?v.yo(i):void v.zo(t.changedTouches[0],i)}function o(t){return v.wo-=t.changedTouches.length,v.wo>0?console.warn("Extra touchend count?",t):void(v.Ao(t.changedTouches[0],v.target)&&t.preventDefault())}function s(t){return t.changedTouches.length>1?v.yo(v.target):void(v.Bo(t.changedTouches[0],v.target)&&t.preventDefault())}function h(t){v.wo-=t.changedTouches.length,v.yo(v.target)}function a(t){t.button===d&&v.zo(t,t.currentTarget)}function u(t){t.button===d&&v.Ao(t,v.target)&&t.preventDefault()}function c(t){v.Bo(t,v.target)&&t.preventDefault()}var l=10,f=50,p=300,g=500,d=0,v=i.g=new r;r.prototype.Co=function(t,i){if(i)null!==this.target&&console.error("Forgot to stop listening on",this.target),this.uo=!0,this.target=t,t.addEventListener("touchmove",s),t.addEventListener("touchend",o),t.addEventListener("touchcancel",h),document.addEventListener("mousemove",c),document.addEventListener("mouseup",u);else{if(null===this.target)return console.warn("Not listening anyway");this.uo=!1,this.target=null,t.removeEventListener("touchmove",s),t.removeEventListener("touchend",o),t.removeEventListener("touchcancel",h),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u)}},r.prototype.zo=function(t,i){this.Co(i,!0),this.uo=!0,this.so=t.clientX,this.to=t.clientY,this.startTime=Date.now();var n=this;this.Do&&window.clearTimeout(this.Do),this.Do=window.setTimeout(function(){n.Do=null,n.uo&&!n.vo&&n.Eo(t,i)},p)},r.prototype.Eo=function(t,i){this.vo=!0,this.startTime=Date.now(),i.Fo("dragStart",t.pageX-i.offsetLeft,t.pageY-i.offsetTop)},r.prototype.yo=function(t){return this.wo=0,this.Co(t,!1),this.vo&&(this.vo=!1,t.Fo("dragCancel")),!0},r.prototype.Bo=function(t,i){var n=Date.now();return n-this.xo<f?!0:(this.xo=n,this.vo?(i.Fo("drag",t.pageX-i.offsetLeft,t.pageY-i.offsetTop),!0):Math.abs(t.clientX-this.so)+Math.abs(t.clientY-this.to)<l?!1:n-this.startTime<p?(this.Co(i,!1),!1):this.Eo(t,i))},r.prototype.Ao=function(t,i){if(this.vo&&Date.now()-this.startTime<g)return this.yo(i);var n=this.vo?"dragEnd":"tap";return i.Fo(n,t.pageX-i.offsetLeft,t.pageY-i.offsetTop),this.Co(i,!1),this.vo=!1,!0},r.prototype.zl=function(t,i){t.Fo=i,t.addEventListener("touchstart",e),t.addEventListener("mousedown",a)}},{}],61:[function(t,i,n){var r='body {\n  background-color: #865e50;\n  font-family: "Arial";\n  margin: 0px;\n}\n::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 7px;\n  height: 7px;\n}\n::-webkit-scrollbar-track {\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.2);\n  -webkit-border-radius: 10px;\n  border-radius: 7px;\n  margin: 1px;\n}\n::-webkit-scrollbar-thumb {\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, 0.5);\n}\n.pageTitle {\n  margin-top: 7px;\n  margin-bottom: 7px;\n  font-size: 40px;\n  font-weight: bold;\n}\n.subTitle {\n  font-size: 30px;\n  margin-top: 0.5em;\n  margin-bottom: 5px;\n}\n.logBox {\n  font-size: 28px;\n  font-family: "Arial";\n  background-color: white;\n  border: solid #cca 1px;\n  border-radius: 8px;\n  padding: 5px;\n  overflow-y: auto;\n  word-wrap: break-word;\n}\n.inputLbl {\n  margin-left: 10px;\n  font-size: 28px;\n}\n.inputBox {\n  margin: 17px 13px 17px 13px;\n  min-height: 1cm;\n  text-align: left;\n  font-size: 42px;\n  color: inherit;\n}\nbutton {\n  margin-right: 10px;\n  margin-bottom: 10px;\n  padding: 2px;\n  border-radius: 13px;\n  width: 160px;\n  height: 120px;\n  font-size: 28px;\n  border-color: #987;\n  background-color: #af9e8e;\n  color: #000000;\n}\nbutton.toggled {\n  background-color: #AD4343;\n}\nbutton.disabled {\n  color: #888;\n  opacity: 0.6;\n}\n.btnIcon {\n  width: 100%;\n  height: 100%;\n  background-position: 50%;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n.chkBoxDiv {\n  display: inline-block;\n  margin-right: 10px;\n}\n.chkBox {\n  margin: 5px 3px 14px 2px;\n  width: 29px;\n  height: 1.5em;\n}\n.chkLbl {\n  font-size: 28px;\n}\n.dropDwn {\n  font-size: 42px;\n  margin: 17px 13px 17px 13px;\n  color: inherit;\n}\n.radioBtn {\n  margin: 17px 0px 17px 13px;\n  width: 29px;\n  height: 1.5em;\n}\n.radioLbl {\n  margin-right: 13px;\n}\n.dialog {\n  padding: 10px;\n  background-color: #ffffee;\n  color: #000000;\n  border: solid #cca 1px;\n  border-radius: 10px;\n  font-family: Arial;\n  font-size: 42px;\n}\n.dialogTitle {\n  font-size: 50px;\n  background-color: #ffebce;\n  color: #000000;\n  border: solid 1px rgba(195, 50, 50, 0.2);\n  border-radius: 10px;\n  margin: -6px;\n  margin-bottom: 15px;\n  padding: 10px 0px 10px 12px;\n}\n.gameUi {\n  padding: 2px;\n}\n.gameUi .board {\n  background-color: #402f23;\n  border-radius: 7px;\n}\n.gameUi .board .wgo-board {\n  margin: 0 auto;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  /* disables grey shade on long-tap for Safari */\n  /* Below avoid issues when tap-hold on Android */\n  -webkit-user-select: none;\n  -webkit-touch-callout: none;\n}\n.gameUi .boardDesc {\n  margin-top: 3px;\n  font-weight: bold;\n  font-style: italic;\n}\n.gameUi button {\n  width: 200px;\n}\n.gameUi .statusBar {\n  position: relative;\n  margin-top: 7px;\n  height: 95px;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: row;\n  flex-direction: row;\n  box-sizing: border-box;\n  background-color: #dfc2ac;\n  border: rgba(0, 0, 0, 0.7) 1px solid;\n  border-radius: 7px;\n}\n.gameUi .statusBar .lastMove {\n  margin-left: 15px;\n}\n.gameUi .statusBar .gameInfo {\n  vertical-align: top;\n  box-sizing: border-box;\n  margin: 6px 15px 3px 15px;\n  padding: 1px 3px;\n  width: 280px;\n  height: 80px;\n  overflow-y: auto;\n  font-size: 19px;\n  font-family: tahoma;\n  background-color: #fef6ef;\n  border-radius: 7px;\n  border: rgba(0, 0, 0, 0.35) 1px solid;\n}\n.gameUi .statusBar .message {\n  -webkit-flex: 1;\n  flex: 1;\n  white-space: pre-wrap;\n  overflow-y: auto;\n  font-size: 26px;\n  font-weight: bold;\n}\n.gameUi .statusBar .nextPlayer {\n  margin-left: 15px;\n  margin-right: 8px;\n}\n.gameUi .mainControls {\n  margin-top: 10px;\n}\n.gameUi .mainControls .leftDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 20%;\n  box-sizing: border-box;\n  padding-left: 10px;\n  text-align: left;\n}\n.gameUi .mainControls .leftDiv .animatedDiv {\n  margin: 16px;\n}\n.gameUi .mainControls .mainDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 60%;\n  text-align: center;\n}\n.gameUi .mainControls .mainDiv button {\n  height: 200px;\n  max-width: 44%;\n}\n.gameUi .mainControls .mainDiv .back10Button,\n.gameUi .mainControls .mainDiv .back1Button,\n.gameUi .mainControls .mainDiv .forw1Button,\n.gameUi .mainControls .mainDiv .forw10Button {\n  max-width: 22%;\n}\n.gameUi .mainControls .settingButton {\n  vertical-align: top;\n  width: 200px;\n  height: 71px;\n}\n.gameUi .mainControls .settingButton .settingBtnIcon {\n  background-image: url("assets/settings.png");\n  -webkit-filter: sepia(0.9) brightness(3);\n  background-size: auto 87%;\n}\n.gameUi .mainControls .rightDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 20%;\n  text-align: right;\n}\n.gameUi .mainControls .leftDiv button,\n.gameUi .mainControls .rightDiv button {\n  background-color: #5c4137;\n  color: #faebd7;\n  max-width: 100%;\n}\n.gameUi .mainControls .leftDiv button.toggled,\n.gameUi .mainControls .rightDiv button.toggled {\n  background-color: #AD4343;\n}\n.gameUi .outputBox {\n  margin: 20px 100px;\n  font-size: 24px;\n  word-wrap: break-word;\n}\n';
t("lessify")(r),i.g=r},{lessify:64}],62:[function(t,i,n){!function(t,i){"use strict";var n=document.getElementsByTagName("script"),r=n[n.length-1].src.split("?")[0],e=r.split("/").slice(0,-1).join("/")+"/",o={version:"2.3.1",B:1,W:-1,Go:!0,Ho:e,lang:"en",Io:{Jo:{}}};o.opera=-1!=navigator.userAgent.search(/(opera)(?:.*version)?[ \/]([\w.]+)/i),o.Ko=-1!=navigator.userAgent.search(/(webkit)[ \/]([\w.]+)/i),o.Lo=-1!=navigator.userAgent.search(/(msie) ([\w.]+)/i),o.Mo=-1!=navigator.userAgent.search(/(mozilla)(?:.*? rv:([\w.]+))?/i)&&!o.Ko&&!o.Lo,o.No=function(t){var i=o.Io[o.lang][t]||o.Io.Jo[t];if(i){for(var n=1;n<arguments.length;n++)i=i.replace("$",arguments[n]);return i}return t},o.Oo=function(t,i){return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.Po=t,i},o.Qo=function(){throw Error("unimplemented abstract method")},o.clone=function(t){if(t&&"object"==typeof t){var i=t.constructor==Array?[]:{};for(var n in t)t[n]==t?i[n]=t:i[n]=o.clone(t[n]);return i}return t},o.Ro=function(t){return t&&"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t};var s=function(n,r){var r=r||{};for(var e in r)this[e]=r[e];for(var e in o.sl["default"])this[e]===i&&(this[e]=o.sl["default"][e]);for(var e in s.So["default"])this._m[e]===i&&(this._m[e]=s.So["default"][e]);this.To=this.section.left,this.Uo=this.section.top,this.Vo=this.size-1-this.section.right,this.Wo=this.size-1-this.section.bottom,this.init(),n.appendChild(this.Al),this.Xo=t.devicePixelRatio||1,this.width&&this.height?this.Yo(this.width,this.height):this.width?this.Zo(this.width):this.height&&this.$o(this.height)};s.So={},s.So._o={shadowColor:"rgba(32,32,32,0.5)",shadowTransparentColor:"rgba(32,32,32,0)",shadowBlur:0,shadowSize:function(t){return t.shadowSize},markupBlackColor:"rgba(255,255,255,0.8)",markupWhiteColor:"rgba(0,0,0,0.8)",markupNoneColor:"rgba(0,0,0,0.8)",markupLinesWidth:function(t){return t.ap?t.vl/7:t.lineWidth},gridLinesWidth:1,gridLinesColor:function(t){return"rgba(0,0,0,"+Math.min(1,t.vl/15)+")"},starColor:"#000",starSize:function(t){return t.starSize*(t.width/300+1)},stoneSize:function(t){return t.stoneSize*Math.min(t.Ml,t.Nl)/2},coordinatesColor:"rgba(0,0,0,0.7)",font:function(t){return t.font},linesShift:.5},s.So["default"]={shadowColor:"rgba(62,32,32,0.5)",shadowTransparentColor:"rgba(62,32,32,0)",shadowBlur:function(t){return.1*t.vl},shadowSize:1,markupBlackColor:"rgba(255,255,255,0.9)",markupWhiteColor:"rgba(0,0,0,0.7)",markupNoneColor:"rgba(0,0,0,0.7)",markupLinesWidth:function(t){return t.vl/8},gridLinesWidth:function(t){return t.vl/15},gridLinesColor:"#654525",starColor:"#531",starSize:function(t){return t.vl/8+1},stoneSize:function(t){return Math.min(t.Ml,t.Nl)/2},coordinatesColor:"#531",bp:"rgba(0,32,128,0.8)",font:"calibri",linesShift:.25};var h,a=function(t,i){return"function"==typeof i._m[t]?i._m[t](i):i._m[t]},u={cp:function(t,i){var n=i.dp(t.x),r=i.ep(t.y),e=i.vl;this.beginPath();var o=a("shadowBlur",i),s=Math.max(0,e-.5),h=this.createRadialGradient(n-i.fp,r-i.fp,s-1-o,n-i.fp,r-i.fp,s+o);h.addColorStop(0,a("shadowColor",i)),h.addColorStop(1,a("shadowTransparentColor",i)),this.fillStyle=h,this.arc(n-i.fp,r-i.fp,s+o,0,2*Math.PI,!0),this.fill()},clear:function(t,i){var n=i.dp(t.x),r=i.ep(t.y),e=i.vl;this.clearRect(n-1.1*e-i.fp,r-1.1*e-i.fp,2.2*e,2.2*e)}},c=function(t,i,n){return t.Il[i][n][0].c==o.B?a("markupBlackColor",t):t.Il[i][n][0].c==o.W?a("markupWhiteColor",t):a("markupNoneColor",t)},l=function(t,i,n){return t.Il[i][n][0]&&t.Il[i][n][0].c==o.W||t.Il[i][n][0].c==o.B},f=function(t,i){var n;t[i].clear(),t[i].cp(t);for(var r=0;r<t.size;r++)for(var e=0;e<t.size;e++)for(var o=0;o<t.Il[r][e].length;o++){var h=t.Il[r][e][o];n=h.type?"string"==typeof h.type?s.hp[h.type]:h.type:t.gp,n[i]&&n[i].cp.call(t[i].getContext(h),h,t)}for(var a=0;a<t.ip.length;a++){var h=t.ip[a],n=h.jp;n[i]&&n[i].cp.call(t[i].getContext(h.kp),h.kp,t)}},p=function(t,i,n,r,e,o,s,h){t.strokeStyle="rgba(64,64,64,0.2)",t.lineWidth=r/30*h,t.beginPath(),r-=Math.max(1,t.lineWidth);var a,u,i,c,l,f=i+r*Math.cos(e*Math.PI),p=n+r*Math.sin(e*Math.PI),g=i+r*Math.cos(o*Math.PI),d=n+r*Math.sin(o*Math.PI);g>f?(a=(d-p)/(g-f),u=Math.atan(a)):g==f?u=Math.PI/2:(a=(d-p)/(g-f),u=Math.atan(a)-Math.PI);var v=s*r;c=Math.sin(u)*v,l=Math.cos(u)*v;var y=f+c,b=p-l,m=g+c,w=d-l;t.moveTo(f,p),t.bezierCurveTo(y,b,m,w,g,d),t.stroke()},g=function(t){for(var i=t.angle,n=t.angle,r=0;r<t.lp.length;r++)i+=t.lp[r],n-=t.lp[r],p(t.mp,t.x,t.y,t.np,i,n,t.op,t.pp)};s.hp={qp:{Of:{cp:function(t,i){var n,r=i.dp(t.x),e=i.ep(t.y),s=i.vl;t.c==o.W?(n=this.createRadialGradient(r-2*s/5,e-2*s/5,s/3,r-s/5,e-s/5,5*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#aaa")):(n=this.createRadialGradient(r-2*s/5,e-2*s/5,1,r-s/5,e-s/5,4*s/5),n.addColorStop(0,"#666"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(r-i.fp,e-i.fp,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill()}},rp:u},sp:{Of:{cp:function(t,i){var n,r=i.dp(t.x),e=i.ep(t.y),s=i.vl;t.c==o.W?(n=this.createRadialGradient(r-2*s/5,e-2*s/5,2,r-s/5,e-s/5,4*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#ddd")):(n=this.createRadialGradient(r-2*s/5,e-2*s/5,1,r-s/5,e-s/5,4*s/5),n.addColorStop(0,"#111"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(r-i.fp,e-i.fp,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill(),this.beginPath(),this.lineWidth=s/6,t.c==o.W?(this.strokeStyle="#999",this.arc(r+s/8,e+s/8,s/2,0,Math.PI/2,!1)):(this.strokeStyle="#ccc",this.arc(r-s/8,e-s/8,s/2,Math.PI,1.5*Math.PI)),this.stroke()}},rp:u},tp:{Of:{cp:function(t,i){var n,r=i.dp(t.x),e=i.ep(t.y),s=i.vl;t.c==o.W?(n=this.createRadialGradient(r-2*s/5,e-2*s/5,s/3,r-s/5,e-s/5,8*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#666")):(n=this.createRadialGradient(r-2*s/5,e-2*s/5,1,r-s/5,e-s/5,3*s/5),n.addColorStop(0,"#555"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(r-i.fp,e-i.fp,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill()}},rp:u},up:{Of:{cp:function(t,i){var n,r,e=i.vl;h=h||Math.ceil(9999999*Math.random()),n=i.dp(t.x),r=i.ep(t.y);var s;if(s=t.c==o.W?"#aaa":"#000",this.beginPath(),this.fillStyle=s,this.arc(n-i.fp,r-i.fp,Math.max(0,e-.5),0,2*Math.PI,!0),this.fill(),t.c==o.W){var a=h%(3+t.x*i.size+t.y)%3,u=i.size*i.size+t.x*i.size+t.y,c=2/u*(h%u);g(0==a?{mp:this,x:n,y:r,np:e,angle:c,lp:[.1,.12,.11,.1,.09,.09,.09,.09],op:.25,pp:1.75}:1==a?{mp:this,x:n,y:r,np:e,angle:c,lp:[.1,.09,.08,.07,.06,.06,.06,.06,.06,.06,.06],op:.2,pp:1.5}:{mp:this,x:n,y:r,np:e,angle:c,lp:[.12,.14,.13,.12,.12,.12],op:.3,pp:2}),s=this.createRadialGradient(n-2*e/5,r-2*e/5,e/3,n-e/5,r-e/5,5*e/5),s.addColorStop(0,"rgba(255,255,255,0.9)"),s.addColorStop(1,"rgba(255,255,255,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.fp,r-i.fp,Math.max(0,e-.5),0,2*Math.PI,!0),this.fill()}else s=this.createRadialGradient(n+.4*e,r+.4*e,0,n+.5*e,r+.5*e,e),s.addColorStop(0,"rgba(32,32,32,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.fp,r-i.fp,Math.max(0,e-.5),0,2*Math.PI,!0),this.fill(),s=this.createRadialGradient(n-.4*e,r-.4*e,0,n-.5*e,r-.5*e,1.5*e),s.addColorStop(0,"rgba(64,64,64,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.fp,r-i.fp,Math.max(0,e-.5),0,2*Math.PI,!0),this.fill()}},rp:u},vp:{Of:{cp:function(t,i){var n=i.dp(t.x),r=i.ep(t.y),e=i.vl,s=a("markupLinesWidth",i)||1;t.c==o.W?this.fillStyle="white":this.fillStyle="black",this.beginPath(),this.arc(n,r,Math.max(0,e-s),0,2*Math.PI,!0),this.fill(),this.lineWidth=s,this.strokeStyle="black",this.stroke()}}},CR:{Of:{cp:function(t,i){var n=i.dp(t.x),r=i.ep(t.y),e=i.vl;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||a("markupLinesWidth",i)||1,this.beginPath(),this.arc(n-i.fp,r-i.fp,e/2,0,2*Math.PI,!0),this.stroke()}}},LB:{Of:{cp:function(t,i){var n=i.dp(t.x),r=i.ep(t.y),e=i.vl,o=t.scale||1,s=t.font||a("font",i)||"";this.fillStyle=t.c||c(i,t.x,t.y);var h=1;1==t.text.length?h=1.5:2==t.text.length&&(h=1.2),this.font=Math.round(h*e*o)+"px "+s,this.beginPath(),this.textBaseline="middle",this.textAlign="center",this.fillText(t.text,n,r,2*e)}},Zb:{cp:function(t,i){if(!l(i,t.x,t.y)&&!t.wp){var n=i.dp(t.x),r=i.ep(t.y),e=i.vl;this.clearRect(n-e,r-e,2*e,2*e)}},clear:function(t,i){l(i,t.x,t.y)||(t.wp=!0,f(i,"grid"),delete t.wp)}}},xp:{Of:{cp:function(t,i){var n=i.dp(t.x),r=i.ep(t.y),e=Math.round(i.vl);this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||a("markupLinesWidth",i)||1,this.beginPath(),this.rect(Math.round(n-e/2)-i.fp,Math.round(r-e/2)-i.fp,e,e),this.stroke()}}},Ue:{Of:{cp:function(t,i){var n=i.dp(t.x),r=i.ep(t.y),e=i.vl;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||a("markupLinesWidth",i)||1,this.beginPath(),this.moveTo(n-i.fp,r-i.fp-Math.round(e/2)),this.lineTo(Math.round(n-e/2)-i.fp,Math.round(r+e/3)+i.fp),this.lineTo(Math.round(n+e/2)+i.fp,Math.round(r+e/3)+i.fp),this.closePath(),this.stroke()}}},yp:{Of:{cp:function(t,i){var n=i.dp(t.x),r=i.ep(t.y),e=i.vl;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineCap="round",this.lineWidth=2*(t.lineWidth||a("markupLinesWidth",i)||1)-1,this.beginPath(),this.moveTo(Math.round(n-e/2),Math.round(r-e/2)),this.lineTo(Math.round(n+e/2),Math.round(r+e/2)),this.moveTo(Math.round(n+e/2)-1,Math.round(r-e/2)),this.lineTo(Math.round(n-e/2)-1,Math.round(r+e/2)),this.stroke(),this.lineCap="butt"}}},SL:{Of:{cp:function(t,i){var n=i.dp(t.x),r=i.ep(t.y),e=i.vl;this.fillStyle=t.c||c(i,t.x,t.y),this.beginPath(),this.rect(n-e/2,r-e/2,e,e),this.fill()}}},zp:{Of:{cp:function(t,i){var n=i.dp(t.x),r=i.ep(t.y),e=i.vl;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=2*(t.lineWidth||a("markupLinesWidth",i)||1),this.beginPath(),this.arc(n-e/3,r-e/3,e/6,0,2*Math.PI,!0),this.stroke(),this.beginPath(),this.arc(n+e/3,r-e/3,e/6,0,2*Math.PI,!0),this.stroke(),this.beginPath(),this.moveTo(n-e/1.5,r),this.bezierCurveTo(n-e/1.5,r+e/2,n+e/1.5,r+e/2,n+e/1.5,r),this.stroke()}}},outline:{Of:{cp:function(t,i){t.alpha?this.globalAlpha=t.alpha:this.globalAlpha=.3,t.stoneStyle?s.hp[t.stoneStyle].Of.cp.call(this,t,i):i.gp.Of.cp.call(this,t,i),this.globalAlpha=1}}},mini:{Of:{cp:function(t,i){i.vl=i.vl/2,t.stoneStyle?s.hp[t.stoneStyle].Of.cp.call(this,t,i):i.gp.Of.cp.call(this,t,i),i.vl=2*i.vl}}}},s.xl={Zb:{cp:function(t,i){var n,r,e,o,s,h;this.fillStyle=a("coordinatesColor",i),this.textBaseline="middle",this.textAlign="center",this.font=i.vl*i.coordFontSize+"px "+(i.font||""),e=i.dp(-.75),o=i.dp(i.size-.25),s=i.ep(-.75),h=i.ep(i.size-.25);for(var u=0;u<i.size;u++)n=u+"A".charCodeAt(0),n>="I".charCodeAt(0)&&n++,r=i.ep(u),this.fillText(i.size-u,e,r),this.fillText(i.size-u,o,r),r=i.dp(u),this.fillText(String.fromCharCode(n),r,s),this.fillText(String.fromCharCode(n),r,h);this.fillStyle="black"}}},s.Ap=function(){this.Al=document.createElement("canvas"),this.context=this.Al.getContext("2d"),this.Xo=t.devicePixelRatio||1,this.Xo>1&&this.context.scale(this.Xo,this.Xo)},s.Ap.prototype={constructor:s.Ap,Yo:function(t,i){this.Al.width=t,this.Al.style.width=t/this.Xo+"px",this.Al.height=i,this.Al.style.height=i/this.Xo+"px"},Bp:function(t,i){this.Al.style.position="absolute",this.Al.style.zIndex=i,t.appendChild(this.Al)},Cp:function(t){t.removeChild(this.Al)},getContext:function(){return this.context},cp:function(t){},clear:function(){this.context.clearRect(0,0,this.Al.width,this.Al.height)}},s.Dp=o.Oo(s.Ap,function(){this.Po.call(this)}),s.Dp.prototype.cp=function(t){var i;this.context.beginPath(),this.context.lineWidth=a("gridLinesWidth",t),this.context.strokeStyle=a("gridLinesColor",t);var n=Math.round(t.left),r=Math.round(t.top),e=Math.round(t.Ml*(t.size-1)),o=Math.round(t.Nl*(t.size-1));this.context.strokeRect(n-t.fp,r-t.fp,e,o);for(var s=1;s<t.size-1;s++)i=Math.round(t.dp(s))-t.fp,this.context.moveTo(i,r),this.context.lineTo(i,r+o),i=Math.round(t.ep(s))-t.fp,this.context.moveTo(n,i),this.context.lineTo(n+e,i);if(this.context.stroke(),this.context.fillStyle=a("starColor",t),t.Ep[t.size])for(var h in t.Ep[t.size])this.context.beginPath(),this.context.arc(t.dp(t.Ep[t.size][h].x)-t.fp,t.ep(t.Ep[t.size][h].y)-t.fp,a("starSize",t),0,2*Math.PI,!0),this.context.fill()},s.Fp=o.Oo(s.Ap,function(){this.init(4)}),s.Fp.prototype.init=function(i){var n,r;this.Gp=i,this.elements=[],this.Hp=[],this.Xo=t.devicePixelRatio||1;for(var e=0;i>e;e++)n=document.createElement("canvas"),r=n.getContext("2d"),this.Xo>1&&r.scale(this.Xo,this.Xo),this.elements.push(n),this.Hp.push(r)},s.Fp.prototype.Bp=function(t,i){for(var n=0;n<this.Gp;n++)this.elements[n].style.position="absolute",this.elements[n].style.zIndex=i,t.appendChild(this.elements[n])},s.Fp.prototype.Cp=function(t){for(var i=0;i<this.Gp;i++)t.removeChild(this.elements[i])},s.Fp.prototype.getContext=function(t){return t.x%2?t.y%2?this.Hp[0]:this.Hp[1]:t.y%2?this.Hp[2]:this.Hp[3]},s.Fp.prototype.clear=function(t,i){for(var n=0;n<this.Gp;n++)this.Hp[n].clearRect(0,0,this.elements[n].width,this.elements[n].height)},s.Fp.prototype.Yo=function(t,i){for(var n=0;n<this.Gp;n++)this.elements[n].width=t,this.elements[n].style.width=t/this.Xo+"px",this.elements[n].height=i,this.elements[n].style.height=i/this.Xo+"px"},s.Ip=o.Oo(s.Fp,function(t,n,r){this.init(2),this.shadowSize=n===i?1:n,this.nl=t}),s.Ip.prototype.getContext=function(t){return!(t.x%2&&t.y%2)&&(t.x%2||t.y%2)?this.Hp[1]:this.Hp[0]},s.Ip.prototype.Yo=function(t,i){this.Po.prototype.Yo.call(this,t,i);for(var n=0;n<this.Gp;n++)this.Hp[n].setTransform(1,0,0,1,Math.round(this.shadowSize*this.nl.vl/7),Math.round(this.shadowSize*this.nl.vl/7))};var d=function(t,i){var n=i.dp(t.x),r=i.ep(t.y),e=i.vl;this.clearRect(n-2*e-i.fp,r-2*e-i.fp,4*e,4*e)},v=function(){return 3*this.width/(4*(this.Vo+1-this.To)+2)-this.Ml*this.To},y=function(){return 3*this.height/(4*(this.Wo+1-this.Uo)+2)-this.Nl*this.Uo},b=function(){return 4*this.width/(4*(this.Vo+1-this.To)+2)},m=function(){return 4*this.height/(4*(this.Wo+1-this.Uo)+2)},w=function(t,i){for(var n,r=0;r<this.Il[t][i].length;r++){var e=this.Il[t][i][r];n=e.type?"string"==typeof e.type?s.hp[e.type]:e.type:this.gp;for(var o in n)n[o].clear?n[o].clear.call(this[o].getContext(e),e,this):d.call(this[o].getContext(e),e,this)}},x=function(t,i){for(var n,r=0;r<this.Il[t][i].length;r++){var e=this.Il[t][i][r];n=e.type?"string"==typeof e.type?s.hp[e.type]:e.type:this.gp;for(var o in n)n[o].cp.call(this[o].getContext(e),e,this)}},k=function(t){var i,n;i=t.layerX*this.Xo,i-=this.left,i/=this.Ml,i=Math.round(i),n=t.layerY*this.Xo,n-=this.top,n/=this.Nl,n=Math.round(n);var r=t.offsetY*this.Xo;return r-=this.top,r/=this.Nl,r=Math.round(r),r!==n&&console.error("Using layerY we get",n," BUT using offsetY it would be",r),{x:i>=this.size?-1:i,y:n>=this.size?-1:n}},j=function(){this.Al.style.width=this.width/this.Xo+"px",this.Al.style.height=this.height/this.Xo+"px",this.vl=a("stoneSize",this),this.fp=a("linesShift",this);for(var t=0;t<this.Gp.length;t++)this.Gp[t].Yo(this.width,this.height)};s.prototype={constructor:s,init:function(){this.Il=[];for(var t=0;t<this.size;t++){this.Il[t]=[];for(var i=0;i<this.size;i++)this.Il[t][i]=[]}this.ip=[],this.Gp=[],this.Jp=[],this.Al=document.createElement("div"),this.Al.className="wgo-board",this.Al.style.position="relative",this.background&&("#"==this.background[0]?this.Al.style.backgroundColor=this.background:(this.Al.style.backgroundImage="url('"+this.background+"')",this.Al.style.backgroundColor="#c75")),this.Zb=new s.Dp,this.rp=new s.Ip(this,a("shadowSize",this)),this.Of=new s.Fp,this.Kp(this.Zb,100),this.Kp(this.rp,200),this.Kp(this.Of,300)},Zo:function(t){this.width=t,this.width*=this.Xo,this.Nl=this.Ml=b.call(this),this.left=v.call(this),this.height=(this.Wo-this.Uo+1.5)*this.Nl,this.top=y.call(this),j.call(this),this.Lp()},$o:function(t){this.height=t,this.height*=this.Xo,this.Ml=this.Nl=m.call(this),this.top=y.call(this),this.width=(this.Vo-this.To+1.5)*this.Ml,this.left=v.call(this),j.call(this),this.Lp()},Yo:function(t,i){this.width=t||parseInt(this.Al.style.width,10),this.width*=this.Xo,this.height=i||parseInt(this.Al.style.height,10),this.height*=this.Xo,this.Ml=b.call(this),this.Nl=m.call(this),this.left=v.call(this),this.top=y.call(this),j.call(this),this.Lp()},Mp:function(){return this.section},Np:function(t,i,n,r){"object"==typeof t?this.section=t:this.section={top:t,right:i,bottom:n,left:r},this.To=this.section.left,this.Uo=this.section.top,this.Vo=this.size-1-this.section.right,this.Wo=this.size-1-this.section.bottom,this.Yo()},Op:function(t){var t=t||19;if(t!=this.size){this.size=t,this.Il=[];for(var i=0;i<this.size;i++){this.Il[i]=[];for(var n=0;n<this.size;n++)this.Il[i][n]=[]}this.Vo=this.size-1-this.section.right,this.Wo=this.size-1-this.section.bottom,this.Yo()}},Lp:function(){for(var t=0;t<this.Gp.length;t++)this.Gp[t].clear(this),this.Gp[t].cp(this);for(var t=0;t<this.size;t++)for(var i=0;i<this.size;i++)x.call(this,t,i);for(var t=0;t<this.ip.length;t++){var n=this.ip[t],r=n.jp;for(var e in r)r[e].cp.call(this[e].getContext(n.kp),n.kp,this)}},dp:function(t){return this.left+t*this.Ml},ep:function(t){return this.top+t*this.Nl},Kp:function(t,i){t.Bp(this.Al,i),t.Yo(this.width,this.height),this.Gp.push(t)},Pp:function(t){var i=this.Gp.indexOf(t);i>=0&&(this.Gp.splice(i,1),t.Cp(this.Al))},update:function(t){var i;if(t.remove&&"all"==t.remove)this.Qp();else if(t.remove)for(i=0;i<t.remove.length;i++)this.Hl(t.remove[i]);if(t.add)for(i=0;i<t.add.length;i++)this.Jl(t.add[i])},Jl:function(t){if(t.constructor!=Array){w.call(this,t.x,t.y);for(var i=this.Il[t.x][t.y],n=0;n<i.length;n++)if(i[n].type==t.type)return i[n]=t,void x.call(this,t.x,t.y);t.type?i.push(t):i.unshift(t),x.call(this,t.x,t.y)}else for(var r=0;r<t.length;r++)this.Jl(t[r])},Hl:function(t){if(t.constructor!=Array){for(var n,r=0;r<this.Il[t.x][t.y].length;r++)if(this.Il[t.x][t.y][r].type==t.type){n=r;break}n!==i&&(w.call(this,t.x,t.y),this.Il[t.x][t.y].splice(n,1),x.call(this,t.x,t.y))}else for(var e=0;e<t.length;e++)this.Hl(t[e])},Ol:function(t,i){this.Il[t][i].length&&(w.call(this,t,i),this.Il[t][i]=[])},Qp:function(){this.Il=[];for(var t=0;t<this.size;t++){this.Il[t]=[];for(var i=0;i<this.size;i++)this.Il[t][i]=[]}this.Lp()},wl:function(t,i){this.ip.push({jp:t,kp:i}),this.Lp()},Rp:function(t,i){for(var n=0;n<this.ip.length;n++){var r=this.ip[n];if(r.jp==t&&r.kp==i)return this.ip.splice(n,1),this.Lp(),!0}return!1},addEventListener:function(t,i){var n=this,r={type:t,Sp:i,Tp:function(t){var r=k.call(n,t);i(r.x,r.y,t)}};this.Al.addEventListener(t,r,!0),this.Jp.push(r)},removeEventListener:function(t,i){for(var n=0;n<this.Jp.length;n++){var r=this.Jp[n];if(r.type==t&&r.Sp==i)return this.Al.removeEventListener(r.type,r,!0),this.Jp.splice(n,1),!0}return!1},Up:function(){return{Vp:o.clone(this.Il),Wp:o.clone(this.ip)}},Xp:function(t){this.Il=t.Vp||this.Il,this.ip=t.Wp||this.ip,this.Lp()}},s["default"]={size:19,width:0,height:0,font:"Calibri",lineWidth:1,ap:!1,Ep:{19:[{x:3,y:3},{x:9,y:3},{x:15,y:3},{x:3,y:9},{x:9,y:9},{x:15,y:9},{x:3,y:15},{x:9,y:15},{x:15,y:15}],13:[{x:3,y:3},{x:9,y:3},{x:3,y:9},{x:9,y:9}],9:[{x:4,y:4}]},gp:s.hp.up,starSize:1,shadowSize:1,stoneSize:1,section:{top:0,right:0,bottom:0,left:0},background:o.Ho+"wood1.jpg",_m:{}},o.sl=s,t.WGo=o}(window)},{}],63:[function(t,i,n){i.g=function(t,i){var n=i||document;if(n.createStyleSheet){var r=n.createStyleSheet();return r.cssText=t,r.ownerNode}var e=n.getElementsByTagName("head")[0],o=n.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(n.createTextNode(t)),e.appendChild(o),o},i.g.Yp=function(t){if(document.createStyleSheet)return document.createStyleSheet(t).ownerNode;var i=document.getElementsByTagName("head")[0],n=document.createElement("link");return n.rel="stylesheet",n.href=t,i.appendChild(n),n}},{}],64:[function(t,i,n){i.g=t("cssify")},{cssify:63}],65:[function(t,i,n){i.g={name:"1g0",version:"0.3.0",description:"",Zp:"Olivier Lombart (kubicle)",$p:"TBD",scripts:{_p:"browserify js/ui/htmlApp.js -t lessify | uglifyjs -o build/bld.js -m --mangle-props --reserved-file build/reserved.json --reserve-domprops --mangle-regex=\"/^[a-zA-Z0-9_]+$/\" -c pure_funcs=['log.debug','test.assert']","dev-build":"watchify js/test/testApp.js -o build/devBuild.js -t lessify -v",test:"node js/test/ciTestApp.js --ci",aq:"node node_modules/istanbul/lib/cli.js cover js/test/ciTestApp.js -x **/frankie/** -x **/droopy/** -- --cover"},bq:"js/ui/htmlApp.js",cq:{type:"git",url:"https://github.com/kubicle/1g0"},dq:{url:"https://github.com/kubicle/1g0/issues"},eq:["baduk","go","igo","weiqi"],fq:{gq:"~0.3.22","codeclimate-test-reporter":"~0.1.1",hq:"~10.2.4",lessify:"~1.0.1",iq:"~3.2.2","uglify-js":"~2.6.2"}}},{}]},{},[55]);