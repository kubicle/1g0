!function t(i,n,r){function e(s,h){if(!n[s]){if(!i[s]){var a="function"==typeof require&&require;if(!h&&a)return a(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={g:{}};i[s][0].call(c.g,function(t){var n=i[s][1][t];return e(n?n:t)},c,c.g,t,i,n,r)}return n[s].g}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)e(r[s]);return e}({1:[function(t,i,n){"function"==typeof Object.create?i.g=function(t,i){t.h=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,i:!1,j:!0,k:!0}})}:i.g=function(t,i){t.h=i;var n=function(){};n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],2:[function(t,i,n){function r(){c=!1,h.length?u=h.concat(u):l=-1,u.length&&e()}function e(){if(!c){var t=setTimeout(r);c=!0;for(var i=u.length;i;){for(h=u,u=[];++l<i;)h[l].l();l=-1,i=u.length}h=null,c=!1,clearTimeout(t)}}function o(t,i){this.o=t,this.p=i}function s(){}var h,a=i.g={},u=[],c=!1,l=-1;a.m=function(t){var i=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)i[n-1]=arguments[n];u.push(new o(t,i)),1!==u.length||c||setTimeout(e,0)},o.prototype.l=function(){this.o.apply(null,this.p)},a.title="browser",a.q=!0,a.s={},a.t=[],a.version="",a.u={},a.v=s,a.addListener=s,a.A=s,a.C=s,a.removeListener=s,a.D=s,a.F=s,a.G=function(t){throw new Error("process.binding is not supported")},a.H=function(){return"/"},a.I=function(t){throw new Error("process.chdir is not supported")},a.J=function(){return 0}},{}],3:[function(t,i,n){i.g=function(t){return t&&"object"==typeof t&&"function"==typeof t.K&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],4:[function(t,i,n){(function(i,r){function e(t,i){var r={N:[],O:s};return arguments.length>=3&&(r.P=arguments[2]),arguments.length>=4&&(r.R=arguments[3]),d(i)?r.S=i:i&&n.T(r,i),w(r.S)&&(r.S=!1),w(r.P)&&(r.P=2),w(r.R)&&(r.R=!1),w(r.U)&&(r.U=!0),r.R&&(r.O=o),a(r,t,r.P)}function o(t,i){var n=e.da[i];return n?"["+e.R[n][0]+"m"+t+"["+e.R[n][1]+"m":t}function s(t,i){return t}function h(t){var i={};return t.forEach(function(t,n){i[t]=!0}),i}function a(t,i,r){if(t.U&&i&&C(i.V)&&i.V!==n.V&&(!i.constructor||i.constructor.prototype!==i)){var e=i.V(r,t);return m(e)||(e=a(t,e,r)),e}var o=u(t,i);if(o)return o;var s=Object.keys(i),d=h(s);if(t.S&&(s=Object.getOwnPropertyNames(i)),j(i)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(i);if(0===s.length){if(C(i)){var v=i.name?": "+i.name:"";return t.O("[Function"+v+"]","special")}if(k(i))return t.O(RegExp.prototype.toString.call(i),"regexp");if(M(i))return t.O(Date.prototype.toString.call(i),"date");if(j(i))return c(i)}var y="",b=!1,x=["{","}"];if(g(i)&&(b=!0,x=["[","]"]),C(i)){var w=i.name?": "+i.name:"";y=" [Function"+w+"]"}if(k(i)&&(y=" "+RegExp.prototype.toString.call(i)),M(i)&&(y=" "+Date.prototype.toUTCString.call(i)),j(i)&&(y=" "+c(i)),0===s.length&&(!b||0==i.length))return x[0]+y+x[1];if(0>r)return k(i)?t.O(RegExp.prototype.toString.call(i),"regexp"):t.O("[Object]","special");t.N.push(i);var S;return S=b?l(t,i,r,d,s):s.map(function(n){return p(t,i,r,d,n,b)}),t.N.pop(),f(S,y,x)}function u(t,i){if(w(i))return t.O("undefined","undefined");if(m(i)){var n="'"+JSON.stringify(i).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.O(n,"string")}return b(i)?t.O(""+i,"number"):d(i)?t.O(""+i,"boolean"):v(i)?t.O("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,i,n,r,e){for(var o=[],s=0,h=i.length;h>s;++s)G(i,String(s))?o.push(p(t,i,n,r,String(s),!0)):o.push("");return e.forEach(function(e){e.match(/^\d+$/)||o.push(p(t,i,n,r,e,!0))}),o}function p(t,i,n,r,e,o){var s,h,u;if(u=Object.getOwnPropertyDescriptor(i,e)||{value:i[e]},u.get?h=u.set?t.O("[Getter/Setter]","special"):t.O("[Getter]","special"):u.set&&(h=t.O("[Setter]","special")),G(r,e)||(s="["+e+"]"),h||(t.N.indexOf(u.value)<0?(h=v(n)?a(t,u.value,null):a(t,u.value,n-1),h.indexOf("\n")>-1&&(h=o?h.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+h.split("\n").map(function(t){return"   "+t}).join("\n"))):h=t.O("[Circular]","special")),w(s)){if(o&&e.match(/^\d+$/))return h;s=JSON.stringify(""+e),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.O(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.O(s,"string"))}return s+": "+h}function f(t,i,n){var r=0,e=t.reduce(function(t,i){return r++,i.indexOf("\n")>=0&&r++,t+i.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?n[0]+(""===i?"":i+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+i+" "+t.join(", ")+" "+n[1]}function g(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function v(t){return null===t}function y(t){return null==t}function b(t){return"number"==typeof t}function m(t){return"string"==typeof t}function x(t){return"symbol"==typeof t}function w(t){return void 0===t}function k(t){return S(t)&&"[object RegExp]"===I(t)}function S(t){return"object"==typeof t&&null!==t}function M(t){return S(t)&&"[object Date]"===I(t)}function j(t){return S(t)&&("[object Error]"===I(t)||t instanceof Error)}function C(t){return"function"==typeof t}function q(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function I(t){return Object.prototype.toString.call(t)}function B(t){return 10>t?"0"+t.toString(10):t.toString(10)}function D(){var t=new Date,i=[B(t.getHours()),B(t.getMinutes()),B(t.getSeconds())].join(":");return[t.getDate(),O[t.getMonth()],i].join(" ")}function G(t,i){return Object.prototype.hasOwnProperty.call(t,i)}var T=/%[sdj%]/g;n.format=function(t){if(!m(t)){for(var i=[],n=0;n<arguments.length;n++)i.push(e(arguments[n]));return i.join(" ")}for(var n=1,r=arguments,o=r.length,s=String(t).replace(T,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(i){return"[Circular]"}default:return t}}),h=r[n];o>n;h=r[++n])s+=v(h)||!S(h)?" "+h:" "+e(h);return s},n.L=function(t,e){function o(){if(!s){if(i.throwDeprecation)throw new Error(e);i.traceDeprecation?console.trace(e):console.error(e),s=!0}return t.apply(this,arguments)}if(w(r.process))return function(){return n.L(t,e).apply(this,arguments)};if(i.noDeprecation===!0)return t;var s=!1;return o};var E,L={};n.M=function(t){if(w(E)&&(E=i.s.NODE_DEBUG||""),t=t.toUpperCase(),!L[t])if(new RegExp("\\b"+t+"\\b","i").test(E)){var r=i.pid;L[t]=function(){var i=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,i)}}else L[t]=function(){};return L[t]},n.V=e,e.R={bold:[1,22],X:[3,23],Y:[4,24],inverse:[7,27],Z:[37,39],$:[90,39],_:[30,39],blue:[34,39],aa:[36,39],green:[32,39],ba:[35,39],red:[31,39],ca:[33,39]},e.da={ea:"cyan",number:"yellow",fa:"yellow",undefined:"grey",ga:"bold",ha:"green",ia:"magenta",ja:"red"},n.isArray=g,n.ka=d,n.la=v,n.ma=y,n.na=b,n.oa=m,n.pa=x,n.qa=w,n.ra=k,n.sa=S,n.ta=M,n.ua=j,n.va=C,n.wa=q,n.isBuffer=t("./support/isBuffer");var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",D(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n.T=function(t,i){if(!i||!S(i))return t;for(var n=Object.keys(i),r=n.length;r--;)t[n[r]]=i[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":3,_process:2,inherits:1}],5:[function(t,i,n){i.g={"#appTitle":"1g0: let's play go!","#cancelAction":"Cancel","#confirmTitle":"Confirm","#problem":"Problem","#OK":"OK","#yes":"YES","#no":"NO","#cancel":"Cancel","#none":"-","#play":"Play","#load":"Load","#newGame":"New game","#myGames":"My games","#deleteGame":"Delete","#deleteGameConfirm":"Do you really want to delete this game?","#importGame":"Import a game","#exportGame":"Export game","#downloadLatest":"Download latest","#review":"Study","#endStudy":"End study","#evalScore":"Evaluate score","#rewindAll":"Back to game start","#resign":"Resign","#pass":"Pass","#undo":"Undo","#resignConfirm":"Do you really want to resign?","#settings":"Settings","#fromFile":"From file:","#selectFile":"Select file","#recentGames":"Recent games:","#fromText":"From copy/paste:","#fromTextHelp":'(e.g. "d5,e3,..." or in SGF format)'}},{}],6:[function(t,i,n){i.g={".cafeAuLait":{".menuBtn":{backgroundColor:"#704f43"},".topTitle":{backgroundColor:"#5c4137"}},".neonBlack":{body:{backgroundColor:"#000"},".btn":{backgroundColor:"#02192b",color:"#f8a3e1",border:"1px solid #5d80c6"},".btn+toggled":{backgroundColor:"#380966",color:"#cad904"},".menuBtn":{backgroundColor:"#0e4571"},".topTitle":{backgroundColor:"#0b3557"},".statusBar":{backgroundColor:"#c7cced",border:"#07b2ff 1px solid","box-shadow":"3px 3px 20px #537cc6"},".board":{backgroundColor:"#002"},".mainControls":{color:"#fdf"},".settingBtnIcon":{"-webkit-filter":"hue-rotate(67deg) grayscale(0.8) brightness(2)"},".dialog":{backgroundColor:"#0d0217",color:"#fdf",boxShadow:"#3fb 3px 3px 20px",border:"solid #b395d7 1px"},".dialogTitle":{backgroundColor:"#0b3557",color:"#fffaff",textShadow:"#06b1ff 4px 4px 7px",borderColor:"#fff",boxShadow:"#00abff 3px 3px 20px"},".playerBtn":{backgroundColor:"#5034a9"},".sizeBtn":{backgroundColor:"#5034a9"},".boardImgFrame":{backgroundColor:"#09132a",boxShadow:"#3fb 3px 3px 20px"},".curSize":{textShadow:"#0a9da9 3px 3px 5px"},".gameList":{border:"1px solid #8ea3da",backgroundColor:"#000"},".oneGame+selected":{backgroundColor:"#2a4990"},".dropDwn":{backgroundColor:"#000"},".inputBox":{backgroundColor:"#000"},".devDiv":{backgroundColor:"#5a3571",color:"#38cead",border:"1px solid #400ac1"},".devLogBox":{color:"#000"}}}},{}],7:[function(t,i,n){i.g={".cgos":{xa:!0,ya:!0},".chinese":{xa:!0,ya:!0},".japanese":{}}},{}],8:[function(t,i,n){"use strict";function r(){this.za()}i.g=r,r.prototype.za=function(){this.Aa={}},r.prototype.Ba=function(){this.za(),this.Ca("date",(new Date).toISOString().substr(0,10))},r.prototype.Da=function(t){this.za();for(var i in t)this.Aa[i]=t[i]},r.prototype.Ea=function(t){return this.Aa[t]},r.prototype.Ca=function(t,i){this.Aa[t]=i},r.prototype.Fa=function(){return this.Aa},r.prototype.Ga=function(t,i,n){this.Ca("boardSize",t),this.Ca("komi",i),this.Ca("rules",n)}},{}],9:[function(t,i,n){"use strict";function r(){this.Pa(y),this.Qa=null,this.Ra()}var e=t("./constants"),o=t("./Goban"),s=t("./HandicapSetter"),h=t("./log"),a=t("./Move"),u=t("../config/rules.json"),c=a.Ha,l=a.Ia,p=a.Ja,f=a.Ka,g=a.La,d=e.Ma,v=e.Na,y=e.Oa,b=":",m="-",x=",";i.g=r,r.prototype.Ra=function(){this.history=[],this.Sa=[],this.Ta=null,this.Ua=0,this.Va=this.Wa=d,this.Xa=this.Ya=!1,this.Za=this.$a=null},r.prototype._a=function(t){this.Pa(t.ab,!0),this.bb(t.Qa.cb,t.Ta,t.Ua),this.eb(t.Wa),this.fb(t.history)},r.prototype.gb=function(){this.Qa.clear(),this.history=[],this.Va=this.Wa,this.hb()},r.prototype.Pa=function(t,i){this.ab=t,t=t||"unspecified";var n=u["."+t.toLowerCase()];if(!n){if(!i)throw new Error("Invalid rules: "+t+"\nValid values: "+Object.keys(u).map(function(t){return t.substr(1)}).join(", "));n=u["."+y.toLowerCase()]}this.ya=n.ya||!1,this.xa=n.xa||!1},r.prototype.ib=function(){return this.ab},r.prototype.bb=function(t,i,n){if(this.Ra(),this.Qa&&t===this.Qa.cb)this.Qa.clear();else if(this.Qa=new o(t),this.Qa.cb!==t)return this.jb("Size could not be set: "+t);return this.Qa.kb(this.ya),this.Ua=void 0!==n?n:i?.5:6.5,i=i||0,!!this.lb(i)},r.prototype.eb=function(t){this.Va=this.Wa=t},r.prototype.lb=function(t){if(this.history.length>0)throw new Error("Handicap cannot be changed during a game");if(0===t||"0"===t)return this.Ta=null,this.eb(d),!0;var i,n,r;if(""+~~t==""+t)for(r=~~t,i=s.mb(this.Qa.cb,r),this.Ta=[],n=0;n<i.length;n++)this.Ta.push(g(i[n][0],i[n][1]));else r=t.length,this.Ta=t;return this.Ta.length||(this.Ta=null),this.hb(),this.eb(this.Ta?v:d),!r||this.Ta&&this.Ta.length===r?!0:this.jb("Handicap could not be set: "+t)},r.prototype.hb=function(){var t=this.Ta;if(t)for(var i=0;i<t.length;i++){var n=f(t[i]);this.Qa.nb(n[0],n[1],n[2]||d)}},r.prototype.ob=function(){return this.Ta},r.prototype.pb=function(){return this.Ta?this.Ta.length:0},r.prototype.qb=function(t,i){if(h.error&&h.error(t),!i)throw new Error(t);return i.push(t),!1},r.prototype.fb=function(t,i){if(!t||!t.length)return!0;for(var n=0;n<t.length;n++)if(!this.rb(t[n]))return this.qb("Failed playing loaded move #"+(n+1)+":\n"+this.sb().join(", "),i);return!0},r.prototype.tb=function(t,i){return t?this.fb(t.split(x),i):!0},r.prototype.rb=function(t){if(this.Ya&&t.indexOf("undo")<0)return this.jb("Game already ended");if(/^[B|W]?-?[a-z][1-2]?[0-9]$/.test(t))return this.ub(t);var i=p(t);if(i.startsWith("pass"))return this.vb();if(i.startsWith("resi"))return this.wb(l(t));if("undo"===i)return this.xb();if("half_undo"===i)return this.xb(!0);if(i.startsWith("hand")){var n=i.substr(i.indexOf(b)+1);return this.lb(n.split(m))}return i.startsWith("load:")?this.tb(i.slice(5)):this.jb("Invalid command: "+i.substr(0,20))},r.prototype.ub=function(t){var i=f(t);3===i.length&&(this.Va=i[2]);var n=i[0],r=i[1];return this.Qa.yb(n,r,this.Va)?(this.Qa.nb(n,r,this.Va),this.zb(t),this.Ab(),!0):this.jb("Invalid move: "+t)},r.prototype.wb=function(t,i){t=void 0!==t?t:this.Va,this.Za=t,this.$a=i;var n=c("resign",t)+(i?"-"+i:"");return this.zb(n),this.Ab(),this.Ya=!0,this.Xa=!1,!0},r.prototype.vb=function(){var t=this.history[this.history.length-1];return t&&t.endsWith("pass")&&(this.Xa=!0),this.zb(c("pass",this.Va)),this.Ab(),!0},r.prototype.Bb=function(t,i){return this.Xa?(this.Xa=!1,t?(this.Ya=!0,!0):(i!==this.Va&&(this.history.pop(),this.Ab()),!0)):this.jb("The game is not ending yet")},r.prototype.Cb=function(){return this.history.length},r.prototype.Db=function(){var t="";this.Ta&&(t="handicap"+b+this.Ta.join(m)+x);var i=this.history;return i[0]=c(p(i[0]),this.Wa),t+i.join(x)},r.prototype.jb=function(t){return this.Sa.push(t),!1},r.prototype.sb=function(){var t=this.Sa;return this.Sa=[],t},r.prototype.Ab=function(){this.Va=1-this.Va},r.prototype.zb=function(t){return this.history.push(t)},r.prototype.xb=function(t){var i=t?1:2;if(this.history.length<i)return this.jb("Nothing to undo");this.Ya=this.Xa=!1;for(var n=i;n>=1;n--){var r=this.history.pop();!r.endsWith("pass")&&r.indexOf("resi")<0&&this.Qa.Eb()}return t&&this.Ab(),!0}},{"../config/rules.json":7,"./Goban":13,"./HandicapSetter":16,"./Move":17,"./constants":46,"./log":49}],10:[function(t,i,n){"use strict";function r(t){this.Fb=t,this.Gb=!1,this.Hb=null,this.Ib=null,this.Jb=this.Kb=null,this.Lb=new o}function e(t,i,n,r){try{return t._b(i,r),!0}catch(e){var o="Failed loading SGF moves:\n"+e;if(!n)throw new Error(o);return n.push(o),!1}}var o=t("./GameInfo"),s=t("./ReviewTree"),h=t("./SgfReader"),a=t("./SgfWriter");i.g=r,r.prototype.Mb=function(){this.Hb=new s(this.Fb.ob()),this.Ib=[],this.Lb.Ba(),this.Nb()},r.prototype.Nb=function(){var t=this.Fb;this.Lb.Ga(t.Qa.cb,t.Ua,t.ib())},r.prototype.Ob=function(){this.Ib&&this.Ib.join()===this.Fb.history.join()||(this.Ib=this.Fb.history.concat(),this.Hb.Pb(this.Ib))},r.prototype.Qb=function(){if(!this.Gb){var t=this.Hb.getBookmark();this.Ob(),this.Hb.Rb(t)}var i=this.Jb=this.Jb||new a;return i.Sb(this.Lb,this.Hb)},r.prototype.Tb=function(){return this.Gb=!0,this.Ob(),this.Hb},r.prototype.Ub=function(){this.Gb=!1},r.prototype.Vb=function(t,i,n){var r=this.Kb=this.Kb||new h;return e(r,t,i,n)?(this.Fb.bb(r.Wb,r.Xb(),r.Ua),this.Fb.Pa(r.Ea("rules"),!0),this.Lb.Da(r.Yb),this.Hb=r.Zb(),this.Ib=null,this.Fb.fb(r.$b(),i)):!1},r.prototype.ac=function(t,i){if(h.bc(t)){if(!this.Vb(t,i))return!1}else{if(!this.Fb.tb(t,i))return!1;this.Lb.Ba()}return this.Nb(),!0},r.prototype.cc=function(t,i,n){if(!this.ac(t,n))return null;var r=new h;return e(r,i,n)?(this.Hb.dc(r.Zb()),this.Qb()):null}},{"./GameInfo":8,"./ReviewTree":18,"./SgfReader":20,"./SgfWriter":21}],11:[function(t,i,n){"use strict";function r(t){this.ec=t,this.Lb=new c}function e(t,i,n){var r=t.indexOf(i+"[");if(0>r)return n;var e=t.substring(r+i.length+1,t.indexOf("]",r));switch(typeof n){case"number":return parseFloat(e);default:return e}}function o(t,i){var n=e(t,i,"?");return n.length<=f?n:n.substr(0,f-1).trim()+"."}function s(t){return(t.length-t.replace(/;[BW]\[/g,"").length)/3}function h(t){return(t.length-t.replace(/\(;/g,"").length)/2-1}function a(t,i){var n=e(t,i);return n||0===n?" "+n:""}function u(t,i){return 0===i?"":", "+i+" "+t}var c=t("./GameInfo"),l=t("./SgfReader"),p="interruptedGame",f=10,g=5;i.g=r,r.prototype.fc=function(t){this.ec.gc(p,t)},r.prototype.hc=function(){var t=this.ec.ic(p);return this.ec.gc(p,""),t},r.prototype.jc=function(t){var i="",n=e(t,"SZ",19);return 19!==n&&(i+=n+"x"+n+" "),i+=o(t,"PW")+"/"+o(t,"PB"),i+=u("mov.",s(t)),i+=u("var.",h(t))},r.prototype.kc=function(t){var i="",n=e(t,"SZ",19);return 19!==n&&(i+=n+"x"+n+" "),i+=o(t,"PW")+"/"+o(t,"PB"),i+=a(t,"DT"),i+=a(t,"PC"),i+=a(t,"SO"),i+=a(t,"EV")},r.prototype.lc=function(){for(var t=this.ec.ic("mostRecentGames",[]),i=[],n=0;n<t.length;n++)i.push(this.jc(t[n]));return i},r.prototype.mc=function(){for(var t=this.ec.ic("myGames",[]),i=[],n=0;n<t.length;n++)i.push(this.jc(t[n]));return i},r.prototype.nc=function(t,i){for(var n=this.kc(i),r=0;r<t.length;r++)if(this.kc(t[r])===n)return r;return-1},r.prototype.oc=function(t){var i=this.ec.ic("mostRecentGames",[]);return i[t]||null},r.prototype.pc=function(t){var i=this.ec.ic("myGames",[]);return i[t]||null},r.prototype.qc=function(t){if(!l.bc(t))return null;var i=this.ec.ic("myGames",[]),n=this.nc(i,t);return 0>n?null:i[n]},r.prototype.rc=function(t){this.sc(t),this.tc(t)},r.prototype.sc=function(t){var i=this.ec.ic("mostRecentGames",[]),n=this.nc(i,t);0>n?(i[0]!==t&&i.unshift(t),i.length>g&&i.splice(g)):(i.splice(n,1),i.unshift(t)),this.ec.gc("mostRecentGames",i)},r.prototype.tc=function(t){var i=this.ec.ic("myGames",[]),n=this.nc(i,t);0>n?i.unshift(t):i[n]=t,this.ec.gc("myGames",i)},r.prototype.uc=function(t){var i=this.ec.ic("myGames",[]);return t>=i.length?!1:(i.splice(t,1),this.ec.gc("myGames",i),!0)}},{"./GameInfo":8,"./SgfReader":20}],12:[function(t,i,n){"use strict";function r(t,i,n){this.vc=t||{},this.wc=i||{},this.name=n||"#"+o++}var e=t("./helper"),o=1;i.g=r;var s=.05,h=0,a=1;r.prototype.clone=function(t){return new r(e.clone(this.vc),e.clone(this.wc),t)},r.prototype.xc=function(t){this.wc=t},r.prototype.toString=function(){var t="{"+this.name+" - ";for(var i in this.vc)t+=i+":"+this.vc[i].toFixed(2)+", ";return t.yc(", ")+"}"},r.prototype.zc=function(t){var i=0;for(var n in this.vc){var r=this.vc[n],e=t.vc[n];0>e!=0>r?0>e?(r-=e,e=0):(e-=r,r=0):(r=Math.abs(r),e=Math.abs(e));var o;o=0===e?r>1?1:r:0===r?e>1?1:e:1-(e>=r?r/e:e/r),i+=o}return i},r.prototype.get=function(t,i,n,r){void 0===n&&(n=null),void 0===r&&(r=null);var e=this.vc[t];if(e)return e;if(this.vc[t]=i,(n||r)&&(this.wc[t]=[n,r]),n&&r&&n>r)throw new Error("Limits are invalid: "+n+" > "+r);return i},r.prototype.Ac=function(){return JSON.stringify(this)},r.Bc=function(t){var i=JSON.parse(t);this.vc=i.vc,this.wc=i.wc},r.prototype.Cc=function(t,i,n,r,e){var o=this.vc,s=t.vc;i.xc(this.wc),n.xc(this.wc);var h=i.vc,a=n.vc,u=~~(Math.random()*o.length),c=~~(Math.random()*u),l=0;for(var p in o)c>l||l>u?(h[p]=o[p],a[p]=s[p]):(h[p]=s[p],a[p]=o[p]),Math.random()<r&&(h[p]=this.Dc(p,h[p],e)),Math.random()<r&&(a[p]=this.Dc(p,a[p],e)),l++},r.prototype.Dc=function(t,i,n){var r,e=this.wc[t];if(e){var o=e[h],u=e[a];if(Math.random()<n)r=o+Math.random()*(u-o);else{var c=1+2*Math.random()*s-s;r=i*c,o&&o>r&&(r=o),u&&r>u&&(r=u)}}else r=i+10*(Math.random()-.5);return r},r.prototype.Ec=function(){for(var t in this.vc)this.vc[t]=this.Dc(t,this.vc[t],1);return this}},{"./helper":47}],13:[function(t,i,n){"use strict";function r(t){if(void 0===t&&(t=19),t!==~~t||3>t)throw new Error("Invalid goban size: "+t);this.cb=t,this.Gc=new o(t,a),this.grid=new o(t,s.Fc),this.Hc=this.grid.Ic;var i,n;for(n=t;n>=1;n--)for(i=t;i>=1;i--)this.Hc[n][i]=new s(this,i,n,u);for(n=1;t>=n;n++)for(i=1;t>=i;i++)this.Hc[n][i].Jc();r.Kc=new h(this,new s(this,-50,-50,u),-100,0),this.Lc=[r.Kc],this.Mc=[r.Kc],this.Nc=[],this.Oc=0,this.history=[],this.kb(!1),this.Pc=0}var e=t("./constants"),o=t("./Grid"),s=t("./Stone"),h=t("./Group"),a=(t("./test"),e.Fc),u=e.EMPTY;i.g=r,r.prototype.clear=function(){for(var t=1;t<=this.cb;t++)for(var i=1;i<=this.cb;i++){var n=this.Hc[t][i];n.group&&n.group.clear()}this.Lc.shift(),this.Mc.shift(),this.Nc.concat(this.Lc),this.Nc.concat(this.Mc),this.Lc.length=0,this.Mc.length=0,this.Lc.push(r.Kc),this.Mc.push(r.Kc),this.Oc=0,this.history.length=0,this.kb(!1),this.Pc=0},r.prototype.Qc=function(t,i){var n=++this.Oc,r=this.Nc.pop();return r?r.Rc(t,i,n):r=new h(this,t,i,n),r},r.prototype.Sc=function(t){t.Tc===this.Oc&&this.Oc--,this.Nc.push(t)},r.prototype.Uc=function(){return this.grid.Vc()},r.prototype.Wc=function(t){this.Gc.Wc(t);for(var i=this.cb;i>=1;i--)for(var n=1;n<=this.cb;n++){var r=this.Gc.Ic[i][n];r!==u&&this.nb(n,i,r)}},r.prototype.Xc=function(){for(var t={},i=this.cb;i>=1;i--)for(var n=this.cb;n>=1;n--){var r=this.Hc[i][n].group;r&&(t[r.Tc]=r)}return t},r.prototype.Yc=function(){for(var t,i="Board:\n"+this.toString()+"\nGroups:\n"+this.grid.Zc(function(t){return t.group?""+t.group.Tc:"."})+"\nStones in groups:\n",n={},r=this.grid.Ic,e=0;t=r[e],e<r.length;e++)for(var o,s=t,h=0;o=s[h],h<s.length;h++)o&&o.group&&(n[o.group.Tc]=o.group);for(var a=1;a<=this.Oc;a++)n[a]&&(i+=n[a].Yc()+"\n");return i},r.prototype.toString=function(){return this.grid.Zc()},r.prototype.yb=function(t,i,n){if(1>t||t>this.cb||1>i||i>this.cb)return!1;var r=this.Hc[i][t];if(r.color!==u)return!1;if(r.$c(n))return!1;if(this._c){if(this.ad[this.bd(t,i,n)])return!1}else if(r.dd(n))return!1;return!0},r.prototype.ed=function(t,i){return this.Hc[i][t]},r.prototype.fd=function(t,i){return this.Hc[i][t].color},r.prototype.gd=function(t,i){return this.Hc[i][t].gd()},r.prototype.Cb=function(){return this.history.length},r.prototype.nb=function(t,i,n){this.hd(t,i,n);var r=this.Hc[i][t];if(r.color!==u)throw new Error("Tried to play on existing stone in "+r);return this.jd(t,i,n)},r.prototype.Eb=function(){if(!this.history.length)throw new Error("Extra undo");this.history.pop().kd(),this.hd()},r.prototype.jd=function(t,i,n){var r=this.Hc[i][t];return this.history.push(r),this.Pc++,r.ld(n),r},r.prototype.md=function(){this.history.pop().kd()},r.prototype.nd=function(){return this.Lc[this.Lc.length-1]},r.prototype.od=function(){return this.history[this.history.length-1]},r.prototype.pd=function(t){t=t||[0,0];for(var i=this.Lc.length-1;i>=0;i--){var n=this.Lc[i];t[n.color]+=n.qd.length}return t},r.prototype.kb=function(t){if(this.history.length>0)throw new Error("Superko rule changed during game");this._c=t,t?(this.rd=this.sd(),this.td=[],this.ad={}):(this.rd=null,this.td=this.ad=null)},r.prototype.hd=function(t,i,n){this._c?t?(this.td.push(this.rd),this.ad[this.rd]=this.history.length,this.rd=this.bd(t,i,n)):(this.rd=this.td.pop(),this.ad[this.rd]=null):this.rd=null},r.prototype.bd=function(t,i,n){for(var r=this.ud(this.rd,t,i,n),e=this.ed(t,i).vd(1-n),o=e.length-1;o>=0;o--)if(!(e[o].wd>1))for(var s=e[o].qd,h=s.length-1;h>=0;h--){var a=s[h];r=this.ud(r,a.xd,a.yd,u)}return r},r.prototype.zd=function(){return this._c?this.rd:(this.rd||(this.rd=this.Uc()),this.rd)};var c=33,l="0".charCodeAt();r.prototype.sd=function(){for(var t="",i="",n=this.cb,r=1;n>=r;r++)for(var e=this.Hc[r],o=1;n>=o;o++)t+=String.fromCharCode(l+e[o].color+1),4===t.length&&(i+=String.fromCharCode(parseInt(t,3)+c),t="");return t.length&&(t=(t+"000").substr(0,4),i+=String.fromCharCode(parseInt(t,3)+c)),i},r.prototype.ud=function(t,i,n,r){var e,o=(n-1)*this.cb+(i-1),s=~~(o/4),h=o%4;if(r===u){var a=("000"+(t.charCodeAt(s)-c).toString(3)).slice(-4),l=a.substr(0,h)+"0"+a.substr(h+1);e=parseInt(l,3)+c}else e=t.charCodeAt(s)+(1<<r)*Math.pow(3,3-h);return t.substr(0,s)+String.fromCharCode(e)+t.substr(s+1)}},{"./Grid":14,"./Group":15,"./Stone":22,"./constants":46,"./test":52}],14:[function(t,i,n){"use strict";function r(t,i,n){if(void 0===i)throw new Error("Grid init value must be defined");this.cb=t,void 0===n?this.Ic=a.Bd(t+2,t+2,i):(this.Ic=a.Bd(t+2,t+2,n),this.init(i))}function e(t){if(t===l)return"(BORDER)";if(t>=r.Jd)return String.fromCharCode("A".charCodeAt()+t-r.Jd);if(t<r.Ld||t>=r.Hd.length)throw new Error("Invalid color "+t);return 0>t&&(t+=r.Hd.length),r.Hd[t]}function o(t){return e("number"==typeof t?t:t.color)}function s(t){for(var i="",n=t.length-1;n>=0;n--)i+=t[n];return i}var h=t("./constants"),a=t("./helper"),u=t("./Move"),c=u.Ad,l=h.Fc;i.g=r,r.Cd="+",r.Dd="?",r.Ed="@O",r.Fd="&#",r.Gd="-:",r.Hd=r.Ed+r.Fd+r.Gd+r.Dd+r.Cd,r.Id=r.Dd+r.Cd+r.Hd,r.Jd=100,r.Kd=-1,r.Ld=-2,r.Md=2,r.Nd=4,r.Od=[0,0,-1,1,1,-1,-1,1],r.Pd="-'?.:",r.prototype.init=function(t){if(void 0===t)throw new Error("Grid init value must be defined");for(var i=this.cb;i>=1;i--)for(var n=this.Ic[i],r=this.cb;r>=1;r--)n[r]=t},r.prototype.K=function(t){if(t.cb!==this.cb)throw new Error("Cannot copy between different sized grids");for(var i=this.cb;i>=1;i--)for(var n=this.Ic[i],r=t.Ic[i],e=this.cb;e>=1;e--)n[e]=r[e];return this},r.prototype.Qd=function(t){var i=t.grid;if(i.cb!==this.cb)throw new Error("Cannot copy between different sized grids");for(var n=this.cb;n>=1;n--)for(var r=this.Ic[n],e=i.Ic[n],o=this.cb;o>=1;o--)r[o]=e[o].color;return this},r.Rd=function(t){return r.Id.indexOf(t)+r.Ld},r.prototype.Zc=function(t){return this.Sd(!0,"\n",t||o)},r.prototype.Vc=function(t){return this.Sd(!1,",",t||o)},r.prototype.Sd=function(t,i,n){var e,o,s,h=new r(this.cb,"").Ic,a=1;for(o=this.cb;o>=1;o--)for(e=1;e<=this.cb;e++)s=n(this.Ic[o][e]),null!==s&&(h[o][e]=s,a=Math.max(a,s.length));var u=a,l="          ",p="";for(o=this.cb;o>=1;o--){for(t&&(p+="%2d".format(o)+" "),e=1;e<=this.cb;e++)s=h[o][e],s.length<u&&(s=l.substr(1,u-s.length)+s),p+=s;p+=i}if(t){for(p+="   ",e=1;e<=this.cb;e++)p+=l.substr(1,u-1)+c(e);p+="\n"}return"\n"!==i&&(p=p.Td()),p},r.prototype.toString=function(){for(var t="",i=this.cb;i>=1;i--){for(var n=1;n<=this.cb;n++)t+=e(this.Ic[i][n]);t+="\n"}return t},r.prototype.Uc=function(){return"object"==typeof this.Ic[1][1]?this.Vc(function(t){return e(t.color)}):this.Vc(function(t){return e(t)})},r.prototype.Wc=function(t){var i=t.split(/\"|,/);if(i.length!==this.cb)throw new Error("Invalid image: "+i.length+" rows instead of "+this.cb);for(var n=this.cb;n>=1;n--){var e=i[this.cb-n];if(e.length!==this.cb)throw new Error("Invalid image: row "+e);for(var o=1;o<=this.cb;o++)this.Ic[n][o]=r.Rd(e[o-1])}},r.Ud=function(t){return t.split(",").reverse().join()},r.Vd=function(t){return t.split(",").map(s).join()},r.Wd=function(t){return s(t)},r.Xd=function(t){for(var i="",n=t.split(","),r=n[0].length-1;r>=0;r--){i+=",";for(var e=0;e<n.length;e++)i+=n[e][r]}return i.substr(1)}},{"./Move":17,"./constants":46,"./helper":47}],15:[function(t,i,n){"use strict";function r(t,i,n,r){this.Qa=t,this.qd=[i],this.wd=n,this.color=i.color,this.Zd=null,this.$d=null,this._d=null,this.Tc=r,this.ae=null,this.be=this.ce=0}var e=t("./constants"),o=t("./log"),s=t("./Move"),h=s.Yd,a=e.EMPTY;i.g=r,r.prototype.Rc=function(t,i,n){this.qd.length=0,this.qd.push(t),this.wd=i,this.color=t.color,this.Zd=this.$d=this._d=null,this.Tc=n,this.be=this.ce=0},r.prototype.clear=function(){for(var t=this.qd.length-1;t>=0;t--)this.qd[t].clear();this.Qa.Sc(this)},r.prototype.toString=function(t){if(0===t)return"#"+this.Tc;if(1===t)return this.qd[0]+" x"+this.qd.length;for(var i,n="{group #"+this.Tc+" of "+this.qd.length+" "+h(this.color)+" stones [",r=this.qd,e=0;i=r[e],e<r.length;e++)n+=i.de()+",";return n=n.Td(),n+="], lives:"+this.wd,this.Zd&&(n+=" MERGED with #"+this.Zd.Tc),this._d&&(n+=" KILLED by "+this._d.de()),n+="}"},r.prototype.ee=function(){return this.qd.length&&this.qd[0].group===this},r.prototype.Yc=function(){return this.toString()},r.prototype.fe=function(){return this.qd.map(function(t){return t.de()}).sort().join(",")},r.prototype.ge=function(){for(var t,i=[],n=this.qd,r=0;t=n[r],r<n.length;r++)for(var e,o=t.he,s=0;e=o[s],s<o.length;s++)e.color===a&&i.indexOf(e)<0&&i.push(e);if(i.length!==this.wd)throw new Error("Wrong life count for group");return i},r.prototype.ie=function(){for(var t,i=[],n=1-this.color,r=this.qd,e=0;t=r[e],e<r.length;e++)for(var s,h=t.he,a=0;s=h[a],a<h.length;a++)s.color===n&&i.indexOf(s.group)<0&&i.push(s.group);return o.je,i},r.prototype.ke=function(t){for(var i,n=-1,r=t.he,e=0;i=r[e],e<r.length;e++)if(i.color===a){n++;for(var s,h=i.he,u=0;s=h[u],u<h.length;u++)if(s.group===this&&s!==t){n--;break}}return o.je,n},r.prototype.le=function(t){if(o.je,this.qd.push(t),this.wd+=this.ke(t),this.wd<0)throw new Error("Unexpected error (lives<0 on connect)");o.je},r.prototype.me=function(t){if(o.je,this.qd.length>1){if(this.wd-=this.ke(t),this.wd<0)throw new Error("Lives<0 on disconnect")}else this.Qa.Sc(this),o.je;if(this.qd.pop()!==t)throw new Error("Unexpected error (disconnect order)")},r.prototype.ne=function(t){return this.wd--,this.wd<=0?this.oe(t):void 0},r.prototype.pe=function(t){if(this.wd--,o.je,this.wd<1)throw new Error("Unexpected error (lives<1 on attack by resucitated)")},r.prototype.qe=function(t){this.wd++,o.je},r.prototype.re=function(t,i){if(t.Zd===this||t===this||this.color!==t.color)throw new Error("Invalid merge");o.je,this.wd+=t.qd.length;for(var n,r=t.qd,e=0;n=r[e],e<r.length;e++)n.se(this),this.le(n);t.Zd=this,t.$d=i,this.Qa.Mc.push(t),o.je},r.prototype.te=function(t){o.je;for(var i,n=t.qd,r=n.length-1;i=n[r],r>=0;r--)this.me(i),i.se(t);this.wd-=t.qd.length,t.$d=t.Zd=null,o.je},r.prototype.ue=function(t){for(var i=this.Qa.Mc,n=i.length-1;n>=0;n--){var r=i[n];if(r.$d!==t||r.Zd!==this)break;this.te(r),i.pop()}},r.prototype.oe=function(t){if(o.je,this.wd<0)throw new Error("Unexpected error (lives<0)");for(var i,n=this.qd,r=0;i=n[r],r<n.length;r++){for(var e,s=i.vd(1-this.color),h=0;e=s[h],h<s.length;h++)e.qe(i);i.ve()}this._d=t,this.Qa.Lc.push(this),o.je},r.prototype.we=function(){this._d=null,this.wd=1;for(var t,i=this.qd,n=0;t=i[n],n<i.length;n++){t.xe(this);for(var r,e=t.vd(1-this.color),o=0;r=e[o],o<e.length;o++)r.pe(t)}},r.ye=function(t){for(var i=t.Qa.Lc,n=i.length-1;n>=0;n--){var r=i[n];if(r._d!==t)break;i.pop(),o.je,r.we()}}},{"./Move":17,"./constants":46,"./log":49}],16:[function(t,i,n){"use strict";function r(){}i.g=new r,r.prototype.mb=function(t,i){if(i>4&&(9>t||t%2===0)&&(i=4),5>=t)return[];for(var n=13>t?2:3,r=1+n,e=(1+t)/2,o=t-n,s=[],h=0;i>h;h++){switch(i%2===1&&i>4&&h===i-1&&(h=8),h){case 0:var a=r,u=r;break;case 1:a=o,u=o;break;case 2:a=r,u=o;break;case 3:a=o,u=r;break;case 4:a=r,u=e;break;case 5:a=o,u=e;break;case 6:a=e,u=r;break;case 7:a=e,u=o;break;case 8:a=e,u=e}s.push([a,u])}return s}},{}],17:[function(t,i,n){"use strict";function r(t){switch(t[0]){case"B":return h;case"W":return a;default:return}}function e(t){return"B"!==t[0]&&"W"!==t[0]?t:"-"!==t[1]?t.substr(1):t.substr(2)}function o(t,i){var n=u.indexOf(t[0])+1,r=parseInt(t.substr(1,2));if(!n||isNaN(r)){if(i)return null;throw new Error("Illegal move parsed: "+t)}return[n,r]}var s=t("./constants"),h=s.Ma,a=s.Na,u="abcdefghjklmnopqrstuvwxyz",c=["black","white"];n.Ia=r,n.Ja=e,n.Ha=function(t,i){return(i===h?"B-":"W-")+t},n.Yd=function(t){return c[t]},n.ze=o,n.Ka=function(t){var i=r(t);void 0!==i&&(t=e(t));var n=o(t,!0);if(!n){if("pass"===t||t.startsWith("resi"))return null;throw new Error("Illegal move parsed: "+t)}return void 0!==i?n.concat(i):n},n.La=function(t,i){return u[t-1]+i},n.Ad=function(t){return u[t-1]}},{"./constants":46}],18:[function(t,i,n){"use strict";function r(t){this.root=new e(null,[]),this.Ae=-1,this.Be=this.root,this.Ce=-1,this.De(t)}function e(t,i,n){this.Ee=t,this.Fe=t?t.Fe+t.Ge.length:0,this.Ge=i,this.Yb=n||[],this.children=null,this.He=null,this.Ie=!1}function o(t,i){return a(t)===a(i)}var s=t("./constants"),h=t("./Move"),a=h.Ja,u=s.Ma,c=s.Na,l="";i.g=r,e.prototype.Je=function(){return[this.Ge,this.Yb];
},e.prototype.Ke=function(t){for(var i=0;i<this.children.length;i++)if(o(t,this.children[i].Ge[0]))return this.children[i];return null},e.prototype.Le=function(t){var i=new e(this,[t]);return this.children.push(i),i},e.prototype.Me=function(){this.children||(this.children=[],this.Le(l))},e.prototype.Ne=function(){this.children.unshift(new e(this,[l]))},e.prototype.Oe=function(){return this.Ge[0]===l},e.prototype.Pe=function(){if(!this.children)return null;var t=this.children[0];return t.Oe()?null:t},e.prototype.Qe=function(){if(this.He)return this.He;if(!this.children)return null;var t=this.children[0];return t.Oe()&&(t=this.children[1]),t||null},e.prototype.Re=function(t){var i=this.children;i.splice(i.indexOf(t),1),i.length||(this.children=null),this.He===t&&(this.He=null)},e.prototype.Se=function(t,i){var n=this.Ge.splice(t),r=this.Yb.splice(t);if(!n.length)throw new Error("Invalid split at end");var o=new e(this,n,r);o.Ie=i,o.He=this.He;var s=o.children=this.children;if(s)for(var h=0;h<s.length;h++)s[h].Ee=o;this.children=[o]},e.prototype.Te=function(t,i){var n;if(t===this.Ge.length){if(!this.children)throw new Error("Unexpected fork");n=this.Ke(i)||this.Le(i)}else this.Se(t,this.Ie),n=new e(this,[i]),this.children.push(n);return this.He=n,n},e.prototype.Ue=function(){for(var t=this;t;)t.Ie=!1,t=t.Pe()},e.prototype.Ve=function(){this.Ie=!0;var t=this.Ee.children;t[0]!==this&&(t.splice(t.indexOf(this),1),t[0].Oe()?t[0]=this:t.unshift(this))},e.prototype.We=function(t){t+1!==this.Ge.length?(this.Se(t+1,!1),this.Ne()):this.children&&!this.children[0].Oe()&&this.Ne()},r.prototype.De=function(t){if(t&&!t.length)throw new Error("empty setupMoves array");this.Xe=t,this.Wa=t?c:u},r.prototype.Xb=function(){return this.Xe},r.prototype.Ye=function(){return this.root},r.prototype.Ze=function(){return this.Ce<0?null:this.Be.Ge[this.Ce]},r.prototype.$e=function(){return this.Be.Fe+this.Ce},r.prototype._e=function(){return this.Be.Ie},r.prototype.getBookmark=function(){return[this.Be,this.Ce]},r.prototype.Rb=function(t){this.Be=t[0],this.Ce=t[1]},r.prototype.af=function(){this.Be=this.root,this.Ce=-1},r.prototype.bf=function(){return this.Be.Yb[this.Ce]},r.prototype.cf=function(t){if(t){var i=this.Be.Yb[this.Ce];i||(i=this.Be.Yb[this.Ce]={});for(var n in t)i[n]=t[n]}},r.prototype.df=function(t){return t.Fe%2===0?this.Wa:1-this.Wa},r.prototype.ef=function(t){var i=this.Be;if(this.Ce++,this.Ce===i.Ge.length){if(!i.children)return i.Ge.push(t)}else if(o(t,i.Ge[this.Ce]))return;this.Be=i.Te(this.Ce,t),this.Ce=0},r.prototype.ff=function(t){var i=this.Be;this.Ce===i.Ge.length-1&&i.Ie&&i.Me(),this.ef(t)},r.prototype.gf=function(){this.Be.Me()},r.prototype.hf=function(){if(this.Ce>0)this.Ce--;else if(this.Be!==this.root)this.Be=this.Be.Ee,this.Ce=this.Be.Ge.length-1;else{if(-1===this.Ce)return!1;this.Ce=-1}return!0},r.prototype["if"]=function(t){var i=this.Be;if(this.Ce===i.Ge.length-1){if(i=t?i.Pe():i.Qe(),!i)return null;this.Be=i,this.Ce=0}else this.Ce++;return this.Be.Ge[this.Ce]},r.prototype.jf=function(){return this["if"]()},r.prototype.kf=function(){return this["if"](!0)},r.prototype.lf=function(){var t=this.Be,i=this.Ce,n=this["if"]();return this.Be=t,this.Ce=i,n},r.prototype.mf=function(){var t=this.Be;if(this.Ce<t.Ge.length-1)return null;var i=t.children;if(!i)return null;if(1===i.length)return null;var n=[];t.Ie||n.push(l);for(var r=0;r<i.length;r++)n.push(i[r].Ge[0]);return n},r.prototype.Pb=function(t){this.root.Ue(),this.Ae=t.length,this.root.Ie=!0,this.Be=this.root,this.Ce=-1;for(var i=this.Be,n=0;n<t.length;n++)this.ef(t[n]),this.Be!==i&&(i=this.Be,i.Ve());i.We(this.Ce)},r.prototype.nf=function(){for(var t=[],i=this.root;;){i.Ie=!0;for(var n=0;n<i.Ge.length;n++)t.push(i.Ge[n]);if(!i.children)break;i=i.children[0]}return i.Oe()?(t.pop(),this.Be=i.Ee,this.Be.Re(i)):this.Be=i,this.Ce=this.Be.Ge.length-1,this.Ae=t.length,t},r.prototype.pf=function(){return this.Ae},r.prototype.qf=function(t){if(this.Ce!==this.Be.Ge.length-1)return!1;var i=this.Be.Ke(t);return!i||i.Ie?!1:(this.Be.Re(i),!0)},r.prototype.dc=function(t){for(var i=this.nf(),n=t.nf(),r=Math.min(i.length,n.length),e=!1,o=0;r>o;o++)if(i[o]!==n[o]){e=!0;break}n.length>r&&!e&&this.Pb(n);var s=this.getBookmark();this.af(),t.af(),this.rf(t),this.Rb(s)},r.prototype.rf=function(t){for(var i;!(i=t.mf());){var n=t["if"]();if(!n)return;this.ff(n),this.cf(t.bf())}for(var r=this.getBookmark(),e=t.getBookmark(),o=0;o<i.length;o++)this.ff(i[o]),t.ff(i[o]),this.rf(t),this.Rb(r),t.Rb(e)}},{"./Move":17,"./constants":46}],19:[function(t,i,n){"use strict";function r(t){this.Fb=t,this.sf=new s.uf.tf(t)}function e(t){if(0===t)return"Tie game";var i=t>0?c:l;return u(i)+" wins by "+o(Math.abs(t))}function o(t){return 1!==t?t+" points":"1 point"}var s=t("./ai"),h=t("./constants"),a=t("./Move"),u=a.Yd,c=h.Ma,l=h.Na;i.g=r,r.prototype.vf=function(){var t=this.wf()[0];return t[c]-t[l]},r.prototype.xf=function(){return this.yf(this.wf())},r.prototype.zf=function(){return this.wf()},r.prototype.Af=function(){return this.sf.Af()},r.prototype.wf=function(){var t=this.Fb;return null!==t.Za?["resi",1-t.Za,t.$a]:(this.sf.Bf(t.Qa),this.sf.Cf())},r.prototype.yf=function(t){if("resi"===t[0]){var i,n=u(t[1]),r=u(1-t[1]);switch(t[2]){case"time":i=r+" ran out of time";break;case null:case void 0:i=r+" resigned";break;default:i=r+" disqualified: "+t[2]}return[n+" won ("+i+")"]}if(!t||2!==t.length)throw new Error("Invalid score info: "+t);var s=t[0],h=t[1];if(s.length!==h.length)throw new Error("Invalid score info");var a=[],p=s[c]-s[l];a.push(e(p));for(var f=c;l>=f;f++){var g=h[f],d=g[0],v=g[1],y=g[2],b=0!==v?" "+(0>v?"-":"+")+" "+Math.abs(v)+" prisoners":"",m=y>0?" + "+y+" komi":"",x=v||y?" ("+d+b+m+")":"";a.push(u(f)+": "+o(s[f])+x)}return a}},{"./Move":17,"./ai":45,"./constants":46}],20:[function(t,i,n){"use strict";function r(){y||s(),this.text=null,this.Df=null,this.Wb=this.Ua=0,this.Xe=this.Ib=this.Ge=null,this.Ef=null,this.Hb=null,this.Yb=null,this.Va=p,this.Ff=!1}function e(t,i,n){d[t]=[i,n],v[n]=t}function o(t,i){y[t]=i}function s(){d={},v={},y={},e("GM","int",null),e("FF","int","fileFormat"),e("SZ","int","boardSize"),e("AB","move",null),e("AW","move",null),e("HA","int","handicap"),e("KM","real","komi"),e("RU","text","rules"),e("RE","text","result"),e("PB","text","playerBlack"),e("PW","text","playerWhite"),e("BS","int","blackSpecies"),e("WS","int","whiteSpecies"),e("LT","flag","enforceLosingOnTime"),e("SO","text","source"),e("ID","text","gameId"),e("AP","text","application"),e("BR","text","blackRank"),e("WR","text","whiteRank"),e("BT","text","blackTeam"),e("WT","text","whiteTeam"),e("TM","text","timeLimit"),e("OT","text","overtimeMethod"),e("EV","text","event"),e("RO","text","round"),e("DT","text","date"),e("PC","text","place"),e("GN","text","gameName"),e("ON","text","openingPlayed"),e("GC","text","gameComment"),e("C","text","comment"),e("N","text","nodeName"),e("US","text","userName"),e("AN","text","analyseAuthor"),e("CP","text","copyright"),e("CA","text","characterSet"),e("ST","text","variationStyle"),o("B","move"),o("W","move"),o("AB","move"),o("AW","move"),o("BL",null),o("WL",null),o("C","text"),o("CR",null),o("BM",null),o("N",null)}function h(t){if(t.Kf("a","z"))return t.charCodeAt()-97;if(t.Kf("A","Z"))return t.charCodeAt()-39;throw new Error("Invalid coordinate value: "+t)}function a(t){for(var i=0;;){var n=t.indexOf("]",i);if(-1===n)return-1;if("\\"!==t[n-1])return n;i=n+1}}var u=t("./constants"),c=t("./log"),l=t("./ReviewTree"),p=u.Ma,f=u.Na,g=["B","W"],d=null,v=null,y=null;i.g=r,r.Gf=function(){return y||s(),v},r.bc=function(t){var i=t.trim();return"("!==i[0]?!1:";"===i.substr(1).trim()[0]},r.prototype._b=function(t,i){if(!r.bc(t))throw new Error("Not an SGF file");this.Hf(t),this.If(),this.Jf(i)},r.prototype.Xb=function(){return this.Xe},r.prototype.$b=function(){return this.Ib},r.prototype.Zb=function(){return this.Hb},r.prototype.Ea=function(t,i){var n=this.Yb[t];return void 0!==n?n:i};var b="abcdefghjklmnopqrstuvwxyz";r.prototype.Lf=function(t){if(this.Wb)throw new Error("SZ set twice");this.Wb=t},r.prototype.Mf=function(t){if(!this.Wb)throw new Error("Move seen before SZ is known");if(""===t||"tt"===t&&this.Wb<=19)return"pass";var i=b[h(t[0])],n=this.Wb-h(t[1]);return i+n},r.prototype.ef=function(t,i,n){if(!this.Ff&&n)t!==this.Va&&(i=g[t]+i),this.Va=t,this.Xe.push(i);else{if(this.Ff){if(t!==this.Va)throw new Error("Bad move color: "+g[t]+i)}else this.Ff=!0,i=g[t]+i;this.Va=1-t,this.Ge.push(i)}},r.prototype.Nf=function(t){var i=this.Ge.length-1;this.Ef[i]=(this.Ef[i]||"")+t},r.prototype.Of=function(t,i){switch(i){case"text":return t;case"int":return parseInt(t);case"real":return parseFloat(t);case"flag":return!0;case"move":return this.Mf(t);default:throw new Error("Invalid tag type: "+i)}},r.prototype.Pf=function(t,i){var n=y[t];if(void 0===n)return c.warn&&c.warn("Unknown property "+t+"["+i+"] ignored");if(n){var r=this.Of(i,n);switch(t){case"B":return this.ef(p,r);case"W":return this.ef(f,r);case"AB":return this.ef(p,r,!0);case"AW":return this.ef(f,r,!0);case"C":return this.Nf(i)}}},r.prototype.Jf=function(t){this.Hb=new l,this.Qf(this.Df,1),this.Xe.length||(this.Xe=null),this.Hb.De(this.Xe),this.Ib=this.Hb.nf(),void 0!==t&&(this.Ib=this.Ib.slice(0,t))},r.prototype.Qf=function(t,i){for(var n=i;n<t.length;n++){var r=t[n];if("seq"!==r[0]){this.Ge=[],this.Ef=[];for(var e=0;e<r.length;e+=2){var o=r[e]||o,s=r[e+1];this.Pf(o,s)}for(var h=0;h<this.Ge.length;h++)this.Hb.ff(this.Ge[h]),this.Ef[h]&&this.Hb.cf({Rf:this.Ef[h]})}else{if(!r[1].length){this.Hb.gf();continue}var a=this.Hb.getBookmark(),u=this.Va;this.Qf(r,1),this.Va=u,this.Hb.Rb(a)}}},r.prototype.Sf=function(t,i){var n=d[t];if(void 0===n)return this.Yb[t]=i,c.Tf("Unknown property in SGF header: "+t+"["+i+"]");var r=n[0],e=n[1],o=this.Of(i,r);return e&&(this.Yb[e]=o),o},r.prototype.If=function(){this.Wb=this.Ua=0,this.Yb={},this.Xe=[],this.Va=p,this.Ff=!1;for(var t=this.Df[0],i=0;i<=t.length-1;i+=2){var n=t[i],r=t[i+1],e=this.Sf(n,r);switch(n){case"GM":if(1!==e)throw new Error("SGF game is not a GO game");break;case"FF":(3>e||e>4)&&c.warn&&c.warn("SGF format "+e+". Not sure we handle it well.");break;case"SZ":this.Lf(e);break;case"KM":this.Ua=e;break;case"AB":this.ef(p,e,!0);break;case"AW":this.ef(f,e,!0)}}},r.prototype.Hf=function(t){this.text=t,this.Df=[],t=this.Uf(t),t=this.Vf(t),""!==t&&this.Wf("Trailing text ignored",t)},r.prototype.Vf=function(t){for(t=this.Xf("(",t),t=this.Uf(t);";"===t[0];)t=this.Yf(t);for(;"("===t[0];){var i=this.Df;this.Df=["seq"],t=this.Vf(t),i.push(this.Df),this.Df=i}return t=this.Xf(")",t),t=this.Uf(t)},r.prototype.Yf=function(t){t=this.Xf(";",t);for(var i=[];;){for(var n=0;t[n]&&t[n].Kf("A","Z");)n++;var r=t.substr(0,n);if(""===r)break;for(i.push(r),t=this.Xf(r,t);;){t=this.Xf("[",t);var e=a(t);0>e&&this.Wf("Missing ']'",t);var o=t.substr(0,e);if(i.push(o),t=this.Xf(o+"]",t),"["!==t[0])break;i.push(null)}}return this.Df.push(i),t=this.Uf(t)},r.prototype.Uf=function(t){return t.trim()},r.prototype.Xf=function(t,i){return i.startsWith(t)||this.Wf(t+" expected",i),i.replace(t,"").trim()},r.prototype.Wf=function(t,i){throw new Error("Syntax error: '"+t+"' at ..."+i.substr(0,20)+"...")}},{"./ReviewTree":18,"./constants":46,"./log":49}],21:[function(t,i,n){"use strict";function r(){this.Hb=null,this.cb=0,this.Zf="",this.$f="",l||e()}function e(){l={};for(var t=0;t<p.length;t++){var i=p[t];l[i]=!0}for(t=0;t<f.length;t++)l[f[t]]=!0}function o(t,i){return void 0===i||null===i?"":t+"["+i+"]"}var s=t("./constants"),h=t("./Move"),a=t("./SgfReader"),u=h.Ka,c=s.Ma,l=null,p=["playerWhite","playerBlack","source","event","place","boardSize","komi","rules","date"],f=["fileFormat","handicap"];i.g=r,r.prototype._f=function(t,i){this.cb=t.Ea("boardSize");for(var n=a.Gf(),r=t.Fa(),e="",s=0;s<p.length;s++){var h=p[s];e+=o(n[h],r[h])}for(var u in r)l[u]||(e+=o(n[u],r[u]));return e+=this.ag(i)},r.prototype.ag=function(t){if(!t)return"";this.Zf="A",this.$f="B";for(var i=o("HA",t.length),n=0;n<t.length;n++)i+=this.bg(t[n]);return i},r.prototype.bg=function(t){if(""===t)return"";var i,n=this.Zf,r=this.$f,e=u(t);if(e)void 0!==e[2]&&(r=e[2]===c?"B":"W"),i=String.fromCharCode(96+e[0])+String.fromCharCode(97+this.cb-e[1]);else{if(!t.endsWith("pass"))return null;i=""}return""===n&&(this.$f="W"===r?"B":"W"),n+r+"["+i+"]"},r.prototype.cg=function(t,i){for(var n="",r=0;r<t.length;r++){var e=this.bg(t[r]);if(null===e)break;n+=";"+e,i[r]&&i[r].Rf&&(n+="C["+i[r].Rf+"]")}return n},r.prototype.dg=function(t){this.$f=this.Hb.df(t)===c?"B":"W";var i=t.Je(),n=this.cg(i[0],i[1]);if(t.children)for(var r=0;r<t.children.length;r++)n+="("+this.dg(t.children[r])+")";return n},r.prototype.Sb=function(t,i){this.Hb=i;var n="(;FF[4]GM[1]"+this._f(t,i.Xb());return this.Zf="",n+=this.dg(i.Ye()),n+")"}},{"./Move":17,"./SgfReader":20,"./constants":46}],22:[function(t,i,n){"use strict";function r(t,i,n,r){this.Qa=t,this.xd=i,this.yd=n,this.color=r,this.group=null,this.he=[],this.gg=[]}var e=t("./constants"),o=t("./Group"),s=t("./Move"),h=s.La,a=e.EMPTY,u=e.Fc,c=e.eg,l=e.fg;i.g=r,r.Fc=new r(null,-1,-1,u);var p=r.hg=[[0,1],[1,0],[0,-1],[-1,0]],f=r.ig=[[1,1],[1,-1],[-1,-1],[-1,1]];r.prototype.clear=function(){this.color=a,this.group=null},r.prototype.Jc=function(){for(var t=this.Qa.Hc,i=l;i>=c;i--){var n=t[this.yd+p[i][1]][this.xd+p[i][0]];n.color===a&&this.he.push(n),this.gg.push(n),n=t[this.yd+f[i][1]][this.xd+f[i][0]],this.gg.push(n)}},r.prototype.toString=function(){return this.color===a?this.de():(this.color?"W":"B")+"-"+this.de()},r.prototype.de=function(){return h(this.xd,this.yd)},r.prototype.jg=function(){return this.kg().map(function(t){return t.de()}).sort().join(",")},r.prototype.gd=function(){return this.color===a},r.prototype.lg=function(){return 2===this.he.length},r.prototype.mg=function(){var t=this.Qa,i=t.cb-1;return t.ed(1===this.xd?2:i,1===this.yd?2:i)},r.prototype.ng=function(){return this.he.length<=3},r.prototype.og=function(){var t=this.Qa.cb,i=this.xd,n=this.yd;return Math.min(Math.min(i-1,t-i),Math.min(n-1,t-n))},r.prototype.$c=function(t){for(var i=this.he.length-1;i>=0;i--){var n=this.he[i];if(n.color===a)return!1;if(n.color!==t){if(1===n.group.wd)return!1}else if(n.group.wd>1)return!1}return!0},r.prototype.dd=function(t){for(var i=null,n=this.he.length-1;n>=0;n--){var r=this.he[n].group;if(r&&r.color===1-t&&1===r.wd){if(i)return!1;i=r}}if(!i)return!1;if(1!==i.qd.length)return!1;var e=i.qd[0];if(this.Qa.od()!==e)return!1;var o=this.Qa.nd();if(!o||o._d!==e||1!==o.qd.length)return!1;var s=o.qd[0];return s.xd===this.xd&&s.yd===this.yd},r.prototype.ve=function(){this.color=a,this.group=null},r.prototype.xe=function(t){this.group=t,this.color=t.color},r.prototype.ld=function(t){this.color=t;var i=this.vd(t);0===i.length?this.group=this.Qa.Qc(this,this.pg()):(this.group=i[0],this.group.le(this));for(var n=this.vd(1-t),r=n.length-1;r>=0;r--)n[r].ne(this);for(var e=1;e<i.length;e++)this.group.re(i[e],this)},r.prototype.kd=function(){this.group.ue(this),this.group.me(this);for(var t=this.vd(1-this.color),i=t.length-1;i>=0;i--)t[i].qe(this);this.group=null,this.color=a,o.ye(this)},r.prototype.se=function(t){this.group=t},r.prototype.vd=function(t){for(var i=[],n=this.he,r=n.length-1;r>=0;r--){var e=n[r];e.color===t&&i.indexOf(e.group)<0&&i.push(e.group)}return i},r.prototype.kg=function(){for(var t=[],i=this.he,n=i.length-1;n>=0;n--){var r=i[n];r.color===a&&t.push(r)}return t},r.prototype.pg=function(){for(var t=0,i=this.he,n=i.length-1;n>=0;n--)i[n].color===a&&t++;return t},r.prototype.qg=function(t,i){for(var n=0,r=this.he,e=r.length-1;e>=0;e--)r[e].color===t&&(i&&i.push(r[e]),n++);return n},r.prototype.rg=function(t){for(var i=this.he,n=i.length-1;n>=0;n--)if(i[n].group===t)return!0;return!1}},{"./Group":15,"./Move":17,"./constants":46}],23:[function(t,i,n){"use strict";function r(t){s.call(this,t)}var e=t("../../constants"),o=t("./DiamondZone"),s=t("./Heuristic"),h=t("util").inherits,a=t("../../log"),u=t("../../Move"),c=(t("../../test"),u.Yd,e.EMPTY),l=e.Fc,p=e.sg,f=e.tg,g=e.ug,d=e.vg,v=e.wg,y=e.xg,b=e.yg,m=e.zg,x=e.Ag,w=e.Bg,k=e.Cg,S=e.Dg,M=-1,j=0,C=1;h(r,s),i.g=r,r.prototype.Eg=function(t,i,n){var r=this.Qa.ed(t,i);if(this.Fg[i][t]<0)return 0;var e,o=1-n;if(this.Gg(r,n)&&this.Gg(r,o)){var s=[];e=[],this.Hg(r,o,s,e)!==C||e.length||this.Jg.Ig(s,r,r,o)}var h=[];switch(e=[],this.Hg(r,n,h,e)){case j:return this.Kg(r,n,h);case C:this.Jg.Ig(h,r,r,n);for(var a=e.length-1;a>=0;a--)this.Jg.Ig(h,r,e[a],n);return 0;default:return 0}},r.prototype.Hg=function(t,i,n,r){for(var e=1-i,s=0,h=0,a=0,u=!1,q=0;8>q;q++){var I=q%2,B=t.gg[q];switch(B.color){case l:continue;case c:continue;case i:var D=B.group;I?h++:(s++,1===D.wd&&(u=!0)),n.indexOf(D)<0&&n.push(D);break;default:if(1===B.group.wd)break;I||a++}}if(n.length<2)return M;if(4===s)return u?C:j;var G=new o(t,i),T=G.Lg;G.normalize();var E,L,O;if(t.ng()){if(t.lg())return j;if(3===s)return u?C:j;if(2===s){if(u)return C;if(T[f].color!==i){if(!a)return j}else{if(T[b].color===c)return j;if(!a)return j;if(T[d].group.wd<=3)return j}}else if(1===s){if(!a)return j;if(T[f].color===c){if(T[d].group.wd<4)return j;if(O=T[b],O.color===i)return j;O.color===c&&(r.push(O),r.push(T[f]))}}else{if(!a)return j;if(T[f].color===c)return j;if(a>1)return M;if(1===T[y].group.wd||1===T[b].group.wd)return M}return C}if(3===s){if(u)return C;if(!a)return j;if(3===n.length)return C;if(T[d].group===T[g].group){if(T[x].color===c)return j}else if(T[m].color===c)return j;return C}if(2===s){if(T[v].group===T[g].group)return a||T[m].color===e&&T[b].color===e?C:j;if(T[f].color===i){if(4===h)return j;if(3===h){if(!a)return j;if(1===a){if(T[d].color===e)return j;if(T[k].color!==e||T[k].group.wd<3)return j}}else if(2===h)if(T[b].color===i){if(!a)return j;if(1===a&&T[d].color===e)return j}else if(T[y].color===i){if(a)return C;if(T[m].color!==e||T[b].color!==e)return j;r.push(T[d]),r.push(T[v]),T[m].color!==e&&r.push(T[m]),T[b].color!==e&&r.push(T[b])}else{if(a)return C;if(T[y].color!==e||T[b].color!==e)return j;r.push(T[d]),r.push(T[v]),T[y].color!==e&&r.push(T[y]),T[b].color!==e&&r.push(T[b])}else{if(1!==h)return a?C:T[d].ng()||T[v].ng()?j:T[S].ng()&&(L=T[v],0===this.Ng[e][L.yd][L.xd])?j:T[k].ng()&&(E=T[d],0===this.Ng[e][E.yd][E.xd])?j:(T[d].qg(e)<3&&r.push(T[d]),T[v].qg(e)<3&&r.push(T[v]),C);if(!a)return j}}else if(3===h){if(2===n.length)return j;if(T[x].color===c){if(T[k].color!==e||T[w].color!==e)return j;if(2>a)return j}else r.push(T[f]),r.push(T[d])}else if(2===h)if(T[x].color===c){if(T[y].color!==i)return j;if(0===a)return j;if(2===n.length)return T[g].group!==T[v].group?j:T[d].color===c?M:T[b].color===c?(r.push(T[f]),C):M;T[d].color===c&&r.push(T[d])}else{if(T[x].color===i){if(2===a)return M;var F=T[b].color===e,P=T[m].color===e;return 0===a?F||P?(r.push(T[f]),r.push(T[d]),C):j:(T[d].color!==c||P?T[f].color!==c||F||r.push(T[v]):r.push(T[d]),C)}if(T[y].color!==i){if(2===a)return C;if(0===a){if(T[y].color!==c)return C;r.push(T[y]),r.push(T[f]),r.push(T[d])}return C}if(a)return C;var R=T[k].color,z=T[w].color;if(T[v].group.wd>2&&R!==e)return j;T[b].color!==c||R===e&&z===e||r.push(T[b]),u||(r.push(T[f]),r.push(T[d]))}else if(1===h){if(T[y].color===i)return a||(r.push(T[f]),r.push(T[d])),C;if(T[x].color===c)return j;if(1===T[x].group.wd)return j;T[f].color===c&&r.push(T[f]),T[d].color===c&&r.push(T[d])}else{if(T[x].color===c)return j;if(!a){if(1===T[p].og())return j;r.push(T[f]),r.push(T[d])}}}else if(1===s)if(4===h){if(0===a)return j}else if(3===h){if(T[y].color!==i){if(T[v].color===c)return j}else if(T[v].color===c){if(T[S].color!==e)return j;if(T[y].group===T[b].group)return j;0===a?(r.push(T[d]),r.push(T[f]),r.push(T[v])):1===a&&T[d].color===e&&(r.push(T[f]),r.push(T[v]))}}else if(2===h){if(T[y].color===c&&T[v].color===c)return j}else a||(r.push(T[v]),T[x].color===c&&(r.push(T[f]),r.push(T[d]),T[S].color!==e&&r.push(T[x])));else if(4===h){if(0===a&&n.length<4)return j}else{if(3!==h)return T[m].color===i&&T[x].color===i?T[g].color===c?M:T[g].group.wd<=2?C:M:C;if(T[v].color===c&&T[x].group===T[m].group||T[g].color===c&&T[x].group===T[b].group)return j}return C},r.prototype.Kg=function(t,i,n){if(i!==this.color)return 0;a.debug;var r=this.Qg.Pg.Og(t);if(r.Rg(t)&&2===n.length){if(this.Qg.Sg)return.5;var e=this.Jg.Tg(n[0].ae);return e>0&&1>e?.5:0}return r.color!==i?0:this.Qg.Sg?-.5:-1},r.prototype.Ug=function(t,i){return[this.Qa.ed(t.xd,i.yd),this.Qa.ed(i.xd,t.yd)]},r.prototype.Vg=function(t,i,n){var r=Math.abs(i.xd-t.xd),e=Math.abs(i.yd-t.yd);if(r+e===1)return 0;var o,s=1-n,h=0;if(1===r&&1===e){var a=this.Ug(t,i),u=a[0],c=a[1];if(u.color===n||c.color===n)return 0;if(u.color===s&&h++,c.color===s&&h++,0===h)return 0;if(2===h)return 99;var l=u.color===s?0:1,p=a[l],f=a[1-l];return t.ng()||i.ng()?1===f.og()?p.group.wd>2?1:0:0!==f.qg(s)?1:0:1===f.og()?0!==f.qg(s)?1:0:1}if(r+e===2){if(o=this.Qa.ed((t.xd+i.xd)/2,(t.yd+i.yd)/2),o.color===n)return 0;if(o.color===s)return o.group.wd;for(var g=o.he.length-1;g>=0;g--)o.he[g].color===s&&h++;return h>=1?1:t.ng()&&i.ng()?0:.5}if(r+e===3&&t.ng()&&i.ng()){for(var d=this.betweenStones(t,i),v=0,y=d.length-1;y>=0;y--)o=d[y],o.color===s&&(v+=o.group.wd),0!==o.qg(s)&&(v+=1);return v}return r+e},r.prototype.Gg=function(t,i){for(var n=[],r=t.he.length-1;r>=0;r--){var e=t.he[r];switch(e.color){case c:n.push(e);break;case i:if(e.group.wd>1)return e;break;default:if(1===e.group.wd)return e.group.ie()[0].qd[0]}}for(var o=2,s=n.length-1;s>=0;s--)for(var h=n[s],a=h.he.length-1;a>=0;a--){var u=h.he[a];if(u!==t&&u.color===i&&0!==this.Jg.Tg(u.group.ae)){var l=this.Vg(t,u,i);if(!(l>=2)&&(o-=2-l,.5>=o))return u}}return null}},{"../../Move":17,"../../constants":46,"../../log":49,"../../test":52,"./DiamondZone":24,"./Heuristic":27,util:4}],24:[function(t,i,n){"use strict";function r(t,i){this.color=i,this.Lg=new Array(13);var n=t.xd,r=t.yd,e=t.Qa.Hc,o=t.Qa.cb,s=this.Lg,h=a.Fc;s[l]=t,s[p]=e[r+1][n],s[v]=e[r+1][n-1],s[y]=e[r+1][n+1],s[f]=e[r-1][n],s[b]=e[r-1][n-1],s[m]=e[r-1][n+1],s[g]=e[r][n-1],s[d]=e[r][n+1],s[k]=n>2?e[r][n-2]:h,s[S]=o-1>n?e[r][n+2]:h,s[w]=r>2?e[r-2][n]:h,s[x]=o-1>r?e[r+2][n]:h}function e(t){return t===u?j:M[t+1]}function o(t,i){for(var n="",r=0;r<i.length;r++){var o=i[r];n+="string"==typeof o?o:e(t[o].color)}return n}var s=t("../../constants"),h=t("../../Grid"),a=t("../../Stone"),u=s.Fc,c=s.EMPTY,l=s.sg,p=s.tg,f=s.ug,g=s.vg,d=s.wg,v=s.xg,y=s.yg,b=s.zg,m=s.Ag,x=s.Bg,w=s.Wg,k=s.Cg,S=s.Dg;i.g=r;var M=h.Cd+h.Ed,j="|";r.prototype.toString=function(){var t=this.Lg;return o(t,[" "," ",x," "," "])+"\n"+o(t,[" ",v,p,y," "])+"\n"+o(t,[k,g,"*",d,S])+"\n"+o(t,[" ",b,f,m," "])+"\n"+o(t,[" "," ",w," "," "])+"\n"},r.prototype.Xg=function(){var t,i=this.Lg;t=i[p],i[p]=i[f],i[f]=t,t=i[x],i[x]=i[w],i[w]=t,t=i[v],i[v]=i[b],i[b]=t,t=i[y],i[y]=i[m],i[m]=t},r.prototype.Yg=function(){var t,i=this.Lg;t=i[g],i[g]=i[d],i[d]=t,t=i[k],i[k]=i[S],i[S]=t,t=i[v],i[v]=i[y],i[y]=t,t=i[b],i[b]=i[m],i[m]=t},r.prototype.Zg=function(){var t,i=this.Lg;t=i[g],i[g]=i[f],i[f]=i[d],i[d]=i[p],i[p]=t,t=i[k],i[k]=i[w],i[w]=i[S],i[S]=i[x],i[x]=t,t=i[v],i[v]=i[b],i[b]=i[m],i[m]=i[y],i[y]=t},r.prototype.$g=function(){var t,i=this.Lg;t=i[g],i[g]=i[p],i[p]=i[d],i[d]=i[f],i[f]=t,t=i[k],i[k]=i[x],i[x]=i[S],i[S]=i[w],i[w]=t,t=i[v],i[v]=i[y],i[y]=i[m],i[m]=i[b],i[b]=t},r.prototype.normalize=function(){var t,i=this.color,n=this.Lg;if(n[l].ng()){n[p].color===u?this.Xg():n[g].color===u?this.$g():n[d].color===u&&this.Zg();var r=n[g].color===i,e=n[d].color===i;return void(r&&!e?this.Yg():r===e&&n[v].color===i&&n[y].color!==i&&this.Yg())}var o=!1,s=!0,h=!0,a=n[p].color===i?1:0,c=n[f].color===i?1:0,x=n[g].color===i?1:0,w=n[d].color===i?1:0;a>c?(this.Xg(),x>w&&this.Yg(),x!==w&&(o=!0)):c>a?(x>w&&this.Yg(),x!==w&&(o=!0)):c?x>w?this.$g():w>x?this.Zg():(s=!1,x&&(h=!1)):x>w?this.$g():w>x?this.Zg():(x?this.$g():h=!1,s=!1);var k=n[y].color===i?1:0,S=n[b].color===i?1:0;if(s&&o)n[p].color!==i&&n[g].color!==i&&k&&!S&&(this.Zg(),this.Yg());else{var M=n[v].color===i?1:0,j=n[m].color===i?1:0;s||(M+k>S+j?(this.Xg(),t=M,M=S,S=t,t=k,k=j,j=t):o||(o=!0,!h&&k>M&&j>S?this.Zg():!h&&M>k&&S>j?this.$g():o=!1)),!o&&(S>j||S===j&&M>k)&&this.Yg()}};var C=[v,p,y,g,l,d,b,f,m],q=["TL","TOP","TR","LEFT","CENTER","RIGHT","BL","BOTTOM","BR"];r.prototype.Mg=function(t,i){for(var n=this.Lg,r=this.color,e=1-r,o={},s=0,h=0,a=0;a<C.length;a++){var l=n[C[a]],p=i[a],f=l.color;switch(f===r&&(a%2?s++:h++),p){case"o":if(f===r)continue;break;case"A":case"B":case"C":case"D":if(f!==r)break;var g=o[p];if(g){if(g!==l.group)break}else o[p]=l.group;continue;case"*":case" ":if(f===c)continue;break;case".":if(f!==r)continue;break;case"x":if(f===e)continue;break;case"?":continue;case"-":if(f===u)continue}return p+"!="+f+" in "+q[a]+"\n"+this}var d=parseInt(t[0]),v=parseInt(t[1]);return s!==d?"numDirects="+s:isNaN(v)||h===v?!0:"numDiags="+h}},{"../../Grid":14,"../../Stone":22,"../../constants":46}],25:[function(t,i,n){"use strict";function r(t){e.call(this,t)}var e=t("./Heuristic"),o=t("util").inherits;o(r,e),i.g=r,r.prototype._g=function(){this.Qg.Pg.ah()}},{"./Heuristic":27,util:4}],26:[function(t,i,n){"use strict";function r(t){s.call(this,t),this.grid=new o(this.cb,a),this.bh=t.eh.dh}var e=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,a=e.Fc;h(r,s),i.g=r,r.prototype._g=function(){var t=this.Qa;this.Qg.Pg.fh(t,this.grid),this.gh()},r.prototype.gh=function(){var t=this.Qg.Pg.hh;for(var i in t)for(var n=~~i,r=t[n],e=r.group.color,o=r.ih.length-1;o>=0;o--){var s=r.ih[o];s.Rg&&this.bh.jh(s.kh,e)}}},{"../../Grid":14,"../../constants":46,"./Heuristic":27,util:4}],27:[function(t,i,n){"use strict";function r(t){this.Qg=t,this.nh(),this.Qa=t.Qa,this.cb=t.Qa.cb,this.oh=new o(this.cb,0,a),this.ph=t.ph,this.color=this.qh=null,this.rh()}var e=t("../../constants"),o=t("../../Grid"),s=t("../../log"),h=t("../../helper"),a=e.Fc,u=e.lh,c=e.mh;i.g=r,r.prototype.nh=function(){var t=this.constructor;this.name=t.name||h.sh(t),this.name.length<5&&(this.name+=this.Qg.th.length)},r.prototype.rh=function(){var t=this.Qg.eh;this.uh=t.vh,this.Jg=t.dh,this.Fg=t.wh?t.wh.oh.Ic:null,this.xh=t.yh,this.zh=t.Ah,this.Ng=t.Bh?t.Bh.Ng:null},r.prototype.Ch=function(t){this.color=t,this.qh=1-t},r.prototype._g=function(t,i){for(var n=s.level,r=this.Qg.color,e=this.oh.Ic,o=1;o<=this.cb;o++)for(var h=1;h<=this.cb;h++){var a=t[o][h];if(!(u>a)){a===c&&this.name===this.Qg.Dh&&s.Eh(s.Fh);var l=e[o][h]=this.Eg(h,o,r);i[o][h]+=l,a===c&&s.Eh(n)}}},r.prototype.Gh=function(t,i,n){var r=this.oh.Ic[i][t];r&&(n[this.name]=r)},r.prototype.Hh=function(t,i,n,r){return this.Qg.Ih.get(this.name+"-"+t,i,n,r)}},{"../../Grid":14,"../../constants":46,"../../helper":47,"../../log":49}],28:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.Jh=null}var e=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),a=t("../../Move"),u=(t("../../test"),a.Yd,a.La,e.EMPTY);s(r,o),i.g=r,r.prototype.Kh=function(t,i){for(var n=t.ie(),r=n.length-1;r>=0;r--){var e=n[r];if(!(e.wd>1)){var o=e.qd.length;if(o>=i)return!0;for(var s=e.ie(),h=s.length-1;h>=0;h--)if(o+=s[h].wd-1,o>=i)return!0}}return!1},r.prototype.Lh=function(t,i){for(var n=0,r=0,e=0,o=t.he.length-1;o>=0;o--){var s=t.he[o];switch(s.color){case u:e++;break;case i:e+=s.group.wd-1,n++;break;default:1===s.group.wd&&(r+=s.group.qd.length)}}switch(r){case 0:return!(1>=e);case 1:return e?!0:!n;default:return!0}},r.prototype.Mh=function(t,i,n,r){for(var e=!1,o=!1,s=1-i[0].color,h=i.length-1;h>=0;h--){var a=i[h];1===a.wd&&(o=!0,(!n||1===n&&r)&&this.Jg.Nh(t,s),n||(!this.Oh(a,n)||this.Kh(a,1)?this.Jg.Ph(a,t):this.Qg.Sg&&(e=!0)))}return e&&this.Jg.Qh(t),o},r.prototype.Rh=function(t,i,n){if(!i.rg(n))return!1;for(var r=i.vd(n.color),e=r.length-1;e>=0;e--){var o=r[e];if(o.wd>2)return!1;if(!t.rg(o))return!1}return!0},r.prototype.Sh=function(t,i,n,r,e,o){for(var s,a=!1,u=t.vd(r),c=i.length-1;c>=0;c--)if(s=i[c],2===s.wd&&!this.Kh(s,2)&&(0!==n.length||1!==u.length||2!==u[0].wd)){if(1===n.length&&0===u.length){if(!this.Rh(t,n[0],s))continue;a=!0,h.debug}e||!s.ae.Th()?o.push(s):h.debug}return a},r.prototype.Uh=function(t,i,n){return n&&i.wd===n.wd&&n.ee()?!(t.rg(n)&&n.ke(t)<1):!1},r.prototype.Vh=function(t,i,n,r){for(var e=!1,o=i.length-1;o>=0;o--){var s=i[o],h=s.wd,a=null;h>2&&this.Uh(t,s,a)?(n||this.Jg.Wh(s,t),e=!0):h>=2&&0===n&&!r&&(n||this.Jg.Xh(s,t))}return e},r.prototype.Yh=function(){this.Jh=[]},r.prototype.Eg=function(t,i,n){return this.Zh(t,i,n,0),0},r.prototype.Zh=function(t,i,n,r,e){var o=this.Qa.ed(t,i),s=o.vd(1-n);if(!s.length)return!1;var a=o.kg(),u=this.Mh(o,s,r,e),c=[],l=this.Sh(o,s,a,n,r,c),p=!1;if(0===r&&(l&&!u?(this.Jh.push(o),this.Fg[i][t]+=2):this.Fg[i][t]<-2&&(p=!0,this.Fg[i][t]-=1e3,h.debug)),!l&&a.length<=1&&!this.Lh(o,n))return!1;var f=this.Vh(o,s,r,p);if(!c.length)return u||f;this.Qa.jd(t,i,n);for(var g=[!1,!1,!1],d=c.length-1;d>=0;d--)if(h.debug,!this.Oh(c[d],r)){if(1===c.length){c.pop();break}g[d]=!0}this.Qa.md();var v=this.$h(o,c,g,r);return h.debug&&(u||f||v),u||f||v},r.prototype.$h=function(t,i,n,r){switch(i.length){case 0:return!1;case 1:return n[0]?!1:(r||this.Jg.Ph(i[0],t),!0);case 3:case 2:return r||(n[1]?this.Jg.Ph(i[0],t):this.Jg.Ph(i[1],t)),!0;default:throw new Error("Unexpected in Hunter#getMultipleChaseThreat")}},r.prototype.Oh=function(t,i){var n=t.ge();if(1!==n.length)throw new Error("Unexpected: hunter #1: "+n.length);var r=n[0],e=t.color,o=!0;return this.Lh(r,e)&&(this.Qa.jd(r.xd,r.yd,e),o=this._h(r,i),this.Qa.md()),h.debug,o},r.prototype.ai=function(t){for(var i=1-t.color,n=t.he,r=n.length-1;r>=0;r--){var e=n[r];if(e.color===i){var o=e.group;if(1===o.wd){var s=o.ge()[0];return s.rg(t.group)?this.Oh(o,1)?1:-1:1}}}return 0},r.prototype._h=function(t,i){var n=t.group;if(n.wd<=1)return!0;if(n.wd>2)return!1;var r=this.ai(t);if(0!==r)return 0>r;var e=t.kg();if(2!==e.length&&(e=n.ge()),2!==e.length)throw new Error("Unexpected: hunter #2");var o=e[0],s=e[1];h.debug;var a=1-n.color;return this.Zh(o.xd,o.yd,a,i+1)||this.Zh(s.xd,s.yd,a,i+1)},r.prototype.bi=function(t){return this._h(t,1)},r.prototype.ci=function(t,i,n){return this.Zh(t,i,n,1,n===this.qh)}},{"../../Move":17,"../../constants":46,"../../log":49,"../../test":52,"./Heuristic":27,util:4}],29:[function(t,i,n){"use strict";function r(t){s.call(this,t),this.di=[new o(this.cb,a),new o(this.cb,a)],this.Ng=[this.di[c].Ic,this.di[l].Ic]}var e=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,a=e.Fc,u=e.EMPTY,c=e.Ma,l=e.Na,p=2,f=1;h(r,s),i.g=r,r.prototype._g=function(){this.di[c].init(0),this.di[l].init(0);for(var t=1;t<=this.cb;t++)for(var i=1;i<=this.cb;i++){var n=this.Qa.ed(i,t),r=n.color;if(r!==u)for(var e,o=this.Ng[r],s=n.he,h=0;e=s[h],h<s.length;h++)if(o[e.yd][e.xd]+=p,e.color===u)for(var a,g=e.he,d=0;a=g[d],d<g.length;d++)a!==n&&(o[a.yd][a.xd]+=f)}}},{"../../Grid":14,"../../constants":46,"./Heuristic":27,util:4}],30:[function(t,i,n){"use strict";function r(t){h.call(this,t),this.debug=!1,this.grid=new s(this.cb,null),this.ei=[],this.fi="",this.gi=this.Hh("spaceInvasion",2,.01,4),this.hi=this.Hh("pressure",1,.01,2)}function e(){this.li=null,this.mi=[!1,!1],this.ni=0,this.oi=[],this.pi=[],this.qi=[]}function o(t,i,n){this.name=t,this.ni=i,this.group=n,this.ui=1/0}var s=t("../../Grid"),h=(t("./boan/GroupInfo"),t("./Heuristic")),a=t("util").inherits,u=t("../../log"),c=t("../../Move"),l=(t("../../test"),c.Yd),p=.1;a(r,h),i.g=r,r.prototype._g=function(){this.debug=this.Qg.ii,this.grid.init(null),this.ei.length=0},r.prototype.ji=function(t,i){h.prototype._g.call(this,t,i)},r.prototype.Eg=function(t,i){var n=this.grid.Ic[i][t];return n?n.ki():0},r.prototype.Gh=function(t,i,n){var r=this.grid.Ic[i][t];r&&r.ki(n,this.name)},e.prototype.ki=function(t,i){var n=this.ni;t&&n&&(t[i+"-base"]=n);var r=this.oi;if(!r.length)return n;for(var e=r.length-1;e>=0;e--){var o=r[e],s=o.ni*this.pi[e];if(n+=s,t){var h=this.pi[e],a=1!==h?" factor:"+h.toFixed(2):"";t[i+"-"+o+a]=s}}return n},r.prototype.ri=function(t,i){return this.grid.Ic[i][t]},r.prototype.si=function(t,i){
var n=this.grid.Ic[i][t];return n?n:(this.grid.Ic[i][t]=n=new e,n)},r.prototype.jh=function(t,i){u.debug,this.si(t.xd,t.yd).li=i},r.prototype.ti=function(t,i){var n=this.ri(t.xd,t.yd);return n&&n.li===i},r.prototype.Nh=function(t,i){this.si(t.xd,t.yd).mi[i]=!0},r.prototype.mi=function(t,i){var n=this.ri(t.xd,t.yd);return n&&n.mi[i]},o.prototype.toString=function(){return this.name+(this.ui!==1/0?" minMoves:"+this.ui:"")+" score:"+this.ni.toFixed(2)},r.prototype.vi=function(t,i,n){this.fi=t+" on "+i.toString(1),n.xd===this.Qg.wi&&n.yd===this.Qg.xi?u.Eh(u.Fh):u.level===u.Fh&&u.Eh(u.yi)},r.prototype.zi=function(t){var i=this.ei[t.Tc];if(i)return i;for(var n=2*t.qd.length,r=t.ge(),e=0,s=r.length-1;s>=0;s--)e+=r[s].pg();return n+=this.gi*Math.max(0,e-1),this.ei[t.Tc]=i=new o("life/death of "+t.toString(1),n,t),i},r.prototype.Ai=function(t,i,n,r){if(!i)throw new Error("Unexpected");n=n||1,r=r||1,u.debug;var e=this.si(i.xd,i.yd),o=e.oi,s=e.pi,h=e.qi,a=o.indexOf(t);return 0>a?(o.push(t),s.push(n),h.push(r)):(s[a]=Math.max(s[a],n),h[a]=Math.min(h[a],r)),t.ui=Math.min(t.ui,r),t},r.prototype.Tg=function(t){var i=t.Tg;if(void 0!==i)return i;var n,r=t.Bi;n=r?r.Ci:[t];var e=this.xh.Di(n);return i=t.Tg=this.Ei(e,t.group.color===this.Qg.Va)},r.prototype.Ei=function(t,i){return t>=2?1:1.5>t?0:i?1:.5},r.prototype.Fi=function(t,i,n,r,e,o){r=r||1;var s,h=t[0].group.color===this.Qg.Va,a=this.xh.Di(t),c=this.Ei(a,h);if(o){var l=this.Ei(a+o,!0);s=c-l,s=Math.min(2*s,1)}else s=1-c;if(r*=s,u.debug,p>r)return void u.debug;for(var f=e||0,g=t.length-1;g>=0;g--)f+=t[g].group.wd;for(g=t.length-1;g>=0;g--)this.Hi(t[g].group,i,n,r,f)},r.prototype.Hi=function(t,i,n,r,e){if(!(p>r)){var o=this.zi(t);return n||this.Ii(t,i,r,e),this.Ai(o,i,r,e)}},r.prototype.Ii=function(t,i,n,r){if(!(1===t.qd.length&&t.qd[0].lg()||0===i.pg()&&t.qd.length<3)){r=r||1;for(var e=t.ie(),o=e.length-1;o>=0;o--){var s=e[o];s.wd===r&&(this.Hi(s,i,!0,n,r),this.Ji(s,i,n,r))}}},r.prototype.Ji=function(t,i,n,r){for(var e=t.ae.Ki(i),o=e.length-1;o>=0;o--)this.Fi(e[o],i,!0,n,r)},r.prototype.Xh=function(t,i){var n=1/(t.wd+1)*this.hi;if(this.Tg(t.ae)<.5){if(!this.Qg.Sg)return 0;n=this.ph}this.si(i.xd,i.yd).ni+=n,this.debug&&i.xd===this.Qg.wi&&i.yd===this.Qg.xi&&u.Tf("MoveInfo "+l(1-t.color)+" - pressure at "+i+": "+n.toFixed(2))},r.prototype.Qh=function(t){this.si(t.xd,t.yd).ni+=this.ph},r.prototype.Wh=function(t,i){this.debug&&this.vi("race",t,i);var n=t.ae,r=n.Bi?n.Bi.Ci:[n];this.Fi(r,i,!1)},r.prototype.Li=function(t,i,n,r){this.debug&&this.vi("eye threat",t,i);var e=t.ae,o=e.Bi?e.Bi.Ci:[e];return this.Fi(o,i,n===t.color,void 0,void 0,-r),!0},r.prototype.Ig=function(t,i,n,r){var e=t[0];this.debug&&this.vi("cut",e,i);for(var o=r===e.color,s=e.ae.Mi(t,i),h=s.length-1;h>=0;h--)this.Fi(s[h],n,o,void 0,1)},r.prototype.Ph=function(t,i){this.debug&&this.vi("kill",t,i);for(var n=t.ae.Ki(i),r=n.length-1;r>=0;r--)this.Fi(n[r],i,!1);this.Hi(t,i,!1,1,t.wd)},r.prototype.Ni=function(t,i){this.debug&&this.vi("rescue",t,i),this.Ji(t,i),this.Hi(t,i,!0)}},{"../../Grid":14,"../../Move":17,"../../log":49,"../../test":52,"./Heuristic":27,"./boan/GroupInfo":41,util:4}],31:[function(t,i,n){"use strict";function r(t){e.call(this,t),this.Oi=null}var e=t("./Heuristic"),o=t("util").inherits,s=t("../../log"),h=t("../../Move"),a=h.La;o(r,e),i.g=r,r.prototype.Yh=function(){this.Oi||(this.Oi=this.Qg.eh.Pi)},r.prototype.Eg=function(t,i,n){if(this.Ng[1-n][i][t]<2&&this.Ng[n][i][t]<2&&0===this.Qa.ed(t,i).qg(n))return 0;var r,e=this.Qa.jd(t,i,n),o=e.group,h=0;return s.debug&&(r=a(t,i)),1===o.wd?1===o.qd.length&&e.kg()[0].dd(this.qh)?s.debug:(h-=2*o.qd.length,s.debug):2===o.wd&&(s.debug,this.Oi.bi(e)&&(h-=2*o.qd.length,s.debug)),this.Qa.md(),h}},{"../../Move":17,"../../log":49,"./Heuristic":27,util:4}],32:[function(t,i,n){"use strict";function r(t){s.call(this,t),this.Ui=[new o(this.cb,u),new o(this.cb,u)],this.Vi=this.Hh("wideSpaceToEye",.7,.01,1),this.Wi=this.Hh("stoneCountToEye",.33,.25,1)}var e=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,a=t("../../log"),u=e.Fc,c=e.Qi,l=e.Ri,p=e.EMPTY,f=e.Ma,g=e.Na,d=e.Si,v=e.Ti;h(r,s),i.g=r,r.prototype._g=function(){this.Xi()},r.prototype.Xi=function(){this.Ui[d].init(p),this.Ui[v].init(p);for(var t=this.cb;t>=1;t--)for(var i=this.cb;i>=1;i--){var n=this.Qa.ed(i,t);if(n.color===p){var r=this.Yi(i,t,n);if(null!==r){var e=this.Qg.Pg.Og(n);if(!e.Zi&&!this.Jg.ti(n,r)){for(var o=n.he,s=null,h=this.Ng[1-r],u=1,f=o.length-1;f>=0;f--){var g=o[f];g.color===r&&(s=g.group),1!==u||g.ng()||0!==h[g.yd][g.xd]||g.pg()!==g.he.length||(u=2)}if(!s){if(!n.lg())continue;if(s=n.mg().group,!s)continue}if(n.ng()){for(var y=!1,b=1-r,m=l;m>=c;m-=2){var x=n.gg[m];if(x.color===b){y=!0;break}}if(y)continue}var w=(i+t)%2,k=this.Ui[w].Ic;k[t][i]=r,s.ae.$i(w,u),a.debug}}}}},r.prototype._i=function(t,i){var n=t.xd,r=t.yd,e=(n+r)%2;return this.Ui[e].Ic[r][n]===i},r.prototype.Yi=function(t,i,n){var r=this.Ng[f][i][t],e=this.Ng[g][i][t],o=r>e?f:g,s=Math.max(r,e),h=Math.min(r,e);if(h>1)return null;var a=0,u=this.cb;return 1===h&&n.lg()&&n.mg().color===p&&a++,1!==t&&t!==u&&1!==i&&i!==u||a++,0>s+a-3-h?null:o},r.prototype.aj=function(t){for(var i=0,n=t.color,r=this.Ng[1-n],e=this.Ng[n],o=t.qd,s=o.length-1;s>=0;s--){var h=o[s];if(!h.ng())for(var a=h.gg.length-1;a>=0;a--){var u=h.gg[a];if(u.color===p&&!(e[u.yd][u.xd]>4)){var c=r[u.yd][u.xd];if(!(c>1)){var l=u.og();if(0!==l)if(1!==l){var f=u.xd-h.xd,g=u.yd-h.yd,d=u.xd+f,v=u.yd+g;0===r[v][d]&&i++}else{if(c>0)continue;i++}}}}}return i},r.prototype.Di=function(t){for(var i=0,n=0,r=t.length-1;r>=0;r--){var e=t[r];i+=e.bj(),n+=e.group.qd.length}6>n&&(i=Math.min(i,n*this.Wi));var o=0;for(r=t.length-1;r>=0;r--)o+=this.aj(t[r].group);return i+=o*this.Vi}},{"../../Grid":14,"../../constants":46,"../../log":49,"./Heuristic":27,util:4}],33:[function(t,i,n){"use strict";function r(t){h.call(this,t),this.ej=new s(this.cb,p),this.fj=this.ej.Ic,this.gj=new s(this.cb,p),this.di=[new s(this.cb,p),new s(this.cb,p)],this.hj=new s(this.cb,p),this.ij()}function e(t,i,n){switch(t){case y:return[i,1];case b:return[1,i];case m:return[i,n];case x:return[n,i]}}var o=t("../../constants"),s=t("../../Grid"),h=t("./Heuristic"),a=t("util").inherits,u=t("../../log"),c=t("../../Move"),l=t("../../Stone"),p=(c.Yd,o.Fc),f=o.EMPTY,g=o.Ma,d=o.Na,v=o.NEVER,y=o.cj,b=o.wg,m=o.dj,x=o.vg,w=o.eg,k=o.fg,S=s.Od,M=l.hg,j=l.ig;a(r,h),i.g=r,r.prototype._g=function(){this.ej.Qd(this.Qa),this.jj(g),this.jj(d),this.kj()},r.prototype.lj=function(t,i,n){var r=n===g?-1:1,e=v;return s.Od[2+this.di[g].Ic[i][t]]===r&&e++,s.Od[2+this.di[d].Ic[i][t]]===r&&e++,e},r.prototype.mj=function(t,i,n){return this.hj.Ic[i][t]*(n===g?1:-1)},r.prototype.nj=function(t,i,n){var r=s.Od[2+this.di[1-n].Ic[i][t]];return r*(n===g?1:-1)},r.prototype.toString=function(){return"\nBLACK first:\n"+this.di[g]+"WHITE first:\n"+this.di[d]},r.prototype.oj=function(){this.ej.Qd(this.Qa);var t=this.di[g];this.pj(this.ej,t.K(this.ej)),this.qj(t.Ic,d),this.qj(t.Ic,g);var i=this.Qg.Pg;return i.Bf(this.Qa),[i.Af().Ic,i.Cf()]},r.prototype.pj=function(t,i){for(var n=t.Ic,r=i.Ic,e=~~(2*Math.random()),o=this.cb;o>=1;o--)for(var s=n[o],h=this.cb;h>=1;h--)s[h]===f&&(this.rj(n,r,h,o,e,1-e)?(this.sj(r,h,o,e),e=1-e):this.rj(n,r,h,o,1-e,e)&&this.sj(r,h,o,1-e))},r.prototype.tj=function(t){return this.di[t].Vc(function(t){return"@?O"[s.Od[2+t]+1]})},r.prototype.uj=function(t){for(t=this.Qa.Cb()-t;t-- >0;)this.Qa.md()},r.prototype.jj=function(t){var i=this.Qa.Cb(),n=this.di[t];this.vj(n,t),this.Qg.Pg.wj(this.Qa,n,t),this.uj(i)},r.prototype.kj=function(){for(var t=this.di[g].Ic,i=this.di[d].Ic,n=this.hj.Ic,r=this.cb;r>=1;r--)for(var e=this.cb;e>=1;e--)n[r][e]=(S[2+t[r][e]]+S[2+i[r][e]])/2;u.debug},r.prototype.vj=function(t,i){this.xj=null,this.yj(this.ej,t.K(this.ej),i),u.debug,this.qj(t.Ic,i),u.debug,this.zj(this.gj.K(t)),this.xj=this.gj.Ic,u.debug,this.yj(this.ej,t.K(this.ej),i),u.debug,this.qj(t.Ic,i),u.debug},r.prototype.yj=function(t,i,n){u.debug;for(var r=t.Ic,e=i.Ic,o=this.cb;o>=1;o--)for(var s=r[o],h=this.cb;h>=1;h--)s[h]===f&&this.rj(r,e,h,o,n,1-n)&&this.sj(e,h,o,n)},r.prototype.zj=function(t){for(var i=t.Ic,n=1;n<=this.cb;n++)for(var r=1;r<=this.cb;r++)if(this.fj[n][r]===f){var e=i[n][r];if(e!==f){var o=this.Aj(i,r,n,1-e);0===o&&(i[n][r]=f)}}},r.prototype.rj=function(t,i,n,r,e,o){switch(this.Aj(t,n,r,e)){case 0:if(!this.Bj(t,n,r,e))return!1;break;case 4:return!1;case 3:if(0===this.Aj(t,n,r,o))return!1}return!0},r.prototype.sj=function(t,i,n,r,e){if(this.xj){if(!e&&this.xj[n][i]===f)return;var o=this.Qa.ed(i,n);if(o.$c(r))return;this.Qa.jd(i,n,r)}t[n][i]=r},r.prototype.Aj=function(t,i,n,r){for(var e=0,o=w;k>=o;o++){var s=M[o];t[n+s[1]][i+s[0]]===r&&e++}return e},r.prototype.Bj=function(t,i,n,r){for(var e=w;k>=e;e++){var o=j[e];if(t[n+o[1]][i+o[0]]===r)return!0}return!1},r.prototype.ij=function(){for(var t=[],i=w;k>=i;i++)for(var n=M[i][0],r=M[i][1],o=this.cb-1;o>=2;o--){var s=e(i,o,this.cb);t.push([s[0],s[1],n,r])}this.Cj=t},r.prototype.qj=function(t,i){for(var n,r,e,o,s,h,a=this.Cj,u=a.length-1;u>=0;u--){var c=a[u],l=c[0],p=c[1];if(t[p][l]===f){var g=c[2],d=c[3],v=l+g,y=p+d,b=t[y][v];if(b===f){var m=v+g,x=y+d;if(b=t[x][m],b===f){var w=m+g,k=x+d;if(b=t[k][w],b===f);else{if(b!==i)continue;if(n=t[p-g][l-d],r=t[p+g][l+d],e=t[y-g][v-d],o=t[y+g][v+d],s=t[x-g][m-d],h=t[x+g][m+d],n===b&&e===b&&s===b)continue;if(r===b&&o===b&&h===b)continue;if(this.sj(t,m,x,b,!0),n===b&&e===b)continue;if(r===b&&o===b)continue;if(this.sj(t,v,y,b,!0),n===b||r===b)continue;this.sj(t,l,p,b,!0)}}else{if(b!==i)continue;if(n=t[p-g][l-d],r=t[p+g][l+d],e=t[y-g][v-d],o=t[y+g][v+d],n!==1-b&&e===b)continue;if(r!==1-b&&o===b)continue;if(this.sj(t,v,y,b,!0),n===b||r===b)continue;this.sj(t,l,p,b,!0)}}else{if(b!==i)continue;if(n=t[p-g][l-d],r=t[p+g][l+d],e=t[y-g][v-d],o=t[y+g][v+d],n===b&&e!==1-b)continue;if(r===b&&o!==1-b)continue;this.sj(t,l,p,b,!0)}}}}},{"../../Grid":14,"../../Move":17,"../../Stone":22,"../../constants":46,"../../log":49,"./Heuristic":27,util:4}],34:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.Dj=[],this.Ej=this.Hh("allyInfl",.03,.01,1),this.Fj=this.Hh("enemyInfl",.13,.01,1)}var e=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),a=t("../../Move"),u=t("../../Stone"),c=(a.Yd,a.La,e.EMPTY),l=u.hg,p=e.eg,f=e.fg;s(r,o),i.g=r,r.prototype._g=function(t,i){var n=this.Dj;n.length=0,o.prototype._g.call(this,t,i);for(var r=n.length-1;r>=0;r--)this.Gj(n[r],i)},r.prototype.Eg=function(t,i,n){return this.Hj(t,i,1-n,!0),this.Hj(t,i,n)},r.prototype.Ij=function(t,i,n,r,e){if(!(this.Fg[t.yd][t.xd]<0)){var o=1-n.group.color,s=this.uh.Gg(t,o);s&&(this.Jg.Tg(s.group.ae)<.5||(h.debug,e[t.yd][t.xd]+=r,this.oh.Ic[t.yd][t.xd]+=r))}},r.prototype.Gj=function(t,i){var n=t[0],r=t[1],e=t[2];if(this.Ij(n,n,r,e,i),!this.Jg.mi(n,r.color)){var o=r.group;if(!n.rg(o))for(var s=0;8>s;s++){var h=n.gg[s];h.color===c&&h.rg(o)&&this.Ij(h,n,r,e,i)}}},r.prototype.Hj=function(t,i,n,r){var e=this.Ng[1-n][i][t];if(0===e)return 0;var o=this.Ng[n][i][t];if(o>=4)return 0;if(!r&&this.Fg[i][t]<0)return 0;var s=this.Qa.ed(t,i);if(0===s.pg())return 0;var a=this.uh.Gg(s,n);if(!a)return 0;if(!r&&!this.uh.Gg(s,1-n))return 0;var u=this.Jj(t,i,n),c=u+this.Fj*e-this.Ej*o;return c*=this.Jg.Tg(a.group.ae),r?c?(h.debug,this.Dj.push([s,a,c])):0:(h.debug,c)},r.prototype.Kj=function(t,i,n,r,e){var o=this.Qa.ed(t,i);if(o.color!==c)return 0;var s=this.zh.nj(t,i,r);if(o.ng()&&(s/=2),0>=s)return 0;if(0===--e)return s;var h=l[n][0],a=l[n][1],u=l[(n+3)%4],p=u[0],f=u[1];return s+=this.Kj(t+h+p,i+a+f,n,r,e),s+=this.Kj(t+h-p,i+a-f,n,r,e)};var g=1;r.prototype.Jj=function(t,i,n){for(var r=Math.max(0,this.zh.nj(t,i,n)),e=p;f>=e;e++)r+=this.Kj(t+l[e][0],i+l[e][1],e,n,g);var o=this.Qa.ed(t,i);return o.lg()?r=Math.max(r-1,0):o.ng()&&(r=Math.max(r-.85,0)),r}},{"../../Move":17,"../../Stone":22,"../../constants":46,"../../log":49,"./Heuristic":27,util:4}],35:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.Oi=null}var e=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),a=t("../../Move"),u=(a.Yd,e.EMPTY),c=e.Fc;s(r,o),i.g=r,r.prototype.Yh=function(){this.Oi||(this.Oi=this.Qg.eh.Pi)},r.prototype.Eg=function(t,i){var n=this.Qa.ed(t,i);return this.Lj(t,i,n),0},r.prototype.Lj=function(t,i,n){for(var r,e,o=[],s=this.color,a=n.vd(s),u=0;e=a[u],u<a.length;u++)1===e.wd?o.push(e):2===e.wd&&o.push(e);if(o.length&&(h.debug,this.Oi.ci(t,i,this.qh))){this.Qa.jd(t,i,s),h.debug;var c=!this.Oi.bi(n);this.Qa.md();var l;if(!c){for(r=o.length-1;r>=0;r--)if(e=o[r],1!==e.wd){var p=e.ge();if(l=p[0]===n?p[1]:p[0],this.Qa.jd(l.xd,l.yd,s),c=!this.Oi.bi(l),this.Qa.md(),c)break}if(!c)return void h.debug;n=l}for(r=o.length-1;r>=0;r--)e=o[r],l&&1===e.wd||(this.Jg.Ni(e,n),h.debug)}},r.prototype.Mj=function(t,i,n){var r=0,e=0,o=this.cb;if(1===i||i===o)e=1;else{if(1!==n&&n!==o)throw new Error("not along border");r=1}var s=e,h=r;if(this.Qa.ed(i+s,n+h).color===c&&(s=-s,h=-h),this.Qa.ed(i+s,n+h).group!==t){var a=t.color,l=this.Qa.ed(i+r,n+e);for(l.group===t&&(r=-r,e=-e);;)switch(i+=r,n+=e,l=this.Qa.ed(i,n),l.color){case c:return null;case a:return l.group.wd>2?l.group:null;case u:var p=this.Qa.ed(i+s,n+h);if(p.color===u)continue;return p.color===1-a?null:p.group.wd>2?p.group:null;default:return null}}}},{"../../Move":17,"../../constants":46,"../../log":49,"./Heuristic":27,util:4}],36:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.Ui=t.eh.yh.Ui}var e=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),a=t("../../Move"),u=(a.Yd,e.EMPTY),c=e.NEVER,l=e.Nj,p=e.Si,f=e.Ti;s(r,o),i.g=r,r.prototype._g=function(t,i){o.prototype._g.call(this,t,i);var n=this.Qg.Pg.hh;for(var r in n){var e=n[~~r].group;this.Oj(i,e)}},r.prototype.Oj=function(t,i){var n=[],r=i.ae.Pj(n);if(r===l){var e=this.Qa.ed(n[0],n[1]);h.debug,this.Jg.Li(i,e,this.color,.5)}},r.prototype.Eg=function(t,i,n){var r=this.Qa.ed(t,i);return this.Qj(r,n),this.Qj(r,1-n),this.Rj(r,n)},r.prototype.Qj=function(t,i){if(this.zh.lj(t.xd,t.yd,i)!==c){var n=this.Qg.Pg.Og(t);n.Zi&&n.color===i?this.Sj(t,i,n):this.Tj(t,i)}},r.prototype.Sj=function(t,i,n){switch(n.Uj){case 1:for(var r=t.he.length-1;r>=0;r--){var e=t.he[r];if(e.color===i&&1===e.group.wd)return h.debug,this.Jg.Li(e.group,t,i,1)}return;case 2:var o=n.Zi;if(this.Jg.ti(t,i))return this.Jg.Li(o.group,t,i,1);if(o.Vj>1)return;var s=o.Wj.length&&o.Wj[0].group;if(s&&t.rg(s)&&(1===s.wd||!t.lg()))return this.Jg.Li(o.group,t,i,1);return;default:return}},r.prototype.Tj=function(t,i){if(!(this.Fg[t.yd][t.xd]<0)&&this.uh.Gg(t,1-i)){for(var n=this.Ui[p].Ic,r=this.Ui[f].Ic,e=this.Ng[1-i],o=null,s=null,h=0,a=t.he.length-1;a>=0;a--){var c=t.he[a];switch(c.color){case u:var l=c.xd,g=c.yd;if(n[g][l]===i||r[g][l]===i){if(1===e[g][l]&&2!==e[t.yd][t.xd])continue;o=c,h++,o.lg()&&2===o.pg()&&h++}break;case i:s||(s=c.group)}}o&&(s||(s=o.vd(i)[0]),this.Jg.Li(s,t,i,h/2))}},r.prototype.Rj=function(t,i){var n,r=t.kg(),e=r.length,o=this.Qg.Pg.Og(t);if(o.Zi&&o.color===i){if(0===e)return-1;if(1===e)return this.xh._i(r[0],i)?0:-1;if(1===this.Jg.Tg(o.Zi))return 0;var s=t.qg(i);if(3===e&&1===s)return.5;for(n=e-1;n>=0;n--){var h=r[n];if(!this.Jg.ti(h,i)&&1===h.pg())return.5}}else{r=t.kg();var a=!1;for(n=e-1;n>=0&&!a;n--)a=this.xh._i(r[n],i);if(!a)return 0;if(t.lg())return-1;if(t.ng())return-.2;if(e>=3&&!this.Ng[1-i][t.yd][t.xd])return 1}return 0}},{"../../Move":17,"../../constants":46,"../../log":49,"./Heuristic":27,util:4}],37:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.Xj=this.Hh("enemyInfl",.07,.01,.5),this.Yj=this.Hh("allyInfl",.5,.01,.5),this.Zj=this.Hh("border",10,0,20),this.$j=this.cb<=9?[0,.2,.8,.95,1]:[0,.2,.8,1,.95,.8]}var e=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=e.EMPTY;s(r,o),i.g=r,r.prototype.Eg=function(t,i){var n=0;if(!this.Qg.Sg){var r=this.zh.mj(t,i,this.color);0>r&&(n+=r)}for(var e=this.Qa.ed(t,i),o=this.Ng[this.qh],s=this.Ng[this.color],a=o[i][t],u=s[i][t],c=e.he.length-1;c>=0;c--){var l=e.he[c];if(l.color!==h)return n;a+=o[l.yd][l.xd],u+=s[l.yd][l.xd]}var p=1+this.cb/9*(this.Xj*Math.max(a-3,0)+this.Yj*Math.max(u-3,0)),f=this.$j.length-1,g=Math.min(this.og(t),f),d=Math.min(this.og(i),f),v=this.$j[g]*this.$j[d]*this.Zj;return n+v/p},r.prototype.og=function(t){return Math.min(t-1,this.cb-t)}},{"../../constants":46,"./Heuristic":27,util:4}],38:[function(t,i,n){"use strict";function r(t){this._j=t.group.Tc,this.Ci=[t],t.Bi=this}function e(t){return"#"+t.group.Tc}var o=t("../../../log");i.g=r,r.prototype.toString=function(){return this.Ci.map(e).toString()},r.prototype.ak=function(t){if(!t.Bi)return o.debug,this.Ci.push(t),void(t.Bi=this);if(t.Bi._j!==this._j){o.debug;for(var i=t.Bi.Ci,n=i.length-1;n>=0;n--)this.Ci.push(i[n]),i[n].Bi=this}},r.prototype.remove=function(t){var i=this.Ci.indexOf(t);if(0>i)throw new Error("Band.remove on wrong Band");this.Ci.splice(i,1),t.Bi=null,o.debug},r.bk=function(t){if(1===t.length)throw new Error("add Band of 1");for(var i=null,n=0;n<t.length;n++)if(t[n].ae.Bi){i=t[n].ae.Bi;break}var e=0;for(i||(i=new r(t[e++].ae)),n=e;n<t.length;n++)i.ak(t[n].ae)}},{"../../../log":49}],39:[function(t,i,n){"use strict";function r(t){this.Fb=t,this.version="chuckie",this.mode=null,this.Sg=!1,this.Qa=null,this.fk=null,this.oh=null,this.gk=[],this.hh=null,this.hk=[0,0],this.ik=[0,0],this.jk=null}function e(t){return t>1&&2>t?t-1:t}function o(t){return t[b]===t[m]||t[b]>=x&&t[m]>=x?void 0:(t[b]=e(t[b]),t[m]=e(t[m]),t[b]>t[m]?b:m)}function s(t,i){for(var n=0;n<i.length;n++){var r=i[n];p.debug,r.Gk()!==w&&(i[n]=null)}var e=0;for(n=0;n<i.length;n++)i[n]&&(i[n].Hk(t.name+": liveliness="+i[n].Ik.toFixed(4)),e++);return e}function h(t,i){for(var n=0;n<i.length;n++)i[n].Hk(t.name);return i.length}function a(){return 0}var u=t("../../../constants"),c=t("../../../Grid"),l=t("./GroupInfo"),p=t("../../../log"),f=t("../../../Move"),g=t("./Void"),d=t("./ZoneFiller"),v=(f.Yd,u.EMPTY),y=u.Fc,b=u.Ma,m=u.Na,x=l.ck,w=l.dk,k=l.ek,S=0,M=1,j=2;i.g=r,r.prototype.Bf=function(t){p.debug,this.hk[b]=this.hk[m]=0,this.ik[b]=this.ik[m]=0,this.oh&&this.oh.cb===t.cb||(this.oh=new c(t.cb,y)),this.kk(S,t,this.oh)&&(this.lk(),this.Sg||t.pd(this.ik))},r.prototype.Af=function(){return this.oh},r.prototype.Cf=function(){var t=this.hk,i=this.ik,n=this.Fb.Ua,r=[t[b]+i[m],t[m]+i[b]+n],e=[[t[b],i[m],0],[t[m],i[b],n]];return[r,e]},r.prototype.Og=function(t){return this.fk.Ic[t.yd][t.xd]},r.prototype.fh=function(t,i){this.kk(j,t,i)},r.prototype.ah=function(){this.lk()},r.prototype.wj=function(t,i,n){this.kk(M,t,i)&&this.lk(n)},r.prototype.Uc=function(){return this.fk.Uc()},r.prototype.Yc=function(){for(var t,i="Grid:\n"+this.fk.Zc()+"Voids:\n",n=this.gk,r=0;t=n[r],r<n.length;r++)i+=t.toString()+"\n";i+="Groups:\n";for(var e in this.hh)i+=this.hh[~~e].toString()+"\n";return this.hk&&(i+="Score:"+this.hk.map(function(t,i){return" player "+i+": "+t+" points"})),i},r.prototype.kk=function(t,i,n){return this.mode=t,this.Sg=this.Fb.xa&&t===S,this.Qa=i,this.fk=n,this.jk=new d(i,n),0===i.Cb()?!1:(n.Qd(i),this.mk(),this.nk(),this.pk(),!0)},r.prototype.lk=function(t){this.mode===j?this.qk():(this.rk(),this.qk(t),this.sk(),this.tk())},r.prototype.uk=function(t,i){var n=this.hh[t.Tc];n||(t.ae&&t.ae.Pg===this?t.ae.vk():t.ae=new l(t,this),n=this.hh[t.Tc]=t.ae),n.wk.push(i)},r.prototype.mk=function(){p.debug;var t=c.Jd;this.hh={},this.gk.length=0;for(var i,n,r=this.Qa,e=new g(r,t++),o=1;o<=r.cb;o++)for(var s=1;s<=r.cb;s++){var h=this.jk.xk(s,o,v,e);if(0!==h){this.gk.push(e);for(var a=b;m>=a;a++)for(n=e.yk[a],i=n.length-1;i>=0;i--)this.uk(n[i],e);e=new g(r,t++)}}},r.prototype.nk=function(){for(var t in this.hh)this.hh[~~t].zk()},r.prototype.pk=function(){p.debug;for(var t=this.gk,i=t.length,n=i-1;n>=0;n--)t[n].Ak();for(var r;;){for(r=!1,n=i-1;n>=0;n--)t[n].Bk()&&(r=!0);if(!r)break}for(n=i-1;n>=0;n--)t[n].Ck()},r.prototype.rk=function(){if(!this.Sg){var t=this.Qa;if(!(t.Cb()<2*t.cb))for(var i=[0,0],n=[0,0];;){for(var r=!1,e=this.gk.length-1;e>=0;e--){var s=this.gk[e];if(void 0===s.color&&!(s.Uj>2*t.cb)){i[b]=i[m]=n[b]=n[m]=0;for(var h=b;m>=h;h++)for(var a=s.yk[h].length-1;a>=0;a--){var u=s.yk[h][a].ae;i[h]+=u.Dk(),n[h]+=u.Ek()}if(!(n[b]>4&&n[m]>4)){var c=o(i);void 0!==c?(p.debug,s.Fk(c),r=!0):p.debug}}}if(!r)break}}};var C={name:"brothers",l:l.prototype.Jk},q={name:"singleEye",l:l.prototype.Kk,Lk:s},I={name:"race",l:l.prototype.Gk,Lk:a},B={name:"atari",l:l.prototype.Mk},D={name:"final",l:l.prototype.Nk},G=[];G[S]=[C,B,q,I,D],G[M]=[C,q],G[j]=[C,q,I],r.prototype.Ok=function(t,i){p.debug;var n=0,r=0,e=[];for(var o in this.hh){var s=this.hh[~~o];if(!s.Pk&&!s.Qk)switch(r++,t.l.call(s,i)){case w:e.push(s);break;case k:n++}}return e.length&&(n+=t.Lk?t.Lk(t,e):h(t,e)),p.debug&&n,n===r?0:0===n?r:-n},r.prototype.qk=function(t){if(!this.Sg){for(var i,n=G[this.mode],r=0;r<n.length;){if(i=this.Ok(n[r++],t),0===i)return void this.pk();0>i&&(r=0,this.pk())}p.debug&&i>0}},r.prototype.sk=function(){for(var t=[],i=this.gk.length-1;i>=0;i--){var n=this.gk[i];t[b]=t[m]=!1;for(var r=b;m>=r;r++)for(var e,o=n.yk[r],s=0;e=o[s],s<o.length;s++)if(this.Sg||e.ae.Dk()>=2){t[r]=!0;break}t[b]&&t[m]?n.Rk():this.Sg&&(n.color=t[b]?b:m)}},r.prototype.tk=function(){this.Sk(),this.Tk(),this.Uk()},r.prototype.Sk=function(){if(this.Sg)for(var t in this.hh){var i=this.hh[~~t].group;this.hk[i.color]+=i.qd.length}},r.prototype.Tk=function(){if(!this.Sg)for(var t in this.hh){var i=this.hh[~~t];if(i.Qk){for(var n=!1,r=i.Vk.length-1;r>=0;r--)if(!i.Vk[r].ae.Qk){n=!0;break}var e=i.group.color;if(!i.Vk.length||n){var o=i.group.qd[0],s=this.jk.xk(o.xd,o.yd,e,c.Md+e);this.ik[e]+=s,this.hk[1-e]+=s}else for(var h=i.wk.length-1;h>=0;h--)i.wk[h].Fk(e)}}},r.prototype.Uk=function(){for(var t=this.fk.Ic,i=[],n=this.gk.length-1;n>=0;n--){var r=this.gk[n],e=r.Wk(this.Sg?null:i);if(e){this.hk[r.color]+=e-i.length,this.jk.xk(r.xd,r.yd,r,c.Nd+r.color);for(var o=i.length-1;o>=0;o--){var s=i[o];t[s.yd][s.xd]=c.Ld}}else this.jk.xk(r.xd,r.yd,r,c.Ld)}}},{"../../../Grid":14,"../../../Move":17,"../../../constants":46,"../../../log":49,"./GroupInfo":41,"./Void":42,"./ZoneFiller":43}],40:[function(t,i,n){"use strict";function r(t,i){this.kh=t,this.yk=[],this.color=i[0].color,this.Rg=!1,this.Xk(i)}i.g=r,r.prototype.Xk=function(t){for(var i=this.yk,n=t.length-1;n>=0;n--){var r=t[n];i.indexOf(r)<0&&i.push(r)}}},{}],41:[function(t,i,n){"use strict";function r(t,i){this.Pg=i,this.Yk=[],this.wk=[],this.Wj=[],this.Vk=[],this.Zk=[0,0],this.ih=[],this.$k=[],this._k=[],this.group=t,this.vk()}function e(t,i,n){for(var r=i.length-1;r>=0;r--)for(var e=i[r].ae,o=t.length-1;o>=0;o--)if(!(t[o].indexOf(e)<0)){-1!==n&&n!==o?(t[n]=t[n].concat(t[o]),t.splice(o,1),n>o&&n--):n=o;break}return n}function o(t,i,n,r){var o=-1;o=e(t,n,o),o=e(t,r,o),0>o?t.push([i]):t[o].push(i)}function s(t,i,n){switch(t){case 4:return 4===i[2];case 5:return 1===i[3]&&3===i[2];case 6:if(2===i[3]&&4===i[2]){for(var r=0,e=0;6>e;e++)if(!n[e].ng()&&++r>2)return!1;return!0}return 1===i[4]&&3===i[2]&&2===i[1];default:return!1}}function h(t){return.0202===t||1.0202===t}var a=t("../../../constants"),u=t("./Band"),c=t("../../../log"),l=a.EMPTY,p=a.NEVER,f=a.Nj,g=a.ALWAYS,d=a.Si,v=a.Ti;i.g=r;var y=r.dk=-1,b=r.ek=1,m=r.al=0,x=r.ck=1e3;r.prototype.vk=function(){this.Vj=this.Ik=0,this.Yk.length=0,this.wk.length=0,this.Bi=null,this.Pk=this.Qk=!1,this.Tg=void 0,this.bl=void 0,this.Wj.length=0,this.Vk.length=0,this.Zk[d]=this.Zk[v]=0,this.ih.length=0,this.$k.length=0,this._k.length=0,this.cl=0},r.dl=function(t){return"#"+t.group.Tc},r.prototype.toString=function(){var t=this.Bi?this.Bi.toString():"";return this.group.toString()+" (isAlive:"+this.Pk+" isDead:"+this.Qk+" voids:"+this.Yk.length+" brothers:["+t+"] deadEnemies:["+this.Wj.map(r.dl)+"])"},r.prototype.el=function(t){return c.debug,this.Yk.push(t),this.Vj++,this},r.prototype.fl=function(t){var i=this.Yk.indexOf(t);if(-1===i)throw new Error("remove unknown void");c.debug,this.Yk.splice(i,1),this.Vj--},r.prototype.zk=function(){for(var t=this.group,i=t.color,n=[],r=[],e=[],o=t.ge(),s=o.length-1;s>=0;s--)for(var h=o[s],a=h.he,c=null,l=a.length-1;l>=0;l--){var p=a[l];if(p.color===i&&p.group!==t){c=p.group;var f=n.indexOf(c);f>=0?e[f]!==h&&(r[f]=!1):(n.push(c),r.push(!0),e.push(h))}}if(n.length){for(var g=n.length-1;g>=0;g--)if(r[g]){var d=e[g],v=this.Pg.Og(d).gl(d,[t,n[g]]);this.ih.push(v),this.$k.push(n[g])}else this._k.push(n[g]);n.push(t),u.bk(n)}},r.Gi=function(t){return"subband["+t.length+" groups: "+t.map(function(t){return t.group.toString(1)}).join(", ")+"]"},r.prototype.hl=function(t){for(var i=[],n=this.$k.length-1;n>=0;n--)this.ih[n].kh!==t&&i.push(this.$k[n]);return i},r.prototype.Mi=function(t,i){for(var n,r=[],e=t.length-1;e>=0;e--){var s=t[e].ae,h=s.Bi;if(h){if(h===n)continue;n=h;for(var a=h.Ci.length-1;a>=0;a--){var u=h.Ci[a];o(r,u,u._k,u.hl(i))}}else r.push([s])}return r},r.prototype.Ki=function(t){var i=this.Bi;if(!i)return[];for(var n=[],r=i.Ci.length-1;r>=0;r--){var e=i.Ci[r];e!==this&&o(n,e,e._k,e.hl(t))}return n},r.prototype.il=function(){if(this.Vj>=2)return p;var t=this.bj();return t>=3?p:0===t?g:f},r.prototype.jl=function(){if(this.il()===p)return!1;if(this._k.length)return!1;for(var t=this.group.color,i=0,n=0,r=this.wk.length-1;r>=0;r--){var e=this.wk[r];e.color===t&&0!==e.kl&&(i++,e.kl>=3&&n++,this.Wj.length&&n++)}return!(i+n>=2)},r.prototype.Hk=function(t){this.Qk=!0;for(var i=this.wk,n=this.group.color,r=1-n,e=null,o=i.length-1;o>=0;o--){var s=i[o],h=s.yk[r],a=0;if(h.length){for(var u=h.length-1;u>=0;u--)a+=h[u].qd.length;s.Uj>a||(s.Fk(r),e=s)}}if(!e)return void c.debug;for(var l=this.Vk=this.group.ie(),p=l.length-1;p>=0;p--){var f=l[p],g=f.ae;g.Wj.push(this);for(var d=p-1;d>=0;d--){var v=l[d],y=v.ae;if(-1===y.$k.indexOf(f)){y.$k.push(f);var b=e.gl(e.ll[0],[f,v]);y.ih.push(b)}}}c.debug},r.prototype.Dk=function(t){if(this.Pk||this.Vj>=2&&!this.Qk)return x;for(var i,n=0,r=this.group.color,e=this.group.wd,o=this.wk.length-1;o>=0;o--){var s=this.wk[o],h=s.Uj;if(s.Zi)s.Zi===this&&(n+=h);else{var a=s.yk[r];if(1===a.length)n+=h;else{var u=this.group.Tc,l=u;for(i=a.length-1;i>=0;i--)l=Math.min(a[i].Tc,l);u===l&&(n+=h)}}}if(n=Math.min(e,n)/100,t||(n+=e/1e4),this.Qk)return 0+n;var p=0,f=0;if(!t&&this.Bi){var g=this.Bi.Ci;for(i=g.length-1;i>=0;i--)g[i]!==this&&(f+=g[i].Dk(!0))}if(!t){var g=this._k;for(i=g.length-1;i>=0;i--)p+=g[i].ae.Dk(!0);for(g=this.$k,i=g.length-1;i>=0;i--)p+=g[i].ae.Dk(!0)}return p!==f&&(c.debug,p=f),this.Vj+p+n},r.prototype.Pj=function(t){if(this.Vj>1)return g;if(0===this.Vj)return p;var i=this.Yk[0],n=i.Uj;if(n>6)return g;var r=this.group,e=r.color;if(3>n&&!i.yk[1-e].length)return p;c.debug;for(var o,h=null,a=0,u=0,d=0,v=null,y=null,b=0,m=i.ll,x=!1,w=[0,0,0,0,0],k=0;n>k;k++){for(var S=m[k],M=0,j=0,C=0,q=S.he.length-1;q>=0;q--){var I=S.he[q];switch(I.color){case l:C++;break;case e:j++;break;default:if(1===I.group.wd){C++,b+=2;break}M++,v?I.group!==v&&(y=I.group):v=I.group}}if(M){if(2>C+(j?1:0))continue}else if(b++,o=S,w[C]++,2>C)continue;if(c.debug,d++,S.lg()&&(x=!0),h&&!h.lg()){if(u>M)continue;if(a+u>=C+M)continue}h=S,u=M,a=C}if(x&&d>1&&d--,c.debug,!h)return p;if(1===b&&!y&&v&&v.qd.length<3&&this.ml(v,o,h))return p;if(d>=2){if(u)return g;if(!s(n,w,m))return g}return t[0]=h.xd,t[1]=h.yd,f},r.prototype.ml=function(t,i,n){for(var r=i.he.length-1;r>=0;r--){var e=i.he[r];if(e.color===l&&e!==n&&e.rg(t))return!0}return!1},r.prototype.Jk=function(){if(!this.Bi)return m;for(var t=this.Bi.Ci,i=0,n=!1,r=t.length-1;r>=0;r--){var e=t[r];e!==this&&(n||e.Pk?n=e.Pk=!0:(i+=e.Vj,i>=2&&(n=e.Pk=!0)))}return n?(c.debug,this.Pk=!0,b):m},r.prototype.nl=function(){if(this.Bi)return!1;if(this.group.qd.length>=6)return!1;for(var t=this.wk.length-1;t>=0;t--)if(this.wk[t].color===this.group.color)return!1;return!0},r.prototype.Kk=function(t){if(this.Vj>=2)return this.Pk=!0,c.debug,b;if(this.nl())return y;var i=[],n=this.Pj(i);if(n===f){if(this.cl=.5,void 0===t)return m;t!==this.group.color&&(n=p)}return n===p?(this.cl=0,this.Bi||this.Wj.length?m:this.ol()>=1.5?m:(this.Ik=this.Dk(),y)):(this.Pk=!0,this.cl=1,c.debug,b)},r.prototype.Gk=function(){var t=this.group.ie();if(!t.length)return y;for(var i=this.Ik||this.Dk(),n=h(i)&&!this.$k.length&&!this._k.length,r=null,e=n?this.group.ge():null,o=0;o<t.length;o++){var s=t[o],a=s.ae,u=a.Dk(),l=i-u;if(c.debug,l>0)return c.debug,this.bl=!1,m;if(0===l&&(c.debug,n)){if(a.bl===!1||u!==i||s.qd.length<3)continue;for(var p=e.length-1;p>=0;p--){var f=e[p];if(!f.rg(s)&&this.Pg.Og(f).Zi!==this){n=!1;break}}n&&(r=a)}}return n&&r?(this.bl=!0,m):y},r.prototype.Mk=function(){return this.group.wd>1?m:y},r.prototype.Nk=function(){var t=this.Ik=this.Dk();if(t>=2)return this.Pk=!0,c.debug,b;if(this.bl)return this.Pk=!0,c.debug,b;for(var i=this.$k.length-1;i>=0;i--)if(this.$k[i].ae.Pk)return this.Pk=!0,c.debug,b;return y},r.prototype.pl=function(t,i){if(this.Bi){for(var n=this.Bi.Ci,r=0,e=n.length-1;e>=0;e--)r+=t.call(n[e],i);return r}return t.call(this,i)},r.prototype.$i=function(t,i){this.Zk[t]+=i},r.prototype.Th=function(){for(var t=1-this.group.color,i=this.wk.length-1;i>=0;i--){var n=this.wk[i];if(n.color!==t)return!1}return!0},r.prototype.ql=function(){for(var t=this.group.color,i=this.wk.length-1;i>=0;i--){var n=this.wk[i];if(void 0===n.color)for(var r=n.yk[1-t],e=r.length-1;e>=0;e--){var o=r[e],s=o.ae.Ek();if(6>s)return 1}}return 0},r.prototype.bj=function(){return this.Vj+this.cl+this.ql()+(this.Zk[d]+this.Zk[v])/2},r.prototype.ol=function(){return this.pl(this.bj)},r.prototype.rl=function(){return this.group.qd.length},r.prototype.Ek=function(){return this.pl(this.rl)}},{"../../../constants":46,"../../../log":49,"./Band":38}],42:[function(t,i,n){"use strict";function r(t,i){this.Qa=t,this.code=i,this.xd=this.yd=0,this.Uj=0,this.yk=null,this.ll=null,this.sl=void 0,this.color=void 0,this.Zi=void 0,this.tl=!1,this.ul=!1,this.kl=-1,this.ih=null,this.vl=!1}function e(t){return t?y[t]:y[0]}function o(t){for(var i=t.length-1;i>=0;i--)if(!t[i].ae.Qk)return!1;return!0}function s(t){return"#"+t.Tc}var h=t("../../../constants"),a=t("./FakeSpot"),u=t("../../../log"),c=t("../../../Move"),l=(c.Yd,c.La),p=h.Ma,f=h.Na,g=1,d=2,v=3,y=["void","eye","fake","dame"];i.g=r,r.prototype.wl=function(t,i){return this.xd=t,this.yd=i,this.ih=[],this.yk=[[],[]],this.ll=[],this.yk},r.prototype.xl=function(t,i){this.Uj++,this.ll.push(this.Qa.ed(t,i))},r.prototype.gl=function(t,i){u.debug,this.ul=!0;var n=this.ll.indexOf(t),r=this.ih[n];return r?r.Xk(i):r=this.ih[n]=new a(t,i),r},r.prototype.Ak=function(){var t=this.yk[p],i=this.yk[f],n=o(t),r=o(i);if(n&&r)return this.tl||void 0===this.color?!1:this.yl();if(this.sl===g)return!1;if(!n&&!r)return!1;var e=n?f:p;return this.vl=!t.length||!i.length,this.ul?this.zl(e):(this.kl=this.Uj,this.Al(e))},r.prototype.zl=function(t){this.sl=d,this.color=t,this.Zi&&(this.Zi.fl(this),this.Zi=null);for(var i=this.ih.length-1;i>=0;i--){var n=this.ih[i];n&&(n.Rg=!1)}return!0},r.prototype.Bk=function(){if(this.sl!==d)return!1;var t=this.kl,i=this.kl=this.Uj-this.Bl();return u.debug,i!==t},r.prototype.Bl=function(t){t||(t=[]);for(var i=this.ih.length-1;i>=0;i--){var n=this.ih[i];if(n&&n.color===this.color)for(var r=n.yk,e=r.length-1;e>=0;e--)if(r[e].ae.jl()){u.debug&&!n.Rg,n.Rg=!0,t.push(n.kh);break}}return t.length},r.prototype.Rg=function(t){for(var i=this.ih.length-1;i>=0;i--){var n=this.ih[i];if(n&&n.color===this.color&&n.kh===t)return n.Rg}return!1},r.prototype.Ck=function(){if(this.sl===d){if(0===this.kl){if(this.Zi)throw new Error("NEVER HAPPENS");return void u.debug}u.debug;var t=this.color;return this.color=this.sl=void 0,this.Al(t)}},r.prototype.Al=function(t){return this.vl?(this.Cl(t),!0):this.Fk(t)},r.prototype.Dl=function(t){for(var i=this.yk[t],n=i[0],r=0,e=i.length-1;e>=0;e--){var o=i[e],s=o.qd.length;o.wd>1&&s>r&&(n=o,r=s)}this.Zi=n.ae.el(this)},r.prototype.Cl=function(t){return u.debug,this.sl=g,this.color=t,this.Dl(t),!0},r.prototype.Fk=function(t){if(t===this.color)return!1;u.debug,this.Zi&&(this.Zi.fl(this),this.Zi=null),this.color=t;for(var i=this.yk[1-t],n=i.length-1;n>=0;n--)for(var r=i[n].ae.wk,e=r.length-1;e>=0;e--)if(r[e]!==this&&r[e].color===t)return!0;
return this.Dl(t),!0},r.prototype.Rk=function(){u.debug,this.Zi&&(this.Zi.fl(this),this.Zi=null),this.sl=v,this.color=void 0},r.prototype.yl=function(){u.debug;var t=this.color;if(void 0===t)throw new Error("dead group's eye of undefined owner");this.tl=!0,this.ul=!1,this.Zi&&(this.Zi.fl(this),this.Zi=null),this.sl=g,this.color=1-t;for(var i=this.yk[t],n=i.length-1;n>=0;n--){var r=i[n].ae;if(r.Vk.length)return this.Zi=r.Vk[0].ae.el(this),!0}return!0},r.prototype.Wk=function(t){return void 0===this.color?0:(t&&(t.length=0,this.ul&&this.Bl(t)),this.Uj)},r.prototype.El=function(t){var i=t.group;return this.yk[i.color].indexOf(i)>-1},r.prototype.toString=function(){return"{"+e(this.sl)+"-"+l(this.xd,this.yd)+" vcount:"+this.Uj+" black:"+(this.yk[p].map(s).toString()||"-")+" white:"+(this.yk[f].map(s).toString()||"-")+"}"}},{"../../../Move":17,"../../../constants":46,"../../../log":49,"./FakeSpot":40}],43:[function(t,i,n){"use strict";function r(t,i){this.Qa=t,this.Ic=i.Ic,this.yk=null,this.Fl=null}var e=t("../../../constants"),o=e.Fc;i.g=r,r.prototype.xk=function(t,i,n,r){if(this.Ic[i][t]!==n)return 0;this.Fl=n;var e="number"!=typeof r?r:null;this.yk=e&&e.wl(t,i);for(var o,s,h,a=0,u=this.Ic,c=[[t,i,i]];o=c.pop();)if(s=o[0],i=o[1],h=o[2],u[i][s]===n){for(;this.Gl(s,i-1);)i--;for(;this.Gl(s,h+1);)h++;a+=h-i+1;for(var l=s-1;s+1>=l;l+=2){for(var p=null,f=i;h>=f;f++)s>l&&(u[f][s]=r,e&&e.xl(s,f)),this.Gl(l,f)?p||(p=f):p&&(c.push([l,p,f-1]),p=null);p&&c.push([l,p,h])}}return a},r.prototype.Gl=function(t,i){var n=this.Ic[i][t];if(n===o)return!1;if(n===this.Fl)return!0;if(!this.yk)return!1;if("number"!=typeof n)return!1;var r=this.Qa.ed(t,i).group;if(!r)throw new Error("Unexpected: ZoneFiller replacing a group");var e=this.yk[n];return-1===e.indexOf(r)&&e.push(r),!1}},{"../../../constants":46}],44:[function(t,i,n){"use strict";function r(t,i,n){this.name="Chuckie",this.Fb=t,this.Pg=new o(t),this.Il(n),this.setColor(i)}function e(t,i){return i[1]-t[1]}var o=t("./boan/BoardAnalyser"),s=t("../../constants"),h=t("../../Genes"),a=t("../../Grid"),u=t("../../log"),c=t("../../Move"),l=t("../../test"),p=t("./boan/ZoneFiller"),f=t("./Connector"),g=t("./GroupAnalyser"),d=t("./GroupsAndVoids"),v=t("./Hunter"),y=t("./Influence"),b=t("./MoveInfo"),m=t("./NoEasyPrisoner"),x=t("./PotentialEyes"),w=t("./PotentialTerritory"),k=t("./Pusher"),S=t("./Savior"),M=t("./Shaper"),j=t("./Spacer"),C=c.Ka,q=c.La,I=s.Fc,B=s.Ma,D=s.lh,G=s.Hl,T=s.mh,E=-1;i.g=r,r.Jl="Chuckie",r.Kl="0.1",r.tf=o,r.Ll=p,r.prototype.Ml=function(t){var i=new t(this);return this.th.push(i),i},r.prototype.Nl=function(){var t=this.eh={};this.th=[],t.dh=this.Ml(b),t.Ah=this.Ml(w),t.Ol=this.Ml(d),t.Bh=this.Ml(y),t.yh=this.Ml(x),t.Pl=this.Ml(g),t.wh=this.Ml(m),t.Ql=this.Ml(S),t.Pi=this.Ml(v),t.vh=this.Ml(f),t.Rl=this.Ml(j),t.Sl=this.Ml(k),t.Tl=this.Ml(M);for(var i=0;i<this.th.length;i++)this.th[i].rh()},r.prototype.setColor=function(t){this.color=t;for(var i=0;i<this.th.length;i++)this.th[i].Ch(t)},r.prototype.Il=function(t){this.Ih=t||this.Ih||new h,this.ph=this.Hh("smallerMove",.03,.01,.1),this.Qa!==this.Fb.Qa&&(this.Qa=this.Fb.Qa,this.cb=this.Qa.cb,this.Sg=this.Fb.xa,this.Ul=new a(this.cb,I),this.oh=new a(this.cb,0,I),this.Nl()),this.Va=B,this.Vl=this.Wl=0,this.Xl=this.Yl=this.Zl=0,this.$l=!1,this.wi=this.xi=E,this.Dh=null},r.prototype._l=function(t){for(var i=0;i<this.th.length;i++){var n=this.th[i];if(n.name===t)return n}return null},r.prototype.Hh=function(t,i,n,r){return void 0===n&&(n=null),void 0===r&&(r=null),this.Ih.get(this.name+"-"+t,i,n,r)},r.prototype.am=function(t,i,n){this.Xl=n,this.Yl=t,this.Zl=i,this.$l=1!==this.bm},r.prototype.cm=function(t,i,n){if(n>this.Xl)this.bm=1,this.am(t,i,n);else{if(this.bm++,Math.random()*this.bm>=1)return;this.am(t,i,n)}},r.prototype.dm=function(){this.Vl++;var t=this.Ul.Ic,i=this.oh.Ic;this.em(),this.fm(t,i),this.gm(t,i);var n=this.hm(t,i);return u.Eh(this.ii?u.Fh:u.yi),n},r.prototype.em=function(){this.Xl=this.ph-.001,this.Yl=E,this.Va=this.Fb.Va,this.ii=!!u.debug,u.Eh(u.yi)},r.prototype.fm=function(t,i){for(var n=1;n<=this.cb;n++)for(var r=1;r<=this.cb;r++)this.Qa.yb(r,n,this.color)?(t[n][r]=D,i[n][r]=0):t[n][r]=G;if(this.wi!==E){if(t[this.xi][this.wi]===G)throw new Error("Invalid test move: "+this.wi+","+this.xi);t[this.xi][this.wi]=T}},r.prototype.gm=function(t,i){for(var n=0;n<this.th.length;n++){var r=this.th[n];u.Eh(this.ii&&this.Dh===r.name?u.Fh:u.yi);var e=Date.now();r.Yh&&r.Yh(),r._g(t,i);var o=Date.now()-e;o>=3&&!l.im&&u.jm("Slowness: "+r.name+" took "+o+"ms")}this.eh.dh.ji(t,i)},r.prototype.hm=function(t,i){for(var n=1;n<=this.cb;n++)for(var r=1;r<=this.cb;r++)t[n][r]<D||i[n][r]<this.Xl||this.cm(r,n,i[n][r]);return this.Xl<this.ph?"pass":(this.$l&&this.Wl++,q(this.Yl,this.Zl))},r.prototype.km=function(){var t=this.eh.Ah;return t.oj()},r.prototype.lm=function(){var t=this.eh.Ah;return t._g(),t.hj.Ic},r.prototype.mm=function(t,i){this.wi=t,this.xi=i,this.dm(),this.wi=E},r.prototype.nm=function(t,i){for(var n={},r=0;r<this.th.length;r++)this.th[r].Gh(t,i,n);return n},r.prototype.om=function(t,i){return this.mm(t,i),this.oh.Ic[i][t]},r.prototype.pm=function(t,i,n){this.mm(t,i);var r=this._l(n);return r.oh.Ic[i][t]},r.prototype.qm=function(t){this.Dh=t},r.prototype.rm=function(t,i){var n=C(t);if(!n)return"";var r=n[0],o=n[1];if(i){if(!this.Qa.yb(r,o,this.Fb.Va))return"Invalid move: "+t;this.mm(r,o)}var s=this.nm(r,o),h=this.oh.Ic[o][r],a=[];for(var u in s)0!==s[u]&&a.push([u,s[u]]);a.sort(e);for(var c=t+" ("+h.toFixed(2)+")\n",l=0;l<a.length;l++)c+="- "+a[l][0]+": "+a[l][1].toFixed(2)+"\n";return c}},{"../../Genes":12,"../../Grid":14,"../../Move":17,"../../constants":46,"../../log":49,"../../test":52,"./Connector":23,"./GroupAnalyser":25,"./GroupsAndVoids":26,"./Hunter":28,"./Influence":29,"./MoveInfo":30,"./NoEasyPrisoner":31,"./PotentialEyes":32,"./PotentialTerritory":33,"./Pusher":34,"./Savior":35,"./Shaper":36,"./Spacer":37,"./boan/BoardAnalyser":39,"./boan/ZoneFiller":43}],45:[function(t,i,n){"use strict";function r(){this.sm=null,this.uf=this.tm=this.um=this.vm=null}i.g=new r,r.prototype.wm=function(t){this.sm={};for(var i=0;i<t.length;i++){var n=t[i];this.sm[n.name]=n.xm}var r=t.length-1;this.uf=this.tm=t[r].xm,this.um=r>=1?t[r-1].xm:null,this.vm=r>=2?t[r-2].xm:null}},{}],46:[function(t,i,n){"use strict";function r(){this.Si=0,this.Ti=1,this.Fc=-99,this.EMPTY=-1,this.Ma=0,this.Na=1,this.lh=0,this.mh=1,this.Hl=-1,this.NEVER=0,this.Nj=1,this.ALWAYS=2,this.eg=0,this.fg=3,this.Ri=7,this.Qi=1,this.cj=this.tg=0,this.wg=1,this.dj=this.ug=2,this.vg=3,this.xg=4,this.yg=5,this.zg=6,this.Ag=7,this.Bg=8,this.Wg=9,this.Cg=10,this.Dg=11,this.sg=12,this.Oa="Japanese",this.ym="Chinese",this.zm=0,this.Am=1}i.g=new r},{}],47:[function(t,i,n){"use strict";function r(t){return"\n"!==t.slice(-1)?0:"\r\n"!==t.slice(-2)?1:2}n.sh=function(t){return t.name||t.toString().split(/ |\(/,2)[1]},n.clone=function(t){if(null===t||void 0===t)return t;var i;if(t instanceof Array){i=[];for(var n=0,r=t.length;r>n;n++)i[n]=t[n]}else{if("object"!=typeof t)throw new Error("clone called on "+typeof t);if("function"==typeof t.clone)return t.clone();i={};for(var e in t){var o=t[e];"function"!=typeof o&&(i[e]=o)}}return i},String.prototype.yc=function(t){if(void 0===t)return this.substr(0,this.length-r(this));var i=this.length-t.length;return this.substr(i)===t?this.substr(0,i):this.toString()},String.prototype.Td=function(t){if(void 0===t)t=r(this)||1;else if("number"!=typeof t)throw new Error("Invalid parameter type for String.count: "+typeof t);return this.substr(0,this.length-t)},String.prototype.startsWith||(String.prototype.startsWith=function(t){return this.substr(0,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t){return this.substr(this.length-t.length)===t}),String.prototype.format=function(t){if("%"!==this[0])throw new Error("Invalid format: "+this.toString());var i,n=this.slice(1,-1),r=0,e=this.slice(-1);switch(e){case"d":case"x":var o=" ";"0"===n[r]&&(r++,o="0");var s=parseInt(n.substr(r));i=t.toString("x"===e?16:10);for(var h=s-i.length;h>0;h--)i=o+i;return i;case"f":var a="";if("+"===n[r]&&(r++,t>0&&(a="+")),"."!==n[r++])break;var u=parseInt(n.substr(r));return a+t.toFixed(u)}throw new Error("Unknown format: "+this.toString())},String.prototype.Kf=function(t,i){return this>=t&&i>=this},n.Bm=function(t,i){for(var n=new Array(t),r=t-1;r>=0;r--)n[r]=i;return n},n.Bd=function(t,i,r){for(var e=new Array(t),o=e[0]=n.Bm(i,r),s=t-1;s>=1;s--)e[s]=o.concat();return e},Array.Cm=function(t,i){if(void 0===t)return[];if(void 0===i)return new Array(t);var n,r=[];if("function"==typeof i)for(n=0;t>n;n++)r[n]=i(n);else for(n=0;t>n;n++)r[n]=i;return r},Array.prototype.Dm=function(t){for(var i=this.length,n=0;n<t.length;n++){var r=t[n];-1===this.indexOf(r)&&this.push(r)}return this.length-i}},{}],48:[function(t,i,n){"use strict";function r(){this.Em=null,this.map={},this.Fm=this.Gm.bind(this);try{var t=window.localStorage.getItem(o);t&&(this.map=JSON.parse(t))}catch(i){e.Hm("Cannot load local preferences: "+i)}}var e=t("./log"),o="localPref";r.prototype.Im=function(){this.Em&&this.Gm()},r.prototype.Jm=function(){this.Em||(this.Em=window.setTimeout(this.Fm,6e4))},r.prototype.Gm=function(){window.clearTimeout(this.Em),this.Em=null;try{window.localStorage.setItem(o,JSON.stringify(this.map))}catch(t){e.Hm("Cannot save local preferences: "+t)}},r.prototype.ic=function(t,i){var n=this.map[t];return void 0!==n?n:i},r.prototype.gc=function(t,i){this.map[t]=i,this.Jm()},i.g=new r},{"./log":49}],49:[function(t,i,n){"use strict";function r(){this.level=NaN,this.Km=null,this.Fh=0,this.yi=1,this.Lm=2,this.ERROR=3,this.Mm=4,this.Nm=!1,this.je=!1}var e=console,o=0,s=1,h=2,a=3,u=4;r.prototype.Eh=function(t){t!==this.level&&(this.level=t,this.debug=o>=t?this.Om:null,this.info=s>=t?this.Tf:null,this.warn=h>=t?this.jm:null,this.error=a>=t?this.Hm:null,this.fatal=u>=t?this.Pm:null)},r.prototype.Qm=function(t){this.Km=t},r.prototype.Rm=function(t,i){var n=this;return function(r){n.level>t||n.Km&&!n.Km(t,r)||i.call(e,r)}};var c=i.g=new r;r.prototype.Om=c.Rm(o,e.debug),r.prototype.Tf=c.Rm(s,e.info),r.prototype.jm=c.Rm(h,e.warn),r.prototype.Hm=c.Rm(a,e.error),r.prototype.Pm=c.Rm(u,e.error),c.Eh(s)},{}],50:[function(t,i,n){"use strict";function r(){this.appName=e.name,this.appVersion=e.version,this.Sm=null,this.Tm=null}var e=t("../package.json");i.g=new r},{"../package.json":85}],51:[function(t,i,n){"use strict";n.Um=function(t){var i,n=t.Ea("source"),r=t.Ea("place");if(n&&n.toLowerCase().indexOf("littlegolem")>=0){var e=t.Ea("event");return e?["http://www.littlegolem.net/servlet/sgf/"+e+"/game.sgf","LittleGolem"]:null}return n&&n.indexOf("www.dragongoserver")>=0?(i=n.substr(n.indexOf("gid=")+4),["http://www.dragongoserver.net/sgf.php?gid="+i+"&owned_comments=1","Dragon Go Server"]):r&&r.indexOf("online-go.com/game/")>=0?(i=r.substr(r.indexOf("/game/")+6),["https://online-go.com/api/v1/games/"+i+"/sgf","OGS"]):null}},{}],52:[function(t,i,n){"use strict";function r(){this.debug=!1,this.Vm=this.im=!1,this.Wm=null,this.Xm=null}i.g=new r,r.prototype.Ym=function(t,i){this.Wm=new t,i(this.Wm)},r.prototype.assert=function(t,i){if(t!==!0)throw new Error("assertion failed: "+(i||t))}},{}],53:[function(t,i,n){"use strict";function r(){this.Zm=null,this.$m=null,this.Qa=null,this.cb=0,this._m=null,this.cursor={type:"CR",x:0,y:0},this.an=!1,this.bn={type:null,x:0,y:0}}function e(t){switch(t){case-1:return{type:"mini",c:p.B};case-.5:return{type:"outline",c:p.B};case 0:return null;case.5:return{type:"outline",c:p.W};case 1:return{type:"mini",c:p.W};default:return null}}function o(t){switch(t){case a.Nd+v:case a.Md+d:return{type:"mini",c:p.B};case a.Nd+d:case a.Md+v:return{type:"mini",c:p.W};case a.Ld:return{type:"SL",c:"grey"};default:return null}}function s(t){if(null===t)return null;var i=1,n=0,r=2,e=0;if(void 0!==w&&(n=w),void 0!==k&&(r=k),void 0!==S&&(e=S),t===e)return null;for(var o=t.toFixed(r),s=n;r>s;s++)o=o.yc("0");if(o=o.yc("."),"0."===o.substr(0,2)&&(o=o.slice(1)),0===e){if("0"===o||".0"===o)return null;i=1>t?.6:1}return{type:"LB",text:o,scale:i}}var h=t("../constants"),a=t("../Grid"),u=t("../log"),c=t("../Move"),l=t("./uh/touchManager");t("../../lib/wgo.js");var p=window.WGo,f=c.Ad,g=c.La,d=h.Na,v=h.Ma,y=h.EMPTY,b=window.devicePixelRatio||1,m={};m[p.B]=v,m[p.W]=d;var x={};x[y]=null,x[v]=p.B,x[d]=p.W,i.g=r,r.prototype.create=function(t,i,n,r){var e=n.cb;if(this.Qa=n,!this.Zm||this.cb!==e){this.cb=e,r=r||{};var o=r.noCoords?0:-.23,s={size:e,width:i,section:{top:o,left:o,right:o,bottom:o},coordFontSize:.6};switch(r.background){case"wood":s.background=(window.rootDir||".")+"/assets/wood1.jpg";break;default:s.background="#c75"}t.clear(),this.Zm=new p.cn(t.dn(),s),this.en=60+this.Zm.fn,this.an=!1,this.bn.type=null,r.noCoords||this.Zm.gn(p.cn.hn),this["in"]()}},r.prototype["in"]=function(){var t=this;l.jn(this.Zm.kn,function(i,n,r){if("dragCancel"===i)return t.ln(-1,-1);"drag"===i.substr(0,4)&&(r-=t.en);var e=t.mn(n,r);switch(n=e[0],r=e[1],i){case"dragStart":return t.ln(n,r);case"drag":return t.ln(n,r);case"dragEnd":return t.ln(-1,-1),t.nn(n,r);case"tap":return t.nn(n,r)}})},r.prototype.on=function(t){this.pn=x[t]},r.prototype.ln=function(t,i){var n=this.qn(t,i);if(this.an){if(t===this.cursor.x&&i===this.cursor.y)return;this.Zm.rn(this.cursor)}this.an=n,n&&(this.cursor.x=t,this.cursor.y=i,this.Zm.sn[t][i][0]?(this.cursor.type="CR",this.cursor.c=void 0):(this.cursor.type=void 0,this.cursor.c=this.pn),this.Zm.tn(this.cursor))},r.prototype.un=function(t,i,n){this.bn.type&&this.Zm.rn(this.bn),this.bn.type=t,t&&(this.bn.x=i-1,this.bn.y=this.cb-n,this.Zm.tn(this.bn))},r.prototype.vn=function(t,i,n,r){this.Zm.tn({x:i-1,y:this.cb-n,type:"LB",text:t,scale:r?1.1:.8})},r.prototype.qn=function(t,i){return t>=0&&i>=0&&t<this.cb&&i<this.cb},r.prototype.nn=function(t,i){var n=t+1,r=this.cb-i;if(!this.qn(t,i))return this.$m("!"+(n>=1&&n<=this.cb?f(n):r));if(this.Qa.fd(n,r)===y){var e=g(n,r);this.$m(e)}},r.prototype.wn=function(t){this.$m=t},r.prototype.mn=function(t,i){var n=this.Zm;return t=Math.round((t*b-n.left)/n.xn),i=Math.round((i*b-n.top)/n.yn),[t,i]},r.prototype.refresh=function(){var t=!1;"regular"!==this._m&&(this._m="regular",t=!0);for(var i=0;i<this.cb;i++)for(var n=0;n<this.cb;n++){var r=this.Qa.fd(n+1,this.cb-i),e=x[r],o=this.Zm.sn[n][i][0];t&&(o=null,this.Zm.zn(n,i)),null===e?o&&this.Zm.zn(n,i):o&&o.c===e||(o&&this.Zm.zn(n,i),this.Zm.tn({x:n,y:i,c:e}))}},r.prototype.show=function(t,i,n){this.refresh(),this._m=t;for(var r=0;r<this.cb;r++)for(var e=0;e<this.cb;e++){var o=n(i[this.cb-r][e+1]);o&&(o.x=e,o.y=r,this.Zm.tn(o))}};var w,k,S;r.prototype.An=function(t,i,n){w=t,k=i,S=n};var M={hj:e,Bn:o,value:s};r.prototype.Cn=function(t,i){var n=M[t];return n?void this.show(t,i,n):u.error&&u.error("invalid display type: "+t)},r.prototype.Dn=function(t){this.show("scoring",t,o)}},{"../../lib/wgo.js":82,"../Grid":14,"../Move":17,"../constants":46,"../log":49,"./uh/touchManager":80}],54:[function(t,i,n){"use strict";function r(t,i){this.Fn=i,this.Gn(t),this.Hn()}t("./importDlg.less");var e=t("./uh/getText"),o=t("./uh/PopupDlg"),s=t("./uh/Transit"),h=t("./uh").En;i.g=r,r.prototype.Gn=function(t){this.options=t;var i=this.In=h.Jn(null,"importDialog dialog");i.Kn(!1),i.Jn("dialogTitle").Ln(e("#importGame"));var n=this.Mn=i.Jn("mainDiv");this.Nn=h.On(n,"loadGame",e("#fromFile")).setAttribute("type","file").setAttribute("id","fileInput").Kn(!1),new h(n,"label","btn fileInputBtn").Ln(e("#selectFile")).setAttribute("for","fileInput"),this.Nn.v("change",this.Pn.bind(this)),h.Qn(n);var r=n.Jn("moves");this.Ge=h.On(r,"moves",e("#fromText"),t.Ge),r.Jn("loadMovesInfo").Ln(e("#fromTextHelp"));var s=i.Jn("btnDiv");h.Rn(s,"loadBtn",e("#load"),this.Pn.bind(this)),h.Rn(s,"cancelBtn",e("#cancel"),this.Sn.bind(this,!0)),i.Kn(!0),o.Tn(i,document.body)},r.prototype.Hn=function(){new s(this.In).from("opacity",0).Un("opacity",1).start(500)},r.prototype.Pn=function(){var t=this.options;if(t.Vn=void 0,this.Nn.Wn()){var i=this;this.Nn.Xn(function(n){t.Vn=n,i.Sn()})}else t.Ge=this.Ge.value(),this.Sn()},r.prototype.Sn=function(t){this.options.Yn=!!t,this.Fn(this.options)&&o.Zn(this.In)}},{"./importDlg.less":62,"./uh":76,"./uh/PopupDlg":71,"./uh/Transit":73,"./uh/getText":75}],55:[function(t,i,n){"use strict";function r(t,i,n){var r=this.$n=t.Jn("moveIndicator "+i);this._n=r.Jn("label").Ln(n);var e=r.Jn("icon");this.ao=e.Jn("text")}t("./moveIndicator.less");var e=t("../constants"),o=e.Na,s=e.Ma;i.g=r,r.prototype.bo=function(t,i,n){this.$n.Kn(null!==t),null!==t&&(this.$n.co("black",i===s),this.$n.co("white",i===o),this.ao.Ln(t),n&&this._n.Ln(n))}},{"../constants":46,"./moveIndicator.less":63}],56:[function(t,i,n){"use strict";function r(t,i){this["do"]=t,this.Fn=i,this.result={},this.eo=null,this.fo=-1,this.Gn(),this.Hn()}function e(){var t=this.ho;t.eo&&t.eo.co("selected",!1),this.co("selected",!0),t.eo=this,t.fo=this.io}t("./myGamesDlg.less");var o=t("./uh/getText"),s=t("./uh/PopupDlg"),h=t("./uh/tapBehavior"),a=t("./uh/Transit"),u=t("./uh").En;i.g=r,r.prototype.jo=function(){if(this.eo){var t=this;s.ko(null,o("#deleteGameConfirm"),function(){if(t["do"].uc(t.fo)){t.lo.splice(t.fo,1);for(var i=t.fo;i<t.lo.length;i++)t.lo[i].io--;t.mo.removeChild(t.eo),t.eo=null}})}},r.prototype.Gn=function(){var t=this.In=u.Jn(null,"myGamesDialog dialog");t.Kn(!1),t.Jn("dialogTitle").Ln(o("#myGames"));for(var i=this.Mn=t.Jn("mainDiv"),n=this.mo=i.Jn("gameList"),r=this.lo=[],a=this["do"].mc(),c=0;c<a.length;c++){var l=n.Jn("oneGame").Ln(a[c]);r.push(l),l.io=c,l.ho=this,h(l,e)}u.Rn(i,"delGameBtn",o("#deleteGame"),this.jo.bind(this)),u.no(i,"inputLbl",o("#recentGames"));var p=[o("#none")].concat(this["do"].lc());this.oo=u.po(i,"recentGames",p,"byIndex");var f=t.Jn("btnDiv");u.Rn(f,"loadBtn",o("#load"),this.Pn.bind(this)),u.Rn(f,"cancelBtn",o("#cancel"),this.Sn.bind(this,!0)),t.Kn(!0),s.Tn(t,document.body)},r.prototype.Hn=function(){new a(this.In).from("opacity",0).Un("opacity",1).start(500)},r.prototype.Pn=function(){var t=this.oo.value()-1;t>=0?(this.result.Fb=this["do"].oc(t),this.Sn()):this.eo&&(this.result.Fb=this["do"].pc(this.fo),this.Sn())},r.prototype.Sn=function(t){this.result.Yn=!!t,this.Fn(this.result)&&s.Zn(this.In)}},{"./myGamesDlg.less":64,"./uh":76,"./uh/PopupDlg":71,"./uh/Transit":73,"./uh/getText":75,"./uh/tapBehavior":78}],57:[function(t,i,n){"use strict";function r(t,i){this.Fn=i,this.qo=t.cb,this.ro=t.ro,this.Gn(t),this.so(),this.to(),this.Hn()}t("./newGameDlg.less");var e=t("../ai"),o=t("../constants"),s=t("./uh/getText"),h=t("./SettingDlg"),a=t("./uh/Transit"),u=t("./uh").En,c=o.Ma,l=o.Na,p=[5,7,9,13,19],f="More options",g=" >>",d=" <<";i.g=r,r.prototype.so=function(){var t=this.qo;this.uo.Ln(t+" x "+t);var i=t+"x"+t;this.wo.vo("backgroundImage",'url("assets/'+i+'.png")'),this.wo.vo("backgroundSize",Math.ceil(t/19*100)+"%"),this.yo.xo(t>5),this.zo.xo(19>t)},r.prototype.Ao=function(t){var i=p.indexOf(this.qo)+t;this.qo=p[i],this.so()},r.prototype.to=function(){this.Bo[c].co("robot",this.ro[c]),this.Bo[l].co("robot",this.ro[l])},r.prototype.Co=function(t){this.ro[t]=!this.ro[t],this.to()},r.prototype.Gn=function(t){this.options=t;var i=this.In=u.Jn(document.body,"newGameDialog dialog");i.Kn(!1),i.Jn("dialogTitle").Ln("Start a new game");var n=i.Jn("mainDiv");u.Do(n,"settingBtn",this.Eo.bind(this));var r=n.Jn("centeredDiv").Jn("boardDiv");this.Bo=[],this.Bo[0]=u.Do(r,"playerBtn",this.Co.bind(this,0));var o=this.Fo=r.Jn("sizeBox");this.zo=u.Do(o,"sizeBtn",this.Ao.bind(this,1)),this.wo=o.Jn("boardImgFrame").Jn("boardImg"),this.uo=this.wo.Jn("curSize"),this.yo=u.Do(o,"sizeBtn",this.Ao.bind(this,-1)),this.yo.co("down",!0),this.Bo[1]=u.Do(r,"white playerBtn",this.Co.bind(this,1)),this.Go=u.Rn(n,"advancedBtn",f+g,this.Ho.bind(this));var h=this.Io=i.Jn("advancedDiv");u.no(h,"inputLbl","Handicap:"),this.Jo=u.po(h,"handicap",[0,2,3,4,5,6,7,8,9],null,t.Jo);var a=h.Jn("rules");u.no(a,"inputLbl","Rules:"),this.rules=u.po(a,"rules",["Japanese","Chinese"],null,t.rules);var c=Object.keys(e.sm);if(c.length>1){var l=h.Jn();u.no(l,"inputLbl","Black AI:"),this.uf=u.po(l,"defaultAi",c,null,e.uf.name),u.no(l,"defAiInfo","(White AI always uses latest AI version)")}var p=u.Rn(i,"startBtn",s("#play"),this.Ko.bind(this));i.Kn(!0);var d=this.Io.$n.clientHeight+p.$n.clientHeight+24;this.Io.vo("marginTop",-d+"px")},r.prototype.Hn=function(){new a(this.Fo).from("opacity",0).Un("opacity",1).start(1e3)},r.prototype.Ho=function(){this.Lo?(this.Mo=!this.Mo,this.Lo.No(200)):(this.Io.Kn(!0),this.Mo=!0,this.Lo=new a(this.Io).Un("marginTop","0").start(200)),this.Go.Ln(f+(this.Mo?d:g))},r.prototype.Eo=function(){new h(this.In)},r.prototype.Ko=function(){var t=this.options;t.cb=this.qo,t.Jo=~~this.Jo.value(),t.ro=this.ro,e.uf=this.uf?e.sm[this.uf.value()]:e.uf,t.rules=this.rules.value(),this.Sn()},r.prototype.Sn=function(){return this.Fn(this.options)?(this.close(),!0):!1},r.prototype.close=function(){u.removeChild(document.body,this.In)}},{"../ai":45,"../constants":46,"./SettingDlg":59,"./newGameDlg.less":65,"./uh":76,"./uh/Transit":73,"./uh/getText":75}],58:[function(t,i,n){"use strict";function r(t){this.Gb=!1,this.Sm=t,this.Fb=t.Fb,this.Oo=t.Oo,this.Hb=null,this.Po=null,this.bh=null}t("./reviewUi.less");var e=t("../constants"),o=t("./uh/ContextMenu"),s=t("./uh/getText"),h=t("../Move"),a=t("./uh"),u=a.En,c=h.Ka;i.g=r,r.prototype.Qo=function(){this.Gb=!1,this.Hb=null},r.prototype.Ro=function(t,i,n){this.Po=a.So(),this.To=u.Rn(t,"study","",this.Uo.bind(this)),u.Rn(i,"back10","<<",this.Vo.bind(this,-10)),u.Rn(i,"back1","<",this.Vo.bind(this,-1)),u.Rn(i,"forw1",">",this.Vo.bind(this,1)),u.Rn(i,"forw10",">>",this.Vo.bind(this,10)),this.Wo=u.Do(n,"pruneBtn",this.Xo.bind(this))},r.prototype.Yo=function(){this.To.Ln(this.Gb?"...":s("#review")),this.Po.Kn(["back1","back10","forw1","forw10","pruneBtn"],this.Gb)},r.prototype.Uo=function(){if(!this.Gb)return this.Zo();var t=new o({$o:!0});t._o(s("#evalScore"),this.ap.bind(this)),t._o(s("#rewindAll"),this.bp.bind(this)),t._o(s("#endStudy"),this.cp.bind(this)),t.dp(this.To)},r.prototype.ap=function(){var t=this.Sm.ep(e.Ma).km();this.Sm.Zm.Dn(t[0]),this.bh.Ln(this.Sm.fp.yf(t[1]).join("\n"))},r.prototype.Xo=function(){var t=this.Hb;if(t._e())return!1;for(var i;;){if(i=t.Ze(),!t.hf())return!1;if(this.Fb.rb("half_undo"),t.mf())break}return t.qf(i)?(this.gp(),!0):!1},r.prototype.Zo=function(){this.Gb=!0,this.Hb=this.Oo.Tb(),this.bh=this.Sm.hp,this.Sm.Yo(),this.gp()},r.prototype.cp=function(){this.Gb=!1,this.ip(),this.Oo.Ub(),this.jp(),this.Sm.kp(),this.Sm.lp(),this.Sm.Yo()},r.prototype.mp=function(t){return this.Fb.rb(t)?(this.Hb.ff(t),void this.gp()):this.Sm.statusMessage(this.Fb.sb().join("\n"))},r.prototype.Vo=function(t){for(var i,n=this.Hb,r=0;t>r&&(i=n.jf(),i)&&(this.Fb.rb(i),!n.mf());r++);for(r=0;r>t&&n.hf()&&(this.Fb.rb("half_undo"),!n.mf());r--);this.gp()},r.prototype.bp=function(){this.Hb.af(),this.Fb.gb(),this.gp()},r.prototype.ip=function(){for(this.Hb.af(),this.Fb.gb();;){var t=this.Hb.kf();if(!t)break;this.Fb.rb(t)}},r.prototype.gp=function(){this.Sm.kp();var t=this.Hb,i=t.lf();if(this.Po.xo(["forw1","forw10"],i),this.Po.xo(["back1","back10"],t.$e()>=0),this.Wo.Kn(!t._e()),i||this.Sm.np(),this.op(i),this.Sm.inEvalMode){var n=t.Ze();n&&n.length<=3&&this.Sm.afterReplay(n)}},r.prototype.jp=function(){this.bh.pp()},r.prototype.op=function(t){if(this.bh.pp(),this.Sm.lp(t),t){var i=this.Hb.mf();i&&this.qp(t,i)}this.rp()},r.prototype.qp=function(t,i){for(var n=0;n<i.length;n++){var r=i[n];if(r){var e=r===t||0===n,o=c(r),s=n?String.fromCharCode(64+n):"*";o?this.Sm.Zm.vn(s,o[0],o[1],e):s=r,u.Rn(this.bh,"variationBtn",s,this.mp.bind(this,r))}}},r.prototype.rp=function(){var t=this.Hb.bf();t&&t.Rf&&this.bh.Jn("moveComment").Ln(t.Rf)}},{"../Move":17,"../constants":46,"./reviewUi.less":66,"./uh":76,"./uh/ContextMenu":68,"./uh/getText":75}],59:[function(t,i,n){"use strict";function r(){var t=this.sp;a.Zn(t.In)}function e(t){var i=this.In=o.Jn(null,"settingDlg dialog");i.Jn("dialogTitle").Ln("Settings");var n=i.Jn("content"),e=s.tp();o.no(n,"inputLbl","Color theme:");var u=o.po(n,"theme",e,null,s.up);u.v("change",function(){var t=this.value();s.vp(t),h.gc("theme",t)});var c=i.Jn("btnDiv"),l=o.Rn(c,"okBtn","OK",r);l.sp=this,a.Tn(i,t||document.body)}t("./settingDlg.less");var o=t("./uh").En,s=t("./uh/Painter"),h=t("../localPref"),a=t("./uh/PopupDlg");i.g=e},{"../localPref":48,"./settingDlg.less":67,"./uh":76,"./uh/Painter":70,"./uh/PopupDlg":71}],60:[function(t,i,n){"use strict";function r(t){this.wp(),this.Fb=new u,this.fp=new M(this.Fb),this.Oo=new c(this.Fb),this["do"]=new l(k),this.xp=new S(this),this.Zm=null,this.yp=0,this.initDev?this.initDev():this.zp=!0,t&&this.Fb._a(t)}function e(t,i){return i?t+i:""}t("./ui.less");var o=t("../../config/colors.json"),s=t("../ai"),h=t("./Board"),a=t("../constants"),u=t("../GameLogic"),c=t("../GameRecord"),l=t("../GameVault"),p=t("./uh/getText"),f=t("../net/goSites"),g=t("./ImportDlg"),d=t("../main"),v=t("../Move"),y=t("./MoveIndicator"),b=t("./MyGamesDlg"),m=t("./NewGameDlg"),x=t("./uh/Painter"),w=t("./uh/PopupDlg"),k=t("../localPref"),S=t("./ReviewUi"),M=t("../ScoreAnalyser"),j=t("./SettingDlg"),C=t("./uh/TopMenu"),q=t("./uh"),I=q.En,B=v.Ka,D=v.Ja,G=".neonBlack",T=a.Na,E=a.Ma,L=a.Am,O=a.zm,F=10,P=5;i.g=r,r.prototype.wp=function(){this.cb=9,this.Jo=0,this.ro=[L,O],this.Ap=!1},r.Bp=function(){x.Cp(o,k.ic("theme",G)),q.init(x),document.body.style.height=q.Dp+"px",I.Ep(d.appName);var t=new r;p.init("en",t.Fp.bind(t))},r.prototype.Fp=function(){window.addEventListener("beforeunload",this.Gp.bind(this,"unloading")),window.addEventListener("visibilitychange",this.Gp.bind(this,"visibility")),window.setInterval(this.Gp.bind(this,"autosave"),6e4*P),this.yp=k.ic("newGameIndex",1),this.Hp();var t=this["do"].hc();if(t){if(this.Ip(t))return;this.wp()}this.Jp()},r.prototype.Gp=function(t){var i="visibility"!==t?document.hidden:!document.hidden;i||(this.Ap&&this["do"].fc(this.Oo.Qb()),k.gc("newGameIndex",this.yp),k.Im())},r.prototype.Kp=function(){this.Ap&&(this["do"].rc(this.Oo.Qb()),this.Ap=!1)},r.prototype.Hp=function(){var t=this.Lp=new C({Mp:this.Np.bind(this),Op:d.appName+" V"+d.appVersion});t.Pp("settings",p("#settings")),t.Qp(),t.Pp("newGame",p("#newGame")),t.Pp("myGames",p("#myGames")),t.Pp("importGame",p("#importGame")),t.Qp(),this.Rp=t._o(I.Jn(null,"gameInfo")),this.Sp=t._o(I.Jn()),this.Tp=t.Pp("exportGame",p("#exportGame")),t.Qp()},r.prototype.Up=function(){this.Lp.Vp(p("#appTitle")),this.Rp.Ln(""),this.Sp.Kn(!1),this.Tp.Kn(!1)},r.prototype.Np=function(t){switch(t){case"newGame":this.Jp();break;case"myGames":this.Wp();break;case"importGame":this.Xp();break;case"exportGame":this.Yp();break;case"settings":this.Eo()}},r.prototype.Zp=function(t){this.rules=t,this.Fb.Pa(t)},r.prototype.kp=function(){this.Zm.refresh(),this.inDevMode&&this.devDisplay()},r.prototype.$p=function(t,i,n,r){var e=this._p="compact"===t,o=this.aq=I.Jn(i,"gameUi");n&&o.Jn(e?"testTitle":"pageTitle").Ln(n),this.bq=o.Jn("board"),r&&(this.cq=o.Jn("boardDesc").dq(r));var s=o.Jn("underBoard");this.eq(s),this.fq(s),this.zp||this.createDevControls();var a=this.Fb.Qa.cb+2;if(e)this.gq=28*a;else{this.Yo();var u=q.Dp-F-this.Lp.hq()-s.$n.clientHeight;this.gq=Math.min(u,q.iq-15)}this.Zm=new h,this.Zm.wn(this.jq.bind(this))},r.prototype.kq=function(){this.Up(),this.aq&&(I.removeChild(document.body,this.aq),this.aq=null,this.Zm=null)},r.prototype.Eo=function(){new j},r.prototype.Jp=function(){if(!this.lq){this.Kp(),this.kq();var t={cb:this.cb,Jo:this.Jo,ro:this.ro,rules:this.rules},i=this;this.lq=new m(t,function(t){return i.cb=t.cb,i.Jo=t.Jo,i.ro=[t.ro[E]?L:O,t.ro[T]?L:O],i.Zp(t.rules),i.mq(),i.lq=null,!0})}},r.prototype.Wp=function(){var t=this;new b(this["do"],function(i){return i.Yn?(t.nq(),!0):t.Ip(i.Fb)})},r.prototype.Xp=function(){this.Kp(),this.kq();var t={Ge:""},i=this;new g(t,function(t){if(t.Yn)return i.nq(),!0;var n=t.Vn;if(n||(n=t.Ge),!n)return!1;var r=i["do"].qc(n);if(r){var e=[];if(n=i.Oo.cc(n,r,e),!n)return new w(null,e.join("\n")),!1}return i.Ip(n)})},r.prototype.nq=function(){this.aq||this.lq||this.Jp()},r.prototype.eq=function(t){var i=this.oq=t.Jn("statusBar");this.pq=new y(i,"lastMove","Last:"),this.hp=i.Jn("message"),this.qq=new y(i,"nextPlayer","Next:")},r.prototype.lp=function(t){var i=this.Fb.history;if(i.length){var n=D(i[i.length-1]);this.pq.bo(n,1-this.Fb.Va,"#"+i.length+":");var r=B(n);r?this.Zm.un("CR",r[0],r[1]):this.Zm.un(null)}else this.pq.bo(null);t=this.Fb.Ya?null:D(t?t:""),this.qq.bo(t,this.Fb.Va),this.Zm.on(this.Fb.Va)},r.prototype.statusMessage=function(t){-1===t.indexOf("\n")&&(t="\n"+t),this.hp.Ln(t)},r.prototype.rq=function(t){this.sq.dq(t),this.sq.Kn(!0)},r.prototype.fq=function(t){var i=this.tq=t.Jn("mainControls"),n=i.Jn("leftDiv"),r=i.Jn("mainDiv"),e=i.Jn("rightDiv"),o=this;this.sq=t.Jn("outputBox").Kn(!1),this._p||this.xp.Ro(n,r,e),this.controls=q.So(),I.Rn(r,"bPass",p("#pass"),function(){o.uq("pass")}),I.Rn(r,"next","Next",function(){o.vq(1)}),I.Rn(r,"next10","Next 10",function(){o.vq(10)}),I.Rn(e,"nextAll","Finish",function(){o.vq()}),I.Rn(r,"bUndo",p("#undo"),function(){o.wq()}),I.Rn(r,"accept","Accept",function(){o.xq(!0)}),I.Rn(r,"refuse","Refuse",function(){o.xq(!1)}),I.Rn(r,"newg",p("#newGame"),this.Jp.bind(this)),I.Rn(e,"bResi",p("#resign"),this.yq.bind(this)),this.zq=n.Jn("aiVsAiFlags"),this.Aq=I.Bq(this.zq,"animated","Animated")},r.prototype.Yo=function(){var t=this.xp.Gb,i=this.Fb.Ya,n=this.Fb.Xa,r=!(i||n||t),e=this.ro[E]&&this.ro[T],o=this._p;o||this.xp.Yo(),this.controls.Kn(["accept","refuse"],n&&!t),this.controls.Kn(["bUndo","bPass","bResi"],r&&!e),this.controls.Kn(["next","next10","nextAll"],r&&e),this.controls.Kn(["aiVsAiFlags"],r&&e&&!o),this.controls.Kn(["newg"],i&&!t&&!o),this.zp||this.toggleDevControls(r,t,e)},r.prototype.Cq=function(){this.kp(),this.lp(),this.Yo(),this.statusMessage("")},r.prototype.Ip=function(t){this.Dq();var i=[];return this.Oo.ac(t,i)?(this.lq&&(this.lq=this.lq.close()),this.ro=[void 0,void 0],this.Eq(),this.Fq(),!0):(new w(null,i.join("\n")),this.kq(),!1)},r.prototype.mq=function(){this.Dq();var t=this.Oo.Lb;t.Ca("source",d.appName),t.Ca("event",this.yp++),this.Eq(),this.statusMessage("Game started. Your turn..."),this.Fq()},r.prototype.Dq=function(){this.Kp(),this.xp.Qo(),this.Fb.bb(this.cb,this.Jo,this.Ua),this.Oo.Mb()},r.prototype.Gq=function(){this.Oo.Mb(),this.Eq()},r.prototype.Eq=function(){this.Hq();var t=this.Fb;this.cb=t.Qa.cb,this.Jo=t.pb(),this.rules=t.ib(),this.zp||this.initDev(),this.aq||this.$p("main",document.body);var i=this._p?void 0:{background:"wood"};this.Zm.create(this.bq,this.gq,t.Qa,i),this.Cq()},r.prototype.Hq=function(){this.Iq=[];for(var t=this.Oo.Lb,i=E;T>=i;i++){var n=i===E?"playerBlack":"playerWhite",r=t.Ea(n);if(void 0===this.ro[i]&&(r&&r.indexOf(s.tm.Jl)>=0?this.ro[i]=L:this.ro[i]=O),this.ro[i]){var e=this.ep(i).constructor;r||t.Ca(n,e.Jl+"-"+e.Kl)}else r||t.Ca(n,"human")}},r.prototype.ep=function(t){var i=this.Iq[t];if(i)return i;var n=t===E?s.uf:s.tm;return i=this.Iq[t]=new n(this.Fb,t)},r.prototype.Fq=function(){this.Ap=!0,this.Jq(),this.np()||this.Kq()},r.prototype.Jq=function(){var t=this.Oo.Lb;this.Lp.Vp(t.Ea("playerWhite")+" VS "+t.Ea("playerBlack")+" (B)");var i="komi: "+(t.Ea("komi")||0);i+=e(", hand: ",this.Jo),i+=e(", rules: ",t.Ea("rules")),i+=e(", date: ",t.Ea("date")),i+=e(", source: ",t.Ea("source")),i+=e(", event: ",t.Ea("event")),i+=e(", place: ",t.Ea("place")),this.Rp.Ln(i),this.Sp.pp();var n=f.Um(this.Oo.Lb);if(n){var r=p("#downloadLatest")+" ("+n[1]+")",o=this.Sp.appendChild(I.Lq(null,"menuOption downloadLink",r,n[0]));o.v("click",this.Xp.bind(this))}this.Sp.Kn(!0),this.Tp.Kn(!0)},r.prototype.jq=function(t){if("!"===t[0])return!this.zp&&this.onDevKey(t.substr(1));var i=this.xp.Gb;return i||this.inEvalMode?(!this.zp&&this.inEvalMode&&this.showDevData(t,null,!0),void(i&&this.xp.mp(t))):void(this.ro[this.Fb.Va]&&this.zp||this.Fb.Xa||this.Fb.Ya||this.uq(t))},r.prototype.np=function(){
return this.Fb.Xa?(this.Mq(),!0):this.Fb.Ya?(this.ki(),this.Nq(),!0):!1},r.prototype.ki=function(){var t=this.fp.xf();this.Oq=t.join("\n")},r.prototype.Mq=function(){this.ki(),this.statusMessage(this.Oq),this.Yo(),this.Zm.Dn(this.fp.Af().Ic)},r.prototype.xq=function(t){var i=this.Fb.Va;return this.ro[i]&&!this.ro[1-i]&&(i=1-i),this.Fb.Bb(t,i),t?this.Nq():(this.statusMessage("Score in dispute. Continue playing..."),this.Yo(),this.kp(),void(this.ro[E]&&this.ro[T]||this.Kq()))},r.prototype.Nq=function(){this.statusMessage(this.Oq),this.Yo()},r.prototype.Pq=function(t){var i=this.Qq=this.Iq[this.Fb.Va];this.Rq=i.Wl;var n=i.dm();return this.Fb.rb(n),t||(this.kp(),this.lp(),this.statusMessage(""),this.inDevMode&&this.showDevData(n,i,!1)),this.np(),n},r.prototype.uq=function(t){if(!this.np()){if(!this.Fb.rb(t))return this.statusMessage(this.Fb.sb().join("\n"));this.kp(),this.lp(),this.statusMessage(""),window.setTimeout(function(t){t.Kq()},500,this)}},r.prototype.yq=function(){var t=this;w.ko(this.aq,p("#resignConfirm"),function(){t.Fb.rb("resi"),t.lp(),t.np()})},r.prototype.wq=function(){var t="undo";return(this.ro[E]===this.ro[T]||this.inEvalMode)&&(t="half_undo"),this.Fb.rb(t)?(this.kp(),this.lp(),void this.statusMessage('Performed "'+t+'"')):this.statusMessage(this.Fb.sb().join("\n"))},r.prototype.Kq=function(t){this.ro[this.Fb.Va]&&this.Pq(t)},r.prototype.vq=function(t){var i=1===t,n=this.Aq.Sq(),r=!i&&!n;this.Kq(r),i||this.Fb.Xa||window.setTimeout(function(i){i.vq(t-1)},n?100:0,this)},r.prototype.Yp=function(){var t=this.Oo.Qb();I.Tq(t,this["do"].kc(t)+".sgf")}},{"../../config/colors.json":6,"../GameLogic":9,"../GameRecord":10,"../GameVault":11,"../Move":17,"../ScoreAnalyser":19,"../ai":45,"../constants":46,"../localPref":48,"../main":50,"../net/goSites":51,"./Board":53,"./ImportDlg":54,"./MoveIndicator":55,"./MyGamesDlg":56,"./NewGameDlg":57,"./ReviewUi":58,"./SettingDlg":59,"./uh":76,"./uh/Painter":70,"./uh/PopupDlg":71,"./uh/TopMenu":72,"./uh/getText":75,"./ui.less":81}],61:[function(t,i,n){"use strict";var r=t("../ai"),e=[{name:"Chuckie",xm:t("../ai/chuckie")}];r.wm(e);var o=t("./Ui");o.Bp()},{"../ai":45,"../ai/chuckie":44,"./Ui":60}],62:[function(t,i,n){var r=".importDialog {\n  margin: 50px;\n}\n.importDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.importDialog .mainDiv .groupFrame {\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 7px;\n}\n.importDialog .mainDiv .fileInputBtn {\n  margin: 35px 15px;\n}\n.importDialog .mainDiv .moves {\n  margin: 35px 0;\n}\n.importDialog .mainDiv .movesInput {\n  width: 50%;\n}\n.importDialog .mainDiv .loadMovesInfo {\n  font-size: 50%;\n  font-style: italic;\n  margin-left: 203px;\n}\n.importDialog .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.importDialog .btnDiv .loadBtn,\n.importDialog .btnDiv .cancelBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  width: 240px;\n  font-size: 48px;\n}\n";t("lessify")(r),i.g=r},{lessify:84}],63:[function(t,i,n){var r=".moveIndicator {\n  height: 80px;\n  text-align: center;\n}\n.moveIndicator.black .icon {\n  background-color: #000;\n}\n.moveIndicator.black .text {\n  color: #fff;\n  text-shadow: #000 0 0 3px;\n}\n.moveIndicator.white .icon {\n  background-color: #fff;\n}\n.moveIndicator.white .text {\n  color: #000;\n  text-shadow: #fff 0 0 3px;\n}\n.moveIndicator .label {\n  font-size: 30px;\n}\n.moveIndicator .icon {\n  display: inline-block;\n  position: relative;\n  width: 68px;\n  height: 68px;\n  border: 1px solid rgba(127, 127, 127, 0.5);\n  border-radius: 50px;\n}\n.moveIndicator .icon .text {\n  position: relative;\n  width: 84px;\n  text-align: center;\n  left: -8px;\n  top: 12px;\n  font-size: 35px;\n  font-weight: bold;\n}\n";t("lessify")(r),i.g=r},{lessify:84}],64:[function(t,i,n){var r=".myGamesDialog {\n  margin: 50px;\n}\n.myGamesDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.myGamesDialog .mainDiv .gameList {\n  border: 1px solid #a9a9a9;\n  border-radius: 6px;\n  max-height: 450px;\n  overflow-y: auto;\n  overflow-x: hidden;\n  background-color: #fff;\n}\n.myGamesDialog .mainDiv .gameList .oneGame {\n  padding: 5px;\n}\n.myGamesDialog .mainDiv .gameList .oneGame.selected {\n  background-color: #b7b29e;\n  border-radius: 5px;\n}\n.myGamesDialog .mainDiv .recentGamesDropDwn {\n  max-width: calc(100% - 230px);\n  font-size: 48px;\n  margin: 35px 0;\n}\n.myGamesDialog .delGameBtn {\n  margin: 20px 0 20px 0;\n  height: 100px;\n  line-height: 100px;\n  display: block;\n}\n.myGamesDialog .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.myGamesDialog .btnDiv .loadBtn,\n.myGamesDialog .btnDiv .cancelBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  width: 240px;\n  font-size: 48px;\n}\n";t("lessify")(r),i.g=r},{lessify:84}],65:[function(t,i,n){var r='.newGameDialog {\n  margin: 50px;\n}\n.newGameDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.newGameDialog .mainDiv .centeredDiv {\n  margin-top: -40px;\n  text-align: center;\n}\n.newGameDialog .boardDiv .sizeBox {\n  display: inline-block;\n  position: relative;\n  width: 240px;\n  max-width: 33%;\n  text-align: center;\n  margin: 10px 18px 0 20px;\n}\n.newGameDialog .playerBtn {\n  position: relative;\n  vertical-align: top;\n  top: 162px;\n  left: 2px;\n  width: 200px;\n  max-width: 26%;\n  height: 200px;\n}\n.newGameDialog .playerBtn .playerBtnIcon {\n  background-image: url("assets/humanBlue.png");\n  -webkit-filter: brightness(0);\n  background-size: 80%;\n}\n.newGameDialog .playerBtn.robot .playerBtnIcon {\n  background-size: contain;\n  background-image: url("assets/robotBlue.png");\n}\n.newGameDialog .playerBtn.white .playerBtnIcon {\n  -webkit-filter: invert(1) grayscale(1);\n}\n.newGameDialog .sizeBtn {\n  position: relative;\n  width: 170px;\n  max-width: 88%;\n  height: 120px;\n  margin: 0 0 10px;\n}\n.newGameDialog .sizeBtn .sizeBtnIcon {\n  background-image: url("assets/upBlue.png");\n  background-size: 80%;\n  -webkit-filter: brightness(0);\n}\n.newGameDialog .sizeBtn.down {\n  margin-top: 4px;\n}\n.newGameDialog .sizeBtn.down .sizeBtnIcon {\n  background-image: url("assets/downBlue.png");\n}\n.newGameDialog .boardImgFrame {\n  display: inline-block;\n  position: relative;\n  width: 100%;\n  height: 240px;\n  background-color: #d1cac1;\n  border-radius: 5px;\n  box-shadow: black 3px 3px 6px;\n}\n.newGameDialog .boardImgFrame .boardImg {\n  width: 100%;\n  height: 100%;\n  background: url("assets/19x19.png") 50% no-repeat;\n}\n.newGameDialog .boardImgFrame .curSize {\n  position: absolute;\n  top: -4px;\n  width: 100%;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  text-align: center;\n  color: white;\n  text-shadow: black 3px 3px 5px;\n}\n.newGameDialog .advancedBtn {\n  width: 248px;\n  height: 100px;\n  line-height: 92px;\n  margin: 40px 10px 25px;\n  background-color: #faf7f5;\n  border: 1px solid #a7a7a7;\n}\n.newGameDialog .settingBtn {\n  position: relative;\n  left: calc(100% - 100px);\n  top: 9px;\n  width: 90px;\n  height: 80px;\n}\n.newGameDialog .settingBtn .settingBtnIcon {\n  background-image: url("assets/settings.png");\n  -webkit-filter: sepia(0.9) brightness(3);\n  background-size: auto 87%;\n}\n.newGameDialog .advancedDiv .rules {\n  display: inline-block;\n  margin-left: 87px;\n}\n.newGameDialog .advancedDiv .defAiInfo {\n  font-size: 50%;\n  font-style: italic;\n  width: 400px;\n  display: inline-block;\n}\n.newGameDialog .startBtn {\n  margin: 16px 0 10px -5px;\n  position: relative;\n  left: calc(100% - 240px);\n  width: 240px;\n  font-size: 48px;\n}\n';t("lessify")(r),i.g=r},{lessify:84}],66:[function(t,i,n){var r='.gameUi .statusBar .variationBtn {\n  margin: 1px;\n  width: 120px;\n  height: 112px;\n  line-height: 112px;\n}\n.gameUi .statusBar .moveComment {\n  margin-top: 2px;\n  background-color: white;\n  color: black;\n  border-radius: 5px;\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  text-align: left;\n  font-size: 22px;\n  font-weight: normal;\n  padding: 2px 4px;\n}\n.gameUi .mainControls .btn.back10,\n.gameUi .mainControls .btn.back1,\n.gameUi .mainControls .btn.forw1,\n.gameUi .mainControls .btn.forw10 {\n  max-width: 22%;\n}\n.gameUi .mainControls .btn.pruneBtn {\n  max-width: 120px;\n}\n.gameUi .mainControls .btn.pruneBtn .btnIcon {\n  background-image: url("assets/pruning.png");\n  -webkit-filter: sepia(0.9) brightness(3);\n  background-size: auto 87%;\n}\n';t("lessify")(r),i.g=r},{lessify:84}],67:[function(t,i,n){var r=".settingDlg {\n  z-index: 2000;\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  margin: 0 20%;\n  width: 60%;\n}\n.settingDlg .content {\n  padding: 20px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.settingDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: 0 0 -10px 0;\n}\n.settingDlg .btnDiv .okBtn {\n  float: right;\n}\n";t("lessify")(r),i.g=r},{lessify:84}],68:[function(t,i,n){"use strict";function r(t){this.options=t,this.Uq=[],this.parent=document.body,this.Vq=u.Jn(null,"contextMenu")}function e(){this.contextMenu.Wq(),this.action&&this.action.call(this)}t("./contextMenu.less");var o=t("./getText"),s=t("./PopupDlg"),h=t("./tapBehavior"),a=t("."),u=a.En,c=10;i.g=r,r.prototype._o=function(t,i){var n=u.Jn(this.Vq,"menuItem").Ln(t);return n.action=i,n.contextMenu=this,h(n,e),this.Uq.push(n),n},r.prototype.dp=function(t){var i;this.options&&this.options.$o?i=this.Wq.bind(this):this._o(o("#cancelAction"),null),s.Tn(this.Vq,this.parent,i);var n=u.Xq(t),r=n.left+n.width/2,e=n.top+n.height/2,h=u.Xq(this.Vq);r=Math.max(c,Math.min(r,a.iq-h.width-c)),e=Math.max(c,Math.min(e,a.Dp-h.height-c)),this.Vq.vo("left",Math.round(r)+"px"),this.Vq.vo("top",Math.round(e)+"px")},r.prototype.Wq=function(){s.Zn(this.Vq)}},{".":76,"./PopupDlg":71,"./contextMenu.less":74,"./getText":75,"./tapBehavior":78}],69:[function(t,i,n){"use strict";function r(){}var e="./assets/";i.g=r,r.Yq=function(t,i){var n=new XMLHttpRequest;n.onreadystatechange=function(){return 4===~~n.readyState?200!==~~n.status?i("xhrError: "+n.status):void i(null,n.response):void 0},n.open("GET",t,!0),n.send()},r.Zq=function(t,i){return r.Yq(e+t,i)},r.Tq=function(t,i){return r.Yq(t,i)}},{}],70:[function(t,i,n){"use strict";function r(){this.$q={},this._q=null,this.up=""}function e(t,i){for(var n in i)t.style[n]=i[n]}function o(t,i,n,r){var e,o=n[i],s=r[i];if(o)for(e in o)t.style[e]=s?s[e]||null:null;if(s)for(e in s)t.style[e]=s[e]}i.g=new r,r.prototype.Cp=function(t,i){this.$q=t,this.vp(i,!0),this.ar(document.body,"body")},r.prototype.tp=function(){return Object.keys(this.$q)},r.prototype.vp=function(t,i){if(t!==this.up){var n=this._q;if(this.up=t,this._q=this.$q[t],!i)for(var r=document.all,e=0;e<r.length;e++){var o=r[e];this.br(o,n)}}},r.prototype.ar=function(t,i){if(this._q){var n=this._q[t.localName];if(n&&e(t,n),i&&(n=this._q["."+i],n&&e(t,n),i.indexOf(" ")>=0))for(var r=i.split(" "),o=0;o<r.length;o++)n=this._q["."+r[o]],n&&e(t,n)}},r.prototype.br=function(t,i){o(t,t.localName,i,this._q);for(var n=t.className.split(" "),r=0;r<n.length;r++)o(t,"."+n[r],i,this._q)},r.prototype.cr=function(t,i,n){var r=this._q[i+"+"+n];if(r){var e=this._q[i]||{};for(var o in r)t.style[o]=e[o]||null}},r.prototype.toggle=function(t,i,n){if(this._q){var r,o=t.className.split(" ");if(n){var s=this._q[t.localName+"+"+i];for(s&&e(t,s),r=0;r<o.length;r++)s=this._q["."+o[r]+"+"+i],s&&e(t,s)}else for(this.cr(t,t.localName,i),r=0;r<o.length;r++)this.cr(t,"."+o[r],i)}}},{}],71:[function(t,i,n){"use strict";function r(){var t=this.sp;t.options&&(t.options.dr=this.id),o.Zn(t.In),t.Fn&&t.Fn(t.options)}function e(t,i,n,e){var o=h.Rn(t,"popupDlgBtn",n,r);o.sp=i,o.id=e}function o(t,i,n,r,s){this.parent=t||document.body,this.options=r,this.Fn=s;var u=this.In=h.Jn(null,"popupDlg dialog");u.Jn("dialogTitle").Ln(n||a("#problem"));var c=u.Jn("content");h.no(c,"message",i);for(var l=r&&r.buttons||[a("#OK")],p=u.Jn("btnDiv"),f=0;f<l.length;f++)e(p,this,l[f],f);o.Tn(this.In,this.parent)}function s(t){var i=h.Jn(null,"popupOverlay");return t&&(t=t.$n||t,i.vo("left",t.offsetLeft+"px"),i.vo("top",t.offsetTop+"px"),i.vo("width",t.scrollWidth+2+"px"),i.vo("height",t.scrollHeight+2+"px")),i}t("./popupDlg.less");var h=t(".").En,a=t("./getText"),u=t("./tapBehavior");i.g=o,o.Tn=function(t,i,n){var r=t.er=s(i);r.parent=i,r.gr(i),t.gr(r,!0),r.vo("opacity",1),n&&u(r,n)},o.Zn=function(t){t.er.vo("opacity",0),window.setTimeout(function(){t.Kn(!1),h.removeChild(t.er.parent,t.er)},300)},o.ko=function(t,i,n){var r={buttons:[a("#yes"),a("#no")]};new o(t,i,a("#confirmTitle"),r,function(t){0===t.dr&&n()})}},{".":76,"./getText":75,"./popupDlg.less":77,"./tapBehavior":78}],72:[function(t,i,n){"use strict";function r(t){this.hr={},this.Mp=t.Mp,this.Gn(t)}function e(){this.Lp.kr(),this.Lp.Mp(this.id)}function o(){this.Lp.kr()}t("./topMenu.less");var s=t("./tapBehavior"),h=t(".").En;i.g=r,r.prototype.hq=function(){return this.ir.$n.clientHeight},r.prototype.Vp=function(t){this.jr.Ln(t)},r.prototype.Qp=function(t){return this.lr.Jn(t||"menuSeparator")},r.prototype.Pp=function(t,i){var n=this.lr.Jn("menuOption").Ln(i);return n.id=t,n.Lp=this,s(n,e),this.hr[t]=n,n},r.prototype._o=function(t){return this.lr.appendChild(t)},r.prototype.removeItem=function(t){this.lr.removeChild(t)},r.prototype.Gn=function(t){var i=this.er=h.Jn(document.body,"topMenuOverlay");i.Lp=this,i.Kn(!1),s(i,o);var n=h.Jn(document.body,"topMenu");this.ir=h.Do(n,"menuBtn",this.mr.bind(this)),this.ir.co("btn",!1),this.jr=n.Jn("topTitle"),this.lr=n.Jn("slideMenu");var r=this.lr.Jn("menuTitle").Ln(t.Op);s(r,this.kr.bind(this))},r.prototype.mr=function(){this.er.Kn(!0);var t=this.er.$n.clientWidth;t=1,this.er.vo("opacity",1),this.lr.co("opened",!0)},r.prototype.kr=function(){var t=this.er;t.vo("opacity",0),window.setTimeout(function(){t.Kn(!1)},300),this.lr.co("opened",!1)}},{".":76,"./tapBehavior":78,"./topMenu.less":79}],73:[function(t,i,n){"use strict";function r(t){this.$n=t.$n||t,this.nr={},this.or={},this.pr={},this.timeout=null,this.qr=null,this.rr=null}function e(t,i){window.clearTimeout(t.timeout),t.timeout=null,t.$n.style.webkitTransition=t.qr,!i&&t.rr&&t.rr(),t.rr=null}i.g=r,r.prototype.from=function(t,i){return this.or[t]=i,this},r.prototype.Un=function(t,i){return this.pr[t]=i,this},r.prototype.start=function(t,i){var n=this.$n;n.sr&&n.sr.timeout&&e(n.sr,!0),n.sr=this,this.qr=n.style.webkitTransition,n.style.webkitTransition=null;for(var r in this.or)this.nr[r]=n.style[r],n.style[r]=this.or[r];n.clientHeight||(n=n);var o="all "+t+"ms ease-in-out";n.style.webkitTransition=o;for(r in this.pr)this.nr.hasOwnProperty(r)||(this.nr[r]=n.style[r]),n.style[r]=this.pr[r];return this.rr=i,this.timeout=window.setTimeout(e,t,this),this},r.prototype.reverse=function(t,i){var n=this.pr;this.pr=this.or,this.or=n,this.start(t,i)},r.prototype.No=function(t,i){this.pr=this.nr,this.nr={},this.or={},this.start(t,i)}},{}],74:[function(t,i,n){var r=".contextMenu {\n  position: relative;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  width: 150px;\n  background-color: rgba(120, 120, 120, 0.2);\n  border-radius: 7px;\n  border: 1px solid #58636d;\n}\n.contextMenu .menuItem {\n  margin: 1px 1px 0 1px;\n  padding: 11px;\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.7);\n  color: #e4e4e4;\n}\n";t("lessify")(r),i.g=r},{lessify:84}],75:[function(t,i,n){"use strict";function r(t){return a[t]}var e=t("./GetFile"),o=t("../../log"),s="en",h=t("../../../assets/i18n_en.json"),a=h;i.g=r,r.init=function(t,i){if(a=h,t===s)return i();var n="i18n_"+t+".json";e.Zq(n,function(t,r){return t?(o.error("Failed to get file "+n+": "+t),i(t)):(a=JSON.parse(r),void i())})}},{"../../../assets/i18n_en.json":5,"../../log":49,"./GetFile":69}],76:[function(t,i,n){"use strict";function r(t,i,n,e){this.type=i;var o=this.$n=document.createElement(i);this.name=e,this.tr=!1,n&&(o.className=n),a&&a.ar(o,n),t&&(t instanceof r?t.$n:t).appendChild(o),u&&u.add(e||n,this)}function e(t,i,n,r){this.left=t,this.top=i,this.width=n,this.height=r}function o(){this.Br={}}var s=t("./tapBehavior"),h=null,a=null,u=null,c=1,l=1456,p=159;n.init=function(t,i){a=t,h=i,n.iq=document.documentElement.clientWidth,n.Dp=document.documentElement.clientHeight,n.Dp===l&&(n.Dp+=p)},n.En=r,r.prototype.gr=function(t,i){return(t instanceof r?t.$n:t).appendChild(this.$n),this.tr=i,h&&i&&h.addElement(this.$n),this},r.prototype.appendChild=function(t,i){return t.gr(this,i)},r.removeChild=function(t,i){i&&(h&&i.tr&&h.removeElement(i.$n),t instanceof r&&(t=t.$n),t.removeChild(i.$n))},r.prototype.removeChild=function(t){r.removeChild(this,t)},r.prototype.pp=function(){this.$n.innerHTML=null},r.prototype.Ln=function(t){return this.$n.textContent=t,this},r.prototype.dq=function(t){return this.$n.innerHTML=t,this},r.prototype.setAttribute=function(t,i){return this.$n.setAttribute(t,i),this},r.prototype.vo=function(t,i){return this.$n.style[t]=i,this},r.prototype.Kn=function(t){return t===this.ur()?this:(this.$n.style.display=t?"":"none",this.vr=!!t,h&&this.tr&&(t?h.addElement(this.$n):h.removeElement(this.$n)),this)},r.prototype.ur=function(){return this.vr||void 0===this.vr},r.prototype.xo=function(t){return this.$n.disabled=!t,this.co("disabled",!t),this},r.prototype.text=function(){return this.$n.textContent},r.prototype.wr=function(){return this.$n.innerHTML},r.prototype.value=function(){return this.$n.value},r.prototype.Sq=function(){return this.$n.checked},r.prototype.dn=function(){return this.$n},r.prototype.clear=function(){this.$n.innerHTML=""},r.prototype.v=function(t,i){var n=this;this.$n.addEventListener(t,function(t){i.call(n,t)})},r.prototype.co=function(t,i){var n=this.$n,r=n.className,e=" "+r+" ",o=" "+t+" ",s=e.indexOf(o);if(i){if(s>=0)return;a&&a.toggle(n,t,i),n.className=r+" "+t}else{if(0>s)return;n.className=e.replace(o," ").trim(),a&&a.toggle(n,t,i)}},r.prototype.xr=function(){this.$n.scrollTop=this.$n.scrollHeight},r.Jn=function(t,i,n){return new r(t,"div",i,n||i)},r.prototype.Jn=function(t,i){return new r(this,"div",t,i||t)},r.yr=function(t,i,n,e){var o=new r(t,"button",i+"Button",i);return n&&(o.$n.innerText=n),o.v("click",e),o},r.Rn=function(t,i,n,e){var o=new r(t,"div","btn "+i,i);return o.Ln(n),s(o,e),o},r.Do=function(t,i,n){var e=r.Rn(t,i,null,n);return e.Jn(i+"Icon btnIcon"),e},r.Lq=function(t,i,n,e){var o=new r(t,"a",i,i);return o.setAttribute("href",e),o.Ln(n),o},r.no=function(t,i,n){return new r(t,"div",i,i).Ln(n)},r.Qn=function(t){return new r(t,"br")},r.On=function(t,i,n,e){var o=i+"Label";r.no(t,o+" inputLbl",n,o);var s=new r(t,"input",i+"Input inputBox",i);return void 0!==e&&(s.$n.value=e),s},r.Bq=function(t,i,n,e,o){var s=new r(t,"div",i+"Div chkBoxDiv"),h=new r(s,"input",i+"ChkBox chkBox",i),a=h.$n;return a.type="checkbox",a.name=i,void 0!==e&&(a.value=e),a.id=i+"ChkBox"+(void 0!==e?e:c++),o&&(a.checked=!0),new r(s,"label",i+"ChkLabel chkLbl",i).Ln(n).setAttribute("for",a.id),h},r.zr=function(t,i,n,e,o){e||(e=n);for(var s=[],h=0;h<n.length;h++){var a=s[h]=new r(t,"input",i+"RadioBtn radioBtn",i),u=a.$n;u.type="radio",u.name=i,u.value=e[h],u.id=i+"Radio"+e[h],e[h]===o&&(u.checked=!0),new r(t,"label",i+"RadioLbl radioLbl",i).Ln(n[h]).setAttribute("for",u.id)}return s},r.Ar=function(t){for(var i=0;i<t.length;i++)if(t[i].$n.checked)return t[i].$n.value},r.po=function(t,i,n,e,o){if(e||(e=n),"byIndex"===e)for(e=[],a=0;a<n.length;a++)e.push(a);var s=new r(t,"select",i+"DropDwn dropDwn",i);s.values=e;for(var h=0,a=0;a<n.length;a++){var u=new r(s,"option").$n;u.value=e[a],u.textContent=n[a],e[a]===o&&(h=a)}return s.$n.selectedIndex=h,s},r.prototype.select=function(t){var i=this.values.indexOf(t);-1!==i&&(this.$n.selectedIndex=i)},r.Xq=function(t){var i=(t.$n||t).getBoundingClientRect();return new e(i.left,i.top,i.width,i.height)},n.So=function(){return u=new o},n.Cr=function(){u=null},o.prototype.add=function(t,i){this.Br[t]=i},o.prototype.get=function(t){return this.Br[t]},o.prototype.xo=function(t,i,n){"ALL"===t&&(t=Object.keys(this.Br));for(var r=0;r<t.length;r++)if(!n||-1===n.indexOf(t[r])){var e=this.Br[t[r]];e?e.xo(i):console.error("Invalid control name:",t[r])}},o.prototype.Kn=function(t,i,n){"ALL"===t&&(t=Object.keys(this.Br));for(var r=0;r<t.length;r++)if(!n||-1===n.indexOf(t[r])){var e=this.Br[t[r]];e?e.Kn(i):console.error("Invalid control name:",t[r])}},r.Ep=function(t){document.head.getElementsByTagName("title")[0].textContent=t},r.Dr=function(){var t=window.getSelection();if(!t.rangeCount)return null;var i=t.getRangeAt(0),n=i.startContainer.data;return n?n.substring(i.startOffset,i.endOffset):null},r.Tq=function(t,i,n){var r=new Blob([t],{type:n||"text/plain"}),e=document.createElement("a");e.href=URL.createObjectURL(r),e.download=i,e.click()},r.prototype.Wn=function(){var t=this.$n.files;return t&&t.length>0},r.prototype.Xn=function(t){var i=this.$n.files;if(!i)return console.error("Invalid field type for uploadFile: "+this.type);if(!i.length)return!1;var n=new FileReader;return n.readAsText(i[0]),n.onloadend=function(){return t(n.result)},!0}},{"./tapBehavior":78}],77:[function(t,i,n){var r=".popupOverlay {\n  z-index: 2000;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.7);\n  transition: opacity 300ms ease-out;\n  opacity: 0;\n}\n.popupDlg {\n  position: relative;\n  margin: 30px auto;\n  width: 480px;\n}\n.popupDlg .content {\n  padding: 20px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.popupDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.popupDlg .btnDiv .popupDlgBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n}\n";t("lessify")(r),i.g=r},{lessify:84}],78:[function(t,i,n){"use strict";var r=t("./touchManager");i.g=function(t,i){r.jn(t.$n,function(n){t.$n.disabled||"tap"===n&&i.call(t)})}},{"./touchManager":80}],79:[function(t,i,n){var r='.topMenuOverlay {\n  z-index: 2000;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  transition: opacity 300ms ease-out;\n  opacity: 0;\n}\n.topMenu {\n  width: 100%;\n  height: 130px;\n}\n.topMenu .menuBtn {\n  display: inline-block;\n  width: 130px;\n  height: 100%;\n  background-color: #000;\n}\n.topMenu .menuBtn .menuBtnIcon {\n  background-image: url("assets/menuBtn.png");\n  -webkit-filter: invert(1) grayscale(1);\n}\n.topMenu .topTitle {\n  display: inline-block;\n  vertical-align: top;\n  width: calc(100% - 130px);\n  height: 100%;\n  overflow: hidden;\n  background-color: #333;\n  color: #fff;\n  padding-left: 31px;\n  font-size: 30px;\n  line-height: 130px;\n}\n.topMenu .slideMenu {\n  z-index: 2010;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 85%;\n  min-height: 100%;\n  transition: transform 300ms ease-out;\n  -webkit-transform: translateX(-100%);\n  transform: translateX(-100%);\n  background-color: #000;\n  color: #fff;\n}\n.topMenu .slideMenu.opened {\n  -webkit-transform: translateX(0);\n  transform: translateX(0);\n}\n.topMenu .slideMenu .menuTitle {\n  height: 140px;\n  line-height: 140px;\n  padding-left: 50px;\n  font-size: 43px;\n  border-bottom: 1px solid #909090;\n  background-color: #323435;\n}\n.topMenu .slideMenu .menuOption {\n  padding: 0 100px;\n  height: 140px;\n  line-height: 140px;\n  font-size: 50px;\n}\n.topMenu .slideMenu .menuSeparator {\n  border-bottom: 1px solid #777;\n}\n';t("lessify")(r),i.g=r},{lessify:84}],80:[function(t,i,n){"use strict";function r(){this.Er=this.Fr=0,this.Gr=this.Hr=!1,this.target=null,this.Ir=this.startTime=this.Jr=0}function e(t){var i=t.currentTarget;return v.Ir+=t.changedTouches.length,v.Ir>1?v.Kr(i):void v.Lr(t.changedTouches[0],i)}function o(t){return v.Ir-=t.changedTouches.length,v.Ir>0?console.warn("Extra touchend count?",t):void(v.Mr(t.changedTouches[0],v.target)&&t.preventDefault())}function s(t){return t.changedTouches.length>1?v.Kr(v.target):void(v.Nr(t.changedTouches[0],v.target)&&t.preventDefault())}function h(t){v.Ir-=t.changedTouches.length,v.Kr(v.target)}function a(t){t.button===d&&v.Lr(t,t.currentTarget)}function u(t){t.button===d&&v.Mr(t,v.target)&&t.preventDefault()}function c(t){v.Nr(t,v.target)&&t.preventDefault()}var l=10,p=50,f=300,g=500,d=0,v=i.g=new r;r.prototype.Or=function(t,i){if(i)null!==this.target&&console.error("Forgot to stop listening on",this.target),this.Gr=!0,this.target=t,t.addEventListener("touchmove",s),t.addEventListener("touchend",o),t.addEventListener("touchcancel",h),document.addEventListener("mousemove",c),document.addEventListener("mouseup",u);else{if(null===this.target)return console.warn("Not listening anyway");this.Gr=!1,this.target=null,t.removeEventListener("touchmove",s),t.removeEventListener("touchend",o),t.removeEventListener("touchcancel",h),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u)}},r.prototype.Lr=function(t,i){t.stopPropagation(),this.Or(i,!0),this.Gr=!0,this.Er=t.clientX,this.Fr=t.clientY,this.startTime=Date.now();var n=this;this.Pr&&window.clearTimeout(this.Pr),this.Pr=window.setTimeout(function(){n.Pr=null,n.Gr&&!n.Hr&&n.Qr(t,i)},f)},r.prototype.Qr=function(t,i){this.Hr=!0,this.startTime=Date.now(),i.Rr("dragStart",t.pageX-i.offsetLeft,t.pageY-i.offsetTop)},r.prototype.Kr=function(t){return this.Ir=0,this.Or(t,!1),this.Hr&&(this.Hr=!1,t.Rr("dragCancel")),!0},r.prototype.Nr=function(t,i){var n=Date.now();return n-this.Jr<p?!0:(this.Jr=n,this.Hr?(i.Rr("drag",t.pageX-i.offsetLeft,t.pageY-i.offsetTop),!0):Math.abs(t.clientX-this.Er)+Math.abs(t.clientY-this.Fr)<l?!1:n-this.startTime<f?(this.Or(i,!1),!1):this.Qr(t,i))},r.prototype.Mr=function(t,i){if(this.Hr&&Date.now()-this.startTime<g)return this.Kr(i);var n=this.Hr?"dragEnd":"tap";return i.Rr(n,t.pageX-i.offsetLeft,t.pageY-i.offsetTop),this.Or(i,!1),this.Hr=!1,!0},r.prototype.jn=function(t,i){t.Rr=i,t.addEventListener("touchstart",e),t.addEventListener("mousedown",a)}},{}],81:[function(t,i,n){var r='body {\n  background-color: #865e50;\n  font-family: "Arial";\n  margin: 0px;\n  height: 2048px;\n}\ndiv {\n  box-sizing: border-box;\n}\n::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 7px;\n  height: 7px;\n}\n::-webkit-scrollbar-track {\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.2);\n  -webkit-border-radius: 10px;\n  border-radius: 7px;\n  margin: 1px;\n}\n::-webkit-scrollbar-thumb {\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, 0.5);\n}\n.downloadLink {\n  text-decoration: none;\n  color: white;\n}\n.pageTitle {\n  margin-top: 7px;\n  margin-bottom: 7px;\n  font-size: 40px;\n  font-weight: bold;\n}\n.subTitle {\n  font-size: 30px;\n  margin-top: 0.5em;\n  margin-bottom: 5px;\n}\n.logBox {\n  font-size: 28px;\n  font-family: "Arial";\n  background-color: white;\n  border: solid #cca 1px;\n  border-radius: 8px;\n  padding: 5px;\n  overflow-y: auto;\n  word-wrap: break-word;\n}\n.inputLbl {\n  display: inline-block;\n  margin: 0 5px 0 10px;\n  font-size: 28px;\n}\n.inputBox {\n  margin: 17px 0 17px 0;\n  min-height: 1cm;\n  text-align: left;\n  font-size: 42px;\n  color: inherit;\n}\n.btn {\n  display: inline-block;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  box-sizing: border-box;\n  padding: 0 2px;\n  border-radius: 13px;\n  width: 160px;\n  height: 120px;\n  line-height: 120px;\n  text-align: center;\n  font-size: 28px;\n  border-color: #987;\n  background-color: #af9e8e;\n  color: #000000;\n}\n.btn.toggled {\n  background-color: #AD4343;\n}\n.btn.disabled {\n  color: #888;\n  opacity: 0.4;\n}\n.btn.pressed {\n  border-style: outset;\n}\n.btnIcon {\n  width: 100%;\n  height: 100%;\n  background-position: 50%;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n.chkBoxDiv {\n  display: inline-block;\n  margin-right: 10px;\n}\n.chkBox {\n  margin: 5px 3px 14px 2px;\n  width: 29px;\n  height: 1.5em;\n}\n.chkLbl {\n  font-size: 28px;\n}\n.dropDwn {\n  font-size: 42px;\n  margin: 17px 13px 17px 13px;\n  color: inherit;\n}\n.radioBtn {\n  margin: 17px 0px 17px 13px;\n  width: 29px;\n  height: 1.5em;\n}\n.radioLbl {\n  margin-right: 13px;\n}\n.dialog {\n  padding: 10px;\n  background-color: #ffffee;\n  color: #000000;\n  border: solid #cca 1px;\n  border-radius: 10px;\n  font-family: Arial;\n  font-size: 42px;\n}\n.dialogTitle {\n  font-size: 50px;\n  background-color: #ffebce;\n  color: #000000;\n  border: solid 1px rgba(195, 50, 50, 0.2);\n  border-radius: 10px;\n  margin: -6px;\n  margin-bottom: 15px;\n  padding: 10px 0px 10px 12px;\n}\nbody .contextMenu {\n  width: 500px;\n  border-radius: 9px;\n  border: 1px solid #58636d;\n  background-color: #3b3d47;\n}\nbody .contextMenu .menuItem {\n  font-size: 30px;\n  padding: 50px;\n  background-color: #000;\n  border: 1px solid #505050;\n  border-radius: 9px;\n}\n.gameUi {\n  padding: 2px;\n}\n.gameUi .board {\n  margin: 5px 0;\n  background-color: #402f23;\n  border-radius: 7px;\n}\n.gameUi .board .wgo-board {\n  margin: 0 auto;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  /* disables grey shade on long-tap for Safari */\n  /* Below avoid issues when tap-hold on Android */\n  -webkit-user-select: none;\n  -webkit-touch-callout: none;\n}\n.gameUi .boardDesc {\n  margin-top: 3px;\n  font-weight: bold;\n  font-style: italic;\n}\n.gameUi .btn {\n  width: 200px;\n}\n.gameUi .underBoard {\n  padding-bottom: 5px;\n}\n.gameUi .statusBar {\n  position: relative;\n  height: 130px;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: row;\n  flex-direction: row;\n  background-color: #dfc2ac;\n  border: rgba(0, 0, 0, 0.7) 1px solid;\n  border-radius: 7px;\n}\n.gameUi .statusBar .lastMove {\n  margin: 0 15px;\n}\n.gameUi .statusBar .message {\n  -webkit-flex: 1;\n  flex: 1;\n  white-space: pre-wrap;\n  overflow-y: auto;\n  font-size: 26px;\n  font-weight: bold;\n  text-align: center;\n  padding-top: 5px;\n}\n.gameUi .statusBar .nextPlayer {\n  margin: 0 8px 0 15px;\n}\n.gameUi .mainControls {\n  margin-top: 10px;\n}\n.gameUi .mainControls .leftDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 20%;\n  padding-left: 10px;\n  text-align: left;\n}\n.gameUi .mainControls .leftDiv .animatedDiv {\n  margin: 16px;\n}\n.gameUi .mainControls .mainDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 60%;\n  text-align: center;\n}\n.gameUi .mainControls .mainDiv .btn {\n  margin: 0 3px;\n  height: 200px;\n  line-height: 200px;\n  max-width: 44%;\n}\n.gameUi .mainControls .rightDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 20%;\n  text-align: right;\n}\n.gameUi .mainControls .leftDiv .btn,\n.gameUi .mainControls .rightDiv .btn {\n  background-color: #5c4137;\n  color: #faebd7;\n  max-width: 100%;\n}\n.gameUi .mainControls .leftDiv .btn.toggled,\n.gameUi .mainControls .rightDiv .btn.toggled {\n  background-color: #AD4343;\n}\n.gameUi .mainControls .leftDiv .btn.resi,\n.gameUi .mainControls .rightDiv .btn.resi {\n  height: 100px;\n  line-height: 100px;\n  width: 150px;\n}\n.gameUi .outputBox {\n  margin: 20px 100px;\n  font-size: 24px;\n  word-wrap: break-word;\n}\n.gameInfo {\n  padding: 15px 20px 15px 100px;\n  font-size: 32px;\n  background-color: #282a2b;\n}\n';
t("lessify")(r),i.g=r},{lessify:84}],82:[function(t,i,n){!function(t,i){"use strict";var n=document.getElementsByTagName("script"),r=n[n.length-1].src.split("?")[0],e=r.split("/").slice(0,-1).join("/")+"/",o={version:"2.3.1",B:1,W:-1,Sr:!0,Tr:e,lang:"en",Ur:{Vr:{}}};o.opera=-1!=navigator.userAgent.search(/(opera)(?:.*version)?[ \/]([\w.]+)/i),o.Wr=-1!=navigator.userAgent.search(/(webkit)[ \/]([\w.]+)/i),o.Xr=-1!=navigator.userAgent.search(/(msie) ([\w.]+)/i),o.Yr=-1!=navigator.userAgent.search(/(mozilla)(?:.*? rv:([\w.]+))?/i)&&!o.Wr&&!o.Xr,o.Zr=function(t){var i=o.Ur[o.lang][t]||o.Ur.Vr[t];if(i){for(var n=1;n<arguments.length;n++)i=i.replace("$",arguments[n]);return i}return t},o.$r=function(t,i){return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype._r=t,i},o.as=function(){throw Error("unimplemented abstract method")},o.clone=function(t){if(t&&"object"==typeof t){var i=t.constructor==Array?[]:{};for(var n in t)t[n]==t?i[n]=t:i[n]=o.clone(t[n]);return i}return t},o.bs=function(t){return t&&"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t};var s=function(n,r){var r=r||{};for(var e in r)this[e]=r[e];for(var e in o.cn["default"])this[e]===i&&(this[e]=o.cn["default"][e]);for(var e in s.$q["default"])this._q[e]===i&&(this._q[e]=s.$q["default"][e]);this.cs=this.section.left,this.ds=this.section.top,this.es=this.size-1-this.section.right,this.gs=this.size-1-this.section.bottom,this.init(),n.appendChild(this.kn),this.hs=t.devicePixelRatio||1,this.width&&this.height?this.js(this.width,this.height):this.width?this.ks(this.width):this.height&&this.ls(this.height)};s.$q={},s.$q.ms={shadowColor:"rgba(32,32,32,0.5)",shadowTransparentColor:"rgba(32,32,32,0)",shadowBlur:0,shadowSize:function(t){return t.shadowSize},markupBlackColor:"rgba(255,255,255,0.8)",markupWhiteColor:"rgba(0,0,0,0.8)",markupNoneColor:"rgba(0,0,0,0.8)",markupLinesWidth:function(t){return t.ns?t.fn/7:t.lineWidth},gridLinesWidth:1,gridLinesColor:function(t){return"rgba(0,0,0,"+Math.min(1,t.fn/15)+")"},starColor:"#000",starSize:function(t){return t.starSize*(t.width/300+1)},stoneSize:function(t){return t.stoneSize*Math.min(t.xn,t.yn)/2},coordinatesColor:"rgba(0,0,0,0.7)",font:function(t){return t.font},linesShift:.5},s.$q["default"]={shadowColor:"rgba(62,32,32,0.5)",shadowTransparentColor:"rgba(62,32,32,0)",shadowBlur:function(t){return.1*t.fn},shadowSize:1,markupBlackColor:"rgba(255,255,255,0.9)",markupWhiteColor:"rgba(0,0,0,0.7)",markupNoneColor:"rgba(0,0,0,0.7)",markupLinesWidth:function(t){return t.fn/8},gridLinesWidth:function(t){return t.fn/15},gridLinesColor:"#654525",starColor:"#531",starSize:function(t){return t.fn/8+1},stoneSize:function(t){return Math.min(t.xn,t.yn)/2},coordinatesColor:"#531",os:"rgba(0,32,128,0.8)",font:"calibri",linesShift:.25};var h,a=function(t,i){return"function"==typeof i._q[t]?i._q[t](i):i._q[t]},u={ps:function(t,i){var n=i.qs(t.x),r=i.rs(t.y),e=i.fn;this.beginPath();var o=a("shadowBlur",i),s=Math.max(0,e-.5),h=this.createRadialGradient(n-i.ss,r-i.ss,s-1-o,n-i.ss,r-i.ss,s+o);h.addColorStop(0,a("shadowColor",i)),h.addColorStop(1,a("shadowTransparentColor",i)),this.fillStyle=h,this.arc(n-i.ss,r-i.ss,s+o,0,2*Math.PI,!0),this.fill()},clear:function(t,i){var n=i.qs(t.x),r=i.rs(t.y),e=i.fn;this.clearRect(n-1.1*e-i.ss,r-1.1*e-i.ss,2.2*e,2.2*e)}},c=function(t,i,n){return t.sn[i][n][0].c==o.B?a("markupBlackColor",t):t.sn[i][n][0].c==o.W?a("markupWhiteColor",t):a("markupNoneColor",t)},l=function(t,i,n){return t.sn[i][n][0]&&t.sn[i][n][0].c==o.W||t.sn[i][n][0].c==o.B},p=function(t,i){var n;t[i].clear(),t[i].ps(t);for(var r=0;r<t.size;r++)for(var e=0;e<t.size;e++)for(var o=0;o<t.sn[r][e].length;o++){var h=t.sn[r][e][o];n=h.type?"string"==typeof h.type?s.us[h.type]:h.type:t.ts,n[i]&&n[i].ps.call(t[i].getContext(h),h,t)}for(var a=0;a<t.vs.length;a++){var h=t.vs[a],n=h.Mp;n[i]&&n[i].ps.call(t[i].getContext(h.ws),h.ws,t)}},f=function(t,i,n,r,e,o,s,h){t.strokeStyle="rgba(64,64,64,0.2)",t.lineWidth=r/30*h,t.beginPath(),r-=Math.max(1,t.lineWidth);var a,u,i,c,l,p=i+r*Math.cos(e*Math.PI),f=n+r*Math.sin(e*Math.PI),g=i+r*Math.cos(o*Math.PI),d=n+r*Math.sin(o*Math.PI);g>p?(a=(d-f)/(g-p),u=Math.atan(a)):g==p?u=Math.PI/2:(a=(d-f)/(g-p),u=Math.atan(a)-Math.PI);var v=s*r;c=Math.sin(u)*v,l=Math.cos(u)*v;var y=p+c,b=f-l,m=g+c,x=d-l;t.moveTo(p,f),t.bezierCurveTo(y,b,m,x,g,d),t.stroke()},g=function(t){for(var i=t.angle,n=t.angle,r=0;r<t.xs.length;r++)i+=t.xs[r],n-=t.xs[r],f(t.ys,t.x,t.y,t.zs,i,n,t.As,t.Bs)};s.us={Cs:{kh:{ps:function(t,i){var n,r=i.qs(t.x),e=i.rs(t.y),s=i.fn;t.c==o.W?(n=this.createRadialGradient(r-2*s/5,e-2*s/5,s/3,r-s/5,e-s/5,5*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#aaa")):(n=this.createRadialGradient(r-2*s/5,e-2*s/5,1,r-s/5,e-s/5,4*s/5),n.addColorStop(0,"#666"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(r-i.ss,e-i.ss,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill()}},Ds:u},Es:{kh:{ps:function(t,i){var n,r=i.qs(t.x),e=i.rs(t.y),s=i.fn;t.c==o.W?(n=this.createRadialGradient(r-2*s/5,e-2*s/5,2,r-s/5,e-s/5,4*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#ddd")):(n=this.createRadialGradient(r-2*s/5,e-2*s/5,1,r-s/5,e-s/5,4*s/5),n.addColorStop(0,"#111"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(r-i.ss,e-i.ss,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill(),this.beginPath(),this.lineWidth=s/6,t.c==o.W?(this.strokeStyle="#999",this.arc(r+s/8,e+s/8,s/2,0,Math.PI/2,!1)):(this.strokeStyle="#ccc",this.arc(r-s/8,e-s/8,s/2,Math.PI,1.5*Math.PI)),this.stroke()}},Ds:u},Fs:{kh:{ps:function(t,i){var n,r=i.qs(t.x),e=i.rs(t.y),s=i.fn;t.c==o.W?(n=this.createRadialGradient(r-2*s/5,e-2*s/5,s/3,r-s/5,e-s/5,8*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#666")):(n=this.createRadialGradient(r-2*s/5,e-2*s/5,1,r-s/5,e-s/5,3*s/5),n.addColorStop(0,"#555"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(r-i.ss,e-i.ss,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill()}},Ds:u},Gs:{kh:{ps:function(t,i){var n,r,e=i.fn;h=h||Math.ceil(9999999*Math.random()),n=i.qs(t.x),r=i.rs(t.y);var s;if(s=t.c==o.W?"#aaa":"#000",this.beginPath(),this.fillStyle=s,this.arc(n-i.ss,r-i.ss,Math.max(0,e-.5),0,2*Math.PI,!0),this.fill(),t.c==o.W){var a=h%(3+t.x*i.size+t.y)%3,u=i.size*i.size+t.x*i.size+t.y,c=2/u*(h%u);g(0==a?{ys:this,x:n,y:r,zs:e,angle:c,xs:[.1,.12,.11,.1,.09,.09,.09,.09],As:.25,Bs:1.75}:1==a?{ys:this,x:n,y:r,zs:e,angle:c,xs:[.1,.09,.08,.07,.06,.06,.06,.06,.06,.06,.06],As:.2,Bs:1.5}:{ys:this,x:n,y:r,zs:e,angle:c,xs:[.12,.14,.13,.12,.12,.12],As:.3,Bs:2}),s=this.createRadialGradient(n-2*e/5,r-2*e/5,e/3,n-e/5,r-e/5,5*e/5),s.addColorStop(0,"rgba(255,255,255,0.9)"),s.addColorStop(1,"rgba(255,255,255,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.ss,r-i.ss,Math.max(0,e-.5),0,2*Math.PI,!0),this.fill()}else s=this.createRadialGradient(n+.4*e,r+.4*e,0,n+.5*e,r+.5*e,e),s.addColorStop(0,"rgba(32,32,32,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.ss,r-i.ss,Math.max(0,e-.5),0,2*Math.PI,!0),this.fill(),s=this.createRadialGradient(n-.4*e,r-.4*e,0,n-.5*e,r-.5*e,1.5*e),s.addColorStop(0,"rgba(64,64,64,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.ss,r-i.ss,Math.max(0,e-.5),0,2*Math.PI,!0),this.fill()}},Ds:u},Hs:{kh:{ps:function(t,i){var n=i.qs(t.x),r=i.rs(t.y),e=i.fn,s=a("markupLinesWidth",i)||1;t.c==o.W?this.fillStyle="white":this.fillStyle="black",this.beginPath(),this.arc(n,r,Math.max(0,e-s),0,2*Math.PI,!0),this.fill(),this.lineWidth=s,this.strokeStyle="black",this.stroke()}}},CR:{kh:{ps:function(t,i){var n=i.qs(t.x),r=i.rs(t.y),e=i.fn;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||a("markupLinesWidth",i)||1,this.beginPath(),this.arc(n-i.ss,r-i.ss,e/2,0,2*Math.PI,!0),this.stroke()}}},LB:{kh:{ps:function(t,i){var n=i.qs(t.x),r=i.rs(t.y),e=i.fn,o=t.scale||1,s=t.font||a("font",i)||"";this.fillStyle=t.c||c(i,t.x,t.y);var h=1;1==t.text.length?h=1.5:2==t.text.length&&(h=1.2),this.font=Math.round(h*e*o)+"px "+s,this.beginPath(),this.textBaseline="middle",this.textAlign="center",this.fillText(t.text,n,r,2*e)}},grid:{ps:function(t,i){if(!l(i,t.x,t.y)&&!t.Is){var n=i.qs(t.x),r=i.rs(t.y),e=i.fn;this.clearRect(n-e,r-e,2*e,2*e)}},clear:function(t,i){l(i,t.x,t.y)||(t.Is=!0,p(i,"grid"),delete t.Is)}}},Js:{kh:{ps:function(t,i){var n=i.qs(t.x),r=i.rs(t.y),e=Math.round(i.fn);this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||a("markupLinesWidth",i)||1,this.beginPath(),this.rect(Math.round(n-e/2)-i.ss,Math.round(r-e/2)-i.ss,e,e),this.stroke()}}},yg:{kh:{ps:function(t,i){var n=i.qs(t.x),r=i.rs(t.y),e=i.fn;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||a("markupLinesWidth",i)||1,this.beginPath(),this.moveTo(n-i.ss,r-i.ss-Math.round(e/2)),this.lineTo(Math.round(n-e/2)-i.ss,Math.round(r+e/3)+i.ss),this.lineTo(Math.round(n+e/2)+i.ss,Math.round(r+e/3)+i.ss),this.closePath(),this.stroke()}}},Ks:{kh:{ps:function(t,i){var n=i.qs(t.x),r=i.rs(t.y),e=i.fn;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineCap="round",this.lineWidth=2*(t.lineWidth||a("markupLinesWidth",i)||1)-1,this.beginPath(),this.moveTo(Math.round(n-e/2),Math.round(r-e/2)),this.lineTo(Math.round(n+e/2),Math.round(r+e/2)),this.moveTo(Math.round(n+e/2)-1,Math.round(r-e/2)),this.lineTo(Math.round(n-e/2)-1,Math.round(r+e/2)),this.stroke(),this.lineCap="butt"}}},SL:{kh:{ps:function(t,i){var n=i.qs(t.x),r=i.rs(t.y),e=i.fn;this.fillStyle=t.c||c(i,t.x,t.y),this.beginPath(),this.rect(n-e/2,r-e/2,e,e),this.fill()}}},Ls:{kh:{ps:function(t,i){var n=i.qs(t.x),r=i.rs(t.y),e=i.fn;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=2*(t.lineWidth||a("markupLinesWidth",i)||1),this.beginPath(),this.arc(n-e/3,r-e/3,e/6,0,2*Math.PI,!0),this.stroke(),this.beginPath(),this.arc(n+e/3,r-e/3,e/6,0,2*Math.PI,!0),this.stroke(),this.beginPath(),this.moveTo(n-e/1.5,r),this.bezierCurveTo(n-e/1.5,r+e/2,n+e/1.5,r+e/2,n+e/1.5,r),this.stroke()}}},outline:{kh:{ps:function(t,i){t.alpha?this.globalAlpha=t.alpha:this.globalAlpha=.3,t.stoneStyle?s.us[t.stoneStyle].kh.ps.call(this,t,i):i.ts.kh.ps.call(this,t,i),this.globalAlpha=1}}},mini:{kh:{ps:function(t,i){i.fn=i.fn/2,t.stoneStyle?s.us[t.stoneStyle].kh.ps.call(this,t,i):i.ts.kh.ps.call(this,t,i),i.fn=2*i.fn}}}},s.hn={grid:{ps:function(t,i){var n,r,e,o,s,h;this.fillStyle=a("coordinatesColor",i),this.textBaseline="middle",this.textAlign="center",this.font=i.fn*i.coordFontSize+"px "+(i.font||""),e=i.qs(-.75),o=i.qs(i.size-.25),s=i.rs(-.75),h=i.rs(i.size-.25);for(var u=0;u<i.size;u++)n=u+"A".charCodeAt(0),n>="I".charCodeAt(0)&&n++,r=i.rs(u),this.fillText(i.size-u,e,r),this.fillText(i.size-u,o,r),r=i.qs(u),this.fillText(String.fromCharCode(n),r,s),this.fillText(String.fromCharCode(n),r,h);this.fillStyle="black"}}},s.Ms=function(){this.kn=document.createElement("canvas"),this.context=this.kn.getContext("2d"),this.hs=t.devicePixelRatio||1,this.hs>1&&this.context.scale(this.hs,this.hs)},s.Ms.prototype={constructor:s.Ms,js:function(t,i){this.kn.width=t,this.kn.style.width=t/this.hs+"px",this.kn.height=i,this.kn.style.height=i/this.hs+"px"},gr:function(t,i){this.kn.style.position="absolute",this.kn.style.zIndex=i,t.appendChild(this.kn)},Ns:function(t){t.removeChild(this.kn)},getContext:function(){return this.context},ps:function(t){},clear:function(){this.context.clearRect(0,0,this.kn.width,this.kn.height)}},s.Os=o.$r(s.Ms,function(){this._r.call(this)}),s.Os.prototype.ps=function(t){var i;this.context.beginPath(),this.context.lineWidth=a("gridLinesWidth",t),this.context.strokeStyle=a("gridLinesColor",t);var n=Math.round(t.left),r=Math.round(t.top),e=Math.round(t.xn*(t.size-1)),o=Math.round(t.yn*(t.size-1));this.context.strokeRect(n-t.ss,r-t.ss,e,o);for(var s=1;s<t.size-1;s++)i=Math.round(t.qs(s))-t.ss,this.context.moveTo(i,r),this.context.lineTo(i,r+o),i=Math.round(t.rs(s))-t.ss,this.context.moveTo(n,i),this.context.lineTo(n+e,i);if(this.context.stroke(),this.context.fillStyle=a("starColor",t),t.Ps[t.size])for(var h in t.Ps[t.size])this.context.beginPath(),this.context.arc(t.qs(t.Ps[t.size][h].x)-t.ss,t.rs(t.Ps[t.size][h].y)-t.ss,a("starSize",t),0,2*Math.PI,!0),this.context.fill()},s.Qs=o.$r(s.Ms,function(){this.init(4)}),s.Qs.prototype.init=function(i){var n,r;this.Rs=i,this.elements=[],this.Ss=[],this.hs=t.devicePixelRatio||1;for(var e=0;i>e;e++)n=document.createElement("canvas"),r=n.getContext("2d"),this.hs>1&&r.scale(this.hs,this.hs),this.elements.push(n),this.Ss.push(r)},s.Qs.prototype.gr=function(t,i){for(var n=0;n<this.Rs;n++)this.elements[n].style.position="absolute",this.elements[n].style.zIndex=i,t.appendChild(this.elements[n])},s.Qs.prototype.Ns=function(t){for(var i=0;i<this.Rs;i++)t.removeChild(this.elements[i])},s.Qs.prototype.getContext=function(t){return t.x%2?t.y%2?this.Ss[0]:this.Ss[1]:t.y%2?this.Ss[2]:this.Ss[3]},s.Qs.prototype.clear=function(t,i){for(var n=0;n<this.Rs;n++)this.Ss[n].clearRect(0,0,this.elements[n].width,this.elements[n].height)},s.Qs.prototype.js=function(t,i){for(var n=0;n<this.Rs;n++)this.elements[n].width=t,this.elements[n].style.width=t/this.hs+"px",this.elements[n].height=i,this.elements[n].style.height=i/this.hs+"px"},s.Ts=o.$r(s.Qs,function(t,n,r){this.init(2),this.shadowSize=n===i?1:n,this.Zm=t}),s.Ts.prototype.getContext=function(t){return!(t.x%2&&t.y%2)&&(t.x%2||t.y%2)?this.Ss[1]:this.Ss[0]},s.Ts.prototype.js=function(t,i){this._r.prototype.js.call(this,t,i);for(var n=0;n<this.Rs;n++)this.Ss[n].setTransform(1,0,0,1,Math.round(this.shadowSize*this.Zm.fn/7),Math.round(this.shadowSize*this.Zm.fn/7))};var d=function(t,i){var n=i.qs(t.x),r=i.rs(t.y),e=i.fn;this.clearRect(n-2*e-i.ss,r-2*e-i.ss,4*e,4*e)},v=function(){return 3*this.width/(4*(this.es+1-this.cs)+2)-this.xn*this.cs},y=function(){return 3*this.height/(4*(this.gs+1-this.ds)+2)-this.yn*this.ds},b=function(){return 4*this.width/(4*(this.es+1-this.cs)+2)},m=function(){return 4*this.height/(4*(this.gs+1-this.ds)+2)},x=function(t,i){for(var n,r=0;r<this.sn[t][i].length;r++){var e=this.sn[t][i][r];n=e.type?"string"==typeof e.type?s.us[e.type]:e.type:this.ts;for(var o in n)n[o].clear?n[o].clear.call(this[o].getContext(e),e,this):d.call(this[o].getContext(e),e,this)}},w=function(t,i){for(var n,r=0;r<this.sn[t][i].length;r++){var e=this.sn[t][i][r];n=e.type?"string"==typeof e.type?s.us[e.type]:e.type:this.ts;for(var o in n)n[o].ps.call(this[o].getContext(e),e,this)}},k=function(t){var i,n;i=t.layerX*this.hs,i-=this.left,i/=this.xn,i=Math.round(i),n=t.layerY*this.hs,n-=this.top,n/=this.yn,n=Math.round(n);var r=t.offsetY*this.hs;return r-=this.top,r/=this.yn,r=Math.round(r),r!==n&&console.error("Using layerY we get",n," BUT using offsetY it would be",r),{x:i>=this.size?-1:i,y:n>=this.size?-1:n}},S=function(){this.kn.style.width=this.width/this.hs+"px",this.kn.style.height=this.height/this.hs+"px",this.fn=a("stoneSize",this),this.ss=a("linesShift",this);for(var t=0;t<this.Rs.length;t++)this.Rs[t].js(this.width,this.height)};s.prototype={constructor:s,init:function(){this.sn=[];for(var t=0;t<this.size;t++){this.sn[t]=[];for(var i=0;i<this.size;i++)this.sn[t][i]=[]}this.vs=[],this.Rs=[],this.Us=[],this.kn=document.createElement("div"),this.kn.className="wgo-board",this.kn.style.position="relative",this.background&&("#"==this.background[0]?this.kn.style.backgroundColor=this.background:(this.kn.style.backgroundImage="url('"+this.background+"')",this.kn.style.backgroundColor="#c75")),this.grid=new s.Os,this.Ds=new s.Ts(this,a("shadowSize",this)),this.kh=new s.Qs,this.Vs(this.grid,100),this.Vs(this.Ds,200),this.Vs(this.kh,300)},ks:function(t){this.width=t,this.width*=this.hs,this.yn=this.xn=b.call(this),this.left=v.call(this),this.height=(this.gs-this.ds+1.5)*this.yn,this.top=y.call(this),S.call(this),this.Ws()},ls:function(t){this.height=t,this.height*=this.hs,this.xn=this.yn=m.call(this),this.top=y.call(this),this.width=(this.es-this.cs+1.5)*this.xn,this.left=v.call(this),S.call(this),this.Ws()},js:function(t,i){this.width=t||parseInt(this.kn.style.width,10),this.width*=this.hs,this.height=i||parseInt(this.kn.style.height,10),this.height*=this.hs,this.xn=b.call(this),this.yn=m.call(this),this.left=v.call(this),this.top=y.call(this),S.call(this),this.Ws()},Xs:function(){return this.section},Ys:function(t,i,n,r){"object"==typeof t?this.section=t:this.section={top:t,right:i,bottom:n,left:r},this.cs=this.section.left,this.ds=this.section.top,this.es=this.size-1-this.section.right,this.gs=this.size-1-this.section.bottom,this.js()},Zs:function(t){var t=t||19;if(t!=this.size){this.size=t,this.sn=[];for(var i=0;i<this.size;i++){this.sn[i]=[];for(var n=0;n<this.size;n++)this.sn[i][n]=[]}this.es=this.size-1-this.section.right,this.gs=this.size-1-this.section.bottom,this.js()}},Ws:function(){for(var t=0;t<this.Rs.length;t++)this.Rs[t].clear(this),this.Rs[t].ps(this);for(var t=0;t<this.size;t++)for(var i=0;i<this.size;i++)w.call(this,t,i);for(var t=0;t<this.vs.length;t++){var n=this.vs[t],r=n.Mp;for(var e in r)r[e].ps.call(this[e].getContext(n.ws),n.ws,this)}},qs:function(t){return this.left+t*this.xn},rs:function(t){return this.top+t*this.yn},Vs:function(t,i){t.gr(this.kn,i),t.js(this.width,this.height),this.Rs.push(t)},$s:function(t){var i=this.Rs.indexOf(t);i>=0&&(this.Rs.splice(i,1),t.Ns(this.kn))},update:function(t){var i;if(t.remove&&"all"==t.remove)this._s();else if(t.remove)for(i=0;i<t.remove.length;i++)this.rn(t.remove[i]);if(t.add)for(i=0;i<t.add.length;i++)this.tn(t.add[i])},tn:function(t){if(t.constructor!=Array){x.call(this,t.x,t.y);for(var i=this.sn[t.x][t.y],n=0;n<i.length;n++)if(i[n].type==t.type)return i[n]=t,void w.call(this,t.x,t.y);t.type?i.push(t):i.unshift(t),w.call(this,t.x,t.y)}else for(var r=0;r<t.length;r++)this.tn(t[r])},rn:function(t){if(t.constructor!=Array){for(var n,r=0;r<this.sn[t.x][t.y].length;r++)if(this.sn[t.x][t.y][r].type==t.type){n=r;break}n!==i&&(x.call(this,t.x,t.y),this.sn[t.x][t.y].splice(n,1),w.call(this,t.x,t.y))}else for(var e=0;e<t.length;e++)this.rn(t[e])},zn:function(t,i){this.sn[t][i].length&&(x.call(this,t,i),this.sn[t][i]=[])},_s:function(){this.sn=[];for(var t=0;t<this.size;t++){this.sn[t]=[];for(var i=0;i<this.size;i++)this.sn[t][i]=[]}this.Ws()},gn:function(t,i){this.vs.push({Mp:t,ws:i}),this.Ws()},at:function(t,i){for(var n=0;n<this.vs.length;n++){var r=this.vs[n];if(r.Mp==t&&r.ws==i)return this.vs.splice(n,1),this.Ws(),!0}return!1},addEventListener:function(t,i){var n=this,r={type:t,bt:i,ct:function(t){var r=k.call(n,t);i(r.x,r.y,t)}};this.kn.addEventListener(t,r,!0),this.Us.push(r)},removeEventListener:function(t,i){for(var n=0;n<this.Us.length;n++){var r=this.Us[n];if(r.type==t&&r.bt==i)return this.kn.removeEventListener(r.type,r,!0),this.Us.splice(n,1),!0}return!1},dt:function(){return{et:o.clone(this.sn),ft:o.clone(this.vs)}},gt:function(t){this.sn=t.et||this.sn,this.vs=t.ft||this.vs,this.Ws()}},s["default"]={size:19,width:0,height:0,font:"Calibri",lineWidth:1,ns:!1,Ps:{19:[{x:3,y:3},{x:9,y:3},{x:15,y:3},{x:3,y:9},{x:9,y:9},{x:15,y:9},{x:3,y:15},{x:9,y:15},{x:15,y:15}],13:[{x:3,y:3},{x:9,y:3},{x:3,y:9},{x:9,y:9}],9:[{x:4,y:4}]},ts:s.us.Gs,starSize:1,shadowSize:1,stoneSize:1,section:{top:0,right:0,bottom:0,left:0},background:o.Tr+"wood1.jpg",_q:{}},o.cn=s,t.WGo=o}(window)},{}],83:[function(t,i,n){i.g=function(t,i){var n=i||document;if(n.createStyleSheet){var r=n.createStyleSheet();return r.cssText=t,r.ownerNode}var e=n.getElementsByTagName("head")[0],o=n.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(n.createTextNode(t)),e.appendChild(o),o},i.g.ht=function(t){if(document.createStyleSheet)return document.createStyleSheet(t).ownerNode;var i=document.getElementsByTagName("head")[0],n=document.createElement("link");return n.rel="stylesheet",n.href=t,i.appendChild(n),n}},{}],84:[function(t,i,n){i.g=t("cssify")},{cssify:83}],85:[function(t,i,n){i.g={name:"1g0",version:"0.3.0",description:"",it:"Olivier Lombart (kubicle)",jt:"TBD",scripts:{kt:"browserify js/ui/htmlApp.js -t lessify | uglifyjs -o build/bld.js -m --mangle-props --reserved-file build/reserved.json --reserve-domprops --mangle-regex=\"/^[a-zA-Z0-9_]+$/\" -c pure_funcs=['log.debug','test.assert']","dev-build":"watchify js/test/testApp.js -o build/devBuild.js -t lessify -v",test:"node js/test/ciTestApp.js --ci",lt:"node node_modules/istanbul/lib/cli.js cover js/test/ciTestApp.js -x **/frankie/** -x **/droopy/** -- --cover"},nt:"js/ui/htmlApp.js",ot:{type:"git",url:"https://github.com/kubicle/1g0"},pt:{url:"https://github.com/kubicle/1g0/issues"},qt:["baduk","go","igo","weiqi"],rt:{st:"^2.5.0",tt:"~0.3.22","codeclimate-test-reporter":"~0.1.1",ut:"~10.2.4",lessify:"~1.0.1",vt:"~3.2.2","uglify-js":"~2.6.2"}}},{}]},{},[61]);