!function t(i,n,r){function o(s,h){if(!n[s]){if(!i[s]){var a="function"==typeof require&&require;if(!h&&a)return a(s,!0);if(e)return e(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={g:{}};i[s][0].call(l.g,function(t){var n=i[s][1][t];return o(n?n:t)},l,l.g,t,i,n,r)}return n[s].g}for(var e="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,i,n){"function"==typeof Object.create?i.g=function(t,i){t.h=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,i:!1,j:!0,k:!0}})}:i.g=function(t,i){t.h=i;var n=function(){};n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],2:[function(t,i,n){function r(){l=!1,h.length?u=h.concat(u):c=-1,u.length&&o()}function o(){if(!l){var t=setTimeout(r);l=!0;for(var i=u.length;i;){for(h=u,u=[];++c<i;)h[c].l();c=-1,i=u.length}h=null,l=!1,clearTimeout(t)}}function e(t,i){this.o=t,this.p=i}function s(){}var h,a=i.g={},u=[],l=!1,c=-1;a.m=function(t){var i=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)i[n-1]=arguments[n];u.push(new e(t,i)),1!==u.length||l||setTimeout(o,0)},e.prototype.l=function(){this.o.apply(null,this.p)},a.title="browser",a.q=!0,a.s={},a.t=[],a.version="",a.u={},a.v=s,a.addListener=s,a.A=s,a.C=s,a.removeListener=s,a.D=s,a.F=s,a.G=function(t){throw new Error("process.binding is not supported")},a.H=function(){return"/"},a.I=function(t){throw new Error("process.chdir is not supported")},a.J=function(){return 0}},{}],3:[function(t,i,n){i.g=function(t){return t&&"object"==typeof t&&"function"==typeof t.K&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],4:[function(t,i,n){(function(i,r){function o(t,i){var r={N:[],O:s};return arguments.length>=3&&(r.P=arguments[2]),arguments.length>=4&&(r.R=arguments[3]),d(i)?r.S=i:i&&n.T(r,i),x(r.S)&&(r.S=!1),x(r.P)&&(r.P=2),x(r.R)&&(r.R=!1),x(r.U)&&(r.U=!0),r.R&&(r.O=e),a(r,t,r.P)}function e(t,i){var n=o.ca[i];return n?"["+o.R[n][0]+"m"+t+"["+o.R[n][1]+"m":t}function s(t,i){return t}function h(t){var i={};return t.forEach(function(t,n){i[t]=!0}),i}function a(t,i,r){if(t.U&&i&&M(i.V)&&i.V!==n.V&&(!i.constructor||i.constructor.prototype!==i)){var o=i.V(r,t);return m(o)||(o=a(t,o,r)),o}var e=u(t,i);if(e)return e;var s=Object.keys(i),d=h(s);if(t.S&&(s=Object.getOwnPropertyNames(i)),j(i)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(i);if(0===s.length){if(M(i)){var v=i.name?": "+i.name:"";return t.O("[Function"+v+"]","special")}if(k(i))return t.O(RegExp.prototype.toString.call(i),"regexp");if(E(i))return t.O(Date.prototype.toString.call(i),"date");if(j(i))return l(i)}var b="",y=!1,w=["{","}"];if(g(i)&&(y=!0,w=["[","]"]),M(i)){var x=i.name?": "+i.name:"";b=" [Function"+x+"]"}if(k(i)&&(b=" "+RegExp.prototype.toString.call(i)),E(i)&&(b=" "+Date.prototype.toUTCString.call(i)),j(i)&&(b=" "+l(i)),0===s.length&&(!y||0==i.length))return w[0]+b+w[1];if(0>r)return k(i)?t.O(RegExp.prototype.toString.call(i),"regexp"):t.O("[Object]","special");t.N.push(i);var S;return S=y?c(t,i,r,d,s):s.map(function(n){return f(t,i,r,d,n,y)}),t.N.pop(),p(S,b,w)}function u(t,i){if(x(i))return t.O("undefined","undefined");if(m(i)){var n="'"+JSON.stringify(i).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.O(n,"string")}return y(i)?t.O(""+i,"number"):d(i)?t.O(""+i,"boolean"):v(i)?t.O("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function c(t,i,n,r,o){for(var e=[],s=0,h=i.length;h>s;++s)C(i,String(s))?e.push(f(t,i,n,r,String(s),!0)):e.push("");return o.forEach(function(o){o.match(/^\d+$/)||e.push(f(t,i,n,r,o,!0))}),e}function f(t,i,n,r,o,e){var s,h,u;if(u=Object.getOwnPropertyDescriptor(i,o)||{value:i[o]},u.get?h=u.set?t.O("[Getter/Setter]","special"):t.O("[Getter]","special"):u.set&&(h=t.O("[Setter]","special")),C(r,o)||(s="["+o+"]"),h||(t.N.indexOf(u.value)<0?(h=v(n)?a(t,u.value,null):a(t,u.value,n-1),h.indexOf("\n")>-1&&(h=e?h.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+h.split("\n").map(function(t){return"   "+t}).join("\n"))):h=t.O("[Circular]","special")),x(s)){if(e&&o.match(/^\d+$/))return h;s=JSON.stringify(""+o),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.O(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.O(s,"string"))}return s+": "+h}function p(t,i,n){var r=0,o=t.reduce(function(t,i){return r++,i.indexOf("\n")>=0&&r++,t+i.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?n[0]+(""===i?"":i+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+i+" "+t.join(", ")+" "+n[1]}function g(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function v(t){return null===t}function b(t){return null==t}function y(t){return"number"==typeof t}function m(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function x(t){return void 0===t}function k(t){return S(t)&&"[object RegExp]"===z(t)}function S(t){return"object"==typeof t&&null!==t}function E(t){return S(t)&&"[object Date]"===z(t)}function j(t){return S(t)&&("[object Error]"===z(t)||t instanceof Error)}function M(t){return"function"==typeof t}function G(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function z(t){return Object.prototype.toString.call(t)}function D(t){return 10>t?"0"+t.toString(10):t.toString(10)}function P(){var t=new Date,i=[D(t.getHours()),D(t.getMinutes()),D(t.getSeconds())].join(":");return[t.getDate(),I[t.getMonth()],i].join(" ")}function C(t,i){return Object.prototype.hasOwnProperty.call(t,i)}var O=/%[sdj%]/g;n.format=function(t){if(!m(t)){for(var i=[],n=0;n<arguments.length;n++)i.push(o(arguments[n]));return i.join(" ")}for(var n=1,r=arguments,e=r.length,s=String(t).replace(O,function(t){if("%%"===t)return"%";if(n>=e)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(i){return"[Circular]"}default:return t}}),h=r[n];e>n;h=r[++n])s+=v(h)||!S(h)?" "+h:" "+o(h);return s},n.L=function(t,o){function e(){if(!s){if(i.throwDeprecation)throw new Error(o);i.traceDeprecation?console.trace(o):console.error(o),s=!0}return t.apply(this,arguments)}if(x(r.process))return function(){return n.L(t,o).apply(this,arguments)};if(i.noDeprecation===!0)return t;var s=!1;return e};var B,F={};n.M=function(t){if(x(B)&&(B=i.s.NODE_DEBUG||""),t=t.toUpperCase(),!F[t])if(new RegExp("\\b"+t+"\\b","i").test(B)){var r=i.pid;F[t]=function(){var i=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,i)}}else F[t]=function(){};return F[t]},n.V=o,o.R={bold:[1,22],X:[3,23],Y:[4,24],inverse:[7,27],Z:[37,39],grey:[90,39],$:[30,39],blue:[34,39],_:[36,39],green:[32,39],aa:[35,39],red:[31,39],ba:[33,39]},o.ca={da:"cyan",number:"yellow",ea:"yellow",undefined:"grey",fa:"bold",ga:"green",ha:"magenta",ia:"red"},n.isArray=g,n.ja=d,n.ka=v,n.la=b,n.ma=y,n.na=m,n.oa=w,n.pa=x,n.qa=k,n.ra=S,n.sa=E,n.ta=j,n.ua=M,n.va=G,n.isBuffer=t("./support/isBuffer");var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",P(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n.T=function(t,i){if(!i||!S(i))return t;for(var n=Object.keys(i),r=n.length;r--;)t[n[r]]=i[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":3,_process:2,inherits:1}],5:[function(t,i,n){i.g={".cgos":{wa:!0,xa:!0},".chinese":{wa:!0,xa:!0},".japanese":{}}},{}],6:[function(t,i,n){"use strict";function r(t){this.history=[],this.Ba=[],this.Ca=[],this.Da(d),this.Ea=null,this.Fa=this.Ga=this.Ha=0,this.Ia=this.Ja=p,this.Ka=this.La=null,this.Ma=this.Na=null,t&&this.K(t)}function o(t){switch(t[0]){case"B":return p;case"W":return g;default:return}}function e(t,i){return(i===p?"B-":"W-")+t}var s=t("./constants"),h=t("./Goban"),a=t("./Grid"),u=t("./HandicapSetter"),l=t("./log"),c=t("./SgfReader"),f=t("../config/rules.json"),p=s.ya,g=s.za,d=s.Aa;i.g=r,r.prototype.Oa=function(t,i){this.Ca[t]=i},r.prototype.Da=function(t,i){t=t||"unspecified",this.Pa=t;var n=f["."+t.toLowerCase()];if(!n){if(!i)throw new Error("Invalid rules: "+t+"\nValid values: "+Object.keys(f).map(function(t){return t.substr(1)}).join(", "));n=f["."+d.toLowerCase()]}this.xa=n.xa||!1,this.wa=n.wa||!1},r.prototype.K=function(t){this.Qa(t.Ja),this.Oa(p,t.Ca[p]),this.Oa(g,t.Ca[g]),this.Da(t.Pa,!0),this.Ra(t.Ea.Sa,t.Fa,t.Ga),this.Ta(t.history.join(","))},r.prototype.Ra=function(t,i,n){return this.history.length=0,this.Ba.length=0,this.Ha=0,this.La=this.Ka=!1,this.Ma=this.Na=null,this.Ea&&t===this.Ea.Sa?this.Ea.clear():this.Ea=new h(t),this.Ea.Ua(this.xa),i=void 0!==i?i:0,this.Va(i),this.Ga=void 0!==n?n:i?.5:6.5,this.Ea.Sa!==t?this.Wa("Size could not be set: "+t):this.Fa!==i?this.Wa("Handicap could not be set: "+i):!0},r.prototype.Qa=function(t){this.Ia=this.Ja=t},r.prototype.Va=function(t){if(this.history.length>0)throw new Error("Handicap cannot be changed during a game");return this.Fa=u.Xa(this.Ea,t),this.Qa(this.Fa>0?g:p),!0},r.prototype.Ya=function(t,i){if(l.error&&l.error(t),!i)throw new Error(t);return i.push(t),!1},r.prototype.Ta=function(t,i){if(!t)return!0;for(var n=t.split(","),r=0;r<n.length;r++)if(!this.Za(n[r]))return this.Ya("Failed playing loaded move #"+(r+1)+":\n"+this.$a().join(", "),i);return!0},r.prototype._a=function(t,i,n){var r=new c;try{r.ab(t,n)}catch(o){return this.Ya("Failed loading SGF moves:\n"+o,i)}return this.Ra(r.bb,0,r.Ga),this.Oa(p,r.cb("playerBlack")),this.Oa(g,r.cb("playerWhite")),this.Da(r.cb("rules"),!0),this.Ta(r.eb(),i)},r.prototype.fb=function(t,i){return c.gb(t)?this._a(t,i):this.Ta(t,i)},r.prototype.hb=function(t){return"B"!==t[0]&&"W"!==t[0]?t:"-"!==t[1]?t.substr(1):t.substr(2)},r.prototype.Za=function(t){if(this.La)return this.Wa("Game already ended");if(/^[B|W]?-?[a-z][1-2]?[0-9]$/.test(t))return this.ib(t);var i=this.hb(t);return i.startsWith("pass")?this.jb():i.startsWith("resi")?this.kb(o(t)):"undo"===i?this.lb():"half_undo"===i?this.lb(!0):i.startsWith("hand")?this.Va(i.split(":")[1]):i.startsWith("load:")?this.Ta(i.slice(5)):this.Wa("Invalid command: "+i)},r.prototype.ib=function(t){var i=this.mb(t);3===i.length&&(this.Ia=i[2]);var n=i[0],r=i[1];return this.Ea.nb(n,r,this.Ia)?(this.Ea.ob(n,r,this.Ia),this.pb(t),this.qb(),this.Ha=0,!0):this.Wa("Invalid move: "+t)},r.prototype.mb=function(t){var i=o(t);void 0!==i&&(t=this.hb(t));var n=a.rb(t,!0);if(!n){if("pass"===t||t.startsWith("resi"))return null;throw new Error("Illegal move parsed: "+t)}return void 0!==i?n.concat(i):n},r.prototype.kb=function(t,i){t=void 0!==t?t:this.Ia,this.Ma=t,this.Na=i;var n=e("resign",t)+(i?"-"+i:"");return this.pb(n),this.La=!0,this.Ka=!1,!0},r.prototype.jb=function(){return this.pb(e("pass",this.Ia)),this.Ha++,this.Ha>=2&&(this.Ka=!0),this.qb(),!0},r.prototype.sb=function(t,i){return this.Ka?(this.Ka=!1,t?(this.La=!0,!0):(i!==this.Ia&&(this.history.pop(),this.qb()),!0)):this.Wa("The game is not ending yet")},r.prototype.tb=function(){return this.history.length},r.prototype.ub=function(){var t=this.Fa>0?"handicap:"+this.Fa+",":"",i=this.history,n=i.length&&2===i[0].length?e("",this.Ja):"";return t+n+i.join(",")},r.prototype.Wa=function(t){return this.Ba.push(t),!1},r.prototype.$a=function(){var t=this.Ba;return this.Ba=[],t},r.prototype.qb=function(){this.Ia=1-this.Ia},r.prototype.pb=function(t){return this.history.push(t)},r.prototype.lb=function(t){var i=t?1:2;if(this.history.length<i)return this.Wa("Nothing to undo");for(var n=i;n>=1;n--){var r=this.history.pop();r.endsWith("pass")||this.Ea.vb()}return t&&this.qb(),this.Ha=0,!0}},{"../config/rules.json":5,"./Goban":8,"./Grid":9,"./HandicapSetter":11,"./SgfReader":13,"./constants":38,"./log":41}],7:[function(t,i,n){"use strict";function r(t,i,n){this.wb=t||{},this.xb=i||{},this.name=n||"#"+e++}var o=t("./helper"),e=1;i.g=r;var s=.05,h=0,a=1;r.prototype.clone=function(t){return new r(o.clone(this.wb),o.clone(this.xb),t)},r.prototype.yb=function(t){this.xb=t},r.prototype.toString=function(){var t="{"+this.name+" - ";for(var i in this.wb)t+=i+":"+this.wb[i].toFixed(2)+", ";return t.zb(", ")+"}"},r.prototype.Ab=function(t){var i=0;for(var n in this.wb){var r=this.wb[n],o=t.wb[n];0>o!=0>r?0>o?(r-=o,o=0):(o-=r,r=0):(r=Math.abs(r),o=Math.abs(o));var e;e=0===o?r>1?1:r:0===r?o>1?1:o:1-(o>=r?r/o:o/r),i+=e}return i},r.prototype.get=function(t,i,n,r){void 0===n&&(n=null),void 0===r&&(r=null);var o=this.wb[t];if(o)return o;if(this.wb[t]=i,(n||r)&&(this.xb[t]=[n,r]),n&&r&&n>r)throw new Error("Limits are invalid: "+n+" > "+r);return i},r.prototype.Bb=function(){return JSON.stringify(this)},r.Cb=function(t){var i=JSON.parse(t);this.wb=i.wb,this.xb=i.xb},r.prototype.Db=function(t,i,n,r,o){var e=this.wb,s=t.wb;i.yb(this.xb),n.yb(this.xb);var h=i.wb,a=n.wb,u=~~(Math.random()*e.length),l=~~(Math.random()*u),c=0;for(var f in e)l>c||c>u?(h[f]=e[f],a[f]=s[f]):(h[f]=s[f],a[f]=e[f]),Math.random()<r&&(h[f]=this.Eb(f,h[f],o)),Math.random()<r&&(a[f]=this.Eb(f,a[f],o)),c++},r.prototype.Eb=function(t,i,n){var r,o=this.xb[t];if(o){var e=o[h],u=o[a];if(Math.random()<n)r=e+Math.random()*(u-e);else{var l=1+2*Math.random()*s-s;r=i*l,e&&e>r&&(r=e),u&&r>u&&(r=u)}}else r=i+10*(Math.random()-.5);return r},r.prototype.Fb=function(){for(var t in this.wb)this.wb[t]=this.Eb(t,this.wb[t],1);return this}},{"./helper":39}],8:[function(t,i,n){"use strict";function r(t){if(void 0===t&&(t=19),t!==~~t||3>t)throw new Error("Invalid goban size: "+t);this.Sa=t,this.Hb=new e(t,a),this.Ib=new e(t,s.Gb),this.Jb=this.Ib.Kb;var i,n;for(n=t;n>=1;n--)for(i=t;i>=1;i--)this.Jb[n][i]=new s(this,i,n,u);for(n=1;t>=n;n++)for(i=1;t>=i;i++)this.Jb[n][i].Lb();r.Mb=new h(this,new s(this,-50,-50,u),-100,0),this.Nb=[r.Mb],this.Ob=[r.Mb],this.Pb=[],this.Qb=0,this.history=[],this.Ua(!1)}var o=t("./constants"),e=t("./Grid"),s=t("./Stone"),h=t("./Group"),a=o.Gb,u=o.EMPTY;i.g=r,r.prototype.clear=function(){for(var t=1;t<=this.Sa;t++)for(var i=1;i<=this.Sa;i++){var n=this.Jb[t][i];n.group&&n.group.clear()}this.Nb.shift(),this.Ob.shift(),this.Pb.concat(this.Nb),this.Pb.concat(this.Ob),this.Nb.length=0,this.Ob.length=0,this.Nb.push(r.Mb),this.Ob.push(r.Mb),this.Qb=0,this.history.length=0,this.Ua(!1)},r.prototype.Rb=function(t,i){var n=++this.Qb,r=this.Pb.pop();return r?r.Sb(t,i,n):r=new h(this,t,i,n),r},r.prototype.Tb=function(t){t.Ub===this.Qb&&this.Qb--,this.Pb.push(t)},r.prototype.Vb=function(){return this.Ib.Wb()},r.prototype.Xb=function(t){this.Hb.Xb(t);for(var i=this.Sa;i>=1;i--)for(var n=1;n<=this.Sa;n++){var r=this.Hb.Kb[i][n];r!==u&&this.ob(n,i,r)}},r.prototype.Yb=function(){for(var t={},i=this.Sa;i>=1;i--)for(var n=this.Sa;n>=1;n--){var r=this.Jb[i][n].group;r&&(t[r.Ub]=r)}return t},r.prototype.Zb=function(){for(var t,i="Board:\n"+this.toString()+"\nGroups:\n"+this.Ib.$b(function(t){return t.group?""+t.group.Ub:"."})+"\nStones in groups:\n",n={},r=this.Ib.Kb,o=0;t=r[o],o<r.length;o++)for(var e,s=t,h=0;e=s[h],h<s.length;h++)e&&e.group&&(n[e.group.Ub]=e.group);for(var a=1;a<=this.Qb;a++)n[a]&&(i+=n[a].Zb()+"\n");return i},r.prototype.toString=function(){return this.Ib.$b()},r.prototype.nb=function(t,i,n){if(1>t||t>this.Sa||1>i||i>this.Sa)return!1;var r=this.Jb[i][t];if(r.color!==u)return!1;if(r._b(n))return!1;if(this.ac){if(this.bc[this.cc(t,i,n)])return!1}else if(r.dc(n))return!1;return!0},r.prototype.ec=function(t,i){return this.Jb[i][t]},r.prototype.fc=function(t,i){return this.Jb[i][t].color},r.prototype.gc=function(t,i){return this.Jb[i][t].gc()},r.prototype.tb=function(){return this.history.length},r.prototype.ob=function(t,i,n){this.hc(t,i,n);var r=this.Jb[i][t];if(r.color!==u)throw new Error("Tried to play on existing stone in "+r);return this.ic(t,i,n)},r.prototype.vb=function(){if(!this.history.length)throw new Error("Extra undo");this.history.pop().jc(),this.hc()},r.prototype.ic=function(t,i,n){var r=this.Jb[i][t];return this.history.push(r),r.kc(n),r},r.prototype.lc=function(){this.history.pop().jc()},r.prototype.mc=function(){return this.Nb[this.Nb.length-1]},r.prototype.nc=function(){return this.history[this.history.length-1]},r.prototype.oc=function(t){t=t||[0,0];for(var i=this.Nb.length-1;i>=0;i--){var n=this.Nb[i];t[n.color]+=n.pc.length}return t},r.prototype.Ua=function(t){if(this.history.length>0)throw new Error("Superko rule changed during game");this.ac=t,t?(this.qc=this.rc(),this.sc=[],this.bc={}):(this.qc=null,this.sc=this.bc=null)},r.prototype.hc=function(t,i,n){this.ac?t?(this.sc.push(this.qc),this.bc[this.qc]=this.history.length,this.qc=this.cc(t,i,n)):(this.qc=this.sc.pop(),this.bc[this.qc]=null):this.qc=null},r.prototype.cc=function(t,i,n){for(var r=this.tc(this.qc,t,i,n),o=this.ec(t,i).uc(1-n),e=o.length-1;e>=0;e--)if(!(o[e].vc>1))for(var s=o[e].pc,h=s.length-1;h>=0;h--){var a=s[h];r=this.tc(r,a.wc,a.xc,u)}return r},r.prototype.yc=function(){return this.ac?this.qc:(this.qc||(this.qc=this.Vb()),this.qc)};var l=33,c="0".charCodeAt();r.prototype.rc=function(){for(var t="",i="",n=this.Sa,r=1;n>=r;r++)for(var o=this.Jb[r],e=1;n>=e;e++)t+=String.fromCharCode(c+o[e].color+1),4===t.length&&(i+=String.fromCharCode(parseInt(t,3)+l),t="");return t.length&&(t=(t+"000").substr(0,4),i+=String.fromCharCode(parseInt(t,3)+l)),i},r.prototype.tc=function(t,i,n,r){var o,e=(n-1)*this.Sa+(i-1),s=~~(e/4),h=e%4;if(r===u){var a=("000"+(t.charCodeAt(s)-l).toString(3)).slice(-4),c=a.substr(0,h)+"0"+a.substr(h+1);o=parseInt(c,3)+l}else o=t.charCodeAt(s)+(1<<r)*Math.pow(3,3-h);return t.substr(0,s)+String.fromCharCode(o)+t.substr(s+1)}},{"./Grid":9,"./Group":10,"./Stone":14,"./constants":38}],9:[function(t,i,n){"use strict";function r(t,i,n){if(void 0===i)throw new Error("Grid init value must be defined");this.Sa=t,void 0===n?this.Kb=a.zc(t+2,t+2,i):(this.Kb=a.zc(t+2,t+2,n),this.init(i))}function o(t){if(t===u)return"(BORDER)";if(t>=r.Ic)return String.fromCharCode("A".charCodeAt()+t-r.Ic);if(t<r.Kc||t>=r.Gc.length)throw new Error("Invalid color "+t);return 0>t&&(t+=r.Gc.length),r.Gc[t]}function e(t){return o("number"==typeof t?t:t.color)}function s(t){for(var i="",n=t.length-1;n>=0;n--)i+=t[n];return i}var h=t("./constants"),a=t("./helper"),u=h.Gb;i.g=r,r.Ac=["black","white"],r.Bc="+",r.Cc="?",r.Dc="@O",r.Ec="&#",r.Fc="-:",r.Gc=r.Dc+r.Ec+r.Fc+r.Cc+r.Bc,r.Hc=r.Cc+r.Bc+r.Gc,r.Ic=100,r.Jc=-1,r.Kc=-2,r.Lc=2,r.Mc=4,r.Nc=[0,0,-1,1,1,-1,-1,1],r.Oc="-'?.:",r.prototype.init=function(t){if(void 0===t)throw new Error("Grid init value must be defined");for(var i=this.Sa;i>=1;i--)for(var n=this.Kb[i],r=this.Sa;r>=1;r--)n[r]=t},r.prototype.K=function(t){if(t.Sa!==this.Sa)throw new Error("Cannot copy between different sized grids");for(var i=this.Sa;i>=1;i--)for(var n=this.Kb[i],r=t.Kb[i],o=this.Sa;o>=1;o--)n[o]=r[o];return this},r.prototype.Pc=function(t){var i=t.Ib;if(i.Sa!==this.Sa)throw new Error("Cannot copy between different sized grids");for(var n=this.Sa;n>=1;n--)for(var r=this.Kb[n],o=i.Kb[n],e=this.Sa;e>=1;e--)r[e]=o[e].color;return this},r.Qc=function(t){return r.Ac[t]},r.Rc=function(t){return r.Hc.indexOf(t)+r.Kc},r.prototype.$b=function(t){return this.Sc(!0,"\n",t||e)},r.prototype.Wb=function(t){return this.Sc(!1,",",t||e)},r.prototype.Sc=function(t,i,n){var o,e,s,h=new r(this.Sa,"").Kb,a=1;for(e=this.Sa;e>=1;e--)for(o=1;o<=this.Sa;o++)s=n(this.Kb[e][o]),null!==s&&(h[e][o]=s,a=Math.max(a,s.length));var u=a,l="          ",c="";for(e=this.Sa;e>=1;e--){for(t&&(c+="%2d".format(e)+" "),o=1;o<=this.Sa;o++)s=h[e][o],s.length<u&&(s=l.substr(1,u-s.length)+s),c+=s;c+=i}if(t){for(c+="   ",o=1;o<=this.Sa;o++)c+=l.substr(1,u-1)+r.Tc(o);c+="\n"}return"\n"!==i&&(c=c.Uc()),c},r.prototype.toString=function(){for(var t="",i=this.Sa;i>=1;i--){for(var n=1;n<=this.Sa;n++)t+=o(this.Kb[i][n]);t+="\n"}return t},r.prototype.Vb=function(){return"object"==typeof this.Kb[1][1]?this.Wb(function(t){return o(t.color)}):this.Wb(function(t){return o(t)})},r.prototype.Xb=function(t){var i=t.split(/\"|,/);if(i.length!==this.Sa)throw new Error("Invalid image: "+i.length+" rows instead of "+this.Sa);for(var n=this.Sa;n>=1;n--){var o=i[this.Sa-n];if(o.length!==this.Sa)throw new Error("Invalid image: row "+o);for(var e=1;e<=this.Sa;e++)this.Kb[n][e]=r.Rc(o[e-1])}},r.Vc=function(t){return t.split(",").reverse().join()},r.Wc=function(t){return t.split(",").map(s).join()},r.Xc=function(t){return s(t)},r.Yc=function(t){for(var i="",n=t.split(","),r=n[0].length-1;r>=0;r--){i+=",";for(var o=0;o<n.length;o++)i+=n[o][r]}return i.substr(1)};var l="abcdefghjklmnopqrstuvwxyz";r.rb=function(t,i){var n=l.indexOf(t[0])+1,r=parseInt(t.substr(1,2));if(!n||isNaN(r)){if(i)return null;throw new Error("Illegal move parsed: "+t)}return[n,r]},r.Zc=function(t,i){return l[t-1]+i},r.Tc=function(t){return l[t-1]}},{"./constants":38,"./helper":39}],10:[function(t,i,n){"use strict";function r(t,i,n,r){this.Ea=t,this.pc=[i],this.vc=n,this.color=i.color,this.$c=null,this._c=null,this.ad=null,this.Ub=r,this.bd=null,this.dd=this.ed=0,this.fd=null}var o=t("./constants"),e=t("./Grid"),s=t("./log"),h=o.EMPTY;i.g=r,r.prototype.Sb=function(t,i,n){this.pc.length=0,this.pc.push(t),this.vc=i,this.color=t.color,this.$c=this._c=this.ad=null,this.Ub=n,this.dd=this.ed=0,this.fd=null},r.prototype.clear=function(){for(var t=this.pc.length-1;t>=0;t--)this.pc[t].clear();this.Ea.Tb(this)},r.prototype.toString=function(t){if(0===t)return"#"+this.Ub;if(1===t)return this.pc[0]+" x"+this.pc.length;for(var i,n="{group #"+this.Ub+" of "+this.pc.length+" "+e.Qc(this.color)+" stones [",r=this.pc,o=0;i=r[o],o<r.length;o++)n+=i.gd()+",";return n=n.Uc(),n+="], lives:"+this.vc,this.$c&&(n+=" MERGED with #"+this.$c.Ub),this.ad&&(n+=" KILLED by "+this.ad.gd()),n+="}"},r.prototype.hd=function(){return this.pc.length&&this.pc[0].group===this},r.prototype.Zb=function(){return this.toString()},r.prototype.jd=function(){return this.pc.map(function(t){return t.gd()}).sort().join(",")},r.prototype.kd=function(){for(var t,i=[],n=this.pc,r=0;t=n[r],r<n.length;r++)for(var o,e=t.ld,s=0;o=e[s],s<e.length;s++)o.color===h&&i.indexOf(o)<0&&i.push(o);if(i.length!==this.vc)throw new Error("Wrong life count for group");return i},r.prototype.md=function(){for(var t,i=[],n=1-this.color,r=this.pc,o=0;t=r[o],o<r.length;o++)for(var e,h=t.ld,a=0;e=h[a],a<h.length;a++)e.color===n&&i.indexOf(e.group)<0&&i.push(e.group);return s.nd,i},r.prototype.od=function(t){for(var i,n=-1,r=t.ld,o=0;i=r[o],o<r.length;o++)if(i.color===h){n++;for(var e,a=i.ld,u=0;e=a[u],u<a.length;u++)if(e.group===this&&e!==t){n--;break}}return s.nd,n},r.prototype.pd=function(t){if(s.nd,this.pc.push(t),this.vc+=this.od(t),this.vc<0)throw new Error("Unexpected error (lives<0 on connect)");s.nd},r.prototype.qd=function(t){if(s.nd,this.pc.length>1){if(this.vc-=this.od(t),this.vc<0)throw new Error("Lives<0 on disconnect")}else this.Ea.Tb(this),s.nd;if(this.pc.pop()!==t)throw new Error("Unexpected error (disconnect order)")},r.prototype.rd=function(t){return this.vc--,this.vc<=0?this.sd(t):void 0},r.prototype.td=function(t){if(this.vc--,s.nd,this.vc<1)throw new Error("Unexpected error (lives<1 on attack by resucitated)")},r.prototype.ud=function(t){this.vc++,s.nd},r.prototype.vd=function(t,i){if(t.$c===this||t===this||this.color!==t.color)throw new Error("Invalid merge");s.nd,this.vc+=t.pc.length;for(var n,r=t.pc,o=0;n=r[o],o<r.length;o++)n.wd(this),this.pd(n);t.$c=this,t._c=i,this.Ea.Ob.push(t),s.nd},r.prototype.xd=function(t){s.nd;for(var i,n=t.pc,r=n.length-1;i=n[r],r>=0;r--)this.qd(i),i.wd(t);this.vc-=t.pc.length,t._c=t.$c=null,s.nd},r.prototype.yd=function(t){for(var i=this.Ea.Ob,n=i.length-1;n>=0;n--){var r=i[n];if(r._c!==t||r.$c!==this)break;this.xd(r),i.pop()}},r.prototype.sd=function(t){if(s.nd,this.vc<0)throw new Error("Unexpected error (lives<0)");for(var i,n=this.pc,r=0;i=n[r],r<n.length;r++){for(var o,e=i.uc(1-this.color),h=0;o=e[h],h<e.length;h++)o.ud(i);i.zd()}this.ad=t,this.Ea.Nb.push(this),s.nd},r.prototype.Ad=function(){this.ad=null,this.vc=1;for(var t,i=this.pc,n=0;t=i[n],n<i.length;n++){t.Bd(this);for(var r,o=t.uc(1-this.color),e=0;r=o[e],e<o.length;e++)r.td(t)}},r.Cd=function(t){for(var i=t.Ea.Nb,n=i.length-1;n>=0;n--){var r=i[n];if(r.ad!==t)break;i.pop(),s.nd,r.Ad()}}},{"./Grid":9,"./constants":38,"./log":41}],11:[function(t,i,n){"use strict";function r(){}var o=t("./constants"),e=t("./Grid"),s=o.ya,h=o.za;i.g=r,r.Xa=function(t,i){if(0===i||"0"===i)return 0;if("number"==typeof i||i.indexOf("=")<0)return r.Dd(t,~~i);var n;switch(i[0]){case"B":n=s;break;case"W":n=h;break;default:throw new Error('Invalid "hand" command: '+i)}for(var o,a=i.indexOf("="),u=i.substring(a+1).split("-"),l=u,c=0;o=l[c],c<l.length;c++){var f=e.rb(o);t.ob(f[0],f[1],n)}return u.length},r.Dd=function(t,i){var n=t.Sa;if(i>4&&(9>n||n%2===0)&&(i=4),5>=n)return 0;for(var r=13>n?2:3,o=1+r,e=(1+n)/2,h=n-r,a=0;i>a;a++){switch(i%2===1&&i>4&&a===i-1&&(a=8),a){case 0:var u=o,l=o;break;case 1:u=h,l=h;break;case 2:u=o,l=h;break;case 3:u=h,l=o;break;case 4:u=o,l=e;break;case 5:u=h,l=e;break;case 6:u=e,l=o;break;case 7:u=e,l=h;break;case 8:u=e,l=e}t.ob(u,l,s)}return i}},{"./Grid":9,"./constants":38}],12:[function(t,i,n){"use strict";function r(t){this.Ed=t,this.Fd=new e.Hd.Gd(t)}function o(t){return 1!==t?t+" points":"1 point"}var e=t("./ai"),s=t("./constants"),h=t("./Grid"),a=s.ya,u=s.za;i.g=r,r.prototype.Id=function(){var t=this.Jd()[0];return t[a]-t[u]},r.prototype.Kd=function(){return this.Ld(this.Jd())},r.prototype.Md=function(){return this.Jd()},r.prototype.Nd=function(){return this.Fd.Nd()},r.prototype.Jd=function(){var t=this.Ed,i=t.Ea,n=t.Ga;if(null!==t.Ma)return["resi",1-t.Ma,t.Na];this.Fd.Od(i);var r=this.Fd.Pd,o=this.Fd.Qd,e=[r[a]+o[u],r[u]+o[a]+n],s=[[r[a],o[u],0],[r[u],o[a],n]];return[e,s]},r.prototype.Ld=function(t){if("resi"===t[0]){var i,n=h.Ac[t[1]],r=h.Ac[1-t[1]];switch(t[2]){case"time":i=r+" ran out of time";break;case null:case void 0:i=r+" resigned";break;default:i=r+" disqualified: "+t[2]}return[n+" won ("+i+")"]}if(!t||2!==t.length)throw new Error("Invalid score info: "+t);var e=t[0],s=t[1];if(e.length!==s.length)throw new Error("Invalid score info");var l=[],c=e[a]-e[u];l.push(this.Rd(c));for(var f=a;u>=f;f++){var p=s[f],g=p[0],d=p[1],v=p[2],b=0!==d?" "+(0>d?"-":"+")+" "+Math.abs(d)+" prisoners":"",y=v>0?" + "+v+" komi":"",m=d||v?" ("+g+b+y+")":"";l.push(h.Qc(f)+": "+o(e[f])+m)}return l},r.prototype.Rd=function(t){if(0===t)return"Tie game";var i=t>0?a:u;return h.Qc(i)+" wins by "+o(Math.abs(t))}},{"./Grid":9,"./ai":37,"./constants":38}],13:[function(t,i,n){"use strict";function r(t,i,n){g[t]=[i,n]}function o(t,i){d[t]=i}function e(){g={},d={},r("GM","int",null),r("FF","int","fileFormat"),r("SZ","int","boardSize"),r("AB","move",null),r("AW","move",null),r("HA","int","handicap"),r("KM","real","komi"),r("RU","text","rules"),r("RE","text","result"),r("PB","text","playerBlack"),r("PW","text","playerWhite"),r("BS","int","blackSpecies"),r("WS","int","whiteSpecies"),r("LT","flag","enforceLosingOnTime"),r("SO","text","source"),r("ID","text","gameId"),r("AP","text","application"),r("BR","text","blackRank"),r("WR","text","whiteRank"),r("BT","text","blackTeam"),r("WT","text","whiteTeam"),r("TM","text","timeLimit"),r("OT","text","overtimeMethod"),r("EV","text","event"),r("RO","text","round"),r("DT","text","date"),r("PC","text","place"),r("GN","text","gameName"),r("ON","text","openingPlayed"),r("GC","text","gameComment"),r("C","text","comment"),r("N","text","nodeName"),r("US","text","userName"),r("AN","text","analyseAuthor"),r("CP","text","copyright"),r("CA","text","characterSet"),r("ST","text",null),o("B","move"),o("W","move"),o("AB","move"),o("AW","move"),o("BL",null),o("WL",null),o("C",null),o("CR",null),o("BM",null),o("N",null)}function s(){d||e(),this.text=null,this.Sd=null,this.bb=this.Ga=0,this.Td=null,this.Ud=null,this.Ia=c,this.Vd=null,this.tb=0}function h(t){if(t.Zd("a","z"))return t.charCodeAt()-97;if(t.Zd("A","Z"))return t.charCodeAt()-65;throw new Error("Invalid coordinate value: "+t)}function a(t){for(var i=0;;){var n=t.indexOf("]",i);if(-1===n)return-1;if("\\"!==t[n-1])return n;i=n+1}}var u=t("./constants"),l=t("./log"),c=u.ya,f=u.za,p=["B","W"],g=null,d=null;i.g=s,s.gb=function(t){return t.trim().startsWith("(;")},s.prototype.ab=function(t,i){if(!s.gb(t))throw new Error("Not an SGF file");this.text=t,this.Sd=[],this.Td=[[],[]],this.Wd(t),this.Xd(),this.Yd(i)},s.prototype.eb=function(){return this.Vd},s.prototype.cb=function(t,i){var n=this.Ud[t];return void 0!==n?n:i};var v="abcdefghjklmnopqrstuvwxyz";s.prototype.$d=function(t){if(this.bb)throw new Error("SZ set twice");this.bb=t},s.prototype._d=function(t){if(!this.bb)throw new Error("Move seen before SZ is known");if(""===t||"tt"===t&&this.bb<=19)return"pass";var i=v[h(t[0])],n=this.bb-h(t[1]);return i+n},s.prototype.ae=function(t,i,n){n||this.tb++;var r=t===this.Ia?"":p[t];this.tb?(this.Ia=1-t,this.Vd.push(r+i)):this.Td[t].push(i)},s.prototype.be=function(t,i){switch(i){case"text":return t;case"int":return parseInt(t);case"real":return parseFloat(t);case"flag":return!0;case"move":return this._d(t);default:throw new Error("Invalid tag type: "+i)}},s.prototype.ce=function(t,i){var n=d[t];if(void 0===n)return l.warn&&l.warn("Unknown property "+t+"["+i+"] ignored");if(n){var r=this.be(i,n);switch(t){case"B":return this.ae(c,r);case"W":return this.ae(f,r);case"AB":return this.ae(c,r,!0);case"AW":return this.ae(f,r,!0)}}},s.prototype.de=function(t){var i=this.Td[t];return i.length?"hand:"+p[t]+"="+i.join("-")+",":""},s.prototype.Yd=function(t){this.Vd=[],this.tb=0,this.Ia=null;for(var i=1;i<this.Sd.length;i++)for(var n=this.Sd[i],r=0;r<n.length;r+=2){var o=n[r]||o,e=n[r+1];this.ce(o,e)}var s=t?t-1:this.Vd.length;this.Vd=(this.de(c)+this.de(f)+this.Vd.slice(0,s).join(",")).zb(",")},s.prototype.ee=function(t,i){var n=g[t];if(void 0===n)return this.Ud[t]=i,l.fe("Unknown property in SGF header: "+t+"["+i+"]");var r=n[0],o=n[1],e=this.be(i,r);return o&&(this.Ud[o]=e),e},s.prototype.Xd=function(){this.bb=this.Ga=0,this.Ud={};for(var t=this.Sd[0],i=0;i<=t.length-1;i+=2){var n=t[i],r=t[i+1],o=this.ee(n,r);switch(n){case"GM":if(1!==o)throw new Error("SGF game is not a GO game");break;case"FF":(3>o||o>4)&&l.warn&&l.warn("SGF format "+o+". Not sure we handle it well.");break;case"SZ":this.$d(o);break;case"KM":this.Ga=o;break;case"AB":this.ae(c,o,!0);break;case"AW":this.ae(f,o,!0)}}},s.prototype.Wd=function(t){for(t=this.ge(t),t=this.he("(",t),t=this.ie(t),this.je=!1;!this.je;)t=this.ie(t);return this.he(")",t)},s.prototype.ie=function(t){if(t=this.ge(t),";"!==t[0])return this.je=!0,t;t=this.he(";",t);for(var i=[];;){for(var n=0;t[n]&&t[n].Zd("A","Z");)n++;var r=t.substr(0,n);for(""===r&&this.ke("Property name expected",t),i.push(r),t=this.he(r,t);;){t=this.he("[",t);var o=a(t);0>o&&this.ke("Missing ']'",t);var e=t.substr(0,o);if(i.push(e),t=this.he(e+"]",t),"["!==t[0])break;i.push(null)}if(!t[0]||!t[0].Zd("A","Z"))break}return this.Sd.push(i),t},s.prototype.ge=function(t){return t.trim()},s.prototype.he=function(t,i){return i.startsWith(t)||this.ke(t+" expected",i),i.replace(t,"").trim()},s.prototype.ke=function(t,i){throw new Error("Syntax error: '"+t+"' at ..."+i.substr(0,20)+"...")}},{"./constants":38,"./log":41}],14:[function(t,i,n){"use strict";function r(t,i,n,r){this.Ea=t,this.wc=i,this.xc=n,this.color=r,this.group=null,this.ld=[],this.ne=[]}var o=t("./constants"),e=t("./Grid"),s=t("./Group"),h=o.EMPTY,a=o.Gb,u=o.le,l=o.me;i.g=r,r.Gb=new r(null,-1,-1,a);var c=r.oe=[[0,1],[1,0],[0,-1],[-1,0]],f=r.pe=[[1,1],[1,-1],[-1,-1],[-1,1]];r.prototype.clear=function(){this.color=h,this.group=null},r.prototype.Lb=function(){for(var t=this.Ea.Jb,i=l;i>=u;i--){var n=t[this.xc+c[i][1]][this.wc+c[i][0]];n.color===h&&this.ld.push(n),this.ne.push(n),n=t[this.xc+f[i][1]][this.wc+f[i][0]],this.ne.push(n)}},r.prototype.toString=function(){return this.color===h?this.gd():(this.color?"W":"B")+"-"+this.gd()},r.prototype.gd=function(){return e.Zc(this.wc,this.xc);
},r.prototype.qe=function(){return this.re().map(function(t){return t.gd()}).sort().join(",")},r.prototype.gc=function(){return this.color===h},r.prototype.se=function(){return 2===this.ld.length},r.prototype.te=function(){var t=this.Ea,i=t.Sa-1;return t.ec(1===this.wc?2:i,1===this.xc?2:i)},r.prototype.ue=function(){return this.ld.length<=3},r.prototype.ve=function(){var t=this.Ea.Sa,i=this.wc,n=this.xc;return Math.min(Math.min(i-1,t-i),Math.min(n-1,t-n))},r.prototype._b=function(t){for(var i=this.ld.length-1;i>=0;i--){var n=this.ld[i];if(n.color===h)return!1;if(n.color!==t){if(1===n.group.vc)return!1}else if(n.group.vc>1)return!1}return!0},r.prototype.dc=function(t){for(var i=null,n=this.ld.length-1;n>=0;n--){var r=this.ld[n].group;if(r&&r.color===1-t&&1===r.vc){if(i)return!1;i=r}}if(!i)return!1;if(1!==i.pc.length)return!1;var o=i.pc[0];if(this.Ea.nc()!==o)return!1;var e=this.Ea.mc();if(!e||e.ad!==o||1!==e.pc.length)return!1;var s=e.pc[0];return s.wc===this.wc&&s.xc===this.xc},r.prototype.zd=function(){this.color=h,this.group=null},r.prototype.Bd=function(t){this.group=t,this.color=t.color},r.prototype.kc=function(t){this.color=t;var i=this.uc(t);0===i.length?this.group=this.Ea.Rb(this,this.we()):(this.group=i[0],this.group.pd(this));for(var n=this.uc(1-t),r=n.length-1;r>=0;r--)n[r].rd(this);for(var o=1;o<i.length;o++)this.group.vd(i[o],this)},r.prototype.jc=function(){this.group.yd(this),this.group.qd(this);for(var t=this.uc(1-this.color),i=t.length-1;i>=0;i--)t[i].ud(this);this.group=null,this.color=h,s.Cd(this)},r.prototype.wd=function(t){this.group=t},r.prototype.uc=function(t){for(var i=[],n=this.ld,r=n.length-1;r>=0;r--){var o=n[r];o.color===t&&i.indexOf(o.group)<0&&i.push(o.group)}return i},r.prototype.re=function(){for(var t=[],i=this.ld,n=i.length-1;n>=0;n--){var r=i[n];r.color===h&&t.push(r)}return t},r.prototype.we=function(){for(var t=0,i=this.ld,n=i.length-1;n>=0;n--)i[n].color===h&&t++;return t},r.prototype.xe=function(t,i){for(var n=0,r=this.ld,o=r.length-1;o>=0;o--)r[o].color===t&&(i&&i.push(r[o]),n++);return n},r.prototype.ye=function(t){for(var i=this.ld,n=i.length-1;n>=0;n--)if(i[n].group===t)return!0;return!1}},{"./Grid":9,"./Group":10,"./constants":38}],15:[function(t,i,n){"use strict";function r(t){e.call(this,t),this.Le=t.Oe.Ne.Me.Kb,this.Pe=t.Oe.Qe}var o=t("../../constants"),e=(t("../../Grid"),t("./Heuristic")),s=t("util").inherits,h=t("../../log"),a=(t("../../test"),t("./Zone")),u=o.EMPTY,l=o.Gb,c=o.ze,f=o.ALWAYS,p=o.Ae,g=o.Be,d=o.Ce,v=o.De,b=o.Ee,y=o.Fe,m=o.Ge,w=o.He,x=o.Ie,k=o.Je,S=o.Ke,E=-1,j=0,M=1;s(r,e),i.g=r,r.prototype.Re=function(t,i,n){var r=this.Ea.ec(t,i);if(this.Le[i][t]<0&&!this.Pe.Se(r))return h.debug,0;var o=[],e=[];switch(this.Te(r,n,o,e)){case j:return this.Ue(r,n,o);case M:this.We.Ve(o,r,r,n);for(var s=e.length-1;s>=0;s--)this.We.Ve(o,r,e[s],n);return 0;default:return 0}},r.prototype.Te=function(t,i,n,r){for(var o=1-i,e=0,s=0,h=0,f=!1,G=0;8>G;G++){var z=G%2,D=t.ne[G];switch(D.color){case l:continue;case u:continue;case i:var P=D.group;z?s++:(e++,1===P.vc&&(f=!0)),n.indexOf(P)<0&&n.push(P);break;default:if(1===D.group.vc)break;z||h++}}if(n.length<2)return E;if(4===e)return f?M:j;var C=new a(t,i),O=C.Xe;C.normalize();var B,F,I;if(t.ue()){if(t.se())return j;if(3===e)return f?M:j;if(2===e){if(f)return M;if(O[p].color!==i){if(!h)return j}else{if(O[y].color===u)return j;if(!h)return j;if(O[d].group.vc<=3)return j}}else if(1===e){if(!h)return j;if(O[p].color===u){if(O[d].group.vc<4)return j;if(I=O[y],I.color===i)return j;I.color===u&&(r.push(I),r.push(O[p]))}}else{if(!h)return j;if(O[p].color===u)return j;if(h>1)return E}return M}if(3===e){if(f)return M;if(!h)return j;if(3===n.length)return M;if(O[d].group===O[g].group){if(O[w].color===u)return j}else if(O[m].color===u)return j;return M}if(2===e){if(O[v].group===O[g].group)return h||O[m].color===o&&O[y].color===o?M:j;if(O[p].color===i){if(4===s)return j;if(3===s){if(!h)return j;if(1===h){if(O[d].color===o)return j;if(O[k].color!==o||O[k].group.vc<3)return j}}else if(2===s)if(O[y].color===i){if(!h)return j;if(1===h&&O[d].color===o)return j}else if(O[b].color===i){if(h)return M;if(O[m].color!==o||O[y].color!==o)return j;r.push(O[d]),r.push(O[v]),O[m].color!==o&&r.push(O[m]),O[y].color!==o&&r.push(O[y])}else{if(h)return M;if(O[b].color!==o||O[y].color!==o)return j;r.push(O[d]),r.push(O[v]),O[b].color!==o&&r.push(O[b]),O[y].color!==o&&r.push(O[y])}else{if(1!==s)return h?M:O[d].ue()||O[v].ue()?j:O[S].ue()&&(F=O[v],0===this.Ze[o][F.xc][F.wc])?j:O[k].ue()&&(B=O[d],0===this.Ze[o][B.xc][B.wc])?j:(O[d].xe(o)<3&&r.push(O[d]),O[v].xe(o)<3&&r.push(O[v]),M);if(!h)return j}}else if(3===s){if(2===n.length)return j;if(O[w].color===u){if(O[k].color!==o||O[x].color!==o)return j;if(2>h)return j}else r.push(O[p]),r.push(O[d])}else if(2===s)if(O[w].color===u){if(O[b].color!==i)return j;if(0===h)return j;if(2===n.length)return O[g].group!==O[v].group?j:O[d].color===u?E:O[y].color===u?(r.push(O[p]),M):E;O[d].color===u&&r.push(O[d])}else{if(O[w].color===i){if(2===h)return E;var T=O[y].color===o,N=O[m].color===o;return 0===h?T||N?(r.push(O[p]),r.push(O[d]),M):j:(O[d].color!==u||N?O[p].color!==u||T||r.push(O[v]):r.push(O[d]),M)}if(O[b].color!==i){if(2===h)return M;if(0===h){if(O[b].color!==u)return M;r.push(O[b]),r.push(O[p]),r.push(O[d])}return M}if(h)return M;if(O[k].color!==o)return j;r.push(O[d]),r.push(O[p]),O[y].color!==u||O[k].color===o&&O[x].color===o||r.push(O[y])}else{if(1!==s){if(O[w].color===u)return j;if(!h){if(1===O[c].ve())return j;r.push(O[p]),r.push(O[d])}return M}if(O[b].color===i)return h||(r.push(O[p]),r.push(O[d])),M;if(O[w].color===u)return j;if(O[w].group.vc>(O[g].ue()?2:1))return O[p].color===u&&r.push(O[p]),O[d].color===u&&r.push(O[d]),M}}else if(1===e){if(4===s){if(0===h)return j}else if(3===s){if(O[b].color!==i){if(O[v].color===u)return j}else if(O[v].color===u){if(O[S].color!==o)return j;if(O[b].group===O[y].group)return j}}else if(2===s&&O[b].color===u&&O[v].color===u)return j}else if(4===s){if(0===h&&n.length<4)return j}else{if(3!==s)return O[m].color===i&&O[w].color===i?O[g].color===u?E:O[g].group.vc<=2?M:E:M;if(O[v].color===u&&O[w].group===O[m].group||O[g].color===u&&O[w].group===O[y].group)return j}return M},r.prototype.Ue=function(t,i,n){if(i!==this.color)return 0;h.debug;var r=this.af._e.$e(t);if(r.bf(t)&&2===n.length){if(this.af.cf)return.5;var o=this.We.df(n[0].bd);return o>0&&1>o?.5:0}return r.color!==i?0:this.af.cf?-.5:-1},r.prototype.ef=function(t,i){return[this.Ea.ec(t.wc,i.xc),this.Ea.ec(i.wc,t.xc)]},r.prototype.ff=function(t,i,n){var r=Math.abs(i.wc-t.wc),o=Math.abs(i.xc-t.xc);if(r+o===1)return 0;var e,s=1-n,h=0;if(1===r&&1===o){var a=this.ef(t,i),u=a[0],l=a[1];if(u.color===n||l.color===n)return 0;if(u.color===s&&h++,l.color===s&&h++,0===h)return 0;if(2===h)return 99;var c=u.color===s?0:1,f=a[c],p=a[1-c];return t.ue()||i.ue()?1===p.ve()?f.group.vc>2?1:0:0!==p.xe(s)?1:0:1===p.ve()?0!==p.xe(s)?1:0:1}if(r+o===2){if(e=this.Ea.ec((t.wc+i.wc)/2,(t.xc+i.xc)/2),e.color===n)return 0;if(e.color===s)return e.group.vc;for(var g=e.ld.length-1;g>=0;g--)e.ld[g].color===s&&h++;return h>=1?1:t.ue()&&i.ue()?0:.5}if(r+o===3&&t.ue()&&i.ue()){for(var d=this.betweenStones(t,i),v=0,b=d.length-1;b>=0;b--)e=d[b],e.color===s&&(v+=e.group.vc),0!==e.xe(s)&&(v+=1);return v}return r+o},r.prototype.gf=function(t,i){for(var n=[],r=t.ld.length-1;r>=0;r--){var o=t.ld[r];switch(o.color){case u:n.push(o);break;case i:if(o.group.vc>1&&o.group.ed<f)return o;break;default:if(1===o.group.vc)return o.group.md()[0].pc[0]}}for(var e=2,s=n.length-1;s>=0;s--)for(var h=n[s],a=h.ld.length-1;a>=0;a--){var l=h.ld[a];if(l!==t&&l.color===i&&l.group.ed!==f){var c=this.ff(t,l,i);if(!(c>=2)&&(e-=2-c,.5>=e))return l}}return null}},{"../../Grid":9,"../../constants":38,"../../log":41,"../../test":43,"./Heuristic":18,"./Zone":29,util:4}],16:[function(t,i,n){"use strict";function r(t){o.call(this,t)}var o=t("./Heuristic"),e=t("util").inherits;e(r,o),i.g=r,r.prototype.hf=function(){this.af._e["if"](),this.jf()},r.prototype.jf=function(){var t=this.af._e.kf;for(var i in t){var n=~~i,r=t[n],o=r.group;o.fd=r.lf&&r.lf.group}}},{"./Heuristic":18,util:4}],17:[function(t,i,n){"use strict";function r(t){s.call(this,t),this.Ib=new e(this.Sa,a),this.mf=t.Oe.nf}var o=t("../../constants"),e=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,a=o.Gb;h(r,s),i.g=r,r.prototype.hf=function(){var t=this.Ea;this.af._e.pf(t,this.Ib),this.jf()},r.prototype.jf=function(){var t=this.qf,i=t.rf,n=t.sf,r=this.af._e.kf;for(var o in r){var e=~~o,s=r[e],h=s.group;h.dd=i[e],h.ed=n[e];for(var a=s.tf.length-1;a>=0;a--){var u=s.tf[a];u.bf&&this.mf.uf(u.vf,h.color)}}}},{"../../Grid":9,"../../constants":38,"./Heuristic":18,util:4}],18:[function(t,i,n){"use strict";function r(t){this.af=t,this.yf(),this.Ea=t.Ea,this.Sa=t.Ea.Sa,this.Me=new e(this.Sa,0,a),this.zf=t.zf,this.color=this.Af=null,this.Bf()}var o=t("../../constants"),e=t("../../Grid"),s=t("../../log"),h=t("../../helper"),a=o.Gb,u=o.wf,l=o.xf;i.g=r,r.prototype.yf=function(){var t=this.constructor;this.name=t.name||h.Cf(t),this.name.length<5&&(this.name+=this.af.Df.length)},r.prototype.Bf=function(){var t=this.af.Oe;this.Ef=t.Ff,this.We=t.nf,this.Gf=t.Hf,this.qf=t.If,this.Ze=t.Jf?t.Jf.Ze:null},r.prototype.Kf=function(t){this.color=t,this.Af=1-t},r.prototype.hf=function(t,i){for(var n=s.level,r=this.af.color,o=this.Me.Kb,e=1;e<=this.Sa;e++)for(var h=1;h<=this.Sa;h++){var a=t[e][h];if(!(u>a)){a===l&&this.name===this.af.Lf&&s.Mf(s.Nf);var c=o[e][h]=this.Re(h,e,r);i[e][h]+=c,a===l&&s.Mf(n)}}},r.prototype.Of=function(t,i,n){var r=this.Me.Kb[i][t];r&&(n[this.name]=r)},r.prototype.Pf=function(t,i,n,r){return this.af.Qf.get(this.name+"-"+t,i,n,r)}},{"../../Grid":9,"../../constants":38,"../../helper":39,"../../log":41}],19:[function(t,i,n){"use strict";function r(t){e.call(this,t),this.Rf=null,this.Le=t.Oe.Ne.Me.Kb}var o=t("../../constants"),e=(t("../../Grid"),t("./Heuristic")),s=t("util").inherits,h=t("../../log"),a=o.ALWAYS,u=o.EMPTY;s(r,e),i.g=r,r.prototype.Sf=function(t,i){for(var n=t.md(),r=n.length-1;r>=0;r--){var o=n[r];if(!(o.vc>1)){var e=o.pc.length;if(e>=i)return!0;for(var s=o.md(),h=s.length-1;h>=0;h--)if(e+=s[h].vc-1,e>=i)return!0}}return!1};var l=1,c=1.1;r.prototype.Tf=function(t,i){for(var n=0,r=0,o=0,e=t.ld.length-1;e>=0;e--){var s=t.ld[e];switch(s.color){case u:o+=.01;break;case i:o+=.01*(s.group.vc-1),s.group.dd===a&&(o+=2),n+=1e-4;break;default:if(s.group.fd)return c;1===s.group.vc&&(r+=s.group.pc.length)}}return r+o+n},r.prototype.Uf=function(t,i,n,r){for(var o=!1,e=!1,s=1-i[0].color,h=i.length-1;h>=0;h--){var a=i[h];1===a.vc&&((!n||1===n&&r)&&this.We.Vf(t,s),n||!this.Wf(a,n)||this.Sf(a,1)?(e=!0,n||this.We.Xf(a,t)):this.af.cf&&(o=!0))}return o&&this.We.Yf(t),e},r.prototype.Zf=function(t,i,n){if(!i.ye(n))return!1;for(var r=i.uc(n.color),o=r.length-1;o>=0;o--){var e=r[o];if(e.vc>2)return!1;if(!t.ye(e))return!1}return!0},r.prototype.$f=function(t,i,n,r,o,e){for(var s,a=!1,u=t.uc(r),l=i.length-1;l>=0;l--)if(s=i[l],2===s.vc&&!this.Sf(s,2)&&(0!==n.length||1!==u.length||2!==u[0].vc)){if(1===n.length&&0===u.length){if(!this.Zf(t,n[0],s))continue;a=!0,h.debug}o||!s.bd._f()?e.push(s):h.debug}return a},r.prototype.ag=function(t,i,n){return n&&i.vc===n.vc&&n.hd()?!(t.ye(n)&&n.od(t)<1):!1},r.prototype.bg=function(t,i,n,r){for(var o=!1,e=i.length-1;e>=0;e--){var s=i[e],h=s.vc,a=s.fd;h>2&&this.ag(t,s,a)?(n||this.We.cg(s,t),o=!0):h>=2&&0===n&&!r&&(n||this.We.dg(s,t))}return o},r.prototype.eg=function(){this.Rf=[]},r.prototype.Re=function(t,i,n){return this.fg(t,i,n,0),0},r.prototype.fg=function(t,i,n,r,o){var e=this.Ea.ec(t,i),s=e.uc(1-n);if(!s.length)return!1;var a=e.re(),u=[],c=this.$f(e,s,a,n,r,u);if(0===r&&c&&this.Rf.push(e),!c&&a.length<=1){var f=this.Tf(e,n);if(f!==l&&(.02>f||f>1&&1.01>f))return!1}var p=this.Uf(e,s,r,o),g=!c&&this.Le[i][t]<0,d=this.bg(e,s,r,g);if(!u.length)return p||d;this.Ea.ic(t,i,n);for(var v=[!1,!1,!1],b=u.length-1;b>=0;b--)if(h.debug,!this.Wf(u[b],r)){if(1===u.length){u.pop();break}v[b]=!0}this.Ea.lc();var y=this.gg(e,u,v,r);return h.debug&&(p||d||y),p||d||y},r.prototype.gg=function(t,i,n,r){switch(i.length){case 0:return!1;case 1:return n[0]?!1:(r||this.We.Xf(i[0],t),!0);case 3:case 2:return r||(n[1]?this.We.Xf(i[0],t):this.We.Xf(i[1],t)),!0;default:throw new Error("Unexpected in Hunter#getMultipleChaseThreat")}},r.prototype.Wf=function(t,i){var n=t.kd();if(1!==n.length)throw new Error("Unexpected: hunter #1: "+n.length);var r=n[0],o=this.Ea.ic(r.wc,r.xc,t.color),e=this.hg(o,i);return this.Ea.lc(),h.debug,e},r.prototype.ig=function(t){for(var i=1-t.color,n=t.ld,r=n.length-1;r>=0;r--){var o=n[r];if(o.color===i){var e=o.group;if(1===e.vc){var s=e.kd()[0];return s.ye(t.group)?this.Wf(e,1)?1:-1:1}}}return 0},r.prototype.hg=function(t,i){var n=t.group;if(n.vc<=1)return!0;if(n.vc>2)return!1;var r=this.ig(t);if(0!==r)return 0>r;var o=t.re();if(2!==o.length&&(o=n.kd()),2!==o.length)throw new Error("Unexpected: hunter #2");var e=o[0],s=o[1];h.debug;var a=1-n.color;return this.fg(e.wc,e.xc,a,i+1)||this.fg(s.wc,s.xc,a,i+1)},r.prototype.jg=function(t){return this.hg(t,1)},r.prototype.kg=function(t,i,n){return this.fg(t,i,n,1,n===this.Af)},r.prototype.Se=function(t){return-1!==this.Rf.indexOf(t)}},{"../../Grid":9,"../../constants":38,"../../log":41,"./Heuristic":18,util:4}],20:[function(t,i,n){"use strict";function r(t){s.call(this,t),this.lg=[new e(this.Sa,a),new e(this.Sa,a)],this.Ze=[this.lg[l].Kb,this.lg[c].Kb]}var o=t("../../constants"),e=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,a=o.Gb,u=o.EMPTY,l=o.ya,c=o.za,f=2,p=1;h(r,s),i.g=r,r.prototype.hf=function(){this.lg[l].init(0),this.lg[c].init(0);for(var t=1;t<=this.Sa;t++)for(var i=1;i<=this.Sa;i++){var n=this.Ea.ec(i,t),r=n.color;if(r!==u)for(var o,e=this.Ze[r],s=n.ld,h=0;o=s[h],h<s.length;h++)if(e[o.xc][o.wc]+=f,o.color===u)for(var a,g=o.ld,d=0;a=g[d],d<g.length;d++)a!==n&&(e[a.xc][a.wc]+=p)}}},{"../../Grid":9,"../../constants":38,"./Heuristic":18,util:4}],21:[function(t,i,n){"use strict";function r(t){a.call(this,t),this.debug=!1,this.Ib=new h(this.Sa,null),this.mg=[],this.ng="",this.og=this.Pf("spaceInvasion",2,.01,4),this.pg=this.Pf("pressure",1,.01,2),this.qg=this.Pf("potEyeCoeff2",.78,.75,.85)}function o(){this.ug=null,this.vg=[!1,!1],this.wg=0,this.xg=[],this.yg=[],this.zg=[]}function e(t,i,n){this.name=t,this.wg=i,this.group=n,this.Dg=1/0}var s=t("../../constants"),h=t("../../Grid"),a=(t("./boan/GroupInfo"),t("./Heuristic")),u=t("util").inherits,l=t("../../log"),c=(t("../../test"),s.ALWAYS),f=.1;u(r,a),i.g=r,r.prototype.hf=function(){this.debug=this.af.rg,this.Ib.init(null),this.mg.length=0},r.prototype.sg=function(t,i){a.prototype.hf.call(this,t,i)},r.prototype.Re=function(t,i){var n=this.Ib.Kb[i][t];return n?n.tg():0},r.prototype.Of=function(t,i,n){var r=this.Ib.Kb[i][t];r&&r.tg(n,this.name)},o.prototype.tg=function(t,i){var n=this.wg;t&&n&&(t[i+"-base"]=n);var r=this.xg;if(!r.length)return n;for(var o=r.length-1;o>=0;o--){var e=r[o],s=e.wg*this.yg[o];if(n+=s,t){var h=this.yg[o],a=1!==h?" factor:"+h.toFixed(2):"";t[i+"-"+e+a]=s}}return n},r.prototype.Ag=function(t,i){return this.Ib.Kb[i][t]},r.prototype.Bg=function(t,i){var n=this.Ib.Kb[i][t];return n?n:(this.Ib.Kb[i][t]=n=new o,n)},r.prototype.uf=function(t,i){this.Bg(t.wc,t.xc).ug=i},r.prototype.Cg=function(t,i){var n=this.Ag(t.wc,t.xc);return n&&n.ug===i},r.prototype.Vf=function(t,i){this.Bg(t.wc,t.xc).vg[i]=!0},r.prototype.vg=function(t,i){var n=this.Ag(t.wc,t.xc);return n&&n.vg[i]},e.prototype.toString=function(){return this.name+(this.Dg!==1/0?" minMoves:"+this.Dg:"")+" score:"+this.wg.toFixed(2)},r.prototype.Eg=function(t,i,n){this.ng=t+" on "+i.toString(1),n.wc===this.af.Fg&&n.xc===this.af.Gg?l.Mf(l.Nf):l.level===l.Nf&&l.Mf(l.Hg)},r.prototype.Ig=function(t){var i=this.mg[t.Ub];if(i)return i;for(var n=2*t.pc.length,r=t.kd(),o=0,s=r.length-1;s>=0;s--)o+=r[s].we();return n+=this.og*Math.max(0,o-1),this.mg[t.Ub]=i=new e("life/death of "+t.toString(1),n,t),i},r.prototype.Jg=function(t,i,n,r){if(!i)throw new Error("Unexpected");n=n||1,r=r||1,l.debug;var o=this.Bg(i.wc,i.xc),e=o.xg,s=o.yg,h=o.zg,a=e.indexOf(t);return 0>a?(e.push(t),s.push(n),h.push(r)):(s[a]=Math.max(s[a],n),h[a]=Math.min(h[a],r)),t.Dg=Math.min(t.Dg,r),t},r.prototype.df=function(t){var i,n=t.Kg;if(n)i=n.Lg;else{var r=t.group;if(r.dd===c)return 1;if(r.xDEAD===c)return 0;i=[t]}var o=this.Gf.Mg(i);return this.Ng(o)},r.prototype.Ng=function(t){return t>=2.5?1:1.5>t?0:2>t?.5:this.qg},r.prototype.Og=function(t,i,n,r,o,e){r=r||1;var s,h=this.Gf.Mg(t),a=this.Ng(h);if(e){var u=this.Ng(h+e);s=a-u,s=Math.min(2*s,1)}else s=1-a;if(r*=s,l.debug,f>r)return void l.debug;for(var c=o||0,p=t.length-1;p>=0;p--)c+=t[p].group.vc;for(p=t.length-1;p>=0;p--)this.Qg(t[p].group,i,n,r,c)},r.prototype.Qg=function(t,i,n,r,o){if(!(f>r)){var e=this.Ig(t);return n||this.Rg(t,i,r,o),this.Jg(e,i,r,o)}},r.prototype.Rg=function(t,i,n,r){if(!(1===t.pc.length&&t.pc[0].se()||0===i.we()&&t.pc.length<3)){r=r||1;for(var o=t.md(),e=o.length-1;e>=0;e--){var s=o[e];s.dd!==c&&s.vc===r&&(this.Qg(s,i,!0,n,r),this.Sg(s,i,n,r))}}},r.prototype.Sg=function(t,i,n,r){for(var o=t.bd.Tg(i),e=o.length-1;e>=0;e--)this.Og(o[e],i,!0,n,r)},r.prototype.dg=function(t,i){var n=1/(t.vc+1)*this.pg;if(t.ed===c){if(!this.af.cf)return 0;n=this.zf}this.Bg(i.wc,i.xc).wg+=n,this.debug&&i.wc===this.af.Fg&&i.xc===this.af.Gg&&l.fe("MoveInfo "+h.Qc(1-t.color)+" - pressure at "+i+": "+n.toFixed(2))},r.prototype.Yf=function(t){this.Bg(t.wc,t.xc).wg+=this.zf},r.prototype.cg=function(t,i){this.debug&&this.Eg("race",t,i);var n=t.bd,r=n.Kg?n.Kg.Lg:[n];this.Og(r,i,!1)},r.prototype.Ug=function(t,i,n,r){this.debug&&this.Eg("eye threat",t,i);var o=t.bd,e=o.Kg?o.Kg.Lg:[o];return this.Og(e,i,n===t.color,void 0,void 0,-r),!0},r.prototype.Ve=function(t,i,n,r){var o=t[0];this.debug&&this.Eg("cut",o,i);for(var e=r===o.color,s=o.bd.Vg(t,i),h=s.length-1;h>=0;h--)this.Og(s[h],n,e,void 0,1)},r.prototype.Xf=function(t,i){this.debug&&this.Eg("kill",t,i);for(var n=t.bd.Tg(i),r=n.length-1;r>=0;r--)this.Og(n[r],i,!1);this.Qg(t,i,!1,1,t.vc)},r.prototype.Wg=function(t,i){this.debug&&this.Eg("rescue",t,i),this.Sg(t,i),this.Qg(t,i,!0)}},{"../../Grid":9,"../../constants":38,"../../log":41,"../../test":43,"./Heuristic":18,"./boan/GroupInfo":33,util:4}],22:[function(t,i,n){"use strict";function r(t){e.call(this,t),this.Pe=null}var o=t("../../Grid"),e=t("./Heuristic"),s=t("util").inherits,h=t("../../log");s(r,e),i.g=r,r.prototype.eg=function(){this.Pe||(this.Pe=this.af.Oe.Qe)},r.prototype.Re=function(t,i,n){if(this.Ze[1-n][i][t]<2&&this.Ze[n][i][t]<2&&0===this.Ea.ec(t,i).xe(n))return 0;var r,e=this.Ea.ic(t,i,n),s=e.group,a=0;return h.debug&&(r=o.Zc(t,i)),1===s.vc?1===s.pc.length&&e.re()[0].dc(this.Af)?h.debug:(a-=2*s.pc.length,h.debug):2===s.vc&&(h.debug,this.Pe.jg(e)&&(a-=2*s.pc.length,h.debug)),this.Ea.lc(),a}},{"../../Grid":9,"../../log":41,"./Heuristic":18,util:4}],23:[function(t,i,n){"use strict";function r(t){s.call(this,t),this._g=[new e(this.Sa,u),new e(this.Sa,u)],this.ah=this.Pf("wideSpaceToEye",.7,.01,1),this.bh=this.Pf("stoneCountToEye",.33,.25,1)}var o=t("../../constants"),e=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,a=t("../../log"),u=o.Gb,l=o.Xg,c=o.Yg,f=o.EMPTY,p=o.ya,g=o.za,d=o.Zg,v=o.$g;h(r,s),i.g=r,r.prototype.hf=function(){this.dh()},r.prototype.dh=function(){this._g[d].init(f),this._g[v].init(f);for(var t=this.Sa;t>=1;t--)for(var i=this.Sa;i>=1;i--){var n=this.Ea.ec(i,t);if(n.color===f){var r=this.eh(i,t,n);if(null!==r){var o=this.af._e.$e(n);if(!o.fh&&!this.We.Cg(n,r)){for(var e=n.ld,s=null,h=this.Ze[1-r],u=1,p=e.length-1;p>=0;p--){var g=e[p];g.color===r&&(s=g.group),1!==u||g.ue()||0!==h[g.xc][g.wc]||g.we()!==g.ld.length||(u=2)}if(!s){if(!n.se())continue;if(s=n.te().group,!s)continue}if(n.ue()){for(var b=!1,y=1-r,m=c;m>=l;m-=2){var w=n.ne[m];if(w.color===y){b=!0;break}}if(b)continue}var x=(i+t)%2,k=this._g[x].Kb;k[t][i]=r,s.bd.gh(x,u),a.debug}}}}},r.prototype.eh=function(t,i,n){var r=this.Ze[p][i][t],o=this.Ze[g][i][t],e=r>o?p:g,s=Math.max(r,o),h=Math.min(r,o);if(h>1)return null;var a=0,u=this.Sa;return 1===h&&n.se()&&n.te().color===f&&a++,1!==t&&t!==u&&1!==i&&i!==u||a++,0>s+a-3-h?null:e},r.prototype.hh=function(t){for(var i=0,n=t.color,r=this.Ze[1-n],o=t.kd(),e=o.length-1;e>=0;e--){var s=o[e];if(!(r[s.xc][s.wc]>0)){var h=this.af._e.$e(s);void 0===h.color&&i++}}return i},r.prototype.Mg=function(t){for(var i=0,n=0,r=t.length-1;r>=0;r--){var o=t[r];i+=o.ih(),n+=o.group.pc.length}i=Math.min(i,n*this.bh);var e=0;for(r=t.length-1;r>=0;r--)e+=this.hh(t[r].group);return i+=e*this.ah}},{"../../Grid":9,"../../constants":38,"../../log":41,"./Heuristic":18,util:4}],24:[function(t,i,n){"use strict";function r(t){h.call(this,t),this.lh=new s(this.Sa,c),this.mh=this.lh.Kb,this.nh=new s(this.Sa,c),this.lg=[new s(this.Sa,c),new s(this.Sa,c)],this.oh=new s(this.Sa,c),this.ph(),this.qh=null,this.rf=[],this.sf=[]}function o(t,i,n){switch(t){case v:return[i,1];case b:return[1,i];case y:return[i,n];case m:return[n,i]}}var e=t("../../constants"),s=t("../../Grid"),h=t("./Heuristic"),a=t("util").inherits,u=t("../../log"),l=t("../../Stone"),c=e.Gb,f=e.EMPTY,p=e.ya,g=e.za,d=e.NEVER,v=e.jh,b=e.De,y=e.kh,m=e.Ce,w=e.le,x=e.me,k=s.Oc,S=s.Nc,E=l.oe,j=l.pe;a(r,h),i.g=r,r.prototype.hf=function(){this.rh(),this.lh.Pc(this.Ea),this.sh(p),this.sh(g),this.th()},r.prototype.rh=function(){this.qh=this.Ea.Yb(),this.rf.length=0,this.sf.length=0;for(var t in this.qh){var i=~~t;this.rf[i]=this.sf[i]=d}},r.prototype.uh=function(){for(var t in this.qh){for(var i=this.qh[~~t],n=i;n.$c;)n=n.$c;n.ad||n.bd.vh?this.sf[i.Ub]++:n.bd.wh&&this.rf[i.Ub]++}},r.prototype.xh=function(t,i,n){var r=n===p?-1:1,o=d;return s.Nc[2+this.lg[p].Kb[i][t]]===r&&o++,s.Nc[2+this.lg[g].Kb[i][t]]===r&&o++,o},r.prototype.yh=function(t,i,n){return this.oh.Kb[i][t]*(n===p?1:-1)},r.prototype.zh=function(t,i,n){var r=s.Nc[2+this.lg[1-n].Kb[i][t]];return r*(n===p?1:-1)},r.prototype.toString=function(){return"\n+1=white, -1=black, 0=no one or both\n"+this.oh.$b(function(t){return 0===t?"    0":"%+.1f".format(t)})+this.oh.$b(function(t){return k[2+2*t]})},r.prototype.Vb=function(){return this.oh.Wb(function(t){return k[2+2*t]})},r.prototype.Ah=function(t){return this.lg[t]},r.prototype.sh=function(t){var i=this.Ea.tb(),n=this.lg[t];for(this.Bh(n,t),this.af._e.Ch(this.Ea,n,t),this.uh(),i=this.Ea.tb()-i;i-- >0;)this.Ea.lc()},r.prototype.th=function(){for(var t=this.lg[p].Kb,i=this.lg[g].Kb,n=this.oh.Kb,r=this.Sa;r>=1;r--)for(var o=this.Sa;o>=1;o--)n[r][o]=(S[2+t[r][o]]+S[2+i[r][o]])/2;u.debug},r.prototype.Bh=function(t,i){this.Dh=null,this.Eh(this.lh,t.K(this.lh),i),u.debug,this.Fh(t.Kb,i),u.debug,this.reduce(this.nh.K(t)),this.Dh=this.nh.Kb,u.debug,this.Eh(this.lh,t.K(this.lh),i),u.debug,this.Fh(t.Kb,i),u.debug},r.prototype.Eh=function(t,i,n){u.debug;for(var r=t.Kb,o=i.Kb,e=this.Sa;e>=1;e--)for(var s=r[e],h=this.Sa;h>=1;h--)s[h]===f&&this.Gh(r,o,h,e,n,1-n)},r.prototype.reduce=function(t){for(var i=t.Kb,n=1;n<=this.Sa;n++)for(var r=1;r<=this.Sa;r++)if(this.mh[n][r]===f){var o=i[n][r];if(o!==f){var e=this.Hh(i,r,n,1-o);0===e&&(i[n][r]=f)}}},r.prototype.Gh=function(t,i,n,r,o,e){switch(this.Hh(t,n,r,o)){case 0:if(!this.Ih(t,n,r,o,e))return;break;case 4:return;case 3:if(0===this.Hh(t,n,r,e))return}return this.Jh(i,n,r,o)},r.prototype.Jh=function(t,i,n,r,o){if(this.Dh){if(!o&&this.Dh[n][i]===f)return;var e=this.Ea.ec(i,n);if(e._b(r))return;this.Ea.ic(i,n,r)}t[n][i]=r},r.prototype.Hh=function(t,i,n,r){for(var o=0,e=w;x>=e;e++){var s=E[e];t[n+s[1]][i+s[0]]===r&&o++}return o},r.prototype.Ih=function(t,i,n,r,o){for(var e=w;x>=e;e++){var s=j[e];if(t[n+s[1]][i+s[0]]===r)return!0}return!1},r.prototype.ph=function(){for(var t=[],i=w;x>=i;i++)for(var n=E[i][0],r=E[i][1],e=this.Sa-1;e>=2;e--){var s=o(i,e,this.Sa);t.push([s[0],s[1],n,r])}this.Kh=t},r.prototype.Fh=function(t,i){for(var n,r,o,e,s,h,a=this.Kh,u=a.length-1;u>=0;u--){var l=a[u],c=l[0],p=l[1];if(t[p][c]===f){var g=l[2],d=l[3],v=c+g,b=p+d,y=t[b][v];if(y===f){var m=v+g,w=b+d;if(y=t[w][m],y===f){var x=m+g,k=w+d;if(y=t[k][x],y===f);else{if(y!==i)continue;if(n=t[p-g][c-d],r=t[p+g][c+d],o=t[b-g][v-d],e=t[b+g][v+d],s=t[w-g][m-d],h=t[w+g][m+d],n===y&&o===y&&s===y)continue;if(r===y&&e===y&&h===y)continue;if(this.Jh(t,m,w,y,!0),n===y&&o===y)continue;if(r===y&&e===y)continue;if(this.Jh(t,v,b,y,!0),n===y||r===y)continue;this.Jh(t,c,p,y,!0)}}else{if(y!==i)continue;if(n=t[p-g][c-d],r=t[p+g][c+d],o=t[b-g][v-d],e=t[b+g][v+d],n!==1-y&&o===y)continue;if(r!==1-y&&e===y)continue;if(this.Jh(t,v,b,y,!0),n===y||r===y)continue;this.Jh(t,c,p,y,!0)}}else{if(y!==i)continue;if(n=t[p-g][c-d],r=t[p+g][c+d],o=t[b-g][v-d],e=t[b+g][v+d],n===y&&o!==1-y)continue;if(r===y&&e!==1-y)continue;this.Jh(t,c,p,y,!0)}}}}},{"../../Grid":9,"../../Stone":14,"../../constants":38,"../../log":41,"./Heuristic":18,util:4}],25:[function(t,i,n){"use strict";function r(t){e.call(this,t),this.Lh=[],this.Mh=this.Pf("allyInfl",.03,.01,1),this.Nh=this.Pf("enemyInfl",.13,.01,1),this.Le=t.Oe.Ne.Me.Kb}var o=t("../../constants"),e=(t("../../Grid"),t("./Heuristic")),s=t("util").inherits,h=t("../../log"),a=t("../../Stone"),u=o.EMPTY,l=a.oe,c=o.le,f=o.me;s(r,e),i.g=r,r.prototype.hf=function(t,i){var n=this.Lh;n.length=0,e.prototype.hf.call(this,t,i);for(var r=n.length-1;r>=0;r--)this.Oh(n[r],i)},r.prototype.Re=function(t,i,n){return this.Ph(t,i,1-n,!0),this.Ph(t,i,n)},r.prototype.Qh=function(t,i,n,r,o){if(!(this.Le[t.xc][t.wc]<0)){var e=1-n.group.color,s=this.Ef.gf(t,e);s&&(this.We.df(s.group.bd)<.5||(h.debug,o[t.xc][t.wc]+=r,this.Me.Kb[t.xc][t.wc]+=r))}},r.prototype.Oh=function(t,i){var n=t[0],r=t[1],o=t[2];if(this.Qh(n,n,r,o,i),!this.We.vg(n,r.color)){var e=r.group;if(!n.ye(e))for(var s=0;8>s;s++){var h=n.ne[s];h.color===u&&h.ye(e)&&this.Qh(h,n,r,o,i)}}},r.prototype.Ph=function(t,i,n,r){var o=this.Ze[1-n][i][t];if(0===o)return 0;var e=this.Ze[n][i][t];if(e>6)return 0;if(!r&&this.Le[i][t]<0)return 0;var s=this.Ea.ec(t,i);if(0===s.we())return 0;var a=this.Ef.gf(s,n);if(!a)return 0;if(!r&&!this.Ef.gf(s,1-n))return 0;var u=this.Rh(t,i,n),l=u+this.Nh*o-this.Mh*e;return l*=this.We.df(a.group.bd),r?l?(h.debug,this.Lh.push([s,a,l])):0:(h.debug,l)},r.prototype.Sh=function(t,i,n,r,o){var e=this.Ea.ec(t,i);if(e.color!==u)return 0;var s=this.qf.zh(t,i,r);if(e.ue()&&(s/=2),0>=s)return 0;if(0===--o)return s;var h=l[n][0],a=l[n][1],c=l[(n+3)%4],f=c[0],p=c[1];return s+=this.Sh(t+h+f,i+a+p,n,r,o),s+=this.Sh(t+h-f,i+a-p,n,r,o)};var p=1;r.prototype.Rh=function(t,i,n){for(var r=Math.max(0,this.qf.zh(t,i,n)),o=c;f>=o;o++)r+=this.Sh(t+l[o][0],i+l[o][1],o,n,p);var e=this.Ea.ec(t,i);return e.se()?r=Math.max(r-1,0):e.ue()&&(r=Math.max(r-.85,0)),r}},{"../../Grid":9,"../../Stone":14,"../../constants":38,"../../log":41,"./Heuristic":18,util:4}],26:[function(t,i,n){"use strict";function r(t){e.call(this,t),this.Pe=null}var o=t("../../constants"),e=(t("../../Grid"),t("./Heuristic")),s=t("util").inherits,h=t("../../log"),a=(o.ALWAYS,o.EMPTY),u=o.Gb;s(r,e),i.g=r,r.prototype.eg=function(){this.Pe||(this.Pe=this.af.Oe.Qe)},r.prototype.Re=function(t,i){var n=this.Ea.ec(t,i);return this.Th(t,i,n),0},r.prototype.Th=function(t,i,n){for(var r,o,e=[],s=this.color,a=n.uc(s),u=0;o=a[u],u<a.length;u++)1===o.vc?e.push(o):2===o.vc&&e.push(o);if(e.length&&(h.debug,this.Pe.kg(t,i,this.Af))){this.Ea.ic(t,i,s),h.debug;var l=!this.Pe.jg(n);this.Ea.lc();var c;if(!l){for(r=e.length-1;r>=0;r--)if(o=e[r],1!==o.vc){var f=o.kd();if(c=f[0]===n?f[1]:f[0],this.Ea.ic(c.wc,c.xc,s),l=!this.Pe.jg(c),this.Ea.lc(),l)break}if(!l)return void h.debug;n=c}for(r=e.length-1;r>=0;r--)o=e[r],c&&1===o.vc||(this.We.Wg(o,n),h.debug)}},r.prototype.Uh=function(t,i,n){var r=0,o=0,e=this.Sa;if(1===i||i===e)o=1;else{if(1!==n&&n!==e)throw new Error("not along border");r=1}var s=o,h=r;if(this.Ea.ec(i+s,n+h).color===u&&(s=-s,h=-h),this.Ea.ec(i+s,n+h).group!==t){var l=t.color,c=this.Ea.ec(i+r,n+o);for(c.group===t&&(r=-r,o=-o);;)switch(i+=r,n+=o,c=this.Ea.ec(i,n),c.color){case u:return null;case l:return c.group.vc>2?c.group:null;case a:var f=this.Ea.ec(i+s,n+h);if(f.color===a)continue;return f.color===1-l?null:f.group.vc>2?f.group:null;default:return null}}}},{"../../Grid":9,"../../constants":38,"../../log":41,"./Heuristic":18,util:4}],27:[function(t,i,n){"use strict";function r(t){e.call(this,t),this._g=t.Oe.Hf._g,this.Le=t.Oe.Ne.Me.Kb}var o=t("../../constants"),e=(t("../../Grid"),t("./Heuristic")),s=t("util").inherits,h=t("../../log"),a=o.EMPTY,u=o.NEVER,l=o.Vh,c=o.ALWAYS,f=o.Zg,p=o.$g;s(r,e),i.g=r,r.prototype.hf=function(t,i){e.prototype.hf.call(this,t,i);var n=this.qf.qh;for(var r in n){var o=n[~~r];o.ed!==c&&o.dd!==c&&this.Wh(i,o)}},r.prototype.Wh=function(t,i){var n=[],r=i.bd.Xh(n);if(r===l){var o=this.Ea.ec(n[0],n[1]),e=o.we();h.debug,this.We.Ug(i,o,this.color,e)}},r.prototype.Re=function(t,i,n){var r=this.Ea.ec(t,i);return this.Yh(r,n),this.Yh(r,1-n),0},r.prototype.Yh=function(t,i){if(this.qf.xh(t.wc,t.xc,i)!==u&&this.Ef.gf(t,1-i)){var n=this.af._e.$e(t);n.fh&&n.fh.group.color===i?this.Zh(t,i,n):this.$h(t,i)}},r.prototype.Zh=function(t,i,n){if(!(n._h>2))for(var r=t.ld.length-1;r>=0;r--){var o=t.ld[r];if(o.color===i&&1===o.group.vc){h.debug,this.We.Ug(o.group,t,i,1);break}}},r.prototype.$h=function(t,i){for(var n=this._g[f].Kb,r=this._g[p].Kb,o=null,e=null,s=0,h=t.ld.length-1;h>=0;h--){var u=t.ld[h];switch(u.color){case a:n[u.xc][u.wc]!==i&&r[u.xc][u.wc]!==i||(o=u,s++);break;case i:e||(e=u.group)}}if(o){if(!e){if(this.Le[t.xc][t.wc]<0)return;e=o.uc(i)[0]}e.dd!==c&&e.ed!==c&&this.We.Ug(e,t,i,s)}}},{"../../Grid":9,"../../constants":38,"../../log":41,"./Heuristic":18,util:4}],28:[function(t,i,n){"use strict";function r(t){e.call(this,t),this.ai=this.Pf("infl",.07,.01,.5),this.bi=this.Pf("border",10,0,20),this.ci=this.Sa<=9?[0,.2,.8,.95,1]:[0,.2,.8,1,.95,.8]}var o=t("../../constants"),e=t("./Heuristic"),s=t("util").inherits,h=o.EMPTY;s(r,e),i.g=r,r.prototype.Re=function(t,i){var n=0,r=0,o=this.Ea.ec(t,i),e=this.Ze[this.Af],s=this.Ze[this.color];n+=e[i][t],r+=s[i][t];for(var a=o.ld.length-1;a>=0;a--){var u=o.ld[a];if(u.color!==h)return 0;n+=e[u.xc][u.wc],r+=s[u.xc][u.wc]}var l=1+this.ai*Math.max(n+r-3,0)*(this.Sa/9),c=this.ci.length-1,f=Math.min(this.ve(t),c),p=Math.min(this.ve(i),c),g=this.ci[f]*this.ci[p]*this.bi,d=0;return this.af.cf||(d=this.qf.yh(t,i,this.color),d>0&&(d=0)),d+g/l},r.prototype.ve=function(t){return Math.min(t-1,this.Sa-t)}},{"../../constants":38,"./Heuristic":18,util:4}],29:[function(t,i,n){"use strict";function r(t,i){this.color=i,this.Xe=new Array(13);var n=t.wc,r=t.xc,o=t.Ea.Jb,e=t.Ea.Sa,s=this.Xe,h=a.Gb;s[c]=t,s[f]=o[r+1][n],s[v]=o[r+1][n-1],s[b]=o[r+1][n+1],s[p]=o[r-1][n],s[y]=o[r-1][n-1],s[m]=o[r-1][n+1],s[g]=o[r][n-1],s[d]=o[r][n+1],s[k]=n>2?o[r][n-2]:h,s[S]=e-1>n?o[r][n+2]:h,s[x]=r>2?o[r-2][n]:h,s[w]=e-1>r?o[r+2][n]:h}function o(t){return t===u?j:E[t+1]}function e(t,i){for(var n="",r=0;r<i.length;r++){var e=i[r];n+="string"==typeof e?e:o(t[e].color)}return n}var s=t("../../constants"),h=t("../../Grid"),a=t("../../Stone"),u=s.Gb,l=s.EMPTY,c=s.ze,f=s.Ae,p=s.Be,g=s.Ce,d=s.De,v=s.Ee,b=s.Fe,y=s.Ge,m=s.He,w=s.Ie,x=s.di,k=s.Je,S=s.Ke;i.g=r;var E=h.Bc+h.Dc,j="|";r.prototype.toString=function(){var t=this.Xe;return e(t,[" "," ",w," "," "])+"\n"+e(t,[" ",v,f,b," "])+"\n"+e(t,[k,g,"*",d,S])+"\n"+e(t,[" ",y,p,m," "])+"\n"+e(t,[" "," ",x," "," "])+"\n"},r.prototype.ei=function(){var t,i=this.Xe;t=i[f],i[f]=i[p],i[p]=t,t=i[w],i[w]=i[x],i[x]=t,t=i[v],i[v]=i[y],i[y]=t,t=i[b],i[b]=i[m],i[m]=t},r.prototype.fi=function(){var t,i=this.Xe;t=i[g],i[g]=i[d],i[d]=t,t=i[k],i[k]=i[S],i[S]=t,t=i[v],i[v]=i[b],i[b]=t,t=i[y],i[y]=i[m],i[m]=t},r.prototype.gi=function(){var t,i=this.Xe;t=i[g],i[g]=i[p],i[p]=i[d],i[d]=i[f],i[f]=t,t=i[k],i[k]=i[x],i[x]=i[S],i[S]=i[w],i[w]=t,t=i[v],i[v]=i[y],i[y]=i[m],i[m]=i[b],i[b]=t},r.prototype.hi=function(){var t,i=this.Xe;t=i[g],i[g]=i[f],i[f]=i[d],i[d]=i[p],i[p]=t,t=i[k],i[k]=i[w],i[w]=i[S],i[S]=i[x],i[x]=t,t=i[v],i[v]=i[b],i[b]=i[m],i[m]=i[y],i[y]=t},r.prototype.normalize=function(){var t,i=this.color,n=this.Xe;if(n[c].ue()){
n[f].color===u?this.ei():n[g].color===u?this.hi():n[d].color===u&&this.gi();var r=n[g].color===i,o=n[d].color===i;return void(r&&!o?this.fi():r===o&&n[v].color===i&&n[b].color!==i&&this.fi())}var e=!1,s=!0,h=!0,a=n[f].color===i?1:0,l=n[p].color===i?1:0,w=n[g].color===i?1:0,x=n[d].color===i?1:0;a>l?(this.ei(),w>x&&this.fi(),w!==x&&(e=!0)):l>a?(w>x&&this.fi(),w!==x&&(e=!0)):l?w>x?this.hi():x>w?this.gi():(s=!1,w&&(h=!1)):w>x?this.hi():x>w?this.gi():(w?this.hi():h=!1,s=!1);var k=n[b].color===i?1:0,S=n[y].color===i?1:0;if(s&&e)n[f].color!==i&&n[g].color!==i&&k&&!S&&(this.gi(),this.fi());else{var E=n[v].color===i?1:0,j=n[m].color===i?1:0;s||(E+k>S+j?(this.ei(),t=E,E=S,S=t,t=k,k=j,j=t):e||(e=!0,!h&&k>E&&j>S?this.gi():!h&&E>k&&S>j?this.hi():e=!1)),!e&&(S>j||S===j&&E>k)&&this.fi()}};var M=[v,f,b,g,c,d,y,p,m],G=["TL","TOP","TR","LEFT","CENTER","RIGHT","BL","BOTTOM","BR"];r.prototype.Ye=function(t,i){for(var n=this.Xe,r=this.color,o=1-r,e={},s=0,h=0,a=0;a<M.length;a++){var c=n[M[a]],f=i[a],p=c.color;switch(p===r&&(a%2?s++:h++),f){case"o":if(p===r)continue;break;case"A":case"B":case"C":case"D":if(p!==r)break;var g=e[f];if(g){if(g!==c.group)break}else e[f]=c.group;continue;case"*":case" ":if(p===l)continue;break;case".":if(p!==r)continue;break;case"x":if(p===o)continue;break;case"?":continue;case"-":if(p===u)continue}return f+"!="+p+" in "+G[a]+"\n"+this}var d=parseInt(t[0]),v=parseInt(t[1]);return s!==d?"numDirects="+s:isNaN(v)||h===v?!0:"numDiags="+h}},{"../../Grid":9,"../../Stone":14,"../../constants":38}],30:[function(t,i,n){"use strict";function r(t){this.ii=t.group.Ub,this.Lg=[t],t.Kg=this}function o(t){return"#"+t.group.Ub}var e=t("../../../log");i.g=r,r.prototype.toString=function(){return this.Lg.map(o).toString()},r.prototype.ji=function(t){if(!t.Kg)return e.debug,this.Lg.push(t),void(t.Kg=this);if(t.Kg.ii!==this.ii){e.debug;for(var i=t.Kg.Lg,n=i.length-1;n>=0;n--)this.Lg.push(i[n]),i[n].Kg=this}},r.prototype.remove=function(t){var i=this.Lg.indexOf(t);if(0>i)throw new Error("Band.remove on wrong Band");this.Lg.splice(i,1),t.Kg=null,e.debug},r.ki=function(t){if(1===t.length)throw new Error("add Band of 1");for(var i=null,n=0;n<t.length;n++)if(t[n].bd.Kg){i=t[n].bd.Kg;break}var o=0;for(i||(i=new r(t[o++].bd)),n=o;n<t.length;n++)i.ji(t[n].bd)}},{"../../../log":41}],31:[function(t,i,n){"use strict";function r(t){this.Ed=t,this.version="chuckie",this.mode=null,this.cf=!1,this.Ea=null,this.pi=null,this.Me=null,this.qi=[],this.kf=null,this.Pd=[0,0],this.Qd=[0,0],this.ri=null}function o(t){return t>1&&2>t?t-1:t}function e(t){return t[b]===t[y]||t[b]>=m&&t[y]>=m?void 0:(t[b]=o(t[b]),t[y]=o(t[y]),t[b]>t[y]?b:y)}function s(t,i){for(var n=0;n<i.length;n++){var r=i[n];f.debug,r.Ni()!==w&&(i[n]=null)}var o=0;for(n=0;n<i.length;n++)i[n]&&(i[n].Oi(t.name+": liveliness="+i[n].Pi.toFixed(4)),o++);return o}function h(t,i){for(var n=0;n<i.length;n++)i[n].Oi(t.name);return i.length}function a(){return 0}var u=t("../../../constants"),l=t("../../../Grid"),c=t("./GroupInfo"),f=t("../../../log"),p=t("./Void"),g=t("./ZoneFiller"),d=u.EMPTY,v=u.Gb,b=u.ya,y=u.za,m=c.li,w=c.mi,x=c.ni,k=c.oi,S=0,E=1,j=2;i.g=r,r.prototype.Od=function(t){f.debug,this.Pd[b]=this.Pd[y]=0,this.Qd[b]=this.Qd[y]=0,this.Me&&this.Me.Sa===t.Sa||(this.Me=new l(t.Sa,v)),this.si(S,t,this.Me)&&(this.ti(),this.cf||t.oc(this.Qd))},r.prototype.Nd=function(){return this.Me},r.prototype.$e=function(t){return this.pi.Kb[t.xc][t.wc]},r.prototype.pf=function(t,i){this.si(j,t,i)},r.prototype["if"]=function(){this.ti()},r.prototype.Ch=function(t,i,n){this.si(E,t,i)&&this.ti(n)},r.prototype.Vb=function(){return this.pi.Vb()},r.prototype.Zb=function(){for(var t,i="Grid:\n"+this.pi.$b()+"Voids:\n",n=this.qi,r=0;t=n[r],r<n.length;r++)i+=t.toString()+"\n";i+="Groups:\n";for(var o in this.kf)i+=this.kf[~~o].toString()+"\n";return this.Pd&&(i+="Score:"+this.Pd.map(function(t,i){return" player "+i+": "+t+" points"})),i},r.prototype.si=function(t,i,n){return this.mode=t,this.cf=this.Ed.wa&&t===S,this.Ea=i,this.pi=n,this.ri=new g(i,n),0===i.tb()?!1:(n.Pc(i),this.ui(),this.vi(),this.wi(),!0)},r.prototype.ti=function(t){this.mode===j?this.xi():(this.yi(),this.xi(t),this.zi(),this.Ai())},r.prototype.Bi=function(t,i){var n=this.kf[t.Ub];n||(t.bd&&t.bd._e===this?t.bd.Ci():t.bd=new c(t,this),n=this.kf[t.Ub]=t.bd),n.Di.push(i)},r.prototype.ui=function(){f.debug;var t=l.Ic;this.kf={},this.qi.length=0;for(var i,n,r=this.Ea,o=new p(r,t++),e=1;e<=r.Sa;e++)for(var s=1;s<=r.Sa;s++){var h=this.ri.Ei(s,e,d,o);if(0!==h){this.qi.push(o);for(var a=b;y>=a;a++)for(n=o.Fi[a],i=n.length-1;i>=0;i--)this.Bi(n[i],o);o=new p(r,t++)}}},r.prototype.vi=function(){for(var t in this.kf)this.kf[~~t].Gi()},r.prototype.wi=function(){f.debug;for(var t=this.qi,i=t.length,n=i-1;n>=0;n--)t[n].Hi();for(var r;;){for(r=!1,n=i-1;n>=0;n--)t[n].Ii()&&(r=!0);if(!r)break}for(n=i-1;n>=0;n--)t[n].Ji()},r.prototype.yi=function(){if(!this.cf){var t=this.Ea;if(!(t.tb()<2*t.Sa))for(var i=[0,0],n=[0,0];;){for(var r=!1,o=this.qi.length-1;o>=0;o--){var s=this.qi[o];if(void 0===s.color&&!(s._h>2*t.Sa)){i[b]=i[y]=n[b]=n[y]=0;for(var h=b;y>=h;h++)for(var a=s.Fi[h].length-1;a>=0;a--){var u=s.Fi[h][a].bd;i[h]+=u.Ki(),n[h]+=u.Li()}if(!(n[b]>4&&n[y]>4)){var l=e(i);void 0!==l?(f.debug,s.Mi(l),r=!0):f.debug}}}if(!r)break}}};var M={name:"brothers",l:c.prototype.Qi},G={name:"singleEye",l:c.prototype.Ri,Si:s},z={name:"race",l:c.prototype.Ni,Si:a},D={name:"atari",l:function(){return this.group.vc<=1?w:k}},P={name:"final",l:function(){return this.Ti(2)}},C=[];C[S]=[M,D,G,P],C[E]=[M,G],C[j]=[M,G,z],r.prototype.Ui=function(t,i){f.debug;var n=0,r=0,o=[];for(var e in this.kf){var s=this.kf[~~e];if(!s.wh&&!s.vh)switch(r++,t.l.call(s,i)){case w:o.push(s);break;case x:n++}}return o.length&&(n+=t.Si?t.Si(t,o):h(t,o)),f.debug&&n,n===r?0:0===n?r:-n},r.prototype.xi=function(t){if(!this.cf){for(var i,n=C[this.mode],r=0;r<n.length;){if(i=this.Ui(n[r++],t),0===i)return void this.wi();0>i&&(r=0,this.wi())}f.debug&&i>0}},r.prototype.zi=function(){for(var t=[],i=this.qi.length-1;i>=0;i--){var n=this.qi[i];t[b]=t[y]=!1;for(var r=b;y>=r;r++)for(var o,e=n.Fi[r],s=0;o=e[s],s<e.length;s++)if(this.cf||o.bd.Ki()>=2){t[r]=!0;break}t[b]&&t[y]?n.Vi():this.cf&&(n.color=t[b]?b:y)}},r.prototype.Ai=function(){this.Wi(),this.Xi(),this.Yi()},r.prototype.Wi=function(){if(this.cf)for(var t in this.kf){var i=this.kf[~~t].group;this.Pd[i.color]+=i.pc.length}},r.prototype.Xi=function(){if(!this.cf)for(var t in this.kf){var i=this.kf[~~t];if(i.vh){for(var n=!1,r=i.Zi.length-1;r>=0;r--)if(!i.Zi[r].bd.vh){n=!0;break}var o=i.group.color;if(!i.Zi.length||n){var e=i.group.pc[0],s=this.ri.Ei(e.wc,e.xc,o,l.Lc+o);this.Qd[o]+=s,this.Pd[1-o]+=s}else for(var h=i.Di.length-1;h>=0;h--)i.Di[h].Mi(o)}}},r.prototype.Yi=function(){for(var t=this.pi.Kb,i=[],n=this.qi.length-1;n>=0;n--){var r=this.qi[n],o=r.$i(this.cf?null:i);if(o){this.Pd[r.color]+=o-i.length,this.ri.Ei(r.wc,r.xc,r,l.Mc+r.color);for(var e=i.length-1;e>=0;e--){var s=i[e];t[s.xc][s.wc]=l.Kc}}else this.ri.Ei(r.wc,r.xc,r,l.Kc)}}},{"../../../Grid":9,"../../../constants":38,"../../../log":41,"./GroupInfo":33,"./Void":34,"./ZoneFiller":35}],32:[function(t,i,n){"use strict";function r(t,i){this.vf=t,this.Fi=[],this.color=i[0].color,this.bf=!1,this._i(i)}i.g=r,r.prototype._i=function(t){for(var i=this.Fi,n=t.length-1;n>=0;n--){var r=t[n];i.indexOf(r)<0&&i.push(r)}}},{}],33:[function(t,i,n){"use strict";function r(t,i){this._e=i,this.aj=[],this.Di=[],this.bj=[],this.Zi=[],this.cj=[0,0],this.tf=[],this.dj=[],this.ej=[],this.group=t,this.Ci()}function o(t,i,n){for(var r=i.length-1;r>=0;r--)for(var o=i[r].bd,e=t.length-1;e>=0;e--)if(!(t[e].indexOf(o)<0)){-1!==n&&n!==e?(t[n]=t[n].concat(t[e]),t.splice(e,1),n>e&&n--):n=e;break}return n}function e(t,i,n,r){var e=-1;e=o(t,n,e),e=o(t,r,e),0>e?t.push([i]):t[e].push(i)}var s=t("../../../constants"),h=t("./Band"),a=t("../../../log"),u=s.EMPTY,l=s.NEVER,c=s.Vh,f=s.ALWAYS,p=s.Zg,g=s.$g;i.g=r;var d=r.mi=-1,v=r.ni=1,b=r.oi=0,y=r.li=1e3;r.prototype.Ci=function(){this.fj=this.Pi=0,this.aj.length=0,this.Di.length=0,this.Kg=null,this.wh=this.vh=!1,this.lf=null,this.bj.length=0,this.Zi.length=0,this.cj[p]=this.cj[g]=0,this.tf.length=0,this.dj.length=0,this.ej.length=0,this.gj=0},r.hj=function(t){return"#"+t.group.Ub},r.prototype.toString=function(){var t=this.Kg?this.Kg.toString():"";return this.group.toString()+" (isAlive:"+this.wh+" isDead:"+this.vh+" voids:"+this.aj.length+" brothers:["+t+"] deadEnemies:["+this.bj.map(r.hj)+"])"},r.prototype.ij=function(t){return a.debug,this.aj.push(t),this.fj++,this},r.prototype.jj=function(t){var i=this.aj.indexOf(t);if(-1===i)throw new Error("remove unknown void");a.debug,this.aj.splice(i,1),this.fj--},r.prototype.Gi=function(){for(var t=this.group,i=t.color,n=[],r=[],o=[],e=t.kd(),s=e.length-1;s>=0;s--)for(var a=e[s],u=a.ld,l=null,c=u.length-1;c>=0;c--){var f=u[c];if(f.color===i&&f.group!==t){l=f.group;var p=n.indexOf(l);p>=0?o[p]!==a&&(r[p]=!1):(n.push(l),r.push(!0),o.push(a))}}if(n.length){for(var g=n.length-1;g>=0;g--)if(r[g]){var d=o[g],v=this._e.$e(d).kj(d,[t,n[g]]);this.tf.push(v),this.dj.push(n[g])}else this.ej.push(n[g]);n.push(t),h.ki(n)}},r.Pg=function(t){return"subband["+t.length+" groups: "+t.map(function(t){return t.group.toString(1)}).join(", ")+"]"},r.prototype.lj=function(t){for(var i=[],n=this.dj.length-1;n>=0;n--)this.tf[n].vf!==t&&i.push(this.dj[n]);return i},r.prototype.Vg=function(t,i){for(var n,r=[],o=t.length-1;o>=0;o--){var s=t[o].bd,h=s.Kg;if(h){if(h===n)continue;n=h;for(var a=h.Lg.length-1;a>=0;a--){var u=h.Lg[a];e(r,u,u.ej,u.lj(i))}}else r.push([s])}return r},r.prototype.Tg=function(t){var i=this.Kg;if(!i)return[];for(var n=[],r=i.Lg.length-1;r>=0;r--){var o=i.Lg[r];o!==this&&e(n,o,o.ej,o.lj(t))}return n},r.prototype.mj=function(){if(this.fj>=2)return l;var t=this.ih();return t>=3?l:0===t?f:c},r.prototype.nj=function(){if(this.mj()===l)return!1;if(this.ej.length)return!1;for(var t=this.group.color,i=0,n=0,r=this.Di.length-1;r>=0;r--){var o=this.Di[r];o.color===t&&0!==o.oj&&(i++,o.oj>=3&&n++,this.bj.length&&n++)}return!(i+n>=2)},r.prototype.Oi=function(t){this.vh=!0;for(var i=this.Zi=this.group.md(),n=i.length-1;n>=0;n--)i[n].bd.bj.push(this);a.debug},r.prototype.Ki=function(t,i){if(this.wh||this.fj>=2)return y;for(var n,r=0,o=this.group.color,e=this.group.vc,s=this.Di.length-1;s>=0;s--){var h=this.Di[s],a=Math.min(e,h._h);if(h.fh)h.fh===this&&(r+=a);else{var u=h.Fi[o];if(1===u.length)r+=a;else{var l=this.group.Ub,c=l;for(n=u.length-1;n>=0;n--)c=Math.min(u[n].Ub,c);l===c&&(r+=a)}}}if(r/=100,i||(r+=e/1e4),this.vh)return 0+r;var f=0;if(!i&&this.Kg){var p=this.Kg.Lg;for(n=p.length-1;n>=0;n--)p[n]!==this&&(f+=p[n].Ki(t,!0))}var g=t?this.pj():this.bj.length;return this.fj+g+f+r},r.prototype.Xh=function(t){if(this.fj>1)return f;if(0===this.fj)return l;var i=this.aj[0],n=i._h;if(n>6)return f;a.debug;for(var r,o=this.group,e=o.color,s=null,h=0,p=0,g=0,d=null,v=null,b=0,y=i.qj,m=!1,w=[0,0,0,0,0],x=0;n>x;x++){for(var k=y[x],S=0,E=0,j=0,M=k.ld.length-1;M>=0;M--){var G=k.ld[M];switch(G.color){case u:j++;break;case e:E++;break;default:if(1===G.group.vc){j++,b+=2;break}S++,d?G.group!==d&&(v=G.group):d=G.group}}if(S){if(2>j+(E?1:0))continue}else{if(b++,r=k,2>j)continue;w[j]++}if(a.debug,g++,k.se()&&(m=!0),s&&!s.se()){if(p>S)continue;if(h+p>=j+S)continue}s=k,p=S,h=j}if(m&&g>1&&g--,a.debug,!s)return l;if(1===b&&!v&&d&&d.pc.length<3&&this.rj(d,r,s))return l;if(g>=2){var z=4===n&&0===p&&4===w[2],D=5===n&&0===p&&1===w[3]&&3===w[2],P=6===n&&0===p&&2===w[3]&&4===w[2];if(!z&&!D&&!P)return f}return t[0]=s.wc,t[1]=s.xc,c},r.prototype.rj=function(t,i,n){for(var r=i.ld.length-1;r>=0;r--){var o=i.ld[r];if(o.color===u&&o!==n&&o.ye(t))return!0}return!1},r.prototype.pj=function(){for(var t=this.bj.length,i=t-1;i>=0;i--)for(var n=this.bj[i].Di,r=n.length-1;r>=0;r--)if(n[r].fh===this){t--;break}return t},r.prototype.Qi=function(){if(!this.Kg)return b;for(var t=this.Kg.Lg,i=0,n=!1,r=t.length-1;r>=0;r--){var o=t[r];o!==this&&(n||o.wh?n=o.wh=!0:(i+=o.fj,i>=2&&(n=o.wh=!0)))}return n?(a.debug,this.wh=!0,v):b},r.prototype.sj=function(){if(this.Kg)return!1;if(this.group.pc.length>=6)return!1;for(var t=this.Di.length-1;t>=0;t--)if(this.Di[t].color===this.group.color)return!1;return!0},r.prototype.Ri=function(t){if(this.fj>=2)return this.wh=!0,a.debug,v;if(this.sj())return d;var i=[],n=this.Xh(i);if(n===c){if(this.gj=.5,void 0===t)return b;t!==this.group.color&&(n=l)}return n===l?(this.gj=0,this.Kg||this.bj.length?b:this.tj()>=1.5?b:(this.Pi=this.Ki(),d)):(this.wh=!0,this.gj=1,a.debug,v)},r.prototype.Ni=function(){for(var t=this.Pi||this.Ki(),i=this.group.md(),n=null,r=0;r<i.length;r++){var o=i[r].bd,e=t-o.Ki();if(a.debug,e>0)return a.debug,b;0===e&&(a.debug,n=o)}return n?(this.lf=n,n.lf=this,b):d},r.prototype.Ti=function(t){var i=this.Pi=this.Ki(!0);return i>=2?(this.wh=!0,a.debug,v):t>i?(this.Pi=i,d):b},r.prototype.uj=function(t,i){if(this.Kg){for(var n=this.Kg.Lg,r=0,o=n.length-1;o>=0;o--)r+=t.call(n[o],i);return r}return t.call(this,i)},r.prototype.gh=function(t,i){this.cj[t]+=i},r.prototype._f=function(){for(var t=1-this.group.color,i=this.Di.length-1;i>=0;i--){var n=this.Di[i];if(n.color!==t)return!1}return!0},r.prototype.vj=function(){for(var t=this.group.color,i=this.Di.length-1;i>=0;i--){var n=this.Di[i];if(void 0===n.color){for(var r=n.Fi[1-t],o=!0,e=r.length-1;e>=0;e--){var s=r[e];if(s.pc.length>=6||s.dd===f){o=!1;break}}if(o)return 1}}return 0},r.prototype.ih=function(){return this.fj+this.gj+this.vj()+(this.cj[p]+this.cj[g])/2},r.prototype.tj=function(){return this.uj(this.ih)},r.prototype.wj=function(){return this.group.pc.length},r.prototype.Li=function(){return this.uj(this.wj)}},{"../../../constants":38,"../../../log":41,"./Band":30}],34:[function(t,i,n){"use strict";function r(t,i){this.Ea=t,this.code=i,this.wc=this.xc=0,this._h=0,this.Fi=null,this.qj=null,this.xj=void 0,this.color=void 0,this.fh=void 0,this.yj=!1,this.zj=!1,this.oj=-1,this.tf=null,this.Aj=!1}function o(t){return t?v[t]:v[0]}function e(t){for(var i=t.length-1;i>=0;i--)if(!t[i].bd.vh)return!1;return!0}function s(t){return"#"+t.Ub}var h=t("../../../constants"),a=t("./FakeSpot"),u=t("../../../Grid"),l=t("../../../log"),c=h.ya,f=h.za,p=1,g=2,d=3,v=["void","eye","fake","dame"];i.g=r,r.prototype.Bj=function(t,i){return this.wc=t,this.xc=i,this.tf=[],this.Fi=[[],[]],this.qj=[],this.Fi},r.prototype.Cj=function(t,i){this._h++,this.qj.push(this.Ea.ec(t,i))},r.prototype.kj=function(t,i){l.debug,this.zj=!0;var n=this.qj.indexOf(t),r=this.tf[n];return r?r._i(i):r=this.tf[n]=new a(t,i),r},r.prototype.Hi=function(){var t=this.Fi[c],i=this.Fi[f],n=e(t),r=e(i);if(n&&r)return this.yj||void 0===this.color?!1:this.Dj();if(this.xj===p)return!1;if(!n&&!r)return!1;var o=n?f:c;return this.Aj=!t.length||!i.length,this.zj?this.Ej(o):(this.oj=this._h,this.Fj(o))},r.prototype.Ej=function(t){this.xj=g,this.color=t,this.fh&&(this.fh.jj(this),this.fh=null);for(var i=this.tf.length-1;i>=0;i--){var n=this.tf[i];n&&(n.bf=!1)}return!0},r.prototype.Ii=function(){if(this.xj!==g)return!1;var t=this.oj,i=this.oj=this._h-this.Gj();return l.debug,i!==t},r.prototype.Gj=function(t){t||(t=[]);for(var i=this.tf.length-1;i>=0;i--){var n=this.tf[i];if(n&&n.color===this.color)for(var r=n.Fi,o=r.length-1;o>=0;o--)if(r[o].bd.nj()){l.debug&&!n.bf,n.bf=!0,t.push(n.vf);break}}return t.length},r.prototype.bf=function(t){for(var i=this.tf.length-1;i>=0;i--){var n=this.tf[i];if(n&&n.color===this.color&&n.vf===t)return n.bf}return!1},r.prototype.Ji=function(){if(this.xj===g){if(0===this.oj){if(this.fh)throw new Error("NEVER HAPPENS");return void l.debug}l.debug;var t=this.color;return this.color=this.xj=void 0,this.Fj(t)}},r.prototype.Fj=function(t){return this.Aj?this.Hj(t):this.Mi(t)},r.prototype.Hj=function(t){l.debug,this.xj=p,this.color=t;var i=this.Fi[t];return this.fh=i[0].bd.ij(this),!0},r.prototype.Mi=function(t){if(t===this.color)return!1;l.debug,this.fh&&(this.fh.jj(this),this.fh=null),this.color=t;for(var i=this.Fi[1-t],n=i.length-1;n>=0;n--)for(var r=i[n].bd.Di,o=r.length-1;o>=0;o--)if(r[o]!==this&&r[o].color===t)return!0;var e=this.Fi[t];return this.fh=e[0].bd.ij(this),!0},r.prototype.Vi=function(){l.debug,this.fh&&(this.fh.jj(this),this.fh=null),this.xj=d,this.color=void 0},r.prototype.Dj=function(){l.debug;var t=this.color;if(void 0===t)throw new Error("dead group's eye of undefined owner");this.yj=!0,this.zj=!1,this.fh&&(this.fh.jj(this),this.fh=null),this.xj=p,this.color=1-t;for(var i=this.Fi[t],n=i.length-1;n>=0;n--){var r=i[n].bd;if(r.Zi.length)return this.fh=r.Zi[0].bd.ij(this),!0}return!0},r.prototype.$i=function(t){return void 0===this.color?0:(t&&(t.length=0,this.zj&&this.Gj(t)),this._h)},r.prototype.Ij=function(t){var i=t.group;return this.Fi[i.color].indexOf(i)>-1},r.prototype.toString=function(){return"{"+o(this.xj)+"-"+u.Zc(this.wc,this.xc)+" vcount:"+this._h+" black:"+(this.Fi[c].map(s).toString()||"-")+" white:"+(this.Fi[f].map(s).toString()||"-")+"}"}},{"../../../Grid":9,"../../../constants":38,"../../../log":41,"./FakeSpot":32}],35:[function(t,i,n){"use strict";function r(t,i){this.Ea=t,this.Kb=i.Kb,this.Fi=null,this.Jj=null}var o=t("../../../constants"),e=o.Gb;i.g=r,r.prototype.Ei=function(t,i,n,r){if(this.Kb[i][t]!==n)return 0;this.Jj=n;var o="number"!=typeof r?r:null;this.Fi=o&&o.Bj(t,i);for(var e,s,h,a=0,u=this.Kb,l=[[t,i,i]];e=l.pop();)if(s=e[0],i=e[1],h=e[2],u[i][s]===n){for(;this.Kj(s,i-1);)i--;for(;this.Kj(s,h+1);)h++;a+=h-i+1;for(var c=s-1;s+1>=c;c+=2){for(var f=null,p=i;h>=p;p++)s>c&&(u[p][s]=r,o&&o.Cj(s,p)),this.Kj(c,p)?f||(f=p):f&&(l.push([c,f,p-1]),f=null);f&&l.push([c,f,h])}}return a},r.prototype.Kj=function(t,i){var n=this.Kb[i][t];if(n===e)return!1;if(n===this.Jj)return!0;if(!this.Fi)return!1;if("number"!=typeof n)return!1;var r=this.Ea.ec(t,i).group;if(!r)throw new Error("Unexpected: ZoneFiller replacing a group");var o=this.Fi[n];return-1===o.indexOf(r)&&o.push(r),!1}},{"../../../constants":38}],36:[function(t,i,n){"use strict";function r(t,i,n){this.name="Chuckie",this.Ed=t,this._e=new e(t),this.Mj(n),this.setColor(i)}function o(t,i){return i[1]-t[1]}var e=t("./boan/BoardAnalyser"),s=t("../../constants"),h=t("../../Genes"),a=t("../../Grid"),u=t("../../log"),l=t("../../test"),c=t("./boan/ZoneFiller"),f=t("./Connector"),p=t("./GroupAnalyser"),g=t("./GroupsAndVoids"),d=t("./Hunter"),v=t("./Influence"),b=t("./MoveInfo"),y=t("./NoEasyPrisoner"),m=t("./PotentialEyes"),w=t("./PotentialTerritory"),x=t("./Pusher"),k=t("./Savior"),S=t("./Shaper"),E=t("./Spacer"),j=s.Gb,M=s.wf,G=s.Lj,z=s.xf,D=-1;i.g=r,r.Nj="Chuckie",r.Oj="0.1",r.Gd=e,r.Pj=c,r.prototype.Qj=function(t){var i=new t(this);return this.Df.push(i),i},r.prototype.Rj=function(){var t=this.Oe={};this.Df=[],t.nf=this.Qj(b),t.If=this.Qj(w),t.Sj=this.Qj(g),t.Jf=this.Qj(v),t.Hf=this.Qj(m),t.Tj=this.Qj(p),t.Ne=this.Qj(y),t.Uj=this.Qj(k),t.Qe=this.Qj(d),t.Ff=this.Qj(f),t.Vj=this.Qj(E),t.Wj=this.Qj(x),t.Xj=this.Qj(S);for(var i=0;i<this.Df.length;i++)this.Df[i].Bf()},r.prototype.setColor=function(t){this.color=t;for(var i=0;i<this.Df.length;i++)this.Df[i].Kf(t)},r.prototype.Mj=function(t){this.Qf=t||this.Qf||new h,this.zf=this.Pf("smallerMove",.03,.01,.1),this.Ea!==this.Ed.Ea&&(this.Ea=this.Ed.Ea,this.Sa=this.Ea.Sa,this.cf=this.Ed.wa,this.Yj=new a(this.Sa,j),this.Me=new a(this.Sa,0,j),this.Rj()),this.Zj=this.$j=0,this._j=this.ak=this.bk=0,this.ck=!1,this.Fg=this.Gg=D,this.Lf=null},r.prototype.dk=function(t){for(var i=0;i<this.Df.length;i++){var n=this.Df[i];if(n.name===t)return n}return null},r.prototype.Pf=function(t,i,n,r){return void 0===n&&(n=null),void 0===r&&(r=null),this.Qf.get(this.name+"-"+t,i,n,r)},r.prototype.ek=function(t,i,n){this._j=n,this.ak=t,this.bk=i,this.ck=1!==this.fk},r.prototype.gk=function(t,i,n){if(n>this._j)this.fk=1,this.ek(t,i,n);else{if(this.fk++,Math.random()*this.fk>=1)return;this.ek(t,i,n)}},r.prototype.hk=function(){this.Zj++;var t=this.Yj.Kb,i=this.Me.Kb;this.ik(),this.jk(t,i),this.kk(t,i);var n=this.lk(t,i);return u.Mf(this.rg?u.Nf:u.Hg),n},r.prototype.ik=function(){this._j=this.zf-.001,this.ak=D,this.rg=!!u.debug,u.Mf(u.Hg)},r.prototype.jk=function(t,i){for(var n=1;n<=this.Sa;n++)for(var r=1;r<=this.Sa;r++)this.Ea.nb(r,n,this.color)?(t[n][r]=M,i[n][r]=0):t[n][r]=G;if(this.Fg!==D){if(t[this.Gg][this.Fg]===G)throw new Error("Invalid test move: "+this.Fg+","+this.Gg);t[this.Gg][this.Fg]=z}},r.prototype.kk=function(t,i){for(var n=0;n<this.Df.length;n++){var r=this.Df[n];u.Mf(this.rg&&this.Lf===r.name?u.Nf:u.Hg);var o=Date.now();r.eg&&r.eg(),r.hf(t,i);var e=Date.now()-o;e>=3&&!l.mk&&u.nk("Slowness: "+r.name+" took "+e+"ms")}this.Oe.nf.sg(t,i)},r.prototype.lk=function(t,i){for(var n=1;n<=this.Sa;n++)for(var r=1;r<=this.Sa;r++)t[n][r]<M||i[n][r]<this._j||this.gk(r,n,i[n][r]);return this._j<this.zf?"pass":(this.ck&&this.$j++,a.Zc(this.ak,this.bk))},r.prototype.pk=function(){var t=this.Oe.If;return t.hf(),t.oh.Kb},r.prototype.qk=function(t,i){this.Fg=t,this.Gg=i,this.hk(),this.Fg=D},r.prototype.rk=function(t,i){for(var n={},r=0;r<this.Df.length;r++)this.Df[r].Of(t,i,n);return n},r.prototype.sk=function(t,i){return this.qk(t,i),this.Me.Kb[i][t]},r.prototype.tk=function(t,i,n){this.qk(t,i);var r=this.dk(n);return r.Me.Kb[i][t]},r.prototype.uk=function(t){this.Lf=t},r.prototype.vk=function(t,i){var n=this.Ed.mb(t);if(!n)return"";var r=n[0],e=n[1];if(i){if(!this.Ea.nb(r,e,this.Ed.Ia))return"Invalid move: "+t;this.qk(r,e)}var s=this.rk(r,e),h=this.Me.Kb[e][r],a=[];for(var u in s)0!==s[u]&&a.push([u,s[u]]);a.sort(o);for(var l=t+" ("+h.toFixed(2)+")\n",c=0;c<a.length;c++)l+="- "+a[c][0]+": "+a[c][1].toFixed(2)+"\n";return l}},{"../../Genes":7,"../../Grid":9,"../../constants":38,"../../log":41,"../../test":43,"./Connector":15,"./GroupAnalyser":16,"./GroupsAndVoids":17,"./Hunter":19,"./Influence":20,"./MoveInfo":21,"./NoEasyPrisoner":22,"./PotentialEyes":23,"./PotentialTerritory":24,"./Pusher":25,"./Savior":26,"./Shaper":27,"./Spacer":28,"./boan/BoardAnalyser":31,"./boan/ZoneFiller":35}],37:[function(t,i,n){"use strict";function r(){this.wk=null,this.Hd=this.xk=this.yk=this.zk=null}i.g=new r,r.prototype.Ak=function(t){this.wk={};for(var i=0;i<t.length;i++){var n=t[i];this.wk[n.name]=n.Bk}var r=t.length-1;this.Hd=this.xk=t[r].Bk,this.yk=r>=1?t[r-1].Bk:null,this.zk=r>=2?t[r-2].Bk:null}},{}],38:[function(t,i,n){"use strict";function r(){this.Zg=0,this.$g=1,this.Gb=-99,this.EMPTY=-1,this.ya=0,this.za=1,this.wf=0,this.xf=1,this.Lj=-1,this.NEVER=0,this.Vh=1,this.ALWAYS=2,this.le=0,this.me=3,this.Yg=7,this.Xg=1,this.jh=this.Ae=0,this.De=1,this.kh=this.Be=2,this.Ce=3,this.Ee=4,this.Fe=5,this.Ge=6,this.He=7,this.Ie=8,this.di=9,this.Je=10,this.Ke=11,this.ze=12,this.Aa="Japanese",this.Ck="Chinese"}i.g=new r},{}],39:[function(t,i,n){"use strict";function r(t){return"\n"!==t.slice(-1)?0:"\r\n"!==t.slice(-2)?1:2}n.Cf=function(t){return t.name||t.toString().split(/ |\(/,2)[1]},n.clone=function(t){if(null===t||void 0===t)return t;var i;if(t instanceof Array){i=[];for(var n=0,r=t.length;r>n;n++)i[n]=t[n]}else{if("object"!=typeof t)throw new Error("clone called on "+typeof t);if("function"==typeof t.clone)return t.clone();i={};for(var o in t){var e=t[o];"function"!=typeof e&&(i[o]=e)}}return i},String.prototype.zb=function(t){if(void 0===t)return this.substr(0,this.length-r(this));var i=this.length-t.length;return this.substr(i)===t?this.substr(0,i):this.toString()},String.prototype.Uc=function(t){if(void 0===t)t=r(this)||1;else if("number"!=typeof t)throw new Error("Invalid parameter type for String.count: "+typeof t);return this.substr(0,this.length-t)},String.prototype.startsWith||(String.prototype.startsWith=function(t){return this.substr(0,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t){return this.substr(this.length-t.length)===t}),String.prototype.format=function(t){if("%"!==this[0])throw new Error("Invalid format: "+this.toString());var i,n=this.slice(1,-1),r=0,o=this.slice(-1);switch(o){case"d":case"x":var e=" ";"0"===n[r]&&(r++,e="0");var s=parseInt(n.substr(r));i=t.toString("x"===o?16:10);for(var h=s-i.length;h>0;h--)i=e+i;return i;case"f":var a="";if("+"===n[r]&&(r++,t>0&&(a="+")),"."!==n[r++])break;var u=parseInt(n.substr(r));return a+t.toFixed(u)}throw new Error("Unknown format: "+this.toString())},String.prototype.Zd=function(t,i){return this>=t&&i>=this},n.Dk=function(t,i){for(var n=new Array(t),r=t-1;r>=0;r--)n[r]=i;return n},n.zc=function(t,i,r){for(var o=new Array(t),e=o[0]=n.Dk(i,r),s=t-1;s>=1;s--)o[s]=e.concat();return o},Array.Ek=function(t,i){if(void 0===t)return[];if(void 0===i)return new Array(t);var n,r=[];if("function"==typeof i)for(n=0;t>n;n++)r[n]=i(n);else for(n=0;t>n;n++)r[n]=i;return r},Array.prototype.Fk=function(t){for(var i=this.length,n=0;n<t.length;n++){var r=t[n];-1===this.indexOf(r)&&this.push(r)}return this.length-i}},{}],40:[function(t,i,n){"use strict";function r(){this.Gk=null,this.map={},this.Hk=this.Ik.bind(this);try{var t=window.localStorage.getItem(e);t&&(this.map=JSON.parse(t))}catch(i){o.Jk("Cannot load local preferences: "+i)}}var o=t("./log"),e="localPref";r.prototype.terminate=function(){this.Gk&&this.Ik()},r.prototype.Kk=function(){this.Gk||(this.Gk=window.setTimeout(this.Hk,6e4))},r.prototype.Ik=function(){window.clearTimeout(this.Gk),this.Gk=null;try{window.localStorage.setItem(e,JSON.stringify(this.map))}catch(t){o.Jk("Cannot save local preferences: "+t)}},r.prototype.Lk=function(t,i){var n=this.map[t];return void 0!==n?n:i},r.prototype.Mk=function(t,i){this.map[t]=i,this.Kk()},i.g=new r},{"./log":41}],41:[function(t,i,n){"use strict";function r(){this.level=NaN,this.Nk=null,this.Nf=0,this.Hg=1,this.Ok=2,this.ERROR=3,this.Pk=4,this.Qk=!1,this.nd=!1}var o=console,e=0,s=1,h=2,a=3,u=4;r.prototype.Mf=function(t){t!==this.level&&(this.level=t,this.debug=e>=t?this.Rk:null,this.info=s>=t?this.fe:null,this.warn=h>=t?this.nk:null,this.error=a>=t?this.Jk:null,this.fatal=u>=t?this.Sk:null)},r.prototype.Tk=function(t){this.Nk=t},r.prototype.Uk=function(t,i){var n=this;return function(r){n.level>t||n.Nk&&!n.Nk(t,r)||i.call(o,r)}};var l=i.g=new r;r.prototype.Rk=l.Uk(e,o.debug),r.prototype.fe=l.Uk(s,o.info),r.prototype.nk=l.Uk(h,o.warn),r.prototype.Jk=l.Uk(a,o.error),r.prototype.Sk=l.Uk(u,o.error),l.Mf(s)},{}],42:[function(t,i,n){"use strict";function r(){this.appName=o.name,this.appVersion=o.version,this.Vk=null,this.Wk=null}var o=t("../package.json");i.g=new r},{"../package.json":56}],43:[function(t,i,n){"use strict";function r(){this.debug=!1,this.Xk=this.mk=!1,this.Yk=null,this.Zk=null}i.g=new r,r.prototype.$k=function(t,i){this.Yk=new t,i(this.Yk)},r.prototype.assert=function(t){if(t!==!0)throw new Error("assertion failed: "+t)}},{}],44:[function(t,i,n){"use strict";function r(){this._k=null,this.al=null,this.Ea=null,this.Sa=0,this.bl=null,this.cursor={type:"CR",x:0,y:0},this.cl=!1,this.dl={type:null,x:0,y:0}}function o(t){switch(t){case-1:return{type:"mini",c:c.B};case-.5:return{type:"outline",c:c.B};case 0:return null;case.5:return{type:"outline",c:c.W};case 1:return{type:"mini",c:c.W};default:return null}}function e(t){switch(t){case a.Mc+p:case a.Lc+f:return{type:"mini",c:c.B};case a.Mc+f:case a.Lc+p:return{type:"mini",c:c.W};case a.Kc:return{type:"SL",c:"grey"};default:return null}}function s(t){if(null===t)return null;var i=1,n=0,r=2,o=0;if(void 0!==y&&(n=y),void 0!==m&&(r=m),void 0!==w&&(o=w),t===o)return null;for(var e=t.toFixed(r),s=n;r>s;s++)e=e.zb("0");if(e=e.zb("."),"0."===e.substr(0,2)&&(e=e.slice(1)),0===o){if("0"===e||".0"===e)return null;i=1>t?.6:1}return{type:"LB",text:e,scale:i}}var h=t("../constants"),a=t("../Grid"),u=t("../log"),l=t("./touchManager.js");t("../../lib/wgo.js");var c=window.WGo,f=h.za,p=h.ya,g=h.EMPTY,d=window.devicePixelRatio||1,v={};v[c.B]=p,v[c.W]=f;var b={};b[g]=null,b[p]=c.B,b[f]=c.W,i.g=r,r.prototype.create=function(t,i,n,r){var o=n.Sa;if(this.Ea=n,!this._k||this.Sa!==o){this.Sa=o,r=r||{};var e=r.noCoords?0:-.23,s={size:o,width:i,section:{top:e,left:e,right:e,bottom:e},coordFontSize:.6};switch(r.background){case"wood":s.background=(window.rootDir||".")+"/assets/wood1.jpg";break;default:s.background="#c75"}t.clear(),this._k=new c.el(t.fl(),s),this.gl=60+this._k.hl,r.noCoords||this._k.il(c.el.jl),this.kl()}},r.prototype.kl=function(){var t=this;l.ll(this._k.ml,function(i,n,r){if("dragCancel"===i)return t.nl(-1,-1);"drag"===i.substr(0,4)&&(r-=t.gl);var o=t.ol(n,r);switch(n=o[0],r=o[1],i){case"dragStart":return t.nl(n,r);case"drag":return t.nl(n,r);case"dragEnd":return t.nl(-1,-1),t.pl(n,r);case"tap":return t.pl(n,r)}})},r.prototype.ql=function(t){this.rl=b[t]},r.prototype.nl=function(t,i){var n=this.sl(t,i);if(this.cl){if(t===this.cursor.x&&i===this.cursor.y)return;this._k.tl(this.cursor)}this.cl=n,n&&(this.cursor.x=t,this.cursor.y=i,this._k.ul[t][i][0]?(this.cursor.type="CR",this.cursor.c=void 0):(this.cursor.type=void 0,this.cursor.c=this.rl),this._k.vl(this.cursor))},r.prototype.wl=function(t,i,n){this.dl.type&&this._k.tl(this.dl),this.dl.type=t,t&&(this.dl.x=i-1,this.dl.y=this.Sa-n,this._k.vl(this.dl))},r.prototype.sl=function(t,i){return t>=0&&i>=0&&t<this.Sa&&i<this.Sa},r.prototype.pl=function(t,i){var n=t+1,r=this.Sa-i;if(!this.sl(t,i))return this.al("!"+(n>=1&&n<=this.Sa?a.Tc(n):r));if(this.Ea.fc(n,r)===g){var o=a.Zc(n,r);this.al(o)}},r.prototype.xl=function(t){this.al=t},r.prototype.ol=function(t,i){var n=this._k;return t=Math.round((t*d-n.left)/n.yl),i=Math.round((i*d-n.top)/n.zl),[t,i]},r.prototype.refresh=function(){var t=!1;"regular"!==this.bl&&(this.bl="regular",t=!0);for(var i=0;i<this.Sa;i++)for(var n=0;n<this.Sa;n++){var r=this.Ea.fc(n+1,this.Sa-i),o=b[r],e=this._k.ul[n][i][0];t&&(e=null,this._k.Al(n,i)),null===o?e&&this._k.Al(n,i):e&&e.c===o||this._k.vl({x:n,y:i,c:o})}},r.prototype.show=function(t,i,n){this.refresh(),this.bl=t;for(var r=0;r<this.Sa;r++)for(var o=0;o<this.Sa;o++){var e=n(i[this.Sa-r][o+1]);e&&(e.x=o,e.y=r,this._k.vl(e))}};var y,m,w;r.prototype.Bl=function(t,i,n){y=t,m=i,w=n};var x={oh:o,Cl:e,value:s};r.prototype.Dl=function(t,i){var n=x[t];return n?void this.show(t,i,n):u.error&&u.error("invalid display type:",t)},r.prototype.El=function(t){this.show("scoring",t,e)}},{"../../lib/wgo.js":53,"../Grid":9,"../constants":38,"../log":41,"./touchManager.js":52}],45:[function(t,i,n){"use strict";function r(t,i,n,o){this.type=i,t instanceof r&&(t=t.Fl);var s=this.Fl=t.appendChild(document.createElement(i));o&&"#"===o[0]&&(e.add(o.substr(1),this),"#"===n[0]&&(n=n.substr(1))),n&&(s.className=n)}function o(){this.am={}}var e=null,s=1;i.g=r,r.prototype.Gl=function(t){return this.Fl.textContent=t,this},r.prototype.Hl=function(t){return this.Fl.innerHTML=t,this},r.prototype.setAttribute=function(t,i){return this.Fl.setAttribute(t,i),this},r.prototype.Il=function(t,i){return this.Fl.style[t]=i,this},r.prototype.Jl=function(t){return t===this.Kl()?this:(this.Fl.style.display=t?"":"none",this.Ll=!!t,this)},r.prototype.Kl=function(){return this.Ll||void 0===this.Ll},r.prototype.Ml=function(t){return this.Fl.disabled=!t,this.Nl("disabled",!t),this},r.prototype.text=function(){return this.Fl.textContent},r.prototype.Ol=function(){return this.Fl.innerHTML},r.prototype.value=function(){return this.Fl.value},r.prototype.Pl=function(){return this.Fl.checked},r.prototype.fl=function(){return this.Fl},r.prototype.clear=function(){this.Fl.innerHTML=""},r.prototype.v=function(t,i){var n=this;this.Fl.addEventListener(t,function(t){i.call(n,t)})},r.prototype.Nl=function(t,i){var n=this.Fl,r=n.className.split(" "),o=r.indexOf(t);if(i){if(o>=0)return;n.className+=" "+t}else{if(0>o)return;r.splice(o,1),n.className=r.join(" ")}},r.prototype.Ql=function(){this.Fl.scrollTop=this.Fl.scrollHeight},r.Rl=function(t,i,n){return new r(t,"div",i,n||i)},r.prototype.Rl=function(t,i){return new r(this,"div",t,i||t)},r.removeChild=function(t,i){t instanceof r&&(t=t.Fl),t.removeChild(i.Fl)},r.prototype.removeChild=function(t){this.Fl.removeChild(t.Fl)},r.Sl=function(t,i,n,o){var e=new r(t,"button",i+"Button",i);return e.Fl.innerText=n,e.v("click",o),e},r.Tl=function(t,i,n,o,e){
var s=r.Sl(t,i,n,e);return o&&s.Rl("btnIcon"),s},r.Ul=function(t,i){t.v("click",i)},r.Vl=function(t,i,n,o){var e=new r(t,"a",i+"Link",i);return e.setAttribute("href",o),e.Gl(n),e},r.Wl=function(t,i,n){return new r(t,"span",i,i).Gl(n)},r.Xl=function(t,i,n,o){var e=i+"Label";r.Wl(t,e+" inputLbl",n,e);var s=new r(t,"input",i+"Input inputBox",i);return void 0!==o&&(s.Fl.value=o),s},r.Yl=function(t,i,n,o,e){var h=new r(t,"div",i+"Div chkBoxDiv"),a=new r(h,"input",i+"ChkBox chkBox",i),u=a.Fl;return u.type="checkbox",u.name=i,void 0!==o&&(u.value=o),u.id=i+"ChkBox"+(void 0!==o?o:s++),e&&(u.checked=!0),new r(h,"label",i+"ChkLabel chkLbl",i).Gl(n).setAttribute("for",u.id),a},r.Zl=function(t,i,n,o,e){o||(o=n);for(var s=[],h=0;h<n.length;h++){var a=s[h]=new r(t,"input",i+"RadioBtn radioBtn",i),u=a.Fl;u.type="radio",u.name=i,u.value=o[h],u.id=i+"Radio"+o[h],o[h]===e&&(u.checked=!0),new r(t,"label",i+"RadioLabel radioLbl",i).Gl(n[h]).setAttribute("for",u.id)}return s},r.$l=function(t){for(var i=0;i<t.length;i++)if(t[i].Fl.checked)return t[i].Fl.value},r._l=function(t,i,n,o,e){o||(o=n);var s=new r(t,"select",i+"DropDwn dropDwn",i);s.values=o;for(var h=0,a=0;a<n.length;a++){var u=new r(s,"option").Fl;u.value=o[a],u.textContent=n[a],o[a]===e&&(h=a)}return s.Fl.selectedIndex=h,s},r.prototype.select=function(t){var i=this.values.indexOf(t);-1!==i&&(this.Fl.selectedIndex=i)},r.Rb=function(){return e=new o},o.prototype.add=function(t,i){this.am[t]=i},o.prototype.get=function(t){return this.am[t]},o.prototype.Ml=function(t,i,n){"ALL"===t&&(t=Object.keys(this.am));for(var r=0;r<t.length;r++)if(!n||-1===n.indexOf(t[r])){var o=this.am[t[r]];o?o.Ml(i):console.error("Invalid control name:",t[r])}},o.prototype.Jl=function(t,i,n){"ALL"===t&&(t=Object.keys(this.am));for(var r=0;r<t.length;r++)if(!n||-1===n.indexOf(t[r])){var o=this.am[t[r]];o?o.Jl(i):console.error("Invalid control name:",t[r])}},r.bm=function(t){document.head.getElementsByTagName("title")[0].textContent=t},r.cm=function(){var t=window.getSelection();if(!t.rangeCount)return null;var i=t.getRangeAt(0),n=i.startContainer.data;return n?n.substring(i.startOffset,i.endOffset):null}},{}],46:[function(t,i,n){"use strict";function r(t,i){this.dm=i,this.em=t.Sa,this.fm(t.gm),this.hm(t),this.im(),this.jm(),this.km()}var o=t("../ai"),e=t("../constants"),s=t("./Dome"),h=t("./Transit"),a=e.ya,u=e.za,l=[5,7,9,13,19],c="More options",f=" >>",p=" <<";i.g=r,r.prototype.im=function(){var t=this.em;this.lm.Gl(t+" x "+t);var i=t+"x"+t;this.mm.Il("backgroundImage",'url("assets/'+i+'.png")'),this.mm.Il("backgroundSize",Math.ceil(t/19*100)+"%"),this.nm.Ml(t>5),this.om.Ml(19>t)},r.prototype.pm=function(t){var i=l.indexOf(this.em)+t;this.em=l[i],this.im()},r.prototype.jm=function(){this.qm[a].Nl("robot",this.rm[a]),this.qm[u].Nl("robot",this.rm[u])},r.prototype.sm=function(t){this.rm[t]=!this.rm[t],this.jm()},r.prototype.hm=function(t){this.options=t;var i=this.tm=s.Rl(document.body,"newGameBackground"),n=this.frame=i.Rl("newGameDialog dialog");n.Rl("dialogTitle").Gl("Start a new game");var r=n.Rl("mainDiv"),e=r.Rl("boardDiv");this.qm=[],this.qm[0]=s.Tl(e,"player",null,!0,this.sm.bind(this,0));var h=e.Rl("sizeBox");this.lm=h.Rl("curSize"),this.om=s.Tl(h,"size",null,!0,this.pm.bind(this,1)),this.mm=h.Rl("boardImgFrame").Rl("boardImg"),this.nm=s.Tl(h,"size",null,!0,this.pm.bind(this,-1)),this.nm.Nl("down",!0),this.qm[1]=s.Tl(e,"white player",null,!0,this.sm.bind(this,1)),this.um=s.Sl(r,"advanced",c+f,this.vm.bind(this));var a=this.wm=n.Rl("advancedDiv").Jl(!1);s.Wl(a,"inputLbl","Handicap:"),this.Fa=s._l(a,"handicap",[0,2,3,4,5,6,7,8,9],null,t.Fa);var u=a.Rl("rules");s.Wl(u,"inputLbl","Rules:"),this.rules=s._l(u,"rules",["Japanese","Chinese"],["jp","ch"],t.rules);var l=a.Rl("moves");this.Vd=s.Xl(l,"moves","Moves to load:",t.Vd),l.Rl("loadMovesInfo").Gl("(SGF format is also accepted)");var p=a.Rl();s.Wl(p,"inputLbl","Black AI:"),this.Hd=s._l(p,"defaultAi",Object.keys(o.wk),null,o.Hd.name),s.Wl(p,"defAiInfo","(White AI always uses latest AI version)"),s.Sl(n,"start","Play",this.xm.bind(this))},r.prototype.km=function(){new h(this.frame).from("transform","translate3d(0,-100%,0)").ym("transform","translate3d(0,0,0)").start(200)},r.prototype.vm=function(){this.zm?(this.Am=!this.Am,this.zm.Bm(200)):(this.wm.Jl(!0),this.Am=!0,this.zm=new h(this.wm).ym("marginTop","0").start(200)),this.um.Gl(c+(this.Am?p:f))},r.prototype.fm=function(t){this.rm=[],this.rm[a]="black"===t||"both"===t,this.rm[u]="white"===t||"both"===t},r.prototype.Cm=function(){var t=this.rm[a],i=this.rm[u];return t&&i?"both":t||i?t?"black":"white":"none"},r.prototype.xm=function(){var t=this.options;return t.Sa=this.em,t.Fa=~~this.Fa.value(),t.gm=this.Cm(),t.Vd=this.Vd.value(),o.Hd=o.wk[this.Hd.value()],t.rules=this.rules.value(),this.dm(t)?s.removeChild(document.body,this.tm):void 0}},{"../ai":37,"../constants":38,"./Dome":45,"./Transit":48}],47:[function(t,i,n){"use strict";function r(){var t=this.Dm;t.options&&(t.options.Em=this.id),s.removeChild(t.parent,t.Fm),t.dm&&t.dm(t.options)}function o(t,i,n,o){var e=s.Sl(t,"popupDlg",n,r);e.Dm=i,e.id=o}function e(t,i,n,r,e){this.parent=t||document.body,this.options=r,this.dm=e,this.Fm=s.Rl(this.parent,"popupBackground");var h=this.Fm.Fl.parentElement;this.Fm.Il("left",h.offsetLeft+"px"),this.Fm.Il("top",h.offsetTop+"px"),this.Fm.Il("height",h.scrollHeight+"px");var a=this.Fm.Rl("popupDlg dialog");a.Rl("dialogTitle").Gl(n||"Problem");var u=a.Rl("content");s.Wl(u,"message",i);for(var l=r&&r.buttons||["OK"],c=a.Rl("btnDiv"),f=0;f<l.length;f++)o(c,this,l[f],f)}var s=t("./Dome");i.g=e},{"./Dome":45}],48:[function(t,i,n){"use strict";function r(t){this.Fl=t.Fl||t,this.Gm={},this.Hm={},this.Im={},this.timeout=null,this.Jm=null,this.Km=null}function o(t,i){window.clearTimeout(t.timeout),t.timeout=null,t.Fl.style.webkitTransition=t.Jm,!i&&t.Km&&t.Km(),t.Km=null}i.g=r,r.prototype.from=function(t,i){return this.Hm[t]=i,this},r.prototype.ym=function(t,i){return this.Im[t]=i,this},r.prototype.start=function(t,i){var n=this.Fl;n.Lm&&n.Lm.timeout&&o(n.Lm,!0),n.Lm=this,this.Jm=n.style.webkitTransition,n.style.webkitTransition=null;for(var r in this.Hm)this.Gm[r]=n.style[r],n.style[r]=this.Hm[r];var e="all "+t+"ms ease-in-out";n.style.webkitTransition=e,n.clientHeight||(n=n);for(r in this.Im)this.Gm.hasOwnProperty(r)||(this.Gm[r]=n.style[r]),n.style[r]=this.Im[r];return this.Km=i,this.timeout=window.setTimeout(o,t,this),this},r.prototype.Bm=function(t,i){this.Im=this.Gm,this.Gm={},this.Hm={},this.start(t,i)}},{}],49:[function(t,i,n){"use strict";function r(t){this.Sa=this.Fa=0,this.gm="",this.Ed=new u(t),this.Mm=new d(this.Ed),this._k=null,this.initDev?this.initDev():this.Nm=!0}function o(t,i,n){var r=this.Fl=t.Rl("oneMove "+i);this.fn=r.Rl("label").Gl(n);var o=r.Rl("icon");this.gn=o.Rl("text")}var e=t("../ai"),s=t("./Board"),h=t("../constants"),a=t("./Dome"),u=t("../GameLogic"),l=t("../Grid"),c=t("../main"),f=t("./NewGameDlg"),p=t("./PopupDlg"),g=t("../localPref"),d=t("../ScoreAnalyser"),v=h.za,b=h.ya,y=document.documentElement.clientWidth;i.g=r,r.prototype.Om=function(){window.addEventListener("beforeunload",this.Pm.bind(this)),this.Sa=g.Lk("lastGameSize",9),this.Fa=g.Lk("lastGameHandicap",0),this.gm=g.Lk("lastGameAiPlays","black"),this.rules=g.Lk("lastGameRules","jp");var t=g.Lk("lastGameHistory");this.Qm(t)},r.prototype.Rm=function(){g.Mk("lastGameSize",this.Sa),g.Mk("lastGameHandicap",this.Fa),g.Mk("lastGameAiPlays",this.gm),g.Mk("lastGameRules",this.rules),g.Mk("lastGameHistory",this.Ed.history)},r.prototype.Pm=function(){this.Rm(),g.terminate()},r.prototype.Sm=function(){this._k.refresh(),this.inDevMode&&this.devDisplay()},r.prototype.Tm=function(t,i,n){this.Um("compact",t,i,n),this.gm="both",this.Vm(null,!0),this.Ed.Ka&&this.Wm()},r.prototype.Um=function(t,i,n,r){var o=this.Xm="compact"===t,e=this.Ym=a.Rl(i,"gameUi");n&&e.Rl(o?"testTitle":"pageTitle").Gl(n),this.Zm=e.Rl("board"),r&&(this.$m=e.Rl("boardDesc").Hl(r)),this._m(e),this.an(e),this.Nm||this.createDevControls();var h=this.Ed.Ea.Sa+2;this.bn=o?28*h:Math.min(60*h+10,y-15);var u=this;this._k=new s,this._k.xl(function(t){return"!"===t[0]?!u.Nm&&u.onDevKey(t.substr(1)):u.Nm||!u.inEvalMode&&!u.cn?void u.dn(t):u.showDevData(t,null,!0)})},r.prototype.en=function(){this.Ym&&(a.removeChild(document.body,this.Ym),this.Ym=null,this._k=null)},r.prototype.Qm=function(t){a.bm(c.appName),this.en();var i={Sa:this.Sa,Fa:this.Fa,gm:this.gm,Vd:t,rules:this.rules},n=this;new f(i,function(t){return n.Sa=t.Sa,n.Fa=t.Fa,n.gm=t.gm,n.rules=t.rules,n.Ed.Da("jp"===n.rules?h.Aa:h.Ck),n.Vm(t.Vd)})},o.prototype.hn=function(t,i,n){this.Fl.Jl(null!==t),null!==t&&(this.Fl.Nl("black",i===b),this.Fl.Nl("white",i===v),this.gn.Gl(t),n&&this.fn.Gl(n))},r.prototype._m=function(t){var i=this["in"]=t.Rl("statusBar");this.jn=new o(i,"lastMove","Last:"),this.kn=i.Rl("gameInfo"),this.ln=i.Rl("message"),this.mn=new o(i,"nextPlayer","Next:")},r.prototype.nn=function(){var t=this.Ed.Ca[v]+" VS "+this.Ed.Ca[b]+" (B)";t+=", komi: "+this.Ed.Ga,this.Fa&&(t+=", hand: "+this.Fa),this.Ed.Pa&&(t+=", rules: "+this.Ed.Pa),this.kn.Gl(t)},r.prototype.on=function(){var t=this.Ed.history;if(t.length){var i=this.Ed.hb(t[t.length-1]);this.jn.hn(i,1-this.Ed.Ia,"#"+t.length+":");var n=this.Ed.mb(i);n?this._k.wl("CR",n[0],n[1]):this._k.wl(null)}else this.jn.hn(null);this.pn(),this.ln.Gl("")},r.prototype.pn=function(t){return null===t?this.mn.hn(null):(t=this.Ed.hb(t||""),void this.mn.hn(t,this.Ed.Ia))},r.prototype.statusMessage=function(t){this.ln.Gl(t),this.pn(),this.qn.Jl(!1)},r.prototype.rn=function(t){this.qn.Hl(t),this.qn.Jl(!0)},r.prototype.an=function(t){var i=t.Rl("mainControls"),n=this;this.sn=a.Rb(),a.Sl(i,"#review","Review",function(){n.tn()}),a.Sl(i,"#back10","<<",function(){n.un(-10)}),a.Sl(i,"#back1","<",function(){n.un(-1)}),a.Sl(i,"#forw1",">",function(){n.un(1)}),a.Sl(i,"#forw10",">>",function(){n.un(10)}),this.controls=a.Rb(),a.Sl(i,"#pass","Pass",function(){n.dn("pass")}),a.Sl(i,"#next","Next",function(){n.vn(1)}),a.Sl(i,"#next10","Next 10",function(){n.vn(10)}),a.Sl(i,"#nextAll","Finish",function(){n.vn()}),a.Sl(i,"#undo","Undo",function(){n.wn()}),a.Sl(i,"#accept","Accept",function(){n.xn(!0)}),a.Sl(i,"#refuse","Refuse",function(){n.xn(!1)}),a.Sl(i,"#newg","New game",function(){n.Qm()}),this.qn=i.Rl("logBox outputBox").Jl(!1),a.Sl(i,"#resi","Resign",function(){n.yn()}),this.zn=i.Rl("#aiVsAiFlags"),this.An=a.Yl(this.zn,"animated","Animated")},r.prototype.tn=function(){this.cn=!this.cn,this.sn.get("review").Nl("toggled",this.cn),this.Bn(),this.cn?(this.Cn=this.Ed.history.concat(),this.Dn=this.Cn.length,this.un(0)):(this.un(this.Cn.length-this.Dn),this.pn())},r.prototype.Bn=function(){var t=this.cn,i=this.Ed.La,n=this.Ed.Ka,r=!(i||n||t),o="both"===this.gm;this["in"].Jl(!i),this.sn.Jl(["review"],r||t),this.sn.Jl(["back1","back10","forw1","forw10"],t),this.controls.Jl(["accept","refuse"],n),this.controls.Jl(["undo","pass","resi"],r&&!o),this.controls.Jl(["next","next10","nextAll","aiVsAiFlags"],r&&o),this.controls.Jl(["newg"],i&&!this.Xm),this.Nm||this.toggleDevControls(r,t,o)},r.prototype.En=function(t){this.Fn=[],this.Gn=[!1,!1];for(var i=b;v>=i;i++)if(this.gm===l.Ac[i]||"both"===this.gm){var n=this.Hn(i).constructor;this.Gn[i]=!0,t||this.Ed.Oa(i,n.Nj+"-"+n.Oj)}else t||this.Ed.Oa(i,"human")},r.prototype.Hn=function(t){var i=this.Fn[t];if(i)return i;var n=t===b?e.Hd:e.xk;return i=this.Fn[t]=new n(this.Ed,t)},r.prototype.In=function(){this.nn(),this.on(),this.pn(),this.Bn(),this.Sm()},r.prototype.Ta=function(t){var i=[];return this.Ed.fb(t,i)?!0:(new p(this.Ym,i.join("\n")),!1)},r.prototype.Vm=function(t,i){var n=this.Ed;if(i||n.Ra(this.Sa,this.Fa),this.En(i),t&&!this.Ta(t))return!1;this.Sa=n.Ea.Sa,this.Fa=n.Fa,this.Nm||this.initDev(),this.Ym||this.Um("main",document.body);var r=this.Xm?void 0:{background:"wood"};return this._k.create(this.Zm,this.bn,n.Ea,r),this.In(),i||(t||this.statusMessage("Game started. Your turn..."),this.Jn()||this.Kn()),!0},r.prototype.Jn=function(){return this.Ed.Ka?(this.Wm(),!0):this.Ed.La?(this.tg(),this.Ln(),!0):!1},r.prototype.tg=function(){var t=this.Mm.Kd();this.Mn=t.join("<br>")},r.prototype.Wm=function(){this.tg(),this.statusMessage("Do you accept this score?"),this.rn(this.Mn),this.Bn(),this._k.El(this.Mm.Nd().Kb)},r.prototype.xn=function(t){var i=this.Ed.Ia;return this.Gn[i]&&!this.Gn[1-i]&&(i=1-i),this.Ed.sb(t,i),t?this.Ln():(this.statusMessage("Score in dispute. Continue playing..."),this.Bn(),this.Sm(),void("both"!==this.gm&&this.Kn()))},r.prototype.Ln=function(){this.rn(this.Mn+"<br><br>"+this.Ed.ub()),this.Bn()},r.prototype.Nn=function(t){var i=this.On=this.Fn[this.Ed.Ia];this.Pn=i.$j;var n=i.hk();return this.Ed.Za(n),t||(this.on(),this.inDevMode&&this.showDevData(n,i,!1)),this.Jn()?n:(t||this.Sm(),n)},r.prototype.dn=function(t){return this.Ed.Za(t)?void(this.Jn()||(this.Sm(),this.on(),this.Kn())):this.statusMessage(this.Ed.$a().join(". "))},r.prototype.yn=function(){var t=this,i={buttons:["YES","NO"]};new p(this.Ym,"Do you really want to resign?","Confirm",i,function(i){0===i.Em&&(t.Ed.Za("resi"),t.Jn())})},r.prototype.wn=function(){var t="undo";return("none"===this.gm||"both"===this.gm||this.inEvalMode)&&(t="half_undo"),this.Ed.Za(t)?(this.Sm(),this.on(),void this.statusMessage('Performed "'+t+'"')):this.statusMessage(this.Ed.$a().join(". "))},r.prototype.Qn=function(){this._k.ql(this.Ed.Ia);var t=l.Qc(this.Ed.Ia);return"("+t+"'s turn)"},r.prototype.Kn=function(t){this.Gn[this.Ed.Ia]?this.Nn(t):t||this.pn()},r.prototype.vn=function(t){var i=1===t,n=this.An.Pl(),r=!i&&!n;if(this.Kn(r),!i&&!this.Ed.Ka){var o=this;window.setTimeout(function(){o.vn(t-1)},n?100:0)}},r.prototype.un=function(t){for(var i=this.Cn,n=this.Dn,r=0;t>r&&n!==i.length;r++)this.Ed.Za(i[n]),n++;for(r=0;r>t&&0!==n;r--)this.Ed.Za("half_undo"),n--;if(this.Dn=n,this.Sm(),this.sn.Ml(["forw1","forw10"],n!==i.length),this.sn.Ml(["back1","back10"],0!==n),this.on(),n<i.length?this.pn(i[n]):this.pn(null),this.inEvalMode){var o=n>0?i[n-1]:null;o&&o.length<=3&&this.afterReplay(o)}}},{"../GameLogic":6,"../Grid":9,"../ScoreAnalyser":12,"../ai":37,"../constants":38,"../localPref":40,"../main":42,"./Board":44,"./Dome":45,"./NewGameDlg":46,"./PopupDlg":47}],50:[function(t,i,n){"use strict";var r=t("../ai"),o=[{name:"Chuckie",Bk:t("../ai/chuckie")}];r.Ak(o),t("./style.less");var e=t("./Ui"),s=new e;s.Om()},{"../ai":37,"../ai/chuckie":36,"./Ui":49,"./style.less":51}],51:[function(t,i,n){var r='body {\n  background-color: #AB8274;\n  font-family: "Arial";\n  margin: 0px;\n}\n::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 7px;\n  height: 7px;\n}\n::-webkit-scrollbar-track {\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.2);\n  -webkit-border-radius: 10px;\n  border-radius: 7px;\n  margin: 1px;\n}\n::-webkit-scrollbar-thumb {\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, 0.5);\n}\n.pageTitle {\n  margin-top: 7px;\n  margin-bottom: 7px;\n  font-size: 40px;\n  font-weight: bold;\n}\n.subTitle {\n  font-size: 30px;\n  margin-top: 0.5em;\n  margin-bottom: 5px;\n}\n.logBox {\n  font-size: 28px;\n  font-family: "Arial";\n  background-color: white;\n  border: solid #cca 1px;\n  border-radius: 8px;\n  padding: 5px;\n  overflow-y: auto;\n  word-wrap: break-word;\n}\n.inputLbl {\n  margin-left: 10px;\n  font-size: 28px;\n}\n.inputBox {\n  margin: 17px 13px 17px 13px;\n  min-height: 1cm;\n  text-align: left;\n  font-size: 42px;\n}\nbutton {\n  margin-right: 10px;\n  margin-bottom: 10px;\n  border-radius: 13px;\n  width: 160px;\n  height: 120px;\n  font-size: 28px;\n  border-color: #987;\n  background-color: #af9e8e;\n  color: #000000;\n}\nbutton.toggled {\n  background-color: #AD4343;\n}\nbutton.disabled {\n  color: #888;\n  opacity: 0.6;\n}\n.btnIcon {\n  width: 100%;\n  height: 100%;\n  background-position: 50%;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n.chkBoxDiv {\n  display: inline-block;\n  margin-right: 10px;\n}\n.chkBox {\n  margin: 5px 3px 14px 2px;\n  width: 29px;\n  height: 1.5em;\n}\n.chkLbl {\n  font-size: 28px;\n}\n.dropDwn {\n  font-size: 42px;\n  margin: 17px 13px 17px 13px;\n}\n.radioBtn {\n  margin: 17px 0px 17px 13px;\n  width: 29px;\n  height: 1.5em;\n}\n.radioLbl {\n  margin-right: 13px;\n}\n.dialog {\n  z-index: 1000;\n  position: relative;\n  margin: 0 auto;\n  top: 200px;\n  width: 45%;\n  padding: 10px;\n  background-color: #ffe;\n  border: solid #cca 1px;\n  border-radius: 10px;\n  font-family: Arial;\n  font-size: 42px;\n}\n.dialogTitle {\n  font-size: 50px;\n  background-color: #ffebce;\n  border: solid 1px rgba(195, 50, 50, 0.2);\n  border-radius: 10px;\n  margin: -6px;\n  margin-bottom: 15px;\n  padding: 10px 0px 10px 12px;\n}\n.popupBackground {\n  z-index: 2000;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.popupDlg {\n  position: relative;\n  top: 150px;\n  margin: 0 auto;\n  width: 50%;\n}\n.popupDlg .content {\n  padding: 20px;\n  white-space: pre-wrap;\n}\n.popupDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: 0 0 -10px 0;\n}\n.popupDlg .btnDiv .popupDlgButton {\n  min-width: 220px;\n  min-height: 80px;\n  font-size: 30px;\n  float: right;\n  margin: 10px;\n}\n.gameUi {\n  padding: 2px;\n}\n.gameUi .board {\n  background-color: #402F23;\n  border-radius: 7px;\n}\n.gameUi .board .wgo-board {\n  margin: 0 auto;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  /* disables grey shade on long-tap for Safari */\n  /* Below avoid issues when tap-hold on Android */\n  -webkit-user-select: none;\n  -webkit-touch-callout: none;\n}\n.gameUi .boardDesc {\n  margin-top: 3px;\n  font-weight: bold;\n  font-style: italic;\n}\n.gameUi button {\n  min-width: 200px;\n}\n.gameUi .statusBar {\n  position: relative;\n  margin-top: 7px;\n  height: 95px;\n  box-sizing: border-box;\n  background-color: #DFC2AC;\n  border: rgba(0, 0, 0, 0.7) 1px solid;\n  border-radius: 5px;\n}\n.gameUi .statusBar .gameInfo {\n  display: inline-block;\n  box-sizing: border-box;\n  margin: 6px 15px 3px 15px;\n  padding: 1px 3px;\n  width: 280px;\n  height: 80px;\n  overflow-y: auto;\n  font-size: 19px;\n  font-family: tahoma;\n  background-color: #EDDDCE;\n  border-radius: 7px;\n  border: rgba(0, 0, 0, 0.35) 1px solid;\n}\n.gameUi .statusBar .message {\n  display: inline-block;\n  position: relative;\n  top: 11px;\n  vertical-align: top;\n  width: calc(50% - 74px);\n  overflow-y: auto;\n  font-size: 26px;\n}\n.gameUi .statusBar .oneMove {\n  height: 80px;\n}\n.gameUi .statusBar .oneMove .icon .text {\n  color: #C12A04;\n}\n.gameUi .statusBar .oneMove.black .icon {\n  background-image: url("assets/stoneBlack.png");\n}\n.gameUi .statusBar .oneMove.black .text {\n  color: white;\n  text-shadow: #000 0 0 3px;\n}\n.gameUi .statusBar .oneMove.white .icon {\n  background-image: url("assets/stoneWhite.png");\n}\n.gameUi .statusBar .oneMove.white .text {\n  color: black;\n  text-shadow: #fff 0 0 3px;\n}\n.gameUi .statusBar .oneMove .label {\n  position: relative;\n  text-align: center;\n  font-size: 28px;\n}\n.gameUi .statusBar .oneMove .icon {\n  display: inline-block;\n  position: relative;\n  top: -3px;\n  background-repeat: no-repeat;\n  background-size: 100%;\n  width: 56px;\n  height: 56px;\n}\n.gameUi .statusBar .oneMove .icon .text {\n  position: absolute;\n  width: 100%;\n  text-align: center;\n  top: 8px;\n  font-size: 28px;\n  font-weight: bold;\n}\n.gameUi .statusBar .lastMove {\n  display: inline-block;\n  position: relative;\n  top: 0px;\n  padding-left: 7px;\n}\n.gameUi .statusBar .nextPlayer {\n  position: absolute;\n  right: -1px;\n  top: 0px;\n}\n.gameUi .statusBar .nextPlayer .label {\n  right: 2px;\n}\n.gameUi .mainControls {\n  margin-top: 10px;\n}\n.gameUi .mainControls .outputBox {\n  width: 410px;\n  min-width: 200px;\n  font-size: 22px;\n  font-weight: bold;\n  margin-right: 10px;\n  margin-bottom: 10px;\n}\n.gameUi .devDiv {\n  min-width: 600px;\n  border: #755;\n  border-width: 1px 2px 2px 1px;\n  border-style: solid;\n  border-radius: 10px;\n  background-color: #FAEBD7;\n  padding: 7px;\n}\n.gameUi .devDiv .devControls {\n  font-size: 24px;\n}\n.gameUi .devDiv .linkBtn {\n  color: #DF403B;\n  text-decoration: underline;\n}\n.gameUi .devDiv .options {\n  display: inline-block;\n  vertical-align: top;\n  max-width: 252px;\n  margin-right: 5px;\n}\n.gameUi .devDiv .options .moveHistory {\n  display: inline-block;\n  margin-right: 10px;\n}\n.gameUi .devDiv .options .dropDwn {\n  font-size: 24px;\n  margin: 0px 10px 5px 0px;\n}\n.gameUi .devDiv .devLogBox {\n  display: inline-block;\n  height: 102px;\n  width: 460px;\n  font-size: 20px;\n  font-weight: bold;\n}\n.testUi button,\n.gameDiv button {\n  width: auto;\n  min-width: auto;\n  height: 80px;\n  padding: 0 15px;\n  font-size: 23px;\n}\n.testTitle {\n  margin-top: 40px;\n  margin-bottom: 10px;\n  font-size: 20px;\n  font-weight: bold;\n}\n.debugDiv {\n  margin-left: 20px;\n}\n.patternDiv {\n  display: flex;\n}\n.patternDiv .namePatternLabel {\n  position: relative;\n  top: 30px;\n}\n.patternDiv .namePatternInput {\n  flex: 1;\n  min-width: 100px;\n  max-width: 600px;\n}\n.testOutputBox {\n  height: 160px;\n  font-size: 14px;\n}\n.testErrorBox {\n  word-wrap: break-word;\n  height: 250px;\n  font-size: 14px;\n  font-family: \'Courier\';\n}\n.boardDesc {\n  font-family: \'Courier\';\n}\n.newGameBackground {\n  /*	background-image: url("assets/photo.jpg");\n	background-repeat: repeat-y;\n	background-size: cover;\n	width: 1150px;\n	height: 1700px;\n*/\n}\n.newGameDialog {\n  min-width: 800px;\n}\n.newGameDialog .mainDiv {\n  position: relative;\n  background-color: #FFFFEE;\n}\n.newGameDialog .boardDiv {\n  position: relative;\n  left: 195px;\n}\n.newGameDialog .boardDiv .sizeBox {\n  display: inline-block;\n  position: relative;\n  width: 160px;\n  text-align: center;\n  margin: 10px 18px 0 10px;\n}\n.newGameDialog .boardDiv .sizeBox .curSize {\n  position: absolute;\n  top: 105px;\n  left: 2px;\n  width: 100%;\n  text-align: center;\n  color: white;\n  text-shadow: black 3px 3px 5px;\n}\n.newGameDialog .playerButton {\n  position: relative;\n  vertical-align: top;\n  top: 141px;\n  left: 2px;\n  width: 120px;\n  height: 120px;\n}\n.newGameDialog .playerButton .btnIcon {\n  background-image: url("assets/humanBlue.png");\n  -webkit-filter: saturate(0);\n  background-size: 80%;\n}\n.newGameDialog .playerButton.robot .btnIcon {\n  background-size: contain;\n  background-image: url("assets/robotBlue.png");\n}\n.newGameDialog .playerButton.white .btnIcon {\n  -webkit-filter: invert(1) grayscale(1);\n}\n.newGameDialog .sizeButton {\n  position: relative;\n  left: 9px;\n  width: 120px;\n  height: 100px;\n  margin-top: 1px;\n}\n.newGameDialog .sizeButton .btnIcon {\n  background-image: url("assets/upBlue.png");\n  background-size: 80%;\n  -webkit-filter: saturate(0);\n}\n.newGameDialog .sizeButton.down .btnIcon {\n  background-image: url("assets/downBlue.png");\n}\n.newGameDialog .boardImgFrame {\n  display: inline-block;\n  width: 100%;\n  height: 160px;\n  background-color: #d1cac1;\n  border-radius: 5px;\n  box-shadow: black 3px 3px 6px;\n}\n.newGameDialog .boardImgFrame .boardImg {\n  width: 100%;\n  height: 100%;\n  background: url("assets/19x19.png") 50% no-repeat;\n}\n.newGameDialog .advancedButton {\n  width: 248px;\n  height: 100px;\n  margin: 40px 10px 25px;\n  background-color: #faf7f5;\n}\n.newGameDialog .advancedDiv {\n  margin-top: -272px;\n}\n.newGameDialog .rules {\n  display: inline-block;\n  margin-left: 87px;\n}\n.newGameDialog .movesInput {\n  width: 50%;\n}\n.newGameDialog .loadMovesInfo {\n  font-size: 50%;\n  font-style: italic;\n  margin-left: 203px;\n}\n.newGameDialog .defAiInfo {\n  font-size: 50%;\n  font-style: italic;\n  width: 400px;\n  display: inline-block;\n}\n.newGameDialog .startButton {\n  width: 240px;\n  font-size: 48px;\n  position: relative;\n  left: calc(100% - 247px);\n}\n';t("lessify")(r),i.g=r},{lessify:55}],52:[function(t,i,n){"use strict";function r(){this.Rn=this.Sn=0,this.Tn=this.Un=!1,this.target=null,this.Vn=this.startTime=this.Wn=0}function o(t){var i=t.currentTarget;return v.Vn+=t.changedTouches.length,v.Vn>1?v.Xn(i):void v.Yn(t.changedTouches[0],i)}function e(t){return v.Vn-=t.changedTouches.length,v.Vn>0?console.warn("Extra touchend count?",t):void(v.Zn(t.changedTouches[0],v.target)&&t.preventDefault())}function s(t){return t.changedTouches.length>1?v.Xn(v.target):void(v.$n(t.changedTouches[0],v.target)&&t.preventDefault())}function h(t){v.Vn-=t.changedTouches.length,v.Xn(v.target)}function a(t){t.button===d&&v.Yn(t,t.currentTarget)}function u(t){t.button===d&&v.Zn(t,v.target)&&t.preventDefault()}function l(t){v.$n(t,v.target)&&t.preventDefault()}var c=10,f=50,p=300,g=500,d=0,v=i.g=new r;r.prototype._n=function(t,i){if(i)null!==this.target&&console.error("Forgot to stop listening on",this.target),this.Tn=!0,this.target=t,t.addEventListener("touchmove",s),t.addEventListener("touchend",e),t.addEventListener("touchcancel",h),document.addEventListener("mousemove",l),document.addEventListener("mouseup",u);else{if(null===this.target)return console.warn("Not listening anyway");this.Tn=!1,this.target=null,t.removeEventListener("touchmove",s),t.removeEventListener("touchend",e),t.removeEventListener("touchcancel",h),document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",u)}},r.prototype.Yn=function(t,i){this._n(i,!0),this.Tn=!0,this.Rn=t.clientX,this.Sn=t.clientY,this.startTime=Date.now();var n=this;this.ao&&window.clearTimeout(this.ao),this.ao=window.setTimeout(function(){n.ao=null,n.Tn&&!n.Un&&n.bo(t,i)},p)},r.prototype.bo=function(t,i){this.Un=!0,this.startTime=Date.now(),i.co("dragStart",t.pageX-i.offsetLeft,t.pageY-i.offsetTop)},r.prototype.Xn=function(t){return this.Vn=0,this._n(t,!1),this.Un&&(this.Un=!1,t.co("dragCancel")),!0},r.prototype.$n=function(t,i){var n=Date.now();return n-this.Wn<f?!0:(this.Wn=n,this.Un?(i.co("drag",t.pageX-i.offsetLeft,t.pageY-i.offsetTop),!0):Math.abs(t.clientX-this.Rn)+Math.abs(t.clientY-this.Sn)<c?!1:n-this.startTime<p?(this._n(i,!1),!1):this.bo(t,i))},r.prototype.Zn=function(t,i){if(this.Un&&Date.now()-this.startTime<g)return this.Xn(i);var n=this.Un?"dragEnd":"tap";return i.co(n,t.pageX-i.offsetLeft,t.pageY-i.offsetTop),this._n(i,!1),this.Un=!1,!0},r.prototype.ll=function(t,i){t.co=i,t.addEventListener("touchstart",o),t.addEventListener("mousedown",a)}},{}],53:[function(t,i,n){!function(t,i){"use strict";var n=document.getElementsByTagName("script"),r=n[n.length-1].src.split("?")[0],o=r.split("/").slice(0,-1).join("/")+"/",e={version:"2.3.1",B:1,W:-1,"do":!0,eo:o,lang:"en",fo:{ho:{}}};e.opera=-1!=navigator.userAgent.search(/(opera)(?:.*version)?[ \/]([\w.]+)/i),e.io=-1!=navigator.userAgent.search(/(webkit)[ \/]([\w.]+)/i),e.jo=-1!=navigator.userAgent.search(/(msie) ([\w.]+)/i),e.ko=-1!=navigator.userAgent.search(/(mozilla)(?:.*? rv:([\w.]+))?/i)&&!e.io&&!e.jo,e.lo=function(t){var i=e.fo[e.lang][t]||e.fo.ho[t];if(i){for(var n=1;n<arguments.length;n++)i=i.replace("$",arguments[n]);return i}return t},e.mo=function(t,i){return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.no=t,i},e.oo=function(){throw Error("unimplemented abstract method")},e.clone=function(t){if(t&&"object"==typeof t){var i=t.constructor==Array?[]:{};for(var n in t)t[n]==t?i[n]=t:i[n]=e.clone(t[n]);return i}return t},e.po=function(t){return t&&"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t};var s=function(n,r){var r=r||{};for(var o in r)this[o]=r[o];for(var o in e.el["default"])this[o]===i&&(this[o]=e.el["default"][o]);for(var o in s.qo["default"])this.ro[o]===i&&(this.ro[o]=s.qo["default"][o]);this.so=this.section.left,this.to=this.section.top,this.uo=this.size-1-this.section.right,this.vo=this.size-1-this.section.bottom,this.init(),n.appendChild(this.ml),this.wo=t.devicePixelRatio||1,this.width&&this.height?this.xo(this.width,this.height):this.width?this.yo(this.width):this.height&&this.zo(this.height)};s.qo={},s.qo.Ao={shadowColor:"rgba(32,32,32,0.5)",shadowTransparentColor:"rgba(32,32,32,0)",shadowBlur:0,Bo:function(t){return t.Bo},Co:"rgba(255,255,255,0.8)",Do:"rgba(0,0,0,0.8)",Eo:"rgba(0,0,0,0.8)",Fo:function(t){return t.Go?t.hl/7:t.lineWidth},Ho:1,Io:function(t){return"rgba(0,0,0,"+Math.min(1,t.hl/15)+")"},Jo:"#000",Ko:function(t){return t.Ko*(t.width/300+1)},stoneSize:function(t){return t.stoneSize*Math.min(t.yl,t.zl)/2},Lo:"rgba(0,0,0,0.7)",font:function(t){return t.font},linesShift:.5},s.qo["default"]={shadowColor:"rgba(62,32,32,0.5)",shadowTransparentColor:"rgba(62,32,32,0)",shadowBlur:function(t){return.1*t.hl},Bo:1,Co:"rgba(255,255,255,0.9)",Do:"rgba(0,0,0,0.7)",Eo:"rgba(0,0,0,0.7)",Fo:function(t){return t.hl/8},Ho:function(t){return t.hl/15},Io:"#654525",Jo:"#531",Ko:function(t){return t.hl/8+1},stoneSize:function(t){return Math.min(t.yl,t.zl)/2},Lo:"#531",Mo:"rgba(0,32,128,0.8)",font:"calibri",linesShift:.25};var h,a=function(t,i){return"function"==typeof i.ro[t]?i.ro[t](i):i.ro[t]},u={No:function(t,i){var n=i.Oo(t.x),r=i.Po(t.y),o=i.hl;this.beginPath();var e=a("shadowBlur",i),s=Math.max(0,o-.5),h=this.createRadialGradient(n-i.Qo,r-i.Qo,s-1-e,n-i.Qo,r-i.Qo,s+e);h.addColorStop(0,a("shadowColor",i)),h.addColorStop(1,a("shadowTransparentColor",i)),this.fillStyle=h,this.arc(n-i.Qo,r-i.Qo,s+e,0,2*Math.PI,!0),this.fill()},clear:function(t,i){var n=i.Oo(t.x),r=i.Po(t.y),o=i.hl;this.clearRect(n-1.1*o-i.Qo,r-1.1*o-i.Qo,2.2*o,2.2*o)}},l=function(t,i,n){return t.ul[i][n][0].c==e.B?a("markupBlackColor",t):t.ul[i][n][0].c==e.W?a("markupWhiteColor",t):a("markupNoneColor",t)},c=function(t,i,n){return t.ul[i][n][0]&&t.ul[i][n][0].c==e.W||t.ul[i][n][0].c==e.B},f=function(t,i){var n;t[i].clear(),t[i].No(t);for(var r=0;r<t.size;r++)for(var o=0;o<t.size;o++)for(var e=0;e<t.ul[r][o].length;e++){var h=t.ul[r][o][e];n=h.type?"string"==typeof h.type?s.So[h.type]:h.type:t.Ro,n[i]&&n[i].No.call(t[i].getContext(h),h,t)}for(var a=0;a<t.To.length;a++){var h=t.To[a],n=h.Uo;n[i]&&n[i].No.call(t[i].getContext(h.Vo),h.Vo,t)}},p=function(t,i,n,r,o,e,s,h){t.strokeStyle="rgba(64,64,64,0.2)",t.lineWidth=r/30*h,t.beginPath(),r-=Math.max(1,t.lineWidth);var a,u,i,l,c,f=i+r*Math.cos(o*Math.PI),p=n+r*Math.sin(o*Math.PI),g=i+r*Math.cos(e*Math.PI),d=n+r*Math.sin(e*Math.PI);g>f?(a=(d-p)/(g-f),u=Math.atan(a)):g==f?u=Math.PI/2:(a=(d-p)/(g-f),u=Math.atan(a)-Math.PI);var v=s*r;l=Math.sin(u)*v,c=Math.cos(u)*v;var b=f+l,y=p-c,m=g+l,w=d-c;t.moveTo(f,p),t.bezierCurveTo(b,y,m,w,g,d),t.stroke()},g=function(t){for(var i=t.angle,n=t.angle,r=0;r<t.Wo.length;r++)i+=t.Wo[r],n-=t.Wo[r],p(t.Xo,t.x,t.y,t.Yo,i,n,t.Zo,t.$o)};s.So={_o:{vf:{No:function(t,i){var n,r=i.Oo(t.x),o=i.Po(t.y),s=i.hl;t.c==e.W?(n=this.createRadialGradient(r-2*s/5,o-2*s/5,s/3,r-s/5,o-s/5,5*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#aaa")):(n=this.createRadialGradient(r-2*s/5,o-2*s/5,1,r-s/5,o-s/5,4*s/5),n.addColorStop(0,"#666"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(r-i.Qo,o-i.Qo,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill()}},ap:u},bp:{vf:{No:function(t,i){var n,r=i.Oo(t.x),o=i.Po(t.y),s=i.hl;t.c==e.W?(n=this.createRadialGradient(r-2*s/5,o-2*s/5,2,r-s/5,o-s/5,4*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#ddd")):(n=this.createRadialGradient(r-2*s/5,o-2*s/5,1,r-s/5,o-s/5,4*s/5),n.addColorStop(0,"#111"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(r-i.Qo,o-i.Qo,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill(),this.beginPath(),this.lineWidth=s/6,t.c==e.W?(this.strokeStyle="#999",this.arc(r+s/8,o+s/8,s/2,0,Math.PI/2,!1)):(this.strokeStyle="#ccc",this.arc(r-s/8,o-s/8,s/2,Math.PI,1.5*Math.PI)),this.stroke()}},ap:u},cp:{vf:{No:function(t,i){var n,r=i.Oo(t.x),o=i.Po(t.y),s=i.hl;t.c==e.W?(n=this.createRadialGradient(r-2*s/5,o-2*s/5,s/3,r-s/5,o-s/5,8*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#666")):(n=this.createRadialGradient(r-2*s/5,o-2*s/5,1,r-s/5,o-s/5,3*s/5),
n.addColorStop(0,"#555"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(r-i.Qo,o-i.Qo,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill()}},ap:u},dp:{vf:{No:function(t,i){var n,r,o=i.hl;h=h||Math.ceil(9999999*Math.random()),n=i.Oo(t.x),r=i.Po(t.y);var s;if(s=t.c==e.W?"#aaa":"#000",this.beginPath(),this.fillStyle=s,this.arc(n-i.Qo,r-i.Qo,Math.max(0,o-.5),0,2*Math.PI,!0),this.fill(),t.c==e.W){var a=h%(3+t.x*i.size+t.y)%3,u=i.size*i.size+t.x*i.size+t.y,l=2/u*(h%u);g(0==a?{Xo:this,x:n,y:r,Yo:o,angle:l,Wo:[.1,.12,.11,.1,.09,.09,.09,.09],Zo:.25,$o:1.75}:1==a?{Xo:this,x:n,y:r,Yo:o,angle:l,Wo:[.1,.09,.08,.07,.06,.06,.06,.06,.06,.06,.06],Zo:.2,$o:1.5}:{Xo:this,x:n,y:r,Yo:o,angle:l,Wo:[.12,.14,.13,.12,.12,.12],Zo:.3,$o:2}),s=this.createRadialGradient(n-2*o/5,r-2*o/5,o/3,n-o/5,r-o/5,5*o/5),s.addColorStop(0,"rgba(255,255,255,0.9)"),s.addColorStop(1,"rgba(255,255,255,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.Qo,r-i.Qo,Math.max(0,o-.5),0,2*Math.PI,!0),this.fill()}else s=this.createRadialGradient(n+.4*o,r+.4*o,0,n+.5*o,r+.5*o,o),s.addColorStop(0,"rgba(32,32,32,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.Qo,r-i.Qo,Math.max(0,o-.5),0,2*Math.PI,!0),this.fill(),s=this.createRadialGradient(n-.4*o,r-.4*o,0,n-.5*o,r-.5*o,1.5*o),s.addColorStop(0,"rgba(64,64,64,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.Qo,r-i.Qo,Math.max(0,o-.5),0,2*Math.PI,!0),this.fill()}},ap:u},ep:{vf:{No:function(t,i){var n=i.Oo(t.x),r=i.Po(t.y),o=i.hl,s=a("markupLinesWidth",i)||1;t.c==e.W?this.fillStyle="white":this.fillStyle="black",this.beginPath(),this.arc(n,r,Math.max(0,o-s),0,2*Math.PI,!0),this.fill(),this.lineWidth=s,this.strokeStyle="black",this.stroke()}}},CR:{vf:{No:function(t,i){var n=i.Oo(t.x),r=i.Po(t.y),o=i.hl;this.strokeStyle=t.c||l(i,t.x,t.y),this.lineWidth=t.lineWidth||a("markupLinesWidth",i)||1,this.beginPath(),this.arc(n-i.Qo,r-i.Qo,o/2,0,2*Math.PI,!0),this.stroke()}}},LB:{vf:{No:function(t,i){var n=i.Oo(t.x),r=i.Po(t.y),o=i.hl,e=t.scale||1,s=t.font||a("font",i)||"";this.fillStyle=t.c||l(i,t.x,t.y);var h=1;1==t.text.length?h=1.5:2==t.text.length&&(h=1.2),this.font=Math.round(h*o*e)+"px "+s,this.beginPath(),this.textBaseline="middle",this.textAlign="center",this.fillText(t.text,n,r,2*o)}},Ib:{No:function(t,i){if(!c(i,t.x,t.y)&&!t.fp){var n=i.Oo(t.x),r=i.Po(t.y),o=i.hl;this.clearRect(n-o,r-o,2*o,2*o)}},clear:function(t,i){c(i,t.x,t.y)||(t.fp=!0,f(i,"grid"),delete t.fp)}}},gp:{vf:{No:function(t,i){var n=i.Oo(t.x),r=i.Po(t.y),o=Math.round(i.hl);this.strokeStyle=t.c||l(i,t.x,t.y),this.lineWidth=t.lineWidth||a("markupLinesWidth",i)||1,this.beginPath(),this.rect(Math.round(n-o/2)-i.Qo,Math.round(r-o/2)-i.Qo,o,o),this.stroke()}}},Fe:{vf:{No:function(t,i){var n=i.Oo(t.x),r=i.Po(t.y),o=i.hl;this.strokeStyle=t.c||l(i,t.x,t.y),this.lineWidth=t.lineWidth||a("markupLinesWidth",i)||1,this.beginPath(),this.moveTo(n-i.Qo,r-i.Qo-Math.round(o/2)),this.lineTo(Math.round(n-o/2)-i.Qo,Math.round(r+o/3)+i.Qo),this.lineTo(Math.round(n+o/2)+i.Qo,Math.round(r+o/3)+i.Qo),this.closePath(),this.stroke()}}},hp:{vf:{No:function(t,i){var n=i.Oo(t.x),r=i.Po(t.y),o=i.hl;this.strokeStyle=t.c||l(i,t.x,t.y),this.lineCap="round",this.lineWidth=2*(t.lineWidth||a("markupLinesWidth",i)||1)-1,this.beginPath(),this.moveTo(Math.round(n-o/2),Math.round(r-o/2)),this.lineTo(Math.round(n+o/2),Math.round(r+o/2)),this.moveTo(Math.round(n+o/2)-1,Math.round(r-o/2)),this.lineTo(Math.round(n-o/2)-1,Math.round(r+o/2)),this.stroke(),this.lineCap="butt"}}},SL:{vf:{No:function(t,i){var n=i.Oo(t.x),r=i.Po(t.y),o=i.hl;this.fillStyle=t.c||l(i,t.x,t.y),this.beginPath(),this.rect(n-o/2,r-o/2,o,o),this.fill()}}},ip:{vf:{No:function(t,i){var n=i.Oo(t.x),r=i.Po(t.y),o=i.hl;this.strokeStyle=t.c||l(i,t.x,t.y),this.lineWidth=2*(t.lineWidth||a("markupLinesWidth",i)||1),this.beginPath(),this.arc(n-o/3,r-o/3,o/6,0,2*Math.PI,!0),this.stroke(),this.beginPath(),this.arc(n+o/3,r-o/3,o/6,0,2*Math.PI,!0),this.stroke(),this.beginPath(),this.moveTo(n-o/1.5,r),this.bezierCurveTo(n-o/1.5,r+o/2,n+o/1.5,r+o/2,n+o/1.5,r),this.stroke()}}},outline:{vf:{No:function(t,i){t.alpha?this.globalAlpha=t.alpha:this.globalAlpha=.3,t.stoneStyle?s.So[t.stoneStyle].vf.No.call(this,t,i):i.Ro.vf.No.call(this,t,i),this.globalAlpha=1}}},mini:{vf:{No:function(t,i){i.hl=i.hl/2,t.stoneStyle?s.So[t.stoneStyle].vf.No.call(this,t,i):i.Ro.vf.No.call(this,t,i),i.hl=2*i.hl}}}},s.jl={Ib:{No:function(t,i){var n,r,o,e,s,h;this.fillStyle=a("coordinatesColor",i),this.textBaseline="middle",this.textAlign="center",this.font=i.hl*i.coordFontSize+"px "+(i.font||""),o=i.Oo(-.75),e=i.Oo(i.size-.25),s=i.Po(-.75),h=i.Po(i.size-.25);for(var u=0;u<i.size;u++)n=u+"A".charCodeAt(0),n>="I".charCodeAt(0)&&n++,r=i.Po(u),this.fillText(i.size-u,o,r),this.fillText(i.size-u,e,r),r=i.Oo(u),this.fillText(String.fromCharCode(n),r,s),this.fillText(String.fromCharCode(n),r,h);this.fillStyle="black"}}},s.jp=function(){this.ml=document.createElement("canvas"),this.context=this.ml.getContext("2d"),this.wo=t.devicePixelRatio||1,this.wo>1&&this.context.scale(this.wo,this.wo)},s.jp.prototype={constructor:s.jp,xo:function(t,i){this.ml.width=t,this.ml.style.width=t/this.wo+"px",this.ml.height=i,this.ml.style.height=i/this.wo+"px"},kp:function(t,i){this.ml.style.position="absolute",this.ml.style.zIndex=i,t.appendChild(this.ml)},lp:function(t){t.removeChild(this.ml)},getContext:function(){return this.context},No:function(t){},clear:function(){this.context.clearRect(0,0,this.ml.width,this.ml.height)}},s.mp=e.mo(s.jp,function(){this.no.call(this)}),s.mp.prototype.No=function(t){var i;this.context.beginPath(),this.context.lineWidth=a("gridLinesWidth",t),this.context.strokeStyle=a("gridLinesColor",t);var n=Math.round(t.left),r=Math.round(t.top),o=Math.round(t.yl*(t.size-1)),e=Math.round(t.zl*(t.size-1));this.context.strokeRect(n-t.Qo,r-t.Qo,o,e);for(var s=1;s<t.size-1;s++)i=Math.round(t.Oo(s))-t.Qo,this.context.moveTo(i,r),this.context.lineTo(i,r+e),i=Math.round(t.Po(s))-t.Qo,this.context.moveTo(n,i),this.context.lineTo(n+o,i);if(this.context.stroke(),this.context.fillStyle=a("starColor",t),t.np[t.size])for(var h in t.np[t.size])this.context.beginPath(),this.context.arc(t.Oo(t.np[t.size][h].x)-t.Qo,t.Po(t.np[t.size][h].y)-t.Qo,a("starSize",t),0,2*Math.PI,!0),this.context.fill()},s.op=e.mo(s.jp,function(){this.init(4)}),s.op.prototype.init=function(i){var n,r;this.pp=i,this.elements=[],this.qp=[],this.wo=t.devicePixelRatio||1;for(var o=0;i>o;o++)n=document.createElement("canvas"),r=n.getContext("2d"),this.wo>1&&r.scale(this.wo,this.wo),this.elements.push(n),this.qp.push(r)},s.op.prototype.kp=function(t,i){for(var n=0;n<this.pp;n++)this.elements[n].style.position="absolute",this.elements[n].style.zIndex=i,t.appendChild(this.elements[n])},s.op.prototype.lp=function(t){for(var i=0;i<this.pp;i++)t.removeChild(this.elements[i])},s.op.prototype.getContext=function(t){return t.x%2?t.y%2?this.qp[0]:this.qp[1]:t.y%2?this.qp[2]:this.qp[3]},s.op.prototype.clear=function(t,i){for(var n=0;n<this.pp;n++)this.qp[n].clearRect(0,0,this.elements[n].width,this.elements[n].height)},s.op.prototype.xo=function(t,i){for(var n=0;n<this.pp;n++)this.elements[n].width=t,this.elements[n].style.width=t/this.wo+"px",this.elements[n].height=i,this.elements[n].style.height=i/this.wo+"px"},s.rp=e.mo(s.op,function(t,n,r){this.init(2),this.Bo=n===i?1:n,this._k=t}),s.rp.prototype.getContext=function(t){return!(t.x%2&&t.y%2)&&(t.x%2||t.y%2)?this.qp[1]:this.qp[0]},s.rp.prototype.xo=function(t,i){this.no.prototype.xo.call(this,t,i);for(var n=0;n<this.pp;n++)this.qp[n].setTransform(1,0,0,1,Math.round(this.Bo*this._k.hl/7),Math.round(this.Bo*this._k.hl/7))};var d=function(t,i){var n=i.Oo(t.x),r=i.Po(t.y),o=i.hl;this.clearRect(n-2*o-i.Qo,r-2*o-i.Qo,4*o,4*o)},v=function(){return 3*this.width/(4*(this.uo+1-this.so)+2)-this.yl*this.so},b=function(){return 3*this.height/(4*(this.vo+1-this.to)+2)-this.zl*this.to},y=function(){return 4*this.width/(4*(this.uo+1-this.so)+2)},m=function(){return 4*this.height/(4*(this.vo+1-this.to)+2)},w=function(t,i){for(var n,r=0;r<this.ul[t][i].length;r++){var o=this.ul[t][i][r];n=o.type?"string"==typeof o.type?s.So[o.type]:o.type:this.Ro;for(var e in n)n[e].clear?n[e].clear.call(this[e].getContext(o),o,this):d.call(this[e].getContext(o),o,this)}},x=function(t,i){for(var n,r=0;r<this.ul[t][i].length;r++){var o=this.ul[t][i][r];n=o.type?"string"==typeof o.type?s.So[o.type]:o.type:this.Ro;for(var e in n)n[e].No.call(this[e].getContext(o),o,this)}},k=function(t){var i,n;i=t.layerX*this.wo,i-=this.left,i/=this.yl,i=Math.round(i),n=t.layerY*this.wo,n-=this.top,n/=this.zl,n=Math.round(n);var r=t.offsetY*this.wo;return r-=this.top,r/=this.zl,r=Math.round(r),r!==n&&console.error("Using layerY we get",n," BUT using offsetY it would be",r),{x:i>=this.size?-1:i,y:n>=this.size?-1:n}},S=function(){this.ml.style.width=this.width/this.wo+"px",this.ml.style.height=this.height/this.wo+"px",this.hl=a("stoneSize",this),this.Qo=a("linesShift",this);for(var t=0;t<this.pp.length;t++)this.pp[t].xo(this.width,this.height)};s.prototype={constructor:s,init:function(){this.ul=[];for(var t=0;t<this.size;t++){this.ul[t]=[];for(var i=0;i<this.size;i++)this.ul[t][i]=[]}this.To=[],this.pp=[],this.sp=[],this.ml=document.createElement("div"),this.ml.className="wgo-board",this.ml.style.position="relative",this.background&&("#"==this.background[0]?this.ml.style.backgroundColor=this.background:(this.ml.style.backgroundImage="url('"+this.background+"')",this.ml.style.backgroundColor="#c75")),this.Ib=new s.mp,this.ap=new s.rp(this,a("shadowSize",this)),this.vf=new s.op,this.tp(this.Ib,100),this.tp(this.ap,200),this.tp(this.vf,300)},yo:function(t){this.width=t,this.width*=this.wo,this.zl=this.yl=y.call(this),this.left=v.call(this),this.height=(this.vo-this.to+1.5)*this.zl,this.top=b.call(this),S.call(this),this.up()},zo:function(t){this.height=t,this.height*=this.wo,this.yl=this.zl=m.call(this),this.top=b.call(this),this.width=(this.uo-this.so+1.5)*this.yl,this.left=v.call(this),S.call(this),this.up()},xo:function(t,i){this.width=t||parseInt(this.ml.style.width,10),this.width*=this.wo,this.height=i||parseInt(this.ml.style.height,10),this.height*=this.wo,this.yl=y.call(this),this.zl=m.call(this),this.left=v.call(this),this.top=b.call(this),S.call(this),this.up()},vp:function(){return this.section},wp:function(t,i,n,r){"object"==typeof t?this.section=t:this.section={top:t,right:i,bottom:n,left:r},this.so=this.section.left,this.to=this.section.top,this.uo=this.size-1-this.section.right,this.vo=this.size-1-this.section.bottom,this.xo()},xp:function(t){var t=t||19;if(t!=this.size){this.size=t,this.ul=[];for(var i=0;i<this.size;i++){this.ul[i]=[];for(var n=0;n<this.size;n++)this.ul[i][n]=[]}this.uo=this.size-1-this.section.right,this.vo=this.size-1-this.section.bottom,this.xo()}},up:function(){for(var t=0;t<this.pp.length;t++)this.pp[t].clear(this),this.pp[t].No(this);for(var t=0;t<this.size;t++)for(var i=0;i<this.size;i++)x.call(this,t,i);for(var t=0;t<this.To.length;t++){var n=this.To[t],r=n.Uo;for(var o in r)r[o].No.call(this[o].getContext(n.Vo),n.Vo,this)}},Oo:function(t){return this.left+t*this.yl},Po:function(t){return this.top+t*this.zl},tp:function(t,i){t.kp(this.ml,i),t.xo(this.width,this.height),this.pp.push(t)},yp:function(t){var i=this.pp.indexOf(t);i>=0&&(this.pp.splice(i,1),t.lp(this.ml))},update:function(t){var i;if(t.remove&&"all"==t.remove)this.zp();else if(t.remove)for(i=0;i<t.remove.length;i++)this.tl(t.remove[i]);if(t.add)for(i=0;i<t.add.length;i++)this.vl(t.add[i])},vl:function(t){if(t.constructor!=Array){w.call(this,t.x,t.y);for(var i=this.ul[t.x][t.y],n=0;n<i.length;n++)if(i[n].type==t.type)return i[n]=t,void x.call(this,t.x,t.y);t.type?i.push(t):i.unshift(t),x.call(this,t.x,t.y)}else for(var r=0;r<t.length;r++)this.vl(t[r])},tl:function(t){if(t.constructor!=Array){for(var n,r=0;r<this.ul[t.x][t.y].length;r++)if(this.ul[t.x][t.y][r].type==t.type){n=r;break}n!==i&&(w.call(this,t.x,t.y),this.ul[t.x][t.y].splice(n,1),x.call(this,t.x,t.y))}else for(var o=0;o<t.length;o++)this.tl(t[o])},Al:function(t,i){this.ul[t][i].length&&(w.call(this,t,i),this.ul[t][i]=[])},zp:function(){this.ul=[];for(var t=0;t<this.size;t++){this.ul[t]=[];for(var i=0;i<this.size;i++)this.ul[t][i]=[]}this.up()},il:function(t,i){this.To.push({Uo:t,Vo:i}),this.up()},Ap:function(t,i){for(var n=0;n<this.To.length;n++){var r=this.To[n];if(r.Uo==t&&r.Vo==i)return this.To.splice(n,1),this.up(),!0}return!1},addEventListener:function(t,i){var n=this,r={type:t,Bp:i,Cp:function(t){var r=k.call(n,t);i(r.x,r.y,t)}};this.ml.addEventListener(t,r,!0),this.sp.push(r)},removeEventListener:function(t,i){for(var n=0;n<this.sp.length;n++){var r=this.sp[n];if(r.type==t&&r.Bp==i)return this.ml.removeEventListener(r.type,r,!0),this.sp.splice(n,1),!0}return!1},Dp:function(){return{Ep:e.clone(this.ul),Fp:e.clone(this.To)}},Gp:function(t){this.ul=t.Ep||this.ul,this.To=t.Fp||this.To,this.up()}},s["default"]={size:19,width:0,height:0,font:"Calibri",lineWidth:1,Go:!1,np:{19:[{x:3,y:3},{x:9,y:3},{x:15,y:3},{x:3,y:9},{x:9,y:9},{x:15,y:9},{x:3,y:15},{x:9,y:15},{x:15,y:15}],13:[{x:3,y:3},{x:9,y:3},{x:3,y:9},{x:9,y:9}],9:[{x:4,y:4}]},Ro:s.So.dp,Ko:1,Bo:1,stoneSize:1,section:{top:0,right:0,bottom:0,left:0},background:e.eo+"wood1.jpg",ro:{}},e.el=s;var E=function(t){this.size=t||19,this.Hp=[];for(var i=0;i<this.size*this.size;i++)this.Hp[i]=0};E.prototype={constructor:e.Ip,get:function(t,n){return 0>t||0>n||t>=this.size||n>=this.size?i:this.Hp[t*this.size+n]},set:function(t,i,n){return this.Hp[t*this.size+i]=n,this},clear:function(){for(var t=0;t<this.size*this.size;t++)this.Hp[t]=0;return this},clone:function(){var t=new E(this.size);return t.Hp=this.Hp.slice(0),t},Jp:function(t){for(var i=[],n=[],r=0;r<this.size*this.size;r++)this.Hp[r]&&!t.Hp[r]?n.push({x:Math.floor(r/this.size),y:r%this.size}):this.Hp[r]!=t.Hp[r]&&i.push({x:Math.floor(r/this.size),y:r%this.size,c:t.Hp[r]});return{add:i,remove:n}}},e.Ip=E;var j=function(t,n,r,o){this.size=t||19,this.Kp=n===i?"KO":n,this.Lp=r||!1,this.Mp=o||!1,this.stack=[],this.stack[0]=new E(this.size),this.stack[0].Np={$:0,Z:0},this.Op=e.B,Object.defineProperty(this,"position",{get:function(){return this.stack[this.stack.length-1]},set:function(t){this[this.stack.length-1]=t}})},M=function(t,i,n,r,o){n>=0&&n<t.size&&r>=0&&r<t.size&&t.get(n,r)==o&&(t.set(n,r,0),i.push({x:n,y:r}),M(t,i,n,r-1,o),M(t,i,n,r+1,o),M(t,i,n-1,r,o),M(t,i,n+1,r,o))},G=function(t,i,n,r,o){return 0>n||n>=t.size||0>r||r>=t.size?!0:0==t.get(n,r)?!1:1==i.get(n,r)||t.get(n,r)==-o?!0:(i.set(n,r,!0),G(t,i,n,r-1,o)&&G(t,i,n,r+1,o)&&G(t,i,n-1,r,o)&&G(t,i,n+1,r,o))},z=function(t,i,n,r){var o=[];if(i>=0&&i<t.size&&n>=0&&n<t.size&&t.get(i,n)==r){var e=new E(t.size);G(t,e,i,n,r)&&M(t,o,i,n,r)}return o},D=function(t,i,n){var r,o;if("KO"==this.Kp&&this.stack.length-2>=0)o=this.stack.length-2;else{if("ALL"!=this.Kp)return!0;o=0}for(var e=this.stack.length-2;e>=o;e--)if(this.stack[e].get(i,n)==t.get(i,n)){r=!0;for(var s=0;s<this.size*this.size;s++)if(this.stack[e].Hp[s]!=t.Hp[s]){r=!1;break}if(r)return!1}return!0};j.prototype={constructor:j,Pp:function(){return this.stack[this.stack.length-1]},play:function(t,i,n,r){if(!this.Qp(t,i))return 1;if(!this.Lp&&0!=this.position.get(t,i))return 2;n||(n=this.Op);var o=this.position.clone();o.set(t,i,n);var s=n,h=z(o,t-1,i,-n).concat(z(o,t+1,i,-n),z(o,t,i-1,-n),z(o,t,i+1,-n));if(!h.length){var a=new E(this.size);if(G(o,a,t,i,n)){if(!this.Mp)return 3;s=-n,M(o,h,t,i,n)}}return this.Kp&&!D.call(this,o,t,i)?4:r?!1:(o.color=n,o.Np={$:this.position.Np.$,Z:this.position.Np.Z},s==e.B?o.Np.$+=h.length:o.Np.Z+=h.length,this.Rp(o),this.Op=-n,h)},Sp:function(t){this.Rp(),t?(this.position.color=t,this.Op=-t):(this.position.color=this.Op,this.Op=-this.Op)},hd:function(t,i,n){return"number"!=typeof this.play(t,i,n,!0)},Qp:function(t,i){return t>=0&&i>=0&&t<this.size&&i<this.size},Jh:function(t,i,n){return this.Qp(t,i)&&0==this.position.get(t,i)?(this.position.set(t,i,n||0),!0):!1},Tp:function(t,i){return this.Qp(t,i)&&0!=this.position.get(t,i)?(this.position.set(t,i,0),!0):!1},Up:function(t,i,n){return this.Qp(t,i)?(this.position.set(t,i,n||0),!0):!1},Vp:function(t,i){return this.Qp(t,i)?this.position.get(t,i):0},Rp:function(t){if(!t){var t=this.position.clone();t.Np={$:this.position.Np.$,Z:this.position.Np.Z},t.color=this.position.color}return this.stack.push(t),t.color&&(this.Op=-t.color),this},Wp:function(){var t=null;return this.stack.length>0&&(t=this.stack.pop(),0==this.stack.length?this.Op=e.B:this.position.color?this.Op=-this.position.color:this.Op=-this.Op),t},Xp:function(){return this.stack=[],this.stack[0]=new E(this.size),this.stack[0].Np={$:0,Z:0},this.Op=e.B,this},Yp:function(t){return t==e.B?this.position.Np.$:this.position.Np.Z},Zp:function(){for(var t,i,n=0,r=0,o=[],s=this.position.clone(),h=0;h<this.size;h++)for(var a=0;a<this.size;a++)t=this.position.get(h,a),t&&(i=o.length,o=o.concat(z(s,h-1,a,-t),z(s,h+1,a,-t),z(s,h,a-1,-t),z(s,h,a+1,-t)),t==e.B?r+=o-i:n+=o-i);return this.position.Np.$+=r,this.position.Np.Z+=n,this.position.Hp=s.Hp,o}},e.$p=j,t.WGo=e}(window)},{}],54:[function(t,i,n){i.g=function(t,i){var n=i||document;if(n.createStyleSheet){var r=n.createStyleSheet();return r.cssText=t,r.ownerNode}var o=n.getElementsByTagName("head")[0],e=n.createElement("style");return e.type="text/css",e.styleSheet?e.styleSheet.cssText=t:e.appendChild(n.createTextNode(t)),o.appendChild(e),e},i.g._p=function(t){if(document.createStyleSheet)return document.createStyleSheet(t).ownerNode;var i=document.getElementsByTagName("head")[0],n=document.createElement("link");return n.rel="stylesheet",n.href=t,i.appendChild(n),n}},{}],55:[function(t,i,n){i.g=t("cssify")},{cssify:54}],56:[function(t,i,n){i.g={name:"1g0",version:"0.3.0",description:"",aq:"Olivier Lombart (kubicle)",bq:"TBD",scripts:{cq:"browserify js/ui/htmlApp.js -t lessify | uglifyjs -o build/bld.js -m --mangle-props --reserved-file build/reserved.json --reserve-domprops --mangle-regex=\"/^[^.]/\" -c pure_funcs=['log.debug','test.assert']",dq:"watchify js/test/testApp.js -o build/devBuild.js -t lessify -v",test:"node js/test/ciTestApp.js --ci"},eq:"js/ui/htmlApp.js",fq:{type:"git",url:"https://github.com/kubicle/1g0"},gq:{url:"https://github.com/kubicle/1g0/issues"},hq:["baduk","go","igo","weiqi"],iq:{jq:"~0.3.22",kq:"~0.1.1",lq:"~10.2.4",lessify:"~1.0.1",mq:"~3.2.2",nq:"~2.6.2"}}},{}]},{},[50]);