!function t(i,n,e){function r(s,h){if(!n[s]){if(!i[s]){var a="function"==typeof require&&require;if(!h&&a)return a(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={g:{}};i[s][0].call(c.g,function(t){var n=i[s][1][t];return r(n||t)},c,c.g,t,i,n,e)}return n[s].g}for(var o="function"==typeof require&&require,s=0;s<e.length;s++)r(e[s]);return r}({1:[function(t,i,n){"function"==typeof Object.create?i.g=function(t,i){t.h=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,i:!1,j:!0,k:!0}})}:i.g=function(t,i){t.h=i;var n=function(){};n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],2:[function(t,i,n){function e(){c=!1,h.length?u=h.concat(u):l=-1,u.length&&r()}function r(){if(!c){var t=setTimeout(e);c=!0;for(var i=u.length;i;){for(h=u,u=[];++l<i;)h[l].l();l=-1,i=u.length}h=null,c=!1,clearTimeout(t)}}function o(t,i){this.o=t,this.p=i}function s(){}var h,a=i.g={},u=[],c=!1,l=-1;a.m=function(t){var i=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)i[n-1]=arguments[n];u.push(new o(t,i)),1!==u.length||c||setTimeout(r,0)},o.prototype.l=function(){this.o.apply(null,this.p)},a.title="browser",a.q=!0,a.s={},a.t=[],a.version="",a.u={},a.v=s,a.addListener=s,a.A=s,a.C=s,a.removeListener=s,a.D=s,a.F=s,a.G=function(t){throw new Error("process.binding is not supported")},a.H=function(){return"/"},a.I=function(t){throw new Error("process.chdir is not supported")},a.J=function(){return 0}},{}],3:[function(t,i,n){i.g=function(t){return t&&"object"==typeof t&&"function"==typeof t.K&&"function"==typeof t.fill&&"function"==typeof t.L}},{}],4:[function(t,i,n){(function(i,e){function r(t,i){var e={U:[],V:s};return arguments.length>=3&&(e.X=arguments[2]),arguments.length>=4&&(e.Y=arguments[3]),g(i)?e.Z=i:i&&n.$(e,i),x(e.Z)&&(e.Z=!1),x(e.X)&&(e.X=2),x(e.Y)&&(e.Y=!1),x(e._)&&(e._=!0),e.Y&&(e.V=o),a(e,t,e.X)}function o(t,i){var n=r.ba[i];return n?"["+r.Y[n][0]+"m"+t+"["+r.Y[n][1]+"m":t}function s(t,i){return t}function h(t){var i={};return t.forEach(function(t,n){i[t]=!0}),i}function a(t,i,e){if(t._&&i&&M(i.aa)&&i.aa!==n.aa&&(!i.constructor||i.constructor.prototype!==i)){var r=i.aa(e,t);return m(r)||(r=a(t,r,e)),r}var o=u(t,i);if(o)return o;var s=Object.keys(i),g=h(s);if(t.Z&&(s=Object.getOwnPropertyNames(i)),A(i)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(i);if(0===s.length){if(M(i)){var v=i.name?": "+i.name:"";return t.V("[Function"+v+"]","special")}if(k(i))return t.V(RegExp.prototype.toString.call(i),"regexp");if(S(i))return t.V(Date.prototype.toString.call(i),"date");if(A(i))return c(i)}var b="",y=!1,w=["{","}"];if(d(i)&&(y=!0,w=["[","]"]),M(i)){b=" [Function"+(i.name?": "+i.name:"")+"]"}if(k(i)&&(b=" "+RegExp.prototype.toString.call(i)),S(i)&&(b=" "+Date.prototype.toUTCString.call(i)),A(i)&&(b=" "+c(i)),0===s.length&&(!y||0==i.length))return w[0]+b+w[1];if(e<0)return k(i)?t.V(RegExp.prototype.toString.call(i),"regexp"):t.V("[Object]","special");t.U.push(i);var x;return x=y?l(t,i,e,g,s):s.map(function(n){return p(t,i,e,g,n,y)}),t.U.pop(),f(x,b,w)}function u(t,i){if(x(i))return t.V("undefined","undefined");if(m(i)){var n="'"+JSON.stringify(i).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.V(n,"string")}return y(i)?t.V(""+i,"number"):g(i)?t.V(""+i,"boolean"):v(i)?t.V("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,i,n,e,r){for(var o=[],s=0,h=i.length;s<h;++s)T(i,String(s))?o.push(p(t,i,n,e,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(p(t,i,n,e,r,!0))}),o}function p(t,i,n,e,r,o){var s,h,u;if(u=Object.getOwnPropertyDescriptor(i,r)||{value:i[r]},u.get?h=u.set?t.V("[Getter/Setter]","special"):t.V("[Getter]","special"):u.set&&(h=t.V("[Setter]","special")),T(e,r)||(s="["+r+"]"),h||(t.U.indexOf(u.value)<0?(h=v(n)?a(t,u.value,null):a(t,u.value,n-1),h.indexOf("\n")>-1&&(h=o?h.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+h.split("\n").map(function(t){return"   "+t}).join("\n"))):h=t.V("[Circular]","special")),x(s)){if(o&&r.match(/^\d+$/))return h;s=JSON.stringify(""+r),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.V(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.V(s,"string"))}return s+": "+h}function f(t,i,n){var e=0;return t.reduce(function(t,i){return e++,i.indexOf("\n")>=0&&e++,t+i.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===i?"":i+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+i+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function v(t){return null===t}function b(t){return null==t}function y(t){return"number"==typeof t}function m(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function x(t){return void 0===t}function k(t){return j(t)&&"[object RegExp]"===C(t)}function j(t){return"object"==typeof t&&null!==t}function S(t){return j(t)&&"[object Date]"===C(t)}function A(t){return j(t)&&("[object Error]"===C(t)||t instanceof Error)}function M(t){return"function"==typeof t}function z(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function C(t){return Object.prototype.toString.call(t)}function D(t){return t<10?"0"+t.toString(10):t.toString(10)}function E(){var t=new Date,i=[D(t.getHours()),D(t.getMinutes()),D(t.getSeconds())].join(":");return[t.getDate(),q[t.getMonth()],i].join(" ")}function T(t,i){return Object.prototype.hasOwnProperty.call(t,i)}n.format=function(t){if(!m(t)){for(var i=[],n=0;n<arguments.length;n++)i.push(r(arguments[n]));return i.join(" ")}for(var n=1,e=arguments,o=e.length,s=String(t).replace(/%[sdj%]/g,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(e[n++]);case"%d":return Number(e[n++]);case"%j":try{return JSON.stringify(e[n++])}catch(t){return"[Circular]"}default:return t}}),h=e[n];n<o;h=e[++n])v(h)||!j(h)?s+=" "+h:s+=" "+r(h);return s},n.M=function(t,r){function o(){if(!s){if(i.O)throw new Error(r);i.P?console.trace(r):console.error(r),s=!0}return t.apply(this,arguments)}if(x(e.process))return function(){return n.M(t,r).apply(this,arguments)};if(i.N===!0)return t;var s=!1;return o};var G,O={};n.R=function(t){if(x(G)&&(G=i.s.S||""),t=t.toUpperCase(),!O[t])if(new RegExp("\\b"+t+"\\b","i").test(G)){var e=i.T;O[t]=function(){var i=n.format.apply(n,arguments);console.error("%s %d: %s",t,e,i)}}else O[t]=function(){};return O[t]},n.aa=r,r.Y={"bold":[1,22],"italic":[3,23],"underline":[4,24],"inverse":[7,27],"white":[37,39],"grey":[90,39],"black":[30,39],"blue":[34,39],"cyan":[36,39],"green":[32,39],"magenta":[35,39],"red":[31,39],"yellow":[33,39]},r.ba={"special":"cyan","number":"yellow","boolean":"yellow","undefined":"grey","null":"bold","string":"green","date":"magenta","regexp":"red"},n.isArray=d,n.ca=g,n.da=v,n.ea=b,n.fa=y,n.ga=m,n.ha=w,n.ia=x,n.ja=k,n.ka=j,n.la=S,n.ma=A,n.na=M,n.oa=z,n.isBuffer=t("./support/isBuffer");var q=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",E(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n.$=function(t,i){if(!i||!j(i))return t;for(var n=Object.keys(i),e=n.length;e--;)t[n[e]]=i[n[e]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":3,"_process":2,"inherits":1}],5:[function(t,i,n){i.g={"#appTitle":"1g0: let's play go!","#cancelAction":"Cancel","#confirmTitle":"Confirm","#problem":"Problem","#ok":"OK","#yes":"YES","#no":"NO","#cancel":"Cancel","#close":"Close","#none":"-","#play":"Play","#load":"Load","#newGame":"New game","#myGames":"My games","#importGame":"Import games","#exportGame":"Export game","#downloadLatest":"Update from %1","#fromFile":"From file:","#selectFile":"Select file","#recentGames":"Recent games:","#fromText":"From copy/paste:","#fromTextHelp":"Paste game in SGF format, e.g. (;FF[4]...)","#invalidSgf":'Invalid SGF game\n(game starts with "%1...")',"#archivedGames":"Archived games","#deleteGame":"Delete","#deleteGameConfirm":"Do you really want to delete this game?","#archiveGame":"Archive","#archiveGameConfirm":"Do you want to archive this game? (you can restore it later)","#showArchivedGames":"Archived games","#restoreGame":"Restore","#empty":"(empty)","#myGamesHelp":"Any game you create or load/edit will be added to this list","#settings":"Settings","#colorTheme":"Color theme","#setupDropbox":"Setup Dropbox","#review":"Study","#endStudy":"End study","#evalScore":"Evaluate score","#bookmark":"Bookmark","#rewindAll":"Back to game start","#resign":"Resign","#pass":"Pass","#undo":"Undo","#resignConfirm":"Do you really want to resign?","#syncGame":"Sync this game","#syncMyGames":"Sync my games","#syncStart":"Connecting...","#noCloud":"Not connected to cloud","#archivedGame":"[archived %1]","#remote":"[remote %1]","#uploaded":"Uploaded: ","#downloaded":"Downloaded: ","#alreadySync":"Already in sync: ","#synced":"Synced: ","#deleted":"Deleted: ","#archived":"Archived: ","#unarchived":"Unarchived: ","#undeleted":"Undeleted: ","#syncDone":"Sync completed."}},{}],6:[function(t,i,n){i.g={".cafeAuLait":{".menuBtn":{"backgroundColor":"#704f43"},".topTitle":{"backgroundColor":"#5c4137"}},".neonBlack":{"body":{"backgroundColor":"#000"},".btn":{"backgroundColor":"#02192b","color":"#daebef","borderColor":"#5d80c6"},".btn+toggled":{"backgroundColor":"#380966","color":"#cad904"},".menuBtn":{"backgroundColor":"#0e4571"},".topTitle":{"backgroundColor":"#0b3557"},".statusBar":{"backgroundColor":"#c7cced","border":"#07b2ff 1px solid","boxShadow":"3px 3px 20px #537cc6"},".board":{"backgroundColor":"#002"},".mainControls":{"color":"#daebef"},".dialog":{"backgroundColor":"#0d0217","color":"#daebef","boxShadow":"#3fb 3px 3px 20px","border":"solid #b395d7 1px"},".dialogTitle":{"backgroundColor":"#0b3557","color":"#fffaff","textShadow":"#06b1ff 4px 4px 7px","borderColor":"#fff","boxShadow":"#00abff 3px 3px 20px"},".playerBtn":{"backgroundColor":"#5034a9"},".sizeBtn":{"backgroundColor":"#5034a9"},".boardImgFrame":{"backgroundColor":"#09132a","boxShadow":"#3fb 3px 3px 20px"},".curSize":{"textShadow":"#0a9da9 3px 3px 5px"},".gameList":{"border":"1px solid #8ea3da","backgroundColor":"#000"},".oneGame+selected":{"backgroundColor":"#2a4990"},".dropDwn":{"backgroundColor":"#000"},".inputBox":{"backgroundColor":"#000"},".devDiv":{"backgroundColor":"#5a3571","color":"#38cead","border":"1px solid #400ac1"},".devLogBox":{"color":"#000"}},".bottleGreen":{"body":{"backgroundColor":"#000"},".btn":{"backgroundColor":"#022b10","color":"#fff","borderColor":"#5dc677"},".btn+toggled":{"backgroundColor":"#380966","color":"#cad904"},".menuBtn":{"backgroundColor":"#146c43"},".topTitle":{"backgroundColor":"#0b573e"},".statusBar":{"backgroundColor":"#8ca197","border":"#2d8722 1px solid","boxShadow":"3px 3px 20px #537cc6"},".board":{"backgroundColor":"#002600"},".mainControls":{"color":"#eee"},".dialog":{"backgroundColor":"#071903","color":"#eee","boxShadow":"#3ff 2px 2px 15px","border":"solid #000 1px"},".dialogTitle":{"backgroundColor":"#0b573e","color":"#fffaff","textShadow":"#06b1ff 4px 4px 7px","borderColor":"#fff","boxShadow":"#00abff 3px 3px 20px"},".playerBtn":{"backgroundColor":"#107733"},".sizeBtn":{"backgroundColor":"#107733"},".boardImgFrame":{"backgroundColor":"#0c2529","boxShadow":"#3ff 2px 2px 15px"},".curSize":{"textShadow":"#0a9da9 3px 3px 5px"},".gameList":{"border":"1px solid #8ea3da","backgroundColor":"#000"},".oneGame+selected":{"backgroundColor":"#2a4990"},".dropDwn":{"backgroundColor":"#000"},".inputBox":{"backgroundColor":"#000"},".devDiv":{"backgroundColor":"#5a3571","color":"#38cead","border":"1px solid #400ac1"},".devLogBox":{"color":"#000"}}}},{}],7:[function(t,i,n){i.g={"server-url":"https://ig0.herokuapp.com/","dropbox-clientId":"gdap2n66j8rl89n"}},{}],8:[function(t,i,n){i.g={".cgos":{"useAreaScoring":!0,"usePositionalSuperko":!0},".chinese":{"useAreaScoring":!0,"usePositionalSuperko":!0},".japanese":{}}},{}],9:[function(t,i,n){"use strict";function e(t){this.pa=null,this.qa=t,this.ra=null,this.sa={},this.ta=null,this.ua=0}function r(t){return(t.length-t.replace(/;[BW]\[/g,"").length)/3}function o(t){return(t.length-t.replace(/\(;/g,"").length)/2-1}function s(t,i){return 0===i?"":", "+i+" "+t}function h(t){return t||0===t?" "+t:""}function a(t){var i=t.Ka(),n=parseInt(i);return isNaN(n)?n=19:i=i.substr(i.indexOf(" ")+1),String.fromCharCode(90-n)+"|"+i}function u(t,i){return a(t).localeCompare(a(i))}var c=t("./hh/getText"),l=t("./net/goSites"),p=t("./SgfReader");i.g=e;e.prototype.va=function(){var t={};return t["sgf"]=this.qa,t["tagMap"]=this.sa,t["serverStamp"]=this.ta,t["lastChange"]=this.ua,t},e.prototype.wa=function(t){if(this.qa)throw new Error("Game already initialized");return"string"==typeof t&&"("===t[0]?(this.qa=t,!0):!!t["sgf"]&&(this.qa=t["sgf"],this.sa=t["tagMap"]||{},this.ta=t["serverStamp"]||null,this.ua=t["lastChange"]||0,!0)},e.prototype.xa=function(t,i){if(!p.ya(t))return i.push(c("#invalidSgf",t.substr(0,15))),!1;if(this.qa)throw new Error("Game already initialized");return this.qa=t,this.za(i)},e.prototype.za=function(t){var i=new p;return!!i.Aa(this.qa,t)&&(this.ra=i.Ba(),!0)},e.prototype.Ca=function(t,i){var n=new p;if(!n.Aa(t.Da(),i))return null;var e=n.Ba();return this.ra||this.za(i)?(this.ra.Ca(e),!0):null},e.prototype.Ea=function(t,i){var n=this.sa[t];if(n)return n;var e=i,r=this.qa.indexOf(t+"[");if(r>=0){var o=this.qa.substring(r+t.length+1,this.qa.indexOf("]",r));switch(typeof i){case"number":e=parseFloat(o);break;default:e=o}}return void 0!==e&&(this.sa[t]=e),e},e.prototype.Fa=function(t){var i=this.Ea(t,"?");return i.length<=10?i:i.substr(0,9).trim()+"."},e.prototype.Da=function(){return this.qa},e.prototype.Ga=function(t){return t!==this.qa&&(this.qa=t,this.ta=null,this.ua=Date.now(),!0)},e.prototype.Ha=function(t,i){this.ta=t,this.ua=i},e.prototype.Ia=function(){return this.ta},e.prototype.Ja=function(){return this.ua},e.prototype.Ka=function(){var t="",i=this.Ea("SZ",19);return 19!==i&&(t+=i+"x"+i+" "),t+=this.Fa("PW")+"/"+this.Fa("PB"),t+=s("mov.",r(this.qa)),t+=s("var.",o(this.qa))},e.prototype.La=function(){if(this.pa)return this.pa;var t="",i=this.Ea("SZ",19);return 19!==i&&(t+=i+"x"+i+" "),t+=this.Fa("PW")+"-VS-"+this.Fa("PB"),t+=h(this.Ea("DT")),t+=h(this.Ma("PC")),t+=h(this.Ma("SO")),t+=h(this.Ma("EV")),t=t.replace(/[\\\/]/g,"-"),this.pa=t,t},e.prototype.Ma=function(t){var i=this.Ea(t);return i?l.Na(t,i):i},e.Oa=u},{"./SgfReader":24,"./hh/getText":64,"./net/goSites":76}],10:[function(t,i,n){"use strict";function e(){this.Pa()}i.g=e,e.prototype.Pa=function(){this.Qa={}},e.prototype.Ra=function(){this.Pa(),this.Sa("date",(new Date).toISOString().substr(0,10))},e.prototype.Ta=function(t){this.Pa();for(var i in t)this.Qa[i]=t[i]},e.prototype.Ua=function(t){return this.Qa[t]},e.prototype.Sa=function(t,i){this.Qa[t]=i},e.prototype.Va=function(){return this.Qa},e.prototype.Wa=function(t,i,n){this.Sa("boardSize",t),this.Sa("komi",i),this.Sa("rules",n)}},{}],11:[function(t,i,n){"use strict";function e(){this.eb(b),this.fb=null,this.gb()}var r=t("./constants"),o=t("./Goban"),s=t("./HandicapSetter"),h=t("./log"),a=t("./Move"),u=t("../config/rules.json"),c=a.Xa,l=a.Ya,p=a.Za,f=a.$a,d=a._a,g=r.ab,v=r.bb,b=r.cb;i.g=e,e.prototype.gb=function(){this.history=[],this.hb=[],this.ib=null,this.jb=0,this.kb=this.lb=g,this.mb=this.nb=!1,this.ob=this.pb=null},e.prototype.qb=function(t){this.eb(t.rb,!0),this.sb(t.fb.tb,t.ib,t.jb),this.ub(t.lb),this.vb(t.history)},e.prototype.wb=function(){this.fb.clear(),this.history=[],this.kb=this.lb,this.xb()},e.prototype.eb=function(t,i){this.rb=t,t=t||"unspecified";var n=u["."+t.toLowerCase()];if(!n){if(!i)throw new Error("Invalid rules: "+t+"\nValid values: "+Object.keys(u).map(function(t){return t.substr(1)}).join(", "));n=u["."+b.toLowerCase()]}this.usePositionalSuperko=n.usePositionalSuperko||!1,this.useAreaScoring=n.useAreaScoring||!1},e.prototype.yb=function(){return this.rb},e.prototype.sb=function(t,i,n){if(this.gb(),this.fb&&t===this.fb.tb)this.fb.clear();else if(this.fb=new o(t),this.fb.tb!==t)return this.zb("Size could not be set: "+t);return this.fb.Ab(this.usePositionalSuperko),this.jb=void 0!==n?n:i?.5:6.5,i=i||0,!!this.Bb(i)},e.prototype.ub=function(t){this.kb=this.lb=t},e.prototype.Bb=function(t){if(this.history.length>0)throw new Error("Handicap cannot be changed during a game");if(0===t||"0"===t)return this.ib=null,this.ub(g),!0;var i,n,e;if(""+~~t==""+t)for(e=~~t,i=s.Cb(this.fb.tb,e),this.ib=[],n=0;n<i.length;n++)this.ib.push(d(i[n][0],i[n][1]));else e=t.length,this.ib=t;return this.ib.length||(this.ib=null),this.xb(),this.ub(this.ib?v:g),!(e&&(!this.ib||this.ib.length!==e))||this.zb("Handicap could not be set: "+t)},e.prototype.xb=function(){var t=this.ib;if(t)for(var i=0;i<t.length;i++){var n=f(t[i]);this.fb.Db(n[0],n[1],n[2]||g)}},e.prototype.Eb=function(){return this.ib},e.prototype.Fb=function(){return this.ib?this.ib.length:0},e.prototype.Gb=function(t,i){if(h.error&&h.error(t),!i)throw new Error(t);return i.push(t),!1},e.prototype.vb=function(t,i){if(!t||!t.length)return!0;for(var n=0;n<t.length;n++)if(!this.Hb(t[n]))return this.Gb("Failed playing loaded move #"+(n+1)+":\n"+this.Ib().join(", "),i);return!0},e.prototype.Jb=function(t,i){return!t||this.vb(t.split(","),i)},e.prototype.Hb=function(t){if(this.nb&&t.indexOf("undo")<0)return this.zb("Game already ended");if(/^[B|W]?-?[a-z][1-2]?[0-9]$/.test(t))return this.Kb(t);var i=p(t);if(i.startsWith("pass"))return this.Lb();if(i.startsWith("resi"))return this.Mb(l(t));if("undo"===i)return this.Nb();if("half_undo"===i)return this.Nb(!0);if(i.startsWith("hand")){var n=i.substr(i.indexOf(":")+1);return this.Bb(n.split("-"))}return i.startsWith("load:")?this.Jb(i.slice(5)):this.zb("Invalid command: "+i.substr(0,20))},e.prototype.Kb=function(t){var i=f(t);3===i.length&&(this.kb=i[2]);var n=i[0],e=i[1];return this.fb.Ob(n,e,this.kb)?(this.fb.Db(n,e,this.kb),this.Pb(t),this.Qb(),!0):this.zb("Invalid move: "+t)},e.prototype.Mb=function(t,i){t=void 0!==t?t:this.kb,this.ob=t,this.pb=i;var n=c("resign",t)+(i?"-"+i:"");return this.Pb(n),this.Qb(),this.nb=!0,this.mb=!1,!0},e.prototype.Lb=function(){var t=this.history[this.history.length-1];return t&&t.endsWith("pass")&&(this.mb=!0),this.Pb(c("pass",this.kb)),this.Qb(),!0},e.prototype.Rb=function(t,i){return this.mb?(this.mb=!1,t?(this.nb=!0,!0):(i!==this.kb&&(this.history.pop(),this.Qb()),!0)):this.zb("The game is not ending yet")},e.prototype.Sb=function(){return this.history.length},e.prototype.Tb=function(){var t="";this.ib&&(t="handicap:"+this.ib.join("-")+",");var i=this.history;return i[0]=c(p(i[0]),this.lb),t+i.join(",")},e.prototype.zb=function(t){return this.hb.push(t),!1},e.prototype.Ib=function(){var t=this.hb;return this.hb=[],t},e.prototype.Qb=function(){this.kb=1-this.kb},e.prototype.Pb=function(t){return this.history.push(t)},e.prototype.Nb=function(t){var i=t?1:2;if(this.history.length<i)return this.zb("Nothing to undo");this.nb=this.mb=!1;for(var n=i;n>=1;n--){var e=this.history.pop();!e.endsWith("pass")&&e.indexOf("resi")<0&&this.fb.Ub()}return t&&this.Qb(),!0}},{"../config/rules.json":8,"./Goban":16,"./HandicapSetter":19,"./Move":21,"./constants":50,"./log":72}],12:[function(t,i,n){"use strict";function e(t){this.Vb=t,this.Wb=null,this.Xb=!1,this.ra=null,this.Yb=null,this.Zb=this.$b=null,this._b=new r}var r=t("./GameInfo"),o=t("./GameInVault"),s=t("./ReviewTree"),h=t("./SgfReader"),a=t("./SgfWriter");i.g=e,e.prototype.ac=function(){this.Wb=null,this.Xb=!1,this.ra=new s(this.Vb.Eb()),this.Yb=[],this._b.Ra(),this.bc()},e.prototype.cc=function(){return this.Wb||(this.Wb=new o),this.dc(),this.Wb},e.prototype.ec=function(t,i){return!!this.fc(t.Da(),i)&&(this.Wb=t,!0)},e.prototype.bc=function(){var t=this.Vb;this._b.Wa(t.fb.tb,t.jb,t.yb())},e.prototype.gc=function(){return(!this.Yb||this.Yb.join()!==this.Vb.history.join())&&(this.Yb=this.Vb.history.concat(),this.ra.hc(this.Yb),!0)},e.prototype.dc=function(){this.Xb||this.gc();var t=this.Zb=this.Zb||new a,i=t.ic(this._b,this.ra);this.Wb.Ga(i)},e.prototype.jc=function(){return this.Xb=!0,this.gc(),this.ra},e.prototype.kc=function(){this.Xb=!1},e.prototype.fc=function(t,i,n){var e=this.$b=this.$b||new h;return!!e.Aa(t,i,n)&&(this.Vb.sb(e.lc,e.mc(),e.jb),this.Vb.eb(e.Ua("rules"),!0),this._b.Ta(e.nc),this.Wb=null,this.ra=e.Ba(),this.Yb=null,this.Vb.vb(e.oc(),i))},e.prototype.pc=function(t,i){return!!this.Vb.Jb(t,i)&&(this._b.Ra(),this.bc(),!0)}},{"./GameInVault":9,"./GameInfo":10,"./ReviewTree":22,"./SgfReader":24,"./SgfWriter":25}],13:[function(t,i,n){"use strict";function e(t){this.qc=t,this.rc()}var r=t("./GameInVault"),o=t("./GameVaultList"),s=t("./MostRecentlyUsedList");i.g=e,e.prototype.rc=function(){this.sc=new o(this.qc,"myActiveGames"),this.tc=new o(this.qc,"archivedGames"),this.uc=new o(this.qc,"recentGames"),this.vc=new s(this.qc,"mostRecentGames",5),this.sc.wc("myGames")},e.prototype.xc=function(t){return this.sc.yc(t)||null},e.prototype.zc=function(t){var i=this.vc.getItem(t);return this.uc.yc(i)||null},e.prototype.Ac=function(t){this.Bc(t),this.sc.Cc(t)},e.prototype.Dc=function(t){this.sc.Cc(t)},e.prototype.Ec=function(t){return this.sc.yc(t)},e.prototype.Fc=function(){return this.sc.Gc()};e.Hc={Ic:0,ACTIVE:1,Jc:2,Kc:-1},e.prototype.Lc=function(t){return this.sc.yc(t)?1:this.tc.yc(t)?2:this.Mc(t)?-1:0},e.prototype.Nc=function(t){return this.tc.yc(t)},e.prototype.Oc=function(){return this.tc.Gc()},e.prototype.Pc=function(t){return this.sc.Qc(t)},e.prototype.Rc=function(t){return this.tc.Qc(t)},e.prototype.Mc=function(t){return this.sc.Mc(t)||this.tc.Mc(t)},e.prototype.Sc=function(t){return this.sc.Tc(this.tc,t)},e.prototype.Uc=function(t){return this.tc.Tc(this.sc,t)},e.prototype.Vc=function(t){this.tc.Cc(t)},e.prototype.Wc=function(t,i){var n=new r;if(!n.xa(t,i))return null;var e=this.sc.yc(n.La());return e&&!n.Ca(e,i)?null:n},e.prototype.Xc=function(t){this.qc.Yc("interruptedGame",t.va())},e.prototype.Zc=function(){var t=this.qc.$c("interruptedGame");if(!t)return null;var i=new r;return i.wa(t)?(this.qc.Yc("interruptedGame",null),i):(console.error("Invalid serialized game"),null)},e.prototype._c=function(){for(var t=this.vc.ad(),i=[],n=0;n<t.length;n++){var e=this.uc.yc(t[n]);e&&i.push(e.Ka())}return i},e.prototype.Bc=function(t){this.uc.Cc(t);var i=t.La();this.vc.bd(i)&&this.uc.Qc(i)}},{"./GameInVault":9,"./GameVaultList":14,"./MostRecentlyUsedList":20}],14:[function(t,i,n){"use strict";function e(t,i){this.qc=t,this.dd=i,this.ed={},this.fd=null,this.gd={},this.hd()}var r=t("./GameInVault");i.g=e;e.prototype.hd=function(){this.fd=this.qc.$c(this.dd,{}),this.gd=this.qc.$c(this.dd+"~",{});for(var t in this.fd){var i=new r;i.wa(this.fd[t]),this.ed[t]=i}},e.prototype.wc=function(t){for(var i=this.qc.$c(t,[]),n=0;n<i.length;n++){var e=new r(i[n]),o=e.La();this.ed[o]=e,this.fd[o]=e.va()}this.qc.Yc(this.dd,this.fd),this.qc.Yc(t,void 0)},e.prototype.Cc=function(t){var i=t.La();this.ed[i]=t,this.fd[i]=t.va(),this.qc.Yc(this.dd,this.fd),this.gd[i]&&(delete this.gd[i],this.qc.Yc(this.dd+"~",this.gd))},e.prototype.jd=function(t){return!!this.ed[t]&&(delete this.ed[t],delete this.fd[t],this.qc.Yc(this.dd,this.fd),!0)},e.prototype.Qc=function(t){return!!this.jd(t)&&(this.gd[t]=Date.now(),this.qc.Yc(this.dd+"~",this.gd),!0)},e.prototype.Mc=function(t){return this.gd[t]},e.prototype.Gc=function(){var t=[];for(var i in this.ed)t.push(this.ed[i]);return t},e.prototype.yc=function(t){return this.ed[t]},e.prototype.Tc=function(t,i){var n=this.ed[i];return!!n&&(this.jd(i),t.Cc(n),!0)}},{"./GameInVault":9}],15:[function(t,i,n){"use strict";function e(t,i,n){this.kd=t||{},this.ld=i||{},this.name=n||"#"+o++}var r=t("./helper"),o=1;i.g=e;e.prototype.clone=function(t){return new e(r.clone(this.kd),r.clone(this.ld),t)},e.prototype.md=function(t){this.ld=t},e.prototype.toString=function(){var t="{"+this.name+" - ";for(var i in this.kd)t+=i+":"+this.kd[i].toFixed(2)+", ";return t.nd(", ")+"}"},e.prototype.od=function(t){var i=0;for(var n in this.kd){var e=this.kd[n],r=t.kd[n];r<0!=e<0?r<0?(e-=r,r=0):(r-=e,e=0):(e=Math.abs(e),r=Math.abs(r));var o;o=0===r?e>1?1:e:0===e?r>1?1:r:1-(r>=e?e/r:r/e),i+=o}return i},e.prototype.get=function(t,i,n,e){void 0===n&&(n=null),void 0===e&&(e=null);var r=this.kd[t];if(r)return r;if(this.kd[t]=i,(n||e)&&(this.ld[t]=[n,e]),n&&e&&n>e)throw new Error("Limits are invalid: "+n+" > "+e);return i},e.prototype.va=function(){return JSON.stringify(this)},e.pd=function(t){var i=JSON.parse(t);this.kd=i.kd,this.ld=i.ld},e.prototype.qd=function(t,i,n,e,r){var o=this.kd,s=t.kd;i.md(this.ld),n.md(this.ld);var h=i.kd,a=n.kd,u=~~(Math.random()*o.length),c=~~(Math.random()*u),l=0;for(var p in o)l<c||l>u?(h[p]=o[p],a[p]=s[p]):(h[p]=s[p],a[p]=o[p]),Math.random()<e&&(h[p]=this.rd(p,h[p],r)),Math.random()<e&&(a[p]=this.rd(p,a[p],r)),l++},e.prototype.rd=function(t,i,n){var e,r=this.ld[t];if(r){var o=r[0],s=r[1];if(Math.random()<n)e=o+Math.random()*(s-o);else{e=i*(1+2*Math.random()*.05-.05),o&&e<o&&(e=o),s&&e>s&&(e=s)}}else e=i+10*(Math.random()-.5);return e},e.prototype.sd=function(){for(var t in this.kd)this.kd[t]=this.rd(t,this.kd[t],1);return this}},{"./helper":51}],16:[function(t,i,n){"use strict";function e(t){if(void 0===t&&(t=19),t!==~~t||t<3)throw new Error("Invalid goban size: "+t);this.tb=t,this.ud=new o(t,a),this.grid=new o(t,s.td),this.vd=this.grid.wd;var i,n;for(n=t;n>=1;n--)for(i=t;i>=1;i--)this.vd[n][i]=new s(this,i,n,u);for(n=1;n<=t;n++)for(i=1;i<=t;i++)this.vd[n][i].xd();e.yd=new h(this,new s(this,-50,-50,u),-100,0),this.zd=[e.yd],this.Ad=[e.yd],this.Bd=[],this.Cd=0,this.history=[],this.Ab(!1),this.Dd=0}var r=t("./constants"),o=t("./Grid"),s=t("./Stone"),h=t("./Group"),a=(t("./test"),r.td),u=r.EMPTY;i.g=e,e.prototype.clear=function(){for(var t=1;t<=this.tb;t++)for(var i=1;i<=this.tb;i++){var n=this.vd[t][i];n.group&&n.group.clear()}this.zd.shift(),this.Ad.shift(),this.Bd.concat(this.zd),this.Bd.concat(this.Ad),this.zd.length=0,this.Ad.length=0,this.zd.push(e.yd),this.Ad.push(e.yd),this.Cd=0,this.history.length=0,this.Ab(!1),this.Dd=0},e.prototype.Ed=function(t,i){var n=++this.Cd,e=this.Bd.pop();return e?e.Fd(t,i,n):e=new h(this,t,i,n),e},e.prototype.Gd=function(t){t.Hd===this.Cd&&this.Cd--,this.Bd.push(t)},e.prototype.Id=function(){return this.grid.Jd()},e.prototype.Kd=function(t){this.ud.Kd(t);for(var i=this.tb;i>=1;i--)for(var n=1;n<=this.tb;n++){var e=this.ud.wd[i][n];e!==u&&this.Db(n,i,e)}},e.prototype.Ld=function(){for(var t={},i=this.tb;i>=1;i--)for(var n=this.tb;n>=1;n--){var e=this.vd[i][n].group;e&&(t[e.Hd]=e)}return t},e.prototype.Md=function(){for(var t,i="Board:\n"+this.toString()+"\nGroups:\n"+this.grid.Nd(function(t){return t.group?""+t.group.Hd:"."})+"\nStones in groups:\n",n={},e=this.grid.wd,r=0;t=e[r],r<e.length;r++)for(var o,s=t,h=0;o=s[h],h<s.length;h++)o&&o.group&&(n[o.group.Hd]=o.group);for(var a=1;a<=this.Cd;a++)n[a]&&(i+=n[a].Md()+"\n");return i},e.prototype.toString=function(){return this.grid.Nd()},e.prototype.Ob=function(t,i,n){if(t<1||t>this.tb||i<1||i>this.tb)return!1;var e=this.vd[i][t];if(e.color!==u)return!1;if(e.Od(n))return!1;if(this.Pd){if(this.Qd[this.Rd(t,i,n)])return!1}else if(e.Sd(n))return!1;return!0},e.prototype.Td=function(t,i){return this.vd[i][t]},e.prototype.Ud=function(t,i){return this.vd[i][t].color},e.prototype.Vd=function(t,i){return this.vd[i][t].Vd()},e.prototype.Sb=function(){return this.history.length},e.prototype.Db=function(t,i,n){this.Wd(t,i,n);var e=this.vd[i][t];if(e.color!==u)throw new Error("Tried to play on existing stone in "+e);return this.Xd(t,i,n)},e.prototype.Ub=function(){if(!this.history.length)throw new Error("Extra undo");this.history.pop().Yd(),this.Wd()},e.prototype.Xd=function(t,i,n){var e=this.vd[i][t];return e.Od(n),this.history.push(e),this.Dd++,e.Zd(n),e},e.prototype.$d=function(){this.history.pop().Yd()},e.prototype._d=function(){return this.zd[this.zd.length-1]},e.prototype.ae=function(){return this.history[this.history.length-1]},e.prototype.be=function(t){t=t||[0,0];for(var i=this.zd.length-1;i>=0;i--){var n=this.zd[i];t[n.color]+=n.ce.length}return t},e.prototype.Ab=function(t){if(this.history.length>0)throw new Error("Superko rule changed during game");this.Pd=t,t?(this.de=this.ee(),this.fe=[],this.Qd={}):(this.de=null,this.fe=this.Qd=null)},e.prototype.Wd=function(t,i,n){this.Pd?t?(this.fe.push(this.de),this.Qd[this.de]=this.history.length,this.de=this.Rd(t,i,n)):(this.de=this.fe.pop(),this.Qd[this.de]=null):this.de=null},e.prototype.Rd=function(t,i,n){for(var e=this.ge(this.de,t,i,n),r=this.Td(t,i).he(1-n),o=r.length-1;o>=0;o--)if(!(r[o].ie>1))for(var s=r[o].ce,h=s.length-1;h>=0;h--){var a=s[h];e=this.ge(e,a.je,a.ke,u)}return e},e.prototype.le=function(){return this.Pd?this.de:(this.de||(this.de=this.Id()),this.de)};var c="0".charCodeAt();e.prototype.ee=function(){for(var t="",i="",n=this.tb,e=1;e<=n;e++)for(var r=this.vd[e],o=1;o<=n;o++)t+=String.fromCharCode(c+r[o].color+1),4===t.length&&(i+=String.fromCharCode(parseInt(t,3)+33),t="");return t.length&&(t=(t+"000").substr(0,4),i+=String.fromCharCode(parseInt(t,3)+33)),i},e.prototype.ge=function(t,i,n,e){var r,o=(n-1)*this.tb+(i-1),s=~~(o/4),h=o%4;if(e===u){var a=("000"+(t.charCodeAt(s)-33).toString(3)).slice(-4),c=a.substr(0,h)+"0"+a.substr(h+1);r=parseInt(c,3)+33}else r=t.charCodeAt(s)+(1<<e)*Math.pow(3,3-h);return t.substr(0,s)+String.fromCharCode(r)+t.substr(s+1)}},{"./Grid":17,"./Group":18,"./Stone":26,"./constants":50,"./test":77}],17:[function(t,i,n){"use strict";function e(t,i,n){if(void 0===i)throw new Error("Grid init value must be defined");this.tb=t,void 0===n?this.wd=a.ne(t+2,t+2,i):(this.wd=a.ne(t+2,t+2,n),this.init(i))}function r(t){if(t===l)return"(BORDER)";if(t>=e.ve)return String.fromCharCode("A".charCodeAt()+t-e.ve);if(t<e.xe||t>=e.te.length)throw new Error("Invalid color "+t);return t<0&&(t+=e.te.length),e.te[t]}function o(t){return r("number"==typeof t?t:t.color)}function s(t){for(var i="",n=t.length-1;n>=0;n--)i+=t[n];return i}var h=t("./constants"),a=t("./helper"),u=t("./Move"),c=u.me,l=h.td;i.g=e,e.oe="+",e.pe="?",e.qe="@O",e.re="&#",e.se="-:",e.te=e.qe+e.re+e.se+e.pe+e.oe,e.ue=e.pe+e.oe+e.te,e.ve=100,e.we=-1,e.xe=-2,e.ye=2,e.ze=4,e.Ae=[0,0,-1,1,1,-1,-1,1],e.Be="-'?.:",e.prototype.init=function(t){if(void 0===t)throw new Error("Grid init value must be defined");for(var i=this.tb;i>=1;i--)for(var n=this.wd[i],e=this.tb;e>=1;e--)n[e]=t},e.prototype.K=function(t){if(t.tb!==this.tb)throw new Error("Cannot copy between different sized grids");for(var i=this.tb;i>=1;i--)for(var n=this.wd[i],e=t.wd[i],r=this.tb;r>=1;r--)n[r]=e[r];return this},e.prototype.Ce=function(t){var i=t.grid;if(i.tb!==this.tb)throw new Error("Cannot copy between different sized grids");for(var n=this.tb;n>=1;n--)for(var e=this.wd[n],r=i.wd[n],o=this.tb;o>=1;o--)e[o]=r[o].color;return this},e.De=function(t){return e.ue.indexOf(t)+e.xe},e.prototype.Nd=function(t){return this.Ee(!0,"\n",t||o)},e.prototype.Jd=function(t){return this.Ee(!1,",",t||o)},e.prototype.Ee=function(t,i,n){var r,o,s,h=new e(this.tb,"").wd,a=1;for(o=this.tb;o>=1;o--)for(r=1;r<=this.tb;r++)null!==(s=n(this.wd[o][r]))&&(h[o][r]=s,a=Math.max(a,s.length));var u=a,l="          ",p="";for(o=this.tb;o>=1;o--){for(t&&(p+="%2d".format(o)+" "),r=1;r<=this.tb;r++)s=h[o][r],s.length<u&&(s=l.substr(1,u-s.length)+s),p+=s;p+=i}if(t){for(p+="   ",r=1;r<=this.tb;r++)p+=l.substr(1,u-1)+c(r);p+="\n"}return"\n"!==i&&(p=p.Fe()),p},e.prototype.toString=function(){for(var t="",i=this.tb;i>=1;i--){for(var n=1;n<=this.tb;n++)t+=r(this.wd[i][n]);t+="\n"}return t},e.prototype.Id=function(){return"object"==typeof this.wd[1][1]?this.Jd(function(t){return r(t.color)}):this.Jd(function(t){return r(t)})},e.prototype.Kd=function(t){var i=t.split(/\"|,/)
;if(i.length!==this.tb)throw new Error("Invalid image: "+i.length+" rows instead of "+this.tb);for(var n=this.tb;n>=1;n--){var r=i[this.tb-n];if(r.length!==this.tb)throw new Error("Invalid image: row "+r);for(var o=1;o<=this.tb;o++)this.wd[n][o]=e.De(r[o-1])}},e.Ge=function(t){return t.split(",").reverse().join()},e.He=function(t){return t.split(",").map(s).join()},e.Ie=function(t){return s(t)},e.Je=function(t){for(var i="",n=t.split(","),e=n[0].length-1;e>=0;e--){i+=",";for(var r=0;r<n.length;r++)i+=n[r][e]}return i.substr(1)}},{"./Move":21,"./constants":50,"./helper":51}],18:[function(t,i,n){"use strict";function e(t,i,n,e){this.fb=t,this.ce=[i],this.ie=n,this.color=i.color,this.Le=null,this.Me=null,this.Ne=null,this.Hd=e,this.Oe=null,this.Pe=this.Qe=0}var r=t("./constants"),o=t("./log"),s=t("./Move"),h=s.Ke,a=r.EMPTY;i.g=e,e.prototype.Fd=function(t,i,n){this.ce.length=0,this.ce.push(t),this.ie=i,this.color=t.color,this.Le=this.Me=this.Ne=null,this.Hd=n,this.Pe=this.Qe=0},e.prototype.clear=function(){for(var t=this.ce.length-1;t>=0;t--)this.ce[t].clear();this.fb.Gd(this)},e.prototype.toString=function(t){if(0===t)return"#"+this.Hd;if(1===t)return this.ce[0]+" x"+this.ce.length;for(var i,n="{group #"+this.Hd+" of "+this.ce.length+" "+h(this.color)+" stones [",e=this.ce,r=0;i=e[r],r<e.length;r++)n+=i.Re()+",";return n=n.Fe(),n+="], lives:"+this.ie,this.Le&&(n+=" MERGED with #"+this.Le.Hd),this.Ne&&(n+=" KILLED by "+this.Ne.Re()),n+="}"},e.prototype.Se=function(){return this.ce.length&&this.ce[0].group===this},e.prototype.Md=function(){return this.toString()},e.prototype.Te=function(){return this.ce.map(function(t){return t.Re()}).sort().join(",")},e.prototype.Ue=function(){for(var t,i=[],n=this.ce,e=0;t=n[e],e<n.length;e++)for(var r,o=t.Ve,s=0;r=o[s],s<o.length;s++)r.color===a&&i.indexOf(r)<0&&i.push(r);if(i.length!==this.ie)throw new Error("Wrong life count for group");return i},e.prototype.We=function(){for(var t,i=[],n=1-this.color,e=this.ce,r=0;t=e[r],r<e.length;r++)for(var s,h=t.Ve,a=0;s=h[a],a<h.length;a++)s.color===n&&i.indexOf(s.group)<0&&i.push(s.group);return o.Xe&&i.length,i},e.prototype.Ye=function(t){for(var i,n=-1,e=t.Ve,r=0;i=e[r],r<e.length;r++)if(i.color===a){n++;for(var s,h=i.Ve,u=0;s=h[u],u<h.length;u++)if(s.group===this&&s!==t){n--;break}}return o.Xe,n},e.prototype.Ze=function(t){if(o.Xe,this.ce.push(t),this.ie+=this.Ye(t),this.ie<0)throw new Error("Unexpected error (lives<0 on connect)");o.Xe},e.prototype.$e=function(t){if(o.Xe,this.ce.length>1){if(this.ie-=this.Ye(t),this.ie<0)throw new Error("Lives<0 on disconnect")}else this.fb.Gd(this),o.Xe;if(this.ce.pop()!==t)throw new Error("Unexpected error (disconnect order)")},e.prototype._e=function(t){if(--this.ie<=0)return this.af(t)},e.prototype.bf=function(t){if(this.ie--,o.Xe,this.ie<1)throw new Error("Unexpected error (lives<1 on attack by resucitated)")},e.prototype.cf=function(t){this.ie++,o.Xe},e.prototype.df=function(t,i){if(t.Le===this||t===this||this.color!==t.color)throw new Error("Invalid merge");o.Xe,this.ie+=t.ce.length;for(var n,e=t.ce,r=0;n=e[r],r<e.length;r++)n.ef(this),this.Ze(n);t.Le=this,t.Me=i,this.fb.Ad.push(t),o.Xe},e.prototype.ff=function(t){o.Xe;for(var i,n=t.ce,e=n.length-1;i=n[e],e>=0;e--)this.$e(i),i.ef(t);this.ie-=t.ce.length,t.Me=t.Le=null,o.Xe},e.prototype.gf=function(t){for(var i=this.fb.Ad,n=i.length-1;n>=0;n--){var e=i[n];if(e.Me!==t||e.Le!==this)break;this.ff(e),i.pop()}},e.prototype.af=function(t){if(o.Xe,this.ie<0)throw new Error("Unexpected error (lives<0)");for(var i,n=this.ce,e=0;i=n[e],e<n.length;e++){for(var r,s=i.he(1-this.color),h=0;r=s[h],h<s.length;h++)r.cf(i);i.hf()}this.Ne=t,this.fb.zd.push(this),o.Xe},e.prototype.jf=function(){this.Ne=null,this.ie=1;for(var t,i=this.ce,n=0;t=i[n],n<i.length;n++){t.kf(this);for(var e,r=t.he(1-this.color),o=0;e=r[o],o<r.length;o++)e.bf(t)}},e.lf=function(t){for(var i=t.fb.zd,n=i.length-1;n>=0;n--){var e=i[n];if(e.Ne!==t)break;i.pop(),o.Xe,e.jf()}}},{"./Move":21,"./constants":50,"./log":72}],19:[function(t,i,n){"use strict";function e(){}i.g=new e,e.prototype.Cb=function(t,i){if(i>4&&(t<9||t%2==0)&&(i=4),t<=5)return[];for(var n=t<13?2:3,e=1+n,r=(1+t)/2,o=t-n,s=[],h=0;h<i;h++){switch(i%2==1&&i>4&&h===i-1&&(h=8),h){case 0:var a=e,u=e;break;case 1:a=o,u=o;break;case 2:a=e,u=o;break;case 3:a=o,u=e;break;case 4:a=e,u=r;break;case 5:a=o,u=r;break;case 6:a=r,u=e;break;case 7:a=r,u=o;break;case 8:a=r,u=r}s.push([a,u])}return s}},{}],20:[function(t,i,n){"use strict";function e(t,i,n){this.qc=t,this.dd=i,this.mf=n,this.nf=t.$c(i,[])}i.g=e,e.prototype.bd=function(t){var i,n=this.nf.indexOf(t);if(0!==n)return n<0?(this.nf.unshift(t),this.nf.length>this.mf&&(i=this.nf.splice(this.mf))):(this.nf.splice(n,1),this.nf.unshift(t)),this.qc.Yc(this.dd,this.nf),i},e.prototype.getItem=function(t){return this.nf[t]},e.prototype.ad=function(){return this.nf}},{}],21:[function(t,i,n){"use strict";function e(t){switch(t[0]){case"B":return h;case"W":return a;default:return}}function r(t){return"B"!==t[0]&&"W"!==t[0]?t:"-"!==t[1]?t.substr(1):t.substr(2)}function o(t,i){var n=u.indexOf(t[0])+1,e=parseInt(t.substr(1,2));if(!n||isNaN(e)){if(i)return null;throw new Error("Illegal move parsed: "+t)}return[n,e]}var s=t("./constants"),h=s.ab,a=s.bb,u="abcdefghjklmnopqrstuvwxyz",c=["black","white"];n.Ya=e,n.Za=r,n.Xa=function(t,i){return(i===h?"B-":"W-")+t},n.Ke=function(t){return c[t]},n.pf=o,n.$a=function(t){var i=e(t);void 0!==i&&(t=r(t));var n=o(t,!0);if(!n){if("pass"===t||t.startsWith("resi"))return null;throw new Error("Illegal move parsed: "+t)}return void 0!==i?n.concat(i):n},n._a=function(t,i){return u[t-1]+i},n.me=function(t){return u[t-1]}},{"./constants":50}],22:[function(t,i,n){"use strict";function e(t){this.root=new r(null,[]),this.qf=-1,this.rf=this.root,this.sf=-1,this.tf(t)}function r(t,i,n){this.uf=t,this.vf=t?t.vf+t.wf.length:0,this.wf=i,this.nc=n||[],this.children=null,this.xf=null,this.yf=!1}function o(t,i){return a(t)===a(i)}var s=t("./constants"),h=t("./Move"),a=h.Za,u=s.ab,c=s.bb;i.g=e,r.prototype.zf=function(){return[this.wf,this.nc]},r.prototype.Af=function(t){for(var i=0;i<this.children.length;i++)if(o(t,this.children[i].wf[0]))return this.children[i];return null},r.prototype.Bf=function(t){var i=new r(this,[t]);return this.children.push(i),i},r.prototype.Cf=function(){this.children||(this.children=[],this.Bf(""))},r.prototype.Df=function(){this.children.unshift(new r(this,[""]))},r.prototype.Ef=function(){return""===this.wf[0]},r.prototype.Ff=function(){if(!this.children)return null;var t=this.children[0];return t.Ef()?null:t},r.prototype.Gf=function(){if(this.xf)return this.xf;if(!this.children)return null;var t=this.children[0];return t.Ef()&&(t=this.children[1]),t||null},r.prototype.Hf=function(t){var i=this.children;i.splice(i.indexOf(t),1),i.length||(this.children=null),this.xf===t&&(this.xf=null)},r.prototype.If=function(t,i){var n=this.wf.splice(t),e=this.nc.splice(t);if(!n.length)throw new Error("Invalid split at end");var o=new r(this,n,e);o.yf=i,o.xf=this.xf;var s=o.children=this.children;if(s)for(var h=0;h<s.length;h++)s[h].uf=o;this.children=[o]},r.prototype.Jf=function(t,i){var n;if(t===this.wf.length){if(!this.children)throw new Error("Unexpected fork");n=this.Af(i)||this.Bf(i)}else this.If(t,this.yf),n=new r(this,[i]),this.children.push(n);return this.xf=n,n},r.prototype.Kf=function(){for(var t=this;t;)t.yf=!1,t=t.Ff()},r.prototype.Lf=function(){this.yf=!0;var t=this.uf.children;t[0]!==this&&(t.splice(t.indexOf(this),1),t[0].Ef()?t[0]=this:t.unshift(this))},r.prototype.Mf=function(t){t+1!==this.wf.length?(this.If(t+1,!1),this.Df()):this.children&&!this.children[0].Ef()&&this.Df()},e.prototype.tf=function(t){if(t&&!t.length)throw new Error("empty setupMoves array");this.Nf=t,this.lb=t?c:u},e.prototype.mc=function(){return this.Nf},e.prototype.Of=function(){return this.root},e.prototype.Pf=function(){return this.sf<0?null:this.rf.wf[this.sf]},e.prototype.Qf=function(){return this.rf.vf+this.sf},e.prototype.Rf=function(){return this.rf.yf},e.prototype.Sf=function(){return[this.rf,this.sf]},e.prototype.Tf=function(t){this.rf=t[0],this.sf=t[1]},e.prototype.getBookmark=function(){for(var t=this.Qf()+1,i=new Array(t),n=this.Sf(),e=t-1;e>=0;e--)i[e]=this.Pf(),this.Uf();return this.Tf(n),i.join(",")},e.prototype.Vf=function(t){this.Wf();for(var i=t.split(","),n=0;n<i.length;n++)this.Xf(i[n])},e.prototype.Yf=function(t,i){return t===i},e.prototype.Zf=function(t){return t.split(",")},e.prototype.Wf=function(){this.rf=this.root,this.sf=-1},e.prototype.$f=function(){return this.rf.nc[this.sf]},e.prototype._f=function(t){if(t){var i=this.rf.nc[this.sf];i||(i=this.rf.nc[this.sf]={});for(var n in t)i[n]=t[n]}},e.prototype.ag=function(t){return t.vf%2==0?this.lb:1-this.lb},e.prototype.bg=function(t){var i=this.rf;if(++this.sf===i.wf.length){if(!i.children)return i.wf.push(t)}else if(o(t,i.wf[this.sf]))return;this.rf=i.Jf(this.sf,t),this.sf=0},e.prototype.Xf=function(t){var i=this.rf;this.sf===i.wf.length-1&&i.yf&&i.Cf(),this.bg(t)},e.prototype.cg=function(){this.rf.Cf()},e.prototype.Uf=function(){if(this.sf>0)this.sf--;else if(this.rf!==this.root)this.rf=this.rf.uf,this.sf=this.rf.wf.length-1;else{if(this.sf===-1)return!1;this.sf=-1}return!0},e.prototype.dg=function(t){for(;t>0;){if(t<=this.sf)return void(this.sf-=t);t-=this.sf+1,this.sf=0,this.Uf()}},e.prototype.eg=function(t){var i=this.rf;if(this.sf===i.wf.length-1){if(!(i=t?i.Ff():i.Gf()))return null;this.rf=i,this.sf=0}else this.sf++;return this.rf.wf[this.sf]},e.prototype.fg=function(){return this.eg()},e.prototype.gg=function(){return this.eg(!0)},e.prototype.hg=function(){var t=this.rf,i=this.sf,n=this.eg();return this.rf=t,this.sf=i,n},e.prototype.ig=function(){var t=this.rf;if(this.sf<t.wf.length-1)return null;var i=t.children;if(!i)return null;if(1===i.length)return null;var n=[];t.yf||""===i[0].wf[0]||n.push("");for(var e=0;e<i.length;e++)n.push(i[e].wf[0]);return n},e.prototype.hc=function(t){this.root.Kf(),this.qf=t.length,this.root.yf=!0,this.rf=this.root,this.sf=-1;for(var i=this.rf,n=0;n<t.length;n++)this.bg(t[n]),this.rf!==i&&(i=this.rf,i.Lf());i.Mf(this.sf)},e.prototype.jg=function(){for(var t=[],i=this.root;;){i.yf=!0;for(var n=0;n<i.wf.length;n++)t.push(i.wf[n]);if(!i.children)break;i=i.children[0]}return i.Ef()?(t.pop(),this.rf=i.uf,this.rf.Hf(i)):this.rf=i,this.sf=this.rf.wf.length-1,this.qf=t.length,t},e.prototype.kg=function(){return this.qf},e.prototype.lg=function(t){if(this.sf!==this.rf.wf.length-1)return!1;var i=this.rf.Af(t);return!(!i||i.yf)&&(this.rf.Hf(i),!0)},e.prototype.Ca=function(t){var i=this.mg(t);return i!==-1?i:(this.Wf(),t.Wf(),this.ng(t),-1)},e.prototype.mg=function(t){for(var i=this.jg(),n=t.jg(),e=Math.min(i.length,n.length),r=0;r<e;r++)if(i[r]!==n[r])return r;return n.length>e&&this.hc(n),-1},e.prototype.ng=function(t){for(var i,n=0;!(i=t.ig());){var e=t.eg();if(!e)break;n++,this.Xf(e),this._f(t.$f())}if(i)for(var r=0;r<i.length;r++){var o=i[r];this.Xf(o),t.Xf(o),this.ng(t),this.Uf(),t.Uf()}n&&(this.dg(n),t.Uf(n))}},{"./Move":21,"./constants":50}],23:[function(t,i,n){"use strict";function e(t){this.Vb=t,this.og=new s.qg.pg(t)}function r(t){return 0===t?"Tie game":u(t>0?c:l)+" wins by "+o(Math.abs(t))}function o(t){return 1!==t?t+" points":"1 point"}var s=t("./ai"),h=t("./constants"),a=t("./Move"),u=a.Ke,c=h.ab,l=h.bb;i.g=e,e.prototype.rg=function(){var t=this.sg()[0];return t[c]-t[l]},e.prototype.tg=function(){return this.ug(this.sg())},e.prototype.vg=function(){return this.sg()},e.prototype.wg=function(){return this.og.wg()},e.prototype.sg=function(){var t=this.Vb;return null!==t.ob?["resi",1-t.ob,t.pb]:(this.og.xg(t.fb),this.og.yg())},e.prototype.ug=function(t){if("resi"===t[0]){var i,n=u(t[1]),e=u(1-t[1]);switch(t[2]){case"time":i=e+" ran out of time";break;case null:case void 0:i=e+" resigned";break;default:i=e+" disqualified: "+t[2]}return[n+" won ("+i+")"]}if(!t||2!==t.length)throw new Error("Invalid score info: "+t);var s=t[0],h=t[1];if(s.length!==h.length)throw new Error("Invalid score info");var a=[],p=s[c]-s[l];a.push(r(p));for(var f=c;f<=l;f++){var d=h[f],g=d[0],v=d[1],b=d[2],y=0!==v?" "+(v<0?"-":"+")+" "+Math.abs(v)+" prisoners":"",m=b>0?" + "+b+" komi":"",w=v||b?" ("+g+y+m+")":"";a.push(u(f)+": "+o(s[f])+w)}return a}},{"./Move":21,"./ai":49,"./constants":50}],24:[function(t,i,n){"use strict";function e(){b||s(),this.text=null,this.zg=null,this.lc=this.jb=0,this.Nf=this.Yb=this.wf=null,this.Ag=null,this.ra=null,this.nc=null,this.kb=p,this.Bg=!1}function r(t,i,n){g[t]=[i,n],v[n]=t}function o(t,i){b[t]=i}function s(){g={},v={},b={},r("GM","int",null),r("FF","int","fileFormat"),r("SZ","int","boardSize"),r("AB","move",null),r("AW","move",null),r("HA","int","handicap"),r("KM","real","komi"),r("RU","text","rules"),r("RE","text","result"),r("PB","text","playerBlack"),r("PW","text","playerWhite"),r("BS","int","blackSpecies"),r("WS","int","whiteSpecies"),r("LT","flag","enforceLosingOnTime"),r("SO","text","source"),r("ID","text","gameId"),r("AP","text","application"),r("BR","text","blackRank"),r("WR","text","whiteRank"),r("BT","text","blackTeam"),r("WT","text","whiteTeam"),r("TM","text","timeLimit"),r("OT","text","overtimeMethod"),r("EV","text","event"),r("RO","text","round"),r("DT","text","date"),r("PC","text","place"),r("GN","text","gameName"),r("ON","text","openingPlayed"),r("GC","text","gameComment"),r("C","text","comment"),r("N","text","nodeName"),r("US","text","userName"),r("AN","text","analyseAuthor"),r("CP","text","copyright"),r("CA","text","characterSet"),r("ST","text","variationStyle"),o("B","move"),o("W","move"),o("AB","move"),o("AW","move"),o("BL",null),o("WL",null),o("C","text"),o("CR",null),o("BM",null),o("N",null)}function h(t){if(t.Hg("a","z"))return t.charCodeAt()-97;if(t.Hg("A","Z"))return t.charCodeAt()-39;throw new Error("Invalid coordinate value: "+t)}function a(t){for(var i=0;;){var n=t.indexOf("]",i);if(n===-1)return-1;if("\\"!==t[n-1])return n;i=n+1}}var u=t("./constants"),c=t("./log"),l=t("./ReviewTree"),p=u.ab,f=u.bb,d=["B","W"],g=null,v=null,b=null;i.g=e,e.Cg=function(){return b||s(),v},e.ya=function(t){var i=t.trim();return"("===i[0]&&";"===i.substr(1).trim()[0]},e.prototype.Dg=function(t,i){if(!e.ya(t))throw new Error("Not an SGF file");this.Eg(t),this.Fg(),this.Gg(i)},e.prototype.Aa=function(t,i,n){try{return this.Dg(t,n),!0}catch(t){var e="Failed loading SGF moves:\n"+t;if(!i)throw new Error(e);return i.push(e),!1}},e.prototype.mc=function(){return this.Nf},e.prototype.oc=function(){return this.Yb},e.prototype.Ba=function(){return this.ra},e.prototype.Ua=function(t,i){var n=this.nc[t];return void 0!==n?n:i};e.prototype.Ig=function(t){if(this.lc)throw new Error("SZ set twice");this.lc=t},e.prototype.Jg=function(t){if(!this.lc)throw new Error("Move seen before SZ is known");return""===t||"tt"===t&&this.lc<=19?"pass":"abcdefghjklmnopqrstuvwxyz"[h(t[0])]+(this.lc-h(t[1]))},e.prototype.bg=function(t,i,n){if(!this.Bg&&n)t!==this.kb&&(i=d[t]+i),this.kb=t,this.Nf.push(i);else{if(this.Bg){if(t!==this.kb)throw new Error("Bad move color: "+d[t]+i)}else this.Bg=!0,i=d[t]+i;this.kb=1-t,this.wf.push(i)}},e.prototype.Kg=function(t){var i=this.wf.length-1;this.Ag[i]=(this.Ag[i]||"")+t},e.prototype.Lg=function(t,i){switch(i){case"text":return t;case"int":return parseInt(t);case"real":return parseFloat(t);case"flag":return!0;case"move":return this.Jg(t);default:throw new Error("Invalid tag type: "+i)}},e.prototype.Mg=function(t,i){var n=b[t];if(void 0===n)return c.warn&&c.warn("Unknown property "+t+"["+i+"] ignored");if(n){var e=this.Lg(i,n);switch(t){case"B":return this.bg(p,e);case"W":return this.bg(f,e);case"AB":return this.bg(p,e,!0);case"AW":return this.bg(f,e,!0);case"C":return this.Kg(i)}}},e.prototype.Gg=function(t){this.ra=new l,this.Ng(this.zg,1),this.Nf.length||(this.Nf=null),this.ra.tf(this.Nf),this.Yb=this.ra.jg(),void 0!==t&&(this.Yb=this.Yb.slice(0,t))},e.prototype.Ng=function(t,i){for(var n=i;n<t.length;n++){var e=t[n];if("seq"!==e[0]){this.wf=[],this.Ag=[];for(var r=0;r<e.length;r+=2){var o=e[r]||o,s=e[r+1];this.Mg(o,s)}for(var h=0;h<this.wf.length;h++)this.ra.Xf(this.wf[h]),this.Ag[h]&&this.ra._f({Og:this.Ag[h]})}else{if(!e[1].length){this.ra.cg();continue}var a=this.ra.Sf(),u=this.kb;this.Ng(e,1),this.kb=u,this.ra.Tf(a)}}},e.prototype.Pg=function(t,i){var n=g[t];if(void 0===n)return this.nc[t]=i,c.Qg("Unknown property in SGF header: "+t+"["+i+"]");var e=n[0],r=n[1],o=this.Lg(i,e);return r&&(this.nc[r]=o),o},e.prototype.Fg=function(){this.lc=this.jb=0,this.nc={},this.Nf=[],this.kb=p,this.Bg=!1;for(var t=this.zg[0],i=0;i<=t.length-1;i+=2){var n=t[i],e=t[i+1],r=this.Pg(n,e);switch(n){case"GM":if(1!==r)throw new Error("SGF game is not a GO game");break;case"FF":(r<3||r>4)&&c.warn&&c.warn("SGF format "+r+". Not sure we handle it well.");break;case"SZ":this.Ig(r);break;case"KM":this.jb=r;break;case"AB":this.bg(p,r,!0);break;case"AW":this.bg(f,r,!0)}}},e.prototype.Eg=function(t){this.text=t,this.zg=[],t=this.Rg(t),""!==(t=this.Sg(t))&&this.Tg("Trailing text ignored",t)},e.prototype.Sg=function(t){for(t=this.Ug("(",t),t=this.Rg(t);";"===t[0];)t=this.Vg(t);for(;"("===t[0];){var i=this.zg;this.zg=["seq"],t=this.Sg(t),i.push(this.zg),this.zg=i}return t=this.Ug(")",t),t=this.Rg(t)},e.prototype.Vg=function(t){t=this.Ug(";",t);for(var i=[];;){for(var n=0;t[n]&&t[n].Hg("A","Z");)n++;var e=t.substr(0,n);if(""===e)break;for(i.push(e),t=this.Ug(e,t);;){t=this.Ug("[",t);var r=a(t);r<0&&this.Tg("Missing ']'",t);var o=t.substr(0,r);if(i.push(o),t=this.Ug(o+"]",t),"["!==t[0])break;i.push(null)}}return this.zg.push(i),t=this.Rg(t)},e.prototype.Rg=function(t){return t.trim()},e.prototype.Ug=function(t,i){return i.startsWith(t)||this.Tg(t+" expected",i),i.replace(t,"").trim()},e.prototype.Tg=function(t,i){throw new Error("Syntax error: '"+t+"' at ..."+i.substr(0,20)+"...")}},{"./ReviewTree":22,"./constants":50,"./log":72}],25:[function(t,i,n){"use strict";function e(){this.ra=null,this.tb=0,this.Wg="",this.Xg="",l||r()}function r(){l={};for(var t=0;t<p.length;t++){var i=p[t];l[i]=!0}for(t=0;t<f.length;t++)l[f[t]]=!0}function o(t,i){return void 0===i||null===i?"":t+"["+i+"]"}var s=t("./constants"),h=t("./Move"),a=t("./SgfReader"),u=h.$a,c=s.ab,l=null,p=["playerWhite","playerBlack","source","event","place","boardSize","komi","rules","date"],f=["fileFormat","handicap"];i.g=e,e.prototype.Yg=function(t,i){this.tb=t.Ua("boardSize");for(var n=a.Cg(),e=t.Va(),r="",s=0;s<p.length;s++){var h=p[s];r+=o(n[h],e[h])}for(var u in e)l[u]||(r+=o(n[u],e[u]));return r+=this.Zg(i)},e.prototype.Zg=function(t){if(!t)return"";this.Wg="A",this.Xg="B";for(var i=o("HA",t.length),n=0;n<t.length;n++)i+=this.$g(t[n]);return i},e.prototype.$g=function(t){if(""===t)return"";var i,n=this.Wg,e=this.Xg,r=u(t);if(r)void 0!==r[2]&&(e=r[2]===c?"B":"W"),i=String.fromCharCode(96+r[0])+String.fromCharCode(97+this.tb-r[1]);else{if(!t.endsWith("pass"))return null;i=""}return""===n&&(this.Xg="W"===e?"B":"W"),n+e+"["+i+"]"},e.prototype._g=function(t,i){for(var n="",e=0;e<t.length;e++){var r=this.$g(t[e]);if(null===r)break;n+=";"+r,i[e]&&i[e].Og&&(n+="C["+i[e].Og+"]")}return n},e.prototype.ah=function(t){this.Xg=this.ra.ag(t)===c?"B":"W";var i=t.zf(),n=this._g(i[0],i[1]);if(t.children)for(var e=0;e<t.children.length;e++)n+="("+this.ah(t.children[e])+")";return n},e.prototype.ic=function(t,i){this.ra=i;var n="(;FF[4]GM[1]"+this.Yg(t,i.mc());return this.Wg="",(n+=this.ah(i.Of()))+")"}},{"./Move":21,"./SgfReader":24,"./constants":50}],26:[function(t,i,n){"use strict";function e(t,i,n,e){this.fb=t,this.je=i,this.ke=n,this.color=e,this.group=null,this.Ve=[],this.eh=[]}var r=t("./constants"),o=t("./Group"),s=t("./Move"),h=s._a,a=r.EMPTY,u=r.td,c=r.bh,l=r.dh;i.g=e,e.td=new e(null,-1,-1,u);var p=e.fh=[[0,1],[1,0],[0,-1],[-1,0]],f=e.gh=[[1,1],[1,-1],[-1,-1],[-1,1]];e.prototype.clear=function(){this.color=a,this.group=null},e.prototype.xd=function(){for(var t=this.fb.vd,i=l;i>=c;i--){var n=t[this.ke+p[i][1]][this.je+p[i][0]];n.color===a&&this.Ve.push(n),this.eh.push(n),n=t[this.ke+f[i][1]][this.je+f[i][0]],this.eh.push(n)}},e.prototype.toString=function(){return this.color===a?this.Re():(this.color?"W":"B")+"-"+this.Re()},e.prototype.Re=function(){return h(this.je,this.ke)},e.prototype.hh=function(){return this.ih().map(function(t){return t.Re()}).sort().join(",")},e.prototype.Vd=function(){return this.color===a},e.prototype.jh=function(){return 2===this.Ve.length},e.prototype.kh=function(){var t=this.fb,i=t.tb-1;return t.Td(1===this.je?2:i,1===this.ke?2:i)},e.prototype.lh=function(){return this.Ve.length<=3},e.prototype.mh=function(){var t=this.fb.tb,i=this.je,n=this.ke;return Math.min(Math.min(i-1,t-i),Math.min(n-1,t-n))},e.prototype.Od=function(t){for(var i=this.Ve.length-1;i>=0;i--){var n=this.Ve[i];if(n.color===a)return!1;if(n.color!==t){if(1===n.group.ie)return!1}else if(n.group.ie>1)return!1}return!0},e.prototype.Sd=function(t){for(var i=null,n=this.Ve.length-1;n>=0;n--){var e=this.Ve[n].group;if(e&&e.color===1-t&&1===e.ie){if(i)return!1;i=e}}if(!i)return!1;if(1!==i.ce.length)return!1;var r=i.ce[0];if(this.fb.ae()!==r)return!1;var o=this.fb._d();if(!o||o.Ne!==r||1!==o.ce.length)return!1;var s=o.ce[0];return s.je===this.je&&s.ke===this.ke},e.prototype.hf=function(){this.color=a,this.group=null},e.prototype.kf=function(t){this.group=t,this.color=t.color},e.prototype.Zd=function(t){this.color=t;var i=this.he(t);0===i.length?this.group=this.fb.Ed(this,this.nh()):(this.group=i[0],this.group.Ze(this));for(var n=this.he(1-t),e=n.length-1;e>=0;e--)n[e]._e(this);for(var r=1;r<i.length;r++)this.group.df(i[r],this)},e.prototype.Yd=function(){this.group.gf(this),this.group.$e(this);for(var t=this.he(1-this.color),i=t.length-1;i>=0;i--)t[i].cf(this);this.group=null,this.color=a,o.lf(this)},e.prototype.ef=function(t){this.group=t},e.prototype.he=function(t){for(var i=[],n=this.Ve,e=n.length-1;e>=0;e--){var r=n[e];r.color===t&&i.indexOf(r.group)<0&&i.push(r.group)}return i},e.prototype.ih=function(){for(var t=[],i=this.Ve,n=i.length-1;n>=0;n--){var e=i[n];e.color===a&&t.push(e)}return t},e.prototype.nh=function(){for(var t=0,i=this.Ve,n=i.length-1;n>=0;n--)i[n].color===a&&t++;return t},e.prototype.oh=function(t,i){for(var n=0,e=this.Ve,r=e.length-1;r>=0;r--)e[r].color===t&&(i&&i.push(e[r]),n++);return n},e.prototype.ph=function(t){for(var i=this.Ve,n=i.length-1;n>=0;n--)if(i[n].group===t)return!0;return!1}},{"./Group":18,"./Move":21,"./constants":50}],27:[function(t,i,n){"use strict";function e(t){s.call(this,t)}var r=t("../../constants"),o=t("./DiamondZone"),s=t("./Heuristic"),h=t("util").inherits,a=t("../../log"),u=t("../../Move"),c=(t("../../test"),u.Ke),l=r.EMPTY,p=r.td,f=r.qh,d=r.rh,g=r.sh,v=r.th,b=r.uh,y=r.vh,m=r.wh,w=r.xh,x=r.yh,k=r.zh,j=r.Ah,S=r.Bh;h(e,s),i.g=e,e.prototype.Ch=function(t,i,n){var e=this.fb.Td(t,i);if(this.Dh[i][t]<0)return 0;var r,o=1-n;if(this.Eh(e,n)&&this.Eh(e,o)){var s=[];r=[],1!==this.Fh(e,o,s,r)||r.length||this.Hh.Gh(s,e,e,o)}var h=[];switch(r=[],this.Fh(e,n,h,r)){case 0:return this.Ih(e,n,h);case 1:this.Hh.Gh(h,e,e,n);for(var a=r.length-1;a>=0;a--)this.Hh.Gh(h,e,r[a],n);return 0;default:return 0}},e.prototype.Fh=function(t,i,n,e){for(var r=1-i,s=0,h=0,a=0,u=!1,c=0;c<8;c++){var A=c%2,M=t.eh[c];switch(M.color){case p:case l:continue;case i:var z=M.group;A?h++:(s++,1===z.ie&&(u=!0)),n.indexOf(z)<0&&n.push(z);break;default:if(1===M.group.ie)break;A||a++}}if(n.length<2)return-1;if(4===s)return u?1:0;var C=new o(t,i),D=C.Jh;C.normalize();var E,T,G;if(t.lh()){if(t.jh())return 0;if(3===s)return u?1:0;if(2===s){if(u)return 1;if(D[d].color!==i){if(C.Kh("2n","?.?o*o---"),!a)return 0}else{if(C.Kh("2n","?o..*o---"),D[m].color===l)return 0;if(!a)return 0;if(D[v].group.ie<=3)return 0}}else if(1===s){if(C.Kh("1n","B.?.*A---"),!a)return 0;if(D[d].color===l){if(D[v].group.ie<4)return 0;if(G=D[m],G.color===i)return 0;G.color===l&&(e.push(G),e.push(D[d]))}}else{if(C.Kh("02","B.A.*.---"),!a)return 0;if(D[d].color===l)return 0;if(a>1)return-1;if(1===D[y].group.ie||1===D[m].group.ie)return-1}return 1}if(3===s){if(u)return 1;if(!a)return 0;if(C.Kh("3n","?x?o*o?o?"),3===n.length)return 1;if(n.length,D[v].group===D[g].group){if(C.Kh("3n","?x?A*B?A."),D[x].color===l)return 0}else if(D[w].color===l)return 0;return 1}if(2===s){if(D[b].group===D[g].group)return C.Kh("2n","B.?.*A?A?"),a||D[w].color===r&&D[m].color===r?1:0;if(D[d].color===i){if(C.Kh("2n","?B?.*.?A?"),4===h)return 0;if(3===h){if(C.Kh("23",".BB.*.AAA"),!a)return 0;if(1===a){if(D[v].color===r)return 0;if(D[j].color!==r||D[j].group.ie<3)return 0}}else if(2===h)if(D[m].color===i){if(C.Kh("22",".BB.*..AA"),!a)return 0;if(1===a&&D[v].color===r)return 0}else if(D[y].color===i){if(C.Kh("22","BB..*..AA"),a)return 1;if(D[w].color!==r||D[m].color!==r)return 0;e.push(D[v]),e.push(D[b]),D[w].color!==r&&e.push(D[w]),D[m].color!==r&&e.push(D[m])}else{if(C.Kh("22",".B..*.AAA"),a)return 1;if(D[y].color!==r||D[m].color!==r)return 0;e.push(D[v]),e.push(D[b]),D[y].color!==r&&e.push(D[y]),D[m].color!==r&&e.push(D[m])}else{if(1!==h)return C.Kh("20",".B..*..A."),a?1:D[v].lh()||D[b].lh()?0:D[S].lh()&&(T=D[b],0===this.Lh[r][T.ke][T.je])?0:D[j].lh()&&(E=D[v],0===this.Lh[r][E.ke][E.je])?0:(D[v].oh(r)<3&&e.push(D[v]),D[b].oh(r)<3&&e.push(D[b]),1);if(C.Kh("21",".B..*..AA"),!a)return 0}}else if(C.Kh("2n","?.?.*B?A."),3===h){if(C.Kh("23","C.B.*BAA."),2===n.length)return 0;if(D[x].color===l){if(D[j].color!==r||D[k].color!==r)return 0;if(a<2)return 0}else e.push(D[d]),e.push(D[v])}else if(2===h)if(D[x].color===l){if(D[y].color!==i)return C.Kh("22","..B.*BAA "),0;if(C.Kh("22","o...*ooo "),0===a)return 0;if(2===n.length)return D[g].group!==D[b].group?0:D[v].color===l?-1:D[m].color===l?(e.push(D[d]),1):-1;D[v].color===l&&e.push(D[v])}else{if(D[x].color===i){if(C.Kh("22","B...*A.AA"),2===a)return-1;var O=D[m].color===r,q=D[w].color===r;return 0===a?O||q?(e.push(D[d]),e.push(D[v]),1):0:(D[v].color!==l||q?D[d].color!==l||O||e.push(D[b]):e.push(D[v]),1)}if(D[y].color!==i){if(C.Kh("22","..B.*BAAx"),2===a)return 1;if(0===a){if(D[y].color!==l)return 1;e.push(D[y]),e.push(D[d]),e.push(D[v])}return 1}if(C.Kh("22","o...*ooox"),a)return 1;var B=D[j].color,H=D[k].color;if(D[b].group.ie>2&&B!==r)return 0;D[m].color!==l||B===r&&H===r||e.push(D[m]),u||(e.push(D[d]),e.push(D[v]))}else if(1===h){if(D[y].color===i)return C.Kh("21","C...*B.A."),a||(e.push(D[d]),e.push(D[v])),1;if(C.Kh("21","....*BAA."),D[x].color===l)return 0;if(1===D[x].group.ie)return 0;D[d].color===l&&e.push(D[d]),D[v].color===l&&e.push(D[v])}else{if(C.Kh("20","....*B.A."),D[x].color===l)return 0;if(!a){if(1===D[f].mh())return 0;e.push(D[d]),e.push(D[v])}}}else if(1===s)if(4===h){if(0===a)return 0}else if(3===h){if(D[y].color!==i){if(D[b].color===l)return 0}else if(D[b].color===l){if(D[S].color!==r)return 0;if(D[y].group===D[m].group)return 0;0===a?(e.push(D[v]),e.push(D[d]),e.push(D[b])):1===a&&D[v].color===r&&(e.push(D[d]),e.push(D[b]))}}else if(2===h){if(D[y].color===l&&D[b].color===l)return 0}else C.Kh("11","..B.*..A."),a||(e.push(D[b]),D[x].color===l&&(e.push(D[d]),e.push(D[v]),D[S].color!==r&&e.push(D[x])));else if(4===h){if(0===a&&n.length<4)return 0}else{if(3!==h)return D[w].color===i&&D[x].color===i?(C.Kh("02","....*.B.A"),D[g].color===l?-1:D[g].group.ie<=2?1:-1):(C.Kh("02","B...*...A"),1);if(D[b].color===l&&D[x].group===D[w].group||D[g].color===l&&D[x].group===D[m].group)return 0}return 1},e.prototype.Ih=function(t,i,n){if(i!==this.color)return 0;a.debug&&(c(i),n[0],n[1]);var e=this.Oh.Nh.Mh(t);if(e.Ph(t)&&2===n.length){if(this.Oh.Qh)return.5;var r=this.Hh.Rh(n[0].Oe);return r>0&&r<1?.5:0}return e.color!==i?0:this.Oh.Qh?-.5:-1},e.prototype.Sh=function(t,i){return[this.fb.Td(t.je,i.ke),this.fb.Td(i.je,t.ke)]},e.prototype.Th=function(t,i,n){var e=Math.abs(i.je-t.je),r=Math.abs(i.ke-t.ke);if(e+r===1)return 0;var o,s=1-n,h=0;if(1===e&&1===r){var a=this.Sh(t,i),u=a[0],c=a[1];if(u.color===n||c.color===n)return 0;if(u.color===s&&h++,c.color===s&&h++,0===h)return 0;if(2===h)return 99;var l=u.color===s?0:1,p=a[l],f=a[1-l];return t.lh()||i.lh()?1===f.mh()?p.group.ie>2?1:0:0!==f.oh(s)?1:0:1===f.mh()?0!==f.oh(s)?1:0:1}if(e+r===2){if(o=this.fb.Td((t.je+i.je)/2,(t.ke+i.ke)/2),o.color===n)return 0;if(o.color===s)return o.group.ie;for(var d=o.Ve.length-1;d>=0;d--)o.Ve[d].color===s&&h++;return h>=1?1:t.lh()&&i.lh()?0:.5}if(e+r===3&&t.lh()&&i.lh()){for(var g=this.Uh(t,i),v=0,b=g.length-1;b>=0;b--)o=g[b],o.color===s&&(v+=o.group.ie),0!==o.oh(s)&&(v+=1);return v}return e+r},e.prototype.Eh=function(t,i){for(var n=[],e=t.Ve.length-1;e>=0;e--){var r=t.Ve[e];switch(r.color){case l:n.push(r);break;case i:if(r.group.ie>1)return r;break;default:if(1===r.group.ie)return r.group.We()[0].ce[0]}}for(var o=2,s=n.length-1;s>=0;s--)for(var h=n[s],a=h.Ve.length-1;a>=0;a--){var u=h.Ve[a];if(u!==t&&(u.color===i&&0!==this.Hh.Rh(u.group.Oe))){var c=this.Th(t,u,i);if(!(c>=2)&&(o-=2-c)<=.5)return u}}return null}},{"../../Move":21,"../../constants":50,"../../log":72,"../../test":77,"./DiamondZone":28,"./Heuristic":31,"util":4}],28:[function(t,i,n){"use strict";function e(t,i){this.color=i,this.Jh=new Array(13);var n=t.je,e=t.ke,r=t.fb.vd,o=t.fb.tb,s=this.Jh,h=a.td;s[l]=t,s[p]=r[e+1][n],s[v]=r[e+1][n-1],s[b]=r[e+1][n+1],s[f]=r[e-1][n],s[y]=r[e-1][n-1],s[m]=r[e-1][n+1],s[d]=r[e][n-1],s[g]=r[e][n+1],s[k]=n>2?r[e][n-2]:h,s[j]=n<o-1?r[e][n+2]:h,s[x]=e>2?r[e-2][n]:h,s[w]=e<o-1?r[e+2][n]:h}function r(t){return t===u?A:S[t+1]}function o(t,i){for(var n="",e=0;e<i.length;e++){var o=i[e];n+="string"==typeof o?o:r(t[o].color)}return n}var s=t("../../constants"),h=t("../../Grid"),a=t("../../Stone"),u=s.td,c=s.EMPTY,l=s.qh,p=s.rh,f=s.sh,d=s.th,g=s.uh,v=s.vh,b=s.wh,y=s.xh,m=s.yh,w=s.zh,x=s.Vh,k=s.Ah,j=s.Bh;i.g=e;var S=h.oe+h.qe,A="|";e.prototype.toString=function(){var t=this.Jh;return o(t,[" "," ",w," "," "])+"\n"+o(t,[" ",v,p,b," "])+"\n"+o(t,[k,d,"*",g,j])+"\n"+o(t,[" ",y,f,m," "])+"\n"+o(t,[" "," ",x," "," "])+"\n"},e.prototype.Wh=function(){var t,i=this.Jh;t=i[p],i[p]=i[f],i[f]=t,t=i[w],i[w]=i[x],i[x]=t,t=i[v],i[v]=i[y],i[y]=t,t=i[b],i[b]=i[m],i[m]=t},e.prototype.Xh=function(){var t,i=this.Jh;t=i[d],i[d]=i[g],i[g]=t,t=i[k],i[k]=i[j],i[j]=t,t=i[v],i[v]=i[b],i[b]=t,t=i[y],i[y]=i[m],i[m]=t},e.prototype.Yh=function(){var t,i=this.Jh;t=i[d],i[d]=i[f],i[f]=i[g],i[g]=i[p],i[p]=t,t=i[k],i[k]=i[x],i[x]=i[j],i[j]=i[w],i[w]=t,t=i[v],i[v]=i[y],i[y]=i[m],i[m]=i[b],i[b]=t},e.prototype.Zh=function(){var t,i=this.Jh;t=i[d],i[d]=i[p],i[p]=i[g],i[g]=i[f],i[f]=t,t=i[k],i[k]=i[w],i[w]=i[j],i[j]=i[x],i[x]=t,t=i[v],i[v]=i[b],i[b]=i[m],i[m]=i[y],i[y]=t},e.prototype.normalize=function(){var t,i=this.color,n=this.Jh;if(n[l].lh()){n[p].color===u?this.Wh():n[d].color===u?this.Zh():n[g].color===u&&this.Yh();var e=n[d].color===i,r=n[g].color===i;return void(e&&!r?this.Xh():e===r&&n[v].color===i&&n[b].color!==i&&this.Xh())}var o=!1,s=!0,h=!0,a=n[p].color===i?1:0,c=n[f].color===i?1:0,w=n[d].color===i?1:0,x=n[g].color===i?1:0;a>c?(this.Wh(),w>x&&this.Xh(),w!==x&&(o=!0)):a<c?(w>x&&this.Xh(),w!==x&&(o=!0)):c?w>x?this.Zh():x>w?this.Yh():(s=!1,w&&(h=!1)):w>x?this.Zh():x>w?this.Yh():(w?this.Zh():h=!1,s=!1);var k=n[b].color===i?1:0,j=n[y].color===i?1:0;if(s&&o)n[p].color!==i&&n[d].color!==i&&k&&!j&&(this.Yh(),this.Xh());else{var S=n[v].color===i?1:0,A=n[m].color===i?1:0;s||(S+k>j+A?(this.Wh(),t=S,S=j,j=t,t=k,k=A,A=t):o||(o=!0,!h&&S<k&&j<A?this.Yh():!h&&S>k&&j>A?this.Zh():o=!1)),!o&&(j>A||j===A&&S>k)&&this.Xh()}};var M=[v,p,b,d,l,g,y,f,m],z=["TL","TOP","TR","LEFT","CENTER","RIGHT","BL","BOTTOM","BR"];e.prototype.Kh=function(t,i){for(var n=this.Jh,e=this.color,r=1-e,o={},s=0,h=0,a=0;a<M.length;a++){var l=n[M[a]],p=i[a],f=l.color;switch(f===e&&(a%2?s++:h++),p){case"o":if(f===e)continue;break;case"A":case"B":case"C":case"D":if(f!==e)break;var d=o[p];if(d){if(d!==l.group)break}else o[p]=l.group;continue;case"*":case" ":if(f===c)continue;break;case".":if(f!==e)continue;break;case"x":if(f===r)continue;break;case"?":continue;case"-":if(f===u)continue}return p+"!="+f+" in "+z[a]+"\n"+this}
var g=parseInt(t[0]),v=parseInt(t[1]);return s!==g?"numDirects="+s:!(!isNaN(v)&&h!==v)||"numDiags="+h}},{"../../Grid":17,"../../Stone":26,"../../constants":50}],29:[function(t,i,n){"use strict";function e(t){r.call(this,t)}var r=t("./Heuristic");(0,t("util").inherits)(e,r),i.g=e,e.prototype.$h=function(){this.Oh.Nh._h()}},{"./Heuristic":31,"util":4}],30:[function(t,i,n){"use strict";function e(t){s.call(this,t),this.grid=new o(this.tb,a),this.ai=t.ci.bi}var r=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,a=r.td;h(e,s),i.g=e,e.prototype.$h=function(){var t=this.fb;this.Oh.Nh.di(t,this.grid),this.ei()},e.prototype.ei=function(){var t=this.Oh.Nh.fi;for(var i in t)for(var n=~~i,e=t[n],r=e.group.color,o=e.gi.length-1;o>=0;o--){var s=e.gi[o];s.Ph&&this.ai.hi(s.ii,r)}}},{"../../Grid":17,"../../constants":50,"./Heuristic":31,"util":4}],31:[function(t,i,n){"use strict";function e(t){this.Oh=t,this.li(),this.fb=t.fb,this.tb=t.fb.tb,this.mi=new o(this.tb,0,a),this.ni=t.ni,this.color=this.oi=null,this.pi()}var r=t("../../constants"),o=t("../../Grid"),s=t("../../log"),h=t("../../helper"),a=r.td,u=r.ji,c=r.ki;i.g=e,e.prototype.li=function(){var t=this.constructor;this.name=t.name||h.qi(t),this.name.length<5&&(this.name+=this.Oh.ri.length)},e.prototype.pi=function(){var t=this.Oh.ci;this.si=t.ti,this.Hh=t.bi,this.Dh=t.ui?t.ui.mi.wd:null,this.vi=t.wi,this.xi=t.yi,this.Lh=t.zi?t.zi.Lh:null},e.prototype.Ai=function(t){this.color=t,this.oi=1-t},e.prototype.$h=function(t,i){for(var n=s.level,e=this.Oh.color,r=this.mi.wd,o=1;o<=this.tb;o++)for(var h=1;h<=this.tb;h++){var a=t[o][h];if(!(a<u)){a===c&&this.name===this.Oh.Bi&&s.Ci(s.Di);var l=r[o][h]=this.Ch(h,o,e);i[o][h]+=l,a===c&&s.Ci(n)}}},e.prototype.Ei=function(t,i,n){var e=this.mi.wd[i][t];e&&(n[this.name]=e)},e.prototype.Fi=function(t,i,n,e){return this.Oh.Gi.get(this.name+"-"+t,i,n,e)}},{"../../Grid":17,"../../constants":50,"../../helper":51,"../../log":72}],32:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.Hi=null}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),a=t("../../Move"),u=(t("../../test"),a.Ke),c=a._a,l=r.EMPTY;s(e,o),i.g=e,e.prototype.Ii=function(t,i){for(var n=t.We(),e=n.length-1;e>=0;e--){var r=n[e];if(!(r.ie>1)){var o=r.ce.length;if(o>=i)return!0;for(var s=r.We(),h=s.length-1;h>=0;h--)if((o+=s[h].ie-1)>=i)return!0}}return!1},e.prototype.Ji=function(t,i){for(var n=0,e=0,r=0,o=t.Ve.length-1;o>=0;o--){var s=t.Ve[o];switch(s.color){case l:r++;break;case i:r+=s.group.ie-1,n++;break;default:1===s.group.ie&&(e+=s.group.ce.length)}}switch(e){case 0:return!(r<=1);case 1:return!!r||!n;default:return!0}},e.prototype.Ki=function(t,i,n,e){for(var r=!1,o=!1,s=1-i[0].color,h=i.length-1;h>=0;h--){var a=i[h];1===a.ie&&(o=!0,(!n||1===n&&e)&&this.Hh.Li(t,s),n||(!this.Mi(a,n)||this.Ii(a,1)?this.Hh.Ni(a,t):this.Oh.Qh&&(r=!0)))}return r&&this.Hh.Oi(t),o},e.prototype.Pi=function(t,i,n){if(!i.ph(n))return!1;for(var e=i.he(n.color),r=e.length-1;r>=0;r--){var o=e[r];if(o.ie>2)return!1;if(!t.ph(o))return!1}return!0},e.prototype.Qi=function(t,i,n,e,r,o){for(var s,a=!1,c=t.he(e),l=i.length-1;l>=0;l--)if(s=i[l],2===s.ie&&!this.Ii(s,2)&&(0!==n.length||1!==c.length||2!==c[0].ie)){if(1===n.length&&0===c.length){if(!this.Pi(t,n[0],s))continue;a=!0,h.debug&&u(e)}r||!s.Oe.Ri()?o.push(s):h.debug&&u(e)}return a},e.prototype.Si=function(t,i,n){return!(!n||i.ie!==n.ie)&&(!!n.Se()&&!(t.ph(n)&&n.Ye(t)<1))},e.prototype.Ti=function(t,i,n,e){for(var r=!1,o=i.length-1;o>=0;o--){var s=i[o],h=s.ie;h>2&&this.Si(t,s,null)?(n||this.Hh.Ui(s,t),r=!0):h>=2&&0===n&&!e&&(n||this.Hh.Vi(s,t))}return r},e.prototype.Wi=function(){this.Hi=[]},e.prototype.Ch=function(t,i,n){return this.Xi(t,i,n,0),0},e.prototype.Xi=function(t,i,n,e,r){var o=this.fb.Td(t,i),s=o.he(1-n);if(!s.length)return!1;var a=o.ih(),l=this.Ki(o,s,e,r),p=[],f=this.Qi(o,s,a,n,e,p),d=!1;if(0===e&&(f&&!l?(this.Hi.push(o),this.Dh[i][t]+=2,this.Dh[i][t]):this.Dh[i][t]<-2&&(d=!0,this.Dh[i][t]-=1e3,h.debug)),!f&&a.length<=1&&!this.Ji(o,n))return!1;var g=this.Ti(o,s,e,d);if(!p.length)return l||g;this.fb.Xd(t,i,n);for(var v=[!1,!1,!1],b=p.length-1;b>=0;b--)if(h.debug&&(u(n),p[b]),!this.Mi(p[b],e)){if(1===p.length){p.pop();break}v[b]=!0}this.fb.$d();var y=this.Yi(o,p,v,e);return h.debug&&(l||g||y)&&(u(n),c(t,i)),l||g||y},e.prototype.Yi=function(t,i,n,e){switch(i.length){case 0:return!1;case 1:return!n[0]&&(e||this.Hh.Ni(i[0],t),!0);case 3:case 2:return e||(n[1]?this.Hh.Ni(i[0],t):this.Hh.Ni(i[1],t)),!0;default:throw new Error("Unexpected in Hunter#getMultipleChaseThreat")}},e.prototype.Mi=function(t,i){var n=t.Ue();if(1!==n.length)throw new Error("Unexpected: hunter #1: "+n.length);var e=n[0],r=t.color,o=!0;return this.Ji(e,r)&&(this.fb.Xd(e.je,e.ke,r),o=this.Zi(e,i),this.fb.$d()),h.debug,o},e.prototype.$i=function(t){for(var i=1-t.color,n=t.Ve,e=n.length-1;e>=0;e--){var r=n[e];if(r.color===i){var o=r.group;if(1===o.ie){return o.Ue()[0].ph(t.group)?this.Mi(o,1)?1:-1:1}}}return 0},e.prototype.Zi=function(t,i){var n=t.group;if(n.ie<=1)return!0;if(n.ie>2)return!1;var e=this.$i(t);if(0!==e)return e<0;var r=t.ih();if(2!==r.length&&(r=n.Ue()),2!==r.length)throw new Error("Unexpected: hunter #2");var o=r[0],s=r[1];h.debug;var a=1-n.color;return this.Xi(o.je,o.ke,a,i+1)||this.Xi(s.je,s.ke,a,i+1)},e.prototype._i=function(t){return this.Zi(t,1)},e.prototype.aj=function(t,i,n){return this.Xi(t,i,n,1,n===this.oi)}},{"../../Move":21,"../../constants":50,"../../log":72,"../../test":77,"./Heuristic":31,"util":4}],33:[function(t,i,n){"use strict";function e(t){s.call(this,t),this.bj=[new o(this.tb,a),new o(this.tb,a)],this.Lh=[this.bj[c].wd,this.bj[l].wd]}var r=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,a=r.td,u=r.EMPTY,c=r.ab,l=r.bb;h(e,s),i.g=e,e.prototype.$h=function(){this.bj[c].init(0),this.bj[l].init(0);for(var t=1;t<=this.tb;t++)for(var i=1;i<=this.tb;i++){var n=this.fb.Td(i,t),e=n.color;if(e!==u)for(var r,o=this.Lh[e],s=n.Ve,h=0;r=s[h],h<s.length;h++)if(o[r.ke][r.je]+=2,r.color===u)for(var a,p=r.Ve,f=0;a=p[f],f<p.length;f++)a!==n&&(o[a.ke][a.je]+=1)}}},{"../../Grid":17,"../../constants":50,"./Heuristic":31,"util":4}],34:[function(t,i,n){"use strict";function e(t){a.call(this,t),this.debug=!1,this.grid=new s(this.tb,null),this.cj=[],this.dj="",this.ej=this.Fi("spaceInvasion",2,.01,4),this.fj=this.Fi("pressure",1,.01,2)}function r(){this.jj=null,this.kj=[!1,!1],this.lj=0,this.mj=[],this.nj=[],this.oj=[]}function o(t,i,n){this.name=t,this.lj=i,this.group=n,this.sj=1/0}var s=t("../../Grid"),h=t("./boan/GroupInfo"),a=t("./Heuristic"),u=t("util").inherits,c=t("../../log"),l=t("../../Move"),p=(t("../../test"),l.Ke);u(e,a),i.g=e,e.prototype.$h=function(){this.debug=this.Oh.gj,this.grid.init(null),this.cj.length=0},e.prototype.hj=function(t,i){a.prototype.$h.call(this,t,i)},e.prototype.Ch=function(t,i){var n=this.grid.wd[i][t];return n?n.ij():0},e.prototype.Ei=function(t,i,n){var e=this.grid.wd[i][t];e&&e.ij(n,this.name)},r.prototype.ij=function(t,i){var n=this.lj;t&&n&&(t[i+"-base"]=n);var e=this.mj;if(!e.length)return n;for(var r=e.length-1;r>=0;r--){var o=e[r],s=o.lj*this.nj[r];if(n+=s,t){var h=this.nj[r];t[i+"-"+o+(1!==h?" factor:"+h.toFixed(2):"")]=s}}return n},e.prototype.pj=function(t,i){return this.grid.wd[i][t]},e.prototype.qj=function(t,i){var n=this.grid.wd[i][t];return n||(this.grid.wd[i][t]=n=new r,n)},e.prototype.hi=function(t,i){c.debug&&p(i),this.qj(t.je,t.ke).jj=i},e.prototype.rj=function(t,i){var n=this.pj(t.je,t.ke);return n&&n.jj===i},e.prototype.Li=function(t,i){this.qj(t.je,t.ke).kj[i]=!0},e.prototype.kj=function(t,i){var n=this.pj(t.je,t.ke);return n&&n.kj[i]},o.prototype.toString=function(){return this.name+(this.sj!==1/0?" minMoves:"+this.sj:"")+" score:"+this.lj.toFixed(2)},e.prototype.tj=function(t,i,n){this.dj=t+" on "+i.toString(1),n.je===this.Oh.uj&&n.ke===this.Oh.vj?(c.Ci(c.Di),this.dj):c.level===c.Di&&c.Ci(c.wj)},e.prototype.xj=function(t){var i=this.cj[t.Hd];if(i)return i;for(var n=2*t.ce.length,e=t.Ue(),r=0,s=e.length-1;s>=0;s--)r+=e[s].nh();return n+=this.ej*Math.max(0,r-1),this.cj[t.Hd]=i=new o("life/death of "+t.toString(1),n,t),i},e.prototype.yj=function(t,i,n,e){if(!i)throw new Error("Unexpected");n=n||1,e=e||1,c.debug&&n&&n.toFixed(2);var r=this.qj(i.je,i.ke),o=r.mj,s=r.nj,h=r.oj,a=o.indexOf(t);return a<0?(o.push(t),s.push(n),h.push(e)):(s[a]=Math.max(s[a],n),h[a]=Math.min(h[a],e)),t.sj=Math.min(t.sj,e),t},e.prototype.Rh=function(t){var i=t.Rh;if(void 0!==i)return i;var n,e=t.zj;n=e?e.Aj:[t];var r=this.vi.Bj(n);return i=t.Rh=this.Cj(r,t.group.color===this.Oh.kb)},e.prototype.Cj=function(t,i){return t>=2?1:t<1.5?0:i?1:.5},e.prototype.Dj=function(t,i,n,e,r,o){e=e||1;var s,a=t[0].group.color===this.Oh.kb,u=this.vi.Bj(t),l=this.Cj(u,a);if(o){s=l-this.Cj(u+o,!0),s=Math.min(2*s,1)}else s=1-l;if(e*=s,c.debug&&h.Ej(t),e<.1)return void(c.debug&&h.Ej(t));for(var p=r||0,f=t.length-1;f>=0;f--)p+=t[f].group.ie;for(f=t.length-1;f>=0;f--)this.Fj(t[f].group,i,n,e,p)},e.prototype.Fj=function(t,i,n,e,r){if(!(e<.1)){var o=this.xj(t);return n||this.Gj(t,i,e,r),this.yj(o,i,e,r)}},e.prototype.Gj=function(t,i,n,e){if(!(1===t.ce.length&&t.ce[0].jh()||0===i.nh()&&t.ce.length<3)){e=e||1;for(var r=t.We(),o=r.length-1;o>=0;o--){var s=r[o];s.ie===e&&(this.Fj(s,i,!0,n,e),this.Hj(s,i,n,e))}}},e.prototype.Hj=function(t,i,n,e){for(var r=t.Oe.Ij(i),o=r.length-1;o>=0;o--)this.Dj(r[o],i,!0,n,e)},e.prototype.Vi=function(t,i){var n=1/(t.ie+1)*this.fj;if(this.Rh(t.Oe)<.5){if(!this.Oh.Qh)return 0;n=this.ni}this.qj(i.je,i.ke).lj+=n,this.debug&&i.je===this.Oh.uj&&i.ke===this.Oh.vj&&c.Qg("MoveInfo "+p(1-t.color)+" - pressure at "+i+": "+n.toFixed(2))},e.prototype.Oi=function(t){this.qj(t.je,t.ke).lj+=this.ni},e.prototype.Ui=function(t,i){this.debug&&this.tj("race",t,i);var n=t.Oe,e=n.zj?n.zj.Aj:[n];this.Dj(e,i,!1)},e.prototype.Jj=function(t,i,n,e){this.debug&&this.tj("eye threat",t,i);var r=t.Oe,o=r.zj?r.zj.Aj:[r];return this.Dj(o,i,n===t.color,void 0,void 0,-e),!0},e.prototype.Gh=function(t,i,n,e){var r=t[0];this.debug&&this.tj("cut",r,i);for(var o=e===r.color,s=r.Oe.Kj(t,i),h=s.length-1;h>=0;h--)this.Dj(s[h],n,o,void 0,1)},e.prototype.Ni=function(t,i){this.debug&&this.tj("kill",t,i);for(var n=t.Oe.Ij(i),e=n.length-1;e>=0;e--)this.Dj(n[e],i,!1);this.Fj(t,i,!1,1,t.ie)},e.prototype.Lj=function(t,i){this.debug&&this.tj("rescue",t,i),this.Hj(t,i),this.Fj(t,i,!0)}},{"../../Grid":17,"../../Move":21,"../../log":72,"../../test":77,"./Heuristic":31,"./boan/GroupInfo":45,"util":4}],35:[function(t,i,n){"use strict";function e(t){r.call(this,t),this.Mj=null}var r=t("./Heuristic"),o=t("util").inherits,s=t("../../log"),h=t("../../Move"),a=h._a;o(e,r),i.g=e,e.prototype.Wi=function(){this.Mj||(this.Mj=this.Oh.ci.Nj)},e.prototype.Ch=function(t,i,n){if(this.Lh[1-n][i][t]<2&&this.Lh[n][i][t]<2&&0===this.fb.Td(t,i).oh(n))return 0;var e=this.fb.Xd(t,i,n),r=e.group,o=0;return s.debug&&a(t,i),1===r.ie?1===r.ce.length&&e.ih()[0].Sd(this.oi)?s.debug:(o-=2*r.ce.length,s.debug):2===r.ie&&(s.debug,this.Mj._i(e)&&(o-=2*r.ce.length,s.debug)),this.fb.$d(),o}},{"../../Move":21,"../../log":72,"./Heuristic":31,"util":4}],36:[function(t,i,n){"use strict";function e(t){s.call(this,t),this.Sj=[new o(this.tb,u),new o(this.tb,u)],this.Tj=this.Fi("wideSpaceToEye",.7,.01,1),this.Uj=this.Fi("stoneCountToEye",.33,.25,1)}var r=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,a=t("../../log"),u=r.td,c=r.Oj,l=r.Pj,p=r.EMPTY,f=r.ab,d=r.bb,g=r.Qj,v=r.Rj;h(e,s),i.g=e,e.prototype.$h=function(){this.Vj()},e.prototype.Vj=function(){this.Sj[g].init(p),this.Sj[v].init(p);for(var t=this.tb;t>=1;t--)for(var i=this.tb;i>=1;i--){var n=this.fb.Td(i,t);if(n.color===p){var e=this.Wj(i,t,n);if(null!==e){var r=this.Oh.Nh.Mh(n);if(!r.Xj&&!this.Hh.rj(n,e)){for(var o=n.Ve,s=null,h=this.Lh[1-e],u=1,f=o.length-1;f>=0;f--){var d=o[f];d.color===e&&(s=d.group),1!==u||d.lh()||0!==h[d.ke][d.je]||d.nh()!==d.Ve.length||(u=2)}if(!s){if(!n.jh())continue;if(!(s=n.kh().group))continue}if(n.lh()){for(var b=!1,y=1-e,m=l;m>=c;m-=2){var w=n.eh[m];if(w.color===y){b=!0;break}}if(b)continue}var x=(i+t)%2,k=this.Sj[x].wd;k[t][i]=e,s.Oe.Yj(x,u),a.debug}}}}},e.prototype.Zj=function(t,i){var n=t.je,e=t.ke,r=(n+e)%2;return this.Sj[r].wd[e][n]===i},e.prototype.Wj=function(t,i,n){var e=this.Lh[f][i][t],r=this.Lh[d][i][t],o=e>r?f:d,s=Math.max(e,r),h=Math.min(e,r);if(h>1)return null;var a=0,u=this.tb;return 1===h&&n.jh()&&n.kh().color===p&&a++,1!==t&&t!==u&&1!==i&&i!==u||a++,s+a-3-h<0?null:o},e.prototype.$j=function(t){for(var i=0,n=t.color,e=this.Lh[1-n],r=this.Lh[n],o=t.ce,s=o.length-1;s>=0;s--){var h=o[s];if(!h.lh())for(var a=h.eh.length-1;a>=0;a--){var u=h.eh[a];if(u.color===p&&!(r[u.ke][u.je]>4)){var c=e[u.ke][u.je];if(!(c>1)){var l=u.mh();if(0!==l)if(1!==l){var f=u.je-h.je,d=u.ke-h.ke,g=u.je+f,v=u.ke+d;0===e[v][g]&&i++}else{if(c>0)continue;i++}}}}}return i},e.prototype.Bj=function(t){for(var i=0,n=0,e=t.length-1;e>=0;e--){var r=t[e];i+=r._j(),n+=r.group.ce.length}n<6&&(i=Math.min(i,n*this.Uj));var o=0;for(e=t.length-1;e>=0;e--)o+=this.$j(t[e].group);return i+=o*this.Tj}},{"../../Grid":17,"../../constants":50,"../../log":72,"./Heuristic":31,"util":4}],37:[function(t,i,n){"use strict";function e(t){h.call(this,t),this.ck=new s(this.tb,f),this.dk=this.ck.wd,this.ek=new s(this.tb,f),this.bj=[new s(this.tb,f),new s(this.tb,f)],this.fk=new s(this.tb,f),this.gk()}function r(t,i,n){switch(t){case y:return[i,1];case m:return[1,i];case w:return[i,n];case x:return[n,i]}}var o=t("../../constants"),s=t("../../Grid"),h=t("./Heuristic"),a=t("util").inherits,u=t("../../log"),c=t("../../Move"),l=t("../../Stone"),p=c.Ke,f=o.td,d=o.EMPTY,g=o.ab,v=o.bb,b=o.NEVER,y=o.ak,m=o.uh,w=o.bk,x=o.th,k=o.bh,j=o.dh,S=s.Ae,A=l.fh,M=l.gh;a(e,h),i.g=e,e.prototype.$h=function(){this.ck.Ce(this.fb),this.hk(g),this.hk(v),this.ik()},e.prototype.jk=function(t,i,n){var e=n===g?-1:1,r=b;return s.Ae[2+this.bj[g].wd[i][t]]===e&&r++,s.Ae[2+this.bj[v].wd[i][t]]===e&&r++,r},e.prototype.kk=function(t,i,n){return this.fk.wd[i][t]*(n===g?1:-1)},e.prototype.lk=function(t,i,n){return s.Ae[2+this.bj[1-n].wd[i][t]]*(n===g?1:-1)},e.prototype.toString=function(){return"\nBLACK first:\n"+this.bj[g]+"WHITE first:\n"+this.bj[v]},e.prototype.mk=function(){this.ck.Ce(this.fb);var t=this.bj[g];this.nk(this.ck,t.K(this.ck)),this.pk(t.wd,v),this.pk(t.wd,g);var i=this.Oh.Nh;return i.xg(this.fb),[i.wg().wd,i.yg()]},e.prototype.nk=function(t,i){for(var n=t.wd,e=i.wd,r=~~(2*Math.random()),o=this.tb;o>=1;o--)for(var s=n[o],h=this.tb;h>=1;h--)s[h]===d&&(this.qk(n,e,h,o,r,1-r)?(this.rk(e,h,o,r),r=1-r):this.qk(n,e,h,o,1-r,r)&&this.rk(e,h,o,1-r))},e.prototype.sk=function(t){return this.bj[t].Jd(function(t){return"@?O"[s.Ae[2+t]+1]})},e.prototype.tk=function(t){for(t=this.fb.Sb()-t;t-- >0;)this.fb.$d()},e.prototype.hk=function(t){var i=this.fb.Sb(),n=this.bj[t];this.uk(n,t),this.Oh.Nh.vk(this.fb,n,t),this.tk(i)},e.prototype.ik=function(){for(var t=this.bj[g].wd,i=this.bj[v].wd,n=this.fk.wd,e=this.tb;e>=1;e--)for(var r=this.tb;r>=1;r--)n[e][r]=(S[2+t[e][r]]+S[2+i[e][r]])/2;u.debug&&this.ck},e.prototype.uk=function(t,i){this.wk=null,this.xk(this.ck,t.K(this.ck),i),u.debug,this.pk(t.wd,i),u.debug,this.yk(this.ek.K(t)),this.wk=this.ek.wd,u.debug&&this.ek,this.xk(this.ck,t.K(this.ck),i),u.debug,this.pk(t.wd,i),u.debug},e.prototype.xk=function(t,i,n){u.debug&&p(n);for(var e=t.wd,r=i.wd,o=this.tb;o>=1;o--)for(var s=e[o],h=this.tb;h>=1;h--)s[h]===d&&this.qk(e,r,h,o,n,1-n)&&this.rk(r,h,o,n)},e.prototype.yk=function(t){for(var i=t.wd,n=1;n<=this.tb;n++)for(var e=1;e<=this.tb;e++)if(this.dk[n][e]===d){var r=i[n][e];if(r!==d){var o=this.zk(i,e,n,1-r);0===o&&(i[n][e]=d)}}},e.prototype.qk=function(t,i,n,e,r,o){switch(this.zk(t,n,e,r)){case 0:if(!this.Ak(t,n,e,r))return!1;break;case 4:return!1;case 3:if(0===this.zk(t,n,e,o))return!1}return!0},e.prototype.rk=function(t,i,n,e,r){if(this.wk){if(!r&&this.wk[n][i]===d)return;if(this.fb.Td(i,n).Od(e))return;this.fb.Xd(i,n,e)}t[n][i]=e},e.prototype.zk=function(t,i,n,e){for(var r=0,o=k;o<=j;o++){var s=A[o];t[n+s[1]][i+s[0]]===e&&r++}return r},e.prototype.Ak=function(t,i,n,e){for(var r=k;r<=j;r++){var o=M[r];if(t[n+o[1]][i+o[0]]===e)return!0}return!1},e.prototype.gk=function(){for(var t=[],i=k;i<=j;i++)for(var n=A[i][0],e=A[i][1],o=this.tb-1;o>=2;o--){var s=r(i,o,this.tb);t.push([s[0],s[1],n,e])}this.Bk=t},e.prototype.pk=function(t,i){for(var n,e,r,o,s,h,a=this.Bk,u=a.length-1;u>=0;u--){var c=a[u],l=c[0],p=c[1];if(t[p][l]===d){var f=c[2],g=c[3],v=l+f,b=p+g,y=t[b][v];if(y===d){var m=v+f,w=b+g;if((y=t[w][m])===d){var x=m+f;if((y=t[w+g][x])===d);else{if(y!==i)continue;if(n=t[p-f][l-g],e=t[p+f][l+g],r=t[b-f][v-g],o=t[b+f][v+g],s=t[w-f][m-g],h=t[w+f][m+g],n===y&&r===y&&s===y)continue;if(e===y&&o===y&&h===y)continue;if(this.rk(t,m,w,y,!0),n===y&&r===y)continue;if(e===y&&o===y)continue;if(this.rk(t,v,b,y,!0),n===y||e===y)continue;this.rk(t,l,p,y,!0)}}else{if(y!==i)continue;if(n=t[p-f][l-g],e=t[p+f][l+g],r=t[b-f][v-g],o=t[b+f][v+g],n!==1-y&&r===y)continue;if(e!==1-y&&o===y)continue;if(this.rk(t,v,b,y,!0),n===y||e===y)continue;this.rk(t,l,p,y,!0)}}else{if(y!==i)continue;if(n=t[p-f][l-g],e=t[p+f][l+g],r=t[b-f][v-g],o=t[b+f][v+g],n===y&&r!==1-y)continue;if(e===y&&o!==1-y)continue;this.rk(t,l,p,y,!0)}}}}},{"../../Grid":17,"../../Move":21,"../../Stone":26,"../../constants":50,"../../log":72,"./Heuristic":31,"util":4}],38:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.Ck=[],this.Dk=this.Fi("allyInfl",.03,.01,1),this.Ek=this.Fi("enemyInfl",.13,.01,1)}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),a=t("../../Move"),u=t("../../Stone"),c=a.Ke,l=a._a,p=r.EMPTY,f=u.fh,d=r.bh,g=r.dh;s(e,o),i.g=e,e.prototype.$h=function(t,i){var n=this.Ck;n.length=0,o.prototype.$h.call(this,t,i);for(var e=n.length-1;e>=0;e--)this.Fk(n[e],i)},e.prototype.Ch=function(t,i,n){return this.Gk(t,i,1-n,!0),this.Gk(t,i,n)},e.prototype.Hk=function(t,i,n,e,r){if(!(this.Dh[t.ke][t.je]<0)){var o=1-n.group.color,s=this.si.Eh(t,o);s&&(this.Hh.Rh(s.group.Oe)<.5||(h.debug&&(c(1-o),e.toFixed(2)),r[t.ke][t.je]+=e,this.mi.wd[t.ke][t.je]+=e))}},e.prototype.Fk=function(t,i){var n=t[0],e=t[1],r=t[2];if(this.Hk(n,n,e,r,i),!this.Hh.kj(n,e.color)){var o=e.group;if(!n.ph(o))for(var s=0;s<8;s++){var h=n.eh[s];h.color===p&&(h.ph(o)&&this.Hk(h,n,e,r,i))}}},e.prototype.Gk=function(t,i,n,e){var r=this.Lh[1-n][i][t];if(0===r)return 0;var o=this.Lh[n][i][t];if(o>=4)return 0;if(!e&&this.Dh[i][t]<0)return 0;var s=this.fb.Td(t,i);if(0===s.nh())return 0;var a=this.si.Eh(s,n);if(!a)return 0;if(!e&&!this.si.Eh(s,1-n))return 0;var u=this.Ik(t,i,n),p=u+this.Ek*r-this.Dk*o;return p*=this.Hh.Rh(a.group.Oe),e?p?(h.debug&&(l(t,i),p.toFixed(2)),this.Ck.push([s,a,p])):0:(h.debug&&(c(n),l(t,i),p.toFixed(2)),p)},e.prototype.Jk=function(t,i,n,e,r){var o=this.fb.Td(t,i);if(o.color!==p)return 0;var s=this.xi.lk(t,i,e);if(o.lh()&&(s/=2),s<=0)return 0;if(0==--r)return s;var h=f[n][0],a=f[n][1],u=f[(n+3)%4],c=u[0],l=u[1];return s+=this.Jk(t+h+c,i+a+l,n,e,r),s+=this.Jk(t+h-c,i+a-l,n,e,r)};e.prototype.Ik=function(t,i,n){for(var e=Math.max(0,this.xi.lk(t,i,n)),r=d;r<=g;r++)e+=this.Jk(t+f[r][0],i+f[r][1],r,n,1);var o=this.fb.Td(t,i);return o.jh()?e=Math.max(e-1,0):o.lh()&&(e=Math.max(e-.85,0)),e}},{"../../Move":21,"../../Stone":26,"../../constants":50,"../../log":72,"./Heuristic":31,"util":4}],39:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.Mj=null}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),a=t("../../Move"),u=a.Ke,c=r.EMPTY,l=r.td;s(e,o),i.g=e,e.prototype.Wi=function(){this.Mj||(this.Mj=this.Oh.ci.Nj)},e.prototype.Ch=function(t,i){var n=this.fb.Td(t,i);return this.Kk(t,i,n),0},e.prototype.Kk=function(t,i,n){for(var e,r,o=[],s=this.color,a=n.he(s),c=0;r=a[c],c<a.length;c++)1===r.ie?o.push(r):2===r.ie&&o.push(r);if(o.length&&(h.debug&&(u(s),o[0],o.length>1&&o.length),this.Mj.aj(t,i,this.oi))){this.fb.Xd(t,i,s),h.debug&&u(s);var l=!this.Mj._i(n);this.fb.$d();var p;if(!l){for(e=o.length-1;e>=0;e--)if(r=o[e],1!==r.ie){var f=r.Ue();if(p=f[0]===n?f[1]:f[0],this.fb.Xd(p.je,p.ke,s),l=!this.Mj._i(p),this.fb.$d(),l)break}if(!l)return void(h.debug&&u(this.color));n=p}for(e=o.length-1;e>=0;e--)r=o[e],p&&1===r.ie||(this.Hh.Lj(r,n),h.debug)}},e.prototype.Lk=function(t,i,n){var e=0,r=0,o=this.tb;if(1===i||i===o)r=1;else{if(1!==n&&n!==o)throw new Error("not along border");e=1}var s=r,h=e;if(this.fb.Td(i+s,n+h).color===l&&(s=-s,h=-h),this.fb.Td(i+s,n+h).group!==t){var a=t.color,u=this.fb.Td(i+e,n+r);for(u.group===t&&(e=-e,r=-r);;)switch(i+=e,n+=r,u=this.fb.Td(i,n),u.color){case l:return null;case a:return u.group.ie>2?u.group:null;case c:var p=this.fb.Td(i+s,n+h);if(p.color===c)continue;return p.color===1-a?null:p.group.ie>2?p.group:null;default:return null}}}},{"../../Move":21,"../../constants":50,"../../log":72,"./Heuristic":31,"util":4}],40:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.Sj=t.ci.wi.Sj}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),a=t("../../Move"),u=a.Ke,c=r.EMPTY,l=r.NEVER,p=r.Mk,f=r.Qj,d=r.Rj;s(e,o),i.g=e,e.prototype.$h=function(t,i){o.prototype.$h.call(this,t,i);var n=this.Oh.Nh.fi;for(var e in n){var r=n[~~e].group;this.Nk(i,r)}},e.prototype.Nk=function(t,i){var n=[];if(i.Oe.Ok(n)===p){var e=this.fb.Td(n[0],n[1]);h.debug&&u(this.color),this.Hh.Jj(i,e,this.color,.5)}},e.prototype.Ch=function(t,i,n){var e=this.fb.Td(t,i);return this.Pk(e,n),this.Pk(e,1-n),this.Qk(e,n)},e.prototype.Pk=function(t,i){if(this.xi.jk(t.je,t.ke,i)!==l){var n=this.Oh.Nh.Mh(t);n.Xj&&n.color===i?this.Rk(t,i,n):this.Sk(t,i)}},e.prototype.Rk=function(t,i,n){switch(n.Tk){case 1:for(var e=t.Ve.length-1;e>=0;e--){var r=t.Ve[e];if(r.color===i&&1===r.group.ie)return h.debug&&u(i),this.Hh.Jj(r.group,t,i,1)}return;case 2:var o=n.Xj;if(this.Hh.rj(t,i))return this.Hh.Jj(o.group,t,i,1);if(o.Uk>1)return;var s=o.Vk.length&&o.Vk[0].group;if(s&&t.ph(s)&&(1===s.ie||!t.jh()))return this.Hh.Jj(o.group,t,i,1);return;default:return}},e.prototype.Sk=function(t,i){if(!(this.Dh[t.ke][t.je]<0)&&this.si.Eh(t,1-i)){for(var n=this.Sj[f].wd,e=this.Sj[d].wd,r=this.Lh[1-i],o=null,s=null,h=0,a=t.Ve.length-1;a>=0;a--){var u=t.Ve[a];switch(u.color){case c:var l=u.je,p=u.ke;if(n[p][l]===i||e[p][l]===i){if(1===r[p][l]&&2!==r[t.ke][t.je])continue;o=u,h++,o.jh()&&2===o.nh()&&h++}break;case i:s||(s=u.group)}}o&&(s||(s=o.he(i)[0]),this.Hh.Jj(s,t,i,h/2))}},e.prototype.Qk=function(t,i){var n,e=t.ih(),r=e.length,o=this.Oh.Nh.Mh(t);if(o.Xj&&o.color===i){if(0===r)return-1;if(1===r)return this.vi.Zj(e[0],i)?0:-1;if(1===this.Hh.Rh(o.Xj))return 0;var s=t.oh(i);if(3===r&&1===s)return.5;for(n=r-1;n>=0;n--){var h=e[n];if(!this.Hh.rj(h,i)&&1===h.nh())return.5}}else{e=t.ih();var a=!1;for(n=r-1;n>=0&&!a;n--)a=this.vi.Zj(e[n],i);if(!a)return 0;if(t.jh())return-1;if(t.lh())return-.2;if(r>=3&&!this.Lh[1-i][t.ke][t.je])return 1}return 0}},{"../../Move":21,"../../constants":50,"../../log":72,"./Heuristic":31,"util":4}],41:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.Wk=this.Fi("enemyInfl",.07,.01,.5),this.Xk=this.Fi("allyInfl",.5,.01,.5),this.Yk=this.Fi("border",10,0,20),this.Zk=this.tb<=9?[0,.2,.8,.95,1]:[0,.2,.8,1,.95,.8]}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=r.EMPTY;s(e,o),i.g=e,e.prototype.Ch=function(t,i){var n=0;if(!this.Oh.Qh){var e=this.xi.kk(t,i,this.color);e<0&&(n+=e)}for(var r=this.fb.Td(t,i),o=this.Lh[this.oi],s=this.Lh[this.color],a=o[i][t],u=s[i][t],c=r.Ve.length-1;c>=0;c--){var l=r.Ve[c];if(l.color!==h)return n;a+=o[l.ke][l.je],u+=s[l.ke][l.je]}var p=1+this.tb/9*(this.Wk*Math.max(a-3,0)+this.Xk*Math.max(u-3,0)),f=this.Zk.length-1,d=Math.min(this.mh(t),f),g=Math.min(this.mh(i),f);return n+this.Zk[d]*this.Zk[g]*this.Yk/p},e.prototype.mh=function(t){return Math.min(t-1,this.tb-t)}},{"../../constants":50,"./Heuristic":31,"util":4}],42:[function(t,i,n){"use strict";function e(t){this.$k=t.group.Hd,this.Aj=[t],t.zj=this}function r(t){return"#"+t.group.Hd}var o=t("../../../log");i.g=e,e.prototype.toString=function(){return this.Aj.map(r).toString()},e.prototype._k=function(t){if(!t.zj)return o.debug&&this.toString(),this.Aj.push(t),void(t.zj=this);if(t.zj.$k!==this.$k){o.debug&&(t.zj.toString(),this.toString());for(var i=t.zj.Aj,n=i.length-1;n>=0;n--)this.Aj.push(i[n]),i[n].zj=this}},e.prototype.remove=function(t){var i=this.Aj.indexOf(t);if(i<0)throw new Error("Band.remove on wrong Band");this.Aj.splice(i,1),t.zj=null,o.debug&&this.toString()},e.al=function(t){if(1===t.length)throw new Error("add Band of 1");for(var i=null,n=0;n<t.length;n++)if(t[n].Oe.zj){i=t[n].Oe.zj;break}var r=0;for(i||(i=new e(t[r++].Oe)),n=r;n<t.length;n++)i._k(t[n].Oe)}},{"../../../log":72}],43:[function(t,i,n){"use strict";function e(t){this.Vb=t,this.version="chuckie",this.mode=null,this.Qh=!1,this.fb=null,this.el=null,this.mi=null,this.fl=[],this.fi=null,this.gl=[0,0],this.hl=[0,0],this.il=null}function r(t){return t>1&&t<2?t-1:t}function o(t){if(!(t[m]===t[w]||t[m]>=x&&t[w]>=x))return t[m]=r(t[m]),t[w]=r(t[w]),t[m]>t[w]?m:w}function s(t,i){for(var n=0;n<i.length;n++){var e=i[n];p.debug&&(t.name,e.group.Hd),e.El()!==k&&(i[n]=null)}var r=0;for(n=0;n<i.length;n++)i[n]&&(i[n].Fl(t.name+": liveliness="+i[n].Gl.toFixed(4)),r++);return r}function h(t,i){for(var n=0;n<i.length;n++)i[n].Fl(t.name);return i.length}function a(){return 0}var u=t("../../../constants"),c=t("../../../Grid"),l=t("./GroupInfo"),p=t("../../../log"),f=t("../../../Move"),d=t("./Void"),g=t("./ZoneFiller"),v=f.Ke,b=u.EMPTY,y=u.td,m=u.ab,w=u.bb,x=l.bl,k=l.cl,j=l.dl;i.g=e,e.prototype.xg=function(t){p.debug,this.gl[m]=this.gl[w]=0,this.hl[m]=this.hl[w]=0,this.mi&&this.mi.tb===t.tb||(this.mi=new c(t.tb,y)),this.jl(0,t,this.mi)&&(this.kl(),this.Qh||t.be(this.hl))},e.prototype.wg=function(){return this.mi},e.prototype.yg=function(){var t=this.gl,i=this.hl,n=this.Vb.jb;return[[t[m]+i[w],t[w]+i[m]+n],[[t[m],i[w],0],[t[w],i[m],n]]]},e.prototype.Mh=function(t){return this.el.wd[t.ke][t.je]},e.prototype.di=function(t,i){this.jl(2,t,i)},e.prototype._h=function(){this.kl()},e.prototype.vk=function(t,i,n){this.jl(1,t,i)&&this.kl(n)},e.prototype.Id=function(){return this.el.Id()},e.prototype.Md=function(){for(var t,i="Grid:\n"+this.el.Nd()+"Voids:\n",n=this.fl,e=0;t=n[e],e<n.length;e++)i+=t.toString()+"\n";i+="Groups:\n";for(var r in this.fi)i+=this.fi[~~r].toString()+"\n";return this.gl&&(i+="Score:"+this.gl.map(function(t,i){return" player "+i+": "+t+" points"})),i},e.prototype.jl=function(t,i,n){return this.mode=t,this.Qh=this.Vb.useAreaScoring&&0===t,this.fb=i,this.el=n,this.il=new g(i,n),0!==i.Sb()&&(n.Ce(i),this.ll(),this.ml(),this.nl(),!0)},e.prototype.kl=function(t){2===this.mode?this.ol():(this.pl(),this.ol(t),this.ql(),this.rl())},e.prototype.sl=function(t,i){var n=this.fi[t.Hd];n||(t.Oe&&t.Oe.Nh===this?t.Oe.tl():t.Oe=new l(t,this),n=this.fi[t.Hd]=t.Oe),n.ul.push(i)},e.prototype.ll=function(){p.debug;var t=c.ve;this.fi={},this.fl.length=0;for(var i,n,e=this.fb,r=new d(e,t++),o=1;o<=e.tb;o++)for(var s=1;s<=e.tb;s++){var h=this.il.vl(s,o,b,r);if(0!==h){this.fl.push(r);for(var a=m;a<=w;a++)for(n=r.wl[a],i=n.length-1;i>=0;i--)this.sl(n[i],r);r=new d(e,t++)}}},e.prototype.ml=function(){for(var t in this.fi)this.fi[~~t].xl()},e.prototype.nl=function(){p.debug;for(var t=this.fl,i=t.length,n=i-1;n>=0;n--)t[n].yl();for(var e;;){for(e=!1,n=i-1;n>=0;n--)t[n].zl()&&(e=!0);if(!e)break}for(n=i-1;n>=0;n--)t[n].Al()},e.prototype.pl=function(){if(!this.Qh){var t=this.fb;if(!(t.Sb()<2*t.tb))for(var i=[0,0],n=[0,0];;){for(var e=!1,r=this.fl.length-1;r>=0;r--){var s=this.fl[r];if(void 0===s.color&&!(s.Tk>2*t.tb)){i[m]=i[w]=n[m]=n[w]=0;for(var h=m;h<=w;h++)for(var a=s.wl[h].length-1;a>=0;a--){var u=s.wl[h][a].Oe;i[h]+=u.Bl(),n[h]+=u.Cl()}if(!(n[m]>4&&n[w]>4)){var c=o(i);void 0!==c?(p.debug&&(v(c),i[c].toFixed(4),i[1-c].toFixed(4)),s.Dl(c),e=!0):p.debug&&i[0]}}}if(!e)break}}};var S={name:"brothers",l:l.prototype.Hl},A={name:"singleEye",l:l.prototype.Il,Jl:s},M={name:"race",l:l.prototype.El,Jl:a},z={name:"atari",l:l.prototype.Kl},C={name:"final",l:l.prototype.Ll},D=[];D[0]=[S,z,A,M,C],D[1]=[S,A],D[2]=[S,A,M],e.prototype.Ml=function(t,i){p.debug&&t.name;var n=0,e=0,r=[];for(var o in this.fi){var s=this.fi[~~o];if(!s.Nl&&!s.Ol)switch(e++,t.l.call(s,i)){case k:r.push(s);break;case j:n++}}return r.length&&(n+=t.Jl?t.Jl(t,r):h(t,r)),p.debug&&n&&t.name,n===e?0:0===n?e:-n},e.prototype.ol=function(t){if(!this.Qh){for(var i,n=D[this.mode],e=0;e<n.length;){if(0===(i=this.Ml(n[e++],t)))return void this.nl();i<0&&(e=0,this.nl())}p.debug}},e.prototype.ql=function(){for(var t=[],i=this.fl.length-1;i>=0;i--){var n=this.fl[i];t[m]=t[w]=!1;for(var e=m;e<=w;e++)for(var r,o=n.wl[e],s=0;r=o[s],s<o.length;s++)if(this.Qh||r.Oe.Bl()>=2){t[e]=!0;break}t[m]&&t[w]?n.Pl():this.Qh&&(n.color=t[m]?m:w)}},e.prototype.rl=function(){this.Ql(),this.Rl(),this.Sl()},e.prototype.Ql=function(){if(this.Qh)for(var t in this.fi){var i=this.fi[~~t].group;this.gl[i.color]+=i.ce.length}},e.prototype.Rl=function(){if(!this.Qh)for(var t in this.fi){var i=this.fi[~~t];if(i.Ol){for(var n=!1,e=i.Tl.length-1;e>=0;e--)if(!i.Tl[e].Oe.Ol){n=!0;break}var r=i.group.color;if(!i.Tl.length||n){var o=i.group.ce[0],s=this.il.vl(o.je,o.ke,r,c.ye+r);this.hl[r]+=s,this.gl[1-r]+=s}else for(var h=i.ul.length-1;h>=0;h--)i.ul[h].Dl(r)}}},e.prototype.Sl=function(){for(var t=this.el.wd,i=[],n=this.fl.length-1;n>=0;n--){var e=this.fl[n],r=e.Ul(this.Qh?null:i);if(r){this.gl[e.color]+=r-i.length,this.il.vl(e.je,e.ke,e,c.ze+e.color);for(var o=i.length-1;o>=0;o--){var s=i[o];t[s.ke][s.je]=c.xe}}else this.il.vl(e.je,e.ke,e,c.xe)}}},{"../../../Grid":17,"../../../Move":21,"../../../constants":50,"../../../log":72,"./GroupInfo":45,"./Void":46,"./ZoneFiller":47}],44:[function(t,i,n){"use strict";function e(t,i){this.ii=t,this.wl=[],this.color=i[0].color,this.Ph=!1,this.Vl(i)}i.g=e,e.prototype.Vl=function(t){for(var i=this.wl,n=t.length-1;n>=0;n--){var e=t[n];i.indexOf(e)<0&&i.push(e)}}},{}],45:[function(t,i,n){"use strict";function e(t,i){this.Nh=i,this.Wl=[],this.ul=[],this.Vk=[],this.Tl=[],this.Xl=[0,0],this.gi=[],this.Yl=[],this.Zl=[],this.group=t,this.tl()}function r(t){return t>f?t>d?"ALWAYS":"SOMETIMES":"NEVER"}function o(t,i,n){for(var e=i.length-1;e>=0;e--)for(var r=i[e].Oe,o=t.length-1;o>=0;o--)if(!(t[o].indexOf(r)<0)){n!==-1&&n!==o?(t[n]=t[n].concat(t[o]),t.splice(o,1),o<n&&n--):n=o;break}return n}function s(t,i,n,e){var r=-1;r=o(t,n,r),r=o(t,e,r),r<0?t.push([i]):t[r].push(i)}function h(t,i,n){switch(t){case 4:return 4===i[2];case 5:return 1===i[3]&&3===i[2];case 6:if(2===i[3]&&4===i[2]){for(var e=0,r=0;r<6;r++)if(!n[r].lh()&&++e>2)return!1;return!0}return 1===i[4]&&3===i[2]&&2===i[1];default:return!1}}function a(t){return.0202===t||1.0202===t}var u=t("../../../constants"),c=t("./Band"),l=t("../../../log"),p=u.EMPTY,f=u.NEVER,d=u.Mk,g=u.ALWAYS,v=u.Qj,b=u.Rj;i.g=e;var y=e.cl=-1,m=e.dl=1,w=e.$l=0,x=e.bl=1e3;e.prototype.tl=function(){this.Uk=this.Gl=0,this.Wl.length=0,this.ul.length=0,this.zj=null,this.Nl=this.Ol=!1,this.Rh=void 0,this._l=void 0,this.Vk.length=0,this.Tl.length=0,this.Xl[v]=this.Xl[b]=0,this.gi.length=0,this.Yl.length=0,this.Zl.length=0,this.am=0},e.bm=function(t){return"#"+t.group.Hd},e.prototype.toString=function(){var t=this.zj?this.zj.toString():"";return this.group.toString()+" (isAlive:"+this.Nl+" isDead:"+this.Ol+" voids:"+this.Wl.length+" brothers:["+t+"] deadEnemies:["+this.Vk.map(e.bm)+"])"},e.prototype.cm=function(t){return l.debug,this.Wl.push(t),this.Uk++,this},e.prototype.dm=function(t){var i=this.Wl.indexOf(t);if(i===-1)throw new Error("remove unknown void");l.debug,this.Wl.splice(i,1),this.Uk--},e.prototype.xl=function(){for(var t=this.group,i=t.color,n=[],e=[],r=[],o=t.Ue(),s=o.length-1;s>=0;s--)for(var h=o[s],a=h.Ve,u=null,l=a.length-1;l>=0;l--){var p=a[l];if(p.color===i&&p.group!==t){u=p.group;var f=n.indexOf(u);f>=0?r[f]!==h&&(e[f]=!1):(n.push(u),e.push(!0),r.push(h))}}if(n.length){
for(var d=n.length-1;d>=0;d--)if(e[d]){var g=r[d],v=this.Nh.Mh(g).em(g,[t,n[d]]);this.gi.push(v),this.Yl.push(n[d])}else this.Zl.push(n[d]);n.push(t),c.al(n)}},e.Ej=function(t){return"subband["+t.length+" groups: "+t.map(function(t){return t.group.toString(1)}).join(", ")+"]"},e.prototype.fm=function(t){for(var i=[],n=this.Yl.length-1;n>=0;n--)this.gi[n].ii!==t&&i.push(this.Yl[n]);return i},e.prototype.Kj=function(t,i){for(var n,e=[],r=t.length-1;r>=0;r--){var o=t[r].Oe,h=o.zj;if(h){if(h===n)continue;n=h;for(var a=h.Aj.length-1;a>=0;a--){var u=h.Aj[a];s(e,u,u.Zl,u.fm(i))}}else e.push([o])}return e},e.prototype.Ij=function(t){var i=this.zj;if(!i)return[];for(var n=[],e=i.Aj.length-1;e>=0;e--){var r=i.Aj[e];r!==this&&s(n,r,r.Zl,r.fm(t))}return n},e.prototype.gm=function(){if(this.Uk>=2)return f;var t=this._j();return t>=3?f:0===t?g:d},e.prototype.hm=function(){if(this.gm()===f)return!1;if(this.Zl.length)return!1;for(var t=this.group.color,i=0,n=0,e=this.ul.length-1;e>=0;e--){var r=this.ul[e];r.color===t&&0!==r.im&&(i++,r.im>=3&&n++,this.Vk.length&&n++)}return!(i+n>=2)},e.prototype.Fl=function(t){this.Ol=!0;for(var i=this.ul,n=this.group.color,e=1-n,r=null,o=i.length-1;o>=0;o--){var s=i[o],h=s.wl[e],a=0;if(h.length){for(var u=h.length-1;u>=0;u--)a+=h[u].ce.length;s.Tk>a||(s.Dl(e),r=s)}}if(!r)return void l.debug;for(var c=this.Tl=this.group.We(),p=c.length-1;p>=0;p--){var f=c[p];f.Oe.Vk.push(this);for(var d=p-1;d>=0;d--){var g=c[d],v=g.Oe;if(v.Yl.indexOf(f)===-1){v.Yl.push(f);var b=r.em(r.jm[0],[f,g]);v.gi.push(b)}}}l.debug},e.prototype.Bl=function(t){if(this.Nl||this.Uk>=2&&!this.Ol)return x;for(var i,n=0,e=this.group.color,r=this.group.ie,o=this.ul.length-1;o>=0;o--){var s=this.ul[o],h=s.Tk;if(s.Xj)s.Xj===this&&(n+=h);else{var a=s.wl[e];if(1===a.length)n+=h;else{var u=this.group.Hd,c=u;for(i=a.length-1;i>=0;i--)c=Math.min(a[i].Hd,c);u===c&&(n+=h)}}}if(n=Math.min(r,n)/100,t||(n+=r/1e4),this.Ol)return 0+n;var p=0,f=0;if(!t&&this.zj){var d=this.zj.Aj;for(i=d.length-1;i>=0;i--)d[i]!==this&&(f+=d[i].Bl(!0))}if(!t){var d=this.Zl;for(i=d.length-1;i>=0;i--)p+=d[i].Oe.Bl(!0);for(d=this.Yl,i=d.length-1;i>=0;i--)p+=d[i].Oe.Bl(!0)}return p!==f&&(l.debug,p=f),this.Uk+p+n},e.prototype.Ok=function(t){if(this.Uk>1)return g;if(0===this.Uk)return f;var i=this.Wl[0],n=i.Tk;if(n>6)return g;var e=this.group,r=e.color;if(n<3&&!i.wl[1-r].length)return f;l.debug;for(var o,s=null,a=0,u=0,c=0,v=null,b=null,y=0,m=i.jm,w=!1,x=[0,0,0,0,0],k=0;k<n;k++){for(var j=m[k],S=0,A=0,M=0,z=j.Ve.length-1;z>=0;z--){var C=j.Ve[z];switch(C.color){case p:M++;break;case r:A++;break;default:if(1===C.group.ie){M++,y+=2;break}S++,v?C.group!==v&&(b=C.group):v=C.group}}if(S){if(M+(A?1:0)<2)continue}else if(y++,o=j,x[M]++,M<2)continue;if(l.debug,c++,j.jh()&&(w=!0),s&&!s.jh()){if(S<u)continue;if(M+S<=a+u)continue}s=j,u=S,a=M}if(w&&c>1&&c--,l.debug,!s)return f;if(1===y&&!b&&v&&v.ce.length<3&&this.km(v,o,s))return f;if(c>=2){if(u)return g;if(!h(n,x,m))return g}return t[0]=s.je,t[1]=s.ke,d},e.prototype.km=function(t,i,n){for(var e=i.Ve.length-1;e>=0;e--){var r=i.Ve[e];if(r.color===p&&r!==n&&r.ph(t))return!0}return!1},e.prototype.Hl=function(){if(!this.zj)return w;for(var t=this.zj.Aj,i=0,n=!1,e=t.length-1;e>=0;e--){var r=t[e];r!==this&&(n||r.Nl?n=r.Nl=!0:(i+=r.Uk)>=2&&(n=r.Nl=!0))}return n?(l.debug,this.Nl=!0,m):w},e.prototype.lm=function(){if(this.zj)return!1;if(this.group.ce.length>=6)return!1;for(var t=this.ul.length-1;t>=0;t--)if(this.ul[t].color===this.group.color)return!1;return!0},e.prototype.Il=function(t){if(this.Uk>=2)return this.Nl=!0,l.debug,m;if(this.lm())return y;var i=[],n=this.Ok(i);if(n===d){if(this.am=.5,void 0===t)return w;t!==this.group.color&&(n=f)}return n===f?(this.am=0,this.zj||this.Vk.length?w:this.mm()>=1.5?w:(this.Gl=this.Bl(),y)):(this.Nl=!0,this.am=1,l.debug&&r(n),m)},e.prototype.El=function(){var t=this.group.We();if(!t.length)return y;for(var i=this.Gl||this.Bl(),n=a(i)&&!this.Yl.length&&!this.Zl.length,e=null,r=n?this.group.Ue():null,o=0;o<t.length;o++){var s=t[o],h=s.Oe,u=h.Bl(),c=i-u;if(l.debug&&(this.group.Hd,i.toFixed(4),u.toFixed(4),s.Hd),c>0)return l.debug,this._l=!1,w;if(0===c&&(l.debug&&this.group,n)){if(h._l===!1||u!==i||s.ce.length<3)continue;for(var p=r.length-1;p>=0;p--){var f=r[p];if(!f.ph(s)&&this.Nh.Mh(f).Xj!==this){n=!1;break}}n&&(e=h)}}return n&&e?(this._l=!0,w):y},e.prototype.Kl=function(){return this.group.ie>1?w:y},e.prototype.Ll=function(){var t=this.Gl=this.Bl();if(t>=2)return this.Nl=!0,l.debug,m;if(this._l)return this.Nl=!0,l.debug,m;for(var i=this.Yl.length-1;i>=0;i--)if(this.Yl[i].Oe.Nl)return this.Nl=!0,l.debug&&this.Yl[i],m;return y},e.prototype.nm=function(t,i){if(this.zj){for(var n=this.zj.Aj,e=0,r=n.length-1;r>=0;r--)e+=t.call(n[r],i);return e}return t.call(this,i)},e.prototype.Yj=function(t,i){this.Xl[t]+=i},e.prototype.Ri=function(){for(var t=1-this.group.color,i=this.ul.length-1;i>=0;i--){if(this.ul[i].color!==t)return!1}return!0},e.prototype.om=function(){for(var t=this.group.color,i=this.ul.length-1;i>=0;i--){var n=this.ul[i];if(void 0===n.color)for(var e=n.wl[1-t],r=e.length-1;r>=0;r--){var o=e[r],s=o.Oe.Cl();if(s<6)return 1}}return 0},e.prototype._j=function(){return this.Uk+this.am+this.om()+(this.Xl[v]+this.Xl[b])/2},e.prototype.mm=function(){return this.nm(this._j)},e.prototype.pm=function(){return this.group.ce.length},e.prototype.Cl=function(){return this.nm(this.pm)}},{"../../../constants":50,"../../../log":72,"./Band":42}],46:[function(t,i,n){"use strict";function e(t,i){this.fb=t,this.code=i,this.je=this.ke=0,this.Tk=0,this.wl=null,this.jm=null,this.qm=void 0,this.color=void 0,this.Xj=void 0,this.rm=!1,this.sm=!1,this.im=-1,this.gi=null,this.tm=!1}function r(t){return t?g[t]:g[0]}function o(t){for(var i=t.length-1;i>=0;i--)if(!t[i].Oe.Ol)return!1;return!0}function s(t){return"#"+t.Hd}var h=t("../../../constants"),a=t("./FakeSpot"),u=t("../../../log"),c=t("../../../Move"),l=c.Ke,p=c._a,f=h.ab,d=h.bb,g=["void","eye","fake","dame"];i.g=e,e.prototype.um=function(t,i){return this.je=t,this.ke=i,this.gi=[],this.wl=[[],[]],this.jm=[],this.wl},e.prototype.vm=function(t,i){this.Tk++,this.jm.push(this.fb.Td(t,i))},e.prototype.em=function(t,i){u.debug&&i.map(function(t){return t.Hd}),this.sm=!0;var n=this.jm.indexOf(t),e=this.gi[n];return e?e.Vl(i):e=this.gi[n]=new a(t,i),e},e.prototype.yl=function(){var t=this.wl[f],i=this.wl[d],n=o(t),e=o(i);if(n&&e)return!this.rm&&void 0!==this.color&&this.wm();if(1===this.qm)return!1;if(!n&&!e)return!1;var r=n?d:f;return this.tm=!t.length||!i.length,this.sm?this.xm(r):(this.im=this.Tk,this.ym(r))},e.prototype.xm=function(t){this.qm=2,this.color=t,this.Xj&&(this.Xj.dm(this),this.Xj=null);for(var i=this.gi.length-1;i>=0;i--){var n=this.gi[i];n&&(n.Ph=!1)}return!0},e.prototype.zl=function(){if(2!==this.qm)return!1;var t=this.im,i=this.im=this.Tk-this.zm();return u.debug,i!==t},e.prototype.zm=function(t){t||(t=[]);for(var i=this.gi.length-1;i>=0;i--){var n=this.gi[i];if(n&&n.color===this.color)for(var e=n.wl,r=e.length-1;r>=0;r--)if(e[r].Oe.hm()){u.debug&&!n.Ph&&n.ii,n.Ph=!0,t.push(n.ii);break}}return t.length},e.prototype.Ph=function(t){for(var i=this.gi.length-1;i>=0;i--){var n=this.gi[i];if(n&&n.color===this.color&&n.ii===t)return n.Ph}return!1},e.prototype.Al=function(){if(2===this.qm){if(0===this.im){if(this.Xj)throw new Error("NEVER HAPPENS");return void u.debug}u.debug;var t=this.color;return this.color=this.qm=void 0,this.ym(t)}},e.prototype.ym=function(t){return this.tm?(this.Am(t),!0):this.Dl(t)},e.prototype.Bm=function(t){for(var i=this.wl[t],n=i[0],e=0,r=i.length-1;r>=0;r--){var o=i[r],s=o.ce.length;o.ie>1&&s>e&&(n=o,e=s)}this.Xj=n.Oe.cm(this)},e.prototype.Am=function(t){return u.debug&&l(t),this.qm=1,this.color=t,this.Bm(t),!0},e.prototype.Dl=function(t){if(t===this.color)return!1;u.debug&&l(t),this.Xj&&(this.Xj.dm(this),this.Xj=null),this.color=t;for(var i=this.wl[1-t],n=i.length-1;n>=0;n--)for(var e=i[n].Oe.ul,r=e.length-1;r>=0;r--)if(e[r]!==this&&e[r].color===t)return!0;return this.Bm(t),!0},e.prototype.Pl=function(){u.debug,this.Xj&&(this.Xj.dm(this),this.Xj=null),this.qm=3,this.color=void 0},e.prototype.wm=function(){u.debug;var t=this.color;if(void 0===t)throw new Error("dead group's eye of undefined owner");this.rm=!0,this.sm=!1,this.Xj&&(this.Xj.dm(this),this.Xj=null),this.qm=1,this.color=1-t;for(var i=this.wl[t],n=i.length-1;n>=0;n--){var e=i[n].Oe;if(e.Tl.length)return this.Xj=e.Tl[0].Oe.cm(this),!0}return!0},e.prototype.Ul=function(t){return void 0===this.color?0:(t&&(t.length=0,this.sm&&this.zm(t)),this.Tk)},e.prototype.Cm=function(t){var i=t.group;return this.wl[i.color].indexOf(i)>-1},e.prototype.toString=function(){return"{"+r(this.qm)+"-"+p(this.je,this.ke)+" vcount:"+this.Tk+" black:"+(this.wl[f].map(s).toString()||"-")+" white:"+(this.wl[d].map(s).toString()||"-")+"}"}},{"../../../Move":21,"../../../constants":50,"../../../log":72,"./FakeSpot":44}],47:[function(t,i,n){"use strict";function e(t,i){this.fb=t,this.wd=i.wd,this.wl=null,this.Dm=null}var r=t("../../../constants"),o=r.td;i.g=e,e.prototype.vl=function(t,i,n,e){if(this.wd[i][t]!==n)return 0;this.Dm=n;var r="number"!=typeof e?e:null;this.wl=r&&r.um(t,i);for(var o,s,h,a=0,u=this.wd,c=[[t,i,i]];o=c.pop();)if(s=o[0],i=o[1],h=o[2],u[i][s]===n){for(;this.Em(s,i-1);)i--;for(;this.Em(s,h+1);)h++;a+=h-i+1;for(var l=s-1;l<=s+1;l+=2){for(var p=null,f=i;f<=h;f++)l<s&&(u[f][s]=e,r&&r.vm(s,f)),this.Em(l,f)?p||(p=f):p&&(c.push([l,p,f-1]),p=null);p&&c.push([l,p,h])}}return a},e.prototype.Em=function(t,i){var n=this.wd[i][t];if(n===o)return!1;if(n===this.Dm)return!0;if(!this.wl)return!1;if("number"!=typeof n)return!1;var e=this.fb.Td(t,i).group;if(!e)throw new Error("Unexpected: ZoneFiller replacing a group");var r=this.wl[n];return r.indexOf(e)===-1&&r.push(e),!1}},{"../../../constants":50}],48:[function(t,i,n){"use strict";function e(t,i,n){this.name="Chuckie",this.Vb=t,this.Nh=new o(t),this.Gm(n),this.setColor(i)}function r(t,i){return i[1]-t[1]}var o=t("./boan/BoardAnalyser"),s=t("../../constants"),h=t("../../Genes"),a=t("../../Grid"),u=t("../../log"),c=t("../../Move"),l=t("../../test"),p=t("./boan/ZoneFiller"),f=t("./Connector"),d=t("./GroupAnalyser"),g=t("./GroupsAndVoids"),v=t("./Hunter"),b=t("./Influence"),y=t("./MoveInfo"),m=t("./NoEasyPrisoner"),w=t("./PotentialEyes"),x=t("./PotentialTerritory"),k=t("./Pusher"),j=t("./Savior"),S=t("./Shaper"),A=t("./Spacer"),M=c.$a,z=c._a,C=s.td,D=s.ab,E=s.ji,T=s.Fm,G=s.ki;i.g=e,e.Hm="Chuckie",e.Im="0.1",e.pg=o,e.Jm=p,e.prototype.Km=function(t){var i=new t(this);return this.ri.push(i),i},e.prototype.Lm=function(){var t=this.ci={};this.ri=[],t.bi=this.Km(y),t.yi=this.Km(x),t.Mm=this.Km(g),t.zi=this.Km(b),t.wi=this.Km(w),t.Nm=this.Km(d),t.ui=this.Km(m),t.Om=this.Km(j),t.Nj=this.Km(v),t.ti=this.Km(f),t.Pm=this.Km(A),t.Qm=this.Km(k),t.Rm=this.Km(S);for(var i=0;i<this.ri.length;i++)this.ri[i].pi()},e.prototype.setColor=function(t){this.color=t;for(var i=0;i<this.ri.length;i++)this.ri[i].Ai(t)},e.prototype.Gm=function(t){this.Gi=t||this.Gi||new h,this.ni=this.Fi("smallerMove",.03,.01,.1),this.fb!==this.Vb.fb&&(this.fb=this.Vb.fb,this.tb=this.fb.tb,this.Qh=this.Vb.useAreaScoring,this.Sm=new a(this.tb,C),this.mi=new a(this.tb,0,C),this.Lm()),this.kb=D,this.Tm=this.Um=0,this.Vm=this.Wm=this.Xm=0,this.Ym=!1,this.uj=this.vj=-1,this.Bi=null},e.prototype.Zm=function(t){for(var i=0;i<this.ri.length;i++){var n=this.ri[i];if(n.name===t)return n}return null},e.prototype.Fi=function(t,i,n,e){return void 0===n&&(n=null),void 0===e&&(e=null),this.Gi.get(this.name+"-"+t,i,n,e)},e.prototype.$m=function(t,i,n){this.Vm=n,this.Wm=t,this.Xm=i,this.Ym=1!==this._m},e.prototype.an=function(t,i,n){if(n>this.Vm)this._m=1,this.$m(t,i,n);else{if(this._m++,Math.random()*this._m>=1)return;this.$m(t,i,n)}},e.prototype.bn=function(){this.Tm++;var t=this.Sm.wd,i=this.mi.wd;this.cn(),this.dn(t,i),this.en(t,i);var n=this.fn(t,i);return u.Ci(this.gj?u.Di:u.wj),n},e.prototype.cn=function(){this.Vm=this.ni-.001,this.Wm=-1,this.kb=this.Vb.kb,this.gj=!!u.debug,u.Ci(u.wj)},e.prototype.dn=function(t,i){for(var n=1;n<=this.tb;n++)for(var e=1;e<=this.tb;e++)this.fb.Ob(e,n,this.color)?(t[n][e]=E,i[n][e]=0):t[n][e]=T;if(this.uj!==-1){if(t[this.vj][this.uj]===T)throw new Error("Invalid test move: "+this.uj+","+this.vj);t[this.vj][this.uj]=G}},e.prototype.en=function(t,i){for(var n=0;n<this.ri.length;n++){var e=this.ri[n];u.Ci(this.gj&&this.Bi===e.name?u.Di:u.wj);var r=Date.now();e.Wi&&e.Wi(),e.$h(t,i);var o=Date.now()-r;o>=3&&!l.gn&&u.hn("Slowness: "+e.name+" took "+o+"ms")}this.ci.bi.hj(t,i)},e.prototype.fn=function(t,i){for(var n=1;n<=this.tb;n++)for(var e=1;e<=this.tb;e++)t[n][e]<E||i[n][e]<this.Vm||this.an(e,n,i[n][e]);return this.Vm<this.ni?"pass":(this.Ym&&this.Um++,z(this.Wm,this.Xm))},e.prototype.jn=function(){return this.ci.yi.mk()},e.prototype.kn=function(){var t=this.ci.yi;return t.$h(),t.fk.wd},e.prototype.ln=function(t,i){this.uj=t,this.vj=i,this.bn(),this.uj=-1},e.prototype.mn=function(t,i){for(var n={},e=0;e<this.ri.length;e++)this.ri[e].Ei(t,i,n);return n},e.prototype.nn=function(t,i){return this.ln(t,i),this.mi.wd[i][t]},e.prototype.on=function(t,i,n){return this.ln(t,i),this.Zm(n).mi.wd[i][t]},e.prototype.pn=function(t){this.Bi=t},e.prototype.qn=function(t,i){var n=M(t);if(!n)return"";var e=n[0],o=n[1];if(i){if(!this.fb.Ob(e,o,this.Vb.kb))return"Invalid move: "+t;this.ln(e,o)}var s=this.mn(e,o),h=this.mi.wd[o][e],a=[];for(var u in s)0!==s[u]&&a.push([u,s[u]]);a.sort(r);for(var c=t+" ("+h.toFixed(2)+")\n",l=0;l<a.length;l++)c+="- "+a[l][0]+": "+a[l][1].toFixed(2)+"\n";return c}},{"../../Genes":15,"../../Grid":17,"../../Move":21,"../../constants":50,"../../log":72,"../../test":77,"./Connector":27,"./GroupAnalyser":29,"./GroupsAndVoids":30,"./Hunter":32,"./Influence":33,"./MoveInfo":34,"./NoEasyPrisoner":35,"./PotentialEyes":36,"./PotentialTerritory":37,"./Pusher":38,"./Savior":39,"./Shaper":40,"./Spacer":41,"./boan/BoardAnalyser":43,"./boan/ZoneFiller":47}],49:[function(t,i,n){"use strict";function e(){this.rn=null,this.qg=this.sn=this.tn=this.un=null}i.g=new e,e.prototype.vn=function(t){this.rn={};for(var i=0;i<t.length;i++){var n=t[i];this.rn[n.name]=n.wn}var e=t.length-1;this.qg=this.sn=t[e].wn,this.tn=e>=1?t[e-1].wn:null,this.un=e>=2?t[e-2].wn:null}},{}],50:[function(t,i,n){"use strict";function e(){this.Qj=0,this.Rj=1,this.td=-99,this.EMPTY=-1,this.ab=0,this.bb=1,this.ji=0,this.ki=1,this.Fm=-1,this.NEVER=0,this.Mk=1,this.ALWAYS=2,this.bh=0,this.dh=3,this.Pj=7,this.Oj=1,this.ak=this.rh=0,this.uh=1,this.bk=this.sh=2,this.th=3,this.vh=4,this.wh=5,this.xh=6,this.yh=7,this.zh=8,this.Vh=9,this.Ah=10,this.Bh=11,this.qh=12,this.cb="Japanese",this.xn="Chinese",this.yn=0,this.zn=1}i.g=new e},{}],51:[function(t,i,n){"use strict";function e(t){return"\n"!==t.slice(-1)?0:"\r\n"!==t.slice(-2)?1:2}n.qi=function(t){return t.name||t.toString().split(/ |\(/,2)[1]},n.clone=function(t){if(null===t||void 0===t)return t;var i;if(t instanceof Array){i=[];for(var n=0,e=t.length;n<e;n++)i[n]=t[n]}else{if("object"!=typeof t)throw new Error("clone called on "+typeof t);if("function"==typeof t.clone)return t.clone();i={};for(var r in t){var o=t[r];"function"!=typeof o&&(i[r]=o)}}return i},String.prototype.nd=function(t){if(void 0===t)return this.substr(0,this.length-e(this));var i=this.length-t.length;return this.substr(i)===t?this.substr(0,i):this.toString()},String.prototype.Fe=function(t){if(void 0===t)t=e(this)||1;else if("number"!=typeof t)throw new Error("Invalid parameter type for String.count: "+typeof t);return this.substr(0,this.length-t)},String.prototype.startsWith||(String.prototype.startsWith=function(t){return this.substr(0,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t){return this.substr(this.length-t.length)===t}),String.prototype.format=function(t){if("%"!==this[0])throw new Error("Invalid format: "+this.toString());var i,n=this.slice(1,-1),e=0,r=this.slice(-1);switch(r){case"d":case"x":var o=" ";"0"===n[e]&&(e++,o="0");var s=parseInt(n.substr(e));i=t.toString("x"===r?16:10);for(var h=s-i.length;h>0;h--)i=o+i;return i;case"f":var a="";if("+"===n[e]&&(e++,t>0&&(a="+")),"."!==n[e++])break;var u=parseInt(n.substr(e));return a+t.toFixed(u)}throw new Error("Unknown format: "+this.toString())},String.prototype.Hg=function(t,i){return this>=t&&this<=i},n.An=function(t,i){for(var n=new Array(t),e=t-1;e>=0;e--)n[e]=i;return n},n.ne=function(t,i,e){for(var r=new Array(t),o=r[0]=n.An(i,e),s=t-1;s>=1;s--)r[s]=o.concat();return r},Array.new=function(t,i){if(void 0===t)return[];if(void 0===i)return new Array(t);var n,e=[];if("function"==typeof i)for(n=0;n<t;n++)e[n]=i(n);else for(n=0;n<t;n++)e[n]=i;return e},Array.prototype.Bn=function(t){for(var i=this.length,n=0;n<t.length;n++){var e=t[n];this.indexOf(e)===-1&&this.push(e)}return this.length-i}},{}],52:[function(t,i,n){"use strict";function e(t){this.options=t,this.Cn=[],this.parent=document.body,this.Dn=o.En(null,"contextMenu")}function r(){this.contextMenu.Fn(),this.action&&this.action.call(this)}t("./contextMenu.less");var o=t("./Dome"),s=t("./getText"),h=t("./PopupDlg"),a=t("./tapBehavior");i.g=e,e.prototype.Gn=function(t,i){var n=o.En(this.Dn,"menuItem").Hn(t);return n.action=i,n.contextMenu=this,a(n,r),this.Cn.push(n),n},e.prototype.In=function(t,i,n){var e;this.options&&this.options.Jn?e=this.Fn.bind(this):this.Gn(s("#cancelAction"),null),h.Kn(this.Dn,this.parent,e);var r=o.Ln(t),a=o.Ln(this.Dn);a.Mn(r,i,n),o.Nn(a),this.Dn.On("left",a.left+"px"),this.Dn.On("top",a.top+"px")},e.prototype.Fn=function(){h.Pn(this.Dn)}},{"./Dome":53,"./PopupDlg":58,"./contextMenu.less":62,"./getText":64,"./tapBehavior":68}],53:[function(t,i,n){"use strict";function e(t,i,n,r){this.type=i;var o=this.Qn=document.createElement(i);this.name=r,this.Rn=!1,n&&(o.className=n),p&&p.Sn(o,n),t&&(t instanceof e?t.Qn:t).appendChild(o),f&&f.add(r||n,this)}function r(){var t=document.documentElement.clientWidth,i=document.documentElement.clientHeight;i===g&&(i+=v),h=new u(0,0,t,i),e.Tn=t,e.Un=i}function o(t){this.lo.Hn(t)}function s(){this.wo={}}var h,a=t("./fileHelper"),u=t("./Rect"),c=t("./tapBehavior"),l=null,p=null,f=null,d=1,g=1456,v=159;i.g=e,e.init=function(t,i){p=t,l=i,r()},e.prototype.Vn=function(t,i){return(t instanceof e?t.Qn:t).appendChild(this.Qn),this.Rn=i,l&&i&&l.addElement(this.Qn),this},e.prototype.appendChild=function(t,i){return t.Vn(this,i)},e.removeChild=function(t,i){i&&(l&&i.Rn&&l.Wn(i.Qn),t instanceof e&&(t=t.Qn),t.removeChild(i.Qn))},e.prototype.removeChild=function(t){e.removeChild(this,t)},e.prototype.Xn=function(){return this.Qn.childElementCount},e.prototype.Yn=function(){this.Qn.innerHTML=null},e.prototype.Hn=function(t){return this.Qn.textContent=t,this},e.prototype.Zn=function(t){return this.Qn.innerHTML=t,this},e.prototype.setAttribute=function(t,i){return this.Qn.setAttribute(t,i),this},e.prototype.On=function(t,i){return this.Qn.style[t]=i,this},e.prototype.$n=function(t){return t===this._n()?this:(this.Qn.style.display=t?"":"none",this.ao=!!t,l&&this.Rn&&(t?l.addElement(this.Qn):l.Wn(this.Qn)),this)},e.prototype._n=function(){return this.ao||void 0===this.ao},e.prototype.bo=function(t){return this.Qn.disabled=!t,this.co("disabled",!t),this},e.prototype.text=function(){return this.Qn.textContent},e.prototype.eo=function(){return this.Qn.innerHTML},e.prototype.value=function(){return this.Qn.value},e.prototype.fo=function(){return this.Qn.checked},e.prototype.ho=function(){return this.Qn},e.prototype.clear=function(){this.Qn.innerHTML=""},e.prototype.v=function(t,i){var n=this;this.Qn.addEventListener(t,function(t){i.call(n,t)})},e.prototype.co=function(t,i){var n=this.Qn,e=n.className,r=" "+e+" ",o=" "+t+" ",s=r.indexOf(o);if(i){if(s>=0)return;p&&p.toggle(n,t,i),n.className=e+" "+t}else{if(s<0)return;n.className=r.replace(o," ").trim(),p&&p.toggle(n,t,i)}},e.prototype.io=function(){this.Qn.scrollTop=this.Qn.scrollHeight},e.En=function(t,i,n){return new e(t,"div",i,n||i)},e.prototype.En=function(t,i){return new e(this,"div",t,i||t)},e.jo=function(t,i,n,r){var o=new e(t,"button",i+"Button",i);return n&&(o.Qn.innerText=n),o.v("click",r),o},e.ko=function(t,i,n,r){var s=new e(t,"div","btn "+i,i);return n&&("\\"===n[0]?(s.lo=s.En(i+"Text btnText"),s.Hn=o,s.Hn(n.substr(1))):s.Hn(n)),c(s,r),s},e.mo=function(t,i,n,r){var o=e.ko(t,i,r?"\\"+r:null,n);return o.En(i+"Icon btnIcon"),o},e.no=function(t,i,n,r){var o=new e(t,"a",i,i);return o.setAttribute("href",r),o.Hn(n),o},e.oo=function(t,i,n){return new e(t,"div",i,i).Hn(n)},e.po=function(t){return new e(t,"br")},e.qo=function(t,i,n,r){var o=i+"Label";e.oo(t,o+" inputLbl",n,o);var s=new e(t,"input",i+"Input inputBox",i);return void 0!==r&&(s.Qn.value=r),s},e.ro=function(t,i,n,r,o){var s=new e(t,"div",i+"Div chkBoxDiv"),h=new e(s,"input",i+"ChkBox chkBox",i),a=h.Qn;return a.type="checkbox",a.name=i,void 0!==r&&(a.value=r),a.id=i+"ChkBox"+(void 0!==r?r:d++),o&&(a.checked=!0),new e(s,"label",i+"ChkLabel chkLbl",i).Hn(n).setAttribute("for",a.id),h},e.so=function(t,i,n,r,o){r||(r=n);for(var s=[],h=0;h<n.length;h++){var a=s[h]=new e(t,"input",i+"RadioBtn radioBtn",i),u=a.Qn;u.type="radio",u.name=i,u.value=r[h],u.id=i+"Radio"+r[h],r[h]===o&&(u.checked=!0),new e(t,"label",i+"RadioLbl radioLbl",i).Hn(n[h]).setAttribute("for",u.id)}return s},e.to=function(t){for(var i=0;i<t.length;i++)if(t[i].Qn.checked)return t[i].Qn.value},e.uo=function(t,i,n,r,o){if(r||(r=n),"byIndex"===r)for(r=[],a=0;a<n.length;a++)r.push(a);var s=new e(t,"select",i+"DropDwn dropDwn",i);s.values=r;for(var h=0,a=0;a<n.length;a++){var u=new e(s,"option").Qn;u.value=r[a],u.textContent=n[a],r[a]===o&&(h=a)}return s.Qn.selectedIndex=h,s},e.prototype.select=function(t){var i=this.values.indexOf(t);i!==-1&&(this.Qn.selectedIndex=i)},e.Ln=function(t){var i=(t.Qn||t).getBoundingClientRect();return 0===i.width&&0===i.height&&console.error("newRect on invisible element",t),new u(i.left,i.top,i.width,i.height)},e.Nn=function(t){t.vo(h,10)},e.xo=function(){return f=new s},e.yo=function(){f=null},s.prototype.add=function(t,i){this.wo[t]=i},s.prototype.get=function(t){return this.wo[t]},s.prototype.bo=function(t,i,n){"ALL"===t&&(t=Object.keys(this.wo));for(var e=0;e<t.length;e++)if(!n||n.indexOf(t[e])===-1){var r=this.wo[t[e]];r?r.bo(i):console.error("Invalid control name:",t[e])}},s.prototype.$n=function(t,i,n){"ALL"===t&&(t=Object.keys(this.wo));for(var e=0;e<t.length;e++)if(!n||n.indexOf(t[e])===-1){var r=this.wo[t[e]];r?r.$n(i):console.error("Invalid control name:",t[e])}},e.zo=function(t){document.head.getElementsByTagName("title")[0].textContent=t},e.Ao=function(){var t=window.getSelection();if(!t.rangeCount)return null;var i=t.getRangeAt(0),n=i.startContainer.data;return n?n.substring(i.startOffset,i.endOffset):null},e.Bo=function(t,i,n){var e=new Blob([t],{type:n||"text/plain"}),r=document.createElement("a");r.href=URL.createObjectURL(e),r.download=i,r.click()},e.prototype.Co=function(){var t=this.Qn.files;return t&&t.length>0},e.prototype.Do=function(t){var i=this.Qn.files;return i?!!i.length&&(a.Eo(i[0],t),!0):console.error("Invalid field type for uploadFile: "+this.type)}},{"./Rect":59,"./fileHelper":63,"./tapBehavior":68}],54:[function(t,i,n){"use strict";function e(){}i.g=e,e.Fo=function(t,i){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==~~n.readyState)return 200!=~~n.status?i("xhrError: "+n.status):void i(null,n.response)},n.open("GET",t,!0),n.send()},e.Go=function(t,i){return e.Fo("./assets/"+t,i)},e.Bo=function(t,i){return e.Fo(t,i)}},{}],55:[function(t,i,n){"use strict";function e(t){this.dd=t?"localPref_"+t:"localPref",this.Ho=!1,this.Io=null,this.map={},this.Jo=this.Ko.bind(this),this.Lo=console.error}i.g=e,e.prototype.Mo=function(t){this.Lo=t},e.prototype.No=function(){if(!this.Oo(this.dd)){var t=window.localStorage.getItem("currentVersion");this.Oo(t)&&(this.Ho=!0)}},e.prototype.Po=function(){this.Io&&this.Ko()},e.prototype.Qo=function(){this.Io||(this.Io=window.setTimeout(this.Jo,6e4))},e.prototype.Oo=function(t){try{var i=window.localStorage.getItem(t);return!!i&&(this.map=JSON.parse(i),!0)}catch(t){this.Lo("Cannot load local preferences: "+t)}},e.prototype.Ko=function(){window.clearTimeout(this.Io),this.Io=null;try{window.localStorage.setItem(this.dd,JSON.stringify(this.map)),this.Ho&&(window.localStorage.setItem("currentVersion",this.dd),this.Ho=!1)}catch(t){this.Lo("Cannot save local preferences: "+t)}},e.prototype.$c=function(t,i){var n=this.map[t];return void 0!==n?n:i},e.prototype.Yc=function(t,i){this.map[t]=i,this.Qo()}},{}],56:[function(t,i,n){"use strict";function e(t,i,n){this.parent=t=t||document.body,n=n||{};var e=this.Ro=r.En(null,"notifPopup").$n(!1);n.title&&e.En("title").Hn(n.title),n.So&&(this.To=r.ko(e,"closeBtn",o("#close"),this.close.bind(this))),this.content=e.En("content"),this._n=!1,this.Uo=n.Uo,this.Uo?s.Kn(this.Ro,this.parent):e.Vn(t),i&&(this.Vo(i),this.show())}t("./notificationPopup.less");var r=t("./Dome"),o=t("./getText"),s=t("./PopupDlg"),h=t("./Transit");i.g=e,e.prototype.Wo=function(t){this.To&&this.To.$n(t)},e.prototype.Vo=function(t){this.content.En("msg").Hn(t),this.content.io()},e.prototype.close=function(){this.hide()},e.prototype.clear=function(){this.content.Yn()},e.prototype.show=function(){this._n||(this._n=!0,this.Ro.$n(!0),s.Xo(this.Ro))},e.prototype.hide=function(){this._n&&(this._n=!1,this.Uo?s.Pn(this.Ro):new h(this.Ro).from("opacity",1).Yo("opacity",0).start(500))}},{"./Dome":53,"./PopupDlg":58,"./Transit":61,"./getText":64,"./notificationPopup.less":66}],57:[function(t,i,n){"use strict";function e(){this.Zo={},this.$o=null,this._o=""}function r(t,i){for(var n in i)t.style[n]=i[n]}function o(t,i,n,e){var r,o=n[i],s=e[i];if(o)for(r in o)t.style[r]=s?s[r]||null:null;if(s)for(r in s)t.style[r]=s[r]}i.g=new e,e.prototype.ap=function(t,i){this.Zo=t,this.bp(i,!0),this.Sn(document.body,"body")},e.prototype.cp=function(){return Object.keys(this.Zo)},e.prototype.bp=function(t,i){if(t!==this._o){var n=this.$o;if(this._o=t,this.$o=this.Zo[t],!i)for(var e=document.all,r=0;r<e.length;r++){var o=e[r];this.dp(o,n)}}},e.prototype.Sn=function(t,i){if(this.$o){var n=this.$o[t.localName];if(n&&r(t,n),i&&(n=this.$o["."+i],n&&r(t,n),i.indexOf(" ")>=0))for(var e=i.split(" "),o=0;o<e.length;o++)(n=this.$o["."+e[o]])&&r(t,n)}},e.prototype.dp=function(t,i){o(t,t.localName,i,this.$o);for(var n=t.className.split(" "),e=0;e<n.length;e++)o(t,"."+n[e],i,this.$o)},e.prototype.ep=function(t,i,n){var e=this.$o[i+"+"+n];if(e){var r=this.$o[i]||{};for(var o in e)t.style[o]=r[o]||null}},e.prototype.toggle=function(t,i,n){if(this.$o){var e,o=t.className.split(" ");if(n){var s=this.$o[t.localName+"+"+i];for(s&&r(t,s),e=0;e<o.length;e++)(s=this.$o["."+o[e]+"+"+i])&&r(t,s)}else for(this.ep(t,t.localName,i),e=0;e<o.length;e++)this.ep(t,"."+o[e],i)}}},{}],58:[function(t,i,n){"use strict";function e(){var t=this.fp;t.options&&(t.options.gp=this.id),o.Pn(t.Ro),t.hp&&t.hp(t.options)}function r(t,i,n,r){var o=h.ko(t,"popupDlgBtn",n,e);o.fp=i,o.id=r}function o(t,i,n,e,s){this.parent=t||document.body,this.options=e,this.hp=s;var u=this.Ro=h.En(null,"popupDlg dialog");u.En("dialogTitle").Hn(n||a("#problem"));var c=u.En("content");h.oo(c,"message",i);for(var l=e&&e.buttons||[a("#ok")],p=u.En("btnDiv"),f=0;f<l.length;f++)r(p,this,l[f],f);o.Kn(this.Ro,this.parent)}function s(t){var i=h.En(null,"popupOverlay");return t&&(t=t.Qn||t,i.On("left",t.offsetLeft+"px"),i.On("top",t.offsetTop+"px"),i.On("width",t.scrollWidth+2+"px"),i.On("height",t.scrollHeight+2+"px")),i}t("./popupDlg.less");var h=t("./Dome"),a=t("./getText"),u=t("./tapBehavior"),c=t("./Transit");i.g=o,o.Kn=function(t,i,n){var e=t.ip=s(i);e.parent=i,e.Vn(i),t.Vn(e,!0),e.On("opacity",1),n&&u(e,n)},o.Pn=function(t){var i=t.ip;if(!i.parent)return console.error("Already detached overlay",t);i.On("opacity",0),window.setTimeout(function(n){t.$n(!1),h.removeChild(n,i)},300,i.parent),i.parent=null},o.jp=function(t,i,n){var e={buttons:[a("#yes"),a("#no")]};new o(t,i,a("#confirmTitle"),e,function(t){0===t.gp&&n()})},o.Xo=function(t){new c(t).from("opacity",0).Yo("opacity",1).start(500)}},{"./Dome":53,"./Transit":61,"./getText":64,"./popupDlg.less":67,"./tapBehavior":68}],59:[function(t,i,n){"use strict";function e(t,i,n,e){this.left=t,this.top=i,this.width=n,this.height=e}i.g=e,e.prototype.Mn=function(t,i,n){var e=t.left,r=t.top;switch(i){case 1:e+=t.width+15;break;case-1:e+=-this.width-15;break;case void 0:case 0:e+=t.width/2-this.width/2;break;default:e+=i*t.width}switch(n){case 1:r+=t.height+15;break;case void 0:case-1:r+=-this.height-15;break;case 0:r+=t.height/2-this.height/2;break;default:r+=n*t.height}this.left=Math.round(e),this.top=Math.round(r)},e.prototype.vo=function(t,i){this.left=Math.max(Math.min(this.left,t.width-this.width-i),i),this.top=Math.max(Math.min(this.top,t.height-this.height-i),i)}},{}],60:[function(t,i,n){"use strict";function e(t){this.kp={},this.lp=t.lp,this.mp=t.mp,this.np(t),this.op()}function r(){this.vp.qp(),this.vp.lp(this.id)}function o(){this.vp.qp()}function s(){this.removeEventListener(c.Ip,s),this.Jp.ip.$n(!1)}t("./topMenu.less");var h=t("./Dome"),a=t("./tapBehavior"),u=t("./touchManager"),c=t("./Transit");i.g=e,e.prototype.pp=function(){this.qp()},e.prototype.rp=function(){return this.sp.Qn.clientHeight},e.prototype.tp=function(t){this.up.Hn(t)},e.prototype.wp=function(t){return this.xp.En(t||"menuSeparator")},e.prototype.yp=function(t,i,n){var e=this.xp.En("menuOption "+t).Hn(i);return e.id=t,e.vp=this,this.kp[t]=e,a(e,r),n&&e.En("icon"),e},e.prototype.Gn=function(t){return this.xp.appendChild(t)},e.prototype.removeItem=function(t){this.xp.removeChild(t)},e.prototype.np=function(t){var i=this.ip=h.En(null,"topMenuOverlay");i.vp=this,i.$n(!1),i.On("opacity",0),i.Vn(document.body),a(i,o);var n=h.En(null,"topMenu"),e=this.sp=h.En(n,"menuBtn");e.En("menuBtnIcon btnIcon"),a(e,this.zp.bind(this)),this.up=n.En("topTitle"),this.width=~~(.85*h.Tn);var r=this.Ap=n.En("slideMenu"),s=this.xp=r.En("menuContent");s.On("width",this.width+"px"),s.On("minHeight",h.Un+"px"),r.En("sideHandle").On("height",h.Un+"px");var u=s.En("menuTitle").Hn(t.Bp);a(u,this.qp.bind(this)),this.Cp(-this.width),n.Vn(document.body)},e.prototype.Cp=function(t){this.Dp=t,this.Ap.On(c.Ep,"translate3D("+t+"px,0,0)")},e.prototype.Fp=function(t){var i=Math.max(50,~~(Math.abs(t-this.Dp)/this.width*300));this.Ap.On(c.Gp,c.Hp+" "+i+"ms ease-out"),this.Cp(t)},e.prototype.zp=function(){var t=!1;if(this.ip._n()||(t=!0,this.ip.$n(!0)),this.mp&&t){var i=this.ip.Qn.clientWidth;i++,this.ip.On("opacity",.7)}this.Fp(0)},e.prototype.qp=function(){this.mp&&this.ip.On("opacity",0),this.Ap.Qn.addEventListener(c.Ip,s),this.Ap.Qn.Jp=this,this.Fp(-this.width)},e.prototype.op=function(){var t,i,n,e,r=this;u.Kp(this.Ap.Qn,function(o,s){switch(o){case"dragStart":return t=s,i=n=r.Dp,e=i<0?-1:1,r.Ap.On(c.Gp,null),void r.ip.$n(!0);case"drag":var h=i+(s-t);if(h===n)return;return e=h-n,h>0&&(h=0),n=h,r.Cp(h),void(r.mp&&r.ip.On("opacity",.7*(1+h/r.width)));case"dragEnd":return void(e>0?r.zp():r.qp());case"tap":return r.qp();default:console.error("TopMenu received: "+o)}},{Lp:!0,Mp:0})}},{"./Dome":53,"./Transit":61,"./tapBehavior":68,"./topMenu.less":69,"./touchManager":70}],61:[function(t,i,n){"use strict";function e(t){this.Qn=t.Qn||t,this.Np={},this.Op={},this.Pp={},this.timeout=null,this.Qp=null,this.Rp=null}function r(t,i){window.clearTimeout(t.timeout),t.timeout=null,t.Qn.style[e.Gp]=t.Qp,!i&&t.Rp&&t.Rp(),t.Rp=null}i.g=e,e.prototype.from=function(t,i){return this.Op[t]=i,this},e.prototype.Yo=function(t,i){return this.Pp[t]=i,this},e.prototype.start=function(t,i){var n=this.Qn;n.Sp&&n.Sp.timeout&&r(n.Sp,!0),n.Sp=this,this.Qp=n.style[e.Gp],n.style[e.Gp]=null;for(var o in this.Op)this.Np[o]=n.style[o],n.style[o]=this.Op[o];n.clientHeight||(n=n),n.style[e.Gp]="all "+t+"ms ease-in-out";for(o in this.Pp)this.Np.hasOwnProperty(o)||(this.Np[o]=n.style[o]),n.style[o]=this.Pp[o];return this.Rp=i,this.timeout=window.setTimeout(r,t,this),this},
e.prototype.reverse=function(t,i){var n=this.Pp;this.Pp=this.Op,this.Op=n,this.start(t,i)},e.prototype.Tp=function(t,i){this.Pp=this.Np,this.Np={},this.Op={},this.start(t,i)},function(){void 0===document.body.style.webkitTransition?(e.Gp="transition",e.Ip="transitionend",e.Ep="transform",e.Hp="transform"):(e.Gp="webkitTransition",e.Ip="webkitTransitionEnd",e.Ep="webkitTransform",e.Hp="-webkit-transform")}()},{}],62:[function(t,i,n){var e=".contextMenu {\n  position: relative;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  width: 150px;\n  background-color: rgba(120, 120, 120, 0.2);\n  border-radius: 7px;\n  border: 1px solid #58636d;\n}\n.contextMenu .menuItem {\n  margin: 1px 1px 0 1px;\n  padding: 11px;\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.7);\n  color: #e4e4e4;\n}\n";t("lessify")(e),i.g=e},{"lessify":137}],63:[function(t,i,n){"use strict";n.Eo=function(t,i){var n=new FileReader;n.onloadend=function(){return i(n.result)},n.readAsText(t)}},{}],64:[function(t,i,n){"use strict";function e(t){var i=h[t];if(void 0===i)return"("+t+")";if(arguments.length<=1)return i;for(var n=1;n<arguments.length;n++)i=i.replace("%"+n,arguments[n]);return i}var r=t("./GetFile"),o=t("../log"),s=t("../../assets/i18n_en.json"),h=s;i.g=e,e.init=function(t,i){if(h=s,"en"===t)return i();var n="i18n_"+t+".json";r.Go(n,function(t,e){if(t)return o.error("Failed to get file "+n+": "+t),i(t);h=JSON.parse(e),i()})}},{"../../assets/i18n_en.json":5,"../log":72,"./GetFile":54}],65:[function(t,i,n){"use strict";var e=t("./Dome");n.init=function(t,i){e.init(t,i)}},{"./Dome":53}],66:[function(t,i,n){var e=".notifPopup {\n  z-index: 3000;\n  border-radius: 13px;\n  background-color: rgba(0, 0, 0, 0.7);\n}\n.notifPopup .title {\n  height: 100px;\n  line-height: 100px;\n  padding: 0 20px;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  border-radius: 12px;\n  background-color: rgba(78, 77, 77, 0.2);\n  color: #ffffff;\n  font-size: 38px;\n}\n.notifPopup .closeBtn {\n  position: absolute;\n  top: 0;\n  right: 0;\n  height: 100px;\n  line-height: 100px;\n}\n.notifPopup .content {\n  padding: 20px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  color: white;\n  font-size: 30px;\n}\n";t("lessify")(e),i.g=e},{"lessify":137}],67:[function(t,i,n){var e=".popupOverlay {\n  z-index: 2000;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.7);\n  transition: opacity 300ms ease-out;\n  opacity: 0;\n}\n.popupDlg {\n  margin: 0 80px;\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.popupDlg .content {\n  padding: 20px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.popupDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.popupDlg .btnDiv .popupDlgBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n}\n";t("lessify")(e),i.g=e},{"lessify":137}],68:[function(t,i,n){"use strict";var e=t("./touchManager");i.g=function(t,i){e.Kp(t.Qn,function(n){if(!t.Qn.disabled)return"tap"===n?(i.call(t),!0):void 0})}},{"./touchManager":70}],69:[function(t,i,n){var e='.topMenuOverlay {\n  z-index: 1900;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: #000;\n  -webkit-transition: opacity 300ms ease-out;\n  transition: opacity 300ms ease-out;\n  -webkit-transform: translate3D(0, 0, 0);\n  transform: translate3D(0, 0, 0);\n}\n.topMenu {\n  width: 100%;\n  height: 130px;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n}\n.topMenu .menuBtn {\n  position: relative;\n  display: inline-block;\n  width: 130px;\n  height: 100%;\n  background-color: #000;\n}\n.topMenu .menuBtn .menuBtnIcon {\n  background-image: url("assets/menuBtn.png");\n  -webkit-filter: invert(1) grayscale(1);\n  filter: invert(1) grayscale(1);\n}\n.topMenu .topTitle {\n  display: inline-block;\n  vertical-align: top;\n  width: calc(100% - 130px);\n  height: 100%;\n  overflow: hidden;\n  background-color: #333;\n  color: #fff;\n  padding-left: 31px;\n  font-size: 30px;\n  line-height: 130px;\n}\n.topMenu .slideMenu {\n  z-index: 1901;\n  position: absolute;\n  top: 0;\n}\n.topMenu .sideHandle {\n  width: 10px;\n  display: inline-block;\n  vertical-align: top;\n}\n.topMenu .menuContent {\n  display: inline-block;\n  overflow-x: hidden;\n  background-color: #000;\n  color: #fff;\n}\n.topMenu .menuContent .menuTitle {\n  height: 140px;\n  line-height: 140px;\n  padding-left: 50px;\n  font-size: 43px;\n  border-bottom: 1px solid #909090;\n  background-color: #323435;\n}\n.topMenu .menuContent .menuOption {\n  padding: 0 140px;\n  height: 140px;\n  line-height: 140px;\n  font-size: 50px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.topMenu .menuContent .menuSeparator {\n  border-bottom: 1px solid #777;\n}\n';t("lessify")(e),i.g=e},{"lessify":137}],70:[function(t,i,n){"use strict";function e(){this.Up=this.Vp=0,this.Wp=this.Xp=!1,this.startTime=this.Yp=0,this.Zp=[],this.$p=0,this._p=null,this.aq=!1,r()}function r(){window.addEventListener("mousemove",function t(){d.aq=!0,window.removeEventListener("mousemove",t)})}function o(t){if(d.Wp)return d.bq();d.cq(t.changedTouches[0],t,t.currentTarget)}function s(t){d.dq(t.changedTouches[0],t)}function h(t){if(t.changedTouches.length>1)return d.bq();d.eq(t.changedTouches[0],t)}function a(){d.bq()}function u(t){t.button===f&&d.cq(t,t,t.currentTarget)}function c(t){t.button===f&&d.dq(t,t)}function l(t){d.eq(t,t)}function p(t,i,n){i.gq&&(i.iq=null,t.oq(i,n))}var f=0,d=i.g=new e;e.prototype.fq=function(t){this.Zp.push(t),this.$p++,t.gq=!0,t.addEventListener("touchmove",h),t.addEventListener("touchend",s),t.addEventListener("touchcancel",a),1===this.$p&&(document.addEventListener("mousemove",l),document.addEventListener("mouseup",c))},e.prototype.hq=function(t){var i=this.Zp.indexOf(t);if(i<0)return console.error("_stopListening: not a target",t);this.Zp[i]=null,this.$p--,t.gq=!1,t.iq&&window.clearTimeout(t.iq),t.removeEventListener("touchmove",h),t.removeEventListener("touchend",s),t.removeEventListener("touchcancel",a),0===this.$p&&(document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",c),this.Zp.length=0)},e.prototype.jq=function(){this.kq(null)},e.prototype.kq=function(t){for(var i=0;i<this.Zp.length;i++){var n=this.Zp[i];n&&n!==t&&this.hq(n)}this._p=t},e.prototype.cq=function(t,i,n){this.Xp&&this.lq(),this.fq(n),this.Up=t.clientX,this.Vp=t.clientY,this.startTime=Date.now();var e=n.mq;if(e.Lp&&!this.Wp){var r=e.nq;0===r?i.preventDefault():e.iq=window.setTimeout(p,r,this,n,t)}},e.prototype.eq=function(t,i){var n=Date.now();if(n-this.Yp<50)return i.preventDefault();this.Yp=n;var e;if(this.Wp)return e=this._p.mq,e.pq("drag",t.pageX-e.qq,t.pageY-e.rq),i.preventDefault();for(var r=Math.abs(t.clientX-this.Up)+Math.abs(t.clientY-this.Vp),o=0;o<this.Zp.length;o++){var s=this.Zp[o];if(s&&(e=s.mq,!(r<e.sq)))if(e.Lp){if(!(n-this.startTime<e.nq)){this.oq(s,t);break}this.hq(s)}else this.hq(s)}i.preventDefault()},e.prototype.dq=function(t,i){i.preventDefault();var n,e;if(this.Xp=!0,this.Wp){n=this._p,e=n.mq;if(Date.now()-this.startTime<e.tq)return this.bq();this.Wp=!1,this.hq(n),e.pq("dragEnd",t.pageX-e.qq,t.pageY-e.rq)}else{for(var r=0;r<this.Zp.length&&(!(n=this.Zp[r])||(e=n.mq,!e.pq("tap",t.pageX-e.qq,t.pageY-e.rq)));r++);this.jq()}this.Xp=!1},e.prototype.lq=function(){console.warn("Cleaning up touchManager"),this.Xp=!1,this.jq()},e.prototype.oq=function(t,i){this.Wp=!0,this.startTime=Date.now(),this.kq(t);var n=t.mq;n.pq("dragStart",i.pageX-n.qq,i.pageY-n.rq)},e.prototype.bq=function(){this.Wp&&(this.Wp=!1,this._p.mq.pq("dragCancel")),this.jq()},e.prototype.Kp=function(t,i,n){n=n||{};var e={pq:i,sq:void 0!==n.uq?n.uq:10};n.Lp&&(e.Lp=!0,e.nq=n.vq||0,e.tq=void 0!==n.Mp?n.Mp:100,e.qq=t.offsetLeft,e.rq=t.offsetTop),t.mq=e,t.addEventListener("touchstart",o),t.addEventListener("mousedown",u)}},{}],71:[function(t,i,n){"use strict";function e(t){return decodeURIComponent(t.replace(o," "))}var r=/([^&=]+)=?([^&]*)/g,o=/\+/g;n.wq=function(t){t=(t||window.location.search).substring(1);for(var i={};;){var n=r.exec(t);if(!n)break;i[e(n[1])]=e(n[2])}return i},n.xq=function(t){var i=document.createElement("a");i.href=t,i.click()}},{}],72:[function(t,i,n){"use strict";function e(){this.level=NaN,this.yq=null,this.Di=0,this.wj=1,this.zq=2,this.ERROR=3,this.Aq=4,this.Bq=!1,this.Xe=!1}var r=console;e.prototype.Ci=function(t){t!==this.level&&(this.level=t,this.debug=t<=0?this.Cq:null,this.info=t<=1?this.Qg:null,this.warn=t<=2?this.hn:null,this.error=t<=3?this.Dq:null,this.fatal=t<=4?this.Eq:null)},e.prototype.Fq=function(t){this.yq=t},e.prototype.Gq=function(t,i){var n=this;return function(e){n.level>t||n.yq&&!n.yq(t,e)||i.call(r,e)}};var o=i.g=new e;e.prototype.Cq=o.Gq(0,r.debug),e.prototype.Qg=o.Gq(1,r.info),e.prototype.hn=o.Gq(2,r.warn),e.prototype.Dq=o.Gq(3,r.error),e.prototype.Eq=o.Gq(4,r.error),o.Ci(1)},{}],73:[function(t,i,n){"use strict";function e(){this.appName=r.name,this.appVersion=r.version,this.Hq=null,this.Iq=null}var r=t("../package.json");i.g=new e},{"../package.json":143}],74:[function(t,i,n){"use strict";function e(){var t=window.location;return t.protocol+"//"+t.host+t.pathname}function r(t){this.Nq=t,this.Oq=null,this.files=null,this.Pq=null}var o=t("Dropbox"),s=t("../hh/fileHelper"),h=t("../hh/getText"),a=t("../../config/net.json"),u=t("../hh/PopupDlg"),c=t("../hh/urlHelper");n.Jq=function(t){var i=c.wq(window.location.hash);if(i["error"])return t.Yc("dbxToken",null),new u(null,i["error_description"],h("#problem")+": "+i["error"],{},function(){t.Po(),c.xq(e())}),!1;var n=i["access_token"];return!!n&&(t.Yc("dbxToken",n),t.Po(),c.xq(e()),!0)},n.Kq=function(t){var i=t.$c("dbxToken");return i?new r(i):null},n.Lq=function(){var t=new o({"clientId":a["dropbox-clientId"]}),i=t.Mq(e());c.xq(i)},r.prototype.connect=function(t){this.Oq||(this.Oq=new o({"accessToken":this.Nq})),this.Qq("",t)},r.prototype.Qq=function(t,i){if(!this.Oq)return i(h("#noDropbox"));var n=this;this.Oq.Rq({"path":t}).then(function(t){var e=t["entries"];n.files={};for(var r=0;r<e.length;r++)n.Sq(e[r]);i()}).catch(i)},r.prototype.Sq=function(t){var i=t["path_display"];"file"!==t[".tag"]?this.files[i]={path:i,Tq:!0}:this.files[i]={path:i,timestamp:t["server_modified"]}},r.prototype.Uq=function(t){if("/"!==(t=t||"/"))throw new Error("Unsupported call to getNumEntries + path");return this.Pq=Object.keys(this.files),this.Pq.length},r.prototype.Vq=function(t){var i=this.Pq[t];return i?{path:i,timestamp:this.files[i].timestamp}:null},r.prototype.Bo=function(t,i){if(!this.Oq)return i(h("#noDropbox"));this.Oq.Wq({"path":t}).then(function(t){s.Eo(t["fileBlob"],function(n){i(null,n,t["server_modified"])})}).catch(i)},r.prototype.Do=function(t,i,n){if(!this.Oq)return n(h("#noDropbox"));var e=new Blob([i],{type:"text/plain"}),r=this;this.Oq.Xq({"path":t,"contents":e,"mode":{".tag":"overwrite"},"mute":!0}).then(function(i){var e=i["server_modified"];r.files[t]={timestamp:e},n(null,e)}).catch(n)},r.prototype.Yq=function(t,i){if(!this.Oq)return i(h("#noDropbox"));var n=this;this.Oq.Zq({"path":t}).then(function(){n.files[t]={Tq:!0},i()}).catch(i)},r.prototype.$q=function(t,i){if(!this.Oq)return i(h("#noDropbox"));var n=this;this.Oq._q({"path":t}).then(function(){delete n.files[t],i()}).catch(i)},r.prototype.ar=function(t,i,n){if(!this.Oq)return n(h("#noDropbox"));var e=this;this.Oq.br({"from_path":t,"to_path":i}).then(function(){e.files[i]=e.files[t],delete e.files[t],n()}).catch(n)}},{"../../config/net.json":7,"../hh/PopupDlg":58,"../hh/fileHelper":63,"../hh/getText":64,"../hh/urlHelper":71,"Dropbox":106}],75:[function(t,i,n){"use strict";function e(t,i,n,e){this.qc=t,this.cr=i,this.dr=n,this.er=e,this.gr=null,this.hr=this.ir=null}function r(t){return"/"+t}function o(t){return p+"/"+t}function s(t){return new Date(t).toISOString().substring(0,19)+"Z"}function h(t){return new Date(t).getTime()}var a=t("contra"),u=t("../GameInVault"),c=t("../GameVault").Hc,l=t("../hh/getText"),p="/archivedGames";i.g=e,e.prototype.connect=function(t){this.gr={};var i=this;this.cr.connect(function(n){if(n)return i.jr(n,t);i.kr(t)})},e.prototype.jr=function(t,i){var n=t;"string"==typeof t.error&&(n=t.error,void 0!==t.response&&(n+="\nResponse: "+t.response),void 0!==t.status&&(n+="\nStatus: "+t.status)),this.er(n),i(t)},e.prototype.kr=function(t){for(var i=!1,n=!1,e=this.cr.Uq(),r=0;r<e;r++){var o=this.cr.Vq(r),s=o.path;if("/vaultState.json"===s)i=!0;else if(s===p)n=!0;else{var h=s.substr(1);this.gr[h]=o.timestamp}}n||this.cr.Yq(p,function(){}),i?this.lr(t):(this.hr={},this.ir={},t())},e.mr=s,e.nr=h,e.prototype.or=function(t,i,n){var e=this.dr.Lc(t);if(e===c.Ic)return n();if(e===c.ACTIVE)return n();switch(e){case c.Jc:var r=this.dr.Nc(t),o=s(r.Ja());i>o?(this.dr.Uc(t),this.er(l("#unarchived")+t),n()):(this.er(l("#archived")+l("#remote",t)),this.pr(t,o,n));break;case c.Kc:var h=s(this.dr.Mc(t));i>h?(this.er(l("#undeleted")+t),n()):(this.er(l("#deleted")+l("#remote",t)),this.qr(t,h,n));break;default:throw new Error("Unexpected GameState: "+e)}},e.prototype.rr=function(t,i){var n=this;this.sr(r(t),function(e,r,o){if(e)return i(e);n.tr(r,t,o),n.er(l("#downloaded")+t),i()})},e.prototype.sr=function(t,i){this.cr.Bo(t,function(t,n,e){if(t)return self.jr(t,i);var r=[],o=new u;if(!o.xa(n,r))return self.jr(r,i);i(null,o,e)})},e.prototype.ur=function(t,i){var n=t.La(),e=this,o=this.gr[n];return o?o===t.Ia()?(this.er(l("#alreadySync")+n),i()):void this.wr(t,r(n),function(r){if(r)return i(r);e.vr(t,n,i)}):this.vr(t,n,i)},e.prototype.wr=function(t,i,n){var e=this;this.sr(i,function(i,r){if(i)return n(i);var o=[];if(!t.Ca(r,o))return e.jr(o,n);n()})},e.prototype.vr=function(t,i,n){var e=!!this.gr[i];if(!e){var h=s(t.Ja());if(this.hr[i]>h)return this.dr.Pc(i),this.er(l("#deleted")+i),n();if(this.ir[i]>=h)return this.dr.Sc(i),this.er(l("#archived")+i),n()}var a=this;this.cr.Do(r(i),t.Da(),function(r,s){return r?a.jr(r,n):(a.tr(t,i,s),e?(a.er(l("#synced")+i),n()):a.hr[i]?(a.er(l("#undeleted")+l("#remote",i)),delete a.hr[i],a.xr(n)):a.ir[i]?(a.er(l("#unarchived")+l("#remote",i)),delete a.ir[i],a.xr(function(){a.cr.$q(o(i),n)})):(a.er(l("#uploaded")+i),void n()))})},e.prototype.tr=function(t,i,n){this.gr[i]=n,t.Ha(n,h(n)),this.dr.Dc(t)},e.prototype.yr=function(t,i,n,e){this.ir[i]=n,t.Ha(n,h(n)),this.dr.Vc(t),this.xr(e)},e.prototype.pr=function(t,i,n){this.ir[t]=i;var e=this;this.xr(function(){delete e.gr[t],e.cr.ar(r(t),o(t),n)})},e.prototype.zr=function(t,i){var n=t.La();if(this.gr[n])return i();var e=t.Ia(),r=this.ir[n],s=this;if(r===e)return i();var h=o(n);if(!r)return this.hr[n]?i():this.cr.Do(h,t.Da(),function(e,r){if(e)return i(e);s.er(l("#uploaded")+l("#archivedGame",n)),s.yr(t,n,r,i)});this.wr(t,h,function(e){if(e)return i(e);s.cr.Do(h,t.Da(),function(e,r){if(e)return i(e);s.er(l("#synced")+l("#archivedGame",n)),s.yr(t,n,r,i)})})},e.prototype.Ar=function(t,i){var n=this;this.sr(o(t),function(e,r,o){if(e)return i(e);n.er(l("#downloaded")+l("#archivedGame",t)),n.yr(r,t,o,i)})},e.prototype.qr=function(t,i,n){this.hr[t]=i;var e=this;this.xr(function(){delete e.gr[t],e.cr.$q(r(t),n)})};e.prototype.lr=function(t){var i=this;this.cr.Bo("/vaultState.json",function(n,e){if(n)return i.jr(n,t);var r=JSON.parse(e);i.hr=r["deletedFiles"]||{},i.ir=r["archivedFiles"]||{},t()})},e.prototype.xr=function(t){var i={};i["deletedFiles"]=this.hr,i["archivedFiles"]=this.ir;var n=JSON.stringify(i);this.cr.Do("/vaultState.json",n,t)},e.prototype.Br=function(t,i){this.ur(t,i)},e.prototype.Cr=function(t){var i=this;a.Dr([this.Er.bind(this),this.Fr.bind(this),this.Gr.bind(this),this.Hr.bind(this),this.Ir.bind(this)],function(n){if(n)return i.jr(n,t);i.er(l("#syncDone")),t()})},e.prototype.Er=function(t){var i=this;a.Jr.Dr(this.gr,function(t,n,e){i.or(n,t,e)},t)},e.prototype.Fr=function(t){var i=this;a.Jr.Dr(this.dr.Fc(),function(t,n){i.ur(t,n)},t)},e.prototype.Gr=function(t){var i=this;a.Jr.Dr(this.gr,function(t,n,e){if(i.dr.Ec(n))return e();i.rr(n,e)},t)},e.prototype.Hr=function(t){var i=this;a.Jr.Dr(this.dr.Oc(),function(t,n){i.zr(t,n)},t)},e.prototype.Ir=function(t){var i=this;a.Jr.Dr(this.ir,function(t,n,e){if(i.dr.Lc(n)!==c.Ic)return e();i.Ar(n,e)},t)}},{"../GameInVault":9,"../GameVault":13,"../hh/getText":64,"contra":120}],76:[function(t,i,n){"use strict";var e=t("../../config/net.json");n.Kr=function(t){var i,n=(t.Ua("source")||"").toLowerCase(),e=t.Ua("place")||"";return n.indexOf("littlegolem")>=0?(i=t.Ua("event"),i?{Lr:"LittleGolem",id:i}:null):n.indexOf("www.dragongoserver")>=0?(i=n.substr(n.indexOf("gid=")+4),{Lr:"DragonGo",id:i}):e.indexOf("online-go.com/game/")>=0?(i=e.substr(e.indexOf("/game/")+6),{Lr:"OGS",id:i}):null},n.Mr=function(t,i){return e["server-url"]+"getgame?site="+t+"&id="+i},n.Nr=function(t){switch(t.Lr){case"LittleGolem":return"http://www.littlegolem.net/servlet/sgf/"+t.id+"/game.sgf";case"DragonGo":return"http://www.dragongoserver.net/sgf.php?gid="+t.id+"&owned_comments=1";case"OGS":return"https://online-go.com/api/v1/games/"+t.id+"/sgf";default:return null}};var r={"http://www.littlegolem.com":"LittleGolem","OGS: http://online-go.com/game/":"OGS:","http://www.dragongoserver.net/game.php?gid=":"DragonGo:"};n.Na=function(t,i){for(var n in r)i=i.replace(n,r[n]);return"EV"===t&&""+parseInt(i)===i&&(i="EV:"+i),i}},{"../../config/net.json":7}],77:[function(t,i,n){"use strict";function e(){this.debug=!1,this.Or=this.gn=!1,this.Pr=null,this.Qr=null}i.g=new e,e.prototype.Rr=function(t,i){this.Pr=new t,i(this.Pr)},e.prototype.assert=function(t,i){if(t!==!0)throw new Error("assertion failed: "+(i||t))}},{}],78:[function(t,i,n){"use strict";function e(){this.Sr=null,this.Tr=null,this.fb=null,this.tb=0,this.Ur=null,this.cursor={type:"CR",x:0,y:0},this.Vr=!1,this.Wr={type:null,x:0,y:0}}function r(t){switch(t){case-1:return{type:"mini",c:p.B};case-.5:return{type:"outline",c:p.B};case 0:return null;case.5:return{type:"outline",c:p.W};case 1:return{type:"mini",c:p.W};default:return null}}function o(t){switch(t){case a.ze+v:case a.ye+g:return{type:"mini",c:p.B};case a.ze+g:case a.ye+v:return{type:"mini",c:p.W};case a.xe:return{type:"SL",c:"grey"};default:return null}}function s(t){if(null===t)return null;var i=1,n=0,e=2,r=0;if(void 0!==x&&(n=x),void 0!==k&&(e=k),void 0!==j&&(r=j),t===r)return null;for(var o=t.toFixed(e),s=n;s<e;s++)o=o.nd("0");if(o=o.nd("."),"0."===o.substr(0,2)&&(o=o.slice(1)),0===r){if("0"===o||".0"===o)return null;i=t<1?.6:1}return{type:"LB",text:o,scale:i}}var h=t("../constants"),a=t("../Grid"),u=t("../log"),c=t("../Move"),l=t("../hh/touchManager");t("../../lib/wgo.js");var p=window.WGo,f=c.me,d=c._a,g=h.bb,v=h.ab,b=h.EMPTY,y=window.devicePixelRatio||1,m={};m[p.B]=v,m[p.W]=g;var w={};w[b]=null,w[v]=p.B,w[g]=p.W;i.g=e,e.prototype.create=function(t,i,n,e){var r=n.tb;if(this.fb=n,!this.Sr||this.tb!==r){this.tb=r,e=e||{};var o=e.Xr?0:-.23,s={size:r,width:i,section:{top:o,left:o,right:o,bottom:o},coordFontSize:.6};switch(e.background){case"wood":s.background=(window.Yr||".")+"/assets/wood1.jpg";break;default:s.background="#c75"}t.clear(),this.Sr=new p.Zr(t.ho(),s),this.Vr=!1,this.Wr.type=null,e.Xr||this.Sr.$r(p.Zr._r),this.as()}},e.prototype.as=function(){var t=this;l.Kp(this.Sr.bs,function(i,n,e){if("dragCancel"===i)return t.cs(-1,-1);"drag"===i.substr(0,4)&&(e-=65*y);var r=t.ds(n,e);switch(n=r[0],e=r[1],i){case"dragStart":case"drag":return t.cs(n,e);case"dragEnd":if(t.cs(-1,-1),Date.now()-t.es<300)return;return t.gs(n,e);case"tap":return t.gs(n,e)}},{Lp:!0,vq:300,Mp:500})},e.prototype.hs=function(t){this.js=w[t]},e.prototype.cs=function(t,i){var n=this.ks(t,i);if(this.Vr){if(t===this.cursor.x&&i===this.cursor.y)return;this.Sr.ls(this.cursor)}this.Vr=n,n&&(this.cursor.x=t,this.cursor.y=i,this.es=Date.now(),this.Sr.ms[t][i][0]?(this.cursor.type="SL",this.cursor.c=void 0):(this.cursor.type=void 0,this.cursor.c=this.js),this.Sr.ns(this.cursor))},e.prototype.os=function(t,i,n){this.Wr.type&&this.Sr.ls(this.Wr),this.Wr.type=t,t&&(this.Wr.x=i-1,this.Wr.y=this.tb-n,this.Sr.ns(this.Wr))},e.prototype.ps=function(t,i,n,e){this.Sr.ns({x:i-1,y:this.tb-n,type:"LB",text:t,scale:e?1.1:.8})},e.prototype.ks=function(t,i){return t>=0&&i>=0&&t<this.tb&&i<this.tb},e.prototype.gs=function(t,i){var n=t+1,e=this.tb-i;if(!this.ks(t,i))return this.Tr("!"+(n>=1&&n<=this.tb?f(n):e));if(this.fb.Ud(n,e)===b){var r=d(n,e);this.Tr(r)}},e.prototype.qs=function(t){this.Tr=t},e.prototype.ds=function(t,i){var n=this.Sr;return t=Math.round((t*y-n.left)/n.rs),i=Math.round((i*y-n.top)/n.ss),[t,i]},e.prototype.refresh=function(){var t=!1;"regular"!==this.Ur&&(this.Ur="regular",t=!0);for(var i=0;i<this.tb;i++)for(var n=0;n<this.tb;n++){var e=this.fb.Ud(n+1,this.tb-i),r=w[e],o=this.Sr.ms[n][i][0];t&&(o=null,this.Sr.ts(n,i)),null===r?o&&this.Sr.ts(n,i):o&&o.c===r||(o&&this.Sr.ts(n,i),this.Sr.ns({x:n,y:i,c:r}))}},e.prototype.show=function(t,i,n){this.refresh(),this.Ur=t;for(var e=0;e<this.tb;e++)for(var r=0;r<this.tb;r++){var o=n(i[this.tb-e][r+1]);o&&(o.x=r,o.y=e,this.Sr.ns(o))}};var x,k,j;e.prototype.us=function(t,i,n){x=t,k=i,j=n};var S={fk:r,vs:o,value:s};e.prototype.ws=function(t,i){var n=S[t];if(!n)return u.error&&u.error("invalid display type: "+t);this.show(t,i,n)},e.prototype.xs=function(t){this.show("scoring",t,o)}},{"../../lib/wgo.js":100,"../Grid":17,"../Move":21,"../constants":50,"../hh/touchManager":70,"../log":72}],79:[function(t,i,n){"use strict";function e(t,i){this.dr=t,this.hp=i,this.np(),s.Xo(this.Ro)}t("./importDlg.less");var r=t("../hh/Dome"),o=t("../hh/getText"),s=t("../hh/PopupDlg");i.g=e,e.prototype.np=function(){var t=this.Ro=r.En(null,"importDialog dialog");t.$n(!1),t.En("dialogTitle").Hn(o("#importGame"));var i=this.ys=t.En("mainDiv");this.zs=r.qo(i,"loadGame",o("#fromFile")).setAttribute("type","file").setAttribute("id","fileInput").$n(!1),new r(i,"label","btn fileInputBtn").Hn(o("#selectFile")).setAttribute("for","fileInput"),this.zs.v("change",this.As.bind(this)),r.po(i);var n=i.En("moves");this.wf=r.qo(n,"moves",o("#fromText")),n.En("loadMovesInfo").Hn(o("#fromTextHelp"));var e=t.En("btnDiv");r.ko(e,"loadBtn",o("#load"),this.As.bind(this)),r.ko(e,"cancelBtn",o("#cancel"),this.Bs.bind(this)),t.$n(!0),s.Kn(t,document.body)},e.prototype.As=function(){if(this.zs.Co()){var t=this;this.zs.Do(function(i){t.Cs(i)})}else this.Cs(this.wf.value())},e.prototype.Cs=function(t){if(t){var i=[],n=this.dr.Wc(t,i);if(!n)return new s(null,i.join("\n"));this.hp({Vb:n})&&s.Pn(this.Ro)}},e.prototype.Bs=function(){s.Pn(this.Ro),this.hp({Ds:!0})}},{"../hh/Dome":53,"../hh/PopupDlg":58,"../hh/getText":64,"./importDlg.less":90}],80:[function(t,i,n){"use strict";function e(t,i,n){var e=this.Qn=t.En("moveIndicator "+i);this.Es=e.En("label").Hn(n);var r=e.En("icon");this.Fs=r.En("text")}t("./moveIndicator.less");var r=t("../constants"),o=r.bb,s=r.ab;i.g=e,e.prototype.Gs=function(t,i,n){this.Qn.$n(null!==t),null!==t&&(this.Qn.co("black",i===s),this.Qn.co("white",i===o),this.Fs.Hn(t),n&&this.Es.Hn(n))}},{"../constants":50,"./moveIndicator.less":91}],81:[function(t,i,n){"use strict";function e(t,i){this.dr=t,this.Hs=i,this.Is=!1,this.Js=null,this.Ks=null,this.np(),this.hd(),a.Xo(this.Ro)}function r(){this.Ms.Ls(this)}t("./myArchivedGamesDlg.less");var o=t("../hh/Dome"),s=t("../GameInVault"),h=t("../hh/getText"),a=t("../hh/PopupDlg"),u=t("../hh/tapBehavior");i.g=e,e.prototype.Ls=function(t){this.Js&&this.Js.co("selected",!1),t.co("selected",!0),this.Js=t,this.Ks=t.pa,this.Ns()},e.prototype.Os=function(){this.Ps.Xn()||this.Ps.En("emptyMsg").Hn(h("#empty")),this.Js=null,this.Ns()},e.prototype.Ns=function(){var t=!!this.Js;this.Qs.bo(t),this.Rs.bo(t)},e.prototype.Ss=function(){if(this.Js){var t=h("#deleteGameConfirm")+"\n\n"+this.Js.text(),i=this;a.jp(null,t,function(){i.dr.Rc(i.Ks)||console.error("Failed to delete gameId: "+i.Ks),i.Ps.removeChild(i.Js),i.Os()})}},e.prototype.Ts=function(){this.Js&&this.dr.Uc(this.Ks)&&(this.Is=!0,this.Ps.removeChild(this.Js),this.Os())},e.prototype.hd=function(){var t=this.dr.Oc();t.sort(s.Oa),this.Ps.Yn();for(var i=0;i<t.length;i++){var n=t[i],e=this.Ps.En("oneGame").Hn(n.Ka());e.pa=n.La(),e.Ms=this,u(e,r)}this.Os()},e.prototype.np=function(){var t=this.Ro=o.En(null,"myArchivedGamesDialog dialog");t.$n(!1),t.En("dialogTitle").Hn(h("#archivedGames"));var i=this.ys=t.En("mainDiv");this.Ps=i.En("gameList"),this.Qs=o.ko(i,"delGameBtn",h("#deleteGame"),this.Ss.bind(this)),this.Rs=o.ko(i,"restoreGameBtn",h("#restoreGame"),this.Ts.bind(this));var n=t.En("btnDiv");o.ko(n,"closeBtn",h("#close"),this.Us.bind(this)),t.$n(!0),a.Kn(t,document.body)},e.prototype.Us=function(){a.Pn(this.Ro),this.Is&&this.Hs()}},{"../GameInVault":9,"../hh/Dome":53,"../hh/PopupDlg":58,"../hh/getText":64,"../hh/tapBehavior":68,"./myArchivedGamesDlg.less":92}],82:[function(t,i,n){"use strict";function e(t,i){this.dr=t,this.hp=i,this.result={},this.Js=null,this.Ks=null,this.np(),this.hd(),c.Xo(this.Ro)}function r(){this.Ms.Ls(this)}function o(){var t=this.Ms;t.Os(),t.Xs.bo(this.value()>0)}t("./myGamesDlg.less");var s=t("../hh/Dome"),h=t("../GameInVault"),a=t("../hh/getText"),u=t("./MyArchivedGamesDlg"),c=t("../hh/PopupDlg"),l=t("../hh/tapBehavior");i.g=e,e.prototype.Ls=function(t){this.Js&&this.Js.co("selected",!1),t.co("selected",!0),this.Js=t,this.Ks=t.pa,this.Ns(),this.Vs.select(0)},e.prototype.Os=function(){this.Ps.Xn()||this.Ps.En("emptyMsg").Hn(a("#myGamesHelp")),this.Js&&this.Js.co("selected",!1),this.Js=null,this.Ns()},e.prototype.Ns=function(){var t=!!this.Js;this.Qs.bo(t),this.Ws.bo(t),this.Xs.bo(t)},e.prototype.Ss=function(){if(this.Js){var t=a("#deleteGameConfirm")+"\n\n"+this.Js.text(),i=this;c.jp(null,t,function(){i.dr.Pc(i.Ks)||console.error("Failed to delete gameId: "+i.Ks),i.Ps.removeChild(i.Js),i.Os()})}},e.prototype.Ys=function(){if(this.Js){var t=a("#archiveGameConfirm")+"\n\n"+this.Js.text(),i=this;c.jp(null,t,function(){i.dr.Sc(i.Ks)&&(i.Ps.removeChild(i.Js),i.Os())})}},e.prototype.Zs=function(){new u(this.dr,this.hd.bind(this))},e.prototype.hd=function(){var t=this.dr.Fc();t.sort(h.Oa),this.Ps.Yn();for(var i=0;i<t.length;i++){var n=t[i],e=this.Ps.En("oneGame").Hn(n.Ka());e.pa=n.La(),e.Ms=this,l(e,r)}this.Os()},e.prototype.np=function(){var t=this.Ro=s.En(null,"myGamesDialog dialog");t.$n(!1),t.En("dialogTitle").Hn(a("#myGames"));var i=this.ys=t.En("mainDiv");this.Ps=this.ys.En("gameList"),this.Qs=s.ko(i,"delGameBtn",a("#deleteGame"),this.Ss.bind(this)),this.Ws=s.ko(i,"archiveGameBtn",a("#archiveGame"),this.Ys.bind(this)),this.$s=s.ko(i,"showArchiveBtn",a("#showArchivedGames"),this.Zs.bind(this));var n=i.En();s.oo(n,"inputLbl",a("#recentGames"));var e=[a("#none")].concat(this.dr._c());this.Vs=s.uo(n,"recentGames",e,"byIndex"),this.Vs.v("change",o),this.Vs.Ms=this;var r=t.En("btnDiv");this.Xs=s.ko(r,"loadBtn",a("#load"),this.As.bind(this)),s.ko(r,"cancelBtn",a("#cancel"),this.Cs.bind(this,!0)),t.$n(!0),c.Kn(t,document.body)},e.prototype.As=function(){var t=this.Vs.value();t>0?(this.result.Vb=this.dr.zc(t-1),this.Cs()):this.Js&&(this.result.Vb=this.dr.xc(this.Ks),this.Cs())},e.prototype.Cs=function(t){this.result.Ds=!!t,this.hp(this.result)&&c.Pn(this.Ro)}},{"../GameInVault":9,"../hh/Dome":53,"../hh/PopupDlg":58,"../hh/getText":64,"../hh/tapBehavior":68,"./MyArchivedGamesDlg":81,"./myGamesDlg.less":93}],83:[function(t,i,n){"use strict";function e(t,i){this.hp=i,this._s=t.tb,this.at=t.at,this.np(t),this.bt(),this.ct(),a.Xo(this.Ro)}t("./newGameDlg.less");var r=t("../ai"),o=t("../constants"),s=t("../hh/Dome"),h=t("../hh/getText"),a=t("../hh/PopupDlg"),u=t("../hh/Transit"),c=o.ab,l=o.bb,p=[5,7,9,13,19];i.g=e,e.prototype.bt=function(){var t=this._s;this.dt.Hn(t+" x "+t);var i=t+"x"+t;this.et.On("backgroundImage",'url("assets/'+i+'.png")'),this.et.On("backgroundSize",Math.ceil(t/19*100)+"%"),this.ft.bo(t>5),this.gt.bo(t<19)},e.prototype.ht=function(t){var i=p.indexOf(this._s)+t;this._s=p[i],this.bt()},e.prototype.ct=function(){this.it[c].co("robot",this.at[c]),this.it[l].co("robot",this.at[l])},e.prototype.jt=function(t){this.at[t]=!this.at[t],this.ct()},e.prototype.np=function(t){this.options=t;var i=this.Ro=s.En(document.body,"newGameDialog dialog");i.$n(!1),i.En("dialogTitle").Hn("Start a new game");var n=i.En("mainDiv"),e=n.En("centeredDiv").En("boardDiv");this.it=[],this.it[0]=s.mo(e,"playerBtn",this.jt.bind(this,0));var o=this.kt=e.En("sizeBox");this.gt=s.mo(o,"sizeBtn",this.ht.bind(this,1)),this.et=o.En("boardImgFrame").En("boardImg"),this.dt=this.et.En("curSize"),this.ft=s.mo(o,"sizeBtn",this.ht.bind(this,-1)),this.ft.co("down",!0),this.it[1]=s.mo(e,"white playerBtn",this.jt.bind(this,1)),this.lt=s.ko(n,"advancedBtn","More options >>",this.nt.bind(this));var a=this.ot=i.En("advancedDiv");s.oo(a,"inputLbl","Handicap:"),this.pt=s.uo(a,"handicap",[0,2,3,4,5,6,7,8,9],null,t.pt);var u=a.En("rules");s.oo(u,"inputLbl","Rules:"),this.rules=s.uo(u,"rules",["Japanese","Chinese"],null,t.rules);var c=Object.keys(r.rn);if(c.length>1){var l=a.En();s.oo(l,"inputLbl","Black AI:"),this.qg=s.uo(l,"defaultAi",c,null,r.qg.name),s.oo(l,"defAiInfo","(White AI always uses latest AI version)")}var p=s.ko(i,"startBtn",h("#play"),this.qt.bind(this));i.$n(!0);var f=this.ot.Qn.clientHeight+p.Qn.clientHeight+24;this.ot.On("marginTop",-f+"px")},e.prototype.nt=function(){this.rt?(this.st=!this.st,this.rt.Tp(200)):(this.ot.$n(!0),this.st=!0,this.rt=new u(this.ot).Yo("marginTop","0").start(200)),this.lt.Hn("More options"+(this.st?" <<":" >>"))},e.prototype.qt=function(){var t=this.options;t.tb=this._s,t.pt=~~this.pt.value(),t.at=this.at,r.qg=this.qg?r.rn[this.qg.value()]:r.qg,t.rules=this.rules.value(),this.Cs()},e.prototype.Cs=function(){this.close(),this.hp(this.options)},e.prototype.close=function(){s.removeChild(document.body,this.Ro)}},{"../ai":49,"../constants":50,"../hh/Dome":53,"../hh/PopupDlg":58,"../hh/Transit":61,"../hh/getText":64,"./newGameDlg.less":94}],84:[function(t,i,n){"use strict";function e(t){this.parent=t,this.tt=null}t("./progressLog.less");var r=t("../hh/NotificationPopup");i.g=e,e.prototype.start=function(t,i){this.tt=new r(this.parent,null,{So:!0,Uo:!0,title:t}),this.tt.Wo(!1),this.tt.Vo(i),this.tt.show()},e.prototype.stop=function(){this.tt.Wo(!0),this.tt=null},e.prototype.Vo=function(t){this.tt.Vo(t)}},{"../hh/NotificationPopup":56,"./progressLog.less":95}],85:[function(t,i,n){"use strict";function e(t){this.Xb=!1,this.Hq=t,this.Vb=t.Vb,this.ut=t.ut,this.ra=null,this.vt=null,this.ai=null,this.wt()}t("./reviewUi.less");var r=t("../constants"),o=t("../hh/ContextMenu"),s=t("../hh/Dome"),h=t("../hh/getText"),a=t("../Move"),u=a.$a;i.g=e,e.prototype.wt=function(){this.Xb=!1,this.ra=null,this.bookmarks=[],this.xt=this.yt=-1},e.prototype.zt=function(t,i,n){this.vt=s.xo(),this.At=s.ko(t,"study","",this.Bt.bind(this)),s.ko(i,"back10","<<",this.Ct.bind(this)),s.ko(i,"back1","<",this.Dt.bind(this,-1)),s.ko(i,"forw1",">",this.Dt.bind(this,1)),s.ko(i,"forw10",">>",this.Et.bind(this)),this.Ft=s.mo(n,"delBookmarkBtn",this.Gt.bind(this)),this.Ht=s.mo(n,"cycleBtn",this.It.bind(this),"."),this.Jt=s.mo(n,"pruneBtn",this.Kt.bind(this))},e.prototype.Lt=function(){this.At.Hn(this.Xb?"...":h("#review")),this.vt.$n(["back1","back10","forw1","forw10","pruneBtn","cycleBtn","delBookmarkBtn"],this.Xb),this.Xb&&this.Mt()},e.prototype.Bt=function(){if(!this.Xb)return this.Nt();var t=new o({Jn:!0});t.Gn(h("#evalScore"),this.Ot.bind(this)),
t.Gn(h("#bookmark"),this.Pt.bind(this)),t.Gn(h("#rewindAll"),this.Qt.bind(this)),t.Gn(h("#endStudy"),this.Rt.bind(this)),t.In(this.At,1,0)},e.prototype.Ot=function(){var t=this.Hq.St(r.ab).jn();this.Hq.Sr.xs(t[0]),this.ai.Hn(this.Hq.Tt.ug(t[1]).join("\n"))},e.prototype.Pt=function(){this.xt=this.yt=this.bookmarks.length,this.bookmarks.push(this.ra.getBookmark()),this.Mt()},e.prototype.Gt=function(){this.Ut=!0,this.bookmarks.splice(this.xt,1),this.xt=-1,this.Mt()},e.prototype.It=function(){this.xt!==-1||this.Ut||(this.yt===this.bookmarks.length-1&&(this.yt=-1),this.bookmarks.push(this.ra.getBookmark()));var t=(this.yt+1)%this.bookmarks.length,i=this.bookmarks[t];this.ra.Vf(i),this.Vb.wb();for(var n=this.ra.Zf(i),e=0;e<n.length;e++)this.Vb.Hb(n[e]);this.Vt()},e.prototype.Kt=function(){var t=this.ra;if(t.Rf())return!1;for(var i;;){if(i=t.Pf(),!t.Uf())return!1;if(this.Vb.Hb("half_undo"),t.ig())break}return!!t.lg(i)&&(this.Vt(),!0)},e.prototype.Nt=function(){this.Xb=!0,this.ra=this.ut.jc(),this.ai=this.Hq.Wt,this.Hq.Lt(),this.Vt()},e.prototype.Rt=function(){this.Xb=!1,this.Xt(),this.ut.kc(),this.Yt(),this.Hq.Zt(),this.Hq.$t(),this.Hq.Lt()},e.prototype._t=function(t){if(!this.Vb.Hb(t))return this.Hq.statusMessage(this.Vb.Ib().join("\n"));this.ra.Xf(t),this.Vt()},e.prototype.Ct=function(){this.Dt(-10)},e.prototype.Et=function(){this.Dt(10)},e.prototype.Dt=function(t){for(var i,n=this.ra,e=0;e<t&&(i=n.fg())&&(this.Vb.Hb(i),!n.ig());e++);for(e=0;e>t&&n.Uf()&&(this.Vb.Hb("half_undo"),!n.ig());e--);this.Vt()},e.prototype.Qt=function(){this.ra.Wf(),this.Vb.wb(),this.Vt()},e.prototype.Xt=function(){for(this.ra.Wf(),this.Vb.wb();;){var t=this.ra.gg();if(!t)break;this.Vb.Hb(t)}},e.prototype.Vt=function(){this.Hq.Zt();var t=this.ra,i=t.hg();this.Ut=!1;var n=t.getBookmark();this.xt=-1;for(var e=0;e<this.bookmarks.length;e++)if(t.Yf(n,this.bookmarks[e])){this.xt=this.yt=e;break}if(this.Ht.$n(this.bookmarks.length),this.Ft.$n(this.xt!==-1),this.vt.bo(["forw1","forw10"],i),this.vt.bo(["back1","back10"],t.Qf()>=0),this.Mt(),i||this.Hq.au(),this.bu(i),this.Hq.cu){var r=t.Pf();r&&r.length<=3&&this.Hq.du(r)}},e.prototype.Mt=function(){var t=!!this.bookmarks.length;this.Jt.$n(!t&&!this.ra.Rf()),this.Ht.$n(t),this.xt!==-1?(this.Ft.$n(!0),this.Ht.Hn(this.xt+1+"/"+this.bookmarks.length)):(this.Ft.$n(!1),this.Ht.Hn(""))},e.prototype.Yt=function(){this.ai.Yn()},e.prototype.bu=function(t){if(this.ai.Yn(),this.Hq.$t(t),t){var i=this.ra.ig();i&&this.eu(t,i)}this.fu()},e.prototype.eu=function(t,i){for(var n=0;n<i.length;n++){var e=i[n];if(e){var r=e===t||0===n,o=u(e),h=n?String.fromCharCode(64+n):"*";o?this.Hq.Sr.ps(h,o[0],o[1],r):h=e,s.ko(this.ai,"variationBtn",h,this._t.bind(this,e))}}},e.prototype.fu=function(){var t=this.ra.$f();t&&t.Og&&this.ai.En("moveComment").Hn(t.Og)}},{"../Move":21,"../constants":50,"../hh/ContextMenu":52,"../hh/Dome":53,"../hh/getText":64,"./reviewUi.less":96}],86:[function(t,i,n){"use strict";function e(t){var i=this.Ro=s.En(null,"settingDlg dialog");i.En("dialogTitle").Hn(a("#settings"));var n=i.En("content"),e=u.cp();s.oo(n,"inputLbl",a("#colorTheme")+":"),s.uo(n,"theme",e,null,u._o).v("change",function(){var i=this.value();u.bp(i),t.Yc("theme",i)});var h=n.En("cloudDiv");s.oo(h,"inputLbl",a("#syncMyGames")+":"),s.ko(h,"dropboxBtn",a("#setupDropbox"),r);var l=i.En("btnDiv");s.ko(l,"okBtn",a("#ok"),o).fp=this,c.Kn(i,document.body)}function r(){h.Lq()}function o(){var t=this.fp;c.Pn(t.Ro)}t("./settingDlg.less");var s=t("../hh/Dome"),h=t("../net/DropboxHelper"),a=t("../hh/getText"),u=t("../hh/Painter"),c=t("../hh/PopupDlg");i.g=e},{"../hh/Dome":53,"../hh/Painter":57,"../hh/PopupDlg":58,"../hh/getText":64,"../net/DropboxHelper":74,"./settingDlg.less":97}],87:[function(t,i,n){"use strict";function e(t){this.iu(),this.qc=_,this.Vb=new c,this.Tt=new C(this.Vb),this.ut=new l(this.Vb),this.dr=new p(_),this.ju=new z(this),this.Sr=null,this.ku=new j(document.body),this.lu=u.Kq(_),this.mu=0,this.nu=!this.ou,t&&this.Vb.qb(t)}t("./ui.less");var r=t("../ai"),o=t("./Board"),s=t("../../config/colors.json"),h=t("../constants"),a=t("../hh/Dome"),u=t("../net/DropboxHelper"),c=t("../GameLogic"),l=t("../GameRecord"),p=t("../GameVault"),f=t("../hh/GetFile"),d=t("../hh/getText"),g=t("../net/goSites"),v=t("../hh"),b=t("./ImportDlg"),y=t("../main"),m=t("../Move"),w=t("./MoveIndicator"),x=t("./MyGamesDlg"),k=t("./NewGameDlg"),j=t("./ProgressLog"),S=t("../hh/Painter"),A=t("../hh/PopupDlg"),M=t("../hh/LocalPref"),z=t("./ReviewUi"),C=t("../ScoreAnalyser"),D=t("./SettingDlg"),E=t("../net/SyncHelper"),T=t("./UiTopMenu"),G=m.$a,O=m.Za,q=h.bb,B=h.ab,H=h.zn,I=h.yn,_=new M("1g0_1");e.gu=function(){_.No(),S.ap(s,_.$c("theme",".neonBlack")),v.init(S),document.body.style.height=a.Un+"px",d.init("en",function(){u.Jq(_)||(new e).hu()})},i.g=e,e.prototype.iu=function(){this.tb=9,this.pt=0,this.at=[H,I],this.pu=!1},e.prototype.hu=function(){a.zo(y.appName+(this.nu?"":" dev")),window.addEventListener("beforeunload",this.qu.bind(this,"unloading")),window.addEventListener("visibilitychange",this.qu.bind(this,"visibility")),window.setInterval(this.qu.bind(this,"autosave"),3e5),this.mu=_.$c("newGameIndex",1),this.ru=new T(this.su.bind(this));var t=this.dr.Zc();if(t){if(this.tu(t))return;this.iu()}this.uu()},e.prototype.qu=function(t){("visibility"!==t?document.hidden:!document.hidden)||(this.pu&&this.dr.Xc(this.ut.cc()),_.Yc("newGameIndex",this.mu),_.Po())},e.prototype.vu=function(){this.pu&&(this.dr.Ac(this.ut.cc()),this.pu=!1)},e.prototype.su=function(t){switch(t){case"newGame":this.uu();break;case"myGames":this.wu();break;case"importGame":this.xu();break;case"exportGame":this.yu();break;case"syncGame":this.zu();break;case"syncMyGames":this.Au();break;case"settings":new D(_);break;case"downloadLatest":this.Bu()}},e.prototype.Cu=function(t){this.rules=t,this.Vb.eb(t)},e.prototype.Zt=function(){this.Sr.refresh(),this.Du&&this.Eu()},e.prototype.Fu=function(t,i,n,e){var r=this.Gu="compact"===t,s=this.Hu=a.En(i,"gameUi");n&&s.En(r?"testTitle":"pageTitle").Hn(n),this.Iu=s.En("board"),e&&(this.Ju=s.En("boardDesc").Zn(e));var h=s.En("underBoard");this.Ku(h),this.Lu(h),this.nu||this.Mu();var u=this.Vb.fb.tb+2;if(r)this.Nu=28*u;else{this.Lt();var c=a.Un-10-this.ru.rp()-h.Qn.clientHeight;this.Nu=Math.min(c,a.Tn-15)}this.Sr=new o,this.Sr.qs(this.Ou.bind(this))},e.prototype.Pu=function(){this.ru.Qu(!!this.lu),this.Hu&&(a.removeChild(document.body,this.Hu),this.Hu=null,this.Sr=null)},e.prototype.uu=function(){if(!this.Ru){this.vu(),this.Pu();var t={tb:this.tb,pt:this.pt,at:this.at,rules:this.rules},i=this;this.Ru=new k(t,function(t){return i.tb=t.tb,i.pt=t.pt,i.at=[t.at[B]?H:I,t.at[q]?H:I],i.Cu(t.rules),i.Su(),i.Ru=null,!0})}},e.prototype.wu=function(){this.vu(),this.Pu();var t=this;new x(this.dr,function(i){return i.Ds?(t.Tu(),!0):t.tu(i.Vb)})},e.prototype.xu=function(){this.vu(),this.Pu();var t=this;new b(this.dr,function(i){return i.Ds?(t.Tu(),!0):t.tu(i.Vb)})},e.prototype.Tu=function(){this.Hu||this.Ru||this.uu()},e.prototype.Ku=function(t){var i=this.Uu=t.En("statusBar");this.Vu=new w(i,"lastMove","Last:"),this.Wt=i.En("message"),this.Wu=new w(i,"nextPlayer","Next:")},e.prototype.$t=function(t){var i=this.Vb.history;if(i.length){var n=O(i[i.length-1]);this.Vu.Gs(n,1-this.Vb.kb,"#"+i.length+":");var e=G(n);e?this.Sr.os("CR",e[0],e[1]):this.Sr.os(null)}else this.Vu.Gs(null);t=this.Vb.nb?null:O(t||""),this.Wu.Gs(t,this.Vb.kb),this.Sr.hs(this.Vb.kb)},e.prototype.statusMessage=function(t){t.indexOf("\n")===-1&&(t="\n"+t),this.Wt.Hn(t)},e.prototype.Lu=function(t){var i=this.Xu=t.En("mainControls"),n=i.En("leftDiv"),e=i.En("mainDiv"),r=i.En("rightDiv"),o=this;this.Gu||this.ju.zt(n,e,r),this.controls=a.xo(),a.ko(e,"bPass",d("#pass"),function(){o.Yu("pass")}),a.ko(e,"next","Next",function(){o.Zu(1)}),a.ko(e,"next10","Next 10",function(){o.Zu(10)}),a.ko(r,"nextAll","Finish",function(){o.Zu()}),a.ko(e,"bUndo",d("#undo"),function(){o.$u()}),a.ko(e,"accept","Accept",function(){o._u(!0)}),a.ko(e,"refuse","Refuse",function(){o._u(!1)}),a.ko(e,"newg",d("#newGame"),this.uu.bind(this)),a.ko(r,"bResi",d("#resign"),this.av.bind(this)),this.bv=n.En("aiVsAiFlags"),this.cv=a.ro(this.bv,"animated","Animated")},e.prototype.Lt=function(){var t=this.ju.Xb,i=this.Vb.nb,n=this.Vb.mb,e=!(i||n||t),r=this.at[B]&&this.at[q],o=this.Gu;o||this.ju.Lt(),this.controls.$n(["accept","refuse"],n&&!t),this.controls.$n(["bUndo","bPass","bResi"],e&&!r),this.controls.$n(["next","next10","nextAll"],e&&r),this.controls.$n(["aiVsAiFlags"],e&&r&&!o),this.controls.$n(["newg"],i&&!t&&!o),this.nu||this.dv(e,t,r)},e.prototype.tu=function(t){this.ev();var i=[];return this.ut.ec(t,i)?(this.Ru&&(this.Ru=this.Ru.close()),this.at=[void 0,void 0],this.fv(),this.gv(),!0):(new A(null,i.join("\n")),this.Pu(),!1)},e.prototype.Su=function(){this.ev();var t=this.ut._b;t.Sa("source",y.appName),t.Sa("event",this.mu++),this.fv(),this.statusMessage("Game started. Your turn..."),this.gv()},e.prototype.ev=function(){this.vu(),this.ju.wt(),this.Vb.sb(this.tb,this.pt,this.jb),this.ut.ac()},e.prototype.hv=function(){this.ut.ac(),this.fv()},e.prototype.fv=function(){this.iv();var t=this.Vb;this.tb=t.fb.tb,this.pt=t.Fb(),this.rules=t.yb(),this.nu||this.ou(),this.Hu||this.Fu("main",document.body);var i=this.Gu?void 0:{background:"wood"};this.Sr.create(this.Iu,this.Nu,t.fb,i),this.jv()},e.prototype.iv=function(){this.kv=[];for(var t=this.ut._b,i=B;i<=q;i++){var n=i===B?"playerBlack":"playerWhite",e=t.Ua(n);if(void 0===this.at[i]&&(e&&e.indexOf(r.sn.Hm)>=0?this.at[i]=H:this.at[i]=I),this.at[i]){var o=this.St(i).constructor;e||t.Sa(n,o.Hm+"-"+o.Im)}else e||t.Sa(n,"human")}},e.prototype.jv=function(){this.Zt(),this.$t(),this.Lt()},e.prototype.St=function(t){var i=this.kv[t];if(i)return i;var n=t===B?r.qg:r.sn;return i=this.kv[t]=new n(this.Vb,t)},e.prototype.gv=function(){this.pu=!0,this.ru.lv(this.ut._b,!!this.lu),this.au()||this.mv()},e.prototype.Ou=function(t){if("!"===t[0])return!this.nu&&this.nv(t.substr(1));var i=this.ju.Xb;if(i||this.cu)return!this.nu&&this.cu&&this.ov(t,null,!0),void(i&&this.ju._t(t));this.pv||this.at[this.Vb.kb]&&this.nu||this.Vb.mb||this.Vb.nb||this.Yu(t)},e.prototype.au=function(){return this.Vb.mb?(this.qv(),!0):!!this.Vb.nb&&(this.ij(),this.rv(),!0)},e.prototype.ij=function(){var t=this.Tt.tg();this.sv=t.join("\n")},e.prototype.qv=function(){this.ij(),this.statusMessage(this.sv),this.Lt(),this.Sr.xs(this.Tt.wg().wd)},e.prototype._u=function(t){var i=this.Vb.kb;if(this.at[i]&&!this.at[1-i]&&(i=1-i),this.Vb.Rb(t,i),t)return this.rv();this.statusMessage("Score in dispute. Continue playing..."),this.Lt(),this.Zt(),this.at[B]&&this.at[q]||this.mv()},e.prototype.rv=function(){this.statusMessage(this.sv),this.Lt()},e.prototype.tv=function(t){var i=this.uv=this.kv[this.Vb.kb],n=Date.now();this.pv=!0;var e=i.bn(),r=Math.max(0,(t||0)-(Date.now()-n));window.setTimeout(function(t){t.vv(e),t.pv=!1},r,this)},e.prototype.wv=function(t){var i=this.uv=this.kv[this.Vb.kb];this.xv=i.Um;var n=i.bn();return this.vv(n,t),n},e.prototype.vv=function(t,i){this.Vb.Hb(t),i||(this.Zt(),this.$t(),this.statusMessage(""),this.Du&&this.ov(t,this.uv,!1)),this.au()},e.prototype.Yu=function(t){if(!this.au()){if(!this.Vb.Hb(t))return this.statusMessage(this.Vb.Ib().join("\n"));this.Zt(),this.$t(),this.statusMessage(""),this.at[this.Vb.kb]&&this.tv(500)}},e.prototype.av=function(){var t=this;A.jp(this.Hu,d("#resignConfirm"),function(){t.Vb.Hb("resi"),t.$t(),t.au()})},e.prototype.$u=function(){var t="undo";if((this.at[B]===this.at[q]||this.cu)&&(t="half_undo"),!this.Vb.Hb(t))return this.statusMessage(this.Vb.Ib().join("\n"));this.Zt(),this.$t(),this.statusMessage('Performed "'+t+'"')},e.prototype.mv=function(t){this.at[this.Vb.kb]&&this.wv(t)},e.prototype.Zu=function(t){var i=1===t,n=this.cv.fo(),e=!i&&!n;this.mv(e),i||this.Vb.mb||window.setTimeout(function(i){i.Zu(t-1)},n?100:0,this)},e.prototype.yu=function(){var t=this.ut.cc();a.Bo(t.Da(),t.La()+".sgf")},e.prototype.Bu=function(){var t=this.ru.yv,i=g.Mr(t.Lr,t.id),n=this;f.Bo(i,function(t,i){if(t)return n.statusMessage(t);var e=[],r=n.dr.Wc(i,e);if(!r)return new A(null,e.join("\n"));n.tu(r)})},e.prototype.zu=function(){this.ku.start(d("#syncGame"),d("#syncStart"));var t=this;this.zv(function(i,n){if(i)return t.ku.stop();var e=t.ut.cc();n.Br(e,function(){t.tu(e),t.ku.stop()})})},e.prototype.Au=function(){this.ku.start(d("#syncMyGames"),d("#syncStart"));var t=this;this.zv(function(i,n){if(i)return t.ku.stop();n.Cr(function(){t.ku.stop()})})},e.prototype.zv=function(t){if(this.Av)return t(null,this.Av);var i=new E(_,this.lu,this.dr,this.ku.Vo.bind(this.ku)),n=this;i.connect(function(e){if(e)return t(e);n.Av=i,t(null,i)})}},{"../../config/colors.json":6,"../GameLogic":11,"../GameRecord":12,"../GameVault":13,"../Move":21,"../ScoreAnalyser":23,"../ai":49,"../constants":50,"../hh":65,"../hh/Dome":53,"../hh/GetFile":54,"../hh/LocalPref":55,"../hh/Painter":57,"../hh/PopupDlg":58,"../hh/getText":64,"../main":73,"../net/DropboxHelper":74,"../net/SyncHelper":75,"../net/goSites":76,"./Board":78,"./ImportDlg":79,"./MoveIndicator":80,"./MyGamesDlg":82,"./NewGameDlg":83,"./ProgressLog":84,"./ReviewUi":85,"./SettingDlg":86,"./UiTopMenu":88,"./ui.less":98}],88:[function(t,i,n){"use strict";function e(t){this.Bv(t)}function r(t,i){return i?t+i:""}t("./uiTopMenu.less");var o=t("../hh/Dome"),s=t("../hh/getText"),h=t("../net/goSites"),a=t("../main"),u=t("../hh/TopMenu");i.g=e,e.prototype.rp=function(){return this.vp.rp()},e.prototype.Bv=function(t){var i=this.vp=new u({lp:t,Bp:a.appName+" V"+a.appVersion});i.yp("settings",s("#settings"),!0),i.wp(),i.yp("myGames",s("#myGames"),!0),i.yp("newGame",s("#newGame"),!0),i.yp("importGame",s("#importGame"),!0),this.Cv=i.yp("syncMyGames",s("#syncMyGames"),!0),i.wp(),this.Dv=i.Gn(o.En(null,"gameInfo")),this.Ev=i.yp("downloadLatest",""),this.Fv=i.yp("syncGame",s("#syncGame")),this.Gv=i.yp("exportGame",s("#exportGame")),i.wp()},e.prototype.Qu=function(t){this.vp.tp(s("#appTitle")),this.Fv.$n(!1),this.Cv.$n(t),this.Dv.Hn(""),this.Ev.$n(!1),this.Gv.$n(!1)},e.prototype.lv=function(t,i){this.vp.tp(t.Ua("playerWhite")+" VS "+t.Ua("playerBlack")+" (B)");var n="komi: "+(t.Ua("komi")||0);n+=r(", hand: ",t.Ua("handicap")),n+=r(", rules: ",t.Ua("rules")),n+=r(", date: ",t.Ua("date")),n+=r(", source: ",t.Ua("source")),n+=r(", event: ",t.Ua("event")),n+=r(", place: ",t.Ua("place")),this.Dv.Hn(n),this.Fv.$n(i);var e=this.yv=h.Kr(t);e&&this.Ev.Hn(s("#downloadLatest",e.Lr)),this.Ev.$n(!!e),this.Gv.$n(!0)}},{"../hh/Dome":53,"../hh/TopMenu":60,"../hh/getText":64,"../main":73,"../net/goSites":76,"./uiTopMenu.less":99}],89:[function(t,i,n){"use strict";var e=t("../ai"),r=[{name:"Chuckie",wn:t("../ai/chuckie")}];e.vn(r),t("./Ui").gu()},{"../ai":49,"../ai/chuckie":48,"./Ui":87}],90:[function(t,i,n){var e=".importDialog {\n  margin: 50px;\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  top: 40%;\n}\n.importDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.importDialog .mainDiv .groupFrame {\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 7px;\n}\n.importDialog .mainDiv .fileInputBtn {\n  margin: 35px 15px;\n}\n.importDialog .mainDiv .moves {\n  margin: 35px 0;\n}\n.importDialog .mainDiv .movesInput {\n  width: 50%;\n}\n.importDialog .mainDiv .loadMovesInfo {\n  font-size: 50%;\n  font-style: italic;\n  margin-left: 203px;\n}\n.importDialog .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.importDialog .btnDiv .loadBtn,\n.importDialog .btnDiv .cancelBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  width: 240px;\n  font-size: 48px;\n}\n";t("lessify")(e),i.g=e},{"lessify":137}],91:[function(t,i,n){var e=".moveIndicator {\n  height: 80px;\n  text-align: center;\n}\n.moveIndicator.black .icon {\n  background-color: #000;\n}\n.moveIndicator.black .text {\n  color: #fff;\n  text-shadow: #000 0 0 3px;\n}\n.moveIndicator.white .icon {\n  background-color: #fff;\n}\n.moveIndicator.white .text {\n  color: #000;\n  text-shadow: #fff 0 0 3px;\n}\n.moveIndicator .label {\n  font-size: 30px;\n}\n.moveIndicator .icon {\n  display: inline-block;\n  position: relative;\n  width: 68px;\n  height: 68px;\n  border: 1px solid rgba(127, 127, 127, 0.5);\n  border-radius: 50px;\n}\n.moveIndicator .icon .text {\n  position: relative;\n  width: 84px;\n  text-align: center;\n  left: -8px;\n  top: 12px;\n  font-size: 35px;\n  font-weight: bold;\n}\n";t("lessify")(e),i.g=e},{"lessify":137}],92:[function(t,i,n){var e=".myArchivedGamesDialog {\n  margin: 0 65px;\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.myArchivedGamesDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.myArchivedGamesDialog .delGameBtn,\n.myArchivedGamesDialog .restoreGameBtn {\n  vertical-align: top;\n  margin: 20px 12px 20px 0;\n  width: 220px;\n  height: 120px;\n  line-height: 120px;\n}\n.myArchivedGamesDialog .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.myArchivedGamesDialog .btnDiv .closeBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  width: 240px;\n  font-size: 48px;\n}\n";t("lessify")(e),i.g=e},{"lessify":137}],93:[function(t,i,n){var e=".myGamesDialog {\n  margin: 0 40px;\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.myGamesDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.myGamesDialog .mainDiv .recentGamesDropDwn {\n  max-width: calc(100% - 230px);\n  font-size: 48px;\n  margin: 35px 0;\n}\n.myGamesDialog .delGameBtn,\n.myGamesDialog .archiveGameBtn,\n.myGamesDialog .showArchiveBtn {\n  vertical-align: top;\n  margin: 20px 12px 20px 0;\n  width: 220px;\n  height: 120px;\n  line-height: 120px;\n}\n.myGamesDialog .showArchiveBtn {\n  line-height: initial;\n  padding: 25px;\n}\n.myGamesDialog .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.myGamesDialog .btnDiv .loadBtn,\n.myGamesDialog .btnDiv .cancelBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  width: 240px;\n  font-size: 48px;\n}\n";t("lessify")(e),i.g=e},{"lessify":137}],94:[function(t,i,n){var e='.newGameDialog {\n  margin: 50px;\n}\n.newGameDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.newGameDialog .mainDiv .centeredDiv {\n  margin-top: 40px;\n  text-align: center;\n}\n.newGameDialog .boardDiv .sizeBox {\n  display: inline-block;\n  position: relative;\n  width: 240px;\n  max-width: 33%;\n  text-align: center;\n  margin: 10px 18px 0 20px;\n}\n.newGameDialog .playerBtn {\n  position: relative;\n  vertical-align: top;\n  top: 162px;\n  left: 2px;\n  width: 200px;\n  max-width: 26%;\n  height: 200px;\n}\n.newGameDialog .playerBtn .playerBtnIcon {\n  background-image: url("assets/humanBlue.png");\n  -webkit-filter: brightness(0);\n  filter: brightness(0);\n  background-size: 80%;\n}\n.newGameDialog .playerBtn.robot .playerBtnIcon {\n  background-size: contain;\n  background-image: url("assets/robotBlue.png");\n}\n.newGameDialog .playerBtn.white .playerBtnIcon {\n  -webkit-filter: invert(1) grayscale(1);\n  filter: invert(1) grayscale(1);\n}\n.newGameDialog .sizeBtn {\n  position: relative;\n  width: 170px;\n  max-width: 88%;\n  height: 120px;\n  margin: 0 0 10px;\n}\n.newGameDialog .sizeBtn .sizeBtnIcon {\n  background-image: url("assets/upBlue.png");\n  background-size: 80%;\n  -webkit-filter: brightness(0);\n  filter: brightness(0);\n}\n.newGameDialog .sizeBtn.down {\n  margin-top: 4px;\n}\n.newGameDialog .sizeBtn.down .sizeBtnIcon {\n  background-image: url("assets/downBlue.png");\n}\n.newGameDialog .boardImgFrame {\n  display: inline-block;\n  position: relative;\n  width: 100%;\n  height: 240px;\n  background-color: #d1cac1;\n  border-radius: 5px;\n  box-shadow: black 3px 3px 6px;\n}\n.newGameDialog .boardImgFrame .boardImg {\n  width: 100%;\n  height: 100%;\n  background: url("assets/19x19.png") 50% no-repeat;\n}\n.newGameDialog .boardImgFrame .curSize {\n  position: absolute;\n  top: -4px;\n  width: 100%;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  text-align: center;\n  color: white;\n  text-shadow: black 3px 3px 5px;\n}\n.newGameDialog .advancedBtn {\n  width: 248px;\n  height: 100px;\n  line-height: 92px;\n  margin: 40px 10px 25px;\n  background-color: #faf7f5;\n  border: 1px solid #a7a7a7;\n}\n.newGameDialog .advancedDiv .rules {\n  display: inline-block;\n  margin-left: 87px;\n}\n.newGameDialog .advancedDiv .defAiInfo {\n  font-size: 50%;\n  font-style: italic;\n  width: 400px;\n  display: inline-block;\n}\n.newGameDialog .startBtn {\n  margin: 16px 0 10px -5px;\n  position: relative;\n  left: calc(100% - 240px);\n  width: 240px;\n  font-size: 48px;\n}\n';t("lessify")(e),i.g=e},{"lessify":137}],95:[function(t,i,n){var e=".notifPopup {\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  margin: 0 auto;\n  width: 1020px;\n  max-width: 90%;\n  border: 1px solid rgba(255, 255, 255, 0.33);\n}\n.notifPopup .content {\n  height: 300px;\n  overflow-y: scroll;\n  font-size: 20px;\n}\n";t("lessify")(e),i.g=e},{"lessify":137}],96:[function(t,i,n){var e='.gameUi .statusBar .variationBtn {\n  margin: 1px;\n  width: 120px;\n  height: 112px;\n  line-height: 112px;\n}\n.gameUi .statusBar .moveComment {\n  margin-top: 2px;\n  background-color: white;\n  color: black;\n  border-radius: 5px;\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  text-align: left;\n  font-size: 22px;\n  font-weight: normal;\n  padding: 2px 4px;\n}\n.gameUi .mainControls .btn.back10,\n.gameUi .mainControls .btn.back1,\n.gameUi .mainControls .btn.forw1,\n.gameUi .mainControls .btn.forw10 {\n  max-width: 22%;\n}\n.gameUi .mainControls .btn.pruneBtn {\n  max-width: calc(50% - 5px);\n}\n.gameUi .mainControls .btn.pruneBtn .btnIcon {\n  background-image: url("assets/pruning.png");\n  -webkit-filter: sepia(1) brightness(7);\n  filter: sepia(1) brightness(7);\n  background-size: auto 87%;\n}\n.gameUi .mainControls .btn.cycleBtn {\n  margin-left: 10px;\n  max-width: calc(50% - 5px);\n}\n.gameUi .mainControls .btn.cycleBtn .btnIcon {\n  background-image: url("assets/cycle.png");\n  -webkit-filter: sepia(1) brightness(7);\n  filter: sepia(1) brightness(7);\n  background-size: auto 87%;\n}\n.gameUi .mainControls .btn.cycleBtn .btnText {\n  left: 5px;\n  color: #fff;\n}\n.gameUi .mainControls .btn.delBookmarkBtn {\n  position: relative;\n  max-width: calc(50% - 5px);\n}\n.gameUi .mainControls .btn.delBookmarkBtn .btnIcon {\n  background-image: url("assets/trash.png");\n  -webkit-filter: sepia(1) brightness(7);\n  filter: sepia(1) brightness(7);\n  background-size: auto 87%;\n}\n';t("lessify")(e),i.g=e},{"lessify":137}],97:[function(t,i,n){var e=".settingDlg {\n  z-index: 2000;\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  margin: 0 20%;\n  width: 60%;\n}\n.settingDlg .content {\n  padding: 20px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.settingDlg .content .cloudDiv {\n  margin-top: 20px;\n}\n.settingDlg .content .dropboxBtn {\n  display: block;\n  margin: 10px;\n  width: 300px;\n}\n.settingDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: 0 0 -10px 0;\n}\n.settingDlg .btnDiv .okBtn {\n  float: right;\n}\n";t("lessify")(e),i.g=e},{"lessify":137}],98:[function(t,i,n){var e='body {\n  background-color: #865e50;\n  font-family: "Arial";\n  margin: 0px;\n  height: 2048px;\n}\ndiv {\n  box-sizing: border-box;\n}\n::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 7px;\n  height: 7px;\n}\n::-webkit-scrollbar-track {\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.2);\n  -webkit-border-radius: 10px;\n  border-radius: 7px;\n  margin: 1px;\n}\n::-webkit-scrollbar-thumb {\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, 0.5);\n}\n.downloadLink {\n  text-decoration: none;\n  color: white;\n}\n.pageTitle {\n  margin-top: 7px;\n  margin-bottom: 7px;\n  font-size: 40px;\n  font-weight: bold;\n}\n.subTitle {\n  font-size: 30px;\n  margin-top: 0.5em;\n  margin-bottom: 5px;\n}\n.logBox {\n  font-size: 28px;\n  font-family: "Arial";\n  background-color: white;\n  border: solid #cca 1px;\n  border-radius: 8px;\n  padding: 5px;\n  overflow-y: auto;\n  word-wrap: break-word;\n}\n.inputLbl {\n  display: inline-block;\n  margin: 0 5px 0 10px;\n  font-size: 28px;\n}\n.inputBox {\n  margin: 17px 0 17px 0;\n  min-height: 1cm;\n  text-align: left;\n  font-size: 42px;\n  color: inherit;\n}\n.btn {\n  position: relative;\n  display: inline-block;\n  vertical-align: top;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  box-sizing: border-box;\n  padding: 0 2px;\n  border-radius: 13px;\n  width: 160px;\n  height: 120px;\n  line-height: 120px;\n  text-align: center;\n  font-size: 28px;\n  border: 1px solid #7a6c5c;\n  background-color: #af9e8e;\n  color: #000000;\n}\n.btn.toggled {\n  background-color: #AD4343;\n}\n.btn.disabled {\n  color: #000;\n  border-style: hidden;\n  opacity: 0.6;\n}\n.btn.pressed {\n  border-style: outset;\n}\n.btnIcon {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-position: 50%;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n.btnText {\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  line-height: initial;\n  z-index: 1;\n}\n.chkBoxDiv {\n  display: inline-block;\n  margin-right: 10px;\n}\n.chkBox {\n  margin: 5px 3px 14px 2px;\n  width: 29px;\n  height: 1.5em;\n}\n.chkLbl {\n  font-size: 28px;\n}\n.dropDwn {\n  font-size: 42px;\n  margin: 17px 13px 17px 13px;\n  color: inherit;\n}\n.radioBtn {\n  margin: 17px 0px 17px 13px;\n  width: 29px;\n  height: 1.5em;\n}\n.radioLbl {\n  margin-right: 13px;\n}\n.dialog {\n  padding: 10px;\n  background-color: #ffffee;\n  color: #000000;\n  border: solid #cca 1px;\n  border-radius: 10px;\n  font-family: Arial;\n  font-size: 42px;\n}\n.dialogTitle {\n  font-size: 50px;\n  background-color: #ffebce;\n  color: #000000;\n  border: solid 1px rgba(195, 50, 50, 0.2);\n  border-radius: 10px;\n  margin: -6px;\n  margin-bottom: 15px;\n  padding: 10px 0px 10px 12px;\n}\nbody .contextMenu {\n  width: 500px;\n  border-radius: 9px;\n  border: 1px solid #58636d;\n  background-color: #3b3d47;\n}\nbody .contextMenu .menuItem {\n  font-size: 30px;\n  padding: 50px;\n  background-color: #000;\n  border: 1px solid #505050;\n  border-radius: 9px;\n}\n.gameList {\n  position: relative;\n  border: 1px solid #a9a9a9;\n  border-radius: 6px;\n  max-height: 450px;\n  min-height: 160px;\n  overflow-y: auto;\n  overflow-x: hidden;\n  background-color: #fff;\n}\n.gameList .oneGame {\n  padding: 5px;\n}\n.gameList .oneGame.selected {\n  background-color: #b7b29e;\n  border-radius: 5px;\n}\n.gameList .emptyMsg {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  position: absolute;\n  width: 100%;\n  text-align: center;\n  font-style: italic;\n  opacity: 0.7;\n}\n.gameUi {\n  padding: 2px;\n}\n.gameUi .board {\n  margin: 5px 0;\n  background-color: #402f23;\n  border-radius: 7px;\n}\n.gameUi .board .wgo-board {\n  margin: 0 auto;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  /* disables grey shade on long-tap for Safari */\n  /* Below avoid issues when tap-hold on Android */\n  -webkit-user-select: none;\n  -webkit-touch-callout: none;\n}\n.gameUi .boardDesc {\n  margin-top: 3px;\n  font-weight: bold;\n  font-style: italic;\n}\n.gameUi .btn {\n  width: 200px;\n}\n.gameUi .underBoard {\n  padding-bottom: 5px;\n}\n.gameUi .statusBar {\n  position: relative;\n  height: 130px;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: row;\n  flex-direction: row;\n  background-color: #dfc2ac;\n  border: rgba(0, 0, 0, 0.7) 1px solid;\n  border-radius: 7px;\n}\n.gameUi .statusBar .lastMove {\n  margin: 0 15px;\n}\n.gameUi .statusBar .message {\n  -webkit-flex: 1;\n  flex: 1;\n  white-space: pre-wrap;\n  overflow-y: auto;\n  font-size: 26px;\n  font-weight: bold;\n  text-align: center;\n  padding-top: 5px;\n}\n.gameUi .statusBar .nextPlayer {\n  margin: 0 8px 0 15px;\n}\n.gameUi .mainControls {\n  margin-top: 10px;\n}\n.gameUi .mainControls .leftDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 20%;\n  padding-left: 10px;\n  text-align: left;\n}\n.gameUi .mainControls .leftDiv .animatedDiv {\n  margin: 16px;\n}\n.gameUi .mainControls .mainDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 60%;\n  text-align: center;\n}\n.gameUi .mainControls .mainDiv .btn {\n  margin: 0 3px;\n  height: 200px;\n  line-height: 200px;\n  max-width: 44%;\n}\n.gameUi .mainControls .rightDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 20%;\n  text-align: right;\n}\n.gameUi .mainControls .leftDiv .btn,\n.gameUi .mainControls .rightDiv .btn {\n  background-color: #5c4137;\n  color: #faebd7;\n  max-width: 100%;\n}\n.gameUi .mainControls .leftDiv .btn.toggled,\n.gameUi .mainControls .rightDiv .btn.toggled {\n  background-color: #AD4343;\n}\n.gameUi .mainControls .leftDiv .btn.resi,\n.gameUi .mainControls .rightDiv .btn.resi {\n  height: 100px;\n  line-height: 100px;\n  width: 150px;\n}\n.gameInfo {\n  padding: 15px 20px 15px 100px;\n  font-size: 32px;\n  background-color: #282a2b;\n}\n';t("lessify")(e),i.g=e},{"lessify":137}],99:[function(t,i,n){var e=".topMenu .menuOption {\n  position: relative;\n}\n.topMenu .menuOption .icon {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 140px;\n  height: 140px;\n  background-repeat: no-repeat;\n  -webkit-filter: invert(0.6) grayscale(1);\n  filter: invert(0.6) grayscale(1);\n}\n.topMenu .menuOption.settings .icon {\n  background-image: url(assets/settings.png);\n  background-size: 94px;\n  background-position: 20px;\n}\n.topMenu .menuOption.myGames .icon {\n  background-image: url(assets/myGames.png);\n  background-size: 94px;\n  background-position: 20px;\n}\n.topMenu .menuOption.newGame .icon {\n  background-image: url(assets/robotBlue.png);\n  background-size: 104px;\n  background-position: 17px 0;\n}\n.topMenu .menuOption.importGame .icon {\n  background-image: url(assets/import.png);\n  background-size: 70px;\n  background-position: 29px 30px;\n}\n.topMenu .menuOption.syncMyGames .icon {\n  background-image: url(assets/cloudSync.png);\n  background-size: 100px;\n  background-position: 18px 22px;\n}\n";t("lessify")(e),i.g=e},{"lessify":137}],100:[function(t,i,n){!function(t,i){"use strict";var n=document.getElementsByTagName("script"),e=n[n.length-1].src.split("?")[0],r=e.split("/").slice(0,-1).join("/")+"/",o={version:"2.3.1",B:1,W:-1,Hv:!0,Iv:r,lang:"en",Jv:{Kv:{}}};o.opera=navigator.userAgent.search(/(opera)(?:.*version)?[ \/]([\w.]+)/i)!=-1,o.Lv=navigator.userAgent.search(/(webkit)[ \/]([\w.]+)/i)!=-1,o.Mv=navigator.userAgent.search(/(msie) ([\w.]+)/i)!=-1,o.Nv=navigator.userAgent.search(/(mozilla)(?:.*? rv:([\w.]+))?/i)!=-1&&!o.Lv&&!o.Mv,o.Ov=function(t){var i=o.Jv[o.lang][t]||o.Jv.Kv[t];if(i){for(var n=1;n<arguments.length;n++)i=i.replace("$",arguments[n]);return i}return t},o.Pv=function(t,i){return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.super=t,i},o.Qv=function(){throw Error("unimplemented abstract method")},o.clone=function(t){if(t&&"object"==typeof t){
var i=t.constructor==Array?[]:{};for(var n in t)t[n]==t?i[n]=t:i[n]=o.clone(t[n]);return i}return t},o.Rv=function(t){return t&&"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t};var s=function(i,n){var n=n||{};for(var e in n)this[e]=n[e];for(var e in o.Zr.default)void 0===this[e]&&(this[e]=o.Zr.default[e]);for(var e in s.Zo.default)void 0===this.$o[e]&&(this.$o[e]=s.Zo.default[e]);this.Sv=this.section.left,this.Tv=this.section.top,this.Uv=this.size-1-this.section.right,this.Vv=this.size-1-this.section.bottom,this.init(),i.appendChild(this.bs),this.Wv=t.devicePixelRatio||1,this.width&&this.height?this.Xv(this.width,this.height):this.width?this.Yv(this.width):this.height&&this.Zv(this.height)};s.Zo={},s.Zo.$v={shadowColor:"rgba(32,32,32,0.5)",shadowTransparentColor:"rgba(32,32,32,0)",shadowBlur:0,shadowSize:function(t){return t.shadowSize},markupBlackColor:"rgba(255,255,255,0.8)",markupWhiteColor:"rgba(0,0,0,0.8)",markupNoneColor:"rgba(0,0,0,0.8)",markupLinesWidth:function(t){return t._v?t.aw/7:t.lineWidth},gridLinesWidth:1,gridLinesColor:function(t){return"rgba(0,0,0,"+Math.min(1,t.aw/15)+")"},starColor:"#000",starSize:function(t){return t.starSize*(t.width/300+1)},stoneSize:function(t){return t.stoneSize*Math.min(t.rs,t.ss)/2},coordinatesColor:"rgba(0,0,0,0.7)",font:function(t){return t.font},linesShift:.5},s.Zo.default={shadowColor:"rgba(62,32,32,0.5)",shadowTransparentColor:"rgba(62,32,32,0)",shadowBlur:function(t){return.1*t.aw},shadowSize:1,markupBlackColor:"rgba(255,255,255,0.9)",markupWhiteColor:"rgba(0,0,0,0.7)",markupNoneColor:"rgba(0,0,0,0.7)",markupLinesWidth:function(t){return t.aw/8},gridLinesWidth:function(t){return t.aw/15},gridLinesColor:"#654525",starColor:"#531",starSize:function(t){return t.aw/8+1},stoneSize:function(t){return Math.min(t.rs,t.ss)/2},coordinatesColor:"#531",bw:"rgba(0,32,128,0.8)",font:"calibri",linesShift:.25};var h,a=function(t,i){return"function"==typeof i.$o[t]?i.$o[t](i):i.$o[t]},u={cw:function(t,i){var n=i.dw(t.x),e=i.ew(t.y),r=i.aw;this.beginPath();var o=a("shadowBlur",i),s=Math.max(0,r-.5),h=this.createRadialGradient(n-i.fw,e-i.fw,s-1-o,n-i.fw,e-i.fw,s+o);h.addColorStop(0,a("shadowColor",i)),h.addColorStop(1,a("shadowTransparentColor",i)),this.fillStyle=h,this.arc(n-i.fw,e-i.fw,s+o,0,2*Math.PI,!0),this.fill()},clear:function(t,i){var n=i.dw(t.x),e=i.ew(t.y),r=i.aw;this.clearRect(n-1.1*r-i.fw,e-1.1*r-i.fw,2.2*r,2.2*r)}},c=function(t,i,n){return t.ms[i][n][0].c==o.B?a("markupBlackColor",t):t.ms[i][n][0].c==o.W?a("markupWhiteColor",t):a("markupNoneColor",t)},l=function(t,i,n){return t.ms[i][n][0]&&t.ms[i][n][0].c==o.W||t.ms[i][n][0].c==o.B},p=function(t,i){var n;t[i].clear(),t[i].cw(t);for(var e=0;e<t.size;e++)for(var r=0;r<t.size;r++)for(var o=0;o<t.ms[e][r].length;o++){var h=t.ms[e][r][o];n=h.type?"string"==typeof h.type?s.hw[h.type]:h.type:t.gw,n[i]&&n[i].cw.call(t[i].getContext(h),h,t)}for(var a=0;a<t.iw.length;a++){var h=t.iw[a],n=h.lp;n[i]&&n[i].cw.call(t[i].getContext(h.jw),h.jw,t)}},f=function(t,i,n,e,r,o,s,h){t.strokeStyle="rgba(64,64,64,0.2)",t.lineWidth=e/30*h,t.beginPath(),e-=Math.max(1,t.lineWidth);var a,u,i,c,l,p=i+e*Math.cos(r*Math.PI),f=n+e*Math.sin(r*Math.PI),d=i+e*Math.cos(o*Math.PI),g=n+e*Math.sin(o*Math.PI);d>p?(a=(g-f)/(d-p),u=Math.atan(a)):d==p?u=Math.PI/2:(a=(g-f)/(d-p),u=Math.atan(a)-Math.PI);var v=s*e;c=Math.sin(u)*v,l=Math.cos(u)*v;var b=p+c,y=f-l,m=d+c,w=g-l;t.moveTo(p,f),t.bezierCurveTo(b,y,m,w,d,g),t.stroke()},d=function(t){for(var i=t.angle,n=t.angle,e=0;e<t.kw.length;e++)i+=t.kw[e],n-=t.kw[e],f(t.lw,t.x,t.y,t.mw,i,n,t.nw,t.ow)};s.hw={pw:{ii:{cw:function(t,i){var n,e=i.dw(t.x),r=i.ew(t.y),s=i.aw;t.c==o.W?(n=this.createRadialGradient(e-2*s/5,r-2*s/5,s/3,e-s/5,r-s/5,5*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#aaa")):(n=this.createRadialGradient(e-2*s/5,r-2*s/5,1,e-s/5,r-s/5,4*s/5),n.addColorStop(0,"#666"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(e-i.fw,r-i.fw,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill()}},qw:u},rw:{ii:{cw:function(t,i){var n,e=i.dw(t.x),r=i.ew(t.y),s=i.aw;t.c==o.W?(n=this.createRadialGradient(e-2*s/5,r-2*s/5,2,e-s/5,r-s/5,4*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#ddd")):(n=this.createRadialGradient(e-2*s/5,r-2*s/5,1,e-s/5,r-s/5,4*s/5),n.addColorStop(0,"#111"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(e-i.fw,r-i.fw,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill(),this.beginPath(),this.lineWidth=s/6,t.c==o.W?(this.strokeStyle="#999",this.arc(e+s/8,r+s/8,s/2,0,Math.PI/2,!1)):(this.strokeStyle="#ccc",this.arc(e-s/8,r-s/8,s/2,Math.PI,1.5*Math.PI)),this.stroke()}},qw:u},sw:{ii:{cw:function(t,i){var n,e=i.dw(t.x),r=i.ew(t.y),s=i.aw;t.c==o.W?(n=this.createRadialGradient(e-2*s/5,r-2*s/5,s/3,e-s/5,r-s/5,8*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#666")):(n=this.createRadialGradient(e-2*s/5,r-2*s/5,1,e-s/5,r-s/5,3*s/5),n.addColorStop(0,"#555"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(e-i.fw,r-i.fw,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill()}},qw:u},tw:{ii:{cw:function(t,i){var n,e,r=i.aw;h=h||Math.ceil(9999999*Math.random()),n=i.dw(t.x),e=i.ew(t.y);var s;if(s=t.c==o.W?"#aaa":"#000",this.beginPath(),this.fillStyle=s,this.arc(n-i.fw,e-i.fw,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill(),t.c==o.W){var a=h%(3+t.x*i.size+t.y)%3,u=i.size*i.size+t.x*i.size+t.y,c=2/u*(h%u);d(0==a?{lw:this,x:n,y:e,mw:r,angle:c,kw:[.1,.12,.11,.1,.09,.09,.09,.09],nw:.25,ow:1.75}:1==a?{lw:this,x:n,y:e,mw:r,angle:c,kw:[.1,.09,.08,.07,.06,.06,.06,.06,.06,.06,.06],nw:.2,ow:1.5}:{lw:this,x:n,y:e,mw:r,angle:c,kw:[.12,.14,.13,.12,.12,.12],nw:.3,ow:2}),s=this.createRadialGradient(n-2*r/5,e-2*r/5,r/3,n-r/5,e-r/5,5*r/5),s.addColorStop(0,"rgba(255,255,255,0.9)"),s.addColorStop(1,"rgba(255,255,255,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.fw,e-i.fw,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill()}else s=this.createRadialGradient(n+.4*r,e+.4*r,0,n+.5*r,e+.5*r,r),s.addColorStop(0,"rgba(32,32,32,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.fw,e-i.fw,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill(),s=this.createRadialGradient(n-.4*r,e-.4*r,0,n-.5*r,e-.5*r,1.5*r),s.addColorStop(0,"rgba(64,64,64,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.fw,e-i.fw,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill()}},qw:u},uw:{ii:{cw:function(t,i){var n=i.dw(t.x),e=i.ew(t.y),r=i.aw,s=a("markupLinesWidth",i)||1;t.c==o.W?this.fillStyle="white":this.fillStyle="black",this.beginPath(),this.arc(n,e,Math.max(0,r-s),0,2*Math.PI,!0),this.fill(),this.lineWidth=s,this.strokeStyle="black",this.stroke()}}},CR:{ii:{cw:function(t,i){var n=i.dw(t.x),e=i.ew(t.y),r=i.aw;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||a("markupLinesWidth",i)||1,this.beginPath(),this.arc(n-i.fw,e-i.fw,r/2,0,2*Math.PI,!0),this.stroke()}}},LB:{ii:{cw:function(t,i){var n=i.dw(t.x),e=i.ew(t.y),r=i.aw,o=t.scale||1,s=t.font||a("font",i)||"";this.fillStyle=t.c||c(i,t.x,t.y);var h=1;1==t.text.length?h=1.5:2==t.text.length&&(h=1.2),this.font=Math.round(h*r*o)+"px "+s,this.beginPath(),this.textBaseline="middle",this.textAlign="center",this.fillText(t.text,n,e,2*r)}},grid:{cw:function(t,i){if(!l(i,t.x,t.y)&&!t.vw){var n=i.dw(t.x),e=i.ew(t.y),r=i.aw;this.clearRect(n-r,e-r,2*r,2*r)}},clear:function(t,i){l(i,t.x,t.y)||(t.vw=!0,p(i,"grid"),delete t.vw)}}},ww:{ii:{cw:function(t,i){var n=i.dw(t.x),e=i.ew(t.y),r=Math.round(i.aw);this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||a("markupLinesWidth",i)||1,this.beginPath(),this.rect(Math.round(n-r/2)-i.fw,Math.round(e-r/2)-i.fw,r,r),this.stroke()}}},wh:{ii:{cw:function(t,i){var n=i.dw(t.x),e=i.ew(t.y),r=i.aw;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||a("markupLinesWidth",i)||1,this.beginPath(),this.moveTo(n-i.fw,e-i.fw-Math.round(r/2)),this.lineTo(Math.round(n-r/2)-i.fw,Math.round(e+r/3)+i.fw),this.lineTo(Math.round(n+r/2)+i.fw,Math.round(e+r/3)+i.fw),this.closePath(),this.stroke()}}},xw:{ii:{cw:function(t,i){var n=i.dw(t.x),e=i.ew(t.y),r=i.aw;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineCap="round",this.lineWidth=2*(t.lineWidth||a("markupLinesWidth",i)||1)-1,this.beginPath(),this.moveTo(Math.round(n-r/2),Math.round(e-r/2)),this.lineTo(Math.round(n+r/2),Math.round(e+r/2)),this.moveTo(Math.round(n+r/2)-1,Math.round(e-r/2)),this.lineTo(Math.round(n-r/2)-1,Math.round(e+r/2)),this.stroke(),this.lineCap="butt"}}},SL:{ii:{cw:function(t,i){var n=i.dw(t.x),e=i.ew(t.y),r=i.aw;this.fillStyle=t.c||c(i,t.x,t.y),this.beginPath(),this.rect(n-r/2,e-r/2,r,r),this.fill()}}},yw:{ii:{cw:function(t,i){var n=i.dw(t.x),e=i.ew(t.y),r=i.aw;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=2*(t.lineWidth||a("markupLinesWidth",i)||1),this.beginPath(),this.arc(n-r/3,e-r/3,r/6,0,2*Math.PI,!0),this.stroke(),this.beginPath(),this.arc(n+r/3,e-r/3,r/6,0,2*Math.PI,!0),this.stroke(),this.beginPath(),this.moveTo(n-r/1.5,e),this.bezierCurveTo(n-r/1.5,e+r/2,n+r/1.5,e+r/2,n+r/1.5,e),this.stroke()}}},outline:{ii:{cw:function(t,i){t.alpha?this.globalAlpha=t.alpha:this.globalAlpha=.3,t.zw?s.hw[t.zw].ii.cw.call(this,t,i):i.gw.ii.cw.call(this,t,i),this.globalAlpha=1}}},mini:{ii:{cw:function(t,i){i.aw=i.aw/2,t.zw?s.hw[t.zw].ii.cw.call(this,t,i):i.gw.ii.cw.call(this,t,i),i.aw=2*i.aw}}}},s._r={grid:{cw:function(t,i){var n,e,r,o,s,h;this.fillStyle=a("coordinatesColor",i),this.textBaseline="middle",this.textAlign="center",this.font=i.aw*i.coordFontSize+"px "+(i.font||""),r=i.dw(-.75),o=i.dw(i.size-.25),s=i.ew(-.75),h=i.ew(i.size-.25);for(var u=0;u<i.size;u++)n=u+"A".charCodeAt(0),n>="I".charCodeAt(0)&&n++,e=i.ew(u),this.fillText(i.size-u,r,e),this.fillText(i.size-u,o,e),e=i.dw(u),this.fillText(String.fromCharCode(n),e,s),this.fillText(String.fromCharCode(n),e,h);this.fillStyle="black"}}},s.Aw=function(){this.bs=document.createElement("canvas"),this.context=this.bs.getContext("2d"),this.Wv=t.devicePixelRatio||1,this.Wv>1&&this.context.scale(this.Wv,this.Wv)},s.Aw.prototype={constructor:s.Aw,Xv:function(t,i){this.bs.width=t,this.bs.style.width=t/this.Wv+"px",this.bs.height=i,this.bs.style.height=i/this.Wv+"px"},Vn:function(t,i){this.bs.style.position="absolute",this.bs.style.zIndex=i,t.appendChild(this.bs)},Bw:function(t){t.removeChild(this.bs)},getContext:function(){return this.context},cw:function(t){},clear:function(){this.context.clearRect(0,0,this.bs.width,this.bs.height)}},s.Cw=o.Pv(s.Aw,function(){this.super.call(this)}),s.Cw.prototype.cw=function(t){var i;this.context.beginPath(),this.context.lineWidth=a("gridLinesWidth",t),this.context.strokeStyle=a("gridLinesColor",t);var n=Math.round(t.left),e=Math.round(t.top),r=Math.round(t.rs*(t.size-1)),o=Math.round(t.ss*(t.size-1));this.context.strokeRect(n-t.fw,e-t.fw,r,o);for(var s=1;s<t.size-1;s++)i=Math.round(t.dw(s))-t.fw,this.context.moveTo(i,e),this.context.lineTo(i,e+o),i=Math.round(t.ew(s))-t.fw,this.context.moveTo(n,i),this.context.lineTo(n+r,i);if(this.context.stroke(),this.context.fillStyle=a("starColor",t),t.Dw[t.size])for(var h in t.Dw[t.size])this.context.beginPath(),this.context.arc(t.dw(t.Dw[t.size][h].x)-t.fw,t.ew(t.Dw[t.size][h].y)-t.fw,a("starSize",t),0,2*Math.PI,!0),this.context.fill()},s.Ew=o.Pv(s.Aw,function(){this.init(4)}),s.Ew.prototype.init=function(i){var n,e;this.Fw=i,this.elements=[],this.Gw=[],this.Wv=t.devicePixelRatio||1;for(var r=0;r<i;r++)n=document.createElement("canvas"),e=n.getContext("2d"),this.Wv>1&&e.scale(this.Wv,this.Wv),this.elements.push(n),this.Gw.push(e)},s.Ew.prototype.Vn=function(t,i){for(var n=0;n<this.Fw;n++)this.elements[n].style.position="absolute",this.elements[n].style.zIndex=i,t.appendChild(this.elements[n])},s.Ew.prototype.Bw=function(t){for(var i=0;i<this.Fw;i++)t.removeChild(this.elements[i])},s.Ew.prototype.getContext=function(t){return t.x%2?t.y%2?this.Gw[0]:this.Gw[1]:t.y%2?this.Gw[2]:this.Gw[3]},s.Ew.prototype.clear=function(t,i){for(var n=0;n<this.Fw;n++)this.Gw[n].clearRect(0,0,this.elements[n].width,this.elements[n].height)},s.Ew.prototype.Xv=function(t,i){for(var n=0;n<this.Fw;n++)this.elements[n].width=t,this.elements[n].style.width=t/this.Wv+"px",this.elements[n].height=i,this.elements[n].style.height=i/this.Wv+"px"},s.Hw=o.Pv(s.Ew,function(t,i,n){this.init(2),this.shadowSize=void 0===i?1:i,this.Sr=t}),s.Hw.prototype.getContext=function(t){return!(t.x%2&&t.y%2)&&(t.x%2||t.y%2)?this.Gw[1]:this.Gw[0]},s.Hw.prototype.Xv=function(t,i){this.super.prototype.Xv.call(this,t,i);for(var n=0;n<this.Fw;n++)this.Gw[n].setTransform(1,0,0,1,Math.round(this.shadowSize*this.Sr.aw/7),Math.round(this.shadowSize*this.Sr.aw/7))};var g=function(t,i){var n=i.dw(t.x),e=i.ew(t.y),r=i.aw;this.clearRect(n-2*r-i.fw,e-2*r-i.fw,4*r,4*r)},v=function(){return 3*this.width/(4*(this.Uv+1-this.Sv)+2)-this.rs*this.Sv},b=function(){return 3*this.height/(4*(this.Vv+1-this.Tv)+2)-this.ss*this.Tv},y=function(){return 4*this.width/(4*(this.Uv+1-this.Sv)+2)},m=function(){return 4*this.height/(4*(this.Vv+1-this.Tv)+2)},w=function(t,i){for(var n,e=0;e<this.ms[t][i].length;e++){var r=this.ms[t][i][e];n=r.type?"string"==typeof r.type?s.hw[r.type]:r.type:this.gw;for(var o in n)n[o].clear?n[o].clear.call(this[o].getContext(r),r,this):g.call(this[o].getContext(r),r,this)}},x=function(t,i){for(var n,e=0;e<this.ms[t][i].length;e++){var r=this.ms[t][i][e];n=r.type?"string"==typeof r.type?s.hw[r.type]:r.type:this.gw;for(var o in n)n[o].cw.call(this[o].getContext(r),r,this)}},k=function(t){var i,n;i=t.layerX*this.Wv,i-=this.left,i/=this.rs,i=Math.round(i),n=t.layerY*this.Wv,n-=this.top,n/=this.ss,n=Math.round(n);var e=t.offsetY*this.Wv;return e-=this.top,e/=this.ss,e=Math.round(e),e!==n&&console.error("Using layerY we get",n," BUT using offsetY it would be",e),{x:i>=this.size?-1:i,y:n>=this.size?-1:n}},j=function(){this.bs.style.width=this.width/this.Wv+"px",this.bs.style.height=this.height/this.Wv+"px",this.aw=a("stoneSize",this),this.fw=a("linesShift",this);for(var t=0;t<this.Fw.length;t++)this.Fw[t].Xv(this.width,this.height)};s.prototype={constructor:s,init:function(){this.ms=[];for(var t=0;t<this.size;t++){this.ms[t]=[];for(var i=0;i<this.size;i++)this.ms[t][i]=[]}this.iw=[],this.Fw=[],this.Iw=[],this.bs=document.createElement("div"),this.bs.className="wgo-board",this.bs.style.position="relative",this.background&&("#"==this.background[0]?this.bs.style.backgroundColor=this.background:(this.bs.style.backgroundImage="url('"+this.background+"')",this.bs.style.backgroundColor="#c75")),this.grid=new s.Cw,this.qw=new s.Hw(this,a("shadowSize",this)),this.ii=new s.Ew,this.Jw(this.grid,100),this.Jw(this.qw,200),this.Jw(this.ii,300)},Yv:function(t){this.width=t,this.width*=this.Wv,this.ss=this.rs=y.call(this),this.left=v.call(this),this.height=(this.Vv-this.Tv+1.5)*this.ss,this.top=b.call(this),j.call(this),this.Kw()},Zv:function(t){this.height=t,this.height*=this.Wv,this.rs=this.ss=m.call(this),this.top=b.call(this),this.width=(this.Uv-this.Sv+1.5)*this.rs,this.left=v.call(this),j.call(this),this.Kw()},Xv:function(t,i){this.width=t||parseInt(this.bs.style.width,10),this.width*=this.Wv,this.height=i||parseInt(this.bs.style.height,10),this.height*=this.Wv,this.rs=y.call(this),this.ss=m.call(this),this.left=v.call(this),this.top=b.call(this),j.call(this),this.Kw()},Lw:function(){return this.section},Mw:function(t,i,n,e){this.section="object"==typeof t?t:{top:t,right:i,bottom:n,left:e},this.Sv=this.section.left,this.Tv=this.section.top,this.Uv=this.size-1-this.section.right,this.Vv=this.size-1-this.section.bottom,this.Xv()},Nw:function(t){var t=t||19;if(t!=this.size){this.size=t,this.ms=[];for(var i=0;i<this.size;i++){this.ms[i]=[];for(var n=0;n<this.size;n++)this.ms[i][n]=[]}this.Uv=this.size-1-this.section.right,this.Vv=this.size-1-this.section.bottom,this.Xv()}},Kw:function(){for(var t=0;t<this.Fw.length;t++)this.Fw[t].clear(this),this.Fw[t].cw(this);for(var t=0;t<this.size;t++)for(var i=0;i<this.size;i++)x.call(this,t,i);for(var t=0;t<this.iw.length;t++){var n=this.iw[t],e=n.lp;for(var r in e)e[r].cw.call(this[r].getContext(n.jw),n.jw,this)}},dw:function(t){return this.left+t*this.rs},ew:function(t){return this.top+t*this.ss},Jw:function(t,i){t.Vn(this.bs,i),t.Xv(this.width,this.height),this.Fw.push(t)},Ow:function(t){var i=this.Fw.indexOf(t);i>=0&&(this.Fw.splice(i,1),t.Bw(this.bs))},update:function(t){var i;if(t.remove&&"all"==t.remove)this.Pw();else if(t.remove)for(i=0;i<t.remove.length;i++)this.ls(t.remove[i]);if(t.add)for(i=0;i<t.add.length;i++)this.ns(t.add[i])},ns:function(t){if(t.constructor!=Array){w.call(this,t.x,t.y);for(var i=this.ms[t.x][t.y],n=0;n<i.length;n++)if(i[n].type==t.type)return i[n]=t,void x.call(this,t.x,t.y);t.type?i.push(t):i.unshift(t),x.call(this,t.x,t.y)}else for(var e=0;e<t.length;e++)this.ns(t[e])},ls:function(t){if(t.constructor!=Array){for(var i,n=0;n<this.ms[t.x][t.y].length;n++)if(this.ms[t.x][t.y][n].type==t.type){i=n;break}void 0!==i&&(w.call(this,t.x,t.y),this.ms[t.x][t.y].splice(i,1),x.call(this,t.x,t.y))}else for(var e=0;e<t.length;e++)this.ls(t[e])},ts:function(t,i){this.ms[t][i].length&&(w.call(this,t,i),this.ms[t][i]=[])},Pw:function(){this.ms=[];for(var t=0;t<this.size;t++){this.ms[t]=[];for(var i=0;i<this.size;i++)this.ms[t][i]=[]}this.Kw()},$r:function(t,i){this.iw.push({lp:t,jw:i}),this.Kw()},Qw:function(t,i){for(var n=0;n<this.iw.length;n++){var e=this.iw[n];if(e.lp==t&&e.jw==i)return this.iw.splice(n,1),this.Kw(),!0}return!1},addEventListener:function(t,i){var n=this,e={type:t,Rw:i,Sw:function(t){var e=k.call(n,t);i(e.x,e.y,t)}};this.bs.addEventListener(t,e,!0),this.Iw.push(e)},removeEventListener:function(t,i){for(var n=0;n<this.Iw.length;n++){var e=this.Iw[n];if(e.type==t&&e.Rw==i)return this.bs.removeEventListener(e.type,e,!0),this.Iw.splice(n,1),!0}return!1},Tw:function(){return{Uw:o.clone(this.ms),Vw:o.clone(this.iw)}},Ww:function(t){this.ms=t.Uw||this.ms,this.iw=t.Vw||this.iw,this.Kw()}},s.default={size:19,width:0,height:0,font:"Calibri",lineWidth:1,_v:!1,Dw:{19:[{x:3,y:3},{x:9,y:3},{x:15,y:3},{x:3,y:9},{x:9,y:9},{x:15,y:9},{x:3,y:15},{x:9,y:15},{x:15,y:15}],13:[{x:3,y:3},{x:9,y:3},{x:3,y:9},{x:9,y:9}],9:[{x:4,y:4}]},gw:s.hw.tw,starSize:1,shadowSize:1,stoneSize:1,section:{top:0,right:0,bottom:0,left:0},background:o.Iv+"wood1.jpg",$o:{}},o.Zr=s,t.WGo=o}(window)},{}],101:[function(t,i,n){var e,r,o,s=t("superagent"),h=t("es6-promise").Promise,a=t("./get-base-url"),u=t("./http-header-safe-json");s.parse["application/octect-stream"]=function(t){return t},e=function(t,i){return{status:t.status,error:(i?i.text:null)||t.toString(),response:i}},o=function(t,i){t.text="",t.Xw("binary"),t.v("data",function(i){t.text+=i}),t.v("end",function(){i()})},r=function(t,i,n,r,c,l){if("user"!==n)throw new Error("Unexpected auth type: "+n);return new h(function(n,h){function p(t){n&&n(t)}function f(t){h&&h(t)}function d(t,i){var n;t?f(e(t,i)):(n=JSON.parse(i.headers["dropbox-api-result"]),i.Yw?n.fileBlob=i.Yw.response:n.Zw=i.$w.text,p(n))}var g;g=s._w(a(r)+t).set("Authorization","Bearer "+c).set("Dropbox-API-Arg",u(i)).v("request",function(){this.Yw&&(this.Yw.responseType="blob")}),l&&(g=g.set("Dropbox-API-Select-User",l)),"undefined"==typeof window?g.buffer(!0).parse(o).end(d):g.end(d)})},i.g=r},{"./get-base-url":104,"./http-header-safe-json":105,"es6-promise":135,"superagent":139}],102:[function(t,i,n){var e,r=t("./request-constants");t("./object-assign-polyfill"),e=function(t){t=t||{},this.accessToken=t.accessToken,this.clientId=t.clientId,this.ax=t.ax},e.prototype.bx=function(t){this.accessToken=t},e.prototype.ex=function(){return this.accessToken},e.prototype.gx=function(t){this.clientId=t},e.prototype.hx=function(){return this.clientId},e.prototype.Mq=function(t,i){var n,e=this.hx();if(!e)throw new Error("A client id is required. You can set the client id using .setClientId().");if(!t)throw new Error("A redirect uri is required.");return n="https://www.dropbox.com/oauth2/authorize?response_type=token&client_id="+e,t&&(n=n+"&redirect_uri="+t),i&&(n=n+"&state="+i),n},e.prototype.ix=function(t,i,n,e,o){var s=null;switch(o){case r.jx:s=this.kx();break;case r.lx:s=this.mx();break;case r.nx:s=this.ox();break;default:throw new Error("Invalid request style: "+o)}return s(t,i,n,e,this.ex(),this.ax)},e.prototype.px=function(t){e.prototype.qx=t},e.prototype.kx=function(){return void 0===e.prototype.qx&&(e.prototype.qx=t("./rpc-request")),e.prototype.qx},e.prototype.sx=function(t){e.prototype.tx=t},e.prototype.mx=function(){return void 0===e.prototype.tx&&(e.prototype.tx=t("./download-request")),e.prototype.tx},e.prototype.ux=function(t){e.prototype.vx=t},e.prototype.ox=function(){return void 0===e.prototype.vx&&(e.prototype.vx=t("./upload-request")),e.prototype.vx},i.g=e},{"./download-request":101,"./object-assign-polyfill":107,"./request-constants":108,"./rpc-request":110,"./upload-request":111}],103:[function(t,i,n){var e,r=t("./dropbox-base"),o=t("./routes");e=function(t){r.call(this,t)},e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype=Object.assign(e.prototype,o),e.prototype.wx=function(t){return this.ix("sharing/get_shared_link_file",t,"api","download")},i.g=e},{"./dropbox-base":102,"./routes":109}],104:[function(t,i,n){function e(t){return"https://"+t+".dropboxapi.com/2/"}i.g=e},{}],105:[function(t,i,n){function e(t){return JSON.stringify(t).replace(r,function(t){return"\\u"+("000"+t.charCodeAt(0).toString(16)).slice(-4)})}var r=/[\u007f-\uffff]/g;i.g=e},{}],106:[function(t,i,n){var e=t("./dropbox");i.g=e},{"./dropbox":103}],107:[function(t,i,n){"function"!=typeof Object.assign&&function(){Object.assign=function(t){"use strict";var i,n,e,r;if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(i=Object(t),n=1;n<arguments.length;n++)if(void 0!==(e=arguments[n])&&null!==e)for(r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);return i}}()},{}],108:[function(t,i,n){var e={jx:"rpc",lx:"download",nx:"upload"};i.g=e},{}],109:[function(t,i,n){var e={};e.xx=function(t){return this.ix("auth/token/from_oauth1",t,"app","api","rpc")},e.yx=function(t){return this.ix("auth/token/revoke",t,"user","api","rpc")},e.zx=function(t){return this.ix("files/alpha/get_metadata",t,"user","api","rpc")},e.Ax=function(t){return this.ix("files/alpha/upload",t,"user","content","upload")},e.Bx=function(t){return this.ix("files/copy",t,"user","api","rpc")},e.Cx=function(t){return this.ix("files/copy_batch",t,"user","api","rpc")},e.Dx=function(t){return this.ix("files/copy_batch/check",t,"user","api","rpc")},e.Ex=function(t){return this.ix("files/copy_reference/get",t,"user","api","rpc")},e.Fx=function(t){return this.ix("files/copy_reference/save",t,"user","api","rpc")},e.Zq=function(t){return this.ix("files/create_folder",t,"user","api","rpc")},e._q=function(t){return this.ix("files/delete",t,"user","api","rpc")},e.Gx=function(t){return this.ix("files/delete_batch",t,"user","api","rpc")},e.Hx=function(t){return this.ix("files/delete_batch/check",t,"user","api","rpc")},e.Wq=function(t){return this.ix("files/download",t,"user","content","download")},e.Ix=function(t){return this.ix("files/get_metadata",t,"user","api","rpc")},e.Jx=function(t){return this.ix("files/get_preview",t,"user","content","download")},e.Kx=function(t){return this.ix("files/get_temporary_link",t,"user","api","rpc")},e.Lx=function(t){return this.ix("files/get_thumbnail",t,"user","content","download")},e.Rq=function(t){return this.ix("files/list_folder",t,"user","api","rpc")},e.Mx=function(t){return this.ix("files/list_folder/continue",t,"user","api","rpc")},e.Nx=function(t){return this.ix("files/list_folder/get_latest_cursor",t,"user","api","rpc")},e.Ox=function(t){return this.ix("files/list_folder/longpoll",t,"noauth","notify","rpc")},e.Px=function(t){return this.ix("files/list_revisions",t,"user","api","rpc")},e.br=function(t){return this.ix("files/move",t,"user","api","rpc")},e.Qx=function(t){return this.ix("files/move_batch",t,"user","api","rpc")},e.Rx=function(t){return this.ix("files/move_batch/check",t,"user","api","rpc")},e.Sx=function(t){return this.ix("files/permanently_delete",t,"user","api","rpc")},e.Tx=function(t){return this.ix("files/properties/add",t,"user","api","rpc")},e.Ux=function(t){return this.ix("files/properties/overwrite",t,"user","api","rpc")},e.Vx=function(t){return this.ix("files/properties/remove",t,"user","api","rpc")},e.Wx=function(t){return this.ix("files/properties/template/get",t,"user","api","rpc")},e.Xx=function(t){return this.ix("files/properties/template/list",t,"user","api","rpc")},e.Yx=function(t){return this.ix("files/properties/update",t,"user","api","rpc")},e.Zx=function(t){return this.ix("files/restore",t,"user","api","rpc")},e.$x=function(t){return this.ix("files/save_url",t,"user","api","rpc")},e._x=function(t){return this.ix("files/save_url/check_job_status",t,"user","api","rpc")},e.ay=function(t){return this.ix("files/search",t,"user","api","rpc")},e.Xq=function(t){return this.ix("files/upload",t,"user","content","upload")},e.by=function(t){return this.ix("files/upload_session/append",t,"user","content","upload")},e.ey=function(t){return this.ix("files/upload_session/append_v2",t,"user","content","upload")},e.gy=function(t){return this.ix("files/upload_session/finish",t,"user","content","upload")},e.hy=function(t){return this.ix("files/upload_session/finish_batch",t,"user","api","rpc")},e.iy=function(t){return this.ix("files/upload_session/finish_batch/check",t,"user","api","rpc")},e.jy=function(t){return this.ix("files/upload_session/start",t,"user","content","upload")},e.ky=function(t){return this.ix("paper/docs/archive",t,"user","api","rpc")},e.ly=function(t){return this.ix("paper/docs/download",t,"user","api","download")},e.my=function(t){return this.ix("paper/docs/folder_users/list",t,"user","api","rpc")},e.ny=function(t){return this.ix("paper/docs/folder_users/list/continue",t,"user","api","rpc")},e.oy=function(t){return this.ix("paper/docs/get_folder_info",t,"user","api","rpc")},e.py=function(t){return this.ix("paper/docs/list",t,"user","api","rpc")},e.qy=function(t){return this.ix("paper/docs/list/continue",t,"user","api","rpc")},e.sy=function(t){return this.ix("paper/docs/permanently_delete",t,"user","api","rpc")},e.ty=function(t){return this.ix("paper/docs/sharing_policy/get",t,"user","api","rpc")},e.uy=function(t){return this.ix("paper/docs/sharing_policy/set",t,"user","api","rpc")},e.vy=function(t){return this.ix("paper/docs/users/add",t,"user","api","rpc")},e.wy=function(t){return this.ix("paper/docs/users/list",t,"user","api","rpc")},e.xy=function(t){return this.ix("paper/docs/users/list/continue",t,"user","api","rpc")},e.yy=function(t){return this.ix("paper/docs/users/remove",t,"user","api","rpc")},e.zy=function(t){return this.ix("sharing/add_file_member",t,"user","api","rpc")},e.Ay=function(t){return this.ix("sharing/add_folder_member",t,"user","api","rpc")},e.By=function(t){return this.ix("sharing/change_file_member_access",t,"user","api","rpc")},e.Cy=function(t){return this.ix("sharing/check_job_status",t,"user","api","rpc")},e.Dy=function(t){return this.ix("sharing/check_remove_member_job_status",t,"user","api","rpc")},e.Ey=function(t){return this.ix("sharing/check_share_job_status",t,"user","api","rpc")},e.Fy=function(t){return this.ix("sharing/create_shared_link",t,"user","api","rpc")},e.Gy=function(t){return this.ix("sharing/create_shared_link_with_settings",t,"user","api","rpc")},e.Hy=function(t){return this.ix("sharing/get_file_metadata",t,"user","api","rpc")},e.Iy=function(t){return this.ix("sharing/get_file_metadata/batch",t,"user","api","rpc")},e.Jy=function(t){return this.ix("sharing/get_folder_metadata",t,"user","api","rpc")},e.Ky=function(t){return this.ix("sharing/get_shared_link_file",t,"user","content","download")},e.Ly=function(t){return this.ix("sharing/get_shared_link_metadata",t,"user","api","rpc")},e.My=function(t){return this.ix("sharing/get_shared_links",t,"user","api","rpc")},e.Ny=function(t){return this.ix("sharing/list_file_members",t,"user","api","rpc")},e.Oy=function(t){return this.ix("sharing/list_file_members/batch",t,"user","api","rpc")},e.Py=function(t){return this.ix("sharing/list_file_members/continue",t,"user","api","rpc")},e.Qy=function(t){return this.ix("sharing/list_folder_members",t,"user","api","rpc")},e.Ry=function(t){return this.ix("sharing/list_folder_members/continue",t,"user","api","rpc")},e.Sy=function(t){return this.ix("sharing/list_folders",t,"user","api","rpc")},e.Ty=function(t){return this.ix("sharing/list_folders/continue",t,"user","api","rpc")},e.Uy=function(t){return this.ix("sharing/list_mountable_folders",t,"user","api","rpc")},e.Vy=function(t){return this.ix("sharing/list_mountable_folders/continue",t,"user","api","rpc")},e.Wy=function(t){return this.ix("sharing/list_received_files",t,"user","api","rpc")},e.Xy=function(t){return this.ix("sharing/list_received_files/continue",t,"user","api","rpc")},e.Yy=function(t){return this.ix("sharing/list_shared_links",t,"user","api","rpc")},e.Zy=function(t){return this.ix("sharing/modify_shared_link_settings",t,"user","api","rpc")},e.$y=function(t){return this.ix("sharing/mount_folder",t,"user","api","rpc")},e._y=function(t){return this.ix("sharing/relinquish_file_membership",t,"user","api","rpc")},e.az=function(t){return this.ix("sharing/relinquish_folder_membership",t,"user","api","rpc")},e.bz=function(t){return this.ix("sharing/remove_file_member",t,"user","api","rpc")},e.cz=function(t){return this.ix("sharing/remove_file_member_2",t,"user","api","rpc")},e.dz=function(t){return this.ix("sharing/remove_folder_member",t,"user","api","rpc")},e.ez=function(t){return this.ix("sharing/revoke_shared_link",t,"user","api","rpc")},e.fz=function(t){return this.ix("sharing/share_folder",t,"user","api","rpc")},e.gz=function(t){return this.ix("sharing/transfer_folder",t,"user","api","rpc")},e.hz=function(t){return this.ix("sharing/unmount_folder",t,"user","api","rpc")},e.iz=function(t){return this.ix("sharing/unshare_file",t,"user","api","rpc")},e.jz=function(t){return this.ix("sharing/unshare_folder",t,"user","api","rpc")},e.kz=function(t){return this.ix("sharing/update_file_member",t,"user","api","rpc")},e.lz=function(t){return this.ix("sharing/update_folder_member",t,"user","api","rpc")},e.mz=function(t){return this.ix("sharing/update_folder_policy",t,"user","api","rpc")},e.nz=function(t){return this.ix("users/get_account",t,"user","api","rpc")},e.oz=function(t){return this.ix("users/get_account_batch",t,"user","api","rpc")},e.pz=function(t){return this.ix("users/get_current_account",t,"user","api","rpc")},e.qz=function(t){return this.ix("users/get_space_usage",t,"user","api","rpc")},i.g=e},{}],110:[function(t,i,n){var e=t("superagent"),r=t("es6-promise").Promise,o=t("./get-base-url"),s=function(t,i){return{status:t.status,error:(i?i.text:null)||t.toString(),response:i}},h=function(t,i,n,h,a,u){return new r(function(r,c){function l(t){r&&r(t)}function p(t){c&&c(t)}function f(t,i){t?p(s(t,i)):l(i.body)}var d;switch(i||(i=null),d=e._w(o(h)+t).type("application/json"),n){case"team":case"user":d.set("Authorization","Bearer "+a);break;case"noauth":break;default:throw new Error("Unhandled auth type: "+n)}u&&(d=d.set("Dropbox-API-Select-User",u)),d.send(i).end(f)})};i.g=h},{"./get-base-url":104,"es6-promise":135,"superagent":139}],111:[function(t,i,n){var e=t("superagent"),r=t("es6-promise").Promise,o=t("./get-base-url"),s=t("./http-header-safe-json"),h=function(t,i){return{status:t.status,error:(i?i.text:null)||t.toString(),response:i}},a=function(t,i,n,a,u,c){if("user"!==n)throw new Error("Unexpected auth type: "+n);return new r(function(n,r){function l(t){n&&n(t)}function p(t){r&&r(t)}function f(t,i){t?p(h(t,i)):l(i.body)}var d,g=i.contents;delete i.contents,d=e._w(o(a)+t).type("application/octet-stream").set("Authorization","Bearer "+u).set("Dropbox-API-Arg",s(i)),c&&(d=d.set("Dropbox-API-Select-User",c)),d.send(g).end(f)})};i.g=a},{"./get-base-url":104,"./http-header-safe-json":105,"es6-promise":135,"superagent":139}],112:[function(t,i,n){function e(t){
if(t)return r(t)}function r(t){for(var i in e.prototype)t[i]=e.prototype[i];return t}void 0!==i&&(i.g=e),e.prototype.v=e.prototype.addEventListener=function(t,i){return this.rz=this.rz||{},(this.rz["$"+t]=this.rz["$"+t]||[]).push(i),this},e.prototype.A=function(t,i){function n(){this.C(t,n),i.apply(this,arguments)}return n.sz=i,this.v(t,n),this},e.prototype.C=e.prototype.removeListener=e.prototype.D=e.prototype.removeEventListener=function(t,i){if(this.rz=this.rz||{},0==arguments.length)return this.rz={},this;var n=this.rz["$"+t];if(!n)return this;if(1==arguments.length)return delete this.rz["$"+t],this;for(var e,r=0;r<n.length;r++)if((e=n[r])===i||e.sz===i){n.splice(r,1);break}return this},e.prototype.F=function(t){this.rz=this.rz||{};var i=[].slice.call(arguments,1),n=this.rz["$"+t];if(n){n=n.slice(0);for(var e=0,r=n.length;e<r;++e)n[e].apply(this,i)}return this},e.prototype.Iw=function(t){return this.rz=this.rz||{},this.rz["$"+t]||[]},e.prototype.tz=function(t){return!!this.Iw(t).length}},{}],113:[function(t,i,n){i.g=1/0},{}],114:[function(t,i,n){i.g=1},{}],115:[function(t,i,n){"use strict";var e=t("./_map");i.g=function(t){function i(t,i){return function(t){i(t)}}return e(t,i)}},{"./_map":117}],116:[function(t,i,n){"use strict";var e=t("./a"),r=t("./_map");i.g=function(t){function i(t,i){return function(n,r){function o(t,i){return!!r[i]}if(n)return void i(n);i(null,e(r)?t.filter(o):function(){var i={};return Object.keys(t).forEach(function(n){o(null,n)&&(i[n]=t[n])}),i}())}}return r(t,i)}},{"./_map":117,"./a":118}],117:[function(t,i,n){"use strict";var e=t("./a"),r=t("./once"),o=t("./concurrent"),s=t("./CONCURRENTLY"),h=t("./SERIAL");i.g=function t(i,n,a){function u(t,h,a,u){var c=arguments;2===c.length&&(a=h,h=s),3===c.length&&"number"!=typeof h&&(u=a,a=h,h=s);var l=Object.keys(t),p=e(t)?[]:{};l.forEach(function(i){p[i]=function(n){3===a.length?a(t[i],i,n):a(t[i],n)}}),o(p,i||h,n?n(t,r(u)):u)}return a||(u.Dr=t(h,n,!0)),u}},{"./CONCURRENTLY":113,"./SERIAL":114,"./a":118,"./concurrent":119,"./once":131}],118:[function(t,i,n){"use strict";i.g=function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],119:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./a"),o=t("./once"),s=t("./queue"),h=t("./errored"),a=t("./debounce"),u=t("./CONCURRENTLY");i.g=function(t,i,n){function c(i,n){function r(){var t=e(arguments);h(t,l)||(d[i]=t.shift(),n())}a(t[i],[r])}"function"==typeof i&&(n=i,i=u);var l=o(n),p=s(c,i),f=Object.keys(t),d=r(t)?[]:{};p.unshift(f),p.v("drain",function(){l(null,d)})}},{"./CONCURRENTLY":113,"./a":118,"./debounce":122,"./errored":125,"./once":131,"./queue":132,"atoa":128}],120:[function(t,i,n){"use strict";i.g={uz:t("./curry"),vz:t("./concurrent"),Dr:t("./series"),wz:t("./waterfall"),Jr:t("./each"),map:t("./map"),filter:t("./filter"),xz:t("./queue"),emitter:t("./emitter")}},{"./concurrent":119,"./curry":121,"./each":123,"./emitter":124,"./filter":126,"./map":127,"./queue":132,"./series":133,"./waterfall":134}],121:[function(t,i,n){"use strict";var e=t("atoa");i.g=function(){var t=e(arguments),i=t.shift();return function(){var n=e(arguments);i.apply(i,t.concat(n))}}},{"atoa":128}],122:[function(t,i,n){"use strict";var e=t("ticky");i.g=function(t,i,n){t&&e(function(){t.apply(n||null,i||[])})}},{"ticky":129}],123:[function(t,i,n){"use strict";i.g=t("./_each")()},{"./_each":115}],124:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./debounce");i.g=function(t,i){var n=i||{},o={};return void 0===t&&(t={}),t.v=function(i,n){return o[i]?o[i].push(n):o[i]=[n],t},t.A=function(i,n){return n.yz=!0,t.v(i,n),t},t.C=function(i,n){var e=arguments.length;if(1===e)delete o[i];else if(0===e)o={};else{var r=o[i];if(!r)return t;r.splice(r.indexOf(n),1)}return t},t.F=function(){var i=e(arguments);return t.zz(i.shift()).apply(this,i)},t.zz=function(i){var s=(o[i]||[]).slice(0);return function(){var o=e(arguments),h=this||t;if("error"===i&&n.throws!==!1&&!s.length)throw 1===o.length?o[0]:o;return s.forEach(function(e){n.async?r(e,o,h):e.apply(h,o),e.yz&&t.C(i,e)}),t}},t}},{"./debounce":122,"atoa":128}],125:[function(t,i,n){"use strict";var e=t("./debounce");i.g=function(t,i,n){var r=t.shift();if(r)return n&&n.Az(),e(i,[r]),!0}},{"./debounce":122}],126:[function(t,i,n){"use strict";i.g=t("./_filter")()},{"./_filter":116}],127:[function(t,i,n){"use strict";i.g=t("./_map")()},{"./_map":117}],128:[function(t,i,n){i.g=function(t,i){return Array.prototype.slice.call(t,i)}},{}],129:[function(t,i,n){var e,r="function"==typeof setImmediate;e=r?function(t){setImmediate(t)}:function(t){setTimeout(t,0)},i.g=e},{}],130:[function(t,i,n){"use strict";i.g=function(){}},{}],131:[function(t,i,n){"use strict";var e=t("./noop");i.g=function(t){function i(){n||(n=!0,(t||e).apply(null,arguments))}var n;return i.Az=function(){n=!0},i}},{"./noop":130}],132:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./a"),o=t("./once"),s=t("./emitter"),h=t("./debounce");i.g=function(t,i){function n(t,i,n){(r(i)?i:[i]).forEach(function(i){l[t]({Ov:i,done:n})}),h(a)}function a(){if(!(c||p>=f)){if(!l.length)return void(0===p&&d.F("drain"));p++;var i=l.pop();t(i.Ov,o(u.bind(null,i))),h(a)}}function u(t){p--,h(t.done,e(arguments,1)),h(a)}var c,l=[],p=0,f=i||1,d=s({push:n.bind(null,"push"),unshift:n.bind(null,"unshift"),pause:function(){c=!0},resume:function(){c=!1,h(a)},pending:l});return Object.defineProperty&&!Object.Bz&&Object.defineProperty(d,"length",{get:function(){return l.length}}),d}},{"./a":118,"./debounce":122,"./emitter":124,"./once":131,"atoa":128}],133:[function(t,i,n){"use strict";var e=t("./concurrent"),r=t("./SERIAL");i.g=function(t,i){e(t,r,i)}},{"./SERIAL":114,"./concurrent":119}],134:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./once"),o=t("./errored"),s=t("./debounce");i.g=function(t,i){function n(){var i=e(arguments),a=t.shift();if(a){if(o(i,h))return;i.push(r(n)),s(a,i)}else s(h,arguments)}var h=r(i);n()}},{"./debounce":122,"./errored":125,"./once":131,"atoa":128}],135:[function(t,i,n){(function(e,r){!function(t,e){"object"==typeof n&&void 0!==i?i.g=e():"function"==typeof define&&define.Cz?define(e):t.Dz=e()}(this,function(){"use strict";function i(t){return"function"==typeof t||"object"==typeof t&&null!==t}function n(t){return"function"==typeof t}function o(t){N=t}function s(t){F=t}function h(){return function(){U(u)}}function a(){var t=setTimeout;return function(){return t(u,1)}}function u(){for(var t=0;t<W;t+=2){(0,J[t])(J[t+1]),J[t]=void 0,J[t+1]=void 0}W=0}function c(t,i){var n=arguments,e=this,r=new this.constructor(p);void 0===r[tt]&&T(r);var o=e.Gz;return o?function(){var t=n[o-1];F(function(){return C(o,r,t,e.Hz)})}():S(e,r,t,i),r}function l(t){var i=this;if(t&&"object"==typeof t&&t.constructor===i)return t;var n=new i(p);return w(n,t),n}function p(){}function f(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function g(t){try{return t.then}catch(t){return rt.error=t,rt}}function v(t,i,n,e){try{t.call(i,n,e)}catch(t){return t}}function b(t,i,n){F(function(t){var e=!1,r=v(n,i,function(n){e||(e=!0,i!==n?w(t,n):k(t,n))},function(i){e||(e=!0,j(t,i))},"Settle: "+(t.lo||" unknown promise"));!e&&r&&(e=!0,j(t,r))},t)}function y(t,i){i.Gz===nt?k(t,i.Hz):i.Gz===et?j(t,i.Hz):S(i,void 0,function(i){return w(t,i)},function(i){return j(t,i)})}function m(t,i,e){i.constructor===t.constructor&&e===c&&i.constructor.resolve===l?y(t,i):e===rt?j(t,rt.error):void 0===e?k(t,i):n(e)?b(t,i,e):k(t,i)}function w(t,n){t===n?j(t,f()):i(n)?m(t,n,g(n)):k(t,n)}function x(t){t.Iz&&t.Iz(t.Hz),A(t)}function k(t,i){t.Gz===it&&(t.Hz=i,t.Gz=nt,0!==t.Jz.length&&F(A,t))}function j(t,i){t.Gz===it&&(t.Gz=et,t.Hz=i,F(x,t))}function S(t,i,n,e){var r=t.Jz,o=r.length;t.Iz=null,r[o]=i,r[o+nt]=n,r[o+et]=e,0===o&&t.Gz&&F(A,t)}function A(t){var i=t.Jz,n=t.Gz;if(0!==i.length){for(var e=void 0,r=void 0,o=t.Hz,s=0;s<i.length;s+=3)e=i[s],r=i[s+n],e?C(n,e,r,o):r(o);t.Jz.length=0}}function M(){this.error=null}function z(t,i){try{return t(i)}catch(t){return ot.error=t,ot}}function C(t,i,e,r){var o=n(e),s=void 0,h=void 0,a=void 0,u=void 0;if(o){if(s=z(e,r),s===ot?(u=!0,h=s.error,s=null):a=!0,i===s)return void j(i,d())}else s=r,a=!0;i.Gz!==it||(o&&a?w(i,s):u?j(i,h):t===nt?k(i,s):t===et&&j(i,s))}function D(t,i){try{i(function(i){w(t,i)},function(i){j(t,i)})}catch(i){j(t,i)}}function E(){return st++}function T(t){t[tt]=st++,t.Gz=void 0,t.Hz=void 0,t.Jz=[]}function G(t,i){this.Kz=t,this.Lz=new t(p),this.Lz[tt]||T(this.Lz),R(i)?(this.Mz=i,this.length=i.length,this.Nz=i.length,this.Hz=new Array(this.length),0===this.length?k(this.Lz,this.Hz):(this.length=this.length||0,this.Oz(),0===this.Nz&&k(this.Lz,this.Hz))):j(this.Lz,O())}function O(){return new Error("Array Methods must be provided an Array")}function q(t){return new G(this,t).Lz}function B(t){var i=this;return new i(R(t)?function(n,e){for(var r=t.length,o=0;o<r;o++)i.resolve(t[o]).then(n,e)}:function(t,i){return i(new TypeError("You must pass an array to race."))})}function H(t){var i=this,n=new i(p);return j(n,t),n}function I(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function _(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function P(t){this[tt]=E(),this.Hz=this.Gz=void 0,this.Jz=[],p!==t&&("function"!=typeof t&&I(),this instanceof P?D(this,t):_())}function L(){var t=void 0;if(void 0!==r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var i=t.Promise;if(i){var n=null;try{n=Object.prototype.toString.call(i.resolve())}catch(t){}if("[object Promise]"===n&&!i.cast)return}t.Promise=P}var V=void 0;V=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var R=V,W=0,U=void 0,N=void 0,F=function(t,i){J[W]=t,J[W+1]=i,2===(W+=2)&&(N?N(u):Z())},Y="undefined"!=typeof window?window:void 0,X=Y||{},$=X.MutationObserver||X.WebKitMutationObserver,K="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),Q="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,J=new Array(1e3),Z=void 0;Z=K?function(){return function(){return e.m(u)}}():$?function(){var t=0,i=new $(u),n=document.createTextNode("");return i.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():Q?function(){var t=new MessageChannel;return t.port1.onmessage=u,function(){return t.port2.postMessage(0)}}():void 0===Y&&"function"==typeof t?function(){try{var i=t,n=i("vertx");return U=n.Ez||n.Fz,h()}catch(t){return a()}}():a();var tt=Math.random().toString(36).substring(16),it=void 0,nt=1,et=2,rt=new M,ot=new M,st=0;return G.prototype.Oz=function(){for(var t=this.length,i=this.Mz,n=0;this.Gz===it&&n<t;n++)this.Pz(i[n],n)},G.prototype.Pz=function(t,i){var n=this.Kz,e=n.resolve;if(e===l){var r=g(t);if(r===c&&t.Gz!==it)this.Qz(t.Gz,i,t.Hz);else if("function"!=typeof r)this.Nz--,this.Hz[i]=t;else if(n===P){var o=new n(p);m(o,t,r),this.Rz(o,i)}else this.Rz(new n(function(i){return i(t)}),i)}else this.Rz(e(t),i)},G.prototype.Qz=function(t,i,n){var e=this.Lz;e.Gz===it&&(this.Nz--,t===et?j(e,n):this.Hz[i]=n),0===this.Nz&&k(e,this.Hz)},G.prototype.Rz=function(t,i){var n=this;S(t,void 0,function(t){return n.Qz(nt,i,t)},function(t){return n.Qz(et,i,t)})},P.all=q,P.race=B,P.resolve=l,P.reject=H,P.Sz=o,P.Tz=s,P.Uz=F,P.prototype={constructor:P,then:c,"catch":function(t){return this.then(null,t)}},L(),P.Vz=L,P.Promise=P,P})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"_process":2}],136:[function(t,i,n){i.g=function(t,i){var n=i||document;if(n.createStyleSheet){var e=n.createStyleSheet();return e.cssText=t,e.ownerNode}var r=n.getElementsByTagName("head")[0],o=n.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(n.createTextNode(t)),r.appendChild(o),o},i.g.Wz=function(t){if(document.createStyleSheet)return document.createStyleSheet(t).ownerNode;var i=document.getElementsByTagName("head")[0],n=document.createElement("link");return n.rel="stylesheet",n.href=t,i.appendChild(n),n}},{}],137:[function(t,i,n){i.g=t("cssify")},{"cssify":136}],138:[function(t,i,n){i.g=function(t,i,n){for(var e=0,r=t.length,o=3==arguments.length?n:t[e++];e<r;)o=i.call(null,o,t[e],++e,t);return o}},{}],139:[function(t,i,n){function e(){}function r(t){switch({}.toString.call(t)){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(t){if(!m(t))return t;var i=[];for(var n in t)null!=t[n]&&s(i,n,t[n]);return i.join("&")}function s(t,i,n){if(Array.isArray(n))return n.forEach(function(n){s(t,i,n)});t.push(encodeURIComponent(i)+"="+encodeURIComponent(n))}function h(t){for(var i,n,e={},r=t.split("&"),o=0,s=r.length;o<s;++o)n=r[o],i=n.split("="),e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]);return e}function a(t){var i,n,e,r,o=t.split(/\r?\n/),s={};o.pop();for(var h=0,a=o.length;h<a;++h)n=o[h],i=n.indexOf(":"),e=n.slice(0,i).toLowerCase(),r=x(n.slice(i+1)),s[e]=r;return s}function u(t){return/[\/+]json\b/.test(t)}function c(t){return t.split(/ *; */).shift()}function l(t){return b(t.split(/ *; */),function(t,i){var n=i.split(/ *= */),e=n.shift(),r=n.shift();return e&&r&&(t[e]=r),t},{})}function p(t,i){i=i||{},this.bA=t,this.Yw=this.bA.Yw,this.text="HEAD"!=this.bA.method&&(""===this.Yw.responseType||"text"===this.Yw.responseType)||void 0===this.Yw.responseType?this.Yw.responseText:null,this.statusText=this.bA.Yw.statusText,this.cA(this.Yw.status),this.dA=this.headers=a(this.Yw.getAllResponseHeaders()),this.dA["content-type"]=this.Yw.getResponseHeader("content-type"),this.eA(this.dA),this.body="HEAD"!=this.bA.method?this.fA(this.text?this.text:this.Yw.response):null}function f(t,i){var n=this;this.sA=this.sA||[],this.method=t,this.url=i,this.dA={},this.tA={},this.v("end",function(){var t=null,i=null;try{i=new p(n)}catch(i){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.uA=i,t.vA=n.Yw&&n.Yw.responseText?n.Yw.responseText:null,t.gA=n.Yw&&n.Yw.status?n.Yw.status:null,n.Rw(t)}if(n.F("response",i),t)return n.Rw(t,i);if(i.status>=200&&i.status<300)return n.Rw(t,i);var e=new Error(i.statusText||"Unsuccessful HTTP response");e.uA=t,e.response=i,e.status=i.status,n.Rw(e,i)})}function d(t,i){var n=w("DELETE",t);return i&&n.end(i),n}var g,v=t("emitter"),b=t("reduce"),y=t("./request-base"),m=t("./is-object");g="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var w=i.g=t("./request").bind(null,f);w.Xz=function(){if(!(!g.XMLHttpRequest||g.location&&"file:"==g.location.protocol&&g.Yz))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1};var x="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};w.Zz=o,w.$z=h,w.types={eo:"text/html",json:"application/json",_z:"application/xml",aA:"application/x-www-form-urlencoded","form":"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},w.va={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify},w.parse={"application/x-www-form-urlencoded":h,"application/json":JSON.parse},p.prototype.get=function(t){return this.dA[t.toLowerCase()]},p.prototype.eA=function(t){var i=this.dA["content-type"]||"";this.type=c(i);var n=l(i);for(var e in n)this[e]=n[e]},p.prototype.fA=function(t){var i=w.parse[this.type];return!i&&u(this.type)&&(i=w.parse["application/json"]),i&&t&&(t.length||t instanceof Object)?i(t):null},p.prototype.cA=function(t){1223===t&&(t=204);var i=t/100|0;this.status=this.gA=t,this.hA=i,this.info=1==i,this.ok=2==i,this.iA=4==i,this.jA=5==i,this.error=(4==i||5==i)&&this.kA(),this.lA=202==t,this.mA=204==t,this.nA=400==t,this.oA=401==t,this.pA=406==t,this.qA=404==t,this.rA=403==t},p.prototype.kA=function(){var t=this.bA,i=t.method,n=t.url,e="cannot "+i+" "+n+" ("+this.status+")",r=new Error(e);return r.status=this.status,r.method=i,r.url=n,r},w.Response=p,v(f.prototype);for(var k in y)f.prototype[k]=y[k];f.prototype.abort=function(){if(!this.wA)return this.wA=!0,this.Yw&&this.Yw.abort(),this.clearTimeout(),this.F("abort"),this},f.prototype.type=function(t){return this.set("Content-Type",w.types[t]||t),this},f.prototype.responseType=function(t){return this.xA=t,this},f.prototype.accept=function(t){return this.set("Accept",w.types[t]||t),this},f.prototype.yA=function(t,i,n){switch(n||(n={type:"basic"}),n.type){case"basic":var e=btoa(t+":"+i);this.set("Authorization","Basic "+e);break;case"auto":this.username=t,this.password=i}return this},f.prototype.zA=function(t){return"string"!=typeof t&&(t=o(t)),t&&this.sA.push(t),this},f.prototype.AA=function(t,i,n){return this.BA().append(t,i,n||i.name),this},f.prototype.BA=function(){return this.CA||(this.CA=new g.FormData),this.CA},f.prototype.send=function(t){var i=m(t),n=this.tA["content-type"];if(i&&m(this.DA))for(var e in t)this.DA[e]=t[e];else"string"==typeof t?(n||this.type("form"),n=this.tA["content-type"],this.DA="application/x-www-form-urlencoded"==n?this.DA?this.DA+"&"+t:t:(this.DA||"")+t):this.DA=t;return!i||r(t)?this:(n||this.type("json"),this)},p.prototype.parse=function(t){return g.console&&console.warn("Client-side parse() method has been renamed to serialize(). This method is not compatible with superagent v2.0"),this.va(t),this},p.prototype.va=function(t){return this.EA=t,this},f.prototype.Rw=function(t,i){var n=this.FA;this.clearTimeout(),n(t,i)},f.prototype.GA=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.HA=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.Rw(t)},f.prototype.IA=function(){var t=this.JA,i=new Error("timeout of "+t+"ms exceeded");i.timeout=t,this.Rw(i)},f.prototype.withCredentials=function(){return this.KA=!0,this},f.prototype.end=function(t){var i=this,n=this.Yw=w.Xz(),o=this.sA.join("&"),s=this.JA,h=this.CA||this.DA;this.FA=t||e,n.onreadystatechange=function(){if(4==n.readyState){var t;try{t=n.status}catch(i){t=0}if(0==t){if(i.LA)return i.IA();if(i.wA)return;return i.GA()}i.F("end")}};var a=function(t){t.total>0&&(t.MA=t.loaded/t.total*100),t.direction="download",i.F("progress",t)};this.tz("progress")&&(n.onprogress=a);try{n.upload&&this.tz("progress")&&(n.upload.onprogress=a)}catch(t){}if(s&&!this.NA&&(this.NA=setTimeout(function(){i.LA=!0,i.abort()},s)),o&&(o=w.Zz(o),this.url+=~this.url.indexOf("?")?"&"+o:"?"+o),this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0),this.KA&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof h&&!r(h)){var c=this.tA["content-type"],l=this.EA||w.va[c?c.split(";")[0]:""];!l&&u(c)&&(l=w.va["application/json"]),l&&(h=l(h))}for(var p in this.dA)null!=this.dA[p]&&n.setRequestHeader(p,this.dA[p]);return this.xA&&(n.responseType=this.xA),this.F("request",this),n.send(void 0!==h?h:null),this},w.Request=f,w.get=function(t,i,n){var e=w("GET",t);return"function"==typeof i&&(n=i,i=null),i&&e.zA(i),n&&e.end(n),e},w.head=function(t,i,n){var e=w("HEAD",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e},w["del"]=d,w["delete"]=d,w.OA=function(t,i,n){var e=w("PATCH",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e},w._w=function(t,i,n){var e=w("POST",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e},w.put=function(t,i,n){var e=w("PUT",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e}},{"./is-object":140,"./request":142,"./request-base":141,"emitter":112,"reduce":138}],140:[function(t,i,n){function e(t){return null!=t&&"object"==typeof t}i.g=e},{}],141:[function(t,i,n){var e=t("./is-object");n.clearTimeout=function(){return this.JA=0,clearTimeout(this.NA),this},n.parse=function(t){return this.EA=t,this},n.timeout=function(t){return this.JA=t,this},n.then=function(t,i){return this.end(function(n,e){n?i(n):t(e)})},n.PA=function(t){return t(this),this},n.get=function(t){return this.tA[t.toLowerCase()]},n.QA=n.get,n.set=function(t,i){if(e(t)){for(var n in t)this.set(n,t[n]);return this}return this.tA[t.toLowerCase()]=i,this.dA[t]=i,this},n.RA=function(t){return delete this.tA[t.toLowerCase()],delete this.dA[t],this},n.SA=function(t,i){return this.BA().append(t,i),this}},{"./is-object":140}],142:[function(t,i,n){function e(t,i,n){return"function"==typeof n?new t("GET",i).end(n):2==arguments.length?new t("GET",i):new t(i,n)}i.g=e},{}],143:[function(t,i,n){i.g={"name":"1g0","version":"0.4.4","description":"","author":"Olivier Lombart (kubicle)","license":"TBD","scripts":{"build":"browserify js/ui/htmlApp.js -t lessify | uglifyjs -o build/bld.js -m --mangle-props=unquoted --reserved-file build/reserved.json --reserve-domprops -c properties=false,pure_funcs=['log.debug','test.assert']","dev-build":"watchify js/test/testApp.js -o build/devBuild.js -t lessify -v","test":"node js/test/ciTestApp.js --ci","coverage":"node node_modules/istanbul/lib/cli.js cover js/test/ciTestApp.js -x **/frankie/** -x **/droopy/** -- --cover"},"main":"js/ui/htmlApp.js","repository":{"type":"git","url":"https://github.com/kubicle/1g0"},"bugs":{"url":"https://github.com/kubicle/1g0/issues"},"keywords":["baduk","go","igo","weiqi"],"dependencies":{"contra":"~1.9.4","dropbox":"~2.5.2"},"devDependencies":{"istanbul":"~0.3.22","codeclimate-test-reporter":"~0.1.1","browserify":"~10.2.4","lessify":"~1.0.1","watchify":"~3.2.2","uglify-js":"~2.8.18"}}},{}]},{},[89]);