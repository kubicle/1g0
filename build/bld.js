!function t(i,n,e){function r(s,h){if(!n[s]){if(!i[s]){var u="function"==typeof require&&require;if(!h&&u)return u(s,!0);if(o)return o(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var c=n[s]={g:{}};i[s][0].call(c.g,function(t){var n=i[s][1][t];return r(n?n:t)},c,c.g,t,i,n,e)}return n[s].g}for(var o="function"==typeof require&&require,s=0;s<e.length;s++)r(e[s]);return r}({1:[function(t,i,n){"function"==typeof Object.create?i.g=function(t,i){t.h=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,i:!1,j:!0,k:!0}})}:i.g=function(t,i){t.h=i;var n=function(){};n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],2:[function(t,i,n){function e(){c=!1,h.length?a=h.concat(a):l=-1,a.length&&r()}function r(){if(!c){var t=setTimeout(e);c=!0;for(var i=a.length;i;){for(h=a,a=[];++l<i;)h[l].l();l=-1,i=a.length}h=null,c=!1,clearTimeout(t)}}function o(t,i){this.o=t,this.p=i}function s(){}var h,u=i.g={},a=[],c=!1,l=-1;u.m=function(t){var i=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)i[n-1]=arguments[n];a.push(new o(t,i)),1!==a.length||c||setTimeout(r,0)},o.prototype.l=function(){this.o.apply(null,this.p)},u.title="browser",u.q=!0,u.s={},u.t=[],u.version="",u.u={},u.v=s,u.addListener=s,u.A=s,u.C=s,u.removeListener=s,u.D=s,u.F=s,u.G=function(t){throw new Error("process.binding is not supported")},u.H=function(){return"/"},u.I=function(t){throw new Error("process.chdir is not supported")},u.J=function(){return 0}},{}],3:[function(t,i,n){i.g=function(t){return t&&"object"==typeof t&&"function"==typeof t.K&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],4:[function(t,i,n){(function(i,e){function r(t,i){var e={N:[],O:s};return arguments.length>=3&&(e.P=arguments[2]),arguments.length>=4&&(e.R=arguments[3]),g(i)?e.S=i:i&&n.T(e,i),x(e.S)&&(e.S=!1),x(e.P)&&(e.P=2),x(e.R)&&(e.R=!1),x(e.U)&&(e.U=!0),e.R&&(e.O=o),u(e,t,e.P)}function o(t,i){var n=r.da[i];return n?"["+r.R[n][0]+"m"+t+"["+r.R[n][1]+"m":t}function s(t,i){return t}function h(t){var i={};return t.forEach(function(t,n){i[t]=!0}),i}function u(t,i,e){if(t.U&&i&&G(i.V)&&i.V!==n.V&&(!i.constructor||i.constructor.prototype!==i)){var r=i.V(e,t);return m(r)||(r=u(t,r,e)),r}var o=a(t,i);if(o)return o;var s=Object.keys(i),g=h(s);if(t.S&&(s=Object.getOwnPropertyNames(i)),S(i)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(i);if(0===s.length){if(G(i)){var v=i.name?": "+i.name:"";return t.O("[Function"+v+"]","special")}if(k(i))return t.O(RegExp.prototype.toString.call(i),"regexp");if(D(i))return t.O(Date.prototype.toString.call(i),"date");if(S(i))return c(i)}var y="",b=!1,w=["{","}"];if(d(i)&&(b=!0,w=["[","]"]),G(i)){var x=i.name?": "+i.name:"";y=" [Function"+x+"]"}if(k(i)&&(y=" "+RegExp.prototype.toString.call(i)),D(i)&&(y=" "+Date.prototype.toUTCString.call(i)),S(i)&&(y=" "+c(i)),0===s.length&&(!b||0==i.length))return w[0]+y+w[1];if(0>e)return k(i)?t.O(RegExp.prototype.toString.call(i),"regexp"):t.O("[Object]","special");t.N.push(i);var j;return j=b?l(t,i,e,g,s):s.map(function(n){return p(t,i,e,g,n,b)}),t.N.pop(),f(j,y,w)}function a(t,i){if(x(i))return t.O("undefined","undefined");if(m(i)){var n="'"+JSON.stringify(i).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.O(n,"string")}return b(i)?t.O(""+i,"number"):g(i)?t.O(""+i,"boolean"):v(i)?t.O("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,i,n,e,r){for(var o=[],s=0,h=i.length;h>s;++s)T(i,String(s))?o.push(p(t,i,n,e,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(p(t,i,n,e,r,!0))}),o}function p(t,i,n,e,r,o){var s,h,a;if(a=Object.getOwnPropertyDescriptor(i,r)||{value:i[r]},a.get?h=a.set?t.O("[Getter/Setter]","special"):t.O("[Getter]","special"):a.set&&(h=t.O("[Setter]","special")),T(e,r)||(s="["+r+"]"),h||(t.N.indexOf(a.value)<0?(h=v(n)?u(t,a.value,null):u(t,a.value,n-1),h.indexOf("\n")>-1&&(h=o?h.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+h.split("\n").map(function(t){return"   "+t}).join("\n"))):h=t.O("[Circular]","special")),x(s)){if(o&&r.match(/^\d+$/))return h;s=JSON.stringify(""+r),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.O(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.O(s,"string"))}return s+": "+h}function f(t,i,n){var e=0,r=t.reduce(function(t,i){return e++,i.indexOf("\n")>=0&&e++,t+i.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?n[0]+(""===i?"":i+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+i+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function v(t){return null===t}function y(t){return null==t}function b(t){return"number"==typeof t}function m(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function x(t){return void 0===t}function k(t){return j(t)&&"[object RegExp]"===M(t)}function j(t){return"object"==typeof t&&null!==t}function D(t){return j(t)&&"[object Date]"===M(t)}function S(t){return j(t)&&("[object Error]"===M(t)||t instanceof Error)}function G(t){return"function"==typeof t}function C(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function M(t){return Object.prototype.toString.call(t)}function B(t){return 10>t?"0"+t.toString(10):t.toString(10)}function q(){var t=new Date,i=[B(t.getHours()),B(t.getMinutes()),B(t.getSeconds())].join(":");return[t.getDate(),O[t.getMonth()],i].join(" ")}function T(t,i){return Object.prototype.hasOwnProperty.call(t,i)}var z=/%[sdj%]/g;n.format=function(t){if(!m(t)){for(var i=[],n=0;n<arguments.length;n++)i.push(r(arguments[n]));return i.join(" ")}for(var n=1,e=arguments,o=e.length,s=String(t).replace(z,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(e[n++]);case"%d":return Number(e[n++]);case"%j":try{return JSON.stringify(e[n++])}catch(i){return"[Circular]"}default:return t}}),h=e[n];o>n;h=e[++n])s+=v(h)||!j(h)?" "+h:" "+r(h);return s},n.L=function(t,r){function o(){if(!s){if(i.throwDeprecation)throw new Error(r);i.traceDeprecation?console.trace(r):console.error(r),s=!0}return t.apply(this,arguments)}if(x(e.process))return function(){return n.L(t,r).apply(this,arguments)};if(i.noDeprecation===!0)return t;var s=!1;return o};var E,I={};n.M=function(t){if(x(E)&&(E=i.s.NODE_DEBUG||""),t=t.toUpperCase(),!I[t])if(new RegExp("\\b"+t+"\\b","i").test(E)){var e=i.pid;I[t]=function(){var i=n.format.apply(n,arguments);console.error("%s %d: %s",t,e,i)}}else I[t]=function(){};return I[t]},n.V=r,r.R={bold:[1,22],X:[3,23],Y:[4,24],inverse:[7,27],Z:[37,39],$:[90,39],_:[30,39],blue:[34,39],aa:[36,39],green:[32,39],ba:[35,39],red:[31,39],ca:[33,39]},r.da={ea:"cyan",number:"yellow",fa:"yellow",undefined:"grey",ga:"bold",ha:"green",ia:"magenta",ja:"red"},n.isArray=d,n.ka=g,n.la=v,n.ma=y,n.na=b,n.oa=m,n.pa=w,n.qa=x,n.ra=k,n.sa=j,n.ta=D,n.ua=S,n.va=G,n.wa=C,n.isBuffer=t("./support/isBuffer");var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",q(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n.T=function(t,i){if(!i||!j(i))return t;for(var n=Object.keys(i),e=n.length;e--;)t[n[e]]=i[n[e]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":3,_process:2,inherits:1}],5:[function(t,i,n){i.g={"#appTitle":"1g0: let's play go!","#cancelAction":"Cancel","#confirmTitle":"Confirm","#problem":"Problem","#ok":"OK","#yes":"YES","#no":"NO","#cancel":"Cancel","#close":"Close","#none":"-","#play":"Play","#load":"Load","#newGame":"New game","#myGames":"My games","#importGame":"Import a game","#exportGame":"Export game","#downloadLatest":"Download latest","#fromFile":"From file:","#selectFile":"Select file","#recentGames":"Recent games:","#fromText":"From copy/paste:","#fromTextHelp":'(e.g. "d5,e3,..." or in SGF format)',"#archivedGames":"Archived games","#deleteGame":"Delete","#deleteGameConfirm":"Do you really want to delete this game?","#archiveGame":"Archive","#archiveGameConfirm":"Do you want to archive this game? (you can restore it later)","#showArchivedGames":"Archived games","#restoreGame":"Restore","#empty":"(empty)","#myGamesHelp":"Any game you create or load/edit will be added to this list","#settings":"Settings","#colorTheme":"Color theme","#setupDropbox":"Setup Dropbox","#review":"Study","#endStudy":"End study","#evalScore":"Evaluate score","#rewindAll":"Back to game start","#resign":"Resign","#pass":"Pass","#undo":"Undo","#resignConfirm":"Do you really want to resign?","#syncGame":"Sync game with cloud","#syncMyGames":"Sync my games with cloud","#syncStart":"Connecting...","#noCloud":"Not connected to cloud","#archivedGame":"[archived %1]","#remote":"[remote %1]","#uploaded":"Uploaded: ","#downloaded":"Downloaded: ","#alreadySync":"Already in sync: ","#synced":"Synced: ","#deleted":"Deleted: ","#archived":"Archived: ","#unarchived":"Unarchived: ","#undeleted":"Undeleted: ","#syncDone":"Sync completed."}},{}],6:[function(t,i,n){i.g={".cafeAuLait":{".menuBtn":{backgroundColor:"#704f43"},".topTitle":{backgroundColor:"#5c4137"}},".neonBlack":{body:{backgroundColor:"#000"},".btn":{backgroundColor:"#02192b",color:"#f8a3e1",borderColor:"#5d80c6"},".btn+toggled":{backgroundColor:"#380966",color:"#cad904"},".menuBtn":{backgroundColor:"#0e4571"},".topTitle":{backgroundColor:"#0b3557"},".statusBar":{backgroundColor:"#c7cced",border:"#07b2ff 1px solid",boxShadow:"3px 3px 20px #537cc6"},".board":{backgroundColor:"#002"},".mainControls":{color:"#fdf"},".dialog":{backgroundColor:"#0d0217",color:"#fdf",boxShadow:"#3fb 3px 3px 20px",border:"solid #b395d7 1px"},".dialogTitle":{backgroundColor:"#0b3557",color:"#fffaff",textShadow:"#06b1ff 4px 4px 7px",borderColor:"#fff",boxShadow:"#00abff 3px 3px 20px"},".playerBtn":{backgroundColor:"#5034a9"},".sizeBtn":{backgroundColor:"#5034a9"},".boardImgFrame":{backgroundColor:"#09132a",boxShadow:"#3fb 3px 3px 20px"},".curSize":{textShadow:"#0a9da9 3px 3px 5px"},".gameList":{border:"1px solid #8ea3da",backgroundColor:"#000"},".oneGame+selected":{backgroundColor:"#2a4990"},".dropDwn":{backgroundColor:"#000"},".inputBox":{backgroundColor:"#000"},".devDiv":{backgroundColor:"#5a3571",color:"#38cead",border:"1px solid #400ac1"},".devLogBox":{color:"#000"}},".bottleGreen":{body:{backgroundColor:"#000"},".btn":{backgroundColor:"#022b10",color:"#fff",borderColor:"#5dc677"},".btn+toggled":{backgroundColor:"#380966",color:"#cad904"},".menuBtn":{backgroundColor:"#146c43"},".topTitle":{backgroundColor:"#0b573e"},".statusBar":{backgroundColor:"#8ca197",border:"#2d8722 1px solid",boxShadow:"3px 3px 20px #537cc6"},".board":{backgroundColor:"#002600"},".mainControls":{color:"#eee"},".dialog":{backgroundColor:"#071903",color:"#eee",boxShadow:"#3ff 2px 2px 15px",border:"solid #000 1px"},".dialogTitle":{backgroundColor:"#0b573e",color:"#fffaff",textShadow:"#06b1ff 4px 4px 7px",borderColor:"#fff",boxShadow:"#00abff 3px 3px 20px"},".playerBtn":{backgroundColor:"#107733"},".sizeBtn":{backgroundColor:"#107733"},".boardImgFrame":{backgroundColor:"#0c2529",boxShadow:"#3ff 2px 2px 15px"},".curSize":{textShadow:"#0a9da9 3px 3px 5px"},".gameList":{border:"1px solid #8ea3da",backgroundColor:"#000"},".oneGame+selected":{backgroundColor:"#2a4990"},".dropDwn":{backgroundColor:"#000"},".inputBox":{backgroundColor:"#000"},".devDiv":{backgroundColor:"#5a3571",color:"#38cead",border:"1px solid #400ac1"},".devLogBox":{color:"#000"}}}},{}],7:[function(t,i,n){i.g={".cgos":{xa:!0,ya:!0},".chinese":{xa:!0,ya:!0},".japanese":{}}},{}],8:[function(t,i,n){"use strict";function e(t){this.za=null,this.Aa=t,this.Ba=null,this.Ca={},this.Da=null,this.Ea=0}function r(t){return(t.length-t.replace(/;[BW]\[/g,"").length)/3}function o(t){return(t.length-t.replace(/\(;/g,"").length)/2-1}function s(t,i){return 0===i?"":", "+i+" "+t}function h(t){return t||0===t?" "+t:""}function u(t){var i=t.Ua(),n=parseInt(i);return isNaN(n)?n=19:i=i.substr(i.indexOf(" ")+1),String.fromCharCode(90-n)+"|"+i}function a(t,i){return u(t).localeCompare(u(i))}var c=t("./net/goSites"),l=t("./SgfReader"),p=10,f=/[\\\/]/g;i.g=e;var d="sgf",g="tagMap",v="serverStamp",y="lastChange";e.prototype.Fa=function(){var t={};return t[d]=this.Aa,t[g]=this.Ca,t[v]=this.Da,t[y]=this.Ea,t},e.prototype.Ga=function(t){if(this.Aa)throw new Error("Game already initialized");return"string"==typeof t&&"("===t[0]?(this.Aa=t,!0):t[d]?(this.Aa=t[d],this.Ca=t[g]||{},this.Da=t[v]||null,this.Ea=t[y]||0,!0):!1},e.prototype.Ha=function(t,i){if(!l.Ia(t))return i.push("Only SGF is supported in this version"),!1;if(this.Aa)throw new Error("Game already initialized");return this.Aa=t,this.Ja(i)},e.prototype.Ja=function(t){var i=new l;return i.Ka(this.Aa,t)?(this.Ba=i.La(),!0):!1},e.prototype.Ma=function(t,i){var n=new l;if(!n.Ka(t.Na(),i))return null;var e=n.La();return this.Ba||this.Ja(i)?(this.Ba.Ma(e),!0):null},e.prototype.Oa=function(t,i){var n=this.Ca[t];if(n)return n;var e=i,r=this.Aa.indexOf(t+"[");if(r>=0){var o=this.Aa.substring(r+t.length+1,this.Aa.indexOf("]",r));switch(typeof i){case"number":e=parseFloat(o);break;default:e=o}}return void 0!==e&&(this.Ca[t]=e),e},e.prototype.Pa=function(t){var i=this.Oa(t,"?");return i.length<=p?i:i.substr(0,p-1).trim()+"."},e.prototype.Na=function(){return this.Aa},e.prototype.Qa=function(t){return t===this.Aa?!1:(this.Aa=t,this.Da=null,this.Ea=Date.now(),!0)},e.prototype.Ra=function(t,i){this.Da=t,this.Ea=i},e.prototype.Sa=function(){return this.Da},e.prototype.Ta=function(){return this.Ea},e.prototype.Ua=function(){var t="",i=this.Oa("SZ",19);return 19!==i&&(t+=i+"x"+i+" "),t+=this.Pa("PW")+"/"+this.Pa("PB"),t+=s("mov.",r(this.Aa)),t+=s("var.",o(this.Aa))},e.prototype.Va=function(){if(this.za)return this.za;var t="",i=this.Oa("SZ",19);return 19!==i&&(t+=i+"x"+i+" "),t+=this.Pa("PW")+"-VS-"+this.Pa("PB"),t+=h(this.Oa("DT")),t+=h(this.Wa("PC")),t+=h(this.Wa("SO")),t+=h(this.Wa("EV")),t=t.replace(f,"-"),this.za=t,t},e.prototype.Wa=function(t){var i=this.Oa(t);return i?c.Xa(t,i):i},e.Ya=a},{"./SgfReader":23,"./net/goSites":74}],9:[function(t,i,n){"use strict";function e(){this.Za()}i.g=e,e.prototype.Za=function(){this.$a={}},e.prototype._a=function(){this.Za(),this.ab("date",(new Date).toISOString().substr(0,10))},e.prototype.bb=function(t){this.Za();for(var i in t)this.$a[i]=t[i]},e.prototype.cb=function(t){return this.$a[t]},e.prototype.ab=function(t,i){this.$a[t]=i},e.prototype.eb=function(){return this.$a},e.prototype.fb=function(t,i,n){this.ab("boardSize",t),this.ab("komi",i),this.ab("rules",n)}},{}],10:[function(t,i,n){"use strict";function e(){this.ob(y),this.pb=null,this.qb()}var r=t("./constants"),o=t("./Goban"),s=t("./HandicapSetter"),h=t("./log"),u=t("./Move"),a=t("../config/rules.json"),c=u.gb,l=u.hb,p=u.ib,f=u.jb,d=u.kb,g=r.lb,v=r.mb,y=r.nb,b=":",m="-",w=",";i.g=e,e.prototype.qb=function(){this.history=[],this.rb=[],this.sb=null,this.tb=0,this.ub=this.vb=g,this.wb=this.xb=!1,this.yb=this.zb=null},e.prototype.Ab=function(t){this.ob(t.Bb,!0),this.Cb(t.pb.Db,t.sb,t.tb),this.Eb(t.vb),this.Fb(t.history)},e.prototype.Gb=function(){this.pb.clear(),this.history=[],this.ub=this.vb,this.Hb()},e.prototype.ob=function(t,i){this.Bb=t,t=t||"unspecified";var n=a["."+t.toLowerCase()];if(!n){if(!i)throw new Error("Invalid rules: "+t+"\nValid values: "+Object.keys(a).map(function(t){return t.substr(1)}).join(", "));n=a["."+y.toLowerCase()]}this.ya=n.ya||!1,this.xa=n.xa||!1},e.prototype.Ib=function(){return this.Bb},e.prototype.Cb=function(t,i,n){if(this.qb(),this.pb&&t===this.pb.Db)this.pb.clear();else if(this.pb=new o(t),this.pb.Db!==t)return this.Jb("Size could not be set: "+t);return this.pb.Kb(this.ya),this.tb=void 0!==n?n:i?.5:6.5,i=i||0,!!this.Lb(i)},e.prototype.Eb=function(t){this.ub=this.vb=t},e.prototype.Lb=function(t){if(this.history.length>0)throw new Error("Handicap cannot be changed during a game");if(0===t||"0"===t)return this.sb=null,this.Eb(g),!0;var i,n,e;if(""+~~t==""+t)for(e=~~t,i=s.Mb(this.pb.Db,e),this.sb=[],n=0;n<i.length;n++)this.sb.push(d(i[n][0],i[n][1]));else e=t.length,this.sb=t;return this.sb.length||(this.sb=null),this.Hb(),this.Eb(this.sb?v:g),!e||this.sb&&this.sb.length===e?!0:this.Jb("Handicap could not be set: "+t)},e.prototype.Hb=function(){var t=this.sb;if(t)for(var i=0;i<t.length;i++){var n=f(t[i]);this.pb.Nb(n[0],n[1],n[2]||g)}},e.prototype.Ob=function(){return this.sb},e.prototype.Pb=function(){return this.sb?this.sb.length:0},e.prototype.Qb=function(t,i){if(h.error&&h.error(t),!i)throw new Error(t);return i.push(t),!1},e.prototype.Fb=function(t,i){if(!t||!t.length)return!0;for(var n=0;n<t.length;n++)if(!this.Rb(t[n]))return this.Qb("Failed playing loaded move #"+(n+1)+":\n"+this.Sb().join(", "),i);return!0},e.prototype.Tb=function(t,i){return t?this.Fb(t.split(w),i):!0},e.prototype.Rb=function(t){if(this.xb&&t.indexOf("undo")<0)return this.Jb("Game already ended");if(/^[B|W]?-?[a-z][1-2]?[0-9]$/.test(t))return this.Ub(t);var i=p(t);if(i.startsWith("pass"))return this.Vb();if(i.startsWith("resi"))return this.Wb(l(t));if("undo"===i)return this.Xb();if("half_undo"===i)return this.Xb(!0);if(i.startsWith("hand")){var n=i.substr(i.indexOf(b)+1);return this.Lb(n.split(m))}return i.startsWith("load:")?this.Tb(i.slice(5)):this.Jb("Invalid command: "+i.substr(0,20))},e.prototype.Ub=function(t){var i=f(t);3===i.length&&(this.ub=i[2]);var n=i[0],e=i[1];return this.pb.Yb(n,e,this.ub)?(this.pb.Nb(n,e,this.ub),this.Zb(t),this.$b(),!0):this.Jb("Invalid move: "+t)},e.prototype.Wb=function(t,i){t=void 0!==t?t:this.ub,this.yb=t,this.zb=i;var n=c("resign",t)+(i?"-"+i:"");return this.Zb(n),this.$b(),this.xb=!0,this.wb=!1,!0},e.prototype.Vb=function(){var t=this.history[this.history.length-1];return t&&t.endsWith("pass")&&(this.wb=!0),this.Zb(c("pass",this.ub)),this.$b(),!0},e.prototype._b=function(t,i){return this.wb?(this.wb=!1,t?(this.xb=!0,!0):(i!==this.ub&&(this.history.pop(),this.$b()),!0)):this.Jb("The game is not ending yet")},e.prototype.ac=function(){return this.history.length},e.prototype.bc=function(){var t="";this.sb&&(t="handicap"+b+this.sb.join(m)+w);var i=this.history;return i[0]=c(p(i[0]),this.vb),t+i.join(w)},e.prototype.Jb=function(t){return this.rb.push(t),!1},e.prototype.Sb=function(){var t=this.rb;return this.rb=[],t},e.prototype.$b=function(){this.ub=1-this.ub},e.prototype.Zb=function(t){return this.history.push(t)},e.prototype.Xb=function(t){var i=t?1:2;if(this.history.length<i)return this.Jb("Nothing to undo");this.xb=this.wb=!1;for(var n=i;n>=1;n--){var e=this.history.pop();!e.endsWith("pass")&&e.indexOf("resi")<0&&this.pb.cc()}return t&&this.$b(),!0}},{"../config/rules.json":7,"./Goban":15,"./HandicapSetter":18,"./Move":20,"./constants":49,"./log":70}],11:[function(t,i,n){"use strict";function e(t){this.dc=t,this.ec=null,this.fc=!1,this.Ba=null,this.gc=null,this.hc=this.ic=null,this.jc=new r}var r=t("./GameInfo"),o=t("./GameInVault"),s=t("./ReviewTree"),h=t("./SgfReader"),u=t("./SgfWriter");i.g=e,e.prototype.kc=function(){this.ec=null,this.fc=!1,this.Ba=new s(this.dc.Ob()),this.gc=[],this.jc._a(),this.lc()},e.prototype.mc=function(){return this.ec||(this.ec=new o),this.nc(),this.ec},e.prototype.oc=function(t,i){return this.pc(t.Na(),i)?(this.ec=t,!0):!1},e.prototype.lc=function(){var t=this.dc;this.jc.fb(t.pb.Db,t.tb,t.Ib())},e.prototype.qc=function(){return this.gc&&this.gc.join()===this.dc.history.join()?!1:(this.gc=this.dc.history.concat(),this.Ba.rc(this.gc),!0)},e.prototype.nc=function(){if(!this.fc){var t=this.Ba.getBookmark();this.qc(),this.Ba.sc(t)}var i=this.hc=this.hc||new u,n=i.tc(this.jc,this.Ba);this.ec.Qa(n)},e.prototype.uc=function(){return this.fc=!0,this.qc(),this.Ba},e.prototype.vc=function(){this.fc=!1},e.prototype.pc=function(t,i,n){var e=this.ic=this.ic||new h;return e.Ka(t,i,n)?(this.dc.Cb(e.wc,e.xc(),e.tb),this.dc.ob(e.cb("rules"),!0),this.jc.bb(e.yc),this.ec=null,this.Ba=e.La(),this.gc=null,this.dc.Fb(e.zc(),i)):!1},e.prototype.Ac=function(t,i){return this.dc.Tb(t,i)?(this.jc._a(),this.lc(),!0):!1}},{"./GameInVault":8,"./GameInfo":9,"./ReviewTree":21,"./SgfReader":23,"./SgfWriter":24}],12:[function(t,i,n){"use strict";function e(t){this.Bc=t,this.Cc()}var r=t("./GameInVault"),o=t("./GameVaultList"),s=t("./MostRecentlyUsedList"),h="interruptedGame",u=5;i.g=e,e.prototype.Cc=function(){this.Dc=new o(this.Bc,"myActiveGames"),this.Ec=new o(this.Bc,"archivedGames"),this.Fc=new o(this.Bc,"recentGames"),this.Gc=new s(this.Bc,"mostRecentGames",u),this.Dc.Hc("myGames")},e.prototype.Ic=function(t){return this.Dc.Jc(t)||null},e.prototype.Kc=function(t){var i=this.Gc.getItem(t);return this.Fc.Jc(i)||null},e.prototype.Lc=function(t){this.Mc(t),this.Dc.Nc(t)},e.prototype.Oc=function(t){this.Dc.Nc(t)},e.prototype.Pc=function(t){return this.Dc.Jc(t)},e.prototype.Qc=function(){return this.Dc.Rc()};var a=0,c=1,l=2,p=-1;e.Sc={Tc:0,ACTIVE:1,Uc:2,Vc:-1},e.prototype.Wc=function(t){return this.Dc.Jc(t)?c:this.Ec.Jc(t)?l:this.Xc(t)?p:a},e.prototype.Yc=function(t){return this.Ec.Jc(t)},e.prototype.Zc=function(){return this.Ec.Rc()},e.prototype.$c=function(t){return this.Dc._c(t)},e.prototype.ad=function(t){return this.Ec._c(t)},e.prototype.Xc=function(t){return this.Dc.Xc(t)||this.Ec.Xc(t)},e.prototype.bd=function(t){return this.Dc.dd(this.Ec,t)},e.prototype.ed=function(t){return this.Ec.dd(this.Dc,t)},e.prototype.fd=function(t){this.Ec.Nc(t)},e.prototype.gd=function(t,i){var n=new r;if(!n.Ha(t,i))return null;var e=this.Dc.Jc(n.Va());return e&&!n.Ma(e,i)?null:n},e.prototype.hd=function(t){this.Bc.jd(h,t.Fa())},e.prototype.kd=function(){var t=this.Bc.ld(h);if(!t)return null;var i=new r;return i.Ga(t)?(this.Bc.jd(h,null),i):(console.error("Invalid serialized game"),null)},e.prototype.md=function(){for(var t=this.Gc.nd(),i=[],n=0;n<t.length;n++){var e=this.Fc.Jc(t[n]);e&&i.push(e.Ua())}return i},e.prototype.Mc=function(t){this.Fc.Nc(t);var i=t.Va(),n=this.Gc.od(i);n&&this.Fc._c(i)}},{"./GameInVault":8,"./GameVaultList":13,"./MostRecentlyUsedList":19}],13:[function(t,i,n){"use strict";function e(t,i){this.Bc=t,this.pd=i,this.qd={},this.rd=null,this.sd={},this.td()}var r=t("./GameInVault");i.g=e;var o="~";e.prototype.td=function(){this.rd=this.Bc.ld(this.pd,{}),this.sd=this.Bc.ld(this.pd+o,{});for(var t in this.rd){var i=new r;i.Ga(this.rd[t]),this.qd[t]=i}},e.prototype.Hc=function(t){for(var i=this.Bc.ld(t,[]),n=0;n<i.length;n++){var e=new r(i[n]),o=e.Va();this.qd[o]=e,this.rd[o]=e.Fa()}this.Bc.jd(this.pd,this.rd),this.Bc.jd(t,void 0)},e.prototype.Nc=function(t){var i=t.Va();this.qd[i]=t,this.rd[i]=t.Fa(),this.Bc.jd(this.pd,this.rd),this.sd[i]&&(delete this.sd[i],this.Bc.jd(this.pd+o,this.sd))},e.prototype.ud=function(t){return this.qd[t]?(delete this.qd[t],delete this.rd[t],this.Bc.jd(this.pd,this.rd),!0):!1},e.prototype._c=function(t){return this.ud(t)?(this.sd[t]=Date.now(),this.Bc.jd(this.pd+o,this.sd),!0):!1},e.prototype.Xc=function(t){return this.sd[t]},e.prototype.Rc=function(){var t=[];for(var i in this.qd)t.push(this.qd[i]);return t},e.prototype.Jc=function(t){return this.qd[t]},e.prototype.dd=function(t,i){var n=this.qd[i];return n?(this.ud(i),t.Nc(n),!0):!1}},{"./GameInVault":8}],14:[function(t,i,n){"use strict";function e(t,i,n){this.vd=t||{},this.wd=i||{},this.name=n||"#"+o++}var r=t("./helper"),o=1;i.g=e;var s=.05,h=0,u=1;e.prototype.clone=function(t){return new e(r.clone(this.vd),r.clone(this.wd),t)},e.prototype.xd=function(t){this.wd=t},e.prototype.toString=function(){var t="{"+this.name+" - ";for(var i in this.vd)t+=i+":"+this.vd[i].toFixed(2)+", ";return t.yd(", ")+"}"},e.prototype.zd=function(t){var i=0;for(var n in this.vd){var e=this.vd[n],r=t.vd[n];0>r!=0>e?0>r?(e-=r,r=0):(r-=e,e=0):(e=Math.abs(e),r=Math.abs(r));var o;o=0===r?e>1?1:e:0===e?r>1?1:r:1-(r>=e?e/r:r/e),i+=o}return i},e.prototype.get=function(t,i,n,e){void 0===n&&(n=null),void 0===e&&(e=null);var r=this.vd[t];if(r)return r;if(this.vd[t]=i,(n||e)&&(this.wd[t]=[n,e]),n&&e&&n>e)throw new Error("Limits are invalid: "+n+" > "+e);return i},e.prototype.Fa=function(){return JSON.stringify(this)},e.Ad=function(t){var i=JSON.parse(t);this.vd=i.vd,this.wd=i.wd},e.prototype.Bd=function(t,i,n,e,r){var o=this.vd,s=t.vd;i.xd(this.wd),n.xd(this.wd);var h=i.vd,u=n.vd,a=~~(Math.random()*o.length),c=~~(Math.random()*a),l=0;for(var p in o)c>l||l>a?(h[p]=o[p],u[p]=s[p]):(h[p]=s[p],u[p]=o[p]),Math.random()<e&&(h[p]=this.Cd(p,h[p],r)),Math.random()<e&&(u[p]=this.Cd(p,u[p],r)),l++},e.prototype.Cd=function(t,i,n){var e,r=this.wd[t];if(r){var o=r[h],a=r[u];if(Math.random()<n)e=o+Math.random()*(a-o);else{var c=1+2*Math.random()*s-s;e=i*c,o&&o>e&&(e=o),a&&e>a&&(e=a)}}else e=i+10*(Math.random()-.5);return e},e.prototype.Dd=function(){for(var t in this.vd)this.vd[t]=this.Cd(t,this.vd[t],1);return this}},{"./helper":50}],15:[function(t,i,n){"use strict";function e(t){if(void 0===t&&(t=19),t!==~~t||3>t)throw new Error("Invalid goban size: "+t);this.Db=t,this.Fd=new o(t,u),this.grid=new o(t,s.Ed),this.Gd=this.grid.Hd;var i,n;for(n=t;n>=1;n--)for(i=t;i>=1;i--)this.Gd[n][i]=new s(this,i,n,a);for(n=1;t>=n;n++)for(i=1;t>=i;i++)this.Gd[n][i].Id();e.Jd=new h(this,new s(this,-50,-50,a),-100,0),this.Kd=[e.Jd],this.Ld=[e.Jd],this.Md=[],this.Nd=0,this.history=[],this.Kb(!1),this.Od=0}var r=t("./constants"),o=t("./Grid"),s=t("./Stone"),h=t("./Group"),u=(t("./test"),r.Ed),a=r.EMPTY;i.g=e,e.prototype.clear=function(){for(var t=1;t<=this.Db;t++)for(var i=1;i<=this.Db;i++){var n=this.Gd[t][i];n.group&&n.group.clear()}this.Kd.shift(),this.Ld.shift(),this.Md.concat(this.Kd),this.Md.concat(this.Ld),this.Kd.length=0,this.Ld.length=0,this.Kd.push(e.Jd),this.Ld.push(e.Jd),this.Nd=0,this.history.length=0,this.Kb(!1),this.Od=0},e.prototype.Pd=function(t,i){var n=++this.Nd,e=this.Md.pop();return e?e.Qd(t,i,n):e=new h(this,t,i,n),e},e.prototype.Rd=function(t){t.Sd===this.Nd&&this.Nd--,this.Md.push(t)},e.prototype.Td=function(){return this.grid.Ud()},e.prototype.Vd=function(t){this.Fd.Vd(t);for(var i=this.Db;i>=1;i--)for(var n=1;n<=this.Db;n++){var e=this.Fd.Hd[i][n];e!==a&&this.Nb(n,i,e)}},e.prototype.Wd=function(){for(var t={},i=this.Db;i>=1;i--)for(var n=this.Db;n>=1;n--){var e=this.Gd[i][n].group;e&&(t[e.Sd]=e)}return t},e.prototype.Xd=function(){for(var t,i="Board:\n"+this.toString()+"\nGroups:\n"+this.grid.Yd(function(t){return t.group?""+t.group.Sd:"."})+"\nStones in groups:\n",n={},e=this.grid.Hd,r=0;t=e[r],r<e.length;r++)for(var o,s=t,h=0;o=s[h],h<s.length;h++)o&&o.group&&(n[o.group.Sd]=o.group);for(var u=1;u<=this.Nd;u++)n[u]&&(i+=n[u].Xd()+"\n");return i},e.prototype.toString=function(){return this.grid.Yd()},e.prototype.Yb=function(t,i,n){if(1>t||t>this.Db||1>i||i>this.Db)return!1;var e=this.Gd[i][t];if(e.color!==a)return!1;if(e.Zd(n))return!1;if(this.$d){if(this._d[this.ae(t,i,n)])return!1}else if(e.be(n))return!1;return!0},e.prototype.ce=function(t,i){return this.Gd[i][t]},e.prototype.de=function(t,i){return this.Gd[i][t].color},e.prototype.ee=function(t,i){return this.Gd[i][t].ee()},e.prototype.ac=function(){return this.history.length},e.prototype.Nb=function(t,i,n){this.fe(t,i,n);var e=this.Gd[i][t];if(e.color!==a)throw new Error("Tried to play on existing stone in "+e);return this.ge(t,i,n)},e.prototype.cc=function(){if(!this.history.length)throw new Error("Extra undo");this.history.pop().he(),this.fe()},e.prototype.ge=function(t,i,n){var e=this.Gd[i][t];return this.history.push(e),this.Od++,e.ie(n),e},e.prototype.je=function(){this.history.pop().he()},e.prototype.ke=function(){return this.Kd[this.Kd.length-1]},e.prototype.le=function(){return this.history[this.history.length-1]},e.prototype.me=function(t){t=t||[0,0];for(var i=this.Kd.length-1;i>=0;i--){var n=this.Kd[i];t[n.color]+=n.ne.length}return t},e.prototype.Kb=function(t){if(this.history.length>0)throw new Error("Superko rule changed during game");this.$d=t,t?(this.oe=this.pe(),this.qe=[],this._d={}):(this.oe=null,this.qe=this._d=null)},e.prototype.fe=function(t,i,n){this.$d?t?(this.qe.push(this.oe),this._d[this.oe]=this.history.length,this.oe=this.ae(t,i,n)):(this.oe=this.qe.pop(),this._d[this.oe]=null):this.oe=null},e.prototype.ae=function(t,i,n){for(var e=this.re(this.oe,t,i,n),r=this.ce(t,i).se(1-n),o=r.length-1;o>=0;o--)if(!(r[o].te>1))for(var s=r[o].ne,h=s.length-1;h>=0;h--){var u=s[h];e=this.re(e,u.ue,u.ve,a)}return e},e.prototype.we=function(){return this.$d?this.oe:(this.oe||(this.oe=this.Td()),this.oe)};var c=33,l="0".charCodeAt();e.prototype.pe=function(){for(var t="",i="",n=this.Db,e=1;n>=e;e++)for(var r=this.Gd[e],o=1;n>=o;o++)t+=String.fromCharCode(l+r[o].color+1),4===t.length&&(i+=String.fromCharCode(parseInt(t,3)+c),t="");return t.length&&(t=(t+"000").substr(0,4),i+=String.fromCharCode(parseInt(t,3)+c)),i},e.prototype.re=function(t,i,n,e){var r,o=(n-1)*this.Db+(i-1),s=~~(o/4),h=o%4;if(e===a){var u=("000"+(t.charCodeAt(s)-c).toString(3)).slice(-4),l=u.substr(0,h)+"0"+u.substr(h+1);r=parseInt(l,3)+c}else r=t.charCodeAt(s)+(1<<e)*Math.pow(3,3-h);return t.substr(0,s)+String.fromCharCode(r)+t.substr(s+1)}},{"./Grid":16,"./Group":17,"./Stone":25,"./constants":49,"./test":75}],16:[function(t,i,n){"use strict";function e(t,i,n){if(void 0===i)throw new Error("Grid init value must be defined");this.Db=t,void 0===n?this.Hd=u.ye(t+2,t+2,i):(this.Hd=u.ye(t+2,t+2,n),this.init(i))}function r(t){if(t===l)return"(BORDER)";if(t>=e.Ge)return String.fromCharCode("A".charCodeAt()+t-e.Ge);if(t<e.Ie||t>=e.Ee.length)throw new Error("Invalid color "+t);return 0>t&&(t+=e.Ee.length),e.Ee[t]}function o(t){return r("number"==typeof t?t:t.color)}function s(t){for(var i="",n=t.length-1;n>=0;n--)i+=t[n];return i}var h=t("./constants"),u=t("./helper"),a=t("./Move"),c=a.xe,l=h.Ed;i.g=e,e.ze="+",e.Ae="?",e.Be="@O",e.Ce="&#",e.De="-:",e.Ee=e.Be+e.Ce+e.De+e.Ae+e.ze,e.Fe=e.Ae+e.ze+e.Ee,e.Ge=100,e.He=-1,e.Ie=-2,e.Je=2,e.Ke=4,e.Le=[0,0,-1,1,1,-1,-1,1],e.Me="-'?.:",e.prototype.init=function(t){if(void 0===t)throw new Error("Grid init value must be defined");for(var i=this.Db;i>=1;i--)for(var n=this.Hd[i],e=this.Db;e>=1;e--)n[e]=t},e.prototype.K=function(t){if(t.Db!==this.Db)throw new Error("Cannot copy between different sized grids");for(var i=this.Db;i>=1;i--)for(var n=this.Hd[i],e=t.Hd[i],r=this.Db;r>=1;r--)n[r]=e[r];return this},e.prototype.Ne=function(t){var i=t.grid;if(i.Db!==this.Db)throw new Error("Cannot copy between different sized grids");for(var n=this.Db;n>=1;n--)for(var e=this.Hd[n],r=i.Hd[n],o=this.Db;o>=1;o--)e[o]=r[o].color;return this},e.Oe=function(t){return e.Fe.indexOf(t)+e.Ie},e.prototype.Yd=function(t){return this.Pe(!0,"\n",t||o)},e.prototype.Ud=function(t){return this.Pe(!1,",",t||o)},e.prototype.Pe=function(t,i,n){var r,o,s,h=new e(this.Db,"").Hd,u=1;for(o=this.Db;o>=1;o--)for(r=1;r<=this.Db;r++)s=n(this.Hd[o][r]),null!==s&&(h[o][r]=s,u=Math.max(u,s.length));var a=u,l="          ",p="";for(o=this.Db;o>=1;o--){for(t&&(p+="%2d".format(o)+" "),r=1;r<=this.Db;r++)s=h[o][r],s.length<a&&(s=l.substr(1,a-s.length)+s),p+=s;p+=i}if(t){for(p+="   ",r=1;r<=this.Db;r++)p+=l.substr(1,a-1)+c(r);p+="\n"}return"\n"!==i&&(p=p.Qe()),p},e.prototype.toString=function(){for(var t="",i=this.Db;i>=1;i--){for(var n=1;n<=this.Db;n++)t+=r(this.Hd[i][n]);t+="\n"}return t},e.prototype.Td=function(){return"object"==typeof this.Hd[1][1]?this.Ud(function(t){return r(t.color)}):this.Ud(function(t){return r(t)})},e.prototype.Vd=function(t){var i=t.split(/\"|,/);if(i.length!==this.Db)throw new Error("Invalid image: "+i.length+" rows instead of "+this.Db);for(var n=this.Db;n>=1;n--){var r=i[this.Db-n];if(r.length!==this.Db)throw new Error("Invalid image: row "+r);for(var o=1;o<=this.Db;o++)this.Hd[n][o]=e.Oe(r[o-1])}},e.Re=function(t){return t.split(",").reverse().join()},e.Se=function(t){return t.split(",").map(s).join()},e.Te=function(t){return s(t)},e.Ue=function(t){for(var i="",n=t.split(","),e=n[0].length-1;e>=0;e--){i+=",";
for(var r=0;r<n.length;r++)i+=n[r][e]}return i.substr(1)}},{"./Move":20,"./constants":49,"./helper":50}],17:[function(t,i,n){"use strict";function e(t,i,n,e){this.pb=t,this.ne=[i],this.te=n,this.color=i.color,this.We=null,this.Xe=null,this.Ye=null,this.Sd=e,this.Ze=null,this.$e=this._e=0}var r=t("./constants"),o=t("./log"),s=t("./Move"),h=s.Ve,u=r.EMPTY;i.g=e,e.prototype.Qd=function(t,i,n){this.ne.length=0,this.ne.push(t),this.te=i,this.color=t.color,this.We=this.Xe=this.Ye=null,this.Sd=n,this.$e=this._e=0},e.prototype.clear=function(){for(var t=this.ne.length-1;t>=0;t--)this.ne[t].clear();this.pb.Rd(this)},e.prototype.toString=function(t){if(0===t)return"#"+this.Sd;if(1===t)return this.ne[0]+" x"+this.ne.length;for(var i,n="{group #"+this.Sd+" of "+this.ne.length+" "+h(this.color)+" stones [",e=this.ne,r=0;i=e[r],r<e.length;r++)n+=i.af()+",";return n=n.Qe(),n+="], lives:"+this.te,this.We&&(n+=" MERGED with #"+this.We.Sd),this.Ye&&(n+=" KILLED by "+this.Ye.af()),n+="}"},e.prototype.bf=function(){return this.ne.length&&this.ne[0].group===this},e.prototype.Xd=function(){return this.toString()},e.prototype.cf=function(){return this.ne.map(function(t){return t.af()}).sort().join(",")},e.prototype.df=function(){for(var t,i=[],n=this.ne,e=0;t=n[e],e<n.length;e++)for(var r,o=t.ef,s=0;r=o[s],s<o.length;s++)r.color===u&&i.indexOf(r)<0&&i.push(r);if(i.length!==this.te)throw new Error("Wrong life count for group");return i},e.prototype.ff=function(){for(var t,i=[],n=1-this.color,e=this.ne,r=0;t=e[r],r<e.length;r++)for(var s,h=t.ef,u=0;s=h[u],u<h.length;u++)s.color===n&&i.indexOf(s.group)<0&&i.push(s.group);return o.gf,i},e.prototype.hf=function(t){for(var i,n=-1,e=t.ef,r=0;i=e[r],r<e.length;r++)if(i.color===u){n++;for(var s,h=i.ef,a=0;s=h[a],a<h.length;a++)if(s.group===this&&s!==t){n--;break}}return o.gf,n},e.prototype["if"]=function(t){if(o.gf,this.ne.push(t),this.te+=this.hf(t),this.te<0)throw new Error("Unexpected error (lives<0 on connect)");o.gf},e.prototype.jf=function(t){if(o.gf,this.ne.length>1){if(this.te-=this.hf(t),this.te<0)throw new Error("Lives<0 on disconnect")}else this.pb.Rd(this),o.gf;if(this.ne.pop()!==t)throw new Error("Unexpected error (disconnect order)")},e.prototype.kf=function(t){return this.te--,this.te<=0?this.lf(t):void 0},e.prototype.mf=function(t){if(this.te--,o.gf,this.te<1)throw new Error("Unexpected error (lives<1 on attack by resucitated)")},e.prototype.nf=function(t){this.te++,o.gf},e.prototype.pf=function(t,i){if(t.We===this||t===this||this.color!==t.color)throw new Error("Invalid merge");o.gf,this.te+=t.ne.length;for(var n,e=t.ne,r=0;n=e[r],r<e.length;r++)n.qf(this),this["if"](n);t.We=this,t.Xe=i,this.pb.Ld.push(t),o.gf},e.prototype.rf=function(t){o.gf;for(var i,n=t.ne,e=n.length-1;i=n[e],e>=0;e--)this.jf(i),i.qf(t);this.te-=t.ne.length,t.Xe=t.We=null,o.gf},e.prototype.sf=function(t){for(var i=this.pb.Ld,n=i.length-1;n>=0;n--){var e=i[n];if(e.Xe!==t||e.We!==this)break;this.rf(e),i.pop()}},e.prototype.lf=function(t){if(o.gf,this.te<0)throw new Error("Unexpected error (lives<0)");for(var i,n=this.ne,e=0;i=n[e],e<n.length;e++){for(var r,s=i.se(1-this.color),h=0;r=s[h],h<s.length;h++)r.nf(i);i.tf()}this.Ye=t,this.pb.Kd.push(this),o.gf},e.prototype.uf=function(){this.Ye=null,this.te=1;for(var t,i=this.ne,n=0;t=i[n],n<i.length;n++){t.vf(this);for(var e,r=t.se(1-this.color),o=0;e=r[o],o<r.length;o++)e.mf(t)}},e.wf=function(t){for(var i=t.pb.Kd,n=i.length-1;n>=0;n--){var e=i[n];if(e.Ye!==t)break;i.pop(),o.gf,e.uf()}}},{"./Move":20,"./constants":49,"./log":70}],18:[function(t,i,n){"use strict";function e(){}i.g=new e,e.prototype.Mb=function(t,i){if(i>4&&(9>t||t%2===0)&&(i=4),5>=t)return[];for(var n=13>t?2:3,e=1+n,r=(1+t)/2,o=t-n,s=[],h=0;i>h;h++){switch(i%2===1&&i>4&&h===i-1&&(h=8),h){case 0:var u=e,a=e;break;case 1:u=o,a=o;break;case 2:u=e,a=o;break;case 3:u=o,a=e;break;case 4:u=e,a=r;break;case 5:u=o,a=r;break;case 6:u=r,a=e;break;case 7:u=r,a=o;break;case 8:u=r,a=r}s.push([u,a])}return s}},{}],19:[function(t,i,n){"use strict";function e(t,i,n){this.Bc=t,this.pd=i,this.xf=n,this.yf=t.ld(i,[])}i.g=e,e.prototype.od=function(t){var i,n=this.yf.indexOf(t);return 0!==n?(0>n?(this.yf.unshift(t),this.yf.length>this.xf&&(i=this.yf.splice(this.xf))):(this.yf.splice(n,1),this.yf.unshift(t)),this.Bc.jd(this.pd,this.yf),i):void 0},e.prototype.getItem=function(t){return this.yf[t]},e.prototype.nd=function(){return this.yf}},{}],20:[function(t,i,n){"use strict";function e(t){switch(t[0]){case"B":return h;case"W":return u;default:return}}function r(t){return"B"!==t[0]&&"W"!==t[0]?t:"-"!==t[1]?t.substr(1):t.substr(2)}function o(t,i){var n=a.indexOf(t[0])+1,e=parseInt(t.substr(1,2));if(!n||isNaN(e)){if(i)return null;throw new Error("Illegal move parsed: "+t)}return[n,e]}var s=t("./constants"),h=s.lb,u=s.mb,a="abcdefghjklmnopqrstuvwxyz",c=["black","white"];n.hb=e,n.ib=r,n.gb=function(t,i){return(i===h?"B-":"W-")+t},n.Ve=function(t){return c[t]},n.zf=o,n.jb=function(t){var i=e(t);void 0!==i&&(t=r(t));var n=o(t,!0);if(!n){if("pass"===t||t.startsWith("resi"))return null;throw new Error("Illegal move parsed: "+t)}return void 0!==i?n.concat(i):n},n.kb=function(t,i){return a[t-1]+i},n.xe=function(t){return a[t-1]}},{"./constants":49}],21:[function(t,i,n){"use strict";function e(t){this.root=new r(null,[]),this.Af=-1,this.Bf=this.root,this.Cf=-1,this.Df(t)}function r(t,i,n){this.Ef=t,this.Ff=t?t.Ff+t.Gf.length:0,this.Gf=i,this.yc=n||[],this.children=null,this.Hf=null,this.If=!1}function o(t,i){return u(t)===u(i)}var s=t("./constants"),h=t("./Move"),u=h.ib,a=s.lb,c=s.mb,l="";i.g=e,r.prototype.Jf=function(){return[this.Gf,this.yc]},r.prototype.Kf=function(t){for(var i=0;i<this.children.length;i++)if(o(t,this.children[i].Gf[0]))return this.children[i];return null},r.prototype.Lf=function(t){var i=new r(this,[t]);return this.children.push(i),i},r.prototype.Mf=function(){this.children||(this.children=[],this.Lf(l))},r.prototype.Nf=function(){this.children.unshift(new r(this,[l]))},r.prototype.Of=function(){return this.Gf[0]===l},r.prototype.Pf=function(){if(!this.children)return null;var t=this.children[0];return t.Of()?null:t},r.prototype.Qf=function(){if(this.Hf)return this.Hf;if(!this.children)return null;var t=this.children[0];return t.Of()&&(t=this.children[1]),t||null},r.prototype.Rf=function(t){var i=this.children;i.splice(i.indexOf(t),1),i.length||(this.children=null),this.Hf===t&&(this.Hf=null)},r.prototype.Sf=function(t,i){var n=this.Gf.splice(t),e=this.yc.splice(t);if(!n.length)throw new Error("Invalid split at end");var o=new r(this,n,e);o.If=i,o.Hf=this.Hf;var s=o.children=this.children;if(s)for(var h=0;h<s.length;h++)s[h].Ef=o;this.children=[o]},r.prototype.Tf=function(t,i){var n;if(t===this.Gf.length){if(!this.children)throw new Error("Unexpected fork");n=this.Kf(i)||this.Lf(i)}else this.Sf(t,this.If),n=new r(this,[i]),this.children.push(n);return this.Hf=n,n},r.prototype.Uf=function(){for(var t=this;t;)t.If=!1,t=t.Pf()},r.prototype.Vf=function(){this.If=!0;var t=this.Ef.children;t[0]!==this&&(t.splice(t.indexOf(this),1),t[0].Of()?t[0]=this:t.unshift(this))},r.prototype.Wf=function(t){t+1!==this.Gf.length?(this.Sf(t+1,!1),this.Nf()):this.children&&!this.children[0].Of()&&this.Nf()},e.prototype.Df=function(t){if(t&&!t.length)throw new Error("empty setupMoves array");this.Xf=t,this.vb=t?c:a},e.prototype.xc=function(){return this.Xf},e.prototype.Yf=function(){return this.root},e.prototype.Zf=function(){return this.Cf<0?null:this.Bf.Gf[this.Cf]},e.prototype.$f=function(){return this.Bf.Ff+this.Cf},e.prototype._f=function(){return this.Bf.If},e.prototype.getBookmark=function(){return[this.Bf,this.Cf]},e.prototype.sc=function(t){this.Bf=t[0],this.Cf=t[1]},e.prototype.ag=function(){this.Bf=this.root,this.Cf=-1},e.prototype.bg=function(){return this.Bf.yc[this.Cf]},e.prototype.cg=function(t){if(t){var i=this.Bf.yc[this.Cf];i||(i=this.Bf.yc[this.Cf]={});for(var n in t)i[n]=t[n]}},e.prototype.dg=function(t){return t.Ff%2===0?this.vb:1-this.vb},e.prototype.eg=function(t){var i=this.Bf;if(this.Cf++,this.Cf===i.Gf.length){if(!i.children)return i.Gf.push(t)}else if(o(t,i.Gf[this.Cf]))return;this.Bf=i.Tf(this.Cf,t),this.Cf=0},e.prototype.fg=function(t){var i=this.Bf;this.Cf===i.Gf.length-1&&i.If&&i.Mf(),this.eg(t)},e.prototype.gg=function(){this.Bf.Mf()},e.prototype.hg=function(){if(this.Cf>0)this.Cf--;else if(this.Bf!==this.root)this.Bf=this.Bf.Ef,this.Cf=this.Bf.Gf.length-1;else{if(-1===this.Cf)return!1;this.Cf=-1}return!0},e.prototype.ig=function(t){var i=this.Bf;if(this.Cf===i.Gf.length-1){if(i=t?i.Pf():i.Qf(),!i)return null;this.Bf=i,this.Cf=0}else this.Cf++;return this.Bf.Gf[this.Cf]},e.prototype.jg=function(){return this.ig()},e.prototype.kg=function(){return this.ig(!0)},e.prototype.lg=function(){var t=this.Bf,i=this.Cf,n=this.ig();return this.Bf=t,this.Cf=i,n},e.prototype.mg=function(){var t=this.Bf;if(this.Cf<t.Gf.length-1)return null;var i=t.children;if(!i)return null;if(1===i.length)return null;var n=[];t.If||i[0].Gf[0]===l||n.push(l);for(var e=0;e<i.length;e++)n.push(i[e].Gf[0]);return n},e.prototype.rc=function(t){this.root.Uf(),this.Af=t.length,this.root.If=!0,this.Bf=this.root,this.Cf=-1;for(var i=this.Bf,n=0;n<t.length;n++)this.eg(t[n]),this.Bf!==i&&(i=this.Bf,i.Vf());i.Wf(this.Cf)},e.prototype.ng=function(){for(var t=[],i=this.root;;){i.If=!0;for(var n=0;n<i.Gf.length;n++)t.push(i.Gf[n]);if(!i.children)break;i=i.children[0]}return i.Of()?(t.pop(),this.Bf=i.Ef,this.Bf.Rf(i)):this.Bf=i,this.Cf=this.Bf.Gf.length-1,this.Af=t.length,t},e.prototype.og=function(){return this.Af},e.prototype.pg=function(t){if(this.Cf!==this.Bf.Gf.length-1)return!1;var i=this.Bf.Kf(t);return!i||i.If?!1:(this.Bf.Rf(i),!0)},e.prototype.Ma=function(t){for(var i=this.ng(),n=t.ng(),e=Math.min(i.length,n.length),r=!1,o=0;e>o;o++)if(i[o]!==n[o]){r=!0;break}n.length>e&&!r&&this.rc(n);var s=this.getBookmark();this.ag(),t.ag(),this.qg(t),this.sc(s)},e.prototype.qg=function(t){for(var i;!(i=t.mg());){var n=t.ig();if(!n)return;this.fg(n),this.cg(t.bg())}for(var e=this.getBookmark(),r=t.getBookmark(),o=0;o<i.length;o++)this.fg(i[o]),t.fg(i[o]),this.qg(t),this.sc(e),t.sc(r)}},{"./Move":20,"./constants":49}],22:[function(t,i,n){"use strict";function e(t){this.dc=t,this.rg=new s.tg.sg(t)}function r(t){if(0===t)return"Tie game";var i=t>0?c:l;return a(i)+" wins by "+o(Math.abs(t))}function o(t){return 1!==t?t+" points":"1 point"}var s=t("./ai"),h=t("./constants"),u=t("./Move"),a=u.Ve,c=h.lb,l=h.mb;i.g=e,e.prototype.ug=function(){var t=this.vg()[0];return t[c]-t[l]},e.prototype.wg=function(){return this.xg(this.vg())},e.prototype.yg=function(){return this.vg()},e.prototype.zg=function(){return this.rg.zg()},e.prototype.vg=function(){var t=this.dc;return null!==t.yb?["resi",1-t.yb,t.zb]:(this.rg.Ag(t.pb),this.rg.Bg())},e.prototype.xg=function(t){if("resi"===t[0]){var i,n=a(t[1]),e=a(1-t[1]);switch(t[2]){case"time":i=e+" ran out of time";break;case null:case void 0:i=e+" resigned";break;default:i=e+" disqualified: "+t[2]}return[n+" won ("+i+")"]}if(!t||2!==t.length)throw new Error("Invalid score info: "+t);var s=t[0],h=t[1];if(s.length!==h.length)throw new Error("Invalid score info");var u=[],p=s[c]-s[l];u.push(r(p));for(var f=c;l>=f;f++){var d=h[f],g=d[0],v=d[1],y=d[2],b=0!==v?" "+(0>v?"-":"+")+" "+Math.abs(v)+" prisoners":"",m=y>0?" + "+y+" komi":"",w=v||y?" ("+g+b+m+")":"";u.push(a(f)+": "+o(s[f])+w)}return u}},{"./Move":20,"./ai":48,"./constants":49}],23:[function(t,i,n){"use strict";function e(){y||s(),this.text=null,this.Cg=null,this.wc=this.tb=0,this.Xf=this.gc=this.Gf=null,this.Dg=null,this.Ba=null,this.yc=null,this.ub=p,this.Eg=!1}function r(t,i,n){g[t]=[i,n],v[n]=t}function o(t,i){y[t]=i}function s(){g={},v={},y={},r("GM","int",null),r("FF","int","fileFormat"),r("SZ","int","boardSize"),r("AB","move",null),r("AW","move",null),r("HA","int","handicap"),r("KM","real","komi"),r("RU","text","rules"),r("RE","text","result"),r("PB","text","playerBlack"),r("PW","text","playerWhite"),r("BS","int","blackSpecies"),r("WS","int","whiteSpecies"),r("LT","flag","enforceLosingOnTime"),r("SO","text","source"),r("ID","text","gameId"),r("AP","text","application"),r("BR","text","blackRank"),r("WR","text","whiteRank"),r("BT","text","blackTeam"),r("WT","text","whiteTeam"),r("TM","text","timeLimit"),r("OT","text","overtimeMethod"),r("EV","text","event"),r("RO","text","round"),r("DT","text","date"),r("PC","text","place"),r("GN","text","gameName"),r("ON","text","openingPlayed"),r("GC","text","gameComment"),r("C","text","comment"),r("N","text","nodeName"),r("US","text","userName"),r("AN","text","analyseAuthor"),r("CP","text","copyright"),r("CA","text","characterSet"),r("ST","text","variationStyle"),o("B","move"),o("W","move"),o("AB","move"),o("AW","move"),o("BL",null),o("WL",null),o("C","text"),o("CR",null),o("BM",null),o("N",null)}function h(t){if(t.Kg("a","z"))return t.charCodeAt()-97;if(t.Kg("A","Z"))return t.charCodeAt()-39;throw new Error("Invalid coordinate value: "+t)}function u(t){for(var i=0;;){var n=t.indexOf("]",i);if(-1===n)return-1;if("\\"!==t[n-1])return n;i=n+1}}var a=t("./constants"),c=t("./log"),l=t("./ReviewTree"),p=a.lb,f=a.mb,d=["B","W"],g=null,v=null,y=null;i.g=e,e.Fg=function(){return y||s(),v},e.Ia=function(t){var i=t.trim();return"("!==i[0]?!1:";"===i.substr(1).trim()[0]},e.prototype.Gg=function(t,i){if(!e.Ia(t))throw new Error("Not an SGF file");this.Hg(t),this.Ig(),this.Jg(i)},e.prototype.Ka=function(t,i,n){try{return this.Gg(t,n),!0}catch(e){var r="Failed loading SGF moves:\n"+e;if(!i)throw new Error(r);return i.push(r),!1}},e.prototype.xc=function(){return this.Xf},e.prototype.zc=function(){return this.gc},e.prototype.La=function(){return this.Ba},e.prototype.cb=function(t,i){var n=this.yc[t];return void 0!==n?n:i};var b="abcdefghjklmnopqrstuvwxyz";e.prototype.Lg=function(t){if(this.wc)throw new Error("SZ set twice");this.wc=t},e.prototype.Mg=function(t){if(!this.wc)throw new Error("Move seen before SZ is known");if(""===t||"tt"===t&&this.wc<=19)return"pass";var i=b[h(t[0])],n=this.wc-h(t[1]);return i+n},e.prototype.eg=function(t,i,n){if(!this.Eg&&n)t!==this.ub&&(i=d[t]+i),this.ub=t,this.Xf.push(i);else{if(this.Eg){if(t!==this.ub)throw new Error("Bad move color: "+d[t]+i)}else this.Eg=!0,i=d[t]+i;this.ub=1-t,this.Gf.push(i)}},e.prototype.Ng=function(t){var i=this.Gf.length-1;this.Dg[i]=(this.Dg[i]||"")+t},e.prototype.Og=function(t,i){switch(i){case"text":return t;case"int":return parseInt(t);case"real":return parseFloat(t);case"flag":return!0;case"move":return this.Mg(t);default:throw new Error("Invalid tag type: "+i)}},e.prototype.Pg=function(t,i){var n=y[t];if(void 0===n)return c.warn&&c.warn("Unknown property "+t+"["+i+"] ignored");if(n){var e=this.Og(i,n);switch(t){case"B":return this.eg(p,e);case"W":return this.eg(f,e);case"AB":return this.eg(p,e,!0);case"AW":return this.eg(f,e,!0);case"C":return this.Ng(i)}}},e.prototype.Jg=function(t){this.Ba=new l,this.Qg(this.Cg,1),this.Xf.length||(this.Xf=null),this.Ba.Df(this.Xf),this.gc=this.Ba.ng(),void 0!==t&&(this.gc=this.gc.slice(0,t))},e.prototype.Qg=function(t,i){for(var n=i;n<t.length;n++){var e=t[n];if("seq"!==e[0]){this.Gf=[],this.Dg=[];for(var r=0;r<e.length;r+=2){var o=e[r]||o,s=e[r+1];this.Pg(o,s)}for(var h=0;h<this.Gf.length;h++)this.Ba.fg(this.Gf[h]),this.Dg[h]&&this.Ba.cg({Rg:this.Dg[h]})}else{if(!e[1].length){this.Ba.gg();continue}var u=this.Ba.getBookmark(),a=this.ub;this.Qg(e,1),this.ub=a,this.Ba.sc(u)}}},e.prototype.Sg=function(t,i){var n=g[t];if(void 0===n)return this.yc[t]=i,c.Tg("Unknown property in SGF header: "+t+"["+i+"]");var e=n[0],r=n[1],o=this.Og(i,e);return r&&(this.yc[r]=o),o},e.prototype.Ig=function(){this.wc=this.tb=0,this.yc={},this.Xf=[],this.ub=p,this.Eg=!1;for(var t=this.Cg[0],i=0;i<=t.length-1;i+=2){var n=t[i],e=t[i+1],r=this.Sg(n,e);switch(n){case"GM":if(1!==r)throw new Error("SGF game is not a GO game");break;case"FF":(3>r||r>4)&&c.warn&&c.warn("SGF format "+r+". Not sure we handle it well.");break;case"SZ":this.Lg(r);break;case"KM":this.tb=r;break;case"AB":this.eg(p,r,!0);break;case"AW":this.eg(f,r,!0)}}},e.prototype.Hg=function(t){this.text=t,this.Cg=[],t=this.Ug(t),t=this.Vg(t),""!==t&&this.Wg("Trailing text ignored",t)},e.prototype.Vg=function(t){for(t=this.Xg("(",t),t=this.Ug(t);";"===t[0];)t=this.Yg(t);for(;"("===t[0];){var i=this.Cg;this.Cg=["seq"],t=this.Vg(t),i.push(this.Cg),this.Cg=i}return t=this.Xg(")",t),t=this.Ug(t)},e.prototype.Yg=function(t){t=this.Xg(";",t);for(var i=[];;){for(var n=0;t[n]&&t[n].Kg("A","Z");)n++;var e=t.substr(0,n);if(""===e)break;for(i.push(e),t=this.Xg(e,t);;){t=this.Xg("[",t);var r=u(t);0>r&&this.Wg("Missing ']'",t);var o=t.substr(0,r);if(i.push(o),t=this.Xg(o+"]",t),"["!==t[0])break;i.push(null)}}return this.Cg.push(i),t=this.Ug(t)},e.prototype.Ug=function(t){return t.trim()},e.prototype.Xg=function(t,i){return i.startsWith(t)||this.Wg(t+" expected",i),i.replace(t,"").trim()},e.prototype.Wg=function(t,i){throw new Error("Syntax error: '"+t+"' at ..."+i.substr(0,20)+"...")}},{"./ReviewTree":21,"./constants":49,"./log":70}],24:[function(t,i,n){"use strict";function e(){this.Ba=null,this.Db=0,this.Zg="",this.$g="",l||r()}function r(){l={};for(var t=0;t<p.length;t++){var i=p[t];l[i]=!0}for(t=0;t<f.length;t++)l[f[t]]=!0}function o(t,i){return void 0===i||null===i?"":t+"["+i+"]"}var s=t("./constants"),h=t("./Move"),u=t("./SgfReader"),a=h.jb,c=s.lb,l=null,p=["playerWhite","playerBlack","source","event","place","boardSize","komi","rules","date"],f=["fileFormat","handicap"];i.g=e,e.prototype._g=function(t,i){this.Db=t.cb("boardSize");for(var n=u.Fg(),e=t.eb(),r="",s=0;s<p.length;s++){var h=p[s];r+=o(n[h],e[h])}for(var a in e)l[a]||(r+=o(n[a],e[a]));return r+=this.ah(i)},e.prototype.ah=function(t){if(!t)return"";this.Zg="A",this.$g="B";for(var i=o("HA",t.length),n=0;n<t.length;n++)i+=this.bh(t[n]);return i},e.prototype.bh=function(t){if(""===t)return"";var i,n=this.Zg,e=this.$g,r=a(t);if(r)void 0!==r[2]&&(e=r[2]===c?"B":"W"),i=String.fromCharCode(96+r[0])+String.fromCharCode(97+this.Db-r[1]);else{if(!t.endsWith("pass"))return null;i=""}return""===n&&(this.$g="W"===e?"B":"W"),n+e+"["+i+"]"},e.prototype.dh=function(t,i){for(var n="",e=0;e<t.length;e++){var r=this.bh(t[e]);if(null===r)break;n+=";"+r,i[e]&&i[e].Rg&&(n+="C["+i[e].Rg+"]")}return n},e.prototype.eh=function(t){this.$g=this.Ba.dg(t)===c?"B":"W";var i=t.Jf(),n=this.dh(i[0],i[1]);if(t.children)for(var e=0;e<t.children.length;e++)n+="("+this.eh(t.children[e])+")";return n},e.prototype.tc=function(t,i){this.Ba=i;var n="(;FF[4]GM[1]"+this._g(t,i.xc());return this.Zg="",n+=this.eh(i.Yf()),n+")"}},{"./Move":20,"./SgfReader":23,"./constants":49}],25:[function(t,i,n){"use strict";function e(t,i,n,e){this.pb=t,this.ue=i,this.ve=n,this.color=e,this.group=null,this.ef=[],this.hh=[]}var r=t("./constants"),o=t("./Group"),s=t("./Move"),h=s.kb,u=r.EMPTY,a=r.Ed,c=r.fh,l=r.gh;i.g=e,e.Ed=new e(null,-1,-1,a);var p=e.ih=[[0,1],[1,0],[0,-1],[-1,0]],f=e.jh=[[1,1],[1,-1],[-1,-1],[-1,1]];e.prototype.clear=function(){this.color=u,this.group=null},e.prototype.Id=function(){for(var t=this.pb.Gd,i=l;i>=c;i--){var n=t[this.ve+p[i][1]][this.ue+p[i][0]];n.color===u&&this.ef.push(n),this.hh.push(n),n=t[this.ve+f[i][1]][this.ue+f[i][0]],this.hh.push(n)}},e.prototype.toString=function(){return this.color===u?this.af():(this.color?"W":"B")+"-"+this.af()},e.prototype.af=function(){return h(this.ue,this.ve)},e.prototype.kh=function(){return this.lh().map(function(t){return t.af()}).sort().join(",")},e.prototype.ee=function(){return this.color===u},e.prototype.mh=function(){return 2===this.ef.length},e.prototype.nh=function(){var t=this.pb,i=t.Db-1;return t.ce(1===this.ue?2:i,1===this.ve?2:i)},e.prototype.oh=function(){return this.ef.length<=3},e.prototype.ph=function(){var t=this.pb.Db,i=this.ue,n=this.ve;return Math.min(Math.min(i-1,t-i),Math.min(n-1,t-n))},e.prototype.Zd=function(t){for(var i=this.ef.length-1;i>=0;i--){var n=this.ef[i];if(n.color===u)return!1;if(n.color!==t){if(1===n.group.te)return!1}else if(n.group.te>1)return!1}return!0},e.prototype.be=function(t){for(var i=null,n=this.ef.length-1;n>=0;n--){var e=this.ef[n].group;if(e&&e.color===1-t&&1===e.te){if(i)return!1;i=e}}if(!i)return!1;if(1!==i.ne.length)return!1;var r=i.ne[0];if(this.pb.le()!==r)return!1;var o=this.pb.ke();if(!o||o.Ye!==r||1!==o.ne.length)return!1;var s=o.ne[0];return s.ue===this.ue&&s.ve===this.ve},e.prototype.tf=function(){this.color=u,this.group=null},e.prototype.vf=function(t){this.group=t,this.color=t.color},e.prototype.ie=function(t){this.color=t;var i=this.se(t);0===i.length?this.group=this.pb.Pd(this,this.qh()):(this.group=i[0],this.group["if"](this));for(var n=this.se(1-t),e=n.length-1;e>=0;e--)n[e].kf(this);for(var r=1;r<i.length;r++)this.group.pf(i[r],this)},e.prototype.he=function(){this.group.sf(this),this.group.jf(this);for(var t=this.se(1-this.color),i=t.length-1;i>=0;i--)t[i].nf(this);this.group=null,this.color=u,o.wf(this)},e.prototype.qf=function(t){this.group=t},e.prototype.se=function(t){for(var i=[],n=this.ef,e=n.length-1;e>=0;e--){var r=n[e];r.color===t&&i.indexOf(r.group)<0&&i.push(r.group)}return i},e.prototype.lh=function(){for(var t=[],i=this.ef,n=i.length-1;n>=0;n--){var e=i[n];e.color===u&&t.push(e)}return t},e.prototype.qh=function(){for(var t=0,i=this.ef,n=i.length-1;n>=0;n--)i[n].color===u&&t++;return t},e.prototype.rh=function(t,i){for(var n=0,e=this.ef,r=e.length-1;r>=0;r--)e[r].color===t&&(i&&i.push(e[r]),n++);return n},e.prototype.sh=function(t){for(var i=this.ef,n=i.length-1;n>=0;n--)if(i[n].group===t)return!0;return!1}},{"./Group":17,"./Move":20,"./constants":49}],26:[function(t,i,n){"use strict";function e(t){s.call(this,t)}var r=t("../../constants"),o=t("./DiamondZone"),s=t("./Heuristic"),h=t("util").inherits,u=t("../../log"),a=t("../../Move"),c=(t("../../test"),a.Ve,r.EMPTY),l=r.Ed,p=r.th,f=r.uh,d=r.vh,g=r.wh,v=r.xh,y=r.yh,b=r.zh,m=r.Ah,w=r.Bh,x=r.Ch,k=r.Dh,j=r.Eh,D=-1,S=0,G=1;h(e,s),i.g=e,e.prototype.Fh=function(t,i,n){var e=this.pb.ce(t,i);if(this.Gh[i][t]<0)return 0;var r,o=1-n;if(this.Hh(e,n)&&this.Hh(e,o)){var s=[];r=[],this.Ih(e,o,s,r)!==G||r.length||this.Kh.Jh(s,e,e,o)}var h=[];switch(r=[],this.Ih(e,n,h,r)){case S:return this.Lh(e,n,h);case G:this.Kh.Jh(h,e,e,n);for(var u=r.length-1;u>=0;u--)this.Kh.Jh(h,e,r[u],n);return 0;default:return 0}},e.prototype.Ih=function(t,i,n,e){for(var r=1-i,s=0,h=0,u=0,a=!1,C=0;8>C;C++){var M=C%2,B=t.hh[C];switch(B.color){case l:continue;case c:continue;case i:var q=B.group;M?h++:(s++,1===q.te&&(a=!0)),n.indexOf(q)<0&&n.push(q);break;default:if(1===B.group.te)break;M||u++}}if(n.length<2)return D;if(4===s)return a?G:S;var T=new o(t,i),z=T.Mh;T.normalize();var E,I,O;if(t.oh()){if(t.mh())return S;if(3===s)return a?G:S;if(2===s){if(a)return G;if(z[f].color!==i){if(!u)return S}else{if(z[b].color===c)return S;if(!u)return S;if(z[g].group.te<=3)return S}}else if(1===s){if(!u)return S;if(z[f].color===c){if(z[g].group.te<4)return S;if(O=z[b],O.color===i)return S;O.color===c&&(e.push(O),e.push(z[f]))}}else{if(!u)return S;if(z[f].color===c)return S;if(u>1)return D;if(1===z[y].group.te||1===z[b].group.te)return D}return G}if(3===s){if(a)return G;if(!u)return S;if(3===n.length)return G;if(z[g].group===z[d].group){if(z[w].color===c)return S}else if(z[m].color===c)return S;return G}if(2===s){if(z[v].group===z[d].group)return u||z[m].color===r&&z[b].color===r?G:S;if(z[f].color===i){if(4===h)return S;if(3===h){if(!u)return S;if(1===u){if(z[g].color===r)return S;if(z[k].color!==r||z[k].group.te<3)return S}}else if(2===h)if(z[b].color===i){if(!u)return S;if(1===u&&z[g].color===r)return S}else if(z[y].color===i){if(u)return G;if(z[m].color!==r||z[b].color!==r)return S;e.push(z[g]),e.push(z[v]),z[m].color!==r&&e.push(z[m]),z[b].color!==r&&e.push(z[b])}else{if(u)return G;if(z[y].color!==r||z[b].color!==r)return S;e.push(z[g]),e.push(z[v]),z[y].color!==r&&e.push(z[y]),z[b].color!==r&&e.push(z[b])}else{if(1!==h)return u?G:z[g].oh()||z[v].oh()?S:z[j].oh()&&(I=z[v],0===this.Oh[r][I.ve][I.ue])?S:z[k].oh()&&(E=z[g],0===this.Oh[r][E.ve][E.ue])?S:(z[g].rh(r)<3&&e.push(z[g]),z[v].rh(r)<3&&e.push(z[v]),G);if(!u)return S}}else if(3===h){if(2===n.length)return S;if(z[w].color===c){if(z[k].color!==r||z[x].color!==r)return S;if(2>u)return S}else e.push(z[f]),e.push(z[g])}else if(2===h)if(z[w].color===c){if(z[y].color!==i)return S;if(0===u)return S;if(2===n.length)return z[d].group!==z[v].group?S:z[g].color===c?D:z[b].color===c?(e.push(z[f]),G):D;z[g].color===c&&e.push(z[g])}else{if(z[w].color===i){if(2===u)return D;var L=z[b].color===r,H=z[m].color===r;return 0===u?L||H?(e.push(z[f]),e.push(z[g]),G):S:(z[g].color!==c||H?z[f].color!==c||L||e.push(z[v]):e.push(z[g]),G)}if(z[y].color!==i){if(2===u)return G;if(0===u){if(z[y].color!==c)return G;e.push(z[y]),e.push(z[f]),e.push(z[g])}return G}if(u)return G;var P=z[k].color,A=z[x].color;if(z[v].group.te>2&&P!==r)return S;z[b].color!==c||P===r&&A===r||e.push(z[b]),a||(e.push(z[f]),e.push(z[g]))}else if(1===h){if(z[y].color===i)return u||(e.push(z[f]),e.push(z[g])),G;if(z[w].color===c)return S;if(1===z[w].group.te)return S;z[f].color===c&&e.push(z[f]),z[g].color===c&&e.push(z[g])}else{if(z[w].color===c)return S;if(!u){if(1===z[p].ph())return S;e.push(z[f]),e.push(z[g])}}}else if(1===s)if(4===h){if(0===u)return S}else if(3===h){if(z[y].color!==i){if(z[v].color===c)return S}else if(z[v].color===c){if(z[j].color!==r)return S;if(z[y].group===z[b].group)return S;0===u?(e.push(z[g]),e.push(z[f]),e.push(z[v])):1===u&&z[g].color===r&&(e.push(z[f]),e.push(z[v]))}}else if(2===h){if(z[y].color===c&&z[v].color===c)return S}else u||(e.push(z[v]),z[w].color===c&&(e.push(z[f]),e.push(z[g]),z[j].color!==r&&e.push(z[w])));else if(4===h){if(0===u&&n.length<4)return S}else{if(3!==h)return z[m].color===i&&z[w].color===i?z[d].color===c?D:z[d].group.te<=2?G:D:G;if(z[v].color===c&&z[w].group===z[m].group||z[d].color===c&&z[w].group===z[b].group)return S}return G},e.prototype.Lh=function(t,i,n){if(i!==this.color)return 0;u.debug;var e=this.Rh.Qh.Ph(t);if(e.Sh(t)&&2===n.length){if(this.Rh.Th)return.5;var r=this.Kh.Uh(n[0].Ze);return r>0&&1>r?.5:0}return e.color!==i?0:this.Rh.Th?-.5:-1},e.prototype.Vh=function(t,i){return[this.pb.ce(t.ue,i.ve),this.pb.ce(i.ue,t.ve)]},e.prototype.Wh=function(t,i,n){var e=Math.abs(i.ue-t.ue),r=Math.abs(i.ve-t.ve);if(e+r===1)return 0;var o,s=1-n,h=0;if(1===e&&1===r){var u=this.Vh(t,i),a=u[0],c=u[1];if(a.color===n||c.color===n)return 0;if(a.color===s&&h++,c.color===s&&h++,0===h)return 0;if(2===h)return 99;var l=a.color===s?0:1,p=u[l],f=u[1-l];return t.oh()||i.oh()?1===f.ph()?p.group.te>2?1:0:0!==f.rh(s)?1:0:1===f.ph()?0!==f.rh(s)?1:0:1}if(e+r===2){if(o=this.pb.ce((t.ue+i.ue)/2,(t.ve+i.ve)/2),o.color===n)return 0;if(o.color===s)return o.group.te;for(var d=o.ef.length-1;d>=0;d--)o.ef[d].color===s&&h++;return h>=1?1:t.oh()&&i.oh()?0:.5}if(e+r===3&&t.oh()&&i.oh()){for(var g=this.betweenStones(t,i),v=0,y=g.length-1;y>=0;y--)o=g[y],o.color===s&&(v+=o.group.te),0!==o.rh(s)&&(v+=1);return v}return e+r},e.prototype.Hh=function(t,i){for(var n=[],e=t.ef.length-1;e>=0;e--){var r=t.ef[e];switch(r.color){case c:n.push(r);break;case i:if(r.group.te>1)return r;break;default:if(1===r.group.te)return r.group.ff()[0].ne[0]}}for(var o=2,s=n.length-1;s>=0;s--)for(var h=n[s],u=h.ef.length-1;u>=0;u--){var a=h.ef[u];if(a!==t&&a.color===i&&0!==this.Kh.Uh(a.group.Ze)){var l=this.Wh(t,a,i);if(!(l>=2)&&(o-=2-l,.5>=o))return a}}return null}},{"../../Move":20,"../../constants":49,"../../log":70,"../../test":75,"./DiamondZone":27,"./Heuristic":30,util:4}],27:[function(t,i,n){"use strict";function e(t,i){this.color=i,this.Mh=new Array(13);var n=t.ue,e=t.ve,r=t.pb.Gd,o=t.pb.Db,s=this.Mh,h=u.Ed;s[l]=t,s[p]=r[e+1][n],s[v]=r[e+1][n-1],s[y]=r[e+1][n+1],s[f]=r[e-1][n],s[b]=r[e-1][n-1],s[m]=r[e-1][n+1],s[d]=r[e][n-1],s[g]=r[e][n+1],s[k]=n>2?r[e][n-2]:h,s[j]=o-1>n?r[e][n+2]:h,s[x]=e>2?r[e-2][n]:h,s[w]=o-1>e?r[e+2][n]:h}function r(t){return t===a?S:D[t+1]}function o(t,i){for(var n="",e=0;e<i.length;e++){var o=i[e];n+="string"==typeof o?o:r(t[o].color)}return n}var s=t("../../constants"),h=t("../../Grid"),u=t("../../Stone"),a=s.Ed,c=s.EMPTY,l=s.th,p=s.uh,f=s.vh,d=s.wh,g=s.xh,v=s.yh,y=s.zh,b=s.Ah,m=s.Bh,w=s.Ch,x=s.Xh,k=s.Dh,j=s.Eh;i.g=e;var D=h.ze+h.Be,S="|";e.prototype.toString=function(){var t=this.Mh;return o(t,[" "," ",w," "," "])+"\n"+o(t,[" ",v,p,y," "])+"\n"+o(t,[k,d,"*",g,j])+"\n"+o(t,[" ",b,f,m," "])+"\n"+o(t,[" "," ",x," "," "])+"\n"},e.prototype.Yh=function(){var t,i=this.Mh;t=i[p],i[p]=i[f],i[f]=t,t=i[w],i[w]=i[x],i[x]=t,t=i[v],i[v]=i[b],i[b]=t,t=i[y],i[y]=i[m],i[m]=t},e.prototype.Zh=function(){var t,i=this.Mh;t=i[d],i[d]=i[g],i[g]=t,t=i[k],i[k]=i[j],i[j]=t,t=i[v],i[v]=i[y],i[y]=t,t=i[b],i[b]=i[m],i[m]=t},e.prototype.$h=function(){var t,i=this.Mh;t=i[d],i[d]=i[f],i[f]=i[g],i[g]=i[p],i[p]=t,t=i[k],i[k]=i[x],i[x]=i[j],i[j]=i[w],i[w]=t,t=i[v],i[v]=i[b],i[b]=i[m],i[m]=i[y],i[y]=t},e.prototype._h=function(){var t,i=this.Mh;t=i[d],i[d]=i[p],i[p]=i[g],i[g]=i[f],i[f]=t,t=i[k],i[k]=i[w],i[w]=i[j],i[j]=i[x],i[x]=t,t=i[v],i[v]=i[y],i[y]=i[m],i[m]=i[b],i[b]=t},e.prototype.normalize=function(){var t,i=this.color,n=this.Mh;if(n[l].oh()){n[p].color===a?this.Yh():n[d].color===a?this._h():n[g].color===a&&this.$h();var e=n[d].color===i,r=n[g].color===i;return void(e&&!r?this.Zh():e===r&&n[v].color===i&&n[y].color!==i&&this.Zh())}var o=!1,s=!0,h=!0,u=n[p].color===i?1:0,c=n[f].color===i?1:0,w=n[d].color===i?1:0,x=n[g].color===i?1:0;u>c?(this.Yh(),w>x&&this.Zh(),w!==x&&(o=!0)):c>u?(w>x&&this.Zh(),w!==x&&(o=!0)):c?w>x?this._h():x>w?this.$h():(s=!1,w&&(h=!1)):w>x?this._h():x>w?this.$h():(w?this._h():h=!1,s=!1);var k=n[y].color===i?1:0,j=n[b].color===i?1:0;if(s&&o)n[p].color!==i&&n[d].color!==i&&k&&!j&&(this.$h(),this.Zh());else{var D=n[v].color===i?1:0,S=n[m].color===i?1:0;s||(D+k>j+S?(this.Yh(),t=D,D=j,j=t,t=k,k=S,S=t):o||(o=!0,!h&&k>D&&S>j?this.$h():!h&&D>k&&j>S?this._h():o=!1)),!o&&(j>S||j===S&&D>k)&&this.Zh()}};var G=[v,p,y,d,l,g,b,f,m],C=["TL","TOP","TR","LEFT","CENTER","RIGHT","BL","BOTTOM","BR"];e.prototype.Nh=function(t,i){for(var n=this.Mh,e=this.color,r=1-e,o={},s=0,h=0,u=0;u<G.length;u++){var l=n[G[u]],p=i[u],f=l.color;switch(f===e&&(u%2?s++:h++),p){case"o":if(f===e)continue;break;case"A":case"B":case"C":case"D":if(f!==e)break;var d=o[p];if(d){if(d!==l.group)break}else o[p]=l.group;continue;case"*":case" ":if(f===c)continue;break;case".":if(f!==e)continue;break;case"x":if(f===r)continue;break;case"?":continue;case"-":if(f===a)continue}return p+"!="+f+" in "+C[u]+"\n"+this}var g=parseInt(t[0]),v=parseInt(t[1]);return s!==g?"numDirects="+s:isNaN(v)||h===v?!0:"numDiags="+h}},{"../../Grid":16,"../../Stone":25,"../../constants":49}],28:[function(t,i,n){"use strict";function e(t){r.call(this,t)}var r=t("./Heuristic"),o=t("util").inherits;o(e,r),i.g=e,e.prototype.ai=function(){this.Rh.Qh.bi()}},{"./Heuristic":30,util:4}],29:[function(t,i,n){"use strict";function e(t){s.call(this,t),this.grid=new o(this.Db,u),this.ci=t.ei.di}var r=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,u=r.Ed;h(e,s),i.g=e,e.prototype.ai=function(){var t=this.pb;this.Rh.Qh.fi(t,this.grid),this.gi()},e.prototype.gi=function(){var t=this.Rh.Qh.hi;for(var i in t)for(var n=~~i,e=t[n],r=e.group.color,o=e.ii.length-1;o>=0;o--){var s=e.ii[o];s.Sh&&this.ci.ji(s.ki,r)}}},{"../../Grid":16,"../../constants":49,"./Heuristic":30,util:4}],30:[function(t,i,n){"use strict";function e(t){this.Rh=t,this.ni(),this.pb=t.pb,this.Db=t.pb.Db,this.oi=new o(this.Db,0,u),this.pi=t.pi,this.color=this.qi=null,this.ri()}var r=t("../../constants"),o=t("../../Grid"),s=t("../../log"),h=t("../../helper"),u=r.Ed,a=r.li,c=r.mi;i.g=e,e.prototype.ni=function(){var t=this.constructor;this.name=t.name||h.si(t),this.name.length<5&&(this.name+=this.Rh.ti.length)},e.prototype.ri=function(){var t=this.Rh.ei;this.ui=t.vi,this.Kh=t.di,this.Gh=t.wi?t.wi.oi.Hd:null,this.xi=t.yi,this.zi=t.Ai,this.Oh=t.Bi?t.Bi.Oh:null},e.prototype.Ci=function(t){this.color=t,this.qi=1-t},e.prototype.ai=function(t,i){for(var n=s.level,e=this.Rh.color,r=this.oi.Hd,o=1;o<=this.Db;o++)for(var h=1;h<=this.Db;h++){
var u=t[o][h];if(!(a>u)){u===c&&this.name===this.Rh.Di&&s.Ei(s.Fi);var l=r[o][h]=this.Fh(h,o,e);i[o][h]+=l,u===c&&s.Ei(n)}}},e.prototype.Gi=function(t,i,n){var e=this.oi.Hd[i][t];e&&(n[this.name]=e)},e.prototype.Hi=function(t,i,n,e){return this.Rh.Ii.get(this.name+"-"+t,i,n,e)}},{"../../Grid":16,"../../constants":49,"../../helper":50,"../../log":70}],31:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.Ji=null}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),u=t("../../Move"),a=(t("../../test"),u.Ve,u.kb,r.EMPTY);s(e,o),i.g=e,e.prototype.Ki=function(t,i){for(var n=t.ff(),e=n.length-1;e>=0;e--){var r=n[e];if(!(r.te>1)){var o=r.ne.length;if(o>=i)return!0;for(var s=r.ff(),h=s.length-1;h>=0;h--)if(o+=s[h].te-1,o>=i)return!0}}return!1},e.prototype.Li=function(t,i){for(var n=0,e=0,r=0,o=t.ef.length-1;o>=0;o--){var s=t.ef[o];switch(s.color){case a:r++;break;case i:r+=s.group.te-1,n++;break;default:1===s.group.te&&(e+=s.group.ne.length)}}switch(e){case 0:return!(1>=r);case 1:return r?!0:!n;default:return!0}},e.prototype.Mi=function(t,i,n,e){for(var r=!1,o=!1,s=1-i[0].color,h=i.length-1;h>=0;h--){var u=i[h];1===u.te&&(o=!0,(!n||1===n&&e)&&this.Kh.Ni(t,s),n||(!this.Oi(u,n)||this.Ki(u,1)?this.Kh.Pi(u,t):this.Rh.Th&&(r=!0)))}return r&&this.Kh.Qi(t),o},e.prototype.Ri=function(t,i,n){if(!i.sh(n))return!1;for(var e=i.se(n.color),r=e.length-1;r>=0;r--){var o=e[r];if(o.te>2)return!1;if(!t.sh(o))return!1}return!0},e.prototype.Si=function(t,i,n,e,r,o){for(var s,u=!1,a=t.se(e),c=i.length-1;c>=0;c--)if(s=i[c],2===s.te&&!this.Ki(s,2)&&(0!==n.length||1!==a.length||2!==a[0].te)){if(1===n.length&&0===a.length){if(!this.Ri(t,n[0],s))continue;u=!0,h.debug}r||!s.Ze.Ti()?o.push(s):h.debug}return u},e.prototype.Ui=function(t,i,n){return n&&i.te===n.te&&n.bf()?!(t.sh(n)&&n.hf(t)<1):!1},e.prototype.Vi=function(t,i,n,e){for(var r=!1,o=i.length-1;o>=0;o--){var s=i[o],h=s.te,u=null;h>2&&this.Ui(t,s,u)?(n||this.Kh.Wi(s,t),r=!0):h>=2&&0===n&&!e&&(n||this.Kh.Xi(s,t))}return r},e.prototype.Yi=function(){this.Ji=[]},e.prototype.Fh=function(t,i,n){return this.Zi(t,i,n,0),0},e.prototype.Zi=function(t,i,n,e,r){var o=this.pb.ce(t,i),s=o.se(1-n);if(!s.length)return!1;var u=o.lh(),a=this.Mi(o,s,e,r),c=[],l=this.Si(o,s,u,n,e,c),p=!1;if(0===e&&(l&&!a?(this.Ji.push(o),this.Gh[i][t]+=2):this.Gh[i][t]<-2&&(p=!0,this.Gh[i][t]-=1e3,h.debug)),!l&&u.length<=1&&!this.Li(o,n))return!1;var f=this.Vi(o,s,e,p);if(!c.length)return a||f;this.pb.ge(t,i,n);for(var d=[!1,!1,!1],g=c.length-1;g>=0;g--)if(h.debug,!this.Oi(c[g],e)){if(1===c.length){c.pop();break}d[g]=!0}this.pb.je();var v=this.$i(o,c,d,e);return h.debug&&(a||f||v),a||f||v},e.prototype.$i=function(t,i,n,e){switch(i.length){case 0:return!1;case 1:return n[0]?!1:(e||this.Kh.Pi(i[0],t),!0);case 3:case 2:return e||(n[1]?this.Kh.Pi(i[0],t):this.Kh.Pi(i[1],t)),!0;default:throw new Error("Unexpected in Hunter#getMultipleChaseThreat")}},e.prototype.Oi=function(t,i){var n=t.df();if(1!==n.length)throw new Error("Unexpected: hunter #1: "+n.length);var e=n[0],r=t.color,o=!0;return this.Li(e,r)&&(this.pb.ge(e.ue,e.ve,r),o=this._i(e,i),this.pb.je()),h.debug,o},e.prototype.aj=function(t){for(var i=1-t.color,n=t.ef,e=n.length-1;e>=0;e--){var r=n[e];if(r.color===i){var o=r.group;if(1===o.te){var s=o.df()[0];return s.sh(t.group)?this.Oi(o,1)?1:-1:1}}}return 0},e.prototype._i=function(t,i){var n=t.group;if(n.te<=1)return!0;if(n.te>2)return!1;var e=this.aj(t);if(0!==e)return 0>e;var r=t.lh();if(2!==r.length&&(r=n.df()),2!==r.length)throw new Error("Unexpected: hunter #2");var o=r[0],s=r[1];h.debug;var u=1-n.color;return this.Zi(o.ue,o.ve,u,i+1)||this.Zi(s.ue,s.ve,u,i+1)},e.prototype.bj=function(t){return this._i(t,1)},e.prototype.cj=function(t,i,n){return this.Zi(t,i,n,1,n===this.qi)}},{"../../Move":20,"../../constants":49,"../../log":70,"../../test":75,"./Heuristic":30,util:4}],32:[function(t,i,n){"use strict";function e(t){s.call(this,t),this.dj=[new o(this.Db,u),new o(this.Db,u)],this.Oh=[this.dj[c].Hd,this.dj[l].Hd]}var r=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,u=r.Ed,a=r.EMPTY,c=r.lb,l=r.mb,p=2,f=1;h(e,s),i.g=e,e.prototype.ai=function(){this.dj[c].init(0),this.dj[l].init(0);for(var t=1;t<=this.Db;t++)for(var i=1;i<=this.Db;i++){var n=this.pb.ce(i,t),e=n.color;if(e!==a)for(var r,o=this.Oh[e],s=n.ef,h=0;r=s[h],h<s.length;h++)if(o[r.ve][r.ue]+=p,r.color===a)for(var u,d=r.ef,g=0;u=d[g],g<d.length;g++)u!==n&&(o[u.ve][u.ue]+=f)}}},{"../../Grid":16,"../../constants":49,"./Heuristic":30,util:4}],33:[function(t,i,n){"use strict";function e(t){h.call(this,t),this.debug=!1,this.grid=new s(this.Db,null),this.ej=[],this.fj="",this.gj=this.Hi("spaceInvasion",2,.01,4),this.hj=this.Hi("pressure",1,.01,2)}function r(){this.lj=null,this.mj=[!1,!1],this.nj=0,this.oj=[],this.pj=[],this.qj=[]}function o(t,i,n){this.name=t,this.nj=i,this.group=n,this.uj=1/0}var s=t("../../Grid"),h=(t("./boan/GroupInfo"),t("./Heuristic")),u=t("util").inherits,a=t("../../log"),c=t("../../Move"),l=(t("../../test"),c.Ve),p=.1;u(e,h),i.g=e,e.prototype.ai=function(){this.debug=this.Rh.ij,this.grid.init(null),this.ej.length=0},e.prototype.jj=function(t,i){h.prototype.ai.call(this,t,i)},e.prototype.Fh=function(t,i){var n=this.grid.Hd[i][t];return n?n.kj():0},e.prototype.Gi=function(t,i,n){var e=this.grid.Hd[i][t];e&&e.kj(n,this.name)},r.prototype.kj=function(t,i){var n=this.nj;t&&n&&(t[i+"-base"]=n);var e=this.oj;if(!e.length)return n;for(var r=e.length-1;r>=0;r--){var o=e[r],s=o.nj*this.pj[r];if(n+=s,t){var h=this.pj[r],u=1!==h?" factor:"+h.toFixed(2):"";t[i+"-"+o+u]=s}}return n},e.prototype.rj=function(t,i){return this.grid.Hd[i][t]},e.prototype.sj=function(t,i){var n=this.grid.Hd[i][t];return n?n:(this.grid.Hd[i][t]=n=new r,n)},e.prototype.ji=function(t,i){a.debug,this.sj(t.ue,t.ve).lj=i},e.prototype.tj=function(t,i){var n=this.rj(t.ue,t.ve);return n&&n.lj===i},e.prototype.Ni=function(t,i){this.sj(t.ue,t.ve).mj[i]=!0},e.prototype.mj=function(t,i){var n=this.rj(t.ue,t.ve);return n&&n.mj[i]},o.prototype.toString=function(){return this.name+(this.uj!==1/0?" minMoves:"+this.uj:"")+" score:"+this.nj.toFixed(2)},e.prototype.vj=function(t,i,n){this.fj=t+" on "+i.toString(1),n.ue===this.Rh.wj&&n.ve===this.Rh.xj?a.Ei(a.Fi):a.level===a.Fi&&a.Ei(a.yj)},e.prototype.zj=function(t){var i=this.ej[t.Sd];if(i)return i;for(var n=2*t.ne.length,e=t.df(),r=0,s=e.length-1;s>=0;s--)r+=e[s].qh();return n+=this.gj*Math.max(0,r-1),this.ej[t.Sd]=i=new o("life/death of "+t.toString(1),n,t),i},e.prototype.Aj=function(t,i,n,e){if(!i)throw new Error("Unexpected");n=n||1,e=e||1,a.debug;var r=this.sj(i.ue,i.ve),o=r.oj,s=r.pj,h=r.qj,u=o.indexOf(t);return 0>u?(o.push(t),s.push(n),h.push(e)):(s[u]=Math.max(s[u],n),h[u]=Math.min(h[u],e)),t.uj=Math.min(t.uj,e),t},e.prototype.Uh=function(t){var i=t.Uh;if(void 0!==i)return i;var n,e=t.Bj;n=e?e.Cj:[t];var r=this.xi.Dj(n);return i=t.Uh=this.Ej(r,t.group.color===this.Rh.ub)},e.prototype.Ej=function(t,i){return t>=2?1:1.5>t?0:i?1:.5},e.prototype.Fj=function(t,i,n,e,r,o){e=e||1;var s,h=t[0].group.color===this.Rh.ub,u=this.xi.Dj(t),c=this.Ej(u,h);if(o){var l=this.Ej(u+o,!0);s=c-l,s=Math.min(2*s,1)}else s=1-c;if(e*=s,a.debug,p>e)return void a.debug;for(var f=r||0,d=t.length-1;d>=0;d--)f+=t[d].group.te;for(d=t.length-1;d>=0;d--)this.Hj(t[d].group,i,n,e,f)},e.prototype.Hj=function(t,i,n,e,r){if(!(p>e)){var o=this.zj(t);return n||this.Ij(t,i,e,r),this.Aj(o,i,e,r)}},e.prototype.Ij=function(t,i,n,e){if(!(1===t.ne.length&&t.ne[0].mh()||0===i.qh()&&t.ne.length<3)){e=e||1;for(var r=t.ff(),o=r.length-1;o>=0;o--){var s=r[o];s.te===e&&(this.Hj(s,i,!0,n,e),this.Jj(s,i,n,e))}}},e.prototype.Jj=function(t,i,n,e){for(var r=t.Ze.Kj(i),o=r.length-1;o>=0;o--)this.Fj(r[o],i,!0,n,e)},e.prototype.Xi=function(t,i){var n=1/(t.te+1)*this.hj;if(this.Uh(t.Ze)<.5){if(!this.Rh.Th)return 0;n=this.pi}this.sj(i.ue,i.ve).nj+=n,this.debug&&i.ue===this.Rh.wj&&i.ve===this.Rh.xj&&a.Tg("MoveInfo "+l(1-t.color)+" - pressure at "+i+": "+n.toFixed(2))},e.prototype.Qi=function(t){this.sj(t.ue,t.ve).nj+=this.pi},e.prototype.Wi=function(t,i){this.debug&&this.vj("race",t,i);var n=t.Ze,e=n.Bj?n.Bj.Cj:[n];this.Fj(e,i,!1)},e.prototype.Lj=function(t,i,n,e){this.debug&&this.vj("eye threat",t,i);var r=t.Ze,o=r.Bj?r.Bj.Cj:[r];return this.Fj(o,i,n===t.color,void 0,void 0,-e),!0},e.prototype.Jh=function(t,i,n,e){var r=t[0];this.debug&&this.vj("cut",r,i);for(var o=e===r.color,s=r.Ze.Mj(t,i),h=s.length-1;h>=0;h--)this.Fj(s[h],n,o,void 0,1)},e.prototype.Pi=function(t,i){this.debug&&this.vj("kill",t,i);for(var n=t.Ze.Kj(i),e=n.length-1;e>=0;e--)this.Fj(n[e],i,!1);this.Hj(t,i,!1,1,t.te)},e.prototype.Nj=function(t,i){this.debug&&this.vj("rescue",t,i),this.Jj(t,i),this.Hj(t,i,!0)}},{"../../Grid":16,"../../Move":20,"../../log":70,"../../test":75,"./Heuristic":30,"./boan/GroupInfo":44,util:4}],34:[function(t,i,n){"use strict";function e(t){r.call(this,t),this.Oj=null}var r=t("./Heuristic"),o=t("util").inherits,s=t("../../log"),h=t("../../Move"),u=h.kb;o(e,r),i.g=e,e.prototype.Yi=function(){this.Oj||(this.Oj=this.Rh.ei.Pj)},e.prototype.Fh=function(t,i,n){if(this.Oh[1-n][i][t]<2&&this.Oh[n][i][t]<2&&0===this.pb.ce(t,i).rh(n))return 0;var e,r=this.pb.ge(t,i,n),o=r.group,h=0;return s.debug&&(e=u(t,i)),1===o.te?1===o.ne.length&&r.lh()[0].be(this.qi)?s.debug:(h-=2*o.ne.length,s.debug):2===o.te&&(s.debug,this.Oj.bj(r)&&(h-=2*o.ne.length,s.debug)),this.pb.je(),h}},{"../../Move":20,"../../log":70,"./Heuristic":30,util:4}],35:[function(t,i,n){"use strict";function e(t){s.call(this,t),this.Uj=[new o(this.Db,a),new o(this.Db,a)],this.Vj=this.Hi("wideSpaceToEye",.7,.01,1),this.Wj=this.Hi("stoneCountToEye",.33,.25,1)}var r=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,u=t("../../log"),a=r.Ed,c=r.Qj,l=r.Rj,p=r.EMPTY,f=r.lb,d=r.mb,g=r.Sj,v=r.Tj;h(e,s),i.g=e,e.prototype.ai=function(){this.Xj()},e.prototype.Xj=function(){this.Uj[g].init(p),this.Uj[v].init(p);for(var t=this.Db;t>=1;t--)for(var i=this.Db;i>=1;i--){var n=this.pb.ce(i,t);if(n.color===p){var e=this.Yj(i,t,n);if(null!==e){var r=this.Rh.Qh.Ph(n);if(!r.Zj&&!this.Kh.tj(n,e)){for(var o=n.ef,s=null,h=this.Oh[1-e],a=1,f=o.length-1;f>=0;f--){var d=o[f];d.color===e&&(s=d.group),1!==a||d.oh()||0!==h[d.ve][d.ue]||d.qh()!==d.ef.length||(a=2)}if(!s){if(!n.mh())continue;if(s=n.nh().group,!s)continue}if(n.oh()){for(var y=!1,b=1-e,m=l;m>=c;m-=2){var w=n.hh[m];if(w.color===b){y=!0;break}}if(y)continue}var x=(i+t)%2,k=this.Uj[x].Hd;k[t][i]=e,s.Ze.$j(x,a),u.debug}}}}},e.prototype._j=function(t,i){var n=t.ue,e=t.ve,r=(n+e)%2;return this.Uj[r].Hd[e][n]===i},e.prototype.Yj=function(t,i,n){var e=this.Oh[f][i][t],r=this.Oh[d][i][t],o=e>r?f:d,s=Math.max(e,r),h=Math.min(e,r);if(h>1)return null;var u=0,a=this.Db;return 1===h&&n.mh()&&n.nh().color===p&&u++,1!==t&&t!==a&&1!==i&&i!==a||u++,0>s+u-3-h?null:o},e.prototype.ak=function(t){for(var i=0,n=t.color,e=this.Oh[1-n],r=this.Oh[n],o=t.ne,s=o.length-1;s>=0;s--){var h=o[s];if(!h.oh())for(var u=h.hh.length-1;u>=0;u--){var a=h.hh[u];if(a.color===p&&!(r[a.ve][a.ue]>4)){var c=e[a.ve][a.ue];if(!(c>1)){var l=a.ph();if(0!==l)if(1!==l){var f=a.ue-h.ue,d=a.ve-h.ve,g=a.ue+f,v=a.ve+d;0===e[v][g]&&i++}else{if(c>0)continue;i++}}}}}return i},e.prototype.Dj=function(t){for(var i=0,n=0,e=t.length-1;e>=0;e--){var r=t[e];i+=r.bk(),n+=r.group.ne.length}6>n&&(i=Math.min(i,n*this.Wj));var o=0;for(e=t.length-1;e>=0;e--)o+=this.ak(t[e].group);return i+=o*this.Vj}},{"../../Grid":16,"../../constants":49,"../../log":70,"./Heuristic":30,util:4}],36:[function(t,i,n){"use strict";function e(t){h.call(this,t),this.ek=new s(this.Db,p),this.fk=this.ek.Hd,this.gk=new s(this.Db,p),this.dj=[new s(this.Db,p),new s(this.Db,p)],this.hk=new s(this.Db,p),this.ik()}function r(t,i,n){switch(t){case y:return[i,1];case b:return[1,i];case m:return[i,n];case w:return[n,i]}}var o=t("../../constants"),s=t("../../Grid"),h=t("./Heuristic"),u=t("util").inherits,a=t("../../log"),c=t("../../Move"),l=t("../../Stone"),p=(c.Ve,o.Ed),f=o.EMPTY,d=o.lb,g=o.mb,v=o.NEVER,y=o.ck,b=o.xh,m=o.dk,w=o.wh,x=o.fh,k=o.gh,j=s.Le,D=l.ih,S=l.jh;u(e,h),i.g=e,e.prototype.ai=function(){this.ek.Ne(this.pb),this.jk(d),this.jk(g),this.kk()},e.prototype.lk=function(t,i,n){var e=n===d?-1:1,r=v;return s.Le[2+this.dj[d].Hd[i][t]]===e&&r++,s.Le[2+this.dj[g].Hd[i][t]]===e&&r++,r},e.prototype.mk=function(t,i,n){return this.hk.Hd[i][t]*(n===d?1:-1)},e.prototype.nk=function(t,i,n){var e=s.Le[2+this.dj[1-n].Hd[i][t]];return e*(n===d?1:-1)},e.prototype.toString=function(){return"\nBLACK first:\n"+this.dj[d]+"WHITE first:\n"+this.dj[g]},e.prototype.pk=function(){this.ek.Ne(this.pb);var t=this.dj[d];this.qk(this.ek,t.K(this.ek)),this.rk(t.Hd,g),this.rk(t.Hd,d);var i=this.Rh.Qh;return i.Ag(this.pb),[i.zg().Hd,i.Bg()]},e.prototype.qk=function(t,i){for(var n=t.Hd,e=i.Hd,r=~~(2*Math.random()),o=this.Db;o>=1;o--)for(var s=n[o],h=this.Db;h>=1;h--)s[h]===f&&(this.sk(n,e,h,o,r,1-r)?(this.tk(e,h,o,r),r=1-r):this.sk(n,e,h,o,1-r,r)&&this.tk(e,h,o,1-r))},e.prototype.uk=function(t){return this.dj[t].Ud(function(t){return"@?O"[s.Le[2+t]+1]})},e.prototype.vk=function(t){for(t=this.pb.ac()-t;t-- >0;)this.pb.je()},e.prototype.jk=function(t){var i=this.pb.ac(),n=this.dj[t];this.wk(n,t),this.Rh.Qh.xk(this.pb,n,t),this.vk(i)},e.prototype.kk=function(){for(var t=this.dj[d].Hd,i=this.dj[g].Hd,n=this.hk.Hd,e=this.Db;e>=1;e--)for(var r=this.Db;r>=1;r--)n[e][r]=(j[2+t[e][r]]+j[2+i[e][r]])/2;a.debug},e.prototype.wk=function(t,i){this.yk=null,this.zk(this.ek,t.K(this.ek),i),a.debug,this.rk(t.Hd,i),a.debug,this.Ak(this.gk.K(t)),this.yk=this.gk.Hd,a.debug,this.zk(this.ek,t.K(this.ek),i),a.debug,this.rk(t.Hd,i),a.debug},e.prototype.zk=function(t,i,n){a.debug;for(var e=t.Hd,r=i.Hd,o=this.Db;o>=1;o--)for(var s=e[o],h=this.Db;h>=1;h--)s[h]===f&&this.sk(e,r,h,o,n,1-n)&&this.tk(r,h,o,n)},e.prototype.Ak=function(t){for(var i=t.Hd,n=1;n<=this.Db;n++)for(var e=1;e<=this.Db;e++)if(this.fk[n][e]===f){var r=i[n][e];if(r!==f){var o=this.Bk(i,e,n,1-r);0===o&&(i[n][e]=f)}}},e.prototype.sk=function(t,i,n,e,r,o){switch(this.Bk(t,n,e,r)){case 0:if(!this.Ck(t,n,e,r))return!1;break;case 4:return!1;case 3:if(0===this.Bk(t,n,e,o))return!1}return!0},e.prototype.tk=function(t,i,n,e,r){if(this.yk){if(!r&&this.yk[n][i]===f)return;var o=this.pb.ce(i,n);if(o.Zd(e))return;this.pb.ge(i,n,e)}t[n][i]=e},e.prototype.Bk=function(t,i,n,e){for(var r=0,o=x;k>=o;o++){var s=D[o];t[n+s[1]][i+s[0]]===e&&r++}return r},e.prototype.Ck=function(t,i,n,e){for(var r=x;k>=r;r++){var o=S[r];if(t[n+o[1]][i+o[0]]===e)return!0}return!1},e.prototype.ik=function(){for(var t=[],i=x;k>=i;i++)for(var n=D[i][0],e=D[i][1],o=this.Db-1;o>=2;o--){var s=r(i,o,this.Db);t.push([s[0],s[1],n,e])}this.Dk=t},e.prototype.rk=function(t,i){for(var n,e,r,o,s,h,u=this.Dk,a=u.length-1;a>=0;a--){var c=u[a],l=c[0],p=c[1];if(t[p][l]===f){var d=c[2],g=c[3],v=l+d,y=p+g,b=t[y][v];if(b===f){var m=v+d,w=y+g;if(b=t[w][m],b===f){var x=m+d,k=w+g;if(b=t[k][x],b===f);else{if(b!==i)continue;if(n=t[p-d][l-g],e=t[p+d][l+g],r=t[y-d][v-g],o=t[y+d][v+g],s=t[w-d][m-g],h=t[w+d][m+g],n===b&&r===b&&s===b)continue;if(e===b&&o===b&&h===b)continue;if(this.tk(t,m,w,b,!0),n===b&&r===b)continue;if(e===b&&o===b)continue;if(this.tk(t,v,y,b,!0),n===b||e===b)continue;this.tk(t,l,p,b,!0)}}else{if(b!==i)continue;if(n=t[p-d][l-g],e=t[p+d][l+g],r=t[y-d][v-g],o=t[y+d][v+g],n!==1-b&&r===b)continue;if(e!==1-b&&o===b)continue;if(this.tk(t,v,y,b,!0),n===b||e===b)continue;this.tk(t,l,p,b,!0)}}else{if(b!==i)continue;if(n=t[p-d][l-g],e=t[p+d][l+g],r=t[y-d][v-g],o=t[y+d][v+g],n===b&&r!==1-b)continue;if(e===b&&o!==1-b)continue;this.tk(t,l,p,b,!0)}}}}},{"../../Grid":16,"../../Move":20,"../../Stone":25,"../../constants":49,"../../log":70,"./Heuristic":30,util:4}],37:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.Ek=[],this.Fk=this.Hi("allyInfl",.03,.01,1),this.Gk=this.Hi("enemyInfl",.13,.01,1)}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),u=t("../../Move"),a=t("../../Stone"),c=(u.Ve,u.kb,r.EMPTY),l=a.ih,p=r.fh,f=r.gh;s(e,o),i.g=e,e.prototype.ai=function(t,i){var n=this.Ek;n.length=0,o.prototype.ai.call(this,t,i);for(var e=n.length-1;e>=0;e--)this.Hk(n[e],i)},e.prototype.Fh=function(t,i,n){return this.Ik(t,i,1-n,!0),this.Ik(t,i,n)},e.prototype.Jk=function(t,i,n,e,r){if(!(this.Gh[t.ve][t.ue]<0)){var o=1-n.group.color,s=this.ui.Hh(t,o);s&&(this.Kh.Uh(s.group.Ze)<.5||(h.debug,r[t.ve][t.ue]+=e,this.oi.Hd[t.ve][t.ue]+=e))}},e.prototype.Hk=function(t,i){var n=t[0],e=t[1],r=t[2];if(this.Jk(n,n,e,r,i),!this.Kh.mj(n,e.color)){var o=e.group;if(!n.sh(o))for(var s=0;8>s;s++){var h=n.hh[s];h.color===c&&h.sh(o)&&this.Jk(h,n,e,r,i)}}},e.prototype.Ik=function(t,i,n,e){var r=this.Oh[1-n][i][t];if(0===r)return 0;var o=this.Oh[n][i][t];if(o>=4)return 0;if(!e&&this.Gh[i][t]<0)return 0;var s=this.pb.ce(t,i);if(0===s.qh())return 0;var u=this.ui.Hh(s,n);if(!u)return 0;if(!e&&!this.ui.Hh(s,1-n))return 0;var a=this.Kk(t,i,n),c=a+this.Gk*r-this.Fk*o;return c*=this.Kh.Uh(u.group.Ze),e?c?(h.debug,this.Ek.push([s,u,c])):0:(h.debug,c)},e.prototype.Lk=function(t,i,n,e,r){var o=this.pb.ce(t,i);if(o.color!==c)return 0;var s=this.zi.nk(t,i,e);if(o.oh()&&(s/=2),0>=s)return 0;if(0===--r)return s;var h=l[n][0],u=l[n][1],a=l[(n+3)%4],p=a[0],f=a[1];return s+=this.Lk(t+h+p,i+u+f,n,e,r),s+=this.Lk(t+h-p,i+u-f,n,e,r)};var d=1;e.prototype.Kk=function(t,i,n){for(var e=Math.max(0,this.zi.nk(t,i,n)),r=p;f>=r;r++)e+=this.Lk(t+l[r][0],i+l[r][1],r,n,d);var o=this.pb.ce(t,i);return o.mh()?e=Math.max(e-1,0):o.oh()&&(e=Math.max(e-.85,0)),e}},{"../../Move":20,"../../Stone":25,"../../constants":49,"../../log":70,"./Heuristic":30,util:4}],38:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.Oj=null}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),u=t("../../Move"),a=(u.Ve,r.EMPTY),c=r.Ed;s(e,o),i.g=e,e.prototype.Yi=function(){this.Oj||(this.Oj=this.Rh.ei.Pj)},e.prototype.Fh=function(t,i){var n=this.pb.ce(t,i);return this.Mk(t,i,n),0},e.prototype.Mk=function(t,i,n){for(var e,r,o=[],s=this.color,u=n.se(s),a=0;r=u[a],a<u.length;a++)1===r.te?o.push(r):2===r.te&&o.push(r);if(o.length&&(h.debug,this.Oj.cj(t,i,this.qi))){this.pb.ge(t,i,s),h.debug;var c=!this.Oj.bj(n);this.pb.je();var l;if(!c){for(e=o.length-1;e>=0;e--)if(r=o[e],1!==r.te){var p=r.df();if(l=p[0]===n?p[1]:p[0],this.pb.ge(l.ue,l.ve,s),c=!this.Oj.bj(l),this.pb.je(),c)break}if(!c)return void h.debug;n=l}for(e=o.length-1;e>=0;e--)r=o[e],l&&1===r.te||(this.Kh.Nj(r,n),h.debug)}},e.prototype.Nk=function(t,i,n){var e=0,r=0,o=this.Db;if(1===i||i===o)r=1;else{if(1!==n&&n!==o)throw new Error("not along border");e=1}var s=r,h=e;if(this.pb.ce(i+s,n+h).color===c&&(s=-s,h=-h),this.pb.ce(i+s,n+h).group!==t){var u=t.color,l=this.pb.ce(i+e,n+r);for(l.group===t&&(e=-e,r=-r);;)switch(i+=e,n+=r,l=this.pb.ce(i,n),l.color){case c:return null;case u:return l.group.te>2?l.group:null;case a:var p=this.pb.ce(i+s,n+h);if(p.color===a)continue;return p.color===1-u?null:p.group.te>2?p.group:null;default:return null}}}},{"../../Move":20,"../../constants":49,"../../log":70,"./Heuristic":30,util:4}],39:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.Uj=t.ei.yi.Uj}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),u=t("../../Move"),a=(u.Ve,r.EMPTY),c=r.NEVER,l=r.Ok,p=r.Sj,f=r.Tj;s(e,o),i.g=e,e.prototype.ai=function(t,i){o.prototype.ai.call(this,t,i);var n=this.Rh.Qh.hi;for(var e in n){var r=n[~~e].group;this.Pk(i,r)}},e.prototype.Pk=function(t,i){var n=[],e=i.Ze.Qk(n);if(e===l){var r=this.pb.ce(n[0],n[1]);h.debug,this.Kh.Lj(i,r,this.color,.5)}},e.prototype.Fh=function(t,i,n){var e=this.pb.ce(t,i);return this.Rk(e,n),this.Rk(e,1-n),this.Sk(e,n)},e.prototype.Rk=function(t,i){if(this.zi.lk(t.ue,t.ve,i)!==c){var n=this.Rh.Qh.Ph(t);n.Zj&&n.color===i?this.Tk(t,i,n):this.Uk(t,i)}},e.prototype.Tk=function(t,i,n){switch(n.Vk){case 1:for(var e=t.ef.length-1;e>=0;e--){var r=t.ef[e];if(r.color===i&&1===r.group.te)return h.debug,this.Kh.Lj(r.group,t,i,1)}return;case 2:var o=n.Zj;if(this.Kh.tj(t,i))return this.Kh.Lj(o.group,t,i,1);if(o.Wk>1)return;var s=o.Xk.length&&o.Xk[0].group;if(s&&t.sh(s)&&(1===s.te||!t.mh()))return this.Kh.Lj(o.group,t,i,1);return;default:return}},e.prototype.Uk=function(t,i){if(!(this.Gh[t.ve][t.ue]<0)&&this.ui.Hh(t,1-i)){for(var n=this.Uj[p].Hd,e=this.Uj[f].Hd,r=this.Oh[1-i],o=null,s=null,h=0,u=t.ef.length-1;u>=0;u--){var c=t.ef[u];switch(c.color){case a:var l=c.ue,d=c.ve;if(n[d][l]===i||e[d][l]===i){if(1===r[d][l]&&2!==r[t.ve][t.ue])continue;o=c,h++,o.mh()&&2===o.qh()&&h++}break;case i:s||(s=c.group)}}o&&(s||(s=o.se(i)[0]),this.Kh.Lj(s,t,i,h/2))}},e.prototype.Sk=function(t,i){var n,e=t.lh(),r=e.length,o=this.Rh.Qh.Ph(t);if(o.Zj&&o.color===i){if(0===r)return-1;if(1===r)return this.xi._j(e[0],i)?0:-1;if(1===this.Kh.Uh(o.Zj))return 0;var s=t.rh(i);if(3===r&&1===s)return.5;for(n=r-1;n>=0;n--){var h=e[n];if(!this.Kh.tj(h,i)&&1===h.qh())return.5}}else{e=t.lh();var u=!1;for(n=r-1;n>=0&&!u;n--)u=this.xi._j(e[n],i);if(!u)return 0;if(t.mh())return-1;if(t.oh())return-.2;if(r>=3&&!this.Oh[1-i][t.ve][t.ue])return 1}return 0}},{"../../Move":20,"../../constants":49,"../../log":70,"./Heuristic":30,util:4}],40:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.Yk=this.Hi("enemyInfl",.07,.01,.5),this.Zk=this.Hi("allyInfl",.5,.01,.5),this.$k=this.Hi("border",10,0,20),this._k=this.Db<=9?[0,.2,.8,.95,1]:[0,.2,.8,1,.95,.8]}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=r.EMPTY;s(e,o),i.g=e,e.prototype.Fh=function(t,i){var n=0;if(!this.Rh.Th){var e=this.zi.mk(t,i,this.color);0>e&&(n+=e)}for(var r=this.pb.ce(t,i),o=this.Oh[this.qi],s=this.Oh[this.color],u=o[i][t],a=s[i][t],c=r.ef.length-1;c>=0;c--){var l=r.ef[c];if(l.color!==h)return n;u+=o[l.ve][l.ue],a+=s[l.ve][l.ue]}var p=1+this.Db/9*(this.Yk*Math.max(u-3,0)+this.Zk*Math.max(a-3,0)),f=this._k.length-1,d=Math.min(this.ph(t),f),g=Math.min(this.ph(i),f),v=this._k[d]*this._k[g]*this.$k;return n+v/p},e.prototype.ph=function(t){return Math.min(t-1,this.Db-t)}},{"../../constants":49,"./Heuristic":30,util:4}],41:[function(t,i,n){"use strict";function e(t){this.al=t.group.Sd,this.Cj=[t],t.Bj=this}function r(t){return"#"+t.group.Sd}var o=t("../../../log");i.g=e,e.prototype.toString=function(){return this.Cj.map(r).toString()},e.prototype.bl=function(t){if(!t.Bj)return o.debug,this.Cj.push(t),void(t.Bj=this);if(t.Bj.al!==this.al){o.debug;for(var i=t.Bj.Cj,n=i.length-1;n>=0;n--)this.Cj.push(i[n]),i[n].Bj=this}},e.prototype.remove=function(t){var i=this.Cj.indexOf(t);if(0>i)throw new Error("Band.remove on wrong Band");this.Cj.splice(i,1),t.Bj=null,o.debug},e.cl=function(t){if(1===t.length)throw new Error("add Band of 1");for(var i=null,n=0;n<t.length;n++)if(t[n].Ze.Bj){i=t[n].Ze.Bj;break}var r=0;for(i||(i=new e(t[r++].Ze)),n=r;n<t.length;n++)i.bl(t[n].Ze)}},{"../../../log":70}],42:[function(t,i,n){"use strict";function e(t){this.dc=t,this.version="chuckie",this.mode=null,this.Th=!1,this.pb=null,this.gl=null,this.oi=null,this.hl=[],this.hi=null,this.il=[0,0],this.jl=[0,0],this.kl=null}function r(t){return t>1&&2>t?t-1:t}function o(t){return t[b]===t[m]||t[b]>=w&&t[m]>=w?void 0:(t[b]=r(t[b]),t[m]=r(t[m]),t[b]>t[m]?b:m)}function s(t,i){for(var n=0;n<i.length;n++){var e=i[n];p.debug,e.Gl()!==x&&(i[n]=null)}var r=0;for(n=0;n<i.length;n++)i[n]&&(i[n].Hl(t.name+": liveliness="+i[n].Il.toFixed(4)),r++);return r}function h(t,i){for(var n=0;n<i.length;n++)i[n].Hl(t.name);return i.length}function u(){return 0}var a=t("../../../constants"),c=t("../../../Grid"),l=t("./GroupInfo"),p=t("../../../log"),f=t("../../../Move"),d=t("./Void"),g=t("./ZoneFiller"),v=(f.Ve,a.EMPTY),y=a.Ed,b=a.lb,m=a.mb,w=l.dl,x=l.el,k=l.fl,j=0,D=1,S=2;i.g=e,e.prototype.Ag=function(t){p.debug,this.il[b]=this.il[m]=0,this.jl[b]=this.jl[m]=0,this.oi&&this.oi.Db===t.Db||(this.oi=new c(t.Db,y)),this.ll(j,t,this.oi)&&(this.ml(),this.Th||t.me(this.jl))},e.prototype.zg=function(){return this.oi},e.prototype.Bg=function(){var t=this.il,i=this.jl,n=this.dc.tb,e=[t[b]+i[m],t[m]+i[b]+n],r=[[t[b],i[m],0],[t[m],i[b],n]];return[e,r]},e.prototype.Ph=function(t){return this.gl.Hd[t.ve][t.ue]},e.prototype.fi=function(t,i){this.ll(S,t,i)},e.prototype.bi=function(){this.ml()},e.prototype.xk=function(t,i,n){this.ll(D,t,i)&&this.ml(n)},e.prototype.Td=function(){return this.gl.Td()},e.prototype.Xd=function(){for(var t,i="Grid:\n"+this.gl.Yd()+"Voids:\n",n=this.hl,e=0;t=n[e],e<n.length;e++)i+=t.toString()+"\n";i+="Groups:\n";for(var r in this.hi)i+=this.hi[~~r].toString()+"\n";return this.il&&(i+="Score:"+this.il.map(function(t,i){return" player "+i+": "+t+" points"})),i},e.prototype.ll=function(t,i,n){return this.mode=t,this.Th=this.dc.xa&&t===j,this.pb=i,this.gl=n,this.kl=new g(i,n),0===i.ac()?!1:(n.Ne(i),this.nl(),this.ol(),this.pl(),!0)},e.prototype.ml=function(t){this.mode===S?this.ql():(this.rl(),this.ql(t),this.sl(),this.tl())},e.prototype.ul=function(t,i){var n=this.hi[t.Sd];n||(t.Ze&&t.Ze.Qh===this?t.Ze.vl():t.Ze=new l(t,this),n=this.hi[t.Sd]=t.Ze),n.wl.push(i)},e.prototype.nl=function(){p.debug;var t=c.Ge;this.hi={},this.hl.length=0;for(var i,n,e=this.pb,r=new d(e,t++),o=1;o<=e.Db;o++)for(var s=1;s<=e.Db;s++){var h=this.kl.xl(s,o,v,r);if(0!==h){this.hl.push(r);for(var u=b;m>=u;u++)for(n=r.yl[u],i=n.length-1;i>=0;i--)this.ul(n[i],r);r=new d(e,t++)}}},e.prototype.ol=function(){for(var t in this.hi)this.hi[~~t].zl()},e.prototype.pl=function(){p.debug;for(var t=this.hl,i=t.length,n=i-1;n>=0;n--)t[n].Al();for(var e;;){for(e=!1,n=i-1;n>=0;n--)t[n].Bl()&&(e=!0);if(!e)break}for(n=i-1;n>=0;n--)t[n].Cl()},e.prototype.rl=function(){if(!this.Th){var t=this.pb;if(!(t.ac()<2*t.Db))for(var i=[0,0],n=[0,0];;){for(var e=!1,r=this.hl.length-1;r>=0;r--){var s=this.hl[r];if(void 0===s.color&&!(s.Vk>2*t.Db)){i[b]=i[m]=n[b]=n[m]=0;for(var h=b;m>=h;h++)for(var u=s.yl[h].length-1;u>=0;u--){var a=s.yl[h][u].Ze;i[h]+=a.Dl(),n[h]+=a.El()}if(!(n[b]>4&&n[m]>4)){var c=o(i);void 0!==c?(p.debug,s.Fl(c),e=!0):p.debug}}}if(!e)break}}};var G={name:"brothers",l:l.prototype.Jl},C={name:"singleEye",l:l.prototype.Kl,Ll:s},M={name:"race",l:l.prototype.Gl,Ll:u},B={name:"atari",l:l.prototype.Ml},q={name:"final",l:l.prototype.Nl},T=[];T[j]=[G,B,C,M,q],T[D]=[G,C],T[S]=[G,C,M],e.prototype.Ol=function(t,i){p.debug;var n=0,e=0,r=[];for(var o in this.hi){var s=this.hi[~~o];if(!s.Pl&&!s.Ql)switch(e++,t.l.call(s,i)){case x:r.push(s);break;case k:n++}}return r.length&&(n+=t.Ll?t.Ll(t,r):h(t,r)),p.debug&&n,n===e?0:0===n?e:-n},e.prototype.ql=function(t){if(!this.Th){for(var i,n=T[this.mode],e=0;e<n.length;){if(i=this.Ol(n[e++],t),0===i)return void this.pl();0>i&&(e=0,this.pl())}p.debug&&i>0}},e.prototype.sl=function(){for(var t=[],i=this.hl.length-1;i>=0;i--){var n=this.hl[i];t[b]=t[m]=!1;for(var e=b;m>=e;e++)for(var r,o=n.yl[e],s=0;r=o[s],s<o.length;s++)if(this.Th||r.Ze.Dl()>=2){t[e]=!0;break}t[b]&&t[m]?n.Rl():this.Th&&(n.color=t[b]?b:m)}},e.prototype.tl=function(){this.Sl(),this.Tl(),this.Ul()},e.prototype.Sl=function(){if(this.Th)for(var t in this.hi){var i=this.hi[~~t].group;this.il[i.color]+=i.ne.length}},e.prototype.Tl=function(){if(!this.Th)for(var t in this.hi){var i=this.hi[~~t];if(i.Ql){for(var n=!1,e=i.Vl.length-1;e>=0;e--)if(!i.Vl[e].Ze.Ql){n=!0;break}var r=i.group.color;if(!i.Vl.length||n){var o=i.group.ne[0],s=this.kl.xl(o.ue,o.ve,r,c.Je+r);this.jl[r]+=s,this.il[1-r]+=s}else for(var h=i.wl.length-1;h>=0;h--)i.wl[h].Fl(r)}}},e.prototype.Ul=function(){for(var t=this.gl.Hd,i=[],n=this.hl.length-1;n>=0;n--){var e=this.hl[n],r=e.Wl(this.Th?null:i);if(r){this.il[e.color]+=r-i.length,this.kl.xl(e.ue,e.ve,e,c.Ke+e.color);for(var o=i.length-1;o>=0;o--){var s=i[o];t[s.ve][s.ue]=c.Ie}}else this.kl.xl(e.ue,e.ve,e,c.Ie)}}},{"../../../Grid":16,"../../../Move":20,"../../../constants":49,"../../../log":70,"./GroupInfo":44,"./Void":45,"./ZoneFiller":46}],43:[function(t,i,n){"use strict";function e(t,i){this.ki=t,this.yl=[],this.color=i[0].color,this.Sh=!1,this.Xl(i)}i.g=e,e.prototype.Xl=function(t){for(var i=this.yl,n=t.length-1;n>=0;n--){var e=t[n];i.indexOf(e)<0&&i.push(e)}}},{}],44:[function(t,i,n){"use strict";function e(t,i){this.Qh=i,this.Yl=[],this.wl=[],this.Xk=[],this.Vl=[],this.Zl=[0,0],this.ii=[],this.$l=[],this._l=[],this.group=t,this.vl()}function r(t,i,n){for(var e=i.length-1;e>=0;e--)for(var r=i[e].Ze,o=t.length-1;o>=0;o--)if(!(t[o].indexOf(r)<0)){-1!==n&&n!==o?(t[n]=t[n].concat(t[o]),t.splice(o,1),n>o&&n--):n=o;break}return n}function o(t,i,n,e){var o=-1;o=r(t,n,o),o=r(t,e,o),0>o?t.push([i]):t[o].push(i)}function s(t,i,n){switch(t){case 4:return 4===i[2];case 5:return 1===i[3]&&3===i[2];case 6:if(2===i[3]&&4===i[2]){for(var e=0,r=0;6>r;r++)if(!n[r].oh()&&++e>2)return!1;return!0}return 1===i[4]&&3===i[2]&&2===i[1];default:return!1}}function h(t){return.0202===t||1.0202===t}var u=t("../../../constants"),a=t("./Band"),c=t("../../../log"),l=u.EMPTY,p=u.NEVER,f=u.Ok,d=u.ALWAYS,g=u.Sj,v=u.Tj;i.g=e;var y=e.el=-1,b=e.fl=1,m=e.am=0,w=e.dl=1e3;e.prototype.vl=function(){this.Wk=this.Il=0,this.Yl.length=0,this.wl.length=0,this.Bj=null,this.Pl=this.Ql=!1,this.Uh=void 0,this.bm=void 0,this.Xk.length=0,this.Vl.length=0,this.Zl[g]=this.Zl[v]=0,this.ii.length=0,this.$l.length=0,this._l.length=0,this.cm=0},e.dm=function(t){return"#"+t.group.Sd},e.prototype.toString=function(){var t=this.Bj?this.Bj.toString():"";return this.group.toString()+" (isAlive:"+this.Pl+" isDead:"+this.Ql+" voids:"+this.Yl.length+" brothers:["+t+"] deadEnemies:["+this.Xk.map(e.dm)+"])"},e.prototype.em=function(t){return c.debug,this.Yl.push(t),this.Wk++,this},e.prototype.fm=function(t){var i=this.Yl.indexOf(t);if(-1===i)throw new Error("remove unknown void");c.debug,this.Yl.splice(i,1),this.Wk--},e.prototype.zl=function(){for(var t=this.group,i=t.color,n=[],e=[],r=[],o=t.df(),s=o.length-1;s>=0;s--)for(var h=o[s],u=h.ef,c=null,l=u.length-1;l>=0;l--){var p=u[l];if(p.color===i&&p.group!==t){c=p.group;var f=n.indexOf(c);f>=0?r[f]!==h&&(e[f]=!1):(n.push(c),e.push(!0),r.push(h))}}if(n.length){for(var d=n.length-1;d>=0;d--)if(e[d]){var g=r[d],v=this.Qh.Ph(g).gm(g,[t,n[d]]);this.ii.push(v),this.$l.push(n[d])}else this._l.push(n[d]);n.push(t),a.cl(n)}},e.Gj=function(t){return"subband["+t.length+" groups: "+t.map(function(t){return t.group.toString(1)}).join(", ")+"]"},e.prototype.hm=function(t){for(var i=[],n=this.$l.length-1;n>=0;n--)this.ii[n].ki!==t&&i.push(this.$l[n]);return i},e.prototype.Mj=function(t,i){for(var n,e=[],r=t.length-1;r>=0;r--){var s=t[r].Ze,h=s.Bj;if(h){if(h===n)continue;n=h;for(var u=h.Cj.length-1;u>=0;u--){var a=h.Cj[u];o(e,a,a._l,a.hm(i))}}else e.push([s])}return e},e.prototype.Kj=function(t){var i=this.Bj;if(!i)return[];for(var n=[],e=i.Cj.length-1;e>=0;e--){var r=i.Cj[e];r!==this&&o(n,r,r._l,r.hm(t))}return n},e.prototype.im=function(){if(this.Wk>=2)return p;var t=this.bk();return t>=3?p:0===t?d:f},e.prototype.jm=function(){if(this.im()===p)return!1;if(this._l.length)return!1;for(var t=this.group.color,i=0,n=0,e=this.wl.length-1;e>=0;e--){var r=this.wl[e];r.color===t&&0!==r.km&&(i++,r.km>=3&&n++,this.Xk.length&&n++)}return!(i+n>=2)},e.prototype.Hl=function(t){this.Ql=!0;for(var i=this.wl,n=this.group.color,e=1-n,r=null,o=i.length-1;o>=0;o--){var s=i[o],h=s.yl[e],u=0;if(h.length){for(var a=h.length-1;a>=0;a--)u+=h[a].ne.length;s.Vk>u||(s.Fl(e),r=s)}}if(!r)return void c.debug;for(var l=this.Vl=this.group.ff(),p=l.length-1;p>=0;p--){var f=l[p],d=f.Ze;d.Xk.push(this);for(var g=p-1;g>=0;g--){var v=l[g],y=v.Ze;if(-1===y.$l.indexOf(f)){y.$l.push(f);var b=r.gm(r.lm[0],[f,v]);y.ii.push(b)}}}c.debug},e.prototype.Dl=function(t){if(this.Pl||this.Wk>=2&&!this.Ql)return w;for(var i,n=0,e=this.group.color,r=this.group.te,o=this.wl.length-1;o>=0;o--){var s=this.wl[o],h=s.Vk;if(s.Zj)s.Zj===this&&(n+=h);else{var u=s.yl[e];if(1===u.length)n+=h;else{var a=this.group.Sd,l=a;for(i=u.length-1;i>=0;i--)l=Math.min(u[i].Sd,l);a===l&&(n+=h)}}}if(n=Math.min(r,n)/100,t||(n+=r/1e4),this.Ql)return 0+n;var p=0,f=0;if(!t&&this.Bj){var d=this.Bj.Cj;for(i=d.length-1;i>=0;i--)d[i]!==this&&(f+=d[i].Dl(!0))}if(!t){var d=this._l;for(i=d.length-1;i>=0;i--)p+=d[i].Ze.Dl(!0);
for(d=this.$l,i=d.length-1;i>=0;i--)p+=d[i].Ze.Dl(!0)}return p!==f&&(c.debug,p=f),this.Wk+p+n},e.prototype.Qk=function(t){if(this.Wk>1)return d;if(0===this.Wk)return p;var i=this.Yl[0],n=i.Vk;if(n>6)return d;var e=this.group,r=e.color;if(3>n&&!i.yl[1-r].length)return p;c.debug;for(var o,h=null,u=0,a=0,g=0,v=null,y=null,b=0,m=i.lm,w=!1,x=[0,0,0,0,0],k=0;n>k;k++){for(var j=m[k],D=0,S=0,G=0,C=j.ef.length-1;C>=0;C--){var M=j.ef[C];switch(M.color){case l:G++;break;case r:S++;break;default:if(1===M.group.te){G++,b+=2;break}D++,v?M.group!==v&&(y=M.group):v=M.group}}if(D){if(2>G+(S?1:0))continue}else if(b++,o=j,x[G]++,2>G)continue;if(c.debug,g++,j.mh()&&(w=!0),h&&!h.mh()){if(a>D)continue;if(u+a>=G+D)continue}h=j,a=D,u=G}if(w&&g>1&&g--,c.debug,!h)return p;if(1===b&&!y&&v&&v.ne.length<3&&this.mm(v,o,h))return p;if(g>=2){if(a)return d;if(!s(n,x,m))return d}return t[0]=h.ue,t[1]=h.ve,f},e.prototype.mm=function(t,i,n){for(var e=i.ef.length-1;e>=0;e--){var r=i.ef[e];if(r.color===l&&r!==n&&r.sh(t))return!0}return!1},e.prototype.Jl=function(){if(!this.Bj)return m;for(var t=this.Bj.Cj,i=0,n=!1,e=t.length-1;e>=0;e--){var r=t[e];r!==this&&(n||r.Pl?n=r.Pl=!0:(i+=r.Wk,i>=2&&(n=r.Pl=!0)))}return n?(c.debug,this.Pl=!0,b):m},e.prototype.nm=function(){if(this.Bj)return!1;if(this.group.ne.length>=6)return!1;for(var t=this.wl.length-1;t>=0;t--)if(this.wl[t].color===this.group.color)return!1;return!0},e.prototype.Kl=function(t){if(this.Wk>=2)return this.Pl=!0,c.debug,b;if(this.nm())return y;var i=[],n=this.Qk(i);if(n===f){if(this.cm=.5,void 0===t)return m;t!==this.group.color&&(n=p)}return n===p?(this.cm=0,this.Bj||this.Xk.length?m:this.om()>=1.5?m:(this.Il=this.Dl(),y)):(this.Pl=!0,this.cm=1,c.debug,b)},e.prototype.Gl=function(){var t=this.group.ff();if(!t.length)return y;for(var i=this.Il||this.Dl(),n=h(i)&&!this.$l.length&&!this._l.length,e=null,r=n?this.group.df():null,o=0;o<t.length;o++){var s=t[o],u=s.Ze,a=u.Dl(),l=i-a;if(c.debug,l>0)return c.debug,this.bm=!1,m;if(0===l&&(c.debug,n)){if(u.bm===!1||a!==i||s.ne.length<3)continue;for(var p=r.length-1;p>=0;p--){var f=r[p];if(!f.sh(s)&&this.Qh.Ph(f).Zj!==this){n=!1;break}}n&&(e=u)}}return n&&e?(this.bm=!0,m):y},e.prototype.Ml=function(){return this.group.te>1?m:y},e.prototype.Nl=function(){var t=this.Il=this.Dl();if(t>=2)return this.Pl=!0,c.debug,b;if(this.bm)return this.Pl=!0,c.debug,b;for(var i=this.$l.length-1;i>=0;i--)if(this.$l[i].Ze.Pl)return this.Pl=!0,c.debug,b;return y},e.prototype.pm=function(t,i){if(this.Bj){for(var n=this.Bj.Cj,e=0,r=n.length-1;r>=0;r--)e+=t.call(n[r],i);return e}return t.call(this,i)},e.prototype.$j=function(t,i){this.Zl[t]+=i},e.prototype.Ti=function(){for(var t=1-this.group.color,i=this.wl.length-1;i>=0;i--){var n=this.wl[i];if(n.color!==t)return!1}return!0},e.prototype.qm=function(){for(var t=this.group.color,i=this.wl.length-1;i>=0;i--){var n=this.wl[i];if(void 0===n.color)for(var e=n.yl[1-t],r=e.length-1;r>=0;r--){var o=e[r],s=o.Ze.El();if(6>s)return 1}}return 0},e.prototype.bk=function(){return this.Wk+this.cm+this.qm()+(this.Zl[g]+this.Zl[v])/2},e.prototype.om=function(){return this.pm(this.bk)},e.prototype.rm=function(){return this.group.ne.length},e.prototype.El=function(){return this.pm(this.rm)}},{"../../../constants":49,"../../../log":70,"./Band":41}],45:[function(t,i,n){"use strict";function e(t,i){this.pb=t,this.code=i,this.ue=this.ve=0,this.Vk=0,this.yl=null,this.lm=null,this.sm=void 0,this.color=void 0,this.Zj=void 0,this.tm=!1,this.um=!1,this.km=-1,this.ii=null,this.vm=!1}function r(t){return t?y[t]:y[0]}function o(t){for(var i=t.length-1;i>=0;i--)if(!t[i].Ze.Ql)return!1;return!0}function s(t){return"#"+t.Sd}var h=t("../../../constants"),u=t("./FakeSpot"),a=t("../../../log"),c=t("../../../Move"),l=(c.Ve,c.kb),p=h.lb,f=h.mb,d=1,g=2,v=3,y=["void","eye","fake","dame"];i.g=e,e.prototype.wm=function(t,i){return this.ue=t,this.ve=i,this.ii=[],this.yl=[[],[]],this.lm=[],this.yl},e.prototype.xm=function(t,i){this.Vk++,this.lm.push(this.pb.ce(t,i))},e.prototype.gm=function(t,i){a.debug,this.um=!0;var n=this.lm.indexOf(t),e=this.ii[n];return e?e.Xl(i):e=this.ii[n]=new u(t,i),e},e.prototype.Al=function(){var t=this.yl[p],i=this.yl[f],n=o(t),e=o(i);if(n&&e)return this.tm||void 0===this.color?!1:this.ym();if(this.sm===d)return!1;if(!n&&!e)return!1;var r=n?f:p;return this.vm=!t.length||!i.length,this.um?this.zm(r):(this.km=this.Vk,this.Am(r))},e.prototype.zm=function(t){this.sm=g,this.color=t,this.Zj&&(this.Zj.fm(this),this.Zj=null);for(var i=this.ii.length-1;i>=0;i--){var n=this.ii[i];n&&(n.Sh=!1)}return!0},e.prototype.Bl=function(){if(this.sm!==g)return!1;var t=this.km,i=this.km=this.Vk-this.Bm();return a.debug,i!==t},e.prototype.Bm=function(t){t||(t=[]);for(var i=this.ii.length-1;i>=0;i--){var n=this.ii[i];if(n&&n.color===this.color)for(var e=n.yl,r=e.length-1;r>=0;r--)if(e[r].Ze.jm()){a.debug&&!n.Sh,n.Sh=!0,t.push(n.ki);break}}return t.length},e.prototype.Sh=function(t){for(var i=this.ii.length-1;i>=0;i--){var n=this.ii[i];if(n&&n.color===this.color&&n.ki===t)return n.Sh}return!1},e.prototype.Cl=function(){if(this.sm===g){if(0===this.km){if(this.Zj)throw new Error("NEVER HAPPENS");return void a.debug}a.debug;var t=this.color;return this.color=this.sm=void 0,this.Am(t)}},e.prototype.Am=function(t){return this.vm?(this.Cm(t),!0):this.Fl(t)},e.prototype.Dm=function(t){for(var i=this.yl[t],n=i[0],e=0,r=i.length-1;r>=0;r--){var o=i[r],s=o.ne.length;o.te>1&&s>e&&(n=o,e=s)}this.Zj=n.Ze.em(this)},e.prototype.Cm=function(t){return a.debug,this.sm=d,this.color=t,this.Dm(t),!0},e.prototype.Fl=function(t){if(t===this.color)return!1;a.debug,this.Zj&&(this.Zj.fm(this),this.Zj=null),this.color=t;for(var i=this.yl[1-t],n=i.length-1;n>=0;n--)for(var e=i[n].Ze.wl,r=e.length-1;r>=0;r--)if(e[r]!==this&&e[r].color===t)return!0;return this.Dm(t),!0},e.prototype.Rl=function(){a.debug,this.Zj&&(this.Zj.fm(this),this.Zj=null),this.sm=v,this.color=void 0},e.prototype.ym=function(){a.debug;var t=this.color;if(void 0===t)throw new Error("dead group's eye of undefined owner");this.tm=!0,this.um=!1,this.Zj&&(this.Zj.fm(this),this.Zj=null),this.sm=d,this.color=1-t;for(var i=this.yl[t],n=i.length-1;n>=0;n--){var e=i[n].Ze;if(e.Vl.length)return this.Zj=e.Vl[0].Ze.em(this),!0}return!0},e.prototype.Wl=function(t){return void 0===this.color?0:(t&&(t.length=0,this.um&&this.Bm(t)),this.Vk)},e.prototype.Em=function(t){var i=t.group;return this.yl[i.color].indexOf(i)>-1},e.prototype.toString=function(){return"{"+r(this.sm)+"-"+l(this.ue,this.ve)+" vcount:"+this.Vk+" black:"+(this.yl[p].map(s).toString()||"-")+" white:"+(this.yl[f].map(s).toString()||"-")+"}"}},{"../../../Move":20,"../../../constants":49,"../../../log":70,"./FakeSpot":43}],46:[function(t,i,n){"use strict";function e(t,i){this.pb=t,this.Hd=i.Hd,this.yl=null,this.Fm=null}var r=t("../../../constants"),o=r.Ed;i.g=e,e.prototype.xl=function(t,i,n,e){if(this.Hd[i][t]!==n)return 0;this.Fm=n;var r="number"!=typeof e?e:null;this.yl=r&&r.wm(t,i);for(var o,s,h,u=0,a=this.Hd,c=[[t,i,i]];o=c.pop();)if(s=o[0],i=o[1],h=o[2],a[i][s]===n){for(;this.Gm(s,i-1);)i--;for(;this.Gm(s,h+1);)h++;u+=h-i+1;for(var l=s-1;s+1>=l;l+=2){for(var p=null,f=i;h>=f;f++)s>l&&(a[f][s]=e,r&&r.xm(s,f)),this.Gm(l,f)?p||(p=f):p&&(c.push([l,p,f-1]),p=null);p&&c.push([l,p,h])}}return u},e.prototype.Gm=function(t,i){var n=this.Hd[i][t];if(n===o)return!1;if(n===this.Fm)return!0;if(!this.yl)return!1;if("number"!=typeof n)return!1;var e=this.pb.ce(t,i).group;if(!e)throw new Error("Unexpected: ZoneFiller replacing a group");var r=this.yl[n];return-1===r.indexOf(e)&&r.push(e),!1}},{"../../../constants":49}],47:[function(t,i,n){"use strict";function e(t,i,n){this.name="Chuckie",this.dc=t,this.Qh=new o(t),this.Im(n),this.setColor(i)}function r(t,i){return i[1]-t[1]}var o=t("./boan/BoardAnalyser"),s=t("../../constants"),h=t("../../Genes"),u=t("../../Grid"),a=t("../../log"),c=t("../../Move"),l=t("../../test"),p=t("./boan/ZoneFiller"),f=t("./Connector"),d=t("./GroupAnalyser"),g=t("./GroupsAndVoids"),v=t("./Hunter"),y=t("./Influence"),b=t("./MoveInfo"),m=t("./NoEasyPrisoner"),w=t("./PotentialEyes"),x=t("./PotentialTerritory"),k=t("./Pusher"),j=t("./Savior"),D=t("./Shaper"),S=t("./Spacer"),G=c.jb,C=c.kb,M=s.Ed,B=s.lb,q=s.li,T=s.Hm,z=s.mi,E=-1;i.g=e,e.Jm="Chuckie",e.Km="0.1",e.sg=o,e.Lm=p,e.prototype.Mm=function(t){var i=new t(this);return this.ti.push(i),i},e.prototype.Nm=function(){var t=this.ei={};this.ti=[],t.di=this.Mm(b),t.Ai=this.Mm(x),t.Om=this.Mm(g),t.Bi=this.Mm(y),t.yi=this.Mm(w),t.Pm=this.Mm(d),t.wi=this.Mm(m),t.Qm=this.Mm(j),t.Pj=this.Mm(v),t.vi=this.Mm(f),t.Rm=this.Mm(S),t.Sm=this.Mm(k),t.Tm=this.Mm(D);for(var i=0;i<this.ti.length;i++)this.ti[i].ri()},e.prototype.setColor=function(t){this.color=t;for(var i=0;i<this.ti.length;i++)this.ti[i].Ci(t)},e.prototype.Im=function(t){this.Ii=t||this.Ii||new h,this.pi=this.Hi("smallerMove",.03,.01,.1),this.pb!==this.dc.pb&&(this.pb=this.dc.pb,this.Db=this.pb.Db,this.Th=this.dc.xa,this.Um=new u(this.Db,M),this.oi=new u(this.Db,0,M),this.Nm()),this.ub=B,this.Vm=this.Wm=0,this.Xm=this.Ym=this.Zm=0,this.$m=!1,this.wj=this.xj=E,this.Di=null},e.prototype._m=function(t){for(var i=0;i<this.ti.length;i++){var n=this.ti[i];if(n.name===t)return n}return null},e.prototype.Hi=function(t,i,n,e){return void 0===n&&(n=null),void 0===e&&(e=null),this.Ii.get(this.name+"-"+t,i,n,e)},e.prototype.an=function(t,i,n){this.Xm=n,this.Ym=t,this.Zm=i,this.$m=1!==this.bn},e.prototype.cn=function(t,i,n){if(n>this.Xm)this.bn=1,this.an(t,i,n);else{if(this.bn++,Math.random()*this.bn>=1)return;this.an(t,i,n)}},e.prototype.dn=function(){this.Vm++;var t=this.Um.Hd,i=this.oi.Hd;this.en(),this.fn(t,i),this.gn(t,i);var n=this.hn(t,i);return a.Ei(this.ij?a.Fi:a.yj),n},e.prototype.en=function(){this.Xm=this.pi-.001,this.Ym=E,this.ub=this.dc.ub,this.ij=!!a.debug,a.Ei(a.yj)},e.prototype.fn=function(t,i){for(var n=1;n<=this.Db;n++)for(var e=1;e<=this.Db;e++)this.pb.Yb(e,n,this.color)?(t[n][e]=q,i[n][e]=0):t[n][e]=T;if(this.wj!==E){if(t[this.xj][this.wj]===T)throw new Error("Invalid test move: "+this.wj+","+this.xj);t[this.xj][this.wj]=z}},e.prototype.gn=function(t,i){for(var n=0;n<this.ti.length;n++){var e=this.ti[n];a.Ei(this.ij&&this.Di===e.name?a.Fi:a.yj);var r=Date.now();e.Yi&&e.Yi(),e.ai(t,i);var o=Date.now()-r;o>=3&&!l["in"]&&a.jn("Slowness: "+e.name+" took "+o+"ms")}this.ei.di.jj(t,i)},e.prototype.hn=function(t,i){for(var n=1;n<=this.Db;n++)for(var e=1;e<=this.Db;e++)t[n][e]<q||i[n][e]<this.Xm||this.cn(e,n,i[n][e]);return this.Xm<this.pi?"pass":(this.$m&&this.Wm++,C(this.Ym,this.Zm))},e.prototype.kn=function(){var t=this.ei.Ai;return t.pk()},e.prototype.ln=function(){var t=this.ei.Ai;return t.ai(),t.hk.Hd},e.prototype.mn=function(t,i){this.wj=t,this.xj=i,this.dn(),this.wj=E},e.prototype.nn=function(t,i){for(var n={},e=0;e<this.ti.length;e++)this.ti[e].Gi(t,i,n);return n},e.prototype.on=function(t,i){return this.mn(t,i),this.oi.Hd[i][t]},e.prototype.pn=function(t,i,n){this.mn(t,i);var e=this._m(n);return e.oi.Hd[i][t]},e.prototype.qn=function(t){this.Di=t},e.prototype.rn=function(t,i){var n=G(t);if(!n)return"";var e=n[0],o=n[1];if(i){if(!this.pb.Yb(e,o,this.dc.ub))return"Invalid move: "+t;this.mn(e,o)}var s=this.nn(e,o),h=this.oi.Hd[o][e],u=[];for(var a in s)0!==s[a]&&u.push([a,s[a]]);u.sort(r);for(var c=t+" ("+h.toFixed(2)+")\n",l=0;l<u.length;l++)c+="- "+u[l][0]+": "+u[l][1].toFixed(2)+"\n";return c}},{"../../Genes":14,"../../Grid":16,"../../Move":20,"../../constants":49,"../../log":70,"../../test":75,"./Connector":26,"./GroupAnalyser":28,"./GroupsAndVoids":29,"./Hunter":31,"./Influence":32,"./MoveInfo":33,"./NoEasyPrisoner":34,"./PotentialEyes":35,"./PotentialTerritory":36,"./Pusher":37,"./Savior":38,"./Shaper":39,"./Spacer":40,"./boan/BoardAnalyser":42,"./boan/ZoneFiller":46}],48:[function(t,i,n){"use strict";function e(){this.sn=null,this.tg=this.tn=this.un=this.vn=null}i.g=new e,e.prototype.wn=function(t){this.sn={};for(var i=0;i<t.length;i++){var n=t[i];this.sn[n.name]=n.xn}var e=t.length-1;this.tg=this.tn=t[e].xn,this.un=e>=1?t[e-1].xn:null,this.vn=e>=2?t[e-2].xn:null}},{}],49:[function(t,i,n){"use strict";function e(){this.Sj=0,this.Tj=1,this.Ed=-99,this.EMPTY=-1,this.lb=0,this.mb=1,this.li=0,this.mi=1,this.Hm=-1,this.NEVER=0,this.Ok=1,this.ALWAYS=2,this.fh=0,this.gh=3,this.Rj=7,this.Qj=1,this.ck=this.uh=0,this.xh=1,this.dk=this.vh=2,this.wh=3,this.yh=4,this.zh=5,this.Ah=6,this.Bh=7,this.Ch=8,this.Xh=9,this.Dh=10,this.Eh=11,this.th=12,this.nb="Japanese",this.yn="Chinese",this.zn=0,this.An=1}i.g=new e},{}],50:[function(t,i,n){"use strict";function e(t){return"\n"!==t.slice(-1)?0:"\r\n"!==t.slice(-2)?1:2}n.si=function(t){return t.name||t.toString().split(/ |\(/,2)[1]},n.clone=function(t){if(null===t||void 0===t)return t;var i;if(t instanceof Array){i=[];for(var n=0,e=t.length;e>n;n++)i[n]=t[n]}else{if("object"!=typeof t)throw new Error("clone called on "+typeof t);if("function"==typeof t.clone)return t.clone();i={};for(var r in t){var o=t[r];"function"!=typeof o&&(i[r]=o)}}return i},String.prototype.yd=function(t){if(void 0===t)return this.substr(0,this.length-e(this));var i=this.length-t.length;return this.substr(i)===t?this.substr(0,i):this.toString()},String.prototype.Qe=function(t){if(void 0===t)t=e(this)||1;else if("number"!=typeof t)throw new Error("Invalid parameter type for String.count: "+typeof t);return this.substr(0,this.length-t)},String.prototype.startsWith||(String.prototype.startsWith=function(t){return this.substr(0,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t){return this.substr(this.length-t.length)===t}),String.prototype.format=function(t){if("%"!==this[0])throw new Error("Invalid format: "+this.toString());var i,n=this.slice(1,-1),e=0,r=this.slice(-1);switch(r){case"d":case"x":var o=" ";"0"===n[e]&&(e++,o="0");var s=parseInt(n.substr(e));i=t.toString("x"===r?16:10);for(var h=s-i.length;h>0;h--)i=o+i;return i;case"f":var u="";if("+"===n[e]&&(e++,t>0&&(u="+")),"."!==n[e++])break;var a=parseInt(n.substr(e));return u+t.toFixed(a)}throw new Error("Unknown format: "+this.toString())},String.prototype.Kg=function(t,i){return this>=t&&i>=this},n.Bn=function(t,i){for(var n=new Array(t),e=t-1;e>=0;e--)n[e]=i;return n},n.ye=function(t,i,e){for(var r=new Array(t),o=r[0]=n.Bn(i,e),s=t-1;s>=1;s--)r[s]=o.concat();return r},Array.Cn=function(t,i){if(void 0===t)return[];if(void 0===i)return new Array(t);var n,e=[];if("function"==typeof i)for(n=0;t>n;n++)e[n]=i(n);else for(n=0;t>n;n++)e[n]=i;return e},Array.prototype.Dn=function(t){for(var i=this.length,n=0;n<t.length;n++){var e=t[n];-1===this.indexOf(e)&&this.push(e)}return this.length-i}},{}],51:[function(t,i,n){"use strict";function e(t){this.options=t,this.En=[],this.parent=document.body,this.Fn=o.Gn(null,"contextMenu")}function r(){this.contextMenu.Hn(),this.action&&this.action.call(this)}t("./contextMenu.less");var o=t("./Dome"),s=t("./getText"),h=t("./PopupDlg"),u=t("./tapBehavior"),a=t("."),c=10;i.g=e,e.prototype.In=function(t,i){var n=o.Gn(this.Fn,"menuItem").Jn(t);return n.action=i,n.contextMenu=this,u(n,r),this.En.push(n),n},e.prototype.Kn=function(t){var i;this.options&&this.options.Ln?i=this.Hn.bind(this):this.In(s("#cancelAction"),null),h.Mn(this.Fn,this.parent,i);var n=o.Nn(t),e=n.left+n.width/2,r=n.top+n.height/2,u=o.Nn(this.Fn);e=Math.max(c,Math.min(e,a.On-u.width-c)),r=Math.max(c,Math.min(r,a.Pn-u.height-c)),this.Fn.Qn("left",Math.round(e)+"px"),this.Fn.Qn("top",Math.round(r)+"px")},e.prototype.Hn=function(){h.Rn(this.Fn)}},{".":63,"./Dome":52,"./PopupDlg":57,"./contextMenu.less":60,"./getText":62,"./tapBehavior":66}],52:[function(t,i,n){"use strict";function e(t,i,n,r){this.type=i;var o=this.Sn=document.createElement(i);this.name=r,this.Tn=!1,n&&(o.className=n),a&&a.Un(o,n),t&&(t instanceof e?t.Sn:t).appendChild(o),c&&c.add(r||n,this)}function r(t,i,n,e){this.left=t,this.top=i,this.width=n,this.height=e}function o(){this.so={}}var s=t("./fileHelper"),h=t("./tapBehavior"),u=null,a=null,c=null,l=1;i.g=e,e.init=function(t,i){a=t,u=i},e.prototype.Vn=function(t,i){return(t instanceof e?t.Sn:t).appendChild(this.Sn),this.Tn=i,u&&i&&u.addElement(this.Sn),this},e.prototype.appendChild=function(t,i){return t.Vn(this,i)},e.removeChild=function(t,i){i&&(u&&i.Tn&&u.removeElement(i.Sn),t instanceof e&&(t=t.Sn),t.removeChild(i.Sn))},e.prototype.removeChild=function(t){e.removeChild(this,t)},e.prototype.Wn=function(){return this.Sn.childElementCount},e.prototype.Xn=function(){this.Sn.innerHTML=null},e.prototype.Jn=function(t){return this.Sn.textContent=t,this},e.prototype.Yn=function(t){return this.Sn.innerHTML=t,this},e.prototype.setAttribute=function(t,i){return this.Sn.setAttribute(t,i),this},e.prototype.Qn=function(t,i){return this.Sn.style[t]=i,this},e.prototype.Zn=function(t){return t===this.$n()?this:(this.Sn.style.display=t?"":"none",this._n=!!t,u&&this.Tn&&(t?u.addElement(this.Sn):u.removeElement(this.Sn)),this)},e.prototype.$n=function(){return this._n||void 0===this._n},e.prototype.ao=function(t){return this.Sn.disabled=!t,this.bo("disabled",!t),this},e.prototype.text=function(){return this.Sn.textContent},e.prototype.co=function(){return this.Sn.innerHTML},e.prototype.value=function(){return this.Sn.value},e.prototype["do"]=function(){return this.Sn.checked},e.prototype.eo=function(){return this.Sn},e.prototype.clear=function(){this.Sn.innerHTML=""},e.prototype.v=function(t,i){var n=this;this.Sn.addEventListener(t,function(t){i.call(n,t)})},e.prototype.bo=function(t,i){var n=this.Sn,e=n.className,r=" "+e+" ",o=" "+t+" ",s=r.indexOf(o);if(i){if(s>=0)return;a&&a.toggle(n,t,i),n.className=e+" "+t}else{if(0>s)return;n.className=r.replace(o," ").trim(),a&&a.toggle(n,t,i)}},e.prototype.fo=function(){this.Sn.scrollTop=this.Sn.scrollHeight},e.Gn=function(t,i,n){return new e(t,"div",i,n||i)},e.prototype.Gn=function(t,i){return new e(this,"div",t,i||t)},e.ho=function(t,i,n,r){var o=new e(t,"button",i+"Button",i);return n&&(o.Sn.innerText=n),o.v("click",r),o},e.io=function(t,i,n,r){var o=new e(t,"div","btn "+i,i);return o.Jn(n),h(o,r),o},e.jo=function(t,i,n){var r=e.io(t,i,null,n);return r.Gn(i+"Icon btnIcon"),r},e.ko=function(t,i,n,r){var o=new e(t,"a",i,i);return o.setAttribute("href",r),o.Jn(n),o},e.lo=function(t,i,n){return new e(t,"div",i,i).Jn(n)},e.mo=function(t){return new e(t,"br")},e.no=function(t,i,n,r){var o=i+"Label";e.lo(t,o+" inputLbl",n,o);var s=new e(t,"input",i+"Input inputBox",i);return void 0!==r&&(s.Sn.value=r),s},e.oo=function(t,i,n,r,o){var s=new e(t,"div",i+"Div chkBoxDiv"),h=new e(s,"input",i+"ChkBox chkBox",i),u=h.Sn;return u.type="checkbox",u.name=i,void 0!==r&&(u.value=r),u.id=i+"ChkBox"+(void 0!==r?r:l++),o&&(u.checked=!0),new e(s,"label",i+"ChkLabel chkLbl",i).Jn(n).setAttribute("for",u.id),h},e.po=function(t,i,n,r,o){r||(r=n);for(var s=[],h=0;h<n.length;h++){var u=s[h]=new e(t,"input",i+"RadioBtn radioBtn",i),a=u.Sn;a.type="radio",a.name=i,a.value=r[h],a.id=i+"Radio"+r[h],r[h]===o&&(a.checked=!0),new e(t,"label",i+"RadioLbl radioLbl",i).Jn(n[h]).setAttribute("for",a.id)}return s},e.qo=function(t){for(var i=0;i<t.length;i++)if(t[i].Sn.checked)return t[i].Sn.value},e.ro=function(t,i,n,r,o){if(r||(r=n),"byIndex"===r)for(r=[],u=0;u<n.length;u++)r.push(u);var s=new e(t,"select",i+"DropDwn dropDwn",i);s.values=r;for(var h=0,u=0;u<n.length;u++){var a=new e(s,"option").Sn;a.value=r[u],a.textContent=n[u],r[u]===o&&(h=u)}return s.Sn.selectedIndex=h,s},e.prototype.select=function(t){var i=this.values.indexOf(t);-1!==i&&(this.Sn.selectedIndex=i)},e.Nn=function(t){var i=(t.Sn||t).getBoundingClientRect();return new r(i.left,i.top,i.width,i.height)},e.to=function(){return c=new o},e.uo=function(){c=null},o.prototype.add=function(t,i){this.so[t]=i},o.prototype.get=function(t){return this.so[t]},o.prototype.ao=function(t,i,n){"ALL"===t&&(t=Object.keys(this.so));for(var e=0;e<t.length;e++)if(!n||-1===n.indexOf(t[e])){var r=this.so[t[e]];r?r.ao(i):console.error("Invalid control name:",t[e])}},o.prototype.Zn=function(t,i,n){"ALL"===t&&(t=Object.keys(this.so));for(var e=0;e<t.length;e++)if(!n||-1===n.indexOf(t[e])){var r=this.so[t[e]];r?r.Zn(i):console.error("Invalid control name:",t[e])}},e.vo=function(t){document.head.getElementsByTagName("title")[0].textContent=t},e.wo=function(){var t=window.getSelection();if(!t.rangeCount)return null;var i=t.getRangeAt(0),n=i.startContainer.data;return n?n.substring(i.startOffset,i.endOffset):null},e.xo=function(t,i,n){var e=new Blob([t],{type:n||"text/plain"}),r=document.createElement("a");r.href=URL.createObjectURL(e),r.download=i,r.click()},e.prototype.yo=function(){var t=this.Sn.files;return t&&t.length>0},e.prototype.zo=function(t){var i=this.Sn.files;return i?i.length?(s.Ao(i[0],t),!0):!1:console.error("Invalid field type for uploadFile: "+this.type)}},{"./fileHelper":61,"./tapBehavior":66}],53:[function(t,i,n){"use strict";function e(){}var r="./assets/";i.g=e,e.Bo=function(t,i){var n=new XMLHttpRequest;n.onreadystatechange=function(){return 4===~~n.readyState?200!==~~n.status?i("xhrError: "+n.status):void i(null,n.response):void 0},n.open("GET",t,!0),n.send()},e.Co=function(t,i){return e.Bo(r+t,i)},e.xo=function(t,i){return e.Bo(t,i)}},{}],54:[function(t,i,n){"use strict";function e(t){this.Do=t||"",this.Eo=!1,this.Fo=null,this.map={},this.Go=this.Ho.bind(this),this.Io=console.error}function r(t){return t?o+"."+t:o}var o="localPref",s="currentVersion";i.g=e,e.prototype.Jo=function(t){this.Io=t},e.prototype.Ko=function(){if(!this.Lo(this.Do)){var t=window.localStorage.getItem(s);this.Lo(t)&&(this.Eo=!0)}},e.prototype.Mo=function(){this.Fo&&this.Ho()},e.prototype.No=function(){this.Fo||(this.Fo=window.setTimeout(this.Go,6e4))},e.prototype.Lo=function(t){try{var i=window.localStorage.getItem(r(t));return i?(this.map=JSON.parse(i),!0):!1}catch(n){this.Io("Cannot load local preferences: "+n)}},e.prototype.Ho=function(){window.clearTimeout(this.Fo),this.Fo=null;try{var t=r(this.Do);window.localStorage.setItem(t,JSON.stringify(this.map)),this.Eo&&(window.localStorage.setItem(s,t),this.Eo=!1)}catch(i){this.Io("Cannot save local preferences: "+i)}},e.prototype.ld=function(t,i){var n=this.map[t];return void 0!==n?n:i},e.prototype.jd=function(t,i){this.map[t]=i,this.No()}},{}],55:[function(t,i,n){"use strict";function e(t,i,n){this.parent=t=t||document.body,n=n||{};var e=this.Oo=r.Gn(null,"notifPopup").Zn(!1);n.title&&e.Gn("title").Jn(n.title),n.Po&&(this.Qo=r.io(e,"closeBtn",o("#close"),this.close.bind(this))),this.content=e.Gn("content"),this.$n=!1,this.Ro=n.Ro,this.Ro?s.Mn(this.Oo,this.parent):e.Vn(t),i&&(this.So(i),this.show())}t("./notificationPopup.less");var r=t("./Dome"),o=t("./getText"),s=t("./PopupDlg"),h=t("./Transit");i.g=e,e.prototype.To=function(t){this.Qo&&this.Qo.Zn(t)},e.prototype.So=function(t){this.content.Gn("msg").Jn(t),this.content.fo()},e.prototype.close=function(){this.hide()},e.prototype.clear=function(){this.content.Xn()},e.prototype.show=function(){this.$n||(this.$n=!0,this.Oo.Zn(!0),s.Uo(this.Oo))},e.prototype.hide=function(){this.$n&&(this.$n=!1,this.Ro?s.Rn(this.Oo):new h(this.Oo).from("opacity",1).Vo("opacity",0).start(500))}},{"./Dome":52,"./PopupDlg":57,"./Transit":59,"./getText":62,"./notificationPopup.less":64}],56:[function(t,i,n){"use strict";function e(){this.Wo={},this.Xo=null,this.Yo=""}function r(t,i){for(var n in i)t.style[n]=i[n]}function o(t,i,n,e){var r,o=n[i],s=e[i];if(o)for(r in o)t.style[r]=s?s[r]||null:null;if(s)for(r in s)t.style[r]=s[r]}i.g=new e,e.prototype.Zo=function(t,i){this.Wo=t,this.$o(i,!0),this.Un(document.body,"body")},e.prototype._o=function(){return Object.keys(this.Wo)},e.prototype.$o=function(t,i){if(t!==this.Yo){var n=this.Xo;if(this.Yo=t,this.Xo=this.Wo[t],!i)for(var e=document.all,r=0;r<e.length;r++){var o=e[r];this.ap(o,n)}}},e.prototype.Un=function(t,i){if(this.Xo){var n=this.Xo[t.localName];if(n&&r(t,n),i&&(n=this.Xo["."+i],n&&r(t,n),i.indexOf(" ")>=0))for(var e=i.split(" "),o=0;o<e.length;o++)n=this.Xo["."+e[o]],n&&r(t,n)}},e.prototype.ap=function(t,i){o(t,t.localName,i,this.Xo);for(var n=t.className.split(" "),e=0;e<n.length;e++)o(t,"."+n[e],i,this.Xo)},e.prototype.bp=function(t,i,n){var e=this.Xo[i+"+"+n];if(e){var r=this.Xo[i]||{};for(var o in e)t.style[o]=r[o]||null}},e.prototype.toggle=function(t,i,n){if(this.Xo){var e,o=t.className.split(" ");if(n){var s=this.Xo[t.localName+"+"+i];for(s&&r(t,s),e=0;e<o.length;e++)s=this.Xo["."+o[e]+"+"+i],s&&r(t,s)}else for(this.bp(t,t.localName,i),e=0;e<o.length;e++)this.bp(t,"."+o[e],i)}}},{}],57:[function(t,i,n){"use strict";function e(){var t=this.cp;t.options&&(t.options.dp=this.id),o.Rn(t.Oo),t.ep&&t.ep(t.options)}function r(t,i,n,r){var o=h.io(t,"popupDlgBtn",n,e);o.cp=i,o.id=r}function o(t,i,n,e,s){this.parent=t||document.body,this.options=e,this.ep=s;var a=this.Oo=h.Gn(null,"popupDlg dialog");a.Gn("dialogTitle").Jn(n||u("#problem"));var c=a.Gn("content");h.lo(c,"message",i);for(var l=e&&e.buttons||[u("#ok")],p=a.Gn("btnDiv"),f=0;f<l.length;f++)r(p,this,l[f],f);o.Mn(this.Oo,this.parent)}function s(t){var i=h.Gn(null,"popupOverlay");return t&&(t=t.Sn||t,i.Qn("left",t.offsetLeft+"px"),i.Qn("top",t.offsetTop+"px"),i.Qn("width",t.scrollWidth+2+"px"),i.Qn("height",t.scrollHeight+2+"px")),i}t("./popupDlg.less");var h=t("./Dome"),u=t("./getText"),a=t("./tapBehavior"),c=t("./Transit");i.g=o,o.Mn=function(t,i,n){var e=t.fp=s(i);e.parent=i,e.Vn(i),t.Vn(e,!0),e.Qn("opacity",1),n&&a(e,n)},o.Rn=function(t){t.fp.Qn("opacity",0),window.setTimeout(function(){t.Zn(!1),h.removeChild(t.fp.parent,t.fp)},300)},o.gp=function(t,i,n){var e={buttons:[u("#yes"),u("#no")]};new o(t,i,u("#confirmTitle"),e,function(t){0===t.dp&&n()})},o.Uo=function(t){new c(t).from("opacity",0).Vo("opacity",1).start(500)}},{"./Dome":52,"./Transit":59,"./getText":62,"./popupDlg.less":65,"./tapBehavior":66}],58:[function(t,i,n){"use strict";function e(t){this.hp={},this.ip=t.ip,this.jp(t)}function r(){this.pp.op(),this.pp.ip(this.id)}function o(){this.pp.op()}t("./topMenu.less");var s=t("./tapBehavior"),h=t("./Dome");i.g=e,e.prototype.kp=function(){return this.lp.Sn.clientHeight},e.prototype.mp=function(t){this.np.Jn(t)},e.prototype.qp=function(t){return this.rp.Gn(t||"menuSeparator")},e.prototype.sp=function(t,i){var n=this.rp.Gn("menuOption").Jn(i);return n.id=t,n.pp=this,s(n,r),this.hp[t]=n,n},e.prototype.In=function(t){return this.rp.appendChild(t)},e.prototype.removeItem=function(t){this.rp.removeChild(t)},e.prototype.jp=function(t){var i=this.fp=h.Gn(document.body,"topMenuOverlay");i.pp=this,i.Zn(!1),s(i,o);var n=h.Gn(document.body,"topMenu"),e=this.lp=h.Gn(n,"menuBtn");e.Gn("menuBtnIcon btnIcon"),s(e,this.tp.bind(this)),this.np=n.Gn("topTitle"),this.rp=n.Gn("slideMenu");var r=this.rp.Gn("menuTitle").Jn(t.up);s(r,this.op.bind(this))},e.prototype.tp=function(){this.fp.Zn(!0);var t=this.fp.Sn.clientWidth;t++,this.fp.Qn("opacity",1),this.rp.bo("opened",!0)},e.prototype.op=function(){var t=this.fp;t.Qn("opacity",0),window.setTimeout(function(){t.Zn(!1)},300),this.rp.bo("opened",!1)}},{"./Dome":52,"./tapBehavior":66,"./topMenu.less":67}],59:[function(t,i,n){"use strict";function e(t){this.Sn=t.Sn||t,this.vp={},this.wp={},this.xp={},this.timeout=null,this.yp=null,this.zp=null}function r(t,i){window.clearTimeout(t.timeout),t.timeout=null,t.Sn.style.webkitTransition=t.yp,!i&&t.zp&&t.zp(),t.zp=null}i.g=e,e.prototype.from=function(t,i){return this.wp[t]=i,this},e.prototype.Vo=function(t,i){return this.xp[t]=i,this},e.prototype.start=function(t,i){var n=this.Sn;n.Ap&&n.Ap.timeout&&r(n.Ap,!0),n.Ap=this,this.yp=n.style.webkitTransition,n.style.webkitTransition=null;for(var e in this.wp)this.vp[e]=n.style[e],n.style[e]=this.wp[e];n.clientHeight||(n=n);var o="all "+t+"ms ease-in-out";n.style.webkitTransition=o;for(e in this.xp)this.vp.hasOwnProperty(e)||(this.vp[e]=n.style[e]),n.style[e]=this.xp[e];return this.zp=i,this.timeout=window.setTimeout(r,t,this),this},e.prototype.reverse=function(t,i){var n=this.xp;this.xp=this.wp,this.wp=n,this.start(t,i)},e.prototype.Bp=function(t,i){this.xp=this.vp,this.vp={},this.wp={},this.start(t,i)}},{}],60:[function(t,i,n){var e=".contextMenu {\n  position: relative;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  width: 150px;\n  background-color: rgba(120, 120, 120, 0.2);\n  border-radius: 7px;\n  border: 1px solid #58636d;\n}\n.contextMenu .menuItem {\n  margin: 1px 1px 0 1px;\n  padding: 11px;\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.7);\n  color: #e4e4e4;\n}\n";t("lessify")(e),i.g=e},{lessify:121}],61:[function(t,i,n){"use strict";n.Ao=function(t,i){var n=new FileReader;n.onloadend=function(){return i(n.result)},n.readAsText(t)}},{}],62:[function(t,i,n){"use strict";function e(t){var i=u[t];if(void 0===i)return"("+t+")";if(arguments.length<=1)return i;for(var n=1;n<arguments.length;n++)i=i.replace("%"+n,arguments[n]);return i}var r=t("./GetFile"),o=t("../log"),s="en",h=t("../../assets/i18n_en.json"),u=h;i.g=e,e.init=function(t,i){if(u=h,t===s)return i();var n="i18n_"+t+".json";r.Co(n,function(t,e){return t?(o.error("Failed to get file "+n+": "+t),i(t)):(u=JSON.parse(e),void i())})}},{"../../assets/i18n_en.json":5,"../log":70,"./GetFile":53}],63:[function(t,i,n){"use strict";var e=t("./Dome"),r=1456,o=159;n.init=function(t,i){e.init(t,i),n.On=document.documentElement.clientWidth,n.Pn=document.documentElement.clientHeight,n.Pn===r&&(n.Pn+=o)}},{"./Dome":52}],64:[function(t,i,n){var e=".notifPopup {\n  z-index: 3000;\n  border-radius: 13px;\n  background-color: rgba(0, 0, 0, 0.7);\n}\n.notifPopup .title {\n  height: 100px;\n  line-height: 100px;\n  padding: 0 20px;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  border-radius: 12px;\n  background-color: rgba(78, 77, 77, 0.2);\n  color: #ffffff;\n  font-size: 38px;\n}\n.notifPopup .closeBtn {\n  position: absolute;\n  top: 0;\n  right: 0;\n  height: 100px;\n  line-height: 100px;\n}\n.notifPopup .content {\n  padding: 20px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  color: white;\n  font-size: 30px;\n}\n";t("lessify")(e),i.g=e},{lessify:121}],65:[function(t,i,n){var e=".popupOverlay {\n  z-index: 2000;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.7);\n  transition: opacity 300ms ease-out;\n  opacity: 0;\n}\n.popupDlg {\n  margin: 0 80px;\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.popupDlg .content {\n  padding: 20px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.popupDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.popupDlg .btnDiv .popupDlgBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n}\n";t("lessify")(e),i.g=e},{lessify:121}],66:[function(t,i,n){"use strict";var e=t("./touchManager");i.g=function(t,i){e.Cp(t.Sn,function(n){t.Sn.disabled||"tap"===n&&i.call(t)})}},{"./touchManager":68}],67:[function(t,i,n){var e='.topMenuOverlay {\n  z-index: 2000;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  transition: opacity 300ms ease-out;\n  opacity: 0;\n}\n.topMenu {\n  width: 100%;\n  height: 130px;\n}\n.topMenu .menuBtn {\n  display: inline-block;\n  width: 130px;\n  height: 100%;\n  background-color: #000;\n}\n.topMenu .menuBtn .menuBtnIcon {\n  background-image: url("assets/menuBtn.png");\n  -webkit-filter: invert(1) grayscale(1);\n}\n.topMenu .topTitle {\n  display: inline-block;\n  vertical-align: top;\n  width: calc(100% - 130px);\n  height: 100%;\n  overflow: hidden;\n  background-color: #333;\n  color: #fff;\n  padding-left: 31px;\n  font-size: 30px;\n  line-height: 130px;\n}\n.topMenu .slideMenu {\n  z-index: 2010;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 85%;\n  overflow-x: hidden;\n  min-height: 100%;\n  transition: transform 300ms ease-out;\n  -webkit-transform: translateX(-100%);\n  transform: translateX(-100%);\n  background-color: #000;\n  color: #fff;\n}\n.topMenu .slideMenu.opened {\n  -webkit-transform: translateX(0);\n  transform: translateX(0);\n}\n.topMenu .slideMenu .menuTitle {\n  height: 140px;\n  line-height: 140px;\n  padding-left: 50px;\n  font-size: 43px;\n  border-bottom: 1px solid #909090;\n  background-color: #323435;\n}\n.topMenu .slideMenu .menuOption {\n  padding: 0 100px;\n  height: 140px;\n  line-height: 140px;\n  font-size: 50px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.topMenu .slideMenu .menuSeparator {\n  border-bottom: 1px solid #777;\n}\n';
t("lessify")(e),i.g=e},{lessify:121}],68:[function(t,i,n){"use strict";function e(){this.Dp=this.Ep=0,this.Fp=this.Gp=!1,this.target=null,this.Hp=this.startTime=this.Ip=0,this.Jp=!1,r()}function r(){window.addEventListener("mousemove",function t(){y.Jp=!0,window.removeEventListener("mousemove",t)})}function o(t){return y.Hp+=t.changedTouches.length,y.Hp>1?y.Kp():void y.Lp(t,t.changedTouches[0])}function s(t){return y.Hp-=t.changedTouches.length,y.Hp>0?console.warn("Extra touchend count?",t):void(y.Mp(t.changedTouches[0])&&t.preventDefault())}function h(t){return t.changedTouches.length>1?y.Kp():void(y.Np(t.changedTouches[0])&&t.preventDefault())}function u(t){y.Hp-=t.changedTouches.length,y.Kp()}function a(t){t.button===v&&y.Lp(t,t)}function c(t){t.button===v&&y.Mp(t)&&t.preventDefault()}function l(t){y.Np(t)&&t.preventDefault()}var p=10,f=50,d=300,g=500,v=0,y=i.g=new e;e.prototype.Op=function(t){null!==this.target&&(console.error("Forgot to stop listening on",this.target),this.Pp()),this.Fp=!0,this.target=t,t.addEventListener("touchmove",h),t.addEventListener("touchend",s),t.addEventListener("touchcancel",u),document.addEventListener("mousemove",l),document.addEventListener("mouseup",c)},e.prototype.Pp=function(){var t=this.target;return t?(this.Fp=!1,this.target=null,t.removeEventListener("touchmove",h),t.removeEventListener("touchend",s),t.removeEventListener("touchcancel",u),document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",c),t):null},e.prototype.Lp=function(t,i){t.stopPropagation(),this.Op(t.currentTarget),this.Fp=!0,this.Dp=i.clientX,this.Ep=i.clientY,this.startTime=Date.now();var n=this;this.Qp&&window.clearTimeout(this.Qp),this.Qp=window.setTimeout(function(){n.Qp=null,n.Fp&&!n.Gp&&n.Rp(i)},d)},e.prototype.Rp=function(t){this.Gp=!0,this.startTime=Date.now();var i=this.target;i.Sp("dragStart",t.pageX-i.offsetLeft,t.pageY-i.offsetTop)},e.prototype.Kp=function(){this.Hp=0;var t=this.Pp();return this.Gp&&(this.Gp=!1,t.Sp("dragCancel")),!0},e.prototype.Np=function(t){var i=Date.now();if(i-this.Ip<f)return!0;if(this.Ip=i,!this.Gp)return Math.abs(t.clientX-this.Dp)+Math.abs(t.clientY-this.Ep)<p?!1:i-this.startTime<d?(this.Pp(),!1):this.Rp(t);var n=this.target;return n.Sp("drag",t.pageX-n.offsetLeft,t.pageY-n.offsetTop),!0},e.prototype.Mp=function(t){if(this.Gp&&Date.now()-this.startTime<g)return this.Kp();var i=this.Pp();i||(i=i);var n=this.Gp?"dragEnd":"tap";return i.Sp(n,t.pageX-i.offsetLeft,t.pageY-i.offsetTop),this.Gp=!1,!0},e.prototype.Cp=function(t,i){t.Sp=i,t.addEventListener("touchstart",o),t.addEventListener("mousedown",a)}},{}],69:[function(t,i,n){"use strict";function e(t){return decodeURIComponent(t.replace(o," "))}var r=/([^&=]+)=?([^&]*)/g,o=/\+/g;n.Tp=function(t){t=(t||window.location.search).substring(1);for(var i={};;){var n=r.exec(t);if(!n)break;i[e(n[1])]=e(n[2])}return i},n.Up=function(t){var i=document.createElement("a");i.href=t,i.click()}},{}],70:[function(t,i,n){"use strict";function e(){this.level=NaN,this.Vp=null,this.Fi=0,this.yj=1,this.Wp=2,this.ERROR=3,this.Xp=4,this.Yp=!1,this.gf=!1}var r=console,o=0,s=1,h=2,u=3,a=4;e.prototype.Ei=function(t){t!==this.level&&(this.level=t,this.debug=o>=t?this.Zp:null,this.info=s>=t?this.Tg:null,this.warn=h>=t?this.jn:null,this.error=u>=t?this.$p:null,this.fatal=a>=t?this._p:null)},e.prototype.aq=function(t){this.Vp=t},e.prototype.bq=function(t,i){var n=this;return function(e){n.level>t||n.Vp&&!n.Vp(t,e)||i.call(r,e)}};var c=i.g=new e;e.prototype.Zp=c.bq(o,r.debug),e.prototype.Tg=c.bq(s,r.info),e.prototype.jn=c.bq(h,r.warn),e.prototype.$p=c.bq(u,r.error),e.prototype._p=c.bq(a,r.error),c.Ei(s)},{}],71:[function(t,i,n){"use strict";function e(){this.appName=r.name,this.appVersion=r.version,this.cq=null,this.dq=null}var r=t("../package.json");i.g=new e},{"../package.json":122}],72:[function(t,i,n){"use strict";function e(){var t=window.location;return t.protocol+"//"+t.host+t.pathname}function r(t){this.jq=t,this.kq=null,this.files=null,this.lq=null}var o=t("../../lib/npm/Dropbox-sdk.min.js"),s=t("../hh/fileHelper"),h=t("../hh/getText"),u=t("../hh/PopupDlg"),a=t("../hh/urlHelper"),c="gdap2n66j8rl89n",l="dbxToken";n.eq=function(t){var i=a.Tp(window.location.hash);if(i.error)return t.jd(l,null),new u(null,i.error_description,h("#problem")+": "+i.error,{},function(){a.Up(e())}),!1;var n=i.access_token;return n?(t.jd(l,n),a.Up(e()),!0):!1},n.fq=function(t){var i=t.ld(l);return i?new r(i):null},n.gq=function(){var t=new o({hq:c}),i=t.iq(e());a.Up(i)},r.prototype.connect=function(t){return this.kq?t():(this.kq=new o({mq:this.jq}),void this.nq("",t))},r.prototype.nq=function(t,i){if(!this.kq)return i(h("#noDropbox"));var n=this;this.kq.oq({path:t}).then(function(t){var e=t.entries;n.files={};for(var r=0;r<e.length;r++)n.pq(e[r]);i()})["catch"](i)},r.prototype.pq=function(t){var i=t.path_display;"file"!==t[".tag"]?this.files[i]={path:i,qq:!0}:this.files[i]={path:i,timestamp:t.server_modified}},r.prototype.rq=function(t){if(t=t||"/","/"!==t)throw new Error("Unsupported call to getNumEntries + path");return this.lq=Object.keys(this.files),this.lq.length},r.prototype.sq=function(t){var i=this.lq[t];return i?{path:i,timestamp:this.files[i].timestamp}:null},r.prototype.xo=function(t,i){return this.kq?void this.kq.tq({path:t}).then(function(t){s.Ao(t.uq,function(n){i(null,n,t.server_modified)})})["catch"](i):i(h("#noDropbox"))},r.prototype.zo=function(t,i,n){if(!this.kq)return n(h("#noDropbox"));var e=new Blob([i],{type:"text/plain"}),r=this;this.kq.vq({path:t,wq:e,mode:{".tag":"overwrite"},xq:!0}).then(function(i){var e=i.server_modified;r.files[t]={timestamp:e},n(null,e)})["catch"](n)},r.prototype.yq=function(t,i){if(!this.kq)return i(h("#noDropbox"));var n=this;this.kq.zq({path:t}).then(function(){n.files[t]={qq:!0},i()})["catch"](i)},r.prototype.Aq=function(t,i){if(!this.kq)return i(h("#noDropbox"));var n=this;this.kq.Bq({path:t}).then(function(){delete n.files[t],i()})["catch"](i)},r.prototype.Cq=function(t,i,n){if(!this.kq)return n(h("#noDropbox"));var e=this;this.kq.Dq({Eq:t,Fq:i}).then(function(){e.files[i]=e.files[t],delete e.files[t],n()})["catch"](n)}},{"../../lib/npm/Dropbox-sdk.min.js":96,"../hh/PopupDlg":57,"../hh/fileHelper":61,"../hh/getText":62,"../hh/urlHelper":69}],73:[function(t,i,n){"use strict";function e(t,i,n,e){this.Bc=t,this.Gq=i,this.Hq=n,this.Iq=e,this.Jq=null,this.Kq=this.Lq=null}function r(t){return"/"+t}function o(t){return f+"/"+t}function s(t){var i=new Date(t).toISOString();return i.substring(0,19)+"Z"}function h(t){return new Date(t).getTime()}var u=t("contra"),a=t("../GameInVault"),c=t("../GameVault").Sc,l=t("../hh/getText"),p="/vaultState.json",f="/archivedGames";i.g=e,e.prototype.connect=function(t){this.Jq={};var i=this;this.Gq.connect(function(n){return n?i.Mq(n,t):void i.Nq(t)})},e.prototype.Mq=function(t,i){var n=t;"string"==typeof t.error&&(n=t.error,void 0!==t.response&&(n+="\nResponse: "+t.response),void 0!==t.status&&(n+="\nStatus: "+t.status)),this.Iq(n),i(t)},e.prototype.Nq=function(t){for(var i=!1,n=!1,e=this.Gq.rq(),r=0;e>r;r++){var o=this.Gq.sq(r),s=o.path;if(s===p)i=!0;else if(s===f)n=!0;else{var h=s.substr(1);this.Jq[h]=o.timestamp}}n||this.Gq.yq(f,function(){}),i?this.Oq(t):(this.Kq={},this.Lq={},t())},e.Pq=s,e.Qq=h,e.prototype.Rq=function(t,i,n){var e=this.Hq.Wc(t);if(e===c.Tc)return n();if(e===c.ACTIVE)return n();switch(e){case c.Uc:var r=this.Hq.Yc(t),o=s(r.Ta());i>o?(this.Hq.ed(t),this.Iq(l("#unarchived")+t),n()):(this.Iq(l("#archived")+l("#remote",t)),this.Sq(t,o,n));break;case c.Vc:var h=s(this.Hq.Xc(t));i>h?(this.Iq(l("#undeleted")+t),n()):(this.Iq(l("#deleted")+l("#remote",t)),this.Tq(t,h,n));break;default:throw new Error("Unexpected GameState: "+e)}},e.prototype.Uq=function(t,i){var n=this;this.Vq(r(t),function(e,r,o){return e?i(e):(n.Wq(r,t,o),n.Iq(l("#downloaded")+t),void i())})},e.prototype.Vq=function(t,i){this.Gq.xo(t,function(t,n,e){if(t)return self.Mq(t,i);var r=[],o=new a;return o.Ha(n,r)?void i(null,o,e):self.Mq(r,i)})},e.prototype.Xq=function(t,i){var n=t.Va(),e=this,o=this.Jq[n];return o?o===t.Sa()?(this.Iq(l("#alreadySync")+n),i()):void this.Zq(t,r(n),function(r){return r?i(r):void e.Yq(t,n,i)}):this.Yq(t,n,i)},e.prototype.Zq=function(t,i,n){var e=this;this.Vq(i,function(i,r){if(i)return n(i);var o=[];return t.Ma(r,o)?void n():e.Mq(o,n)})},e.prototype.Yq=function(t,i,n){var e=!!this.Jq[i];if(!e){var h=s(t.Ta());if(this.Kq[i]>h)return this.Hq.$c(i),this.Iq(l("#deleted")+i),n();if(this.Lq[i]>=h)return this.Hq.bd(i),this.Iq(l("#archived")+i),n()}var u=this;this.Gq.zo(r(i),t.Na(),function(r,s){return r?u.Mq(r,n):(u.Wq(t,i,s),e?(u.Iq(l("#synced")+i),n()):u.Kq[i]?(u.Iq(l("#undeleted")+l("#remote",i)),delete u.Kq[i],u.$q(n)):u.Lq[i]?(u.Iq(l("#unarchived")+l("#remote",i)),delete u.Lq[i],u.$q(function(){u.Gq.Aq(o(i),n)})):(u.Iq(l("#uploaded")+i),void n()))})},e.prototype.Wq=function(t,i,n){this.Jq[i]=n,t.Ra(n,h(n)),this.Hq.Oc(t)},e.prototype._q=function(t,i,n,e){this.Lq[i]=n,t.Ra(n,h(n)),this.Hq.fd(t),this.$q(e)},e.prototype.Sq=function(t,i,n){this.Lq[t]=i;var e=this;this.$q(function(){delete e.Jq[t],e.Gq.Cq(r(t),o(t),n)})},e.prototype.ar=function(t,i){var n=t.Va();if(this.Jq[n])return i();var e=t.Sa(),r=this.Lq[n],s=this;if(r===e)return i();var h=o(n);return r?void this.Zq(t,h,function(e){return e?i(e):void s.Gq.zo(h,t.Na(),function(e,r){return e?i(e):(s.Iq(l("#synced")+l("#archivedGame",n)),void s._q(t,n,r,i))})}):this.Kq[n]?i():this.Gq.zo(h,t.Na(),function(e,r){return e?i(e):(s.Iq(l("#uploaded")+l("#archivedGame",n)),void s._q(t,n,r,i))})},e.prototype.br=function(t,i){var n=this;this.Vq(o(t),function(e,r,o){return e?i(e):(n.Iq(l("#downloaded")+l("#archivedGame",t)),void n._q(r,t,o,i))})},e.prototype.Tq=function(t,i,n){this.Kq[t]=i;var e=this;this.$q(function(){delete e.Jq[t],e.Gq.Aq(r(t),n)})};var d="deletedFiles",g="archivedFiles";e.prototype.Oq=function(t){var i=this;this.Gq.xo(p,function(n,e){if(n)return i.Mq(n,t);var r=JSON.parse(e);i.Kq=r[d]||{},i.Lq=r[g]||{},t()})},e.prototype.$q=function(t){var i={};i[d]=this.Kq,i[g]=this.Lq;var n=JSON.stringify(i);this.Gq.zo(p,n,t)},e.prototype.cr=function(t,i){this.Xq(t,i)},e.prototype.dr=function(t){var i=this;u.er([this.gr.bind(this),this.hr.bind(this),this.ir.bind(this),this.jr.bind(this),this.kr.bind(this)],function(n){return n?i.Mq(n,t):(i.Iq(l("#syncDone")),void t())})},e.prototype.gr=function(t){var i=this;u.lr.er(this.Jq,function(t,n,e){i.Rq(n,t,e)},t)},e.prototype.hr=function(t){var i=this;u.lr.er(this.Hq.Qc(),function(t,n){i.Xq(t,n)},t)},e.prototype.ir=function(t){var i=this;u.lr.er(this.Jq,function(t,n,e){return i.Hq.Pc(n)?e():void i.Uq(n,e)},t)},e.prototype.jr=function(t){var i=this;u.lr.er(this.Hq.Zc(),function(t,n){i.ar(t,n)},t)},e.prototype.kr=function(t){var i=this;u.lr.er(this.Lq,function(t,n,e){return i.Hq.Wc(n)!==c.Tc?e():void i.br(n,e)},t)}},{"../GameInVault":8,"../GameVault":12,"../hh/getText":62,contra:105}],74:[function(t,i,n){"use strict";n.mr=function(t){var i,n=t.cb("source"),e=t.cb("place");if(n&&n.toLowerCase().indexOf("littlegolem")>=0){var r=t.cb("event");return r?["http://www.littlegolem.net/servlet/sgf/"+r+"/game.sgf","LittleGolem"]:null}return n&&n.indexOf("www.dragongoserver")>=0?(i=n.substr(n.indexOf("gid=")+4),["http://www.dragongoserver.net/sgf.php?gid="+i+"&owned_comments=1","Dragon Go Server"]):e&&e.indexOf("online-go.com/game/")>=0?(i=e.substr(e.indexOf("/game/")+6),["https://online-go.com/api/v1/games/"+i+"/sgf","OGS"]):null};var e={"http://www.littlegolem.com":"LittleGolem","OGS: http://online-go.com/game/":"OGS:","http://www.dragongoserver.net/game.php?gid=":"DragonGo:"};n.Xa=function(t,i){for(var n in e)i=i.replace(n,e[n]);return"EV"===t&&""+parseInt(i)===i&&(i="EV:"+i),i}},{}],75:[function(t,i,n){"use strict";function e(){this.debug=!1,this.nr=this["in"]=!1,this.or=null,this.pr=null}i.g=new e,e.prototype.qr=function(t,i){this.or=new t,i(this.or)},e.prototype.assert=function(t,i){if(t!==!0)throw new Error("assertion failed: "+(i||t))}},{}],76:[function(t,i,n){"use strict";function e(){this.rr=null,this.sr=null,this.pb=null,this.Db=0,this.tr=null,this.cursor={type:"CR",x:0,y:0},this.ur=!1,this.vr={type:null,x:0,y:0}}function r(t){switch(t){case-1:return{type:"mini",c:p.B};case-.5:return{type:"outline",c:p.B};case 0:return null;case.5:return{type:"outline",c:p.W};case 1:return{type:"mini",c:p.W};default:return null}}function o(t){switch(t){case u.Ke+v:case u.Je+g:return{type:"mini",c:p.B};case u.Ke+g:case u.Je+v:return{type:"mini",c:p.W};case u.Ie:return{type:"SL",c:"grey"};default:return null}}function s(t){if(null===t)return null;var i=1,n=0,e=2,r=0;if(void 0!==k&&(n=k),void 0!==j&&(e=j),void 0!==D&&(r=D),t===r)return null;for(var o=t.toFixed(e),s=n;e>s;s++)o=o.yd("0");if(o=o.yd("."),"0."===o.substr(0,2)&&(o=o.slice(1)),0===r){if("0"===o||".0"===o)return null;i=1>t?.6:1}return{type:"LB",text:o,scale:i}}var h=t("../constants"),u=t("../Grid"),a=t("../log"),c=t("../Move"),l=t("../hh/touchManager");t("../../lib/wgo.js");var p=window.WGo,f=c.xe,d=c.kb,g=h.mb,v=h.lb,y=h.EMPTY,b=window.devicePixelRatio||1,m={};m[p.B]=v,m[p.W]=g;var w={};w[y]=null,w[v]=p.B,w[g]=p.W;var x=300;i.g=e,e.prototype.create=function(t,i,n,e){var r=n.Db;if(this.pb=n,!this.rr||this.Db!==r){this.Db=r,e=e||{};var o=e.noCoords?0:-.23,s={size:r,width:i,section:{top:o,left:o,right:o,bottom:o},coordFontSize:.6};switch(e.background){case"wood":s.background=(window.rootDir||".")+"/assets/wood1.jpg";break;default:s.background="#c75"}t.clear(),this.rr=new p.wr(t.eo(),s),this.xr=60+this.rr.yr,this.ur=!1,this.vr.type=null,e.noCoords||this.rr.zr(p.wr.Ar),this.Br()}},e.prototype.Br=function(){var t=this;l.Cp(this.rr.Cr,function(i,n,e){if("dragCancel"===i)return t.Dr(-1,-1);"drag"===i.substr(0,4)&&(e-=t.xr);var r=t.Er(n,e);switch(n=r[0],e=r[1],i){case"dragStart":return t.Dr(n,e);case"drag":return t.Dr(n,e);case"dragEnd":if(t.Dr(-1,-1),Date.now()-t.Fr<x)return;return t.Gr(n,e);case"tap":return t.Gr(n,e)}})},e.prototype.Hr=function(t){this.Ir=w[t]},e.prototype.Dr=function(t,i){var n=this.Jr(t,i);if(this.ur){if(t===this.cursor.x&&i===this.cursor.y)return;this.rr.Kr(this.cursor)}this.ur=n,n&&(this.cursor.x=t,this.cursor.y=i,this.Fr=Date.now(),this.rr.Lr[t][i][0]?(this.cursor.type="SL",this.cursor.c=void 0):(this.cursor.type=void 0,this.cursor.c=this.Ir),this.rr.Mr(this.cursor))},e.prototype.Nr=function(t,i,n){this.vr.type&&this.rr.Kr(this.vr),this.vr.type=t,t&&(this.vr.x=i-1,this.vr.y=this.Db-n,this.rr.Mr(this.vr))},e.prototype.Or=function(t,i,n,e){this.rr.Mr({x:i-1,y:this.Db-n,type:"LB",text:t,scale:e?1.1:.8})},e.prototype.Jr=function(t,i){return t>=0&&i>=0&&t<this.Db&&i<this.Db},e.prototype.Gr=function(t,i){var n=t+1,e=this.Db-i;if(!this.Jr(t,i))return this.sr("!"+(n>=1&&n<=this.Db?f(n):e));if(this.pb.de(n,e)===y){var r=d(n,e);this.sr(r)}},e.prototype.Pr=function(t){this.sr=t},e.prototype.Er=function(t,i){var n=this.rr;return t=Math.round((t*b-n.left)/n.Qr),i=Math.round((i*b-n.top)/n.Rr),[t,i]},e.prototype.refresh=function(){var t=!1;"regular"!==this.tr&&(this.tr="regular",t=!0);for(var i=0;i<this.Db;i++)for(var n=0;n<this.Db;n++){var e=this.pb.de(n+1,this.Db-i),r=w[e],o=this.rr.Lr[n][i][0];t&&(o=null,this.rr.Sr(n,i)),null===r?o&&this.rr.Sr(n,i):o&&o.c===r||(o&&this.rr.Sr(n,i),this.rr.Mr({x:n,y:i,c:r}))}},e.prototype.show=function(t,i,n){this.refresh(),this.tr=t;for(var e=0;e<this.Db;e++)for(var r=0;r<this.Db;r++){var o=n(i[this.Db-e][r+1]);o&&(o.x=r,o.y=e,this.rr.Mr(o))}};var k,j,D;e.prototype.Tr=function(t,i,n){k=t,j=i,D=n};var S={hk:r,Ur:o,value:s};e.prototype.Vr=function(t,i){var n=S[t];return n?void this.show(t,i,n):a.error&&a.error("invalid display type: "+t)},e.prototype.Wr=function(t){this.show("scoring",t,o)}},{"../../lib/wgo.js":97,"../Grid":16,"../Move":20,"../constants":49,"../hh/touchManager":68,"../log":70}],77:[function(t,i,n){"use strict";function e(t,i){this.Hq=t,this.ep=i,this.jp(),s.Uo(this.Oo)}t("./importDlg.less");var r=t("../hh/Dome"),o=t("../hh/getText"),s=t("../hh/PopupDlg");i.g=e,e.prototype.jp=function(){var t=this.Oo=r.Gn(null,"importDialog dialog");t.Zn(!1),t.Gn("dialogTitle").Jn(o("#importGame"));var i=this.Xr=t.Gn("mainDiv");this.Yr=r.no(i,"loadGame",o("#fromFile")).setAttribute("type","file").setAttribute("id","fileInput").Zn(!1),new r(i,"label","btn fileInputBtn").Jn(o("#selectFile")).setAttribute("for","fileInput"),this.Yr.v("change",this.Zr.bind(this)),r.mo(i);var n=i.Gn("moves");this.Gf=r.no(n,"moves",o("#fromText")),n.Gn("loadMovesInfo").Jn(o("#fromTextHelp"));var e=t.Gn("btnDiv");r.io(e,"loadBtn",o("#load"),this.Zr.bind(this)),r.io(e,"cancelBtn",o("#cancel"),this.$r.bind(this)),t.Zn(!0),s.Mn(t,document.body)},e.prototype.Zr=function(){if(this.Yr.yo()){var t=this;this.Yr.zo(function(i){t._r(i)})}else this._r(this.Gf.value())},e.prototype._r=function(t){if(t){var i=[],n=this.Hq.gd(t,i);return n?void(this.ep({dc:n})&&s.Rn(this.Oo)):new s(null,i.join("\n"))}},e.prototype.$r=function(){s.Rn(this.Oo),this.ep({as:!0})}},{"../hh/Dome":52,"../hh/PopupDlg":57,"../hh/getText":62,"./importDlg.less":87}],78:[function(t,i,n){"use strict";function e(t,i,n){var e=this.Sn=t.Gn("moveIndicator "+i);this.bs=e.Gn("label").Jn(n);var r=e.Gn("icon");this.cs=r.Gn("text")}t("./moveIndicator.less");var r=t("../constants"),o=r.mb,s=r.lb;i.g=e,e.prototype.ds=function(t,i,n){this.Sn.Zn(null!==t),null!==t&&(this.Sn.bo("black",i===s),this.Sn.bo("white",i===o),this.cs.Jn(t),n&&this.bs.Jn(n))}},{"../constants":49,"./moveIndicator.less":88}],79:[function(t,i,n){"use strict";function e(t,i){this.Hq=t,this.es=i,this.gs=!1,this.hs=null,this.js=null,this.jp(),this.td(),u.Uo(this.Oo)}function r(){this.ls.ks(this)}t("./myArchivedGamesDlg.less");var o=t("../hh/Dome"),s=t("../GameInVault"),h=t("../hh/getText"),u=t("../hh/PopupDlg"),a=t("../hh/tapBehavior");i.g=e,e.prototype.ks=function(t){this.hs&&this.hs.bo("selected",!1),t.bo("selected",!0),this.hs=t,this.js=t.za,this.ms()},e.prototype.ns=function(){this.os.Wn()||this.os.Gn("emptyMsg").Jn(h("#empty")),this.hs=null,this.ms()},e.prototype.ms=function(){var t=!!this.hs;this.ps.ao(t),this.qs.ao(t)},e.prototype.rs=function(){if(this.hs){var t=h("#deleteGameConfirm")+"\n\n"+this.hs.text(),i=this;u.gp(null,t,function(){i.Hq.ad(i.js)||console.error("Failed to delete gameId: "+i.js),i.os.removeChild(i.hs),i.ns()})}},e.prototype.ss=function(){this.hs&&this.Hq.ed(this.js)&&(this.gs=!0,this.os.removeChild(this.hs),this.ns())},e.prototype.td=function(){var t=this.Hq.Zc();t.sort(s.Ya),this.os.Xn();for(var i=0;i<t.length;i++){var n=t[i],e=this.os.Gn("oneGame").Jn(n.Ua());e.za=n.Va(),e.ls=this,a(e,r)}this.ns()},e.prototype.jp=function(){var t=this.Oo=o.Gn(null,"myArchivedGamesDialog dialog");t.Zn(!1),t.Gn("dialogTitle").Jn(h("#archivedGames"));var i=this.Xr=t.Gn("mainDiv");this.os=i.Gn("gameList"),this.ps=o.io(i,"delGameBtn",h("#deleteGame"),this.rs.bind(this)),this.qs=o.io(i,"restoreGameBtn",h("#restoreGame"),this.ss.bind(this));var n=t.Gn("btnDiv");o.io(n,"closeBtn",h("#close"),this.ts.bind(this)),t.Zn(!0),u.Mn(t,document.body)},e.prototype.ts=function(){u.Rn(this.Oo),this.gs&&this.es()}},{"../GameInVault":8,"../hh/Dome":52,"../hh/PopupDlg":57,"../hh/getText":62,"../hh/tapBehavior":66,"./myArchivedGamesDlg.less":89}],80:[function(t,i,n){"use strict";function e(t,i){this.Hq=t,this.ep=i,this.result={},this.hs=null,this.js=null,this.jp(),this.td(),c.Uo(this.Oo)}function r(){this.ls.ks(this)}function o(){var t=this.ls;t.ns(),t.ws.ao(this.value()>0)}t("./myGamesDlg.less");var s=t("../hh/Dome"),h=t("../GameInVault"),u=t("../hh/getText"),a=t("./MyArchivedGamesDlg"),c=t("../hh/PopupDlg"),l=t("../hh/tapBehavior");i.g=e,e.prototype.ks=function(t){this.hs&&this.hs.bo("selected",!1),t.bo("selected",!0),this.hs=t,this.js=t.za,this.ms(),this.us.select(0)},e.prototype.ns=function(){this.os.Wn()||this.os.Gn("emptyMsg").Jn(u("#myGamesHelp")),this.hs&&this.hs.bo("selected",!1),this.hs=null,this.ms()},e.prototype.ms=function(){var t=!!this.hs;this.ps.ao(t),this.vs.ao(t),this.ws.ao(t)},e.prototype.rs=function(){if(this.hs){var t=u("#deleteGameConfirm")+"\n\n"+this.hs.text(),i=this;c.gp(null,t,function(){i.Hq.$c(i.js)||console.error("Failed to delete gameId: "+i.js),i.os.removeChild(i.hs),i.ns()})}},e.prototype.xs=function(){if(this.hs){var t=u("#archiveGameConfirm")+"\n\n"+this.hs.text(),i=this;c.gp(null,t,function(){i.Hq.bd(i.js)&&(i.os.removeChild(i.hs),i.ns())})}},e.prototype.ys=function(){new a(this.Hq,this.td.bind(this))},e.prototype.td=function(){var t=this.Hq.Qc();t.sort(h.Ya),this.os.Xn();for(var i=0;i<t.length;i++){var n=t[i],e=this.os.Gn("oneGame").Jn(n.Ua());e.za=n.Va(),e.ls=this,l(e,r)}this.ns()},e.prototype.jp=function(){var t=this.Oo=s.Gn(null,"myGamesDialog dialog");t.Zn(!1),t.Gn("dialogTitle").Jn(u("#myGames"));var i=this.Xr=t.Gn("mainDiv");this.os=this.Xr.Gn("gameList"),this.ps=s.io(i,"delGameBtn",u("#deleteGame"),this.rs.bind(this)),this.vs=s.io(i,"archiveGameBtn",u("#archiveGame"),this.xs.bind(this)),this.zs=s.io(i,"showArchiveBtn",u("#showArchivedGames"),this.ys.bind(this));var n=i.Gn();s.lo(n,"inputLbl",u("#recentGames"));var e=[u("#none")].concat(this.Hq.md());this.us=s.ro(n,"recentGames",e,"byIndex"),this.us.v("change",o),this.us.ls=this;var r=t.Gn("btnDiv");this.ws=s.io(r,"loadBtn",u("#load"),this.Zr.bind(this)),s.io(r,"cancelBtn",u("#cancel"),this._r.bind(this,!0)),t.Zn(!0),c.Mn(t,document.body)},e.prototype.Zr=function(){var t=this.us.value();t>0?(this.result.dc=this.Hq.Kc(t-1),this._r()):this.hs&&(this.result.dc=this.Hq.Ic(this.js),this._r())},e.prototype._r=function(t){this.result.as=!!t,this.ep(this.result)&&c.Rn(this.Oo)}},{"../GameInVault":8,"../hh/Dome":52,"../hh/PopupDlg":57,"../hh/getText":62,"../hh/tapBehavior":66,"./MyArchivedGamesDlg":79,"./myGamesDlg.less":90}],81:[function(t,i,n){"use strict";function e(t,i){this.ep=i,this.As=t.Db,this.Bs=t.Bs,this.jp(t),this.Cs(),this.Ds(),u.Uo(this.Oo)}t("./newGameDlg.less");var r=t("../ai"),o=t("../constants"),s=t("../hh/Dome"),h=t("../hh/getText"),u=t("../hh/PopupDlg"),a=t("../hh/Transit"),c=o.lb,l=o.mb,p=[5,7,9,13,19],f="More options",d=" >>",g=" <<";i.g=e,e.prototype.Cs=function(){var t=this.As;this.Es.Jn(t+" x "+t);var i=t+"x"+t;this.Fs.Qn("backgroundImage",'url("assets/'+i+'.png")'),this.Fs.Qn("backgroundSize",Math.ceil(t/19*100)+"%"),this.Gs.ao(t>5),this.Hs.ao(19>t)},e.prototype.Is=function(t){var i=p.indexOf(this.As)+t;this.As=p[i],this.Cs()},e.prototype.Ds=function(){this.Js[c].bo("robot",this.Bs[c]),this.Js[l].bo("robot",this.Bs[l])},e.prototype.Ks=function(t){this.Bs[t]=!this.Bs[t],this.Ds()},e.prototype.jp=function(t){this.options=t;var i=this.Oo=s.Gn(document.body,"newGameDialog dialog");i.Zn(!1),i.Gn("dialogTitle").Jn("Start a new game");var n=i.Gn("mainDiv"),e=n.Gn("centeredDiv").Gn("boardDiv");this.Js=[],this.Js[0]=s.jo(e,"playerBtn",this.Ks.bind(this,0));var o=this.Ls=e.Gn("sizeBox");this.Hs=s.jo(o,"sizeBtn",this.Is.bind(this,1)),this.Fs=o.Gn("boardImgFrame").Gn("boardImg"),this.Es=this.Fs.Gn("curSize"),this.Gs=s.jo(o,"sizeBtn",this.Is.bind(this,-1)),this.Gs.bo("down",!0),this.Js[1]=s.jo(e,"white playerBtn",this.Ks.bind(this,1)),this.Ms=s.io(n,"advancedBtn",f+d,this.Ns.bind(this));var u=this.Os=i.Gn("advancedDiv");s.lo(u,"inputLbl","Handicap:"),this.Ps=s.ro(u,"handicap",[0,2,3,4,5,6,7,8,9],null,t.Ps);var a=u.Gn("rules");s.lo(a,"inputLbl","Rules:"),this.rules=s.ro(a,"rules",["Japanese","Chinese"],null,t.rules);var c=Object.keys(r.sn);if(c.length>1){var l=u.Gn();s.lo(l,"inputLbl","Black AI:"),this.tg=s.ro(l,"defaultAi",c,null,r.tg.name),s.lo(l,"defAiInfo","(White AI always uses latest AI version)")}var p=s.io(i,"startBtn",h("#play"),this.Qs.bind(this));i.Zn(!0);var g=this.Os.Sn.clientHeight+p.Sn.clientHeight+24;this.Os.Qn("marginTop",-g+"px")},e.prototype.Ns=function(){this.Rs?(this.Ss=!this.Ss,this.Rs.Bp(200)):(this.Os.Zn(!0),this.Ss=!0,this.Rs=new a(this.Os).Vo("marginTop","0").start(200)),this.Ms.Jn(f+(this.Ss?g:d))},e.prototype.Qs=function(){var t=this.options;t.Db=this.As,t.Ps=~~this.Ps.value(),t.Bs=this.Bs,r.tg=this.tg?r.sn[this.tg.value()]:r.tg,t.rules=this.rules.value(),this._r()},e.prototype._r=function(){return this.ep(this.options)?(this.close(),!0):!1},e.prototype.close=function(){s.removeChild(document.body,this.Oo)}},{"../ai":48,"../constants":49,"../hh/Dome":52,"../hh/PopupDlg":57,"../hh/Transit":59,"../hh/getText":62,"./newGameDlg.less":91}],82:[function(t,i,n){"use strict";function e(t){this.parent=t,this.Ts=null}t("./progressLog.less");var r=t("../hh/NotificationPopup");i.g=e,e.prototype.start=function(t,i){this.Ts=new r(this.parent,null,{Po:!0,Ro:!0,title:t}),this.Ts.To(!1),this.Ts.So(i),this.Ts.show()},e.prototype.stop=function(){this.Ts.To(!0),this.Ts=null},e.prototype.So=function(t){this.Ts.So(t)}},{"../hh/NotificationPopup":55,"./progressLog.less":92}],83:[function(t,i,n){"use strict";function e(t){this.fc=!1,this.cq=t,this.dc=t.dc,this.Us=t.Us,this.Ba=null,this.Vs=null,this.ci=null}t("./reviewUi.less");var r=t("../constants"),o=t("../hh/ContextMenu"),s=t("../hh/Dome"),h=t("../hh/getText"),u=t("../Move"),a=u.jb;i.g=e,e.prototype.Ws=function(){this.fc=!1,this.Ba=null},e.prototype.Xs=function(t,i,n){this.Vs=s.to(),this.Ys=s.io(t,"study","",this.Zs.bind(this)),s.io(i,"back10","<<",this.$s.bind(this,-10)),s.io(i,"back1","<",this.$s.bind(this,-1)),s.io(i,"forw1",">",this.$s.bind(this,1)),s.io(i,"forw10",">>",this.$s.bind(this,10)),this._s=s.jo(n,"pruneBtn",this.at.bind(this))},e.prototype.bt=function(){this.Ys.Jn(this.fc?"...":h("#review")),this.Vs.Zn(["back1","back10","forw1","forw10","pruneBtn"],this.fc)},e.prototype.Zs=function(){if(!this.fc)return this.ct();var t=new o({Ln:!0});t.In(h("#evalScore"),this.dt.bind(this)),t.In(h("#rewindAll"),this.et.bind(this)),t.In(h("#endStudy"),this.ft.bind(this)),t.Kn(this.Ys)},e.prototype.dt=function(){var t=this.cq.gt(r.lb).kn();this.cq.rr.Wr(t[0]),this.ci.Jn(this.cq.ht.xg(t[1]).join("\n"))},e.prototype.at=function(){var t=this.Ba;if(t._f())return!1;for(var i;;){if(i=t.Zf(),!t.hg())return!1;if(this.dc.Rb("half_undo"),t.mg())break}return t.pg(i)?(this.it(),!0):!1},e.prototype.ct=function(){this.fc=!0,this.Ba=this.Us.uc(),this.ci=this.cq.jt,this.cq.bt(),this.it()},e.prototype.ft=function(){this.fc=!1,this.kt(),this.Us.vc(),this.lt(),this.cq.nt(),this.cq.ot(),this.cq.bt()},e.prototype.pt=function(t){return this.dc.Rb(t)?(this.Ba.fg(t),void this.it()):this.cq.statusMessage(this.dc.Sb().join("\n"))},e.prototype.$s=function(t){for(var i,n=this.Ba,e=0;t>e&&(i=n.jg(),i)&&(this.dc.Rb(i),!n.mg());e++);for(e=0;e>t&&n.hg()&&(this.dc.Rb("half_undo"),!n.mg());e--);this.it()},e.prototype.et=function(){this.Ba.ag(),this.dc.Gb(),this.it()},e.prototype.kt=function(){for(this.Ba.ag(),this.dc.Gb();;){var t=this.Ba.kg();if(!t)break;this.dc.Rb(t)}},e.prototype.it=function(){this.cq.nt();var t=this.Ba,i=t.lg();if(this.Vs.ao(["forw1","forw10"],i),this.Vs.ao(["back1","back10"],t.$f()>=0),this._s.Zn(!t._f()),i||this.cq.qt(),this.rt(i),this.cq.inEvalMode){var n=t.Zf();n&&n.length<=3&&this.cq.afterReplay(n)}},e.prototype.lt=function(){this.ci.Xn()},e.prototype.rt=function(t){if(this.ci.Xn(),this.cq.ot(t),t){var i=this.Ba.mg();i&&this.st(t,i)}this.tt()},e.prototype.st=function(t,i){for(var n=0;n<i.length;n++){var e=i[n];if(e){var r=e===t||0===n,o=a(e),h=n?String.fromCharCode(64+n):"*";o?this.cq.rr.Or(h,o[0],o[1],r):h=e,s.io(this.ci,"variationBtn",h,this.pt.bind(this,e))}}},e.prototype.tt=function(){var t=this.Ba.bg();t&&t.Rg&&this.ci.Gn("moveComment").Jn(t.Rg)}},{"../Move":20,"../constants":49,"../hh/ContextMenu":51,"../hh/Dome":52,"../hh/getText":62,"./reviewUi.less":93}],84:[function(t,i,n){"use strict";function e(t){var i=this.Oo=s.Gn(null,"settingDlg dialog");i.Gn("dialogTitle").Jn(u("#settings"));var n=i.Gn("content"),e=a._o();s.lo(n,"inputLbl",u("#colorTheme")+":");var h=s.ro(n,"theme",e,null,a.Yo);h.v("change",function(){var i=this.value();a.$o(i),t.jd("theme",i)});var l=n.Gn("cloudDiv");s.lo(l,"inputLbl",u("#syncMyGames")+":"),s.io(l,"dropboxBtn",u("#setupDropbox"),r);var p=i.Gn("btnDiv"),f=s.io(p,"okBtn",u("#ok"),o);f.cp=this,c.Mn(i,document.body)}function r(){h.gq()}function o(){var t=this.cp;c.Rn(t.Oo)}t("./settingDlg.less");var s=t("../hh/Dome"),h=t("../net/DropboxHelper"),u=t("../hh/getText"),a=t("../hh/Painter"),c=t("../hh/PopupDlg");i.g=e},{"../hh/Dome":52,"../hh/Painter":56,"../hh/PopupDlg":57,"../hh/getText":62,"../net/DropboxHelper":72,"./settingDlg.less":94}],85:[function(t,i,n){"use strict";function e(t){this.ut(),this.Bc=F,this.dc=new l,this.ht=new M(this.dc),this.Us=new p(this.dc),this.Hq=new f(F),this.vt=new C(this),this.rr=null,this.wt=new j(document.body),this.xt=c.fq(F),this.yt=0,this.initDev?this.initDev():this.zt=!0,t&&this.dc.Ab(t)}function r(t,i){return i?t+i:""}t("./ui.less");var o=t("../../config/colors.json"),s=t("../ai"),h=t("./Board"),u=t("../constants"),a=t("../hh/Dome"),c=t("../net/DropboxHelper"),l=t("../GameLogic"),p=t("../GameRecord"),f=t("../GameVault"),d=t("../hh/getText"),g=t("../net/goSites"),v=t("../hh"),y=t("./ImportDlg"),b=t("../main"),m=t("../Move"),w=t("./MoveIndicator"),x=t("./MyGamesDlg"),k=t("./NewGameDlg"),j=t("./ProgressLog"),D=t("../hh/Painter"),S=t("../hh/PopupDlg"),G=t("../hh/LocalPref"),C=t("./ReviewUi"),M=t("../ScoreAnalyser"),B=t("./SettingDlg"),q=t("../net/SyncHelper"),T=t("../hh/TopMenu"),z=m.jb,E=m.ib,I=".neonBlack",O=u.mb,L=u.lb,H=u.An,P=u.zn,A=10,_=5,R=1,F=new G(R);i.g=e,e.prototype.ut=function(){this.Db=9,this.Ps=0,this.Bs=[H,P],this.At=!1},e.Bt=function(){F.Ko(),D.Zo(o,F.ld("theme",I)),v.init(D),document.body.style.height=v.Pn+"px",a.vo(b.appName),d.init("en",function(){(new e).Ct()}),c.eq(F)},e.prototype.Ct=function(){window.addEventListener("beforeunload",this.Dt.bind(this,"unloading")),window.addEventListener("visibilitychange",this.Dt.bind(this,"visibility")),window.setInterval(this.Dt.bind(this,"autosave"),6e4*_),this.yt=F.ld("newGameIndex",1),this.Et();var t=this.Hq.kd();if(t){if(this.Ft(t))return;this.ut()}this.Gt()},e.prototype.Dt=function(t){var i="visibility"!==t?document.hidden:!document.hidden;i||(this.At&&this.Hq.hd(this.Us.mc()),F.jd("newGameIndex",this.yt),F.Mo())},e.prototype.Ht=function(){this.At&&(this.Hq.Lc(this.Us.mc()),this.At=!1)},e.prototype.Et=function(){var t=this.pp=new T({ip:this.It.bind(this),up:b.appName+" V"+b.appVersion});t.sp("settings",d("#settings")),t.qp(),t.sp("myGames",d("#myGames")),t.sp("newGame",d("#newGame")),t.sp("importGame",d("#importGame")),this.Jt=t.sp("syncGame",d("#syncGame")),this.Kt=t.sp("syncMyGames",d("#syncMyGames")),t.qp(),this.Lt=t.In(a.Gn(null,"gameInfo")),this.Mt=t.In(a.Gn()),this.Nt=t.sp("exportGame",d("#exportGame")),t.qp()},e.prototype.Ot=function(){this.pp.mp(d("#appTitle")),this.Jt.Zn(!1),this.Kt.Zn(!!this.xt),this.Lt.Jn(""),this.Mt.Zn(!1),this.Nt.Zn(!1)},e.prototype.It=function(t){switch(t){case"newGame":this.Gt();break;case"myGames":this.Pt();break;case"importGame":this.Qt();break;case"exportGame":this.Rt();break;case"syncGame":this.St();break;case"syncMyGames":this.Tt();break;case"settings":new B(F)}},e.prototype.Ut=function(t){this.rules=t,this.dc.ob(t)},e.prototype.nt=function(){this.rr.refresh(),this.inDevMode&&this.devDisplay()},e.prototype.Vt=function(t,i,n,e){var r=this.Wt="compact"===t,o=this.Xt=a.Gn(i,"gameUi");n&&o.Gn(r?"testTitle":"pageTitle").Jn(n),this.Yt=o.Gn("board"),e&&(this.Zt=o.Gn("boardDesc").Yn(e));var s=o.Gn("underBoard");this.$t(s),this._t(s),this.zt||this.createDevControls();var u=this.dc.pb.Db+2;if(r)this.au=28*u;else{this.bt();var c=v.Pn-A-this.pp.kp()-s.Sn.clientHeight;this.au=Math.min(c,v.On-15)}this.rr=new h,this.rr.Pr(this.bu.bind(this))},e.prototype.cu=function(){this.Ot(),this.Xt&&(a.removeChild(document.body,this.Xt),this.Xt=null,this.rr=null)},e.prototype.Gt=function(){if(!this.du){this.Ht(),this.cu();var t={Db:this.Db,Ps:this.Ps,Bs:this.Bs,rules:this.rules},i=this;this.du=new k(t,function(t){return i.Db=t.Db,i.Ps=t.Ps,i.Bs=[t.Bs[L]?H:P,t.Bs[O]?H:P],i.Ut(t.rules),i.eu(),i.du=null,!0})}},e.prototype.Pt=function(){this.Ht(),this.cu();var t=this;new x(this.Hq,function(i){return i.as?(t.fu(),!0):t.Ft(i.dc)})},
e.prototype.Qt=function(){this.Ht(),this.cu();var t=this;new y(this.Hq,function(i){return i.as?(t.fu(),!0):t.Ft(i.dc)})},e.prototype.fu=function(){this.Xt||this.du||this.Gt()},e.prototype.$t=function(t){var i=this.gu=t.Gn("statusBar");this.hu=new w(i,"lastMove","Last:"),this.jt=i.Gn("message"),this.iu=new w(i,"nextPlayer","Next:")},e.prototype.ot=function(t){var i=this.dc.history;if(i.length){var n=E(i[i.length-1]);this.hu.ds(n,1-this.dc.ub,"#"+i.length+":");var e=z(n);e?this.rr.Nr("CR",e[0],e[1]):this.rr.Nr(null)}else this.hu.ds(null);t=this.dc.xb?null:E(t?t:""),this.iu.ds(t,this.dc.ub),this.rr.Hr(this.dc.ub)},e.prototype.statusMessage=function(t){-1===t.indexOf("\n")&&(t="\n"+t),this.jt.Jn(t)},e.prototype._t=function(t){var i=this.ju=t.Gn("mainControls"),n=i.Gn("leftDiv"),e=i.Gn("mainDiv"),r=i.Gn("rightDiv"),o=this;this.Wt||this.vt.Xs(n,e,r),this.controls=a.to(),a.io(e,"bPass",d("#pass"),function(){o.ku("pass")}),a.io(e,"next","Next",function(){o.lu(1)}),a.io(e,"next10","Next 10",function(){o.lu(10)}),a.io(r,"nextAll","Finish",function(){o.lu()}),a.io(e,"bUndo",d("#undo"),function(){o.mu()}),a.io(e,"accept","Accept",function(){o.nu(!0)}),a.io(e,"refuse","Refuse",function(){o.nu(!1)}),a.io(e,"newg",d("#newGame"),this.Gt.bind(this)),a.io(r,"bResi",d("#resign"),this.ou.bind(this)),this.pu=n.Gn("aiVsAiFlags"),this.qu=a.oo(this.pu,"animated","Animated")},e.prototype.bt=function(){var t=this.vt.fc,i=this.dc.xb,n=this.dc.wb,e=!(i||n||t),r=this.Bs[L]&&this.Bs[O],o=this.Wt;o||this.vt.bt(),this.controls.Zn(["accept","refuse"],n&&!t),this.controls.Zn(["bUndo","bPass","bResi"],e&&!r),this.controls.Zn(["next","next10","nextAll"],e&&r),this.controls.Zn(["aiVsAiFlags"],e&&r&&!o),this.controls.Zn(["newg"],i&&!t&&!o),this.zt||this.toggleDevControls(e,t,r)},e.prototype.Ft=function(t){this.ru();var i=[];return this.Us.oc(t,i)?(this.du&&(this.du=this.du.close()),this.Bs=[void 0,void 0],this.su(),this.tu(),!0):(new S(null,i.join("\n")),this.cu(),!1)},e.prototype.eu=function(){this.ru();var t=this.Us.jc;t.ab("source",b.appName),t.ab("event",this.yt++),this.su(),this.statusMessage("Game started. Your turn..."),this.tu()},e.prototype.ru=function(){this.Ht(),this.vt.Ws(),this.dc.Cb(this.Db,this.Ps,this.tb),this.Us.kc()},e.prototype.uu=function(){this.Us.kc(),this.su()},e.prototype.su=function(){this.vu();var t=this.dc;this.Db=t.pb.Db,this.Ps=t.Pb(),this.rules=t.Ib(),this.zt||this.initDev(),this.Xt||this.Vt("main",document.body);var i=this.Wt?void 0:{background:"wood"};this.rr.create(this.Yt,this.au,t.pb,i),this.wu()},e.prototype.vu=function(){this.xu=[];for(var t=this.Us.jc,i=L;O>=i;i++){var n=i===L?"playerBlack":"playerWhite",e=t.cb(n);if(void 0===this.Bs[i]&&(e&&e.indexOf(s.tn.Jm)>=0?this.Bs[i]=H:this.Bs[i]=P),this.Bs[i]){var r=this.gt(i).constructor;e||t.ab(n,r.Jm+"-"+r.Km)}else e||t.ab(n,"human")}},e.prototype.wu=function(){this.nt(),this.ot(),this.bt()},e.prototype.gt=function(t){var i=this.xu[t];if(i)return i;var n=t===L?s.tg:s.tn;return i=this.xu[t]=new n(this.dc,t)},e.prototype.tu=function(){this.At=!0,this.yu(),this.qt()||this.zu()},e.prototype.yu=function(){var t=this.Us.jc;this.pp.mp(t.cb("playerWhite")+" VS "+t.cb("playerBlack")+" (B)");var i="komi: "+(t.cb("komi")||0);i+=r(", hand: ",this.Ps),i+=r(", rules: ",t.cb("rules")),i+=r(", date: ",t.cb("date")),i+=r(", source: ",t.cb("source")),i+=r(", event: ",t.cb("event")),i+=r(", place: ",t.cb("place")),this.Lt.Jn(i),this.Jt.Zn(!!this.xt),this.Mt.Xn();var n=g.mr(this.Us.jc);if(n){var e=d("#downloadLatest")+" ("+n[1]+")",o=this.Mt.appendChild(a.ko(null,"menuOption downloadLink",e,n[0]));o.v("click",this.Qt.bind(this))}this.Mt.Zn(!0),this.Nt.Zn(!0)},e.prototype.bu=function(t){if("!"===t[0])return!this.zt&&this.onDevKey(t.substr(1));var i=this.vt.fc;return i||this.inEvalMode?(!this.zt&&this.inEvalMode&&this.showDevData(t,null,!0),void(i&&this.vt.pt(t))):void(this.Bs[this.dc.ub]&&this.zt||this.dc.wb||this.dc.xb||this.ku(t))},e.prototype.qt=function(){return this.dc.wb?(this.Au(),!0):this.dc.xb?(this.kj(),this.Bu(),!0):!1},e.prototype.kj=function(){var t=this.ht.wg();this.Cu=t.join("\n")},e.prototype.Au=function(){this.kj(),this.statusMessage(this.Cu),this.bt(),this.rr.Wr(this.ht.zg().Hd)},e.prototype.nu=function(t){var i=this.dc.ub;return this.Bs[i]&&!this.Bs[1-i]&&(i=1-i),this.dc._b(t,i),t?this.Bu():(this.statusMessage("Score in dispute. Continue playing..."),this.bt(),this.nt(),void(this.Bs[L]&&this.Bs[O]||this.zu()))},e.prototype.Bu=function(){this.statusMessage(this.Cu),this.bt()},e.prototype.Du=function(t){var i=this.Eu=this.xu[this.dc.ub];this.Fu=i.Wm;var n=i.dn();return this.dc.Rb(n),t||(this.nt(),this.ot(),this.statusMessage(""),this.inDevMode&&this.showDevData(n,i,!1)),this.qt(),n},e.prototype.ku=function(t){if(!this.qt()){if(!this.dc.Rb(t))return this.statusMessage(this.dc.Sb().join("\n"));this.nt(),this.ot(),this.statusMessage(""),window.setTimeout(function(t){t.zu()},500,this)}},e.prototype.ou=function(){var t=this;S.gp(this.Xt,d("#resignConfirm"),function(){t.dc.Rb("resi"),t.ot(),t.qt()})},e.prototype.mu=function(){var t="undo";return(this.Bs[L]===this.Bs[O]||this.inEvalMode)&&(t="half_undo"),this.dc.Rb(t)?(this.nt(),this.ot(),void this.statusMessage('Performed "'+t+'"')):this.statusMessage(this.dc.Sb().join("\n"))},e.prototype.zu=function(t){this.Bs[this.dc.ub]&&this.Du(t)},e.prototype.lu=function(t){var i=1===t,n=this.qu["do"](),e=!i&&!n;this.zu(e),i||this.dc.wb||window.setTimeout(function(i){i.lu(t-1)},n?100:0,this)},e.prototype.Rt=function(){var t=this.Us.mc();a.xo(t.Na(),t.Va()+".sgf")},e.prototype.St=function(){this.wt.start(d("#syncGame"),d("#syncStart"));var t=this;this.Gu(function(i,n){if(i)return t.wt.stop();var e=t.Us.mc();n.cr(e,function(){t.Ft(e),t.wt.stop()})})},e.prototype.Tt=function(){this.wt.start(d("#syncMyGames"),d("#syncStart"));var t=this;this.Gu(function(i,n){return i?t.wt.stop():void n.dr(function(){t.wt.stop()})})},e.prototype.Gu=function(t){if(this.Hu)return t(null,this.Hu);var i=new q(F,this.xt,this.Hq,this.wt.So.bind(this.wt)),n=this;i.connect(function(e){return e?t(e):(n.Hu=i,void t(null,i))})}},{"../../config/colors.json":6,"../GameLogic":10,"../GameRecord":11,"../GameVault":12,"../Move":20,"../ScoreAnalyser":22,"../ai":48,"../constants":49,"../hh":63,"../hh/Dome":52,"../hh/LocalPref":54,"../hh/Painter":56,"../hh/PopupDlg":57,"../hh/TopMenu":58,"../hh/getText":62,"../main":71,"../net/DropboxHelper":72,"../net/SyncHelper":73,"../net/goSites":74,"./Board":76,"./ImportDlg":77,"./MoveIndicator":78,"./MyGamesDlg":80,"./NewGameDlg":81,"./ProgressLog":82,"./ReviewUi":83,"./SettingDlg":84,"./ui.less":95}],86:[function(t,i,n){"use strict";var e=t("../ai"),r=[{name:"Chuckie",xn:t("../ai/chuckie")}];e.wn(r);var o=t("./Ui");o.Bt()},{"../ai":48,"../ai/chuckie":47,"./Ui":85}],87:[function(t,i,n){var e=".importDialog {\n  margin: 50px;\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.importDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.importDialog .mainDiv .groupFrame {\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 7px;\n}\n.importDialog .mainDiv .fileInputBtn {\n  margin: 35px 15px;\n}\n.importDialog .mainDiv .moves {\n  margin: 35px 0;\n}\n.importDialog .mainDiv .movesInput {\n  width: 50%;\n}\n.importDialog .mainDiv .loadMovesInfo {\n  font-size: 50%;\n  font-style: italic;\n  margin-left: 203px;\n}\n.importDialog .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.importDialog .btnDiv .loadBtn,\n.importDialog .btnDiv .cancelBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  width: 240px;\n  font-size: 48px;\n}\n";t("lessify")(e),i.g=e},{lessify:121}],88:[function(t,i,n){var e=".moveIndicator {\n  height: 80px;\n  text-align: center;\n}\n.moveIndicator.black .icon {\n  background-color: #000;\n}\n.moveIndicator.black .text {\n  color: #fff;\n  text-shadow: #000 0 0 3px;\n}\n.moveIndicator.white .icon {\n  background-color: #fff;\n}\n.moveIndicator.white .text {\n  color: #000;\n  text-shadow: #fff 0 0 3px;\n}\n.moveIndicator .label {\n  font-size: 30px;\n}\n.moveIndicator .icon {\n  display: inline-block;\n  position: relative;\n  width: 68px;\n  height: 68px;\n  border: 1px solid rgba(127, 127, 127, 0.5);\n  border-radius: 50px;\n}\n.moveIndicator .icon .text {\n  position: relative;\n  width: 84px;\n  text-align: center;\n  left: -8px;\n  top: 12px;\n  font-size: 35px;\n  font-weight: bold;\n}\n";t("lessify")(e),i.g=e},{lessify:121}],89:[function(t,i,n){var e=".myArchivedGamesDialog {\n  margin: 0 65px;\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.myArchivedGamesDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.myArchivedGamesDialog .delGameBtn,\n.myArchivedGamesDialog .restoreGameBtn {\n  vertical-align: top;\n  margin: 20px 12px 20px 0;\n  width: 220px;\n  height: 120px;\n  line-height: 120px;\n}\n.myArchivedGamesDialog .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.myArchivedGamesDialog .btnDiv .closeBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  width: 240px;\n  font-size: 48px;\n}\n";t("lessify")(e),i.g=e},{lessify:121}],90:[function(t,i,n){var e=".myGamesDialog {\n  margin: 0 40px;\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.myGamesDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.myGamesDialog .mainDiv .recentGamesDropDwn {\n  max-width: calc(100% - 230px);\n  font-size: 48px;\n  margin: 35px 0;\n}\n.myGamesDialog .delGameBtn,\n.myGamesDialog .archiveGameBtn,\n.myGamesDialog .showArchiveBtn {\n  vertical-align: top;\n  margin: 20px 12px 20px 0;\n  width: 220px;\n  height: 120px;\n  line-height: 120px;\n}\n.myGamesDialog .showArchiveBtn {\n  line-height: initial;\n  padding: 25px;\n}\n.myGamesDialog .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.myGamesDialog .btnDiv .loadBtn,\n.myGamesDialog .btnDiv .cancelBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  width: 240px;\n  font-size: 48px;\n}\n";t("lessify")(e),i.g=e},{lessify:121}],91:[function(t,i,n){var e='.newGameDialog {\n  margin: 50px;\n}\n.newGameDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.newGameDialog .mainDiv .centeredDiv {\n  margin-top: 40px;\n  text-align: center;\n}\n.newGameDialog .boardDiv .sizeBox {\n  display: inline-block;\n  position: relative;\n  width: 240px;\n  max-width: 33%;\n  text-align: center;\n  margin: 10px 18px 0 20px;\n}\n.newGameDialog .playerBtn {\n  position: relative;\n  vertical-align: top;\n  top: 162px;\n  left: 2px;\n  width: 200px;\n  max-width: 26%;\n  height: 200px;\n}\n.newGameDialog .playerBtn .playerBtnIcon {\n  background-image: url("assets/humanBlue.png");\n  -webkit-filter: brightness(0);\n  background-size: 80%;\n}\n.newGameDialog .playerBtn.robot .playerBtnIcon {\n  background-size: contain;\n  background-image: url("assets/robotBlue.png");\n}\n.newGameDialog .playerBtn.white .playerBtnIcon {\n  -webkit-filter: invert(1) grayscale(1);\n}\n.newGameDialog .sizeBtn {\n  position: relative;\n  width: 170px;\n  max-width: 88%;\n  height: 120px;\n  margin: 0 0 10px;\n}\n.newGameDialog .sizeBtn .sizeBtnIcon {\n  background-image: url("assets/upBlue.png");\n  background-size: 80%;\n  -webkit-filter: brightness(0);\n}\n.newGameDialog .sizeBtn.down {\n  margin-top: 4px;\n}\n.newGameDialog .sizeBtn.down .sizeBtnIcon {\n  background-image: url("assets/downBlue.png");\n}\n.newGameDialog .boardImgFrame {\n  display: inline-block;\n  position: relative;\n  width: 100%;\n  height: 240px;\n  background-color: #d1cac1;\n  border-radius: 5px;\n  box-shadow: black 3px 3px 6px;\n}\n.newGameDialog .boardImgFrame .boardImg {\n  width: 100%;\n  height: 100%;\n  background: url("assets/19x19.png") 50% no-repeat;\n}\n.newGameDialog .boardImgFrame .curSize {\n  position: absolute;\n  top: -4px;\n  width: 100%;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  text-align: center;\n  color: white;\n  text-shadow: black 3px 3px 5px;\n}\n.newGameDialog .advancedBtn {\n  width: 248px;\n  height: 100px;\n  line-height: 92px;\n  margin: 40px 10px 25px;\n  background-color: #faf7f5;\n  border: 1px solid #a7a7a7;\n}\n.newGameDialog .advancedDiv .rules {\n  display: inline-block;\n  margin-left: 87px;\n}\n.newGameDialog .advancedDiv .defAiInfo {\n  font-size: 50%;\n  font-style: italic;\n  width: 400px;\n  display: inline-block;\n}\n.newGameDialog .startBtn {\n  margin: 16px 0 10px -5px;\n  position: relative;\n  left: calc(100% - 240px);\n  width: 240px;\n  font-size: 48px;\n}\n';t("lessify")(e),i.g=e},{lessify:121}],92:[function(t,i,n){var e=".notifPopup {\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  margin: 0 auto;\n  width: 1020px;\n  max-width: 90%;\n  border: 1px solid rgba(255, 255, 255, 0.33);\n}\n.notifPopup .content {\n  height: 300px;\n  overflow-y: scroll;\n  font-size: 20px;\n}\n";t("lessify")(e),i.g=e},{lessify:121}],93:[function(t,i,n){var e='.gameUi .statusBar .variationBtn {\n  margin: 1px;\n  width: 120px;\n  height: 112px;\n  line-height: 112px;\n}\n.gameUi .statusBar .moveComment {\n  margin-top: 2px;\n  background-color: white;\n  color: black;\n  border-radius: 5px;\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  text-align: left;\n  font-size: 22px;\n  font-weight: normal;\n  padding: 2px 4px;\n}\n.gameUi .mainControls .btn.back10,\n.gameUi .mainControls .btn.back1,\n.gameUi .mainControls .btn.forw1,\n.gameUi .mainControls .btn.forw10 {\n  max-width: 22%;\n}\n.gameUi .mainControls .btn.pruneBtn {\n  max-width: 120px;\n}\n.gameUi .mainControls .btn.pruneBtn .btnIcon {\n  background-image: url("assets/pruning.png");\n  -webkit-filter: sepia(0.9) brightness(3);\n  background-size: auto 87%;\n}\n';t("lessify")(e),i.g=e},{lessify:121}],94:[function(t,i,n){var e=".settingDlg {\n  z-index: 2000;\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  margin: 0 20%;\n  width: 60%;\n}\n.settingDlg .content {\n  padding: 20px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.settingDlg .content .cloudDiv {\n  margin-top: 20px;\n}\n.settingDlg .content .dropboxBtn {\n  display: block;\n  margin: 10px;\n  width: 300px;\n}\n.settingDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: 0 0 -10px 0;\n}\n.settingDlg .btnDiv .okBtn {\n  float: right;\n}\n";t("lessify")(e),i.g=e},{lessify:121}],95:[function(t,i,n){var e='body {\n  background-color: #865e50;\n  font-family: "Arial";\n  margin: 0px;\n  height: 2048px;\n}\ndiv {\n  box-sizing: border-box;\n}\n::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 7px;\n  height: 7px;\n}\n::-webkit-scrollbar-track {\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.2);\n  -webkit-border-radius: 10px;\n  border-radius: 7px;\n  margin: 1px;\n}\n::-webkit-scrollbar-thumb {\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, 0.5);\n}\n.downloadLink {\n  text-decoration: none;\n  color: white;\n}\n.pageTitle {\n  margin-top: 7px;\n  margin-bottom: 7px;\n  font-size: 40px;\n  font-weight: bold;\n}\n.subTitle {\n  font-size: 30px;\n  margin-top: 0.5em;\n  margin-bottom: 5px;\n}\n.logBox {\n  font-size: 28px;\n  font-family: "Arial";\n  background-color: white;\n  border: solid #cca 1px;\n  border-radius: 8px;\n  padding: 5px;\n  overflow-y: auto;\n  word-wrap: break-word;\n}\n.inputLbl {\n  display: inline-block;\n  margin: 0 5px 0 10px;\n  font-size: 28px;\n}\n.inputBox {\n  margin: 17px 0 17px 0;\n  min-height: 1cm;\n  text-align: left;\n  font-size: 42px;\n  color: inherit;\n}\n.btn {\n  display: inline-block;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  box-sizing: border-box;\n  padding: 0 2px;\n  border-radius: 13px;\n  width: 160px;\n  height: 120px;\n  line-height: 120px;\n  text-align: center;\n  font-size: 28px;\n  border: 1px solid #7a6c5c;\n  background-color: #af9e8e;\n  color: #000000;\n}\n.btn.toggled {\n  background-color: #AD4343;\n}\n.btn.disabled {\n  color: #000;\n  border-style: hidden;\n  opacity: 0.6;\n}\n.btn.pressed {\n  border-style: outset;\n}\n.btnIcon {\n  width: 100%;\n  height: 100%;\n  background-position: 50%;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n.chkBoxDiv {\n  display: inline-block;\n  margin-right: 10px;\n}\n.chkBox {\n  margin: 5px 3px 14px 2px;\n  width: 29px;\n  height: 1.5em;\n}\n.chkLbl {\n  font-size: 28px;\n}\n.dropDwn {\n  font-size: 42px;\n  margin: 17px 13px 17px 13px;\n  color: inherit;\n}\n.radioBtn {\n  margin: 17px 0px 17px 13px;\n  width: 29px;\n  height: 1.5em;\n}\n.radioLbl {\n  margin-right: 13px;\n}\n.dialog {\n  padding: 10px;\n  background-color: #ffffee;\n  color: #000000;\n  border: solid #cca 1px;\n  border-radius: 10px;\n  font-family: Arial;\n  font-size: 42px;\n}\n.dialogTitle {\n  font-size: 50px;\n  background-color: #ffebce;\n  color: #000000;\n  border: solid 1px rgba(195, 50, 50, 0.2);\n  border-radius: 10px;\n  margin: -6px;\n  margin-bottom: 15px;\n  padding: 10px 0px 10px 12px;\n}\nbody .contextMenu {\n  width: 500px;\n  border-radius: 9px;\n  border: 1px solid #58636d;\n  background-color: #3b3d47;\n}\nbody .contextMenu .menuItem {\n  font-size: 30px;\n  padding: 50px;\n  background-color: #000;\n  border: 1px solid #505050;\n  border-radius: 9px;\n}\n.gameList {\n  position: relative;\n  border: 1px solid #a9a9a9;\n  border-radius: 6px;\n  max-height: 450px;\n  min-height: 160px;\n  overflow-y: auto;\n  overflow-x: hidden;\n  background-color: #fff;\n}\n.gameList .oneGame {\n  padding: 5px;\n}\n.gameList .oneGame.selected {\n  background-color: #b7b29e;\n  border-radius: 5px;\n}\n.gameList .emptyMsg {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  position: absolute;\n  width: 100%;\n  text-align: center;\n  font-style: italic;\n  opacity: 0.7;\n}\n.gameUi {\n  padding: 2px;\n}\n.gameUi .board {\n  margin: 5px 0;\n  background-color: #402f23;\n  border-radius: 7px;\n}\n.gameUi .board .wgo-board {\n  margin: 0 auto;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  /* disables grey shade on long-tap for Safari */\n  /* Below avoid issues when tap-hold on Android */\n  -webkit-user-select: none;\n  -webkit-touch-callout: none;\n}\n.gameUi .boardDesc {\n  margin-top: 3px;\n  font-weight: bold;\n  font-style: italic;\n}\n.gameUi .btn {\n  width: 200px;\n}\n.gameUi .underBoard {\n  padding-bottom: 5px;\n}\n.gameUi .statusBar {\n  position: relative;\n  height: 130px;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: row;\n  flex-direction: row;\n  background-color: #dfc2ac;\n  border: rgba(0, 0, 0, 0.7) 1px solid;\n  border-radius: 7px;\n}\n.gameUi .statusBar .lastMove {\n  margin: 0 15px;\n}\n.gameUi .statusBar .message {\n  -webkit-flex: 1;\n  flex: 1;\n  white-space: pre-wrap;\n  overflow-y: auto;\n  font-size: 26px;\n  font-weight: bold;\n  text-align: center;\n  padding-top: 5px;\n}\n.gameUi .statusBar .nextPlayer {\n  margin: 0 8px 0 15px;\n}\n.gameUi .mainControls {\n  margin-top: 10px;\n}\n.gameUi .mainControls .leftDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 20%;\n  padding-left: 10px;\n  text-align: left;\n}\n.gameUi .mainControls .leftDiv .animatedDiv {\n  margin: 16px;\n}\n.gameUi .mainControls .mainDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 60%;\n  text-align: center;\n}\n.gameUi .mainControls .mainDiv .btn {\n  margin: 0 3px;\n  height: 200px;\n  line-height: 200px;\n  max-width: 44%;\n}\n.gameUi .mainControls .rightDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 20%;\n  text-align: right;\n}\n.gameUi .mainControls .leftDiv .btn,\n.gameUi .mainControls .rightDiv .btn {\n  background-color: #5c4137;\n  color: #faebd7;\n  max-width: 100%;\n}\n.gameUi .mainControls .leftDiv .btn.toggled,\n.gameUi .mainControls .rightDiv .btn.toggled {\n  background-color: #AD4343;\n}\n.gameUi .mainControls .leftDiv .btn.resi,\n.gameUi .mainControls .rightDiv .btn.resi {\n  height: 100px;\n  line-height: 100px;\n  width: 150px;\n}\n.gameInfo {\n  padding: 15px 20px 15px 100px;\n  font-size: 32px;\n  background-color: #282a2b;\n}\n';t("lessify")(e),i.g=e},{lessify:121}],96:[function(t,i,n){!function(t,e){"object"==typeof n&&"object"==typeof i?i.g=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof n?n.Iu=e():t.Iu=e()}(this,function(){return function(t){function i(e){if(n[e])return n[e].g;var r=n[e]={g:{},id:e,loaded:!1};return t[e].call(r.g,r,r.g,i),r.loaded=!0,r.g}var n={};return i.Mh=t,i.c=n,i.Ju="",i(0)}([function(t,i,n){var e=n(14);t.g=e},function(t,i,n){var e;(function(t,r,o){(function(){"use strict";function s(t){return"function"==typeof t||"object"==typeof t&&null!==t}function h(t){return"function"==typeof t}function u(t){Y=t}function a(t){tt=t}function c(){return function(){t.m(g)}}function l(){return function(){X(g)}}function p(){var t=0,i=new et(g),n=document.createTextNode("");return i.observe(n,{Ku:!0}),function(){n.data=t=++t%2}}function f(){var t=new MessageChannel;return t.port1.onmessage=g,function(){t.port2.postMessage(0)}}function d(){return function(){setTimeout(g,1)}}function g(){for(var t=0;Q>t;t+=2){var i=st[t],n=st[t+1];i(n),st[t]=void 0,st[t+1]=void 0}Q=0}function v(){try{var t=n(20);return X=t.runOnLoop||t.runOnContext,l()}catch(i){return d()}}function y(t,i){var n=this,e=new this.constructor(m);void 0===e[at]&&P(e);var r=n.Lu;if(r){var o=arguments[r-1];tt(function(){O(r,e,o,n.Mu)})}else T(n,e,t,i);return e}function b(t){var i=this;if(t&&"object"==typeof t&&t.constructor===i)return t;var n=new i(m);return C(n,t),n}function m(){}function w(){return new TypeError("You cannot resolve a promise with itself")}function x(){return new TypeError("A promises callback cannot return that same promise.")}function k(t){try{return t.then}catch(i){return ft.error=i,ft}}function j(t,i,n,e){try{t.call(i,n,e)}catch(r){return r}}function D(t,i,n){tt(function(t){var e=!1,r=j(n,i,function(n){e||(e=!0,i!==n?C(t,n):B(t,n))},function(i){e||(e=!0,q(t,i))},"Settle: "+(t._label||" unknown promise"));!e&&r&&(e=!0,q(t,r))},t)}function S(t,i){i.Lu===lt?B(t,i.Mu):i.Lu===pt?q(t,i.Mu):T(i,void 0,function(i){C(t,i)},function(i){q(t,i)})}function G(t,i,n){i.constructor===t.constructor&&n===ht&&constructor.resolve===ut?S(t,i):n===ft?q(t,ft.error):void 0===n?B(t,i):h(n)?D(t,i,n):B(t,i)}function C(t,i){t===i?q(t,w()):s(i)?G(t,i,k(i)):B(t,i)}function M(t){t.Nu&&t.Nu(t.Mu),z(t)}function B(t,i){t.Lu===ct&&(t.Mu=i,t.Lu=lt,0!==t.Ou.length&&tt(z,t))}function q(t,i){t.Lu===ct&&(t.Lu=pt,t.Mu=i,tt(M,t))}function T(t,i,n,e){var r=t.Ou,o=r.length;t.Nu=null,r[o]=i,r[o+lt]=n,r[o+pt]=e,0===o&&t.Lu&&tt(z,t)}function z(t){var i=t.Ou,n=t.Lu;if(0!==i.length){for(var e,r,o=t.Mu,s=0;s<i.length;s+=3)e=i[s],r=i[s+n],e?O(n,e,r,o):r(o);t.Ou.length=0}}function E(){this.error=null}function I(t,i){try{return t(i)}catch(n){return dt.error=n,dt}}function O(t,i,n,e){var r,o,s,u,a=h(n);if(a){if(r=I(n,e),r===dt?(u=!0,o=r.error,r=null):s=!0,i===r)return void q(i,x())}else r=e,s=!0;i.Lu!==ct||(a&&s?C(i,r):u?q(i,o):t===lt?B(i,r):t===pt&&q(i,r))}function L(t,i){try{i(function(i){C(t,i)},function(i){q(t,i)})}catch(n){q(t,n)}}function H(){return gt++}function P(t){t[at]=gt++,t.Lu=void 0,t.Mu=void 0,t.Ou=[]}function A(t){return new wt(this,t).Pu}function _(t){var i=this;return new i($(t)?function(n,e){for(var r=t.length,o=0;r>o;o++)i.resolve(t[o]).then(n,e)}:function(t,i){i(new TypeError("You must pass an array to race."))})}function R(t){var i=this,n=new i(m);return q(n,t),n}function F(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Z(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function U(t){this[at]=H(),this.Mu=this.Lu=void 0,this.Ou=[],m!==t&&("function"!=typeof t&&F(),this instanceof U?L(this,t):Z())}function W(t,i){this.Qu=t,this.Pu=new t(m),this.Pu[at]||P(this.Pu),$(i)?(this.Ru=i,this.length=i.length,this.Su=i.length,this.Mu=new Array(this.length),0===this.length?B(this.Pu,this.Mu):(this.length=this.length||0,this.Tu(),0===this.Su&&B(this.Pu,this.Mu))):q(this.Pu,N())}function N(){return new Error("Array Methods must be provided an Array")}function J(){var t;if("undefined"!=typeof r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(i){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;n&&"[object Promise]"===Object.prototype.toString.call(n.resolve())&&!n.cast||(t.Promise=mt)}var V;V=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var X,Y,K,$=V,Q=0,tt=function(t,i){st[Q]=t,st[Q+1]=i,Q+=2,2===Q&&(Y?Y(g):K())},it="undefined"!=typeof window?window:void 0,nt=it||{},et=nt.MutationObserver||nt.WebKitMutationObserver,rt="undefined"==typeof self&&"undefined"!=typeof t&&"[object process]"==={}.toString.call(t),ot="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,st=new Array(1e3);K=rt?c():et?p():ot?f():void 0===it?v():d();var ht=y,ut=b,at=Math.random().toString(36).substring(16),ct=void 0,lt=1,pt=2,ft=new E,dt=new E,gt=0,vt=A,yt=_,bt=R,mt=U;U.all=vt,U.race=yt,U.resolve=ut,U.reject=bt,U.Uu=u,U.Vu=a,U.Wu=tt,U.prototype={constructor:U,then:ht,"catch":function(t){return this.then(null,t)}};var wt=W;W.prototype.Tu=function(){for(var t=this.length,i=this.Ru,n=0;this.Lu===ct&&t>n;n++)this.Xu(i[n],n)},W.prototype.Xu=function(t,i){var n=this.Qu,e=n.resolve;if(e===ut){var r=k(t);if(r===ht&&t.Lu!==ct)this.Yu(t.Lu,i,t.Mu);else if("function"!=typeof r)this.Su--,this.Mu[i]=t;else if(n===mt){var o=new n(m);G(o,t,r),this.Zu(o,i)}else this.Zu(new n(function(i){i(t)}),i)}else this.Zu(e(t),i)},W.prototype.Yu=function(t,i,n){var e=this.Pu;e.Lu===ct&&(this.Su--,t===pt?q(e,n):this.Mu[i]=n),0===this.Su&&B(e,this.Mu)},W.prototype.Zu=function(t,i){var n=this;T(t,void 0,function(t){n.Yu(lt,i,t)},function(t){n.Yu(pt,i,t)})};var xt=J,kt={Promise:mt,$u:xt};n(11).amd?(e=function(){return kt}.call(i,n,i,o),!(void 0!==e&&(o.g=e))):"undefined"!=typeof o&&o.g?o.g=kt:"undefined"!=typeof this&&(this._u=kt),xt()}).call(this)}).call(i,n(7),function(){return this}(),n(12)(t))},function(t,i,n){function e(){}function r(t){var i={}.toString.call(t);switch(i){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(t){if(!m(t))return t;var i=[];for(var n in t)null!=t[n]&&s(i,n,t[n]);return i.join("&")}function s(t,i,n){return Array.isArray(n)?n.forEach(function(n){s(t,i,n)}):void t.push(encodeURIComponent(i)+"="+encodeURIComponent(n))}function h(t){for(var i,n,e={},r=t.split("&"),o=0,s=r.length;s>o;++o)n=r[o],i=n.split("="),e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]);return e}function u(t){var i,n,e,r,o=t.split(/\r?\n/),s={};o.pop();for(var h=0,u=o.length;u>h;++h)n=o[h],i=n.indexOf(":"),e=n.slice(0,i).toLowerCase(),r=x(n.slice(i+1)),s[e]=r;return s}function a(t){return/[\/+]json\b/.test(t)}function c(t){return t.split(/ *; */).shift()}function l(t){return y(t.split(/ *; */),function(t,i){var n=i.split(/ *= */),e=n.shift(),r=n.shift();return e&&r&&(t[e]=r),t},{})}function p(t,i){i=i||{},this.av=t,this.bv=this.av.bv,this.text="HEAD"!=this.av.method&&(""===this.bv.responseType||"text"===this.bv.responseType)||"undefined"==typeof this.bv.responseType?this.bv.responseText:null,this.statusText=this.av.bv.statusText,this.cv(this.bv.status),this.dv=this.headers=u(this.bv.getAllResponseHeaders()),this.dv["content-type"]=this.bv.getResponseHeader("content-type"),this.ev(this.dv),this.body="HEAD"!=this.av.method?this.fv(this.text?this.text:this.bv.response):null}function f(t,i){var n=this;this.gv=this.gv||[],this.method=t,this.url=i,this.dv={},this.hv={},this.v("end",function(){var t=null,i=null;try{i=new p(n)}catch(e){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.iv=e,t.jv=n.bv&&n.bv.responseText?n.bv.responseText:null,t.kv=n.bv&&n.bv.status?n.bv.status:null,n.lv(t)}if(n.F("response",i),t)return n.lv(t,i);if(i.status>=200&&i.status<300)return n.lv(t,i);var r=new Error(i.statusText||"Unsuccessful HTTP response");r.iv=t,r.response=i,r.status=i.status,n.lv(r,i)})}function d(t,i){var n=w("DELETE",t);return i&&n.end(i),n}var g,v=n(6),y=n(8),b=n(9),m=n(4);g="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var w=t.g=n(10).bind(null,f);w.mv=function(){if(!(!g.XMLHttpRequest||g.location&&"file:"==g.location.protocol&&g.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1};var x="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};w.nv=o,w.ov=h,w.types={co:"text/html",json:"application/json",pv:"application/xml",qv:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},w.Fa={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify},w.parse={"application/x-www-form-urlencoded":h,"application/json":JSON.parse},p.prototype.get=function(t){return this.dv[t.toLowerCase()]},p.prototype.ev=function(t){var i=this.dv["content-type"]||"";this.type=c(i);var n=l(i);for(var e in n)this[e]=n[e]},p.prototype.fv=function(t){var i=w.parse[this.type];return!i&&a(this.type)&&(i=w.parse["application/json"]),i&&t&&(t.length||t instanceof Object)?i(t):null},p.prototype.cv=function(t){1223===t&&(t=204);var i=t/100|0;this.status=this.kv=t,this.rv=i,this.info=1==i,this.ok=2==i,this.sv=4==i,this.tv=5==i,this.error=(4==i||5==i)&&this.uv(),this.vv=202==t,this.wv=204==t,this.xv=400==t,this.yv=401==t,this.zv=406==t,this.Av=404==t,this.Bv=403==t},p.prototype.uv=function(){var t=this.av,i=t.method,n=t.url,e="cannot "+i+" "+n+" ("+this.status+")",r=new Error(e);return r.status=this.status,r.method=i,r.url=n,r},w.Response=p,v(f.prototype);for(var k in b)f.prototype[k]=b[k];f.prototype.abort=function(){return this.Cv?void 0:(this.Cv=!0,this.bv&&this.bv.abort(),this.clearTimeout(),this.F("abort"),this)},f.prototype.type=function(t){return this.set("Content-Type",w.types[t]||t),this},f.prototype.responseType=function(t){return this.Dv=t,this},f.prototype.accept=function(t){return this.set("Accept",w.types[t]||t),this},f.prototype.Ev=function(t,i,n){switch(n||(n={type:"basic"}),n.type){case"basic":var e=btoa(t+":"+i);this.set("Authorization","Basic "+e);break;case"auto":this.username=t,this.password=i}return this},f.prototype.Fv=function(t){return"string"!=typeof t&&(t=o(t)),t&&this.gv.push(t),this},f.prototype.Gv=function(t,i,n){return this.Hv().append(t,i,n||i.name),this},f.prototype.Hv=function(){return this.Iv||(this.Iv=new g.FormData),this.Iv},f.prototype.send=function(t){var i=m(t),n=this.hv["content-type"];if(i&&m(this.Jv))for(var e in t)this.Jv[e]=t[e];else"string"==typeof t?(n||this.type("form"),n=this.hv["content-type"],"application/x-www-form-urlencoded"==n?this.Jv=this.Jv?this.Jv+"&"+t:t:this.Jv=(this.Jv||"")+t):this.Jv=t;return!i||r(t)?this:(n||this.type("json"),
this)},p.prototype.parse=function(t){return g.console&&console.warn("Client-side parse() method has been renamed to serialize(). This method is not compatible with superagent v2.0"),this.Fa(t),this},p.prototype.Fa=function(t){return this.Kv=t,this},f.prototype.lv=function(t,i){var n=this.Lv;this.clearTimeout(),n(t,i)},f.prototype.Mv=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.Nv=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.lv(t)},f.prototype.Ov=function(){var t=this.Pv,i=new Error("timeout of "+t+"ms exceeded");i.timeout=t,this.lv(i)},f.prototype.withCredentials=function(){return this.Qv=!0,this},f.prototype.end=function(t){var i=this,n=this.bv=w.mv(),o=this.gv.join("&"),s=this.Pv,h=this.Iv||this.Jv;this.Lv=t||e,n.onreadystatechange=function(){if(4==n.readyState){var t;try{t=n.status}catch(e){t=0}if(0==t){if(i.Rv)return i.Ov();if(i.Cv)return;return i.Mv()}i.F("end")}};var u=function(t){t.total>0&&(t.Sv=t.loaded/t.total*100),t.direction="download",i.F("progress",t)};this.Tv("progress")&&(n.onprogress=u);try{n.upload&&this.Tv("progress")&&(n.upload.onprogress=u)}catch(c){}if(s&&!this.Uv&&(this.Uv=setTimeout(function(){i.Rv=!0,i.abort()},s)),o&&(o=w.nv(o),this.url+=~this.url.indexOf("?")?"&"+o:"?"+o),this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0),this.Qv&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof h&&!r(h)){var l=this.hv["content-type"],p=this.Kv||w.Fa[l?l.split(";")[0]:""];!p&&a(l)&&(p=w.Fa["application/json"]),p&&(h=p(h))}for(var f in this.dv)null!=this.dv[f]&&n.setRequestHeader(f,this.dv[f]);return this.Dv&&(n.responseType=this.Dv),this.F("request",this),n.send("undefined"!=typeof h?h:null),this},w.Request=f,w.get=function(t,i,n){var e=w("GET",t);return"function"==typeof i&&(n=i,i=null),i&&e.Fv(i),n&&e.end(n),e},w.head=function(t,i,n){var e=w("HEAD",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e},w.Vv=d,w["delete"]=d,w.Wv=function(t,i,n){var e=w("PATCH",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e},w.Xv=function(t,i,n){var e=w("POST",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e},w.put=function(t,i,n){var e=w("PUT",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e}},function(t,i){function n(t){return"https://"+t+".dropboxapi.com/2/"}t.g=n},function(t,i){function n(t){return null!=t&&"object"==typeof t}t.g=n},function(t,i,n){var e,r=n(16);n(15),e=function(t){t=t||{},this.mq=t.mq,this.hq=t.hq,this.Yv=t.Yv},e.prototype.Zv=function(t){this.mq=t},e.prototype.$v=function(){return this.mq},e.prototype._v=function(t){this.hq=t},e.prototype.aw=function(){return this.hq},e.prototype.iq=function(t,i){var n,e="https://www.dropbox.com/oauth2/authorize",r=this.aw();if(!r)throw new Error("A client id is required. You can set the client id using .setClientId().");if(!t)throw new Error("A redirect uri is required.");return n=e+"?response_type=token&client_id="+r,t&&(n=n+"&redirect_uri="+t),i&&(n=n+"&state="+i),n},e.prototype.bw=function(t,i,n,e,o){var s=null;switch(o){case r.cw:s=this.dw();break;case r.ew:s=this.fw();break;case r.gw:s=this.hw();break;default:throw new Error("Invalid request style: "+o)}return s(t,i,n,e,this.$v(),this.Yv)},e.prototype.iw=function(t){e.prototype.jw=t},e.prototype.dw=function(){return void 0===e.prototype.jw&&(e.prototype.jw=n(18)),e.prototype.jw},e.prototype.kw=function(t){e.prototype.lw=t},e.prototype.fw=function(){return void 0===e.prototype.lw&&(e.prototype.lw=n(13)),e.prototype.lw},e.prototype.mw=function(t){e.prototype.nw=t},e.prototype.hw=function(){return void 0===e.prototype.nw&&(e.prototype.nw=n(19)),e.prototype.nw},t.g=e},function(t,i,n){function e(t){return t?r(t):void 0}function r(t){for(var i in e.prototype)t[i]=e.prototype[i];return t}t.g=e,e.prototype.v=e.prototype.addEventListener=function(t,i){return this.ow=this.ow||{},(this.ow["$"+t]=this.ow["$"+t]||[]).push(i),this},e.prototype.A=function(t,i){function n(){this.C(t,n),i.apply(this,arguments)}return n.pw=i,this.v(t,n),this},e.prototype.C=e.prototype.removeListener=e.prototype.D=e.prototype.removeEventListener=function(t,i){if(this.ow=this.ow||{},0==arguments.length)return this.ow={},this;var n=this.ow["$"+t];if(!n)return this;if(1==arguments.length)return delete this.ow["$"+t],this;for(var e,r=0;r<n.length;r++)if(e=n[r],e===i||e.pw===i){n.splice(r,1);break}return this},e.prototype.F=function(t){this.ow=this.ow||{};var i=[].slice.call(arguments,1),n=this.ow["$"+t];if(n){n=n.slice(0);for(var e=0,r=n.length;r>e;++e)n[e].apply(this,i)}return this},e.prototype.qw=function(t){return this.ow=this.ow||{},this.ow["$"+t]||[]},e.prototype.Tv=function(t){return!!this.qw(t).length}},function(t,i){function n(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function r(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(i){try{return c.call(null,t,0)}catch(i){return c.call(this,t,0)}}}function o(t){if(l===clearTimeout)return clearTimeout(t);if((l===e||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(i){try{return l.call(null,t)}catch(i){return l.call(this,t)}}}function s(){g&&f&&(g=!1,f.length?d=f.concat(d):v=-1,d.length&&h())}function h(){if(!g){var t=r(s);g=!0;for(var i=d.length;i;){for(f=d,d=[];++v<i;)f&&f[v].l();v=-1,i=d.length}f=null,g=!1,o(t)}}function u(t,i){this.o=t,this.p=i}function a(){}var c,l,p=t.g={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{l="function"==typeof clearTimeout?clearTimeout:e}catch(t){l=e}}();var f,d=[],g=!1,v=-1;p.m=function(t){var i=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)i[n-1]=arguments[n];d.push(new u(t,i)),1!==d.length||g||r(h)},u.prototype.l=function(){this.o.apply(null,this.p)},p.title="browser",p.q=!0,p.s={},p.t=[],p.version="",p.u={},p.v=a,p.addListener=a,p.A=a,p.C=a,p.removeListener=a,p.D=a,p.F=a,p.G=function(t){throw new Error("process.binding is not supported")},p.H=function(){return"/"},p.I=function(t){throw new Error("process.chdir is not supported")},p.J=function(){return 0}},function(t,i){t.g=function(t,i,n){for(var e=0,r=t.length,o=3==arguments.length?n:t[e++];r>e;)o=i.call(null,o,t[e],++e,t);return o}},function(t,i,n){var e=n(4);i.clearTimeout=function(){return this.Pv=0,clearTimeout(this.Uv),this},i.parse=function(t){return this.Kv=t,this},i.timeout=function(t){return this.Pv=t,this},i.then=function(t,i){return this.end(function(n,e){n?i(n):t(e)})},i.rw=function(t){return t(this),this},i.get=function(t){return this.hv[t.toLowerCase()]},i.sw=i.get,i.set=function(t,i){if(e(t)){for(var n in t)this.set(n,t[n]);return this}return this.hv[t.toLowerCase()]=i,this.dv[t]=i,this},i.tw=function(t){return delete this.hv[t.toLowerCase()],delete this.dv[t],this},i.uw=function(t,i){return this.Hv().append(t,i),this}},function(t,i){function n(t,i,n){return"function"==typeof n?new t("GET",i).end(n):2==arguments.length?new t("GET",i):new t(i,n)}t.g=n},function(t,i){t.g=function(){throw new Error("define cannot be used indirect")}},function(t,i){t.g=function(t){return t.vw||(t.L=function(){},t.ww=[],t.children=[],t.vw=1),t}},function(t,i,n){var e,r,o,s=n(2),h=n(1).Promise,u=n(3);s.parse["application/octect-stream"]=function(t){return t},e=function(t,i){return{status:t.status,error:(i?i.text:null)||t.toString(),response:i}},o=function(t,i){t.text="",t.setEncoding("binary"),t.v("data",function(i){t.text+=i}),t.v("end",function(){i()})},r=function(t,i,n,r,a,c){if("user"!==n)throw new Error("Unexpected auth type: "+n);var l=function(n,h){function l(t){n&&n(t)}function p(t){h&&h(t)}function f(t,i){var n;t?p(e(t,i)):(n=JSON.parse(i.headers["dropbox-api-result"]),i.bv?n.uq=i.bv.response:n.xw=i.res.text,l(n))}var d;d=s.Xv(u(r)+t).set("Authorization","Bearer "+a).set("Dropbox-API-Arg",JSON.stringify(i)).v("request",function(){this.bv&&(this.bv.responseType="blob")}),c&&(d=d.set("Dropbox-API-Select-User",c)),"undefined"==typeof window?d.buffer(!0).parse(o).end(f):d.end(f)};return new h(l)},t.g=r},function(t,i,n){var e,r=n(5),o=n(17);e=function(t){r.call(this,t)},e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype=Object.assign(e.prototype,o),e.prototype.yw=function(t){return this.bw("sharing/get_shared_link_file",t,"api","download")},t.g=e},function(t,i){"function"!=typeof Object.assign&&!function(){Object.assign=function(t){"use strict";var i,n,e,r;if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(i=Object(t),n=1;n<arguments.length;n++)if(e=arguments[n],void 0!==e&&null!==e)for(r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);return i}}()},function(t,i){var n={cw:"rpc",ew:"download",gw:"upload"};t.g=n},function(t,i){var n={};n.zw=function(t){return this.bw("auth/token/from_oauth1",t,"app","api","rpc")},n.Aw=function(t){return this.bw("auth/token/revoke",t,"user","api","rpc")},n.Bw=function(t){return this.bw("files/alpha/get_metadata",t,"user","api","rpc")},n.Cw=function(t){return this.bw("files/alpha/upload",t,"user","content","upload")},n.Dw=function(t){return this.bw("files/copy",t,"user","api","rpc")},n.Ew=function(t){return this.bw("files/copy_batch",t,"user","api","rpc")},n.Fw=function(t){return this.bw("files/copy_batch/check",t,"user","api","rpc")},n.Gw=function(t){return this.bw("files/copy_reference/get",t,"user","api","rpc")},n.Hw=function(t){return this.bw("files/copy_reference/save",t,"user","api","rpc")},n.zq=function(t){return this.bw("files/create_folder",t,"user","api","rpc")},n.Bq=function(t){return this.bw("files/delete",t,"user","api","rpc")},n.Iw=function(t){return this.bw("files/delete_batch",t,"user","api","rpc")},n.Jw=function(t){return this.bw("files/delete_batch/check",t,"user","api","rpc")},n.tq=function(t){return this.bw("files/download",t,"user","content","download")},n.Kw=function(t){return this.bw("files/get_metadata",t,"user","api","rpc")},n.Lw=function(t){return this.bw("files/get_preview",t,"user","content","download")},n.Mw=function(t){return this.bw("files/get_temporary_link",t,"user","api","rpc")},n.Nw=function(t){return this.bw("files/get_thumbnail",t,"user","content","download")},n.oq=function(t){return this.bw("files/list_folder",t,"user","api","rpc")},n.Ow=function(t){return this.bw("files/list_folder/continue",t,"user","api","rpc")},n.Pw=function(t){return this.bw("files/list_folder/get_latest_cursor",t,"user","api","rpc")},n.Qw=function(t){return this.bw("files/list_folder/longpoll",t,"noauth","notify","rpc")},n.Rw=function(t){return this.bw("files/list_revisions",t,"user","api","rpc")},n.Dq=function(t){return this.bw("files/move",t,"user","api","rpc")},n.Sw=function(t){return this.bw("files/move_batch",t,"user","api","rpc")},n.Tw=function(t){return this.bw("files/move_batch/check",t,"user","api","rpc")},n.Uw=function(t){return this.bw("files/permanently_delete",t,"user","api","rpc")},n.Vw=function(t){return this.bw("files/properties/add",t,"user","api","rpc")},n.Ww=function(t){return this.bw("files/properties/overwrite",t,"user","api","rpc")},n.Xw=function(t){return this.bw("files/properties/remove",t,"user","api","rpc")},n.Yw=function(t){return this.bw("files/properties/template/get",t,"user","api","rpc")},n.Zw=function(t){return this.bw("files/properties/template/list",t,"user","api","rpc")},n.$w=function(t){return this.bw("files/properties/update",t,"user","api","rpc")},n._w=function(t){return this.bw("files/restore",t,"user","api","rpc")},n.ax=function(t){return this.bw("files/save_url",t,"user","api","rpc")},n.bx=function(t){return this.bw("files/save_url/check_job_status",t,"user","api","rpc")},n.ex=function(t){return this.bw("files/search",t,"user","api","rpc")},n.vq=function(t){return this.bw("files/upload",t,"user","content","upload")},n.gx=function(t){return this.bw("files/upload_session/append",t,"user","content","upload")},n.hx=function(t){return this.bw("files/upload_session/append_v2",t,"user","content","upload")},n.ix=function(t){return this.bw("files/upload_session/finish",t,"user","content","upload")},n.jx=function(t){return this.bw("files/upload_session/finish_batch",t,"user","api","rpc")},n.kx=function(t){return this.bw("files/upload_session/finish_batch/check",t,"user","api","rpc")},n.lx=function(t){return this.bw("files/upload_session/start",t,"user","content","upload")},n.mx=function(t){return this.bw("sharing/add_file_member",t,"user","api","rpc")},n.nx=function(t){return this.bw("sharing/add_folder_member",t,"user","api","rpc")},n.ox=function(t){return this.bw("sharing/change_file_member_access",t,"user","api","rpc")},n.px=function(t){return this.bw("sharing/check_job_status",t,"user","api","rpc")},n.qx=function(t){return this.bw("sharing/check_remove_member_job_status",t,"user","api","rpc")},n.sx=function(t){return this.bw("sharing/check_share_job_status",t,"user","api","rpc")},n.tx=function(t){return this.bw("sharing/create_shared_link",t,"user","api","rpc")},n.ux=function(t){return this.bw("sharing/create_shared_link_with_settings",t,"user","api","rpc")},n.vx=function(t){return this.bw("sharing/get_file_metadata",t,"user","api","rpc")},n.wx=function(t){return this.bw("sharing/get_file_metadata/batch",t,"user","api","rpc")},n.xx=function(t){return this.bw("sharing/get_folder_metadata",t,"user","api","rpc")},n.yx=function(t){return this.bw("sharing/get_shared_link_file",t,"user","content","download")},n.zx=function(t){return this.bw("sharing/get_shared_link_metadata",t,"user","api","rpc")},n.Ax=function(t){return this.bw("sharing/get_shared_links",t,"user","api","rpc")},n.Bx=function(t){return this.bw("sharing/list_file_members",t,"user","api","rpc")},n.Cx=function(t){return this.bw("sharing/list_file_members/batch",t,"user","api","rpc")},n.Dx=function(t){return this.bw("sharing/list_file_members/continue",t,"user","api","rpc")},n.Ex=function(t){return this.bw("sharing/list_folder_members",t,"user","api","rpc")},n.Fx=function(t){return this.bw("sharing/list_folder_members/continue",t,"user","api","rpc")},n.Gx=function(t){return this.bw("sharing/list_folders",t,"user","api","rpc")},n.Hx=function(t){return this.bw("sharing/list_folders/continue",t,"user","api","rpc")},n.Ix=function(t){return this.bw("sharing/list_mountable_folders",t,"user","api","rpc")},n.Jx=function(t){return this.bw("sharing/list_mountable_folders/continue",t,"user","api","rpc")},n.Kx=function(t){return this.bw("sharing/list_received_files",t,"user","api","rpc")},n.Lx=function(t){return this.bw("sharing/list_received_files/continue",t,"user","api","rpc")},n.Mx=function(t){return this.bw("sharing/list_shared_links",t,"user","api","rpc")},n.Nx=function(t){return this.bw("sharing/modify_shared_link_settings",t,"user","api","rpc")},n.Ox=function(t){return this.bw("sharing/mount_folder",t,"user","api","rpc")},n.Px=function(t){return this.bw("sharing/relinquish_file_membership",t,"user","api","rpc")},n.Qx=function(t){return this.bw("sharing/relinquish_folder_membership",t,"user","api","rpc")},n.Rx=function(t){return this.bw("sharing/remove_file_member",t,"user","api","rpc")},n.Sx=function(t){return this.bw("sharing/remove_file_member_2",t,"user","api","rpc")},n.Tx=function(t){return this.bw("sharing/remove_folder_member",t,"user","api","rpc")},n.Ux=function(t){return this.bw("sharing/revoke_shared_link",t,"user","api","rpc")},n.Vx=function(t){return this.bw("sharing/share_folder",t,"user","api","rpc")},n.Wx=function(t){return this.bw("sharing/transfer_folder",t,"user","api","rpc")},n.Xx=function(t){return this.bw("sharing/unmount_folder",t,"user","api","rpc")},n.Yx=function(t){return this.bw("sharing/unshare_file",t,"user","api","rpc")},n.Zx=function(t){return this.bw("sharing/unshare_folder",t,"user","api","rpc")},n.$x=function(t){return this.bw("sharing/update_folder_member",t,"user","api","rpc")},n._x=function(t){return this.bw("sharing/update_folder_policy",t,"user","api","rpc")},n.ay=function(t){return this.bw("users/get_account",t,"user","api","rpc")},n.by=function(t){return this.bw("users/get_account_batch",t,"user","api","rpc")},n.ey=function(t){return this.bw("users/get_current_account",t,"user","api","rpc")},n.gy=function(t){return this.bw("users/get_space_usage",t,"user","api","rpc")},t.g=n},function(t,i,n){var e=n(2),r=n(1).Promise,o=n(3),s=function(t,i){return{status:t.status,error:(i?i.text:null)||t.toString(),response:i}},h=function(t,i,n,h,u,a){var c=function(r,c){function l(t){r&&r(t)}function p(t){c&&c(t)}function f(t,i){t?p(s(t,i)):l(i.body)}var d;switch(i||(i=null),d=e.Xv(o(h)+t).type("application/json"),n){case"team":case"user":d.set("Authorization","Bearer "+u);break;case"noauth":break;default:throw new Error("Unhandled auth type: "+n)}a&&(d=d.set("Dropbox-API-Select-User",a)),d.send(i).end(f)};return new r(c)};t.g=h},function(t,i,n){var e=n(2),r=n(1).Promise,o=n(3),s=function(t,i){return{status:t.status,error:(i?i.text:null)||t.toString(),response:i}},h=function(t,i,n,h,u,a){if("user"!==n)throw new Error("Unexpected auth type: "+n);var c=function(n,r){function c(t){n&&n(t)}function l(t){r&&r(t)}function p(t,i){t?l(s(t,i)):c(i.body)}var f,d=i.wq;delete i.wq,f=e.Xv(o(h)+t).type("application/octet-stream").set("Authorization","Bearer "+u).set("Dropbox-API-Arg",JSON.stringify(i)),a&&(f=f.set("Dropbox-API-Select-User",a)),f.send(d).end(p)};return new r(c)};t.g=h},function(t,i){}])})},{}],97:[function(t,i,n){!function(t,i){"use strict";var n=document.getElementsByTagName("script"),e=n[n.length-1].src.split("?")[0],r=e.split("/").slice(0,-1).join("/")+"/",o={version:"2.3.1",B:1,W:-1,hy:!0,iy:r,lang:"en",jy:{ky:{}}};o.opera=-1!=navigator.userAgent.search(/(opera)(?:.*version)?[ \/]([\w.]+)/i),o.ly=-1!=navigator.userAgent.search(/(webkit)[ \/]([\w.]+)/i),o.my=-1!=navigator.userAgent.search(/(msie) ([\w.]+)/i),o.ny=-1!=navigator.userAgent.search(/(mozilla)(?:.*? rv:([\w.]+))?/i)&&!o.ly&&!o.my,o.oy=function(t){var i=o.jy[o.lang][t]||o.jy.ky[t];if(i){for(var n=1;n<arguments.length;n++)i=i.replace("$",arguments[n]);return i}return t},o.py=function(t,i){return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.qy=t,i},o.sy=function(){throw Error("unimplemented abstract method")},o.clone=function(t){if(t&&"object"==typeof t){var i=t.constructor==Array?[]:{};for(var n in t)t[n]==t?i[n]=t:i[n]=o.clone(t[n]);return i}return t},o.ty=function(t){return t&&"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t};var s=function(n,e){var e=e||{};for(var r in e)this[r]=e[r];for(var r in o.wr["default"])this[r]===i&&(this[r]=o.wr["default"][r]);for(var r in s.Wo["default"])this.Xo[r]===i&&(this.Xo[r]=s.Wo["default"][r]);this.uy=this.section.left,this.vy=this.section.top,this.wy=this.size-1-this.section.right,this.xy=this.size-1-this.section.bottom,this.init(),n.appendChild(this.Cr),this.yy=t.devicePixelRatio||1,this.width&&this.height?this.zy(this.width,this.height):this.width?this.Ay(this.width):this.height&&this.By(this.height)};s.Wo={},s.Wo.Cy={shadowColor:"rgba(32,32,32,0.5)",shadowTransparentColor:"rgba(32,32,32,0)",shadowBlur:0,shadowSize:function(t){return t.shadowSize},markupBlackColor:"rgba(255,255,255,0.8)",markupWhiteColor:"rgba(0,0,0,0.8)",markupNoneColor:"rgba(0,0,0,0.8)",markupLinesWidth:function(t){return t.Dy?t.yr/7:t.lineWidth},gridLinesWidth:1,gridLinesColor:function(t){return"rgba(0,0,0,"+Math.min(1,t.yr/15)+")"},starColor:"#000",starSize:function(t){return t.starSize*(t.width/300+1)},stoneSize:function(t){return t.stoneSize*Math.min(t.Qr,t.Rr)/2},coordinatesColor:"rgba(0,0,0,0.7)",font:function(t){return t.font},linesShift:.5},s.Wo["default"]={shadowColor:"rgba(62,32,32,0.5)",shadowTransparentColor:"rgba(62,32,32,0)",shadowBlur:function(t){return.1*t.yr},shadowSize:1,markupBlackColor:"rgba(255,255,255,0.9)",markupWhiteColor:"rgba(0,0,0,0.7)",markupNoneColor:"rgba(0,0,0,0.7)",markupLinesWidth:function(t){return t.yr/8},gridLinesWidth:function(t){return t.yr/15},gridLinesColor:"#654525",starColor:"#531",starSize:function(t){return t.yr/8+1},stoneSize:function(t){return Math.min(t.Qr,t.Rr)/2},coordinatesColor:"#531",Ey:"rgba(0,32,128,0.8)",font:"calibri",linesShift:.25};var h,u=function(t,i){return"function"==typeof i.Xo[t]?i.Xo[t](i):i.Xo[t]},a={Fy:function(t,i){var n=i.Gy(t.x),e=i.Hy(t.y),r=i.yr;this.beginPath();var o=u("shadowBlur",i),s=Math.max(0,r-.5),h=this.createRadialGradient(n-i.Iy,e-i.Iy,s-1-o,n-i.Iy,e-i.Iy,s+o);h.addColorStop(0,u("shadowColor",i)),h.addColorStop(1,u("shadowTransparentColor",i)),this.fillStyle=h,this.arc(n-i.Iy,e-i.Iy,s+o,0,2*Math.PI,!0),this.fill()},clear:function(t,i){var n=i.Gy(t.x),e=i.Hy(t.y),r=i.yr;this.clearRect(n-1.1*r-i.Iy,e-1.1*r-i.Iy,2.2*r,2.2*r)}},c=function(t,i,n){return t.Lr[i][n][0].c==o.B?u("markupBlackColor",t):t.Lr[i][n][0].c==o.W?u("markupWhiteColor",t):u("markupNoneColor",t)},l=function(t,i,n){return t.Lr[i][n][0]&&t.Lr[i][n][0].c==o.W||t.Lr[i][n][0].c==o.B},p=function(t,i){var n;t[i].clear(),t[i].Fy(t);for(var e=0;e<t.size;e++)for(var r=0;r<t.size;r++)for(var o=0;o<t.Lr[e][r].length;o++){var h=t.Lr[e][r][o];n=h.type?"string"==typeof h.type?s.Ky[h.type]:h.type:t.Jy,n[i]&&n[i].Fy.call(t[i].getContext(h),h,t)}for(var u=0;u<t.Ly.length;u++){var h=t.Ly[u],n=h.ip;n[i]&&n[i].Fy.call(t[i].getContext(h.My),h.My,t)}},f=function(t,i,n,e,r,o,s,h){t.strokeStyle="rgba(64,64,64,0.2)",t.lineWidth=e/30*h,t.beginPath(),e-=Math.max(1,t.lineWidth);var u,a,i,c,l,p=i+e*Math.cos(r*Math.PI),f=n+e*Math.sin(r*Math.PI),d=i+e*Math.cos(o*Math.PI),g=n+e*Math.sin(o*Math.PI);d>p?(u=(g-f)/(d-p),a=Math.atan(u)):d==p?a=Math.PI/2:(u=(g-f)/(d-p),a=Math.atan(u)-Math.PI);var v=s*e;c=Math.sin(a)*v,l=Math.cos(a)*v;var y=p+c,b=f-l,m=d+c,w=g-l;t.moveTo(p,f),t.bezierCurveTo(y,b,m,w,d,g),t.stroke()},d=function(t){for(var i=t.angle,n=t.angle,e=0;e<t.Ny.length;e++)i+=t.Ny[e],n-=t.Ny[e],f(t.Oy,t.x,t.y,t.Py,i,n,t.Qy,t.Ry)};s.Ky={Sy:{ki:{Fy:function(t,i){var n,e=i.Gy(t.x),r=i.Hy(t.y),s=i.yr;t.c==o.W?(n=this.createRadialGradient(e-2*s/5,r-2*s/5,s/3,e-s/5,r-s/5,5*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#aaa")):(n=this.createRadialGradient(e-2*s/5,r-2*s/5,1,e-s/5,r-s/5,4*s/5),n.addColorStop(0,"#666"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(e-i.Iy,r-i.Iy,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill()}},Ty:a},Uy:{ki:{Fy:function(t,i){var n,e=i.Gy(t.x),r=i.Hy(t.y),s=i.yr;t.c==o.W?(n=this.createRadialGradient(e-2*s/5,r-2*s/5,2,e-s/5,r-s/5,4*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#ddd")):(n=this.createRadialGradient(e-2*s/5,r-2*s/5,1,e-s/5,r-s/5,4*s/5),n.addColorStop(0,"#111"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(e-i.Iy,r-i.Iy,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill(),this.beginPath(),this.lineWidth=s/6,t.c==o.W?(this.strokeStyle="#999",this.arc(e+s/8,r+s/8,s/2,0,Math.PI/2,!1)):(this.strokeStyle="#ccc",this.arc(e-s/8,r-s/8,s/2,Math.PI,1.5*Math.PI)),this.stroke()}},Ty:a},Vy:{ki:{Fy:function(t,i){var n,e=i.Gy(t.x),r=i.Hy(t.y),s=i.yr;t.c==o.W?(n=this.createRadialGradient(e-2*s/5,r-2*s/5,s/3,e-s/5,r-s/5,8*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#666")):(n=this.createRadialGradient(e-2*s/5,r-2*s/5,1,e-s/5,r-s/5,3*s/5),n.addColorStop(0,"#555"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(e-i.Iy,r-i.Iy,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill()}},Ty:a},Wy:{ki:{Fy:function(t,i){var n,e,r=i.yr;h=h||Math.ceil(9999999*Math.random()),n=i.Gy(t.x),e=i.Hy(t.y);var s;if(s=t.c==o.W?"#aaa":"#000",this.beginPath(),this.fillStyle=s,this.arc(n-i.Iy,e-i.Iy,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill(),t.c==o.W){var u=h%(3+t.x*i.size+t.y)%3,a=i.size*i.size+t.x*i.size+t.y,c=2/a*(h%a);d(0==u?{Oy:this,x:n,y:e,Py:r,angle:c,Ny:[.1,.12,.11,.1,.09,.09,.09,.09],Qy:.25,Ry:1.75}:1==u?{Oy:this,x:n,y:e,Py:r,angle:c,Ny:[.1,.09,.08,.07,.06,.06,.06,.06,.06,.06,.06],Qy:.2,Ry:1.5}:{Oy:this,x:n,y:e,Py:r,angle:c,Ny:[.12,.14,.13,.12,.12,.12],Qy:.3,Ry:2}),s=this.createRadialGradient(n-2*r/5,e-2*r/5,r/3,n-r/5,e-r/5,5*r/5),s.addColorStop(0,"rgba(255,255,255,0.9)"),s.addColorStop(1,"rgba(255,255,255,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.Iy,e-i.Iy,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill()}else s=this.createRadialGradient(n+.4*r,e+.4*r,0,n+.5*r,e+.5*r,r),s.addColorStop(0,"rgba(32,32,32,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.Iy,e-i.Iy,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill(),s=this.createRadialGradient(n-.4*r,e-.4*r,0,n-.5*r,e-.5*r,1.5*r),s.addColorStop(0,"rgba(64,64,64,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.Iy,e-i.Iy,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill()}},Ty:a},Xy:{ki:{Fy:function(t,i){var n=i.Gy(t.x),e=i.Hy(t.y),r=i.yr,s=u("markupLinesWidth",i)||1;t.c==o.W?this.fillStyle="white":this.fillStyle="black",this.beginPath(),this.arc(n,e,Math.max(0,r-s),0,2*Math.PI,!0),this.fill(),this.lineWidth=s,this.strokeStyle="black",this.stroke()}}},CR:{ki:{Fy:function(t,i){var n=i.Gy(t.x),e=i.Hy(t.y),r=i.yr;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||u("markupLinesWidth",i)||1,this.beginPath(),this.arc(n-i.Iy,e-i.Iy,r/2,0,2*Math.PI,!0),this.stroke()}}},LB:{ki:{Fy:function(t,i){var n=i.Gy(t.x),e=i.Hy(t.y),r=i.yr,o=t.scale||1,s=t.font||u("font",i)||"";this.fillStyle=t.c||c(i,t.x,t.y);var h=1;1==t.text.length?h=1.5:2==t.text.length&&(h=1.2),this.font=Math.round(h*r*o)+"px "+s,this.beginPath(),this.textBaseline="middle",this.textAlign="center",this.fillText(t.text,n,e,2*r)}},grid:{Fy:function(t,i){if(!l(i,t.x,t.y)&&!t.Yy){var n=i.Gy(t.x),e=i.Hy(t.y),r=i.yr;this.clearRect(n-r,e-r,2*r,2*r)}},clear:function(t,i){l(i,t.x,t.y)||(t.Yy=!0,p(i,"grid"),delete t.Yy)}}},Zy:{ki:{Fy:function(t,i){var n=i.Gy(t.x),e=i.Hy(t.y),r=Math.round(i.yr);this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||u("markupLinesWidth",i)||1,this.beginPath(),this.rect(Math.round(n-r/2)-i.Iy,Math.round(e-r/2)-i.Iy,r,r),this.stroke()}}},zh:{ki:{Fy:function(t,i){var n=i.Gy(t.x),e=i.Hy(t.y),r=i.yr;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||u("markupLinesWidth",i)||1,this.beginPath(),this.moveTo(n-i.Iy,e-i.Iy-Math.round(r/2)),this.lineTo(Math.round(n-r/2)-i.Iy,Math.round(e+r/3)+i.Iy),this.lineTo(Math.round(n+r/2)+i.Iy,Math.round(e+r/3)+i.Iy),this.closePath(),this.stroke()}}},$y:{ki:{Fy:function(t,i){var n=i.Gy(t.x),e=i.Hy(t.y),r=i.yr;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineCap="round",this.lineWidth=2*(t.lineWidth||u("markupLinesWidth",i)||1)-1,this.beginPath(),this.moveTo(Math.round(n-r/2),Math.round(e-r/2)),this.lineTo(Math.round(n+r/2),Math.round(e+r/2)),this.moveTo(Math.round(n+r/2)-1,Math.round(e-r/2)),this.lineTo(Math.round(n-r/2)-1,Math.round(e+r/2)),this.stroke(),this.lineCap="butt"}}},SL:{ki:{Fy:function(t,i){var n=i.Gy(t.x),e=i.Hy(t.y),r=i.yr;this.fillStyle=t.c||c(i,t.x,t.y),this.beginPath(),this.rect(n-r/2,e-r/2,r,r),this.fill()}}},_y:{ki:{Fy:function(t,i){var n=i.Gy(t.x),e=i.Hy(t.y),r=i.yr;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=2*(t.lineWidth||u("markupLinesWidth",i)||1),this.beginPath(),this.arc(n-r/3,e-r/3,r/6,0,2*Math.PI,!0),this.stroke(),this.beginPath(),this.arc(n+r/3,e-r/3,r/6,0,2*Math.PI,!0),this.stroke(),this.beginPath(),this.moveTo(n-r/1.5,e),this.bezierCurveTo(n-r/1.5,e+r/2,n+r/1.5,e+r/2,n+r/1.5,e),this.stroke()}}},outline:{ki:{Fy:function(t,i){t.alpha?this.globalAlpha=t.alpha:this.globalAlpha=.3,t.stoneStyle?s.Ky[t.stoneStyle].ki.Fy.call(this,t,i):i.Jy.ki.Fy.call(this,t,i),this.globalAlpha=1}}},mini:{ki:{Fy:function(t,i){i.yr=i.yr/2,t.stoneStyle?s.Ky[t.stoneStyle].ki.Fy.call(this,t,i):i.Jy.ki.Fy.call(this,t,i),i.yr=2*i.yr}}}},s.Ar={grid:{Fy:function(t,i){var n,e,r,o,s,h;this.fillStyle=u("coordinatesColor",i),this.textBaseline="middle",this.textAlign="center",this.font=i.yr*i.coordFontSize+"px "+(i.font||""),r=i.Gy(-.75),o=i.Gy(i.size-.25),s=i.Hy(-.75),h=i.Hy(i.size-.25);for(var a=0;a<i.size;a++)n=a+"A".charCodeAt(0),n>="I".charCodeAt(0)&&n++,e=i.Hy(a),this.fillText(i.size-a,r,e),this.fillText(i.size-a,o,e),e=i.Gy(a),this.fillText(String.fromCharCode(n),e,s),this.fillText(String.fromCharCode(n),e,h);this.fillStyle="black"}}},s.az=function(){this.Cr=document.createElement("canvas"),this.context=this.Cr.getContext("2d"),this.yy=t.devicePixelRatio||1,this.yy>1&&this.context.scale(this.yy,this.yy)},s.az.prototype={constructor:s.az,zy:function(t,i){this.Cr.width=t,this.Cr.style.width=t/this.yy+"px",this.Cr.height=i,this.Cr.style.height=i/this.yy+"px"},Vn:function(t,i){this.Cr.style.position="absolute",this.Cr.style.zIndex=i,t.appendChild(this.Cr)},bz:function(t){t.removeChild(this.Cr)},getContext:function(){return this.context},Fy:function(t){},clear:function(){this.context.clearRect(0,0,this.Cr.width,this.Cr.height)}},s.cz=o.py(s.az,function(){this.qy.call(this)}),s.cz.prototype.Fy=function(t){var i;this.context.beginPath(),this.context.lineWidth=u("gridLinesWidth",t),this.context.strokeStyle=u("gridLinesColor",t);var n=Math.round(t.left),e=Math.round(t.top),r=Math.round(t.Qr*(t.size-1)),o=Math.round(t.Rr*(t.size-1));this.context.strokeRect(n-t.Iy,e-t.Iy,r,o);for(var s=1;s<t.size-1;s++)i=Math.round(t.Gy(s))-t.Iy,this.context.moveTo(i,e),this.context.lineTo(i,e+o),i=Math.round(t.Hy(s))-t.Iy,this.context.moveTo(n,i),this.context.lineTo(n+r,i);if(this.context.stroke(),this.context.fillStyle=u("starColor",t),t.dz[t.size])for(var h in t.dz[t.size])this.context.beginPath(),this.context.arc(t.Gy(t.dz[t.size][h].x)-t.Iy,t.Hy(t.dz[t.size][h].y)-t.Iy,u("starSize",t),0,2*Math.PI,!0),this.context.fill()},s.ez=o.py(s.az,function(){this.init(4)}),s.ez.prototype.init=function(i){var n,e;this.fz=i,this.elements=[],this.gz=[],this.yy=t.devicePixelRatio||1;for(var r=0;i>r;r++)n=document.createElement("canvas"),e=n.getContext("2d"),this.yy>1&&e.scale(this.yy,this.yy),this.elements.push(n),this.gz.push(e)},s.ez.prototype.Vn=function(t,i){for(var n=0;n<this.fz;n++)this.elements[n].style.position="absolute",this.elements[n].style.zIndex=i,t.appendChild(this.elements[n])},s.ez.prototype.bz=function(t){for(var i=0;i<this.fz;i++)t.removeChild(this.elements[i])},s.ez.prototype.getContext=function(t){return t.x%2?t.y%2?this.gz[0]:this.gz[1]:t.y%2?this.gz[2]:this.gz[3]},s.ez.prototype.clear=function(t,i){for(var n=0;n<this.fz;n++)this.gz[n].clearRect(0,0,this.elements[n].width,this.elements[n].height)},s.ez.prototype.zy=function(t,i){for(var n=0;n<this.fz;n++)this.elements[n].width=t,this.elements[n].style.width=t/this.yy+"px",this.elements[n].height=i,this.elements[n].style.height=i/this.yy+"px"},s.hz=o.py(s.ez,function(t,n,e){this.init(2),this.shadowSize=n===i?1:n,this.rr=t}),s.hz.prototype.getContext=function(t){return!(t.x%2&&t.y%2)&&(t.x%2||t.y%2)?this.gz[1]:this.gz[0]},s.hz.prototype.zy=function(t,i){this.qy.prototype.zy.call(this,t,i);for(var n=0;n<this.fz;n++)this.gz[n].setTransform(1,0,0,1,Math.round(this.shadowSize*this.rr.yr/7),Math.round(this.shadowSize*this.rr.yr/7))};var g=function(t,i){var n=i.Gy(t.x),e=i.Hy(t.y),r=i.yr;this.clearRect(n-2*r-i.Iy,e-2*r-i.Iy,4*r,4*r)},v=function(){return 3*this.width/(4*(this.wy+1-this.uy)+2)-this.Qr*this.uy},y=function(){return 3*this.height/(4*(this.xy+1-this.vy)+2)-this.Rr*this.vy},b=function(){return 4*this.width/(4*(this.wy+1-this.uy)+2)},m=function(){return 4*this.height/(4*(this.xy+1-this.vy)+2)},w=function(t,i){for(var n,e=0;e<this.Lr[t][i].length;e++){var r=this.Lr[t][i][e];n=r.type?"string"==typeof r.type?s.Ky[r.type]:r.type:this.Jy;for(var o in n)n[o].clear?n[o].clear.call(this[o].getContext(r),r,this):g.call(this[o].getContext(r),r,this)}},x=function(t,i){for(var n,e=0;e<this.Lr[t][i].length;e++){var r=this.Lr[t][i][e];n=r.type?"string"==typeof r.type?s.Ky[r.type]:r.type:this.Jy;for(var o in n)n[o].Fy.call(this[o].getContext(r),r,this)}},k=function(t){var i,n;i=t.layerX*this.yy,i-=this.left,i/=this.Qr,i=Math.round(i),
n=t.layerY*this.yy,n-=this.top,n/=this.Rr,n=Math.round(n);var e=t.offsetY*this.yy;return e-=this.top,e/=this.Rr,e=Math.round(e),e!==n&&console.error("Using layerY we get",n," BUT using offsetY it would be",e),{x:i>=this.size?-1:i,y:n>=this.size?-1:n}},j=function(){this.Cr.style.width=this.width/this.yy+"px",this.Cr.style.height=this.height/this.yy+"px",this.yr=u("stoneSize",this),this.Iy=u("linesShift",this);for(var t=0;t<this.fz.length;t++)this.fz[t].zy(this.width,this.height)};s.prototype={constructor:s,init:function(){this.Lr=[];for(var t=0;t<this.size;t++){this.Lr[t]=[];for(var i=0;i<this.size;i++)this.Lr[t][i]=[]}this.Ly=[],this.fz=[],this.qw=[],this.Cr=document.createElement("div"),this.Cr.className="wgo-board",this.Cr.style.position="relative",this.background&&("#"==this.background[0]?this.Cr.style.backgroundColor=this.background:(this.Cr.style.backgroundImage="url('"+this.background+"')",this.Cr.style.backgroundColor="#c75")),this.grid=new s.cz,this.Ty=new s.hz(this,u("shadowSize",this)),this.ki=new s.ez,this.iz(this.grid,100),this.iz(this.Ty,200),this.iz(this.ki,300)},Ay:function(t){this.width=t,this.width*=this.yy,this.Rr=this.Qr=b.call(this),this.left=v.call(this),this.height=(this.xy-this.vy+1.5)*this.Rr,this.top=y.call(this),j.call(this),this.jz()},By:function(t){this.height=t,this.height*=this.yy,this.Qr=this.Rr=m.call(this),this.top=y.call(this),this.width=(this.wy-this.uy+1.5)*this.Qr,this.left=v.call(this),j.call(this),this.jz()},zy:function(t,i){this.width=t||parseInt(this.Cr.style.width,10),this.width*=this.yy,this.height=i||parseInt(this.Cr.style.height,10),this.height*=this.yy,this.Qr=b.call(this),this.Rr=m.call(this),this.left=v.call(this),this.top=y.call(this),j.call(this),this.jz()},kz:function(){return this.section},lz:function(t,i,n,e){"object"==typeof t?this.section=t:this.section={top:t,right:i,bottom:n,left:e},this.uy=this.section.left,this.vy=this.section.top,this.wy=this.size-1-this.section.right,this.xy=this.size-1-this.section.bottom,this.zy()},mz:function(t){var t=t||19;if(t!=this.size){this.size=t,this.Lr=[];for(var i=0;i<this.size;i++){this.Lr[i]=[];for(var n=0;n<this.size;n++)this.Lr[i][n]=[]}this.wy=this.size-1-this.section.right,this.xy=this.size-1-this.section.bottom,this.zy()}},jz:function(){for(var t=0;t<this.fz.length;t++)this.fz[t].clear(this),this.fz[t].Fy(this);for(var t=0;t<this.size;t++)for(var i=0;i<this.size;i++)x.call(this,t,i);for(var t=0;t<this.Ly.length;t++){var n=this.Ly[t],e=n.ip;for(var r in e)e[r].Fy.call(this[r].getContext(n.My),n.My,this)}},Gy:function(t){return this.left+t*this.Qr},Hy:function(t){return this.top+t*this.Rr},iz:function(t,i){t.Vn(this.Cr,i),t.zy(this.width,this.height),this.fz.push(t)},nz:function(t){var i=this.fz.indexOf(t);i>=0&&(this.fz.splice(i,1),t.bz(this.Cr))},update:function(t){var i;if(t.remove&&"all"==t.remove)this.oz();else if(t.remove)for(i=0;i<t.remove.length;i++)this.Kr(t.remove[i]);if(t.add)for(i=0;i<t.add.length;i++)this.Mr(t.add[i])},Mr:function(t){if(t.constructor!=Array){w.call(this,t.x,t.y);for(var i=this.Lr[t.x][t.y],n=0;n<i.length;n++)if(i[n].type==t.type)return i[n]=t,void x.call(this,t.x,t.y);t.type?i.push(t):i.unshift(t),x.call(this,t.x,t.y)}else for(var e=0;e<t.length;e++)this.Mr(t[e])},Kr:function(t){if(t.constructor!=Array){for(var n,e=0;e<this.Lr[t.x][t.y].length;e++)if(this.Lr[t.x][t.y][e].type==t.type){n=e;break}n!==i&&(w.call(this,t.x,t.y),this.Lr[t.x][t.y].splice(n,1),x.call(this,t.x,t.y))}else for(var r=0;r<t.length;r++)this.Kr(t[r])},Sr:function(t,i){this.Lr[t][i].length&&(w.call(this,t,i),this.Lr[t][i]=[])},oz:function(){this.Lr=[];for(var t=0;t<this.size;t++){this.Lr[t]=[];for(var i=0;i<this.size;i++)this.Lr[t][i]=[]}this.jz()},zr:function(t,i){this.Ly.push({ip:t,My:i}),this.jz()},pz:function(t,i){for(var n=0;n<this.Ly.length;n++){var e=this.Ly[n];if(e.ip==t&&e.My==i)return this.Ly.splice(n,1),this.jz(),!0}return!1},addEventListener:function(t,i){var n=this,e={type:t,lv:i,qz:function(t){var e=k.call(n,t);i(e.x,e.y,t)}};this.Cr.addEventListener(t,e,!0),this.qw.push(e)},removeEventListener:function(t,i){for(var n=0;n<this.qw.length;n++){var e=this.qw[n];if(e.type==t&&e.lv==i)return this.Cr.removeEventListener(e.type,e,!0),this.qw.splice(n,1),!0}return!1},rz:function(){return{sz:o.clone(this.Lr),tz:o.clone(this.Ly)}},uz:function(t){this.Lr=t.sz||this.Lr,this.Ly=t.tz||this.Ly,this.jz()}},s["default"]={size:19,width:0,height:0,font:"Calibri",lineWidth:1,Dy:!1,dz:{19:[{x:3,y:3},{x:9,y:3},{x:15,y:3},{x:3,y:9},{x:9,y:9},{x:15,y:9},{x:3,y:15},{x:9,y:15},{x:15,y:15}],13:[{x:3,y:3},{x:9,y:3},{x:3,y:9},{x:9,y:9}],9:[{x:4,y:4}]},Jy:s.Ky.Wy,starSize:1,shadowSize:1,stoneSize:1,section:{top:0,right:0,bottom:0,left:0},background:o.iy+"wood1.jpg",Xo:{}},o.wr=s,t.WGo=o}(window)},{}],98:[function(t,i,n){i.g=1/0},{}],99:[function(t,i,n){i.g=1},{}],100:[function(t,i,n){"use strict";var e=t("./_map");i.g=function(t){function i(t,i){return function(t){i(t)}}return e(t,i)}},{"./_map":102}],101:[function(t,i,n){"use strict";var e=t("./a"),r=t("./_map");i.g=function(t){function i(t,i){return function(n,r){function o(t,i){return!!r[i]}function s(){var i={};return Object.keys(t).forEach(function(n){o(null,n)&&(i[n]=t[n])}),i}return n?void i(n):void i(null,e(r)?t.filter(o):s())}}return r(t,i)}},{"./_map":102,"./a":103}],102:[function(t,i,n){"use strict";var e=t("./a"),r=t("./once"),o=t("./concurrent"),s=t("./CONCURRENTLY"),h=t("./SERIAL");i.g=function u(t,i,n){function a(n,h,u,a){var c=arguments;2===c.length&&(u=h,h=s),3===c.length&&"number"!=typeof h&&(a=u,u=h,h=s);var l=Object.keys(n),p=e(n)?[]:{};l.forEach(function(t){p[t]=function(i){3===u.length?u(n[t],t,i):u(n[t],i)}}),o(p,t||h,i?i(n,r(a)):a)}return n||(a.er=u(h,i,!0)),a}},{"./CONCURRENTLY":98,"./SERIAL":99,"./a":103,"./concurrent":104,"./once":116}],103:[function(t,i,n){"use strict";i.g=function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],104:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./a"),o=t("./once"),s=t("./queue"),h=t("./errored"),u=t("./debounce"),a=t("./CONCURRENTLY");i.g=function(t,i,n){function c(i,n){function r(){var t=e(arguments);h(t,l)||(d[i]=t.shift(),n())}u(t[i],[r])}"function"==typeof i&&(n=i,i=a);var l=o(n),p=s(c,i),f=Object.keys(t),d=r(t)?[]:{};p.unshift(f),p.v("drain",function(){l(null,d)})}},{"./CONCURRENTLY":98,"./a":103,"./debounce":107,"./errored":110,"./once":116,"./queue":117,atoa:113}],105:[function(t,i,n){"use strict";i.g={vz:t("./curry"),wz:t("./concurrent"),er:t("./series"),xz:t("./waterfall"),lr:t("./each"),map:t("./map"),filter:t("./filter"),yz:t("./queue"),zz:t("./emitter")}},{"./concurrent":104,"./curry":106,"./each":108,"./emitter":109,"./filter":111,"./map":112,"./queue":117,"./series":118,"./waterfall":119}],106:[function(t,i,n){"use strict";var e=t("atoa");i.g=function(){var t=e(arguments),i=t.shift();return function(){var n=e(arguments);i.apply(i,t.concat(n))}}},{atoa:113}],107:[function(t,i,n){"use strict";var e=t("ticky");i.g=function(t,i,n){t&&e(function(){t.apply(n||null,i||[])})}},{ticky:114}],108:[function(t,i,n){"use strict";i.g=t("./_each")()},{"./_each":100}],109:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./debounce");i.g=function(t,i){var n=i||{},o={};return void 0===t&&(t={}),t.v=function(i,n){return o[i]?o[i].push(n):o[i]=[n],t},t.A=function(i,n){return n.Az=!0,t.v(i,n),t},t.C=function(i,n){var e=arguments.length;if(1===e)delete o[i];else if(0===e)o={};else{var r=o[i];if(!r)return t;r.splice(r.indexOf(n),1)}return t},t.F=function(){var i=e(arguments);return t.Bz(i.shift()).apply(this,i)},t.Bz=function(i){var s=(o[i]||[]).slice(0);return function(){var o=e(arguments),h=this||t;if("error"===i&&n["throws"]!==!1&&!s.length)throw 1===o.length?o[0]:o;return s.forEach(function(e){n.async?r(e,o,h):e.apply(h,o),e.Az&&t.C(i,e)}),t}},t}},{"./debounce":107,atoa:113}],110:[function(t,i,n){"use strict";var e=t("./debounce");i.g=function(t,i,n){var r=t.shift();return r?(n&&n.Cz(),e(i,[r]),!0):void 0}},{"./debounce":107}],111:[function(t,i,n){"use strict";i.g=t("./_filter")()},{"./_filter":101}],112:[function(t,i,n){"use strict";i.g=t("./_map")()},{"./_map":102}],113:[function(t,i,n){i.g=function(t,i){return Array.prototype.slice.call(t,i)}},{}],114:[function(t,i,n){var e,r="function"==typeof setImmediate;e=r?function(t){setImmediate(t)}:function(t){setTimeout(t,0)},i.g=e},{}],115:[function(t,i,n){"use strict";i.g=function(){}},{}],116:[function(t,i,n){"use strict";var e=t("./noop");i.g=function(t){function i(){n||(n=!0,(t||e).apply(null,arguments))}var n;return i.Cz=function(){n=!0},i}},{"./noop":115}],117:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./a"),o=t("./once"),s=t("./emitter"),h=t("./debounce");i.g=function(t,i){function n(t,i,n){var e=r(i)?i:[i];e.forEach(function(i){l[t]({oy:i,done:n})}),h(u)}function u(){if(!(c||p>=f)){if(!l.length)return void(0===p&&d.F("drain"));p++;var i=l.pop();t(i.oy,o(a.bind(null,i))),h(u)}}function a(t){p--,h(t.done,e(arguments,1)),h(u)}var c,l=[],p=0,f=i||1,d=s({push:n.bind(null,"push"),unshift:n.bind(null,"unshift"),pause:function(){c=!0},resume:function(){c=!1,h(u)},pending:l});return Object.defineProperty&&!Object.definePropertyPartial&&Object.defineProperty(d,"length",{get:function(){return l.length}}),d}},{"./a":103,"./debounce":107,"./emitter":109,"./once":116,atoa:113}],118:[function(t,i,n){"use strict";var e=t("./concurrent"),r=t("./SERIAL");i.g=function(t,i){e(t,r,i)}},{"./SERIAL":99,"./concurrent":104}],119:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./once"),o=t("./errored"),s=t("./debounce");i.g=function(t,i){function n(){var i=e(arguments),u=t.shift();if(u){if(o(i,h))return;i.push(r(n)),s(u,i)}else s(h,arguments)}var h=r(i);n()}},{"./debounce":107,"./errored":110,"./once":116,atoa:113}],120:[function(t,i,n){i.g=function(t,i){var n=i||document;if(n.createStyleSheet){var e=n.createStyleSheet();return e.cssText=t,e.ownerNode}var r=n.getElementsByTagName("head")[0],o=n.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(n.createTextNode(t)),r.appendChild(o),o},i.g.Dz=function(t){if(document.createStyleSheet)return document.createStyleSheet(t).ownerNode;var i=document.getElementsByTagName("head")[0],n=document.createElement("link");return n.rel="stylesheet",n.href=t,i.appendChild(n),n}},{}],121:[function(t,i,n){i.g=t("cssify")},{cssify:120}],122:[function(t,i,n){i.g={name:"1g0",version:"0.4.0",description:"",Ez:"Olivier Lombart (kubicle)",Fz:"TBD",scripts:{Gz:"browserify js/ui/htmlApp.js -t lessify | uglifyjs -o build/bld.js -m --mangle-props --reserved-file build/reserved.json --reserve-domprops --mangle-regex=\"/^[a-zA-Z0-9_]+$/\" -c pure_funcs=['log.debug','test.assert']","dev-build":"watchify js/test/testApp.js -o build/devBuild.js -t lessify -v",test:"node js/test/ciTestApp.js --ci",Hz:"node node_modules/istanbul/lib/cli.js cover js/test/ciTestApp.js -x **/frankie/** -x **/droopy/** -- --cover"},Iz:"js/ui/htmlApp.js",Jz:{type:"git",url:"https://github.com/kubicle/1g0"},Kz:{url:"https://github.com/kubicle/1g0/issues"},Lz:["baduk","go","igo","weiqi"],Mz:{contra:"~1.9.4",Nz:"~2.5.0"},Oz:{Pz:"~0.3.22","codeclimate-test-reporter":"~0.1.1",Qz:"~10.2.4",lessify:"~1.0.1",Rz:"~3.2.2","uglify-js":"~2.6.2"}}},{}]},{},[86]);