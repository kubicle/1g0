!function t(i,n,r){function e(s,h){if(!n[s]){if(!i[s]){var a="function"==typeof require&&require;if(!h&&a)return a(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={g:{}};i[s][0].call(c.g,function(t){var n=i[s][1][t];return e(n?n:t)},c,c.g,t,i,n,r)}return n[s].g}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)e(r[s]);return e}({1:[function(t,i,n){"function"==typeof Object.create?i.g=function(t,i){t.h=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,i:!1,j:!0,k:!0}})}:i.g=function(t,i){t.h=i;var n=function(){};n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],2:[function(t,i,n){function r(){c=!1,h.length?u=h.concat(u):l=-1,u.length&&e()}function e(){if(!c){var t=setTimeout(r);c=!0;for(var i=u.length;i;){for(h=u,u=[];++l<i;)h[l].l();l=-1,i=u.length}h=null,c=!1,clearTimeout(t)}}function o(t,i){this.o=t,this.p=i}function s(){}var h,a=i.g={},u=[],c=!1,l=-1;a.m=function(t){var i=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)i[n-1]=arguments[n];u.push(new o(t,i)),1!==u.length||c||setTimeout(e,0)},o.prototype.l=function(){this.o.apply(null,this.p)},a.title="browser",a.q=!0,a.s={},a.t=[],a.version="",a.u={},a.v=s,a.addListener=s,a.A=s,a.C=s,a.removeListener=s,a.D=s,a.F=s,a.G=function(t){throw new Error("process.binding is not supported")},a.H=function(){return"/"},a.I=function(t){throw new Error("process.chdir is not supported")},a.J=function(){return 0}},{}],3:[function(t,i,n){i.g=function(t){return t&&"object"==typeof t&&"function"==typeof t.K&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],4:[function(t,i,n){(function(i,r){function e(t,i){var r={N:[],O:s};return arguments.length>=3&&(r.P=arguments[2]),arguments.length>=4&&(r.R=arguments[3]),d(i)?r.S=i:i&&n.T(r,i),x(r.S)&&(r.S=!1),x(r.P)&&(r.P=2),x(r.R)&&(r.R=!1),x(r.U)&&(r.U=!0),r.R&&(r.O=o),a(r,t,r.P)}function o(t,i){var n=e.da[i];return n?"["+e.R[n][0]+"m"+t+"["+e.R[n][1]+"m":t}function s(t,i){return t}function h(t){var i={};return t.forEach(function(t,n){i[t]=!0}),i}function a(t,i,r){if(t.U&&i&&S(i.V)&&i.V!==n.V&&(!i.constructor||i.constructor.prototype!==i)){var e=i.V(r,t);return b(e)||(e=a(t,e,r)),e}var o=u(t,i);if(o)return o;var s=Object.keys(i),d=h(s);if(t.S&&(s=Object.getOwnPropertyNames(i)),M(i)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(i);if(0===s.length){if(S(i)){var v=i.name?": "+i.name:"";return t.O("[Function"+v+"]","special")}if(k(i))return t.O(RegExp.prototype.toString.call(i),"regexp");if(q(i))return t.O(Date.prototype.toString.call(i),"date");if(M(i))return c(i)}var m="",y=!1,w=["{","}"];if(g(i)&&(y=!0,w=["[","]"]),S(i)){var x=i.name?": "+i.name:"";m=" [Function"+x+"]"}if(k(i)&&(m=" "+RegExp.prototype.toString.call(i)),q(i)&&(m=" "+Date.prototype.toUTCString.call(i)),M(i)&&(m=" "+c(i)),0===s.length&&(!y||0==i.length))return w[0]+m+w[1];if(0>r)return k(i)?t.O(RegExp.prototype.toString.call(i),"regexp"):t.O("[Object]","special");t.N.push(i);var j;return j=y?l(t,i,r,d,s):s.map(function(n){return f(t,i,r,d,n,y)}),t.N.pop(),p(j,m,w)}function u(t,i){if(x(i))return t.O("undefined","undefined");if(b(i)){var n="'"+JSON.stringify(i).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.O(n,"string")}return y(i)?t.O(""+i,"number"):d(i)?t.O(""+i,"boolean"):v(i)?t.O("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,i,n,r,e){for(var o=[],s=0,h=i.length;h>s;++s)T(i,String(s))?o.push(f(t,i,n,r,String(s),!0)):o.push("");return e.forEach(function(e){e.match(/^\d+$/)||o.push(f(t,i,n,r,e,!0))}),o}function f(t,i,n,r,e,o){var s,h,u;if(u=Object.getOwnPropertyDescriptor(i,e)||{value:i[e]},u.get?h=u.set?t.O("[Getter/Setter]","special"):t.O("[Getter]","special"):u.set&&(h=t.O("[Setter]","special")),T(r,e)||(s="["+e+"]"),h||(t.N.indexOf(u.value)<0?(h=v(n)?a(t,u.value,null):a(t,u.value,n-1),h.indexOf("\n")>-1&&(h=o?h.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+h.split("\n").map(function(t){return"   "+t}).join("\n"))):h=t.O("[Circular]","special")),x(s)){if(o&&e.match(/^\d+$/))return h;s=JSON.stringify(""+e),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.O(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.O(s,"string"))}return s+": "+h}function p(t,i,n){var r=0,e=t.reduce(function(t,i){return r++,i.indexOf("\n")>=0&&r++,t+i.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?n[0]+(""===i?"":i+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+i+" "+t.join(", ")+" "+n[1]}function g(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function v(t){return null===t}function m(t){return null==t}function y(t){return"number"==typeof t}function b(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function x(t){return void 0===t}function k(t){return j(t)&&"[object RegExp]"===Y(t)}function j(t){return"object"==typeof t&&null!==t}function q(t){return j(t)&&"[object Date]"===Y(t)}function M(t){return j(t)&&("[object Error]"===Y(t)||t instanceof Error)}function S(t){return"function"==typeof t}function G(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function Y(t){return Object.prototype.toString.call(t)}function D(t){return 10>t?"0"+t.toString(10):t.toString(10)}function C(){var t=new Date,i=[D(t.getHours()),D(t.getMinutes()),D(t.getSeconds())].join(":");return[t.getDate(),O[t.getMonth()],i].join(" ")}function T(t,i){return Object.prototype.hasOwnProperty.call(t,i)}var E=/%[sdj%]/g;n.format=function(t){if(!b(t)){for(var i=[],n=0;n<arguments.length;n++)i.push(e(arguments[n]));return i.join(" ")}for(var n=1,r=arguments,o=r.length,s=String(t).replace(E,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(i){return"[Circular]"}default:return t}}),h=r[n];o>n;h=r[++n])s+=v(h)||!j(h)?" "+h:" "+e(h);return s},n.L=function(t,e){function o(){if(!s){if(i.throwDeprecation)throw new Error(e);i.traceDeprecation?console.trace(e):console.error(e),s=!0}return t.apply(this,arguments)}if(x(r.process))return function(){return n.L(t,e).apply(this,arguments)};if(i.noDeprecation===!0)return t;var s=!1;return o};var B,L={};n.M=function(t){if(x(B)&&(B=i.s.NODE_DEBUG||""),t=t.toUpperCase(),!L[t])if(new RegExp("\\b"+t+"\\b","i").test(B)){var r=i.pid;L[t]=function(){var i=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,i)}}else L[t]=function(){};return L[t]},n.V=e,e.R={bold:[1,22],X:[3,23],Y:[4,24],inverse:[7,27],Z:[37,39],$:[90,39],_:[30,39],blue:[34,39],aa:[36,39],green:[32,39],ba:[35,39],red:[31,39],ca:[33,39]},e.da={ea:"cyan",number:"yellow",fa:"yellow",undefined:"grey",ga:"bold",ha:"green",ia:"magenta",ja:"red"},n.isArray=g,n.ka=d,n.la=v,n.ma=m,n.na=y,n.oa=b,n.pa=w,n.qa=x,n.ra=k,n.sa=j,n.ta=q,n.ua=M,n.va=S,n.wa=G,n.isBuffer=t("./support/isBuffer");var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",C(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n.T=function(t,i){if(!i||!j(i))return t;for(var n=Object.keys(i),r=n.length;r--;)t[n[r]]=i[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":3,_process:2,inherits:1}],5:[function(t,i,n){i.g={"#appTitle":"1g0: let's play go!","#cancelAction":"Cancel","#confirmTitle":"Confirm","#problem":"Problem","#OK":"OK","#cancel":"Cancel","#play":"Play","#load":"Load","#newGame":"New game","#loadGame":"Load game","#exportGame":"Export game","#downloadLatest":"Download latest","#review":"Review","#endReview":"End review","#resign":"Resign","#pass":"Pass","#undo":"Undo","#settings":"Settings"}},{}],6:[function(t,i,n){i.g={".cafeAuLait":{".menuBtn":{backgroundColor:"#704f43"},".topTitle":{backgroundColor:"#5c4137"}},".neonBlack":{body:{backgroundColor:"#000"},".btn":{backgroundColor:"#000",color:"#f8a3e1",border:"1px solid #5d80c6"},".btn+toggled":{backgroundColor:"#380966",color:"#cad904"},".menuBtn":{backgroundColor:"#0e4571"},".topTitle":{backgroundColor:"#0b3557"},".statusBar":{backgroundColor:"#c7cced",border:"#07b2ff 1px solid","box-shadow":"3px 3px 20px #537cc6"},".board":{backgroundColor:"#002"},".mainControls":{color:"#fdf"},".settingBtnIcon":{"-webkit-filter":"hue-rotate(67deg) grayscale(0.8) brightness(2)"},".dialog":{backgroundColor:"#0d0217",color:"#fdf",boxShadow:"#3fb 3px 3px 20px",border:"solid #b395d7 1px"},".dialogTitle":{backgroundColor:"#0b3557",color:"#fffaff",textShadow:"#06b1ff 4px 4px 7px",borderColor:"#fff",boxShadow:"#00abff 3px 3px 20px"},".playerBtn":{backgroundColor:"#5034a9"},".sizeBtn":{backgroundColor:"#5034a9"},".boardImgFrame":{backgroundColor:"#09132a",boxShadow:"#3fb 3px 3px 20px"},".curSize":{textShadow:"#0a9da9 3px 3px 5px"},".dropDwn":{backgroundColor:"#000"},".inputBox":{backgroundColor:"#000"},".devDiv":{backgroundColor:"#5a3571",color:"#38cead",border:"1px solid #400ac1"},".devLogBox":{color:"#000"}}}},{}],7:[function(t,i,n){i.g={".cgos":{xa:!0,ya:!0},".chinese":{xa:!0,ya:!0},".japanese":{}}},{}],8:[function(t,i,n){"use strict";function r(){this.Fa(m),this.Ga=null,this.Ha()}var e=t("./constants"),o=t("./Goban"),s=t("./Grid"),h=t("./HandicapSetter"),a=t("./log"),u=t("./Move"),c=t("./SgfReader"),l=t("../config/rules.json"),f=u.za,p=u.Aa,g=u.Ba,d=e.Ca,v=e.Da,m=e.Ea,y=":",b="-",w=",";i.g=r,r.prototype.Ha=function(){this.history=[],this.Ia=[],this.Ja=[],this.Ka=null,this.La=0,this.Ma=this.Na=d,this.Oa=this.Pa=!1,this.Qa=this.Ra=null,this.Sa=(new Date).toISOString().substr(0,10),this.Ta=this.Ua=null},r.prototype.Va=function(t){this.Fa(t.Wa,!0),this.Xa(t.Ga.Ya,t.Ka,t.La),this.Za(t.Na),this.Ja=t.Ja.concat(),this.Sa=t.Sa,this.Ta=t.Ta,this.Ua=t.Ua,this.$a(t.history)},r.prototype._a=function(t,i){this.Ja[t]=i},r.prototype.ab=function(t){return this.Ja[t]},r.prototype.Fa=function(t,i){this.Wa=t,t=t||"unspecified";var n=l["."+t.toLowerCase()];if(!n){if(!i)throw new Error("Invalid rules: "+t+"\nValid values: "+Object.keys(l).map(function(t){return t.substr(1)}).join(", "));n=l["."+m.toLowerCase()]}this.ya=n.ya||!1,this.xa=n.xa||!1},r.prototype.Xa=function(t,i,n){if(this.Ha(),this.Ga&&t===this.Ga.Ya)this.Ga.clear();else if(this.Ga=new o(t),this.Ga.Ya!==t)return this.bb("Size could not be set: "+t);return this.Ga.cb(this.ya),this.La=void 0!==n?n:i?.5:6.5,i=i||0,!!this.eb(i)},r.prototype.Za=function(t){this.Ma=this.Na=t},r.prototype.eb=function(t){if(this.history.length>0)throw new Error("Handicap cannot be changed during a game");if(0===t||"0"===t)return this.Ka=null,this.Za(d),!0;var i,n,r;if(""+~~t==""+t)for(r=~~t,i=h.fb(this.Ga.Ya,r),this.Ka=[],n=0;n<i.length;n++){var e=i[n][0],o=i[n][1];this.Ka.push(s.gb(e,o)),this.Ga.hb(e,o,d)}else for(r=t.length,this.Ka=t,n=0;n<t.length;n++){var a=this.ib(t[n]);this.Ga.hb(a[0],a[1],a[2]||d)}return this.Ka.length||(this.Ka=null),this.Za(this.Ka?v:d),!r||this.Ka&&this.Ka.length===r?!0:this.bb("Handicap could not be set: "+t)},r.prototype.jb=function(){return this.Ka},r.prototype.kb=function(){return this.Ka?this.Ka.length:0},r.prototype.lb=function(t,i){if(a.error&&a.error(t),!i)throw new Error(t);return i.push(t),!1},r.prototype.$a=function(t,i){if(!t||!t.length)return!0;for(var n=0;n<t.length;n++)if(!this.mb(t[n]))return this.lb("Failed playing loaded move #"+(n+1)+":\n"+this.nb().join(", "),i);return!0},r.prototype.ob=function(t,i){return t?this.$a(t.split(w),i):!0},r.prototype.pb=function(t,i,n){var r=new c;try{r.qb(t,n)}catch(e){return this.lb("Failed loading SGF moves:\n"+e,i)}return this.Xa(r.rb,r.sb(),r.La),this.Ja[v]=r.tb("playerWhite"),this.Ja[d]=r.tb("playerBlack"),this.Fa(r.tb("rules"),!0),this.Sa=r.tb("date"),this.Ua=r.tb("event"),this.Ta=r.tb("source"),this.$a(r.ub(),i)},r.prototype.vb=function(t,i){return c.wb(t)?this.pb(t,i):this.ob(t,i)},r.prototype.mb=function(t){if(this.Pa&&t.indexOf("undo")<0)return this.bb("Game already ended");if(/^[B|W]?-?[a-z][1-2]?[0-9]$/.test(t))return this.xb(t);var i=g(t);if(i.startsWith("pass"))return this.yb();if(i.startsWith("resi"))return this.zb(p(t));if("undo"===i)return this.Ab();if("half_undo"===i)return this.Ab(!0);if(i.startsWith("hand")){var n=i.substr(i.indexOf(y)+1);return this.eb(n.split(b))}return i.startsWith("load:")?this.ob(i.slice(5)):this.bb("Invalid command: "+i.substr(0,20))},r.prototype.xb=function(t){var i=this.ib(t);3===i.length&&(this.Ma=i[2]);var n=i[0],r=i[1];return this.Ga.Bb(n,r,this.Ma)?(this.Ga.hb(n,r,this.Ma),this.Cb(t),this.Db(),!0):this.bb("Invalid move: "+t)},r.prototype.ib=function(t){var i=p(t);void 0!==i&&(t=g(t));var n=s.Eb(t,!0);if(!n){if("pass"===t||t.startsWith("resi"))return null;throw new Error("Illegal move parsed: "+t)}return void 0!==i?n.concat(i):n},r.prototype.zb=function(t,i){t=void 0!==t?t:this.Ma,this.Qa=t,this.Ra=i;var n=f("resign",t)+(i?"-"+i:"");return this.Cb(n),this.Db(),this.Pa=!0,this.Oa=!1,!0},r.prototype.yb=function(){var t=this.history[this.history.length-1];return t&&t.endsWith("pass")&&(this.Oa=!0),this.Cb(f("pass",this.Ma)),this.Db(),!0},r.prototype.Fb=function(t,i){return this.Oa?(this.Oa=!1,t?(this.Pa=!0,!0):(i!==this.Ma&&(this.history.pop(),this.Db()),!0)):this.bb("The game is not ending yet")},r.prototype.Gb=function(){return this.history.length},r.prototype.Hb=function(){var t="";this.Ka&&(t="handicap"+y+this.Ka.join(b)+w);var i=this.history;return i[0]=f(g(i[0]),this.Na),t+i.join(w)},r.prototype.bb=function(t){return this.Ia.push(t),!1},r.prototype.nb=function(){var t=this.Ia;return this.Ia=[],t},r.prototype.Db=function(){this.Ma=1-this.Ma},r.prototype.Cb=function(t){return this.history.push(t)},r.prototype.Ab=function(t){var i=t?1:2;if(this.history.length<i)return this.bb("Nothing to undo");this.Pa=this.Oa=!1;for(var n=i;n>=1;n--){var r=this.history.pop();!r.endsWith("pass")&&r.indexOf("resi")<0&&this.Ga.Ib()}return t&&this.Db(),!0}},{"../config/rules.json":7,"./Goban":11,"./Grid":12,"./HandicapSetter":14,"./Move":15,"./SgfReader":18,"./constants":43,"./log":46}],9:[function(t,i,n){"use strict";function r(t){this.Jb=t,this.Kb=null}function e(t,i){return void 0===i||null===i?"":t+"["+i+"]"}function o(t,i,n){var r=t.indexOf(i+"[");if(0>r)return n;var e=t.substring(r+i.length+1,t.indexOf("]",r));switch(typeof n){case"number":return parseFloat(e);default:return e}}function s(t,i){return o(t,i===u?"PB":"PW")||(o(t,i===u?"BS":"WS",0)?"AI":"Human")}function h(t){return t.length<=f?t:t.substr(0,f-1).trim()+"."}var a=t("./constants"),u=a.Ca,c=a.Da,l=5;i.g=r,r.prototype.Lb=function(t,i){this.Jb.Mb("pendingGame",t?this.Nb(t,i):"")},r.prototype.Ob=function(){return this.Jb.Pb("pendingGame")},r.prototype.Qb=function(t){this.Ya=t.Ga.Ya;var i="",n=t.Ja;return(n[u]||n[c])&&(i+=e("PW",n[c]),i+=e("PB",n[u])),i+=e("SO",t.Ta),i+=e("EV",t.Ua),i+=e("SZ",this.Ya),i+=e("KM",t.La),i+=e("RU",t.Wa),i+=e("DT",t.Sa),i+=this.Rb(t)},r.prototype.Sb=function(t,i){var n=this.Nb(t,i),r=this.Jb.Pb("mostRecentGames",[]);null===this.Kb?(r[0]!==n&&r.unshift(n),r.length>l&&r.splice(l)):(r.splice(this.Kb,1),r.unshift(n)),this.Jb.Mb("mostRecentGames",r),this.Kb=null},r.prototype.Tb=function(t){return this.Ub(t)};var f=10;r.prototype.Ub=function(t){var i=o(t,"SZ");return i+"x"+i+" "+h(s(t,c))+"/"+h(s(t,u))},r.prototype.Vb=function(){for(var t=this.Jb.Pb("mostRecentGames",[]),i=[],n=0;n<t.length;n++)i.push(this.Ub(t[n]));return i},r.prototype.Wb=function(t){if(void 0===t)return null;var i=this.Jb.Pb("mostRecentGames",[]);return i[t]?(this.Kb=t,i[t]):null},r.prototype.Xb=function(t,i,n){var r,e=n[0],o=n[1],s=t.ib(i);if(s)void 0!==s[2]&&(o=s[2]===u?"B":"W"),r=String.fromCharCode(96+s[0])+String.fromCharCode(97+this.Ya-s[1]);else{if(!i.endsWith("pass"))return null;r=""}return""===e&&(n[1]="W"===o?"B":"W"),e+o+"["+r+"]"},r.prototype.Rb=function(t){var i=t.jb();if(!i)return"";for(var n=["A","B"],r=e("HA",i.length),o=0;o<i.length;o++)r+=this.Xb(t,i[o],n);return r},r.prototype.Nb=function(t,i){for(var n="(;FF[4]GM[1]"+this.Qb(t),r=["",t.Na===u?"B":"W"],e=t.history,o=0;o<e.length;o++){var s=this.Xb(t,e[o],r);if(!s)break;n+=";"+s}return n+=")"}},{"./constants":43}],10:[function(t,i,n){"use strict";function r(t,i,n){this.Yb=t||{},this.Zb=i||{},this.name=n||"#"+o++}var e=t("./helper"),o=1;i.g=r;var s=.05,h=0,a=1;r.prototype.clone=function(t){return new r(e.clone(this.Yb),e.clone(this.Zb),t)},r.prototype.$b=function(t){this.Zb=t},r.prototype.toString=function(){var t="{"+this.name+" - ";for(var i in this.Yb)t+=i+":"+this.Yb[i].toFixed(2)+", ";return t._b(", ")+"}"},r.prototype.ac=function(t){var i=0;for(var n in this.Yb){var r=this.Yb[n],e=t.Yb[n];0>e!=0>r?0>e?(r-=e,e=0):(e-=r,r=0):(r=Math.abs(r),e=Math.abs(e));var o;o=0===e?r>1?1:r:0===r?e>1?1:e:1-(e>=r?r/e:e/r),i+=o}return i},r.prototype.get=function(t,i,n,r){void 0===n&&(n=null),void 0===r&&(r=null);var e=this.Yb[t];if(e)return e;if(this.Yb[t]=i,(n||r)&&(this.Zb[t]=[n,r]),n&&r&&n>r)throw new Error("Limits are invalid: "+n+" > "+r);return i},r.prototype.bc=function(){return JSON.stringify(this)},r.cc=function(t){var i=JSON.parse(t);this.Yb=i.Yb,this.Zb=i.Zb},r.prototype.dc=function(t,i,n,r,e){var o=this.Yb,s=t.Yb;i.$b(this.Zb),n.$b(this.Zb);var h=i.Yb,a=n.Yb,u=~~(Math.random()*o.length),c=~~(Math.random()*u),l=0;for(var f in o)c>l||l>u?(h[f]=o[f],a[f]=s[f]):(h[f]=s[f],a[f]=o[f]),Math.random()<r&&(h[f]=this.ec(f,h[f],e)),Math.random()<r&&(a[f]=this.ec(f,a[f],e)),l++},r.prototype.ec=function(t,i,n){var r,e=this.Zb[t];if(e){var o=e[h],u=e[a];if(Math.random()<n)r=o+Math.random()*(u-o);else{var c=1+2*Math.random()*s-s;r=i*c,o&&o>r&&(r=o),u&&r>u&&(r=u)}}else r=i+10*(Math.random()-.5);return r},r.prototype.fc=function(){for(var t in this.Yb)this.Yb[t]=this.ec(t,this.Yb[t],1);return this}},{"./helper":44}],11:[function(t,i,n){"use strict";function r(t){if(void 0===t&&(t=19),t!==~~t||3>t)throw new Error("Invalid goban size: "+t);this.Ya=t,this.hc=new o(t,a),this.ic=new o(t,s.gc),this.jc=this.ic.kc;var i,n;for(n=t;n>=1;n--)for(i=t;i>=1;i--)this.jc[n][i]=new s(this,i,n,u);for(n=1;t>=n;n++)for(i=1;t>=i;i++)this.jc[n][i].lc();r.mc=new h(this,new s(this,-50,-50,u),-100,0),this.nc=[r.mc],this.oc=[r.mc],this.pc=[],this.qc=0,this.history=[],this.cb(!1),this.rc=0}var e=t("./constants"),o=t("./Grid"),s=t("./Stone"),h=t("./Group"),a=(t("./test"),e.gc),u=e.EMPTY;i.g=r,r.prototype.clear=function(){for(var t=1;t<=this.Ya;t++)for(var i=1;i<=this.Ya;i++){var n=this.jc[t][i];n.group&&n.group.clear()}this.nc.shift(),this.oc.shift(),this.pc.concat(this.nc),this.pc.concat(this.oc),this.nc.length=0,this.oc.length=0,this.nc.push(r.mc),this.oc.push(r.mc),this.qc=0,this.history.length=0,this.cb(!1),this.rc=0},r.prototype.sc=function(t,i){var n=++this.qc,r=this.pc.pop();return r?r.tc(t,i,n):r=new h(this,t,i,n),r},r.prototype.uc=function(t){t.vc===this.qc&&this.qc--,this.pc.push(t)},r.prototype.wc=function(){return this.ic.xc()},r.prototype.yc=function(t){this.hc.yc(t);for(var i=this.Ya;i>=1;i--)for(var n=1;n<=this.Ya;n++){var r=this.hc.kc[i][n];r!==u&&this.hb(n,i,r)}},r.prototype.zc=function(){for(var t={},i=this.Ya;i>=1;i--)for(var n=this.Ya;n>=1;n--){var r=this.jc[i][n].group;r&&(t[r.vc]=r)}return t},r.prototype.Ac=function(){for(var t,i="Board:\n"+this.toString()+"\nGroups:\n"+this.ic.Bc(function(t){return t.group?""+t.group.vc:"."})+"\nStones in groups:\n",n={},r=this.ic.kc,e=0;t=r[e],e<r.length;e++)for(var o,s=t,h=0;o=s[h],h<s.length;h++)o&&o.group&&(n[o.group.vc]=o.group);for(var a=1;a<=this.qc;a++)n[a]&&(i+=n[a].Ac()+"\n");return i},r.prototype.toString=function(){return this.ic.Bc()},r.prototype.Bb=function(t,i,n){if(1>t||t>this.Ya||1>i||i>this.Ya)return!1;var r=this.jc[i][t];if(r.color!==u)return!1;if(r.Cc(n))return!1;if(this.Dc){if(this.Ec[this.Fc(t,i,n)])return!1}else if(r.Gc(n))return!1;return!0},r.prototype.Hc=function(t,i){return this.jc[i][t]},r.prototype.Ic=function(t,i){return this.jc[i][t].color},r.prototype.Jc=function(t,i){return this.jc[i][t].Jc()},r.prototype.Gb=function(){return this.history.length},r.prototype.hb=function(t,i,n){this.Kc(t,i,n);var r=this.jc[i][t];if(r.color!==u)throw new Error("Tried to play on existing stone in "+r);return this.Lc(t,i,n)},r.prototype.Ib=function(){if(!this.history.length)throw new Error("Extra undo");this.history.pop().Mc(),this.Kc()},r.prototype.Lc=function(t,i,n){var r=this.jc[i][t];return this.history.push(r),this.rc++,r.Nc(n),r},r.prototype.Oc=function(){this.history.pop().Mc()},r.prototype.Pc=function(){return this.nc[this.nc.length-1]},r.prototype.Qc=function(){return this.history[this.history.length-1]},r.prototype.Rc=function(t){t=t||[0,0];for(var i=this.nc.length-1;i>=0;i--){var n=this.nc[i];t[n.color]+=n.Sc.length}return t},r.prototype.cb=function(t){if(this.history.length>0)throw new Error("Superko rule changed during game");this.Dc=t,t?(this.Tc=this.Uc(),this.Vc=[],this.Ec={}):(this.Tc=null,this.Vc=this.Ec=null)},r.prototype.Kc=function(t,i,n){this.Dc?t?(this.Vc.push(this.Tc),this.Ec[this.Tc]=this.history.length,this.Tc=this.Fc(t,i,n)):(this.Tc=this.Vc.pop(),this.Ec[this.Tc]=null):this.Tc=null},r.prototype.Fc=function(t,i,n){for(var r=this.Wc(this.Tc,t,i,n),e=this.Hc(t,i).Xc(1-n),o=e.length-1;o>=0;o--)if(!(e[o].Yc>1))for(var s=e[o].Sc,h=s.length-1;h>=0;h--){var a=s[h];r=this.Wc(r,a.Zc,a.$c,u)}return r},r.prototype._c=function(){return this.Dc?this.Tc:(this.Tc||(this.Tc=this.wc()),this.Tc)};var c=33,l="0".charCodeAt();r.prototype.Uc=function(){for(var t="",i="",n=this.Ya,r=1;n>=r;r++)for(var e=this.jc[r],o=1;n>=o;o++)t+=String.fromCharCode(l+e[o].color+1),4===t.length&&(i+=String.fromCharCode(parseInt(t,3)+c),t="");return t.length&&(t=(t+"000").substr(0,4),i+=String.fromCharCode(parseInt(t,3)+c)),i},r.prototype.Wc=function(t,i,n,r){var e,o=(n-1)*this.Ya+(i-1),s=~~(o/4),h=o%4;if(r===u){var a=("000"+(t.charCodeAt(s)-c).toString(3)).slice(-4),l=a.substr(0,h)+"0"+a.substr(h+1);e=parseInt(l,3)+c}else e=t.charCodeAt(s)+(1<<r)*Math.pow(3,3-h);return t.substr(0,s)+String.fromCharCode(e)+t.substr(s+1)}},{"./Grid":12,"./Group":13,"./Stone":19,"./constants":43,"./test":48}],12:[function(t,i,n){"use strict";function r(t,i,n){if(void 0===i)throw new Error("Grid init value must be defined");this.Ya=t,void 0===n?this.kc=a.ad(t+2,t+2,i):(this.kc=a.ad(t+2,t+2,n),this.init(i))}function e(t){if(t===u)return"(BORDER)";if(t>=r.kd)return String.fromCharCode("A".charCodeAt()+t-r.kd);if(t<r.md||t>=r.hd.length)throw new Error("Invalid color "+t);return 0>t&&(t+=r.hd.length),r.hd[t]}function o(t){return e("number"==typeof t?t:t.color)}function s(t){for(var i="",n=t.length-1;n>=0;n--)i+=t[n];return i}var h=t("./constants"),a=t("./helper"),u=h.gc;i.g=r,r.bd="+",r.dd="?",r.ed="@O",r.fd="&#",r.gd="-:",r.hd=r.ed+r.fd+r.gd+r.dd+r.bd,r.jd=r.dd+r.bd+r.hd,r.kd=100,r.ld=-1,r.md=-2,r.nd=2,r.od=4,r.pd=[0,0,-1,1,1,-1,-1,1],r.qd="-'?.:",r.prototype.init=function(t){if(void 0===t)throw new Error("Grid init value must be defined");for(var i=this.Ya;i>=1;i--)for(var n=this.kc[i],r=this.Ya;r>=1;r--)n[r]=t},r.prototype.K=function(t){if(t.Ya!==this.Ya)throw new Error("Cannot copy between different sized grids");for(var i=this.Ya;i>=1;i--)for(var n=this.kc[i],r=t.kc[i],e=this.Ya;e>=1;e--)n[e]=r[e];return this},r.prototype.rd=function(t){var i=t.ic;if(i.Ya!==this.Ya)throw new Error("Cannot copy between different sized grids");for(var n=this.Ya;n>=1;n--)for(var r=this.kc[n],e=i.kc[n],o=this.Ya;o>=1;o--)r[o]=e[o].color;return this},r.sd=function(t){return r.jd.indexOf(t)+r.md},r.prototype.Bc=function(t){return this.td(!0,"\n",t||o)},r.prototype.xc=function(t){return this.td(!1,",",t||o)},r.prototype.td=function(t,i,n){var e,o,s,h=new r(this.Ya,"").kc,a=1;for(o=this.Ya;o>=1;o--)for(e=1;e<=this.Ya;e++)s=n(this.kc[o][e]),null!==s&&(h[o][e]=s,a=Math.max(a,s.length));var u=a,c="          ",l="";for(o=this.Ya;o>=1;o--){for(t&&(l+="%2d".format(o)+" "),e=1;e<=this.Ya;e++)s=h[o][e],s.length<u&&(s=c.substr(1,u-s.length)+s),l+=s;l+=i}if(t){for(l+="   ",e=1;e<=this.Ya;e++)l+=c.substr(1,u-1)+r.ud(e);l+="\n"}return"\n"!==i&&(l=l.vd()),l},r.prototype.toString=function(){for(var t="",i=this.Ya;i>=1;i--){for(var n=1;n<=this.Ya;n++)t+=e(this.kc[i][n]);t+="\n"}return t},r.prototype.wc=function(){return"object"==typeof this.kc[1][1]?this.xc(function(t){return e(t.color)}):this.xc(function(t){return e(t)})},r.prototype.yc=function(t){var i=t.split(/\"|,/);if(i.length!==this.Ya)throw new Error("Invalid image: "+i.length+" rows instead of "+this.Ya);for(var n=this.Ya;n>=1;n--){var e=i[this.Ya-n];if(e.length!==this.Ya)throw new Error("Invalid image: row "+e);for(var o=1;o<=this.Ya;o++)this.kc[n][o]=r.sd(e[o-1])}},r.wd=function(t){return t.split(",").reverse().join()},r.xd=function(t){return t.split(",").map(s).join()},r.yd=function(t){return s(t)},r.zd=function(t){for(var i="",n=t.split(","),r=n[0].length-1;r>=0;r--){i+=",";for(var e=0;e<n.length;e++)i+=n[e][r]}return i.substr(1)};var c="abcdefghjklmnopqrstuvwxyz";r.Ad=["black","white"],r.Bd=function(t){return r.Ad[t]},r.Eb=function(t,i){var n=c.indexOf(t[0])+1,r=parseInt(t.substr(1,2));if(!n||isNaN(r)){if(i)return null;throw new Error("Illegal move parsed: "+t)}return[n,r]},r.gb=function(t,i){return c[t-1]+i},r.ud=function(t){return c[t-1]}},{"./constants":43,"./helper":44}],13:[function(t,i,n){"use strict";function r(t,i,n,r){this.Ga=t,this.Sc=[i],this.Yc=n,this.color=i.color,this.Cd=null,this.Dd=null,this.Ed=null,this.vc=r,this.Fd=null,this.Gd=this.Hd=0}var e=t("./constants"),o=t("./Grid"),s=t("./log"),h=e.EMPTY;i.g=r,r.prototype.tc=function(t,i,n){this.Sc.length=0,this.Sc.push(t),this.Yc=i,this.color=t.color,this.Cd=this.Dd=this.Ed=null,this.vc=n,this.Gd=this.Hd=0},r.prototype.clear=function(){for(var t=this.Sc.length-1;t>=0;t--)this.Sc[t].clear();this.Ga.uc(this)},r.prototype.toString=function(t){if(0===t)return"#"+this.vc;if(1===t)return this.Sc[0]+" x"+this.Sc.length;for(var i,n="{group #"+this.vc+" of "+this.Sc.length+" "+o.Bd(this.color)+" stones [",r=this.Sc,e=0;i=r[e],e<r.length;e++)n+=i.Id()+",";return n=n.vd(),n+="], lives:"+this.Yc,this.Cd&&(n+=" MERGED with #"+this.Cd.vc),this.Ed&&(n+=" KILLED by "+this.Ed.Id()),n+="}"},r.prototype.Jd=function(){return this.Sc.length&&this.Sc[0].group===this},r.prototype.Ac=function(){return this.toString()},r.prototype.Kd=function(){return this.Sc.map(function(t){return t.Id()}).sort().join(",")},r.prototype.Ld=function(){for(var t,i=[],n=this.Sc,r=0;t=n[r],r<n.length;r++)for(var e,o=t.Md,s=0;e=o[s],s<o.length;s++)e.color===h&&i.indexOf(e)<0&&i.push(e);if(i.length!==this.Yc)throw new Error("Wrong life count for group");return i},r.prototype.Nd=function(){for(var t,i=[],n=1-this.color,r=this.Sc,e=0;t=r[e],e<r.length;e++)for(var o,h=t.Md,a=0;o=h[a],a<h.length;a++)o.color===n&&i.indexOf(o.group)<0&&i.push(o.group);return s.Od,i},r.prototype.Pd=function(t){for(var i,n=-1,r=t.Md,e=0;i=r[e],e<r.length;e++)if(i.color===h){n++;for(var o,a=i.Md,u=0;o=a[u],u<a.length;u++)if(o.group===this&&o!==t){n--;break}}return s.Od,n},r.prototype.Qd=function(t){if(s.Od,this.Sc.push(t),this.Yc+=this.Pd(t),this.Yc<0)throw new Error("Unexpected error (lives<0 on connect)");s.Od},r.prototype.Rd=function(t){if(s.Od,this.Sc.length>1){if(this.Yc-=this.Pd(t),this.Yc<0)throw new Error("Lives<0 on disconnect")}else this.Ga.uc(this),s.Od;if(this.Sc.pop()!==t)throw new Error("Unexpected error (disconnect order)")},r.prototype.Sd=function(t){return this.Yc--,this.Yc<=0?this.Td(t):void 0},r.prototype.Ud=function(t){if(this.Yc--,s.Od,this.Yc<1)throw new Error("Unexpected error (lives<1 on attack by resucitated)")},r.prototype.Vd=function(t){this.Yc++,s.Od},r.prototype.Wd=function(t,i){if(t.Cd===this||t===this||this.color!==t.color)throw new Error("Invalid merge");s.Od,this.Yc+=t.Sc.length;for(var n,r=t.Sc,e=0;n=r[e],e<r.length;e++)n.Xd(this),this.Qd(n);t.Cd=this,t.Dd=i,this.Ga.oc.push(t),s.Od},r.prototype.Yd=function(t){s.Od;for(var i,n=t.Sc,r=n.length-1;i=n[r],r>=0;r--)this.Rd(i),i.Xd(t);this.Yc-=t.Sc.length,t.Dd=t.Cd=null,s.Od},r.prototype.Zd=function(t){for(var i=this.Ga.oc,n=i.length-1;n>=0;n--){var r=i[n];if(r.Dd!==t||r.Cd!==this)break;this.Yd(r),i.pop()}},r.prototype.Td=function(t){if(s.Od,this.Yc<0)throw new Error("Unexpected error (lives<0)");for(var i,n=this.Sc,r=0;i=n[r],r<n.length;r++){for(var e,o=i.Xc(1-this.color),h=0;e=o[h],h<o.length;h++)e.Vd(i);i.$d()}this.Ed=t,this.Ga.nc.push(this),s.Od},r.prototype._d=function(){this.Ed=null,this.Yc=1;for(var t,i=this.Sc,n=0;t=i[n],n<i.length;n++){t.ae(this);for(var r,e=t.Xc(1-this.color),o=0;r=e[o],o<e.length;o++)r.Ud(t)}},r.be=function(t){for(var i=t.Ga.nc,n=i.length-1;n>=0;n--){var r=i[n];if(r.Ed!==t)break;i.pop(),s.Od,r._d()}}},{"./Grid":12,"./constants":43,"./log":46}],14:[function(t,i,n){"use strict";function r(){}i.g=new r,r.prototype.fb=function(t,i){if(i>4&&(9>t||t%2===0)&&(i=4),5>=t)return[];for(var n=13>t?2:3,r=1+n,e=(1+t)/2,o=t-n,s=[],h=0;i>h;h++){switch(i%2===1&&i>4&&h===i-1&&(h=8),h){case 0:var a=r,u=r;break;case 1:a=o,u=o;break;case 2:a=r,u=o;break;case 3:a=o,u=r;break;case 4:a=r,u=e;break;case 5:a=o,u=e;break;case 6:a=e,u=r;break;case 7:a=e,u=o;break;case 8:a=e,u=e}s.push([a,u])}return s}},{}],15:[function(t,i,n){"use strict";var r=t("./constants"),e=r.Ca,o=r.Da;n.Aa=function(t){switch(t[0]){case"B":return e;case"W":return o;default:return}},n.Ba=function(t){return"B"!==t[0]&&"W"!==t[0]?t:"-"!==t[1]?t.substr(1):t.substr(2)},n.za=function(t,i){return(i===e?"B-":"W-")+t}},{"./constants":43}],16:[function(t,i,n){"use strict";function r(){this.ce=[]}i.g=r,r.prototype.de=function(t){this.ce=t.concat()},r.prototype.ee=function(){return this.ce}},{}],17:[function(t,i,n){"use strict";function r(t){this.fe=t,this.ge=new o.ie.he(t)}function e(t){return 1!==t?t+" points":"1 point"}var o=t("./ai"),s=t("./constants"),h=t("./Grid"),a=s.Ca,u=s.Da;i.g=r,r.prototype.je=function(){var t=this.ke()[0];return t[a]-t[u]},r.prototype.le=function(){return this.me(this.ke())},r.prototype.ne=function(){return this.ke()},r.prototype.oe=function(){return this.ge.oe()},r.prototype.ke=function(){var t=this.fe,i=t.Ga,n=t.La;if(null!==t.Qa)return["resi",1-t.Qa,t.Ra];this.ge.pe(i);var r=this.ge.qe,e=this.ge.re,o=[r[a]+e[u],r[u]+e[a]+n],s=[[r[a],e[u],0],[r[u],e[a],n]];return[o,s]},r.prototype.me=function(t){if("resi"===t[0]){var i,n=h.Ad[t[1]],r=h.Ad[1-t[1]];switch(t[2]){case"time":i=r+" ran out of time";break;case null:case void 0:i=r+" resigned";break;default:i=r+" disqualified: "+t[2]}return[n+" won ("+i+")"]}if(!t||2!==t.length)throw new Error("Invalid score info: "+t);var o=t[0],s=t[1];if(o.length!==s.length)throw new Error("Invalid score info");var c=[],l=o[a]-o[u];c.push(this.se(l));for(var f=a;u>=f;f++){var p=s[f],g=p[0],d=p[1],v=p[2],m=0!==d?" "+(0>d?"-":"+")+" "+Math.abs(d)+" prisoners":"",y=v>0?" + "+v+" komi":"",b=d||v?" ("+g+m+y+")":"";c.push(h.Bd(f)+": "+e(o[f])+b)}return c},r.prototype.se=function(t){if(0===t)return"Tie game";var i=t>0?a:u;return h.Bd(i)+" wins by "+e(Math.abs(t))}},{"./Grid":12,"./ai":42,"./constants":43}],18:[function(t,i,n){"use strict";function r(){d||s(),this.text=null,this.te=null,this.rb=this.La=0,this.ue=this.ve=null,this.we=null,this.Ma=l,this.Gb=-1,this.xe=!0}function e(t,i,n){g[t]=[i,n]}function o(t,i){d[t]=i}function s(){g={},d={},e("GM","int",null),e("FF","int","fileFormat"),e("SZ","int","boardSize"),e("AB","move",null),e("AW","move",null),e("HA","int","handicap"),e("KM","real","komi"),e("RU","text","rules"),e("RE","text","result"),e("PB","text","playerBlack"),e("PW","text","playerWhite"),e("BS","int","blackSpecies"),e("WS","int","whiteSpecies"),e("LT","flag","enforceLosingOnTime"),e("SO","text","source"),e("ID","text","gameId"),e("AP","text","application"),e("BR","text","blackRank"),e("WR","text","whiteRank"),e("BT","text","blackTeam"),e("WT","text","whiteTeam"),e("TM","text","timeLimit"),e("OT","text","overtimeMethod"),e("EV","text","event"),e("RO","text","round"),e("DT","text","date"),e("PC","text","place"),e("GN","text","gameName"),
e("ON","text","openingPlayed"),e("GC","text","gameComment"),e("C","text","comment"),e("N","text","nodeName"),e("US","text","userName"),e("AN","text","analyseAuthor"),e("CP","text","copyright"),e("CA","text","characterSet"),e("ST","text",null),o("B","move"),o("W","move"),o("AB","move"),o("AW","move"),o("BL",null),o("WL",null),o("C",null),o("CR",null),o("BM",null),o("N",null)}function h(t){if(t.Be("a","z"))return t.charCodeAt()-97;if(t.Be("A","Z"))return t.charCodeAt()-39;throw new Error("Invalid coordinate value: "+t)}function a(t){for(var i=0;;){var n=t.indexOf("]",i);if(-1===n)return-1;if("\\"!==t[n-1])return n;i=n+1}}var u=t("./constants"),c=t("./log"),l=u.Ca,f=u.Da,p=["B","W"],g=null,d=null;i.g=r,r.wb=function(t){return t.trim().startsWith("(;")},r.prototype.qb=function(t,i){if(!r.wb(t))throw new Error("Not an SGF file");this.ye(t),this.ze(),this.Ae(i)},r.prototype.sb=function(){return this.ue},r.prototype.ub=function(){return this.ve},r.prototype.tb=function(t,i){var n=this.we[t];return void 0!==n?n:i};var v="abcdefghjklmnopqrstuvwxyz";r.prototype.Ce=function(t){if(this.rb)throw new Error("SZ set twice");this.rb=t},r.prototype.De=function(t){if(!this.rb)throw new Error("Move seen before SZ is known");if(""===t||"tt"===t&&this.rb<=19)return"pass";var i=v[h(t[0])],n=this.rb-h(t[1]);return i+n},r.prototype.Ee=function(t,i,n){t!==this.Ma&&(i=p[t]+i),this.Gb<0?(this.Ma=t,this.ue.push(i)):(this.Gb++,this.Ma=1-t,n&&(i="#"+i),this.ve.push(i))},r.prototype.Fe=function(t,i){switch(i){case"text":return t;case"int":return parseInt(t);case"real":return parseFloat(t);case"flag":return!0;case"move":return this.De(t);default:throw new Error("Invalid tag type: "+i)}},r.prototype.Ge=function(t,i){var n=d[t];if(void 0===n)return c.warn&&c.warn("Unknown property "+t+"["+i+"] ignored");if(n){var r=this.Fe(i,n);switch(t){case"B":return this.Ee(l,r);case"W":return this.Ee(f,r);case"AB":return this.Ee(l,r,!0);case"AW":return this.Ee(f,r,!0)}}},r.prototype.Ae=function(t){this.ve=[],this.Gb=0,this.Ma=null;for(var i=1;i<this.te.length;i++)for(var n=this.te[i],r=0;r<n.length;r+=2){var e=n[r]||e,o=n[r+1];this.Ge(e,o)}void 0!==t&&(this.ve=this.ve.slice(0,t))},r.prototype.He=function(t,i){var n=g[t];if(void 0===n)return this.we[t]=i,c.Ie("Unknown property in SGF header: "+t+"["+i+"]");var r=n[0],e=n[1],o=this.Fe(i,r);return e&&(this.we[e]=o),o},r.prototype.ze=function(){this.rb=this.La=0,this.we={},this.ue=[],this.Ma=l,this.Gb=-1;for(var t=this.te[0],i=0;i<=t.length-1;i+=2){var n=t[i],r=t[i+1],e=this.He(n,r);switch(n){case"GM":if(1!==e)throw new Error("SGF game is not a GO game");break;case"FF":(3>e||e>4)&&c.warn&&c.warn("SGF format "+e+". Not sure we handle it well.");break;case"SZ":this.Ce(e);break;case"KM":this.La=e;break;case"AB":this.Ee(l,e,!0);break;case"AW":this.Ee(f,e,!0)}}},r.prototype.ye=function(t){for(this.text=t,this.te=[],t=this.Je(t),t=this.Ke("(",t),t=this.Le(t),this.xe=!1;!this.xe;)t=this.Le(t);return this.Ke(")",t)},r.prototype.Le=function(t){if(t=this.Je(t),";"!==t[0])return this.xe=!0,t;t=this.Ke(";",t);for(var i=[];;){for(var n=0;t[n]&&t[n].Be("A","Z");)n++;var r=t.substr(0,n);for(""===r&&this.Me("Property name expected",t),i.push(r),t=this.Ke(r,t);;){t=this.Ke("[",t);var e=a(t);0>e&&this.Me("Missing ']'",t);var o=t.substr(0,e);if(i.push(o),t=this.Ke(o+"]",t),"["!==t[0])break;i.push(null)}if(!t[0]||!t[0].Be("A","Z"))break}return this.te.push(i),t},r.prototype.Je=function(t){return t.trim()},r.prototype.Ke=function(t,i){return i.startsWith(t)||this.Me(t+" expected",i),i.replace(t,"").trim()},r.prototype.Me=function(t,i){throw new Error("Syntax error: '"+t+"' at ..."+i.substr(0,20)+"...")}},{"./constants":43,"./log":46}],19:[function(t,i,n){"use strict";function r(t,i,n,r){this.Ga=t,this.Zc=i,this.$c=n,this.color=r,this.group=null,this.Md=[],this.Pe=[]}var e=t("./constants"),o=t("./Grid"),s=t("./Group"),h=e.EMPTY,a=e.gc,u=e.Ne,c=e.Oe;i.g=r,r.gc=new r(null,-1,-1,a);var l=r.Qe=[[0,1],[1,0],[0,-1],[-1,0]],f=r.Re=[[1,1],[1,-1],[-1,-1],[-1,1]];r.prototype.clear=function(){this.color=h,this.group=null},r.prototype.lc=function(){for(var t=this.Ga.jc,i=c;i>=u;i--){var n=t[this.$c+l[i][1]][this.Zc+l[i][0]];n.color===h&&this.Md.push(n),this.Pe.push(n),n=t[this.$c+f[i][1]][this.Zc+f[i][0]],this.Pe.push(n)}},r.prototype.toString=function(){return this.color===h?this.Id():(this.color?"W":"B")+"-"+this.Id()},r.prototype.Id=function(){return o.gb(this.Zc,this.$c)},r.prototype.Se=function(){return this.Te().map(function(t){return t.Id()}).sort().join(",")},r.prototype.Jc=function(){return this.color===h},r.prototype.Ue=function(){return 2===this.Md.length},r.prototype.Ve=function(){var t=this.Ga,i=t.Ya-1;return t.Hc(1===this.Zc?2:i,1===this.$c?2:i)},r.prototype.We=function(){return this.Md.length<=3},r.prototype.Xe=function(){var t=this.Ga.Ya,i=this.Zc,n=this.$c;return Math.min(Math.min(i-1,t-i),Math.min(n-1,t-n))},r.prototype.Cc=function(t){for(var i=this.Md.length-1;i>=0;i--){var n=this.Md[i];if(n.color===h)return!1;if(n.color!==t){if(1===n.group.Yc)return!1}else if(n.group.Yc>1)return!1}return!0},r.prototype.Gc=function(t){for(var i=null,n=this.Md.length-1;n>=0;n--){var r=this.Md[n].group;if(r&&r.color===1-t&&1===r.Yc){if(i)return!1;i=r}}if(!i)return!1;if(1!==i.Sc.length)return!1;var e=i.Sc[0];if(this.Ga.Qc()!==e)return!1;var o=this.Ga.Pc();if(!o||o.Ed!==e||1!==o.Sc.length)return!1;var s=o.Sc[0];return s.Zc===this.Zc&&s.$c===this.$c},r.prototype.$d=function(){this.color=h,this.group=null},r.prototype.ae=function(t){this.group=t,this.color=t.color},r.prototype.Nc=function(t){this.color=t;var i=this.Xc(t);0===i.length?this.group=this.Ga.sc(this,this.Ye()):(this.group=i[0],this.group.Qd(this));for(var n=this.Xc(1-t),r=n.length-1;r>=0;r--)n[r].Sd(this);for(var e=1;e<i.length;e++)this.group.Wd(i[e],this)},r.prototype.Mc=function(){this.group.Zd(this),this.group.Rd(this);for(var t=this.Xc(1-this.color),i=t.length-1;i>=0;i--)t[i].Vd(this);this.group=null,this.color=h,s.be(this)},r.prototype.Xd=function(t){this.group=t},r.prototype.Xc=function(t){for(var i=[],n=this.Md,r=n.length-1;r>=0;r--){var e=n[r];e.color===t&&i.indexOf(e.group)<0&&i.push(e.group)}return i},r.prototype.Te=function(){for(var t=[],i=this.Md,n=i.length-1;n>=0;n--){var r=i[n];r.color===h&&t.push(r)}return t},r.prototype.Ye=function(){for(var t=0,i=this.Md,n=i.length-1;n>=0;n--)i[n].color===h&&t++;return t},r.prototype.Ze=function(t,i){for(var n=0,r=this.Md,e=r.length-1;e>=0;e--)r[e].color===t&&(i&&i.push(r[e]),n++);return n},r.prototype.$e=function(t){for(var i=this.Md,n=i.length-1;n>=0;n--)if(i[n].group===t)return!0;return!1}},{"./Grid":12,"./Group":13,"./constants":43}],20:[function(t,i,n){"use strict";function r(t){s.call(this,t)}var e=t("../../constants"),o=t("./DiamondZone"),s=(t("../../Grid"),t("./Heuristic")),h=t("util").inherits,a=t("../../log"),u=(t("../../test"),e.EMPTY),c=e.gc,l=e._e,f=e.af,p=e.bf,g=e.cf,d=e.df,v=e.ef,m=e.ff,y=e.gf,b=e.hf,w=e["if"],x=e.jf,k=e.kf,j=-1,q=0,M=1;h(r,s),i.g=r,r.prototype.lf=function(t,i,n){var r=this.Ga.Hc(t,i);if(this.mf[i][t]<0)return 0;var e,o=1-n;if(this.nf(r,n)&&this.nf(r,o)){var s=[];e=[],this.pf(r,o,s,e)!==M||e.length||this.rf.qf(s,r,r,o)}var h=[];switch(e=[],this.pf(r,n,h,e)){case q:return this.sf(r,n,h);case M:this.rf.qf(h,r,r,n);for(var a=e.length-1;a>=0;a--)this.rf.qf(h,r,e[a],n);return 0;default:return 0}},r.prototype.pf=function(t,i,n,r){for(var e=1-i,s=0,h=0,a=0,S=!1,G=0;8>G;G++){var Y=G%2,D=t.Pe[G];switch(D.color){case c:continue;case u:continue;case i:var C=D.group;Y?h++:(s++,1===C.Yc&&(S=!0)),n.indexOf(C)<0&&n.push(C);break;default:if(1===D.group.Yc)break;Y||a++}}if(n.length<2)return j;if(4===s)return S?M:q;var T=new o(t,i),E=T.tf;T.normalize();var B,L,O;if(t.We()){if(t.Ue())return q;if(3===s)return S?M:q;if(2===s){if(S)return M;if(E[f].color!==i){if(!a)return q}else{if(E[m].color===u)return q;if(!a)return q;if(E[g].group.Yc<=3)return q}}else if(1===s){if(!a)return q;if(E[f].color===u){if(E[g].group.Yc<4)return q;if(O=E[m],O.color===i)return q;O.color===u&&(r.push(O),r.push(E[f]))}}else{if(!a)return q;if(E[f].color===u)return q;if(a>1)return j;if(1===E[v].group.Yc||1===E[m].group.Yc)return j}return M}if(3===s){if(S)return M;if(!a)return q;if(3===n.length)return M;if(E[g].group===E[p].group){if(E[b].color===u)return q}else if(E[y].color===u)return q;return M}if(2===s){if(E[d].group===E[p].group)return a||E[y].color===e&&E[m].color===e?M:q;if(E[f].color===i){if(4===h)return q;if(3===h){if(!a)return q;if(1===a){if(E[g].color===e)return q;if(E[x].color!==e||E[x].group.Yc<3)return q}}else if(2===h)if(E[m].color===i){if(!a)return q;if(1===a&&E[g].color===e)return q}else if(E[v].color===i){if(a)return M;if(E[y].color!==e||E[m].color!==e)return q;r.push(E[g]),r.push(E[d]),E[y].color!==e&&r.push(E[y]),E[m].color!==e&&r.push(E[m])}else{if(a)return M;if(E[v].color!==e||E[m].color!==e)return q;r.push(E[g]),r.push(E[d]),E[v].color!==e&&r.push(E[v]),E[m].color!==e&&r.push(E[m])}else{if(1!==h)return a?M:E[g].We()||E[d].We()?q:E[k].We()&&(L=E[d],0===this.vf[e][L.$c][L.Zc])?q:E[x].We()&&(B=E[g],0===this.vf[e][B.$c][B.Zc])?q:(E[g].Ze(e)<3&&r.push(E[g]),E[d].Ze(e)<3&&r.push(E[d]),M);if(!a)return q}}else if(3===h){if(2===n.length)return q;if(E[b].color===u){if(E[x].color!==e||E[w].color!==e)return q;if(2>a)return q}else r.push(E[f]),r.push(E[g])}else if(2===h)if(E[b].color===u){if(E[v].color!==i)return q;if(0===a)return q;if(2===n.length)return E[p].group!==E[d].group?q:E[g].color===u?j:E[m].color===u?(r.push(E[f]),M):j;E[g].color===u&&r.push(E[g])}else{if(E[b].color===i){if(2===a)return j;var H=E[m].color===e,I=E[y].color===e;return 0===a?H||I?(r.push(E[f]),r.push(E[g]),M):q:(E[g].color!==u||I?E[f].color!==u||H||r.push(E[d]):r.push(E[g]),M)}if(E[v].color!==i){if(2===a)return M;if(0===a){if(E[v].color!==u)return M;r.push(E[v]),r.push(E[f]),r.push(E[g])}return M}if(a)return M;var P=E[x].color,A=E[w].color;if(E[d].group.Yc>2&&P!==e)return q;E[m].color!==u||P===e&&A===e||r.push(E[m]),S||(r.push(E[f]),r.push(E[g]))}else if(1===h){if(E[v].color===i)return a||(r.push(E[f]),r.push(E[g])),M;if(E[b].color===u)return q;if(1===E[b].group.Yc)return q;E[f].color===u&&r.push(E[f]),E[g].color===u&&r.push(E[g])}else{if(E[b].color===u)return q;if(!a){if(1===E[l].Xe())return q;r.push(E[f]),r.push(E[g])}}}else if(1===s)if(4===h){if(0===a)return q}else if(3===h){if(E[v].color!==i){if(E[d].color===u)return q}else if(E[d].color===u){if(E[k].color!==e)return q;if(E[v].group===E[m].group)return q;0===a?(r.push(E[g]),r.push(E[f]),r.push(E[d])):1===a&&E[g].color===e&&(r.push(E[f]),r.push(E[d]))}}else if(2===h){if(E[v].color===u&&E[d].color===u)return q}else a||(r.push(E[d]),E[b].color===u&&(r.push(E[f]),r.push(E[g]),E[k].color!==e&&r.push(E[b])));else if(4===h){if(0===a&&n.length<4)return q}else{if(3!==h)return E[y].color===i&&E[b].color===i?E[p].color===u?j:E[p].group.Yc<=2?M:j:M;if(E[d].color===u&&E[b].group===E[y].group||E[p].color===u&&E[b].group===E[m].group)return q}return M},r.prototype.sf=function(t,i,n){if(i!==this.color)return 0;a.debug;var r=this.yf.xf.wf(t);if(r.zf(t)&&2===n.length){if(this.yf.Af)return.5;var e=this.rf.Bf(n[0].Fd);return e>0&&1>e?.5:0}return r.color!==i?0:this.yf.Af?-.5:-1},r.prototype.Cf=function(t,i){return[this.Ga.Hc(t.Zc,i.$c),this.Ga.Hc(i.Zc,t.$c)]},r.prototype.Df=function(t,i,n){var r=Math.abs(i.Zc-t.Zc),e=Math.abs(i.$c-t.$c);if(r+e===1)return 0;var o,s=1-n,h=0;if(1===r&&1===e){var a=this.Cf(t,i),u=a[0],c=a[1];if(u.color===n||c.color===n)return 0;if(u.color===s&&h++,c.color===s&&h++,0===h)return 0;if(2===h)return 99;var l=u.color===s?0:1,f=a[l],p=a[1-l];return t.We()||i.We()?1===p.Xe()?f.group.Yc>2?1:0:0!==p.Ze(s)?1:0:1===p.Xe()?0!==p.Ze(s)?1:0:1}if(r+e===2){if(o=this.Ga.Hc((t.Zc+i.Zc)/2,(t.$c+i.$c)/2),o.color===n)return 0;if(o.color===s)return o.group.Yc;for(var g=o.Md.length-1;g>=0;g--)o.Md[g].color===s&&h++;return h>=1?1:t.We()&&i.We()?0:.5}if(r+e===3&&t.We()&&i.We()){for(var d=this.betweenStones(t,i),v=0,m=d.length-1;m>=0;m--)o=d[m],o.color===s&&(v+=o.group.Yc),0!==o.Ze(s)&&(v+=1);return v}return r+e},r.prototype.nf=function(t,i){for(var n=[],r=t.Md.length-1;r>=0;r--){var e=t.Md[r];switch(e.color){case u:n.push(e);break;case i:if(e.group.Yc>1)return e;break;default:if(1===e.group.Yc)return e.group.Nd()[0].Sc[0]}}for(var o=2,s=n.length-1;s>=0;s--)for(var h=n[s],a=h.Md.length-1;a>=0;a--){var c=h.Md[a];if(c!==t&&c.color===i&&0!==this.rf.Bf(c.group.Fd)){var l=this.Df(t,c,i);if(!(l>=2)&&(o-=2-l,.5>=o))return c}}return null}},{"../../Grid":12,"../../constants":43,"../../log":46,"../../test":48,"./DiamondZone":21,"./Heuristic":24,util:4}],21:[function(t,i,n){"use strict";function r(t,i){this.color=i,this.tf=new Array(13);var n=t.Zc,r=t.$c,e=t.Ga.jc,o=t.Ga.Ya,s=this.tf,h=a.gc;s[l]=t,s[f]=e[r+1][n],s[v]=e[r+1][n-1],s[m]=e[r+1][n+1],s[p]=e[r-1][n],s[y]=e[r-1][n-1],s[b]=e[r-1][n+1],s[g]=e[r][n-1],s[d]=e[r][n+1],s[k]=n>2?e[r][n-2]:h,s[j]=o-1>n?e[r][n+2]:h,s[x]=r>2?e[r-2][n]:h,s[w]=o-1>r?e[r+2][n]:h}function e(t){return t===u?M:q[t+1]}function o(t,i){for(var n="",r=0;r<i.length;r++){var o=i[r];n+="string"==typeof o?o:e(t[o].color)}return n}var s=t("../../constants"),h=t("../../Grid"),a=t("../../Stone"),u=s.gc,c=s.EMPTY,l=s._e,f=s.af,p=s.bf,g=s.cf,d=s.df,v=s.ef,m=s.ff,y=s.gf,b=s.hf,w=s["if"],x=s.Ef,k=s.jf,j=s.kf;i.g=r;var q=h.bd+h.ed,M="|";r.prototype.toString=function(){var t=this.tf;return o(t,[" "," ",w," "," "])+"\n"+o(t,[" ",v,f,m," "])+"\n"+o(t,[k,g,"*",d,j])+"\n"+o(t,[" ",y,p,b," "])+"\n"+o(t,[" "," ",x," "," "])+"\n"},r.prototype.Ff=function(){var t,i=this.tf;t=i[f],i[f]=i[p],i[p]=t,t=i[w],i[w]=i[x],i[x]=t,t=i[v],i[v]=i[y],i[y]=t,t=i[m],i[m]=i[b],i[b]=t},r.prototype.Gf=function(){var t,i=this.tf;t=i[g],i[g]=i[d],i[d]=t,t=i[k],i[k]=i[j],i[j]=t,t=i[v],i[v]=i[m],i[m]=t,t=i[y],i[y]=i[b],i[b]=t},r.prototype.Hf=function(){var t,i=this.tf;t=i[g],i[g]=i[p],i[p]=i[d],i[d]=i[f],i[f]=t,t=i[k],i[k]=i[x],i[x]=i[j],i[j]=i[w],i[w]=t,t=i[v],i[v]=i[y],i[y]=i[b],i[b]=i[m],i[m]=t},r.prototype.If=function(){var t,i=this.tf;t=i[g],i[g]=i[f],i[f]=i[d],i[d]=i[p],i[p]=t,t=i[k],i[k]=i[w],i[w]=i[j],i[j]=i[x],i[x]=t,t=i[v],i[v]=i[m],i[m]=i[b],i[b]=i[y],i[y]=t},r.prototype.normalize=function(){var t,i=this.color,n=this.tf;if(n[l].We()){n[f].color===u?this.Ff():n[g].color===u?this.If():n[d].color===u&&this.Hf();var r=n[g].color===i,e=n[d].color===i;return void(r&&!e?this.Gf():r===e&&n[v].color===i&&n[m].color!==i&&this.Gf())}var o=!1,s=!0,h=!0,a=n[f].color===i?1:0,c=n[p].color===i?1:0,w=n[g].color===i?1:0,x=n[d].color===i?1:0;a>c?(this.Ff(),w>x&&this.Gf(),w!==x&&(o=!0)):c>a?(w>x&&this.Gf(),w!==x&&(o=!0)):c?w>x?this.If():x>w?this.Hf():(s=!1,w&&(h=!1)):w>x?this.If():x>w?this.Hf():(w?this.If():h=!1,s=!1);var k=n[m].color===i?1:0,j=n[y].color===i?1:0;if(s&&o)n[f].color!==i&&n[g].color!==i&&k&&!j&&(this.Hf(),this.Gf());else{var q=n[v].color===i?1:0,M=n[b].color===i?1:0;s||(q+k>j+M?(this.Ff(),t=q,q=j,j=t,t=k,k=M,M=t):o||(o=!0,!h&&k>q&&M>j?this.Hf():!h&&q>k&&j>M?this.If():o=!1)),!o&&(j>M||j===M&&q>k)&&this.Gf()}};var S=[v,f,m,g,l,d,y,p,b],G=["TL","TOP","TR","LEFT","CENTER","RIGHT","BL","BOTTOM","BR"];r.prototype.uf=function(t,i){for(var n=this.tf,r=this.color,e=1-r,o={},s=0,h=0,a=0;a<S.length;a++){var l=n[S[a]],f=i[a],p=l.color;switch(p===r&&(a%2?s++:h++),f){case"o":if(p===r)continue;break;case"A":case"B":case"C":case"D":if(p!==r)break;var g=o[f];if(g){if(g!==l.group)break}else o[f]=l.group;continue;case"*":case" ":if(p===c)continue;break;case".":if(p!==r)continue;break;case"x":if(p===e)continue;break;case"?":continue;case"-":if(p===u)continue}return f+"!="+p+" in "+G[a]+"\n"+this}var d=parseInt(t[0]),v=parseInt(t[1]);return s!==d?"numDirects="+s:isNaN(v)||h===v?!0:"numDiags="+h}},{"../../Grid":12,"../../Stone":19,"../../constants":43}],22:[function(t,i,n){"use strict";function r(t){e.call(this,t)}var e=t("./Heuristic"),o=t("util").inherits;o(r,e),i.g=r,r.prototype.Jf=function(){this.yf.xf.Kf()}},{"./Heuristic":24,util:4}],23:[function(t,i,n){"use strict";function r(t){s.call(this,t),this.ic=new o(this.Ya,a),this.Lf=t.Nf.Mf}var e=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,a=e.gc;h(r,s),i.g=r,r.prototype.Jf=function(){var t=this.Ga;this.yf.xf.Of(t,this.ic),this.Pf()},r.prototype.Pf=function(){var t=this.yf.xf.Qf;for(var i in t)for(var n=~~i,r=t[n],e=r.group.color,o=r.Rf.length-1;o>=0;o--){var s=r.Rf[o];s.zf&&this.Lf.Sf(s.Tf,e)}}},{"../../Grid":12,"../../constants":43,"./Heuristic":24,util:4}],24:[function(t,i,n){"use strict";function r(t){this.yf=t,this.Wf(),this.Ga=t.Ga,this.Ya=t.Ga.Ya,this.Xf=new o(this.Ya,0,a),this.Yf=t.Yf,this.color=this.Zf=null,this.$f()}var e=t("../../constants"),o=t("../../Grid"),s=t("../../log"),h=t("../../helper"),a=e.gc,u=e.Uf,c=e.Vf;i.g=r,r.prototype.Wf=function(){var t=this.constructor;this.name=t.name||h._f(t),this.name.length<5&&(this.name+=this.yf.ag.length)},r.prototype.$f=function(){var t=this.yf.Nf;this.bg=t.cg,this.rf=t.Mf,this.mf=t.dg?t.dg.Xf.kc:null,this.eg=t.fg,this.gg=t.hg,this.vf=t.ig?t.ig.vf:null},r.prototype.jg=function(t){this.color=t,this.Zf=1-t},r.prototype.Jf=function(t,i){for(var n=s.level,r=this.yf.color,e=this.Xf.kc,o=1;o<=this.Ya;o++)for(var h=1;h<=this.Ya;h++){var a=t[o][h];if(!(u>a)){a===c&&this.name===this.yf.kg&&s.lg(s.mg);var l=e[o][h]=this.lf(h,o,r);i[o][h]+=l,a===c&&s.lg(n)}}},r.prototype.ng=function(t,i,n){var r=this.Xf.kc[i][t];r&&(n[this.name]=r)},r.prototype.og=function(t,i,n,r){return this.yf.pg.get(this.name+"-"+t,i,n,r)}},{"../../Grid":12,"../../constants":43,"../../helper":44,"../../log":46}],25:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.qg=null}var e=t("../../constants"),o=(t("../../Grid"),t("./Heuristic")),s=t("util").inherits,h=t("../../log"),a=(t("../../test"),e.EMPTY);s(r,o),i.g=r,r.prototype.rg=function(t,i){for(var n=t.Nd(),r=n.length-1;r>=0;r--){var e=n[r];if(!(e.Yc>1)){var o=e.Sc.length;if(o>=i)return!0;for(var s=e.Nd(),h=s.length-1;h>=0;h--)if(o+=s[h].Yc-1,o>=i)return!0}}return!1},r.prototype.sg=function(t,i){for(var n=0,r=0,e=0,o=t.Md.length-1;o>=0;o--){var s=t.Md[o];switch(s.color){case a:e++;break;case i:e+=s.group.Yc-1,n++;break;default:1===s.group.Yc&&(r+=s.group.Sc.length)}}switch(r){case 0:return!(1>=e);case 1:return e?!0:!n;default:return!0}},r.prototype.tg=function(t,i,n,r){for(var e=!1,o=!1,s=1-i[0].color,h=i.length-1;h>=0;h--){var a=i[h];1===a.Yc&&(o=!0,(!n||1===n&&r)&&this.rf.ug(t,s),n||(!this.vg(a,n)||this.rg(a,1)?this.rf.wg(a,t):this.yf.Af&&(e=!0)))}return e&&this.rf.xg(t),o},r.prototype.yg=function(t,i,n){if(!i.$e(n))return!1;for(var r=i.Xc(n.color),e=r.length-1;e>=0;e--){var o=r[e];if(o.Yc>2)return!1;if(!t.$e(o))return!1}return!0},r.prototype.zg=function(t,i,n,r,e,o){for(var s,a=!1,u=t.Xc(r),c=i.length-1;c>=0;c--)if(s=i[c],2===s.Yc&&!this.rg(s,2)&&(0!==n.length||1!==u.length||2!==u[0].Yc)){if(1===n.length&&0===u.length){if(!this.yg(t,n[0],s))continue;a=!0,h.debug}e||!s.Fd.Ag()?o.push(s):h.debug}return a},r.prototype.Bg=function(t,i,n){return n&&i.Yc===n.Yc&&n.Jd()?!(t.$e(n)&&n.Pd(t)<1):!1},r.prototype.Cg=function(t,i,n,r){for(var e=!1,o=i.length-1;o>=0;o--){var s=i[o],h=s.Yc,a=null;h>2&&this.Bg(t,s,a)?(n||this.rf.Dg(s,t),e=!0):h>=2&&0===n&&!r&&(n||this.rf.Eg(s,t))}return e},r.prototype.Fg=function(){this.qg=[]},r.prototype.lf=function(t,i,n){return this.Gg(t,i,n,0),0},r.prototype.Gg=function(t,i,n,r,e){var o=this.Ga.Hc(t,i),s=o.Xc(1-n);if(!s.length)return!1;var a=o.Te(),u=this.tg(o,s,r,e),c=[],l=this.zg(o,s,a,n,r,c),f=!1;if(0===r&&(l&&!u?(this.qg.push(o),this.mf[i][t]+=2):this.mf[i][t]<-2&&(f=!0,this.mf[i][t]-=1e3,h.debug)),!l&&a.length<=1&&!this.sg(o,n))return!1;var p=this.Cg(o,s,r,f);if(!c.length)return u||p;this.Ga.Lc(t,i,n);for(var g=[!1,!1,!1],d=c.length-1;d>=0;d--)if(h.debug,!this.vg(c[d],r)){if(1===c.length){c.pop();break}g[d]=!0}this.Ga.Oc();var v=this.Hg(o,c,g,r);return h.debug&&(u||p||v),u||p||v},r.prototype.Hg=function(t,i,n,r){switch(i.length){case 0:return!1;case 1:return n[0]?!1:(r||this.rf.wg(i[0],t),!0);case 3:case 2:return r||(n[1]?this.rf.wg(i[0],t):this.rf.wg(i[1],t)),!0;default:throw new Error("Unexpected in Hunter#getMultipleChaseThreat")}},r.prototype.vg=function(t,i){var n=t.Ld();if(1!==n.length)throw new Error("Unexpected: hunter #1: "+n.length);var r=n[0],e=t.color,o=!0;return this.sg(r,e)&&(this.Ga.Lc(r.Zc,r.$c,e),o=this.Ig(r,i),this.Ga.Oc()),h.debug,o},r.prototype.Jg=function(t){for(var i=1-t.color,n=t.Md,r=n.length-1;r>=0;r--){var e=n[r];if(e.color===i){var o=e.group;if(1===o.Yc){var s=o.Ld()[0];return s.$e(t.group)?this.vg(o,1)?1:-1:1}}}return 0},r.prototype.Ig=function(t,i){var n=t.group;if(n.Yc<=1)return!0;if(n.Yc>2)return!1;var r=this.Jg(t);if(0!==r)return 0>r;var e=t.Te();if(2!==e.length&&(e=n.Ld()),2!==e.length)throw new Error("Unexpected: hunter #2");var o=e[0],s=e[1];h.debug;var a=1-n.color;return this.Gg(o.Zc,o.$c,a,i+1)||this.Gg(s.Zc,s.$c,a,i+1)},r.prototype.Kg=function(t){return this.Ig(t,1)},r.prototype.Lg=function(t,i,n){return this.Gg(t,i,n,1,n===this.Zf)}},{"../../Grid":12,"../../constants":43,"../../log":46,"../../test":48,"./Heuristic":24,util:4}],26:[function(t,i,n){"use strict";function r(t){s.call(this,t),this.Mg=[new o(this.Ya,a),new o(this.Ya,a)],this.vf=[this.Mg[c].kc,this.Mg[l].kc]}var e=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,a=e.gc,u=e.EMPTY,c=e.Ca,l=e.Da,f=2,p=1;h(r,s),i.g=r,r.prototype.Jf=function(){this.Mg[c].init(0),this.Mg[l].init(0);for(var t=1;t<=this.Ya;t++)for(var i=1;i<=this.Ya;i++){var n=this.Ga.Hc(i,t),r=n.color;if(r!==u)for(var e,o=this.vf[r],s=n.Md,h=0;e=s[h],h<s.length;h++)if(o[e.$c][e.Zc]+=f,e.color===u)for(var a,g=e.Md,d=0;a=g[d],d<g.length;d++)a!==n&&(o[a.$c][a.Zc]+=p)}}},{"../../Grid":12,"../../constants":43,"./Heuristic":24,util:4}],27:[function(t,i,n){"use strict";function r(t){h.call(this,t),this.debug=!1,this.ic=new s(this.Ya,null),this.Ng=[],this.Og="",this.Pg=this.og("spaceInvasion",2,.01,4),this.Qg=this.og("pressure",1,.01,2)}function e(){this.Ug=null,this.Vg=[!1,!1],this.Wg=0,this.Xg=[],this.Yg=[],this.Zg=[]}function o(t,i,n){this.name=t,this.Wg=i,this.group=n,this.bh=1/0}var s=t("../../Grid"),h=(t("./boan/GroupInfo"),t("./Heuristic")),a=t("util").inherits,u=t("../../log"),c=(t("../../test"),.1);a(r,h),i.g=r,r.prototype.Jf=function(){this.debug=this.yf.Rg,this.ic.init(null),this.Ng.length=0},r.prototype.Sg=function(t,i){h.prototype.Jf.call(this,t,i)},r.prototype.lf=function(t,i){var n=this.ic.kc[i][t];return n?n.Tg():0},r.prototype.ng=function(t,i,n){var r=this.ic.kc[i][t];r&&r.Tg(n,this.name)},e.prototype.Tg=function(t,i){var n=this.Wg;t&&n&&(t[i+"-base"]=n);var r=this.Xg;if(!r.length)return n;for(var e=r.length-1;e>=0;e--){var o=r[e],s=o.Wg*this.Yg[e];if(n+=s,t){var h=this.Yg[e],a=1!==h?" factor:"+h.toFixed(2):"";t[i+"-"+o+a]=s}}return n},r.prototype.$g=function(t,i){return this.ic.kc[i][t]},r.prototype._g=function(t,i){var n=this.ic.kc[i][t];return n?n:(this.ic.kc[i][t]=n=new e,n)},r.prototype.Sf=function(t,i){u.debug,this._g(t.Zc,t.$c).Ug=i},r.prototype.ah=function(t,i){var n=this.$g(t.Zc,t.$c);return n&&n.Ug===i},r.prototype.ug=function(t,i){this._g(t.Zc,t.$c).Vg[i]=!0},r.prototype.Vg=function(t,i){var n=this.$g(t.Zc,t.$c);return n&&n.Vg[i]},o.prototype.toString=function(){return this.name+(this.bh!==1/0?" minMoves:"+this.bh:"")+" score:"+this.Wg.toFixed(2)},r.prototype.dh=function(t,i,n){this.Og=t+" on "+i.toString(1),n.Zc===this.yf.eh&&n.$c===this.yf.fh?u.lg(u.mg):u.level===u.mg&&u.lg(u.gh)},r.prototype.hh=function(t){var i=this.Ng[t.vc];if(i)return i;for(var n=2*t.Sc.length,r=t.Ld(),e=0,s=r.length-1;s>=0;s--)e+=r[s].Ye();return n+=this.Pg*Math.max(0,e-1),this.Ng[t.vc]=i=new o("life/death of "+t.toString(1),n,t),i},r.prototype.ih=function(t,i,n,r){if(!i)throw new Error("Unexpected");n=n||1,r=r||1,u.debug;var e=this._g(i.Zc,i.$c),o=e.Xg,s=e.Yg,h=e.Zg,a=o.indexOf(t);return 0>a?(o.push(t),s.push(n),h.push(r)):(s[a]=Math.max(s[a],n),h[a]=Math.min(h[a],r)),t.bh=Math.min(t.bh,r),t},r.prototype.Bf=function(t){var i=t.Bf;if(void 0!==i)return i;var n,r=t.jh;n=r?r.kh:[t];var e=this.eg.lh(n);return i=t.Bf=this.mh(e,t.group.color===this.yf.Ma)},r.prototype.mh=function(t,i){return t>=2?1:1.5>t?0:i?1:.5},r.prototype.nh=function(t,i,n,r,e,o){r=r||1;var s,h=t[0].group.color===this.yf.Ma,a=this.eg.lh(t),l=this.mh(a,h);if(o){var f=this.mh(a+o,!0);s=l-f,s=Math.min(2*s,1)}else s=1-l;if(r*=s,u.debug,c>r)return void u.debug;for(var p=e||0,g=t.length-1;g>=0;g--)p+=t[g].group.Yc;for(g=t.length-1;g>=0;g--)this.ph(t[g].group,i,n,r,p)},r.prototype.ph=function(t,i,n,r,e){if(!(c>r)){var o=this.hh(t);return n||this.qh(t,i,r,e),this.ih(o,i,r,e)}},r.prototype.qh=function(t,i,n,r){if(!(1===t.Sc.length&&t.Sc[0].Ue()||0===i.Ye()&&t.Sc.length<3)){r=r||1;for(var e=t.Nd(),o=e.length-1;o>=0;o--){var s=e[o];s.Yc===r&&(this.ph(s,i,!0,n,r),this.rh(s,i,n,r))}}},r.prototype.rh=function(t,i,n,r){for(var e=t.Fd.sh(i),o=e.length-1;o>=0;o--)this.nh(e[o],i,!0,n,r)},r.prototype.Eg=function(t,i){var n=1/(t.Yc+1)*this.Qg;if(this.Bf(t.Fd)<.5){if(!this.yf.Af)return 0;n=this.Yf}this._g(i.Zc,i.$c).Wg+=n,this.debug&&i.Zc===this.yf.eh&&i.$c===this.yf.fh&&u.Ie("MoveInfo "+s.Bd(1-t.color)+" - pressure at "+i+": "+n.toFixed(2))},r.prototype.xg=function(t){this._g(t.Zc,t.$c).Wg+=this.Yf},r.prototype.Dg=function(t,i){this.debug&&this.dh("race",t,i);var n=t.Fd,r=n.jh?n.jh.kh:[n];this.nh(r,i,!1)},r.prototype.th=function(t,i,n,r){this.debug&&this.dh("eye threat",t,i);var e=t.Fd,o=e.jh?e.jh.kh:[e];return this.nh(o,i,n===t.color,void 0,void 0,-r),!0},r.prototype.qf=function(t,i,n,r){var e=t[0];this.debug&&this.dh("cut",e,i);for(var o=r===e.color,s=e.Fd.uh(t,i),h=s.length-1;h>=0;h--)this.nh(s[h],n,o,void 0,1)},r.prototype.wg=function(t,i){this.debug&&this.dh("kill",t,i);for(var n=t.Fd.sh(i),r=n.length-1;r>=0;r--)this.nh(n[r],i,!1);this.ph(t,i,!1,1,t.Yc)},r.prototype.vh=function(t,i){this.debug&&this.dh("rescue",t,i),this.rh(t,i),this.ph(t,i,!0)}},{"../../Grid":12,"../../log":46,"../../test":48,"./Heuristic":24,"./boan/GroupInfo":38,util:4}],28:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.wh=null}var e=t("../../Grid"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log");s(r,o),i.g=r,r.prototype.Fg=function(){this.wh||(this.wh=this.yf.Nf.xh)},r.prototype.lf=function(t,i,n){if(this.vf[1-n][i][t]<2&&this.vf[n][i][t]<2&&0===this.Ga.Hc(t,i).Ze(n))return 0;var r,o=this.Ga.Lc(t,i,n),s=o.group,a=0;return h.debug&&(r=e.gb(t,i)),1===s.Yc?1===s.Sc.length&&o.Te()[0].Gc(this.Zf)?h.debug:(a-=2*s.Sc.length,h.debug):2===s.Yc&&(h.debug,this.wh.Kg(o)&&(a-=2*s.Sc.length,h.debug)),this.Ga.Oc(),a}},{"../../Grid":12,"../../log":46,"./Heuristic":24,util:4}],29:[function(t,i,n){"use strict";function r(t){s.call(this,t),this.Ch=[new o(this.Ya,u),new o(this.Ya,u)],this.Dh=this.og("wideSpaceToEye",.7,.01,1),this.Eh=this.og("stoneCountToEye",.33,.25,1)}var e=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,a=t("../../log"),u=e.gc,c=e.yh,l=e.zh,f=e.EMPTY,p=e.Ca,g=e.Da,d=e.Ah,v=e.Bh;h(r,s),i.g=r,r.prototype.Jf=function(){this.Fh()},r.prototype.Fh=function(){this.Ch[d].init(f),this.Ch[v].init(f);for(var t=this.Ya;t>=1;t--)for(var i=this.Ya;i>=1;i--){var n=this.Ga.Hc(i,t);if(n.color===f){var r=this.Gh(i,t,n);if(null!==r){var e=this.yf.xf.wf(n);if(!e.Hh&&!this.rf.ah(n,r)){for(var o=n.Md,s=null,h=this.vf[1-r],u=1,p=o.length-1;p>=0;p--){var g=o[p];g.color===r&&(s=g.group),1!==u||g.We()||0!==h[g.$c][g.Zc]||g.Ye()!==g.Md.length||(u=2)}if(!s){if(!n.Ue())continue;if(s=n.Ve().group,!s)continue}if(n.We()){for(var m=!1,y=1-r,b=l;b>=c;b-=2){var w=n.Pe[b];if(w.color===y){m=!0;break}}if(m)continue}var x=(i+t)%2,k=this.Ch[x].kc;k[t][i]=r,s.Fd.Ih(x,u),a.debug}}}}},r.prototype.Jh=function(t,i){var n=t.Zc,r=t.$c,e=(n+r)%2;return this.Ch[e].kc[r][n]===i},r.prototype.Gh=function(t,i,n){var r=this.vf[p][i][t],e=this.vf[g][i][t],o=r>e?p:g,s=Math.max(r,e),h=Math.min(r,e);if(h>1)return null;var a=0,u=this.Ya;return 1===h&&n.Ue()&&n.Ve().color===f&&a++,1!==t&&t!==u&&1!==i&&i!==u||a++,0>s+a-3-h?null:o},r.prototype.Kh=function(t){for(var i=0,n=t.color,r=this.vf[1-n],e=this.vf[n],o=t.Sc,s=o.length-1;s>=0;s--){var h=o[s];if(!h.We())for(var a=h.Pe.length-1;a>=0;a--){var u=h.Pe[a];if(u.color===f&&!(e[u.$c][u.Zc]>4)){var c=r[u.$c][u.Zc];if(!(c>1)){var l=u.Xe();if(0!==l)if(1!==l){var p=u.Zc-h.Zc,g=u.$c-h.$c,d=u.Zc+p,v=u.$c+g;0===r[v][d]&&i++}else{if(c>0)continue;i++}}}}}return i},r.prototype.lh=function(t){for(var i=0,n=0,r=t.length-1;r>=0;r--){var e=t[r];i+=e.Lh(),n+=e.group.Sc.length}6>n&&(i=Math.min(i,n*this.Eh));var o=0;for(r=t.length-1;r>=0;r--)o+=this.Kh(t[r].group);return i+=o*this.Dh}},{"../../Grid":12,"../../constants":43,"../../log":46,"./Heuristic":24,util:4}],30:[function(t,i,n){"use strict";function r(t){h.call(this,t),this.Oh=new s(this.Ya,l),this.Ph=this.Oh.kc,this.Qh=new s(this.Ya,l),this.Mg=[new s(this.Ya,l),new s(this.Ya,l)],this.Rh=new s(this.Ya,l),this.Sh()}function e(t,i,n){switch(t){case v:return[i,1];case m:return[1,i];case y:return[i,n];case b:return[n,i]}}var o=t("../../constants"),s=t("../../Grid"),h=t("./Heuristic"),a=t("util").inherits,u=t("../../log"),c=t("../../Stone"),l=o.gc,f=o.EMPTY,p=o.Ca,g=o.Da,d=o.NEVER,v=o.Mh,m=o.df,y=o.Nh,b=o.cf,w=o.Ne,x=o.Oe,k=s.pd,j=c.Qe,q=c.Re;a(r,h),i.g=r,r.prototype.Jf=function(){this.Oh.rd(this.Ga),this.Th(p),this.Th(g),this.Uh()},r.prototype.Vh=function(t,i,n){var r=n===p?-1:1,e=d;return s.pd[2+this.Mg[p].kc[i][t]]===r&&e++,s.pd[2+this.Mg[g].kc[i][t]]===r&&e++,e},r.prototype.Wh=function(t,i,n){return this.Rh.kc[i][t]*(n===p?1:-1)},r.prototype.Xh=function(t,i,n){var r=s.pd[2+this.Mg[1-n].kc[i][t]];return r*(n===p?1:-1)},r.prototype.toString=function(){return"\nBLACK first:\n"+this.Mg[p]+"WHITE first:\n"+this.Mg[g]},r.prototype.Yh=function(){this.Oh.rd(this.Ga);var t=(this.Ga.Gb(),this.Mg[p]);return this.Zh(this.Oh,t.K(this.Oh)),this.$h(t.kc,g),this.$h(t.kc,p),this.yf.xf.pe(this.Ga),this.yf.xf.Xf},r.prototype.Zh=function(t,i){for(var n=t.kc,r=i.kc,e=~~(2*Math.random()),o=this.Ya;o>=1;o--)for(var s=n[o],h=this.Ya;h>=1;h--)s[h]===f&&(this._h(n,r,h,o,e,1-e)?(this.ai(r,h,o,e),e=1-e):this._h(n,r,h,o,1-e,e)&&this.ai(r,h,o,1-e))},r.prototype.bi=function(t){return this.Mg[t].xc(function(t){return"@?O"[s.pd[2+t]+1]})},r.prototype.ci=function(t){for(t=this.Ga.Gb()-t;t-- >0;)this.Ga.Oc()},r.prototype.Th=function(t){var i=this.Ga.Gb(),n=this.Mg[t];this.di(n,t),this.yf.xf.ei(this.Ga,n,t),this.ci(i)},r.prototype.Uh=function(){for(var t=this.Mg[p].kc,i=this.Mg[g].kc,n=this.Rh.kc,r=this.Ya;r>=1;r--)for(var e=this.Ya;e>=1;e--)n[r][e]=(k[2+t[r][e]]+k[2+i[r][e]])/2;u.debug},r.prototype.di=function(t,i){this.fi=null,this.gi(this.Oh,t.K(this.Oh),i),u.debug,this.$h(t.kc,i),u.debug,this.hi(this.Qh.K(t)),this.fi=this.Qh.kc,u.debug,this.gi(this.Oh,t.K(this.Oh),i),u.debug,this.$h(t.kc,i),u.debug},r.prototype.gi=function(t,i,n){u.debug;for(var r=t.kc,e=i.kc,o=this.Ya;o>=1;o--)for(var s=r[o],h=this.Ya;h>=1;h--)s[h]===f&&this._h(r,e,h,o,n,1-n)&&this.ai(e,h,o,n)},r.prototype.hi=function(t){for(var i=t.kc,n=1;n<=this.Ya;n++)for(var r=1;r<=this.Ya;r++)if(this.Ph[n][r]===f){var e=i[n][r];if(e!==f){var o=this.ii(i,r,n,1-e);0===o&&(i[n][r]=f)}}},r.prototype._h=function(t,i,n,r,e,o){switch(this.ii(t,n,r,e)){case 0:if(!this.ji(t,n,r,e))return!1;break;case 4:return!1;case 3:if(0===this.ii(t,n,r,o))return!1}return!0},r.prototype.ai=function(t,i,n,r,e){if(this.fi){if(!e&&this.fi[n][i]===f)return!1;var o=this.Ga.Hc(i,n);if(o.Cc(r))return!1;this.Ga.Lc(i,n,r)}return t[n][i]=r,!0},r.prototype.ii=function(t,i,n,r){for(var e=0,o=w;x>=o;o++){var s=j[o];t[n+s[1]][i+s[0]]===r&&e++}return e},r.prototype.ji=function(t,i,n,r){for(var e=w;x>=e;e++){var o=q[e];if(t[n+o[1]][i+o[0]]===r)return!0}return!1},r.prototype.Sh=function(){for(var t=[],i=w;x>=i;i++)for(var n=j[i][0],r=j[i][1],o=this.Ya-1;o>=2;o--){var s=e(i,o,this.Ya);t.push([s[0],s[1],n,r])}this.ki=t},r.prototype.$h=function(t,i){for(var n,r,e,o,s,h,a=this.ki,u=a.length-1;u>=0;u--){var c=a[u],l=c[0],p=c[1];if(t[p][l]===f){var g=c[2],d=c[3],v=l+g,m=p+d,y=t[m][v];if(y===f){var b=v+g,w=m+d;if(y=t[w][b],y===f){var x=b+g,k=w+d;if(y=t[k][x],y===f);else{if(y!==i)continue;if(n=t[p-g][l-d],
r=t[p+g][l+d],e=t[m-g][v-d],o=t[m+g][v+d],s=t[w-g][b-d],h=t[w+g][b+d],n===y&&e===y&&s===y)continue;if(r===y&&o===y&&h===y)continue;if(this.ai(t,b,w,y,!0),n===y&&e===y)continue;if(r===y&&o===y)continue;if(this.ai(t,v,m,y,!0),n===y||r===y)continue;this.ai(t,l,p,y,!0)}}else{if(y!==i)continue;if(n=t[p-g][l-d],r=t[p+g][l+d],e=t[m-g][v-d],o=t[m+g][v+d],n!==1-y&&e===y)continue;if(r!==1-y&&o===y)continue;if(this.ai(t,v,m,y,!0),n===y||r===y)continue;this.ai(t,l,p,y,!0)}}else{if(y!==i)continue;if(n=t[p-g][l-d],r=t[p+g][l+d],e=t[m-g][v-d],o=t[m+g][v+d],n===y&&e!==1-y)continue;if(r===y&&o!==1-y)continue;this.ai(t,l,p,y,!0)}}}}},{"../../Grid":12,"../../Stone":19,"../../constants":43,"../../log":46,"./Heuristic":24,util:4}],31:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.li=[],this.mi=this.og("allyInfl",.03,.01,1),this.ni=this.og("enemyInfl",.13,.01,1)}var e=t("../../constants"),o=(t("../../Grid"),t("./Heuristic")),s=t("util").inherits,h=t("../../log"),a=t("../../Stone"),u=e.EMPTY,c=a.Qe,l=e.Ne,f=e.Oe;s(r,o),i.g=r,r.prototype.Jf=function(t,i){var n=this.li;n.length=0,o.prototype.Jf.call(this,t,i);for(var r=n.length-1;r>=0;r--)this.oi(n[r],i)},r.prototype.lf=function(t,i,n){return this.pi(t,i,1-n,!0),this.pi(t,i,n)},r.prototype.qi=function(t,i,n,r,e){if(!(this.mf[t.$c][t.Zc]<0)){var o=1-n.group.color,s=this.bg.nf(t,o);s&&(this.rf.Bf(s.group.Fd)<.5||(h.debug,e[t.$c][t.Zc]+=r,this.Xf.kc[t.$c][t.Zc]+=r))}},r.prototype.oi=function(t,i){var n=t[0],r=t[1],e=t[2];if(this.qi(n,n,r,e,i),!this.rf.Vg(n,r.color)){var o=r.group;if(!n.$e(o))for(var s=0;8>s;s++){var h=n.Pe[s];h.color===u&&h.$e(o)&&this.qi(h,n,r,e,i)}}},r.prototype.pi=function(t,i,n,r){var e=this.vf[1-n][i][t];if(0===e)return 0;var o=this.vf[n][i][t];if(o>=4)return 0;if(!r&&this.mf[i][t]<0)return 0;var s=this.Ga.Hc(t,i);if(0===s.Ye())return 0;var a=this.bg.nf(s,n);if(!a)return 0;if(!r&&!this.bg.nf(s,1-n))return 0;var u=this.ri(t,i,n),c=u+this.ni*e-this.mi*o;return c*=this.rf.Bf(a.group.Fd),r?c?(h.debug,this.li.push([s,a,c])):0:(h.debug,c)},r.prototype.si=function(t,i,n,r,e){var o=this.Ga.Hc(t,i);if(o.color!==u)return 0;var s=this.gg.Xh(t,i,r);if(o.We()&&(s/=2),0>=s)return 0;if(0===--e)return s;var h=c[n][0],a=c[n][1],l=c[(n+3)%4],f=l[0],p=l[1];return s+=this.si(t+h+f,i+a+p,n,r,e),s+=this.si(t+h-f,i+a-p,n,r,e)};var p=1;r.prototype.ri=function(t,i,n){for(var r=Math.max(0,this.gg.Xh(t,i,n)),e=l;f>=e;e++)r+=this.si(t+c[e][0],i+c[e][1],e,n,p);var o=this.Ga.Hc(t,i);return o.Ue()?r=Math.max(r-1,0):o.We()&&(r=Math.max(r-.85,0)),r}},{"../../Grid":12,"../../Stone":19,"../../constants":43,"../../log":46,"./Heuristic":24,util:4}],32:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.wh=null}var e=t("../../constants"),o=(t("../../Grid"),t("./Heuristic")),s=t("util").inherits,h=t("../../log"),a=(e.ALWAYS,e.EMPTY),u=e.gc;s(r,o),i.g=r,r.prototype.Fg=function(){this.wh||(this.wh=this.yf.Nf.xh)},r.prototype.lf=function(t,i){var n=this.Ga.Hc(t,i);return this.ti(t,i,n),0},r.prototype.ti=function(t,i,n){for(var r,e,o=[],s=this.color,a=n.Xc(s),u=0;e=a[u],u<a.length;u++)1===e.Yc?o.push(e):2===e.Yc&&o.push(e);if(o.length&&(h.debug,this.wh.Lg(t,i,this.Zf))){this.Ga.Lc(t,i,s),h.debug;var c=!this.wh.Kg(n);this.Ga.Oc();var l;if(!c){for(r=o.length-1;r>=0;r--)if(e=o[r],1!==e.Yc){var f=e.Ld();if(l=f[0]===n?f[1]:f[0],this.Ga.Lc(l.Zc,l.$c,s),c=!this.wh.Kg(l),this.Ga.Oc(),c)break}if(!c)return void h.debug;n=l}for(r=o.length-1;r>=0;r--)e=o[r],l&&1===e.Yc||(this.rf.vh(e,n),h.debug)}},r.prototype.ui=function(t,i,n){var r=0,e=0,o=this.Ya;if(1===i||i===o)e=1;else{if(1!==n&&n!==o)throw new Error("not along border");r=1}var s=e,h=r;if(this.Ga.Hc(i+s,n+h).color===u&&(s=-s,h=-h),this.Ga.Hc(i+s,n+h).group!==t){var c=t.color,l=this.Ga.Hc(i+r,n+e);for(l.group===t&&(r=-r,e=-e);;)switch(i+=r,n+=e,l=this.Ga.Hc(i,n),l.color){case u:return null;case c:return l.group.Yc>2?l.group:null;case a:var f=this.Ga.Hc(i+s,n+h);if(f.color===a)continue;return f.color===1-c?null:f.group.Yc>2?f.group:null;default:return null}}}},{"../../Grid":12,"../../constants":43,"../../log":46,"./Heuristic":24,util:4}],33:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.Ch=t.Nf.fg.Ch}var e=t("../../constants"),o=(t("../../Grid"),t("./Heuristic")),s=t("util").inherits,h=t("../../log"),a=e.EMPTY,u=e.NEVER,c=e.vi,l=e.Ah,f=e.Bh;s(r,o),i.g=r,r.prototype.Jf=function(t,i){o.prototype.Jf.call(this,t,i);var n=this.yf.xf.Qf;for(var r in n){var e=n[~~r].group;this.wi(i,e)}},r.prototype.wi=function(t,i){var n=[],r=i.Fd.xi(n);if(r===c){var e=this.Ga.Hc(n[0],n[1]);h.debug,this.rf.th(i,e,this.color,.5)}},r.prototype.lf=function(t,i,n){var r=this.Ga.Hc(t,i);return this.yi(r,n),this.yi(r,1-n),this.zi(r,n)},r.prototype.yi=function(t,i){if(this.gg.Vh(t.Zc,t.$c,i)!==u){var n=this.yf.xf.wf(t);n.Hh&&n.color===i?this.Ai(t,i,n):this.Bi(t,i)}},r.prototype.Ai=function(t,i,n){switch(n.Ci){case 1:for(var r=t.Md.length-1;r>=0;r--){var e=t.Md[r];if(e.color===i&&1===e.group.Yc)return h.debug,this.rf.th(e.group,t,i,1)}return;case 2:var o=n.Hh;if(this.rf.ah(t,i))return this.rf.th(o.group,t,i,1);if(o.Di>1)return;var s=o.Ei.length&&o.Ei[0].group;if(s&&t.$e(s)&&(1===s.Yc||!t.Ue()))return this.rf.th(o.group,t,i,1);return;default:return}},r.prototype.Bi=function(t,i){if(!(this.mf[t.$c][t.Zc]<0)&&this.bg.nf(t,1-i)){for(var n=this.Ch[l].kc,r=this.Ch[f].kc,e=this.vf[1-i],o=null,s=null,h=0,u=t.Md.length-1;u>=0;u--){var c=t.Md[u];switch(c.color){case a:var p=c.Zc,g=c.$c;if(n[g][p]===i||r[g][p]===i){if(1===e[g][p]&&2!==e[t.$c][t.Zc])continue;o=c,h++,o.Ue()&&2===o.Ye()&&h++}break;case i:s||(s=c.group)}}o&&(s||(s=o.Xc(i)[0]),this.rf.th(s,t,i,h/2))}},r.prototype.zi=function(t,i){var n,r=t.Te(),e=r.length,o=this.yf.xf.wf(t);if(o.Hh&&o.color===i){if(0===e)return-1;if(1===e)return this.eg.Jh(r[0],i)?0:-1;if(1===this.rf.Bf(o.Hh))return 0;var s=t.Ze(i);if(3===e&&1===s)return.5;for(n=e-1;n>=0;n--){var h=r[n];if(!this.rf.ah(h,i)&&1===h.Ye())return.5}}else{r=t.Te();var a=!1;for(n=e-1;n>=0&&!a;n--)a=this.eg.Jh(r[n],i);if(!a)return 0;if(t.Ue())return-1;if(t.We())return-.2;if(e>=3&&!this.vf[1-i][t.$c][t.Zc])return 1}return 0}},{"../../Grid":12,"../../constants":43,"../../log":46,"./Heuristic":24,util:4}],34:[function(t,i,n){"use strict";function r(t){o.call(this,t),this.Fi=this.og("enemyInfl",.07,.01,.5),this.Gi=this.og("allyInfl",.5,.01,.5),this.Hi=this.og("border",10,0,20),this.Ii=this.Ya<=9?[0,.2,.8,.95,1]:[0,.2,.8,1,.95,.8]}var e=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=e.EMPTY;s(r,o),i.g=r,r.prototype.lf=function(t,i){var n=0;if(!this.yf.Af){var r=this.gg.Wh(t,i,this.color);0>r&&(n+=r)}for(var e=this.Ga.Hc(t,i),o=this.vf[this.Zf],s=this.vf[this.color],a=o[i][t],u=s[i][t],c=e.Md.length-1;c>=0;c--){var l=e.Md[c];if(l.color!==h)return n;a+=o[l.$c][l.Zc],u+=s[l.$c][l.Zc]}var f=1+this.Ya/9*(this.Fi*Math.max(a-3,0)+this.Gi*Math.max(u-3,0)),p=this.Ii.length-1,g=Math.min(this.Xe(t),p),d=Math.min(this.Xe(i),p),v=this.Ii[g]*this.Ii[d]*this.Hi;return n+v/f},r.prototype.Xe=function(t){return Math.min(t-1,this.Ya-t)}},{"../../constants":43,"./Heuristic":24,util:4}],35:[function(t,i,n){"use strict";function r(t){this.Ji=t.group.vc,this.kh=[t],t.jh=this}function e(t){return"#"+t.group.vc}var o=t("../../../log");i.g=r,r.prototype.toString=function(){return this.kh.map(e).toString()},r.prototype.Ki=function(t){if(!t.jh)return o.debug,this.kh.push(t),void(t.jh=this);if(t.jh.Ji!==this.Ji){o.debug;for(var i=t.jh.kh,n=i.length-1;n>=0;n--)this.kh.push(i[n]),i[n].jh=this}},r.prototype.remove=function(t){var i=this.kh.indexOf(t);if(0>i)throw new Error("Band.remove on wrong Band");this.kh.splice(i,1),t.jh=null,o.debug},r.Li=function(t){if(1===t.length)throw new Error("add Band of 1");for(var i=null,n=0;n<t.length;n++)if(t[n].Fd.jh){i=t[n].Fd.jh;break}var e=0;for(i||(i=new r(t[e++].Fd)),n=e;n<t.length;n++)i.Ki(t[n].Fd)}},{"../../../log":46}],36:[function(t,i,n){"use strict";function r(t){this.fe=t,this.version="chuckie",this.mode=null,this.Af=!1,this.Ga=null,this.Pi=null,this.Xf=null,this.Qi=[],this.Qf=null,this.qe=[0,0],this.re=[0,0],this.Ri=null}function e(t){return t>1&&2>t?t-1:t}function o(t){return t[m]===t[y]||t[m]>=b&&t[y]>=b?void 0:(t[m]=e(t[m]),t[y]=e(t[y]),t[m]>t[y]?m:y)}function s(t,i){for(var n=0;n<i.length;n++){var r=i[n];f.debug,r.lj()!==w&&(i[n]=null)}var e=0;for(n=0;n<i.length;n++)i[n]&&(i[n].mj(t.name+": liveliness="+i[n].nj.toFixed(4)),e++);return e}function h(t,i){for(var n=0;n<i.length;n++)i[n].mj(t.name);return i.length}function a(){return 0}var u=t("../../../constants"),c=t("../../../Grid"),l=t("./GroupInfo"),f=t("../../../log"),p=t("./Void"),g=t("./ZoneFiller"),d=u.EMPTY,v=u.gc,m=u.Ca,y=u.Da,b=l.Mi,w=l.Ni,x=l.Oi,k=0,j=1,q=2;i.g=r,r.prototype.pe=function(t){f.debug,this.qe[m]=this.qe[y]=0,this.re[m]=this.re[y]=0,this.Xf&&this.Xf.Ya===t.Ya||(this.Xf=new c(t.Ya,v)),this.Si(k,t,this.Xf)&&(this.Ti(),this.Af||t.Rc(this.re))},r.prototype.oe=function(){return this.Xf},r.prototype.wf=function(t){return this.Pi.kc[t.$c][t.Zc]},r.prototype.Of=function(t,i){this.Si(q,t,i)},r.prototype.Kf=function(){this.Ti()},r.prototype.ei=function(t,i,n){this.Si(j,t,i)&&this.Ti(n)},r.prototype.wc=function(){return this.Pi.wc()},r.prototype.Ac=function(){for(var t,i="Grid:\n"+this.Pi.Bc()+"Voids:\n",n=this.Qi,r=0;t=n[r],r<n.length;r++)i+=t.toString()+"\n";i+="Groups:\n";for(var e in this.Qf)i+=this.Qf[~~e].toString()+"\n";return this.qe&&(i+="Score:"+this.qe.map(function(t,i){return" player "+i+": "+t+" points"})),i},r.prototype.Si=function(t,i,n){return this.mode=t,this.Af=this.fe.xa&&t===k,this.Ga=i,this.Pi=n,this.Ri=new g(i,n),0===i.Gb()?!1:(n.rd(i),this.Ui(),this.Vi(),this.Wi(),!0)},r.prototype.Ti=function(t){this.mode===q?this.Xi():(this.Yi(),this.Xi(t),this.Zi(),this.$i())},r.prototype._i=function(t,i){var n=this.Qf[t.vc];n||(t.Fd&&t.Fd.xf===this?t.Fd.aj():t.Fd=new l(t,this),n=this.Qf[t.vc]=t.Fd),n.bj.push(i)},r.prototype.Ui=function(){f.debug;var t=c.kd;this.Qf={},this.Qi.length=0;for(var i,n,r=this.Ga,e=new p(r,t++),o=1;o<=r.Ya;o++)for(var s=1;s<=r.Ya;s++){var h=this.Ri.cj(s,o,d,e);if(0!==h){this.Qi.push(e);for(var a=m;y>=a;a++)for(n=e.dj[a],i=n.length-1;i>=0;i--)this._i(n[i],e);e=new p(r,t++)}}},r.prototype.Vi=function(){for(var t in this.Qf)this.Qf[~~t].ej()},r.prototype.Wi=function(){f.debug;for(var t=this.Qi,i=t.length,n=i-1;n>=0;n--)t[n].fj();for(var r;;){for(r=!1,n=i-1;n>=0;n--)t[n].gj()&&(r=!0);if(!r)break}for(n=i-1;n>=0;n--)t[n].hj()},r.prototype.Yi=function(){if(!this.Af){var t=this.Ga;if(!(t.Gb()<2*t.Ya))for(var i=[0,0],n=[0,0];;){for(var r=!1,e=this.Qi.length-1;e>=0;e--){var s=this.Qi[e];if(void 0===s.color&&!(s.Ci>2*t.Ya)){i[m]=i[y]=n[m]=n[y]=0;for(var h=m;y>=h;h++)for(var a=s.dj[h].length-1;a>=0;a--){var u=s.dj[h][a].Fd;i[h]+=u.ij(),n[h]+=u.jj()}if(!(n[m]>4&&n[y]>4)){var c=o(i);void 0!==c?(f.debug,s.kj(c),r=!0):f.debug}}}if(!r)break}}};var M={name:"brothers",l:l.prototype.oj},S={name:"singleEye",l:l.prototype.pj,qj:s},G={name:"race",l:l.prototype.lj,qj:a},Y={name:"atari",l:l.prototype.rj},D={name:"final",l:l.prototype.sj},C=[];C[k]=[M,Y,S,G,D],C[j]=[M,S],C[q]=[M,S,G],r.prototype.tj=function(t,i){f.debug;var n=0,r=0,e=[];for(var o in this.Qf){var s=this.Qf[~~o];if(!s.uj&&!s.vj)switch(r++,t.l.call(s,i)){case w:e.push(s);break;case x:n++}}return e.length&&(n+=t.qj?t.qj(t,e):h(t,e)),f.debug&&n,n===r?0:0===n?r:-n},r.prototype.Xi=function(t){if(!this.Af){for(var i,n=C[this.mode],r=0;r<n.length;){if(i=this.tj(n[r++],t),0===i)return void this.Wi();0>i&&(r=0,this.Wi())}f.debug&&i>0}},r.prototype.Zi=function(){for(var t=[],i=this.Qi.length-1;i>=0;i--){var n=this.Qi[i];t[m]=t[y]=!1;for(var r=m;y>=r;r++)for(var e,o=n.dj[r],s=0;e=o[s],s<o.length;s++)if(this.Af||e.Fd.ij()>=2){t[r]=!0;break}t[m]&&t[y]?n.wj():this.Af&&(n.color=t[m]?m:y)}},r.prototype.$i=function(){this.xj(),this.yj(),this.zj()},r.prototype.xj=function(){if(this.Af)for(var t in this.Qf){var i=this.Qf[~~t].group;this.qe[i.color]+=i.Sc.length}},r.prototype.yj=function(){if(!this.Af)for(var t in this.Qf){var i=this.Qf[~~t];if(i.vj){for(var n=!1,r=i.Aj.length-1;r>=0;r--)if(!i.Aj[r].Fd.vj){n=!0;break}var e=i.group.color;if(!i.Aj.length||n){var o=i.group.Sc[0],s=this.Ri.cj(o.Zc,o.$c,e,c.nd+e);this.re[e]+=s,this.qe[1-e]+=s}else for(var h=i.bj.length-1;h>=0;h--)i.bj[h].kj(e)}}},r.prototype.zj=function(){for(var t=this.Pi.kc,i=[],n=this.Qi.length-1;n>=0;n--){var r=this.Qi[n],e=r.Bj(this.Af?null:i);if(e){this.qe[r.color]+=e-i.length,this.Ri.cj(r.Zc,r.$c,r,c.od+r.color);for(var o=i.length-1;o>=0;o--){var s=i[o];t[s.$c][s.Zc]=c.md}}else this.Ri.cj(r.Zc,r.$c,r,c.md)}}},{"../../../Grid":12,"../../../constants":43,"../../../log":46,"./GroupInfo":38,"./Void":39,"./ZoneFiller":40}],37:[function(t,i,n){"use strict";function r(t,i){this.Tf=t,this.dj=[],this.color=i[0].color,this.zf=!1,this.Cj(i)}i.g=r,r.prototype.Cj=function(t){for(var i=this.dj,n=t.length-1;n>=0;n--){var r=t[n];i.indexOf(r)<0&&i.push(r)}}},{}],38:[function(t,i,n){"use strict";function r(t,i){this.xf=i,this.Dj=[],this.bj=[],this.Ei=[],this.Aj=[],this.Ej=[0,0],this.Rf=[],this.Fj=[],this.Gj=[],this.group=t,this.aj()}function e(t,i,n){for(var r=i.length-1;r>=0;r--)for(var e=i[r].Fd,o=t.length-1;o>=0;o--)if(!(t[o].indexOf(e)<0)){-1!==n&&n!==o?(t[n]=t[n].concat(t[o]),t.splice(o,1),n>o&&n--):n=o;break}return n}function o(t,i,n,r){var o=-1;o=e(t,n,o),o=e(t,r,o),0>o?t.push([i]):t[o].push(i)}function s(t,i,n){switch(t){case 4:return 4===i[2];case 5:return 1===i[3]&&3===i[2];case 6:if(2===i[3]&&4===i[2]){for(var r=0,e=0;6>e;e++)if(!n[e].We()&&++r>2)return!1;return!0}return 1===i[4]&&3===i[2]&&2===i[1];default:return!1}}function h(t){return.0202===t||1.0202===t}var a=t("../../../constants"),u=t("./Band"),c=t("../../../log"),l=a.EMPTY,f=a.NEVER,p=a.vi,g=a.ALWAYS,d=a.Ah,v=a.Bh;i.g=r;var m=r.Ni=-1,y=r.Oi=1,b=r.Hj=0,w=r.Mi=1e3;r.prototype.aj=function(){this.Di=this.nj=0,this.Dj.length=0,this.bj.length=0,this.jh=null,this.uj=this.vj=!1,this.Bf=void 0,this.Ij=void 0,this.Ei.length=0,this.Aj.length=0,this.Ej[d]=this.Ej[v]=0,this.Rf.length=0,this.Fj.length=0,this.Gj.length=0,this.Jj=0},r.Kj=function(t){return"#"+t.group.vc},r.prototype.toString=function(){var t=this.jh?this.jh.toString():"";return this.group.toString()+" (isAlive:"+this.uj+" isDead:"+this.vj+" voids:"+this.Dj.length+" brothers:["+t+"] deadEnemies:["+this.Ei.map(r.Kj)+"])"},r.prototype.Lj=function(t){return c.debug,this.Dj.push(t),this.Di++,this},r.prototype.Mj=function(t){var i=this.Dj.indexOf(t);if(-1===i)throw new Error("remove unknown void");c.debug,this.Dj.splice(i,1),this.Di--},r.prototype.ej=function(){for(var t=this.group,i=t.color,n=[],r=[],e=[],o=t.Ld(),s=o.length-1;s>=0;s--)for(var h=o[s],a=h.Md,c=null,l=a.length-1;l>=0;l--){var f=a[l];if(f.color===i&&f.group!==t){c=f.group;var p=n.indexOf(c);p>=0?e[p]!==h&&(r[p]=!1):(n.push(c),r.push(!0),e.push(h))}}if(n.length){for(var g=n.length-1;g>=0;g--)if(r[g]){var d=e[g],v=this.xf.wf(d).Nj(d,[t,n[g]]);this.Rf.push(v),this.Fj.push(n[g])}else this.Gj.push(n[g]);n.push(t),u.Li(n)}},r.oh=function(t){return"subband["+t.length+" groups: "+t.map(function(t){return t.group.toString(1)}).join(", ")+"]"},r.prototype.Oj=function(t){for(var i=[],n=this.Fj.length-1;n>=0;n--)this.Rf[n].Tf!==t&&i.push(this.Fj[n]);return i},r.prototype.uh=function(t,i){for(var n,r=[],e=t.length-1;e>=0;e--){var s=t[e].Fd,h=s.jh;if(h){if(h===n)continue;n=h;for(var a=h.kh.length-1;a>=0;a--){var u=h.kh[a];o(r,u,u.Gj,u.Oj(i))}}else r.push([s])}return r},r.prototype.sh=function(t){var i=this.jh;if(!i)return[];for(var n=[],r=i.kh.length-1;r>=0;r--){var e=i.kh[r];e!==this&&o(n,e,e.Gj,e.Oj(t))}return n},r.prototype.Pj=function(){if(this.Di>=2)return f;var t=this.Lh();return t>=3?f:0===t?g:p},r.prototype.Qj=function(){if(this.Pj()===f)return!1;if(this.Gj.length)return!1;for(var t=this.group.color,i=0,n=0,r=this.bj.length-1;r>=0;r--){var e=this.bj[r];e.color===t&&0!==e.Rj&&(i++,e.Rj>=3&&n++,this.Ei.length&&n++)}return!(i+n>=2)},r.prototype.mj=function(t){this.vj=!0;for(var i=this.bj,n=this.group.color,r=1-n,e=null,o=i.length-1;o>=0;o--){var s=i[o],h=s.dj[r],a=0;if(h.length){for(var u=h.length-1;u>=0;u--)a+=h[u].Sc.length;s.Ci>a||(s.kj(r),e=s)}}if(!e)return void c.debug;for(var l=this.Aj=this.group.Nd(),f=l.length-1;f>=0;f--){var p=l[f],g=p.Fd;g.Ei.push(this);for(var d=f-1;d>=0;d--){var v=l[d],m=v.Fd;if(-1===m.Fj.indexOf(p)){m.Fj.push(p);var y=e.Nj(e.Sj[0],[p,v]);m.Rf.push(y)}}}c.debug},r.prototype.ij=function(t){if(this.uj||this.Di>=2&&!this.vj)return w;for(var i,n=0,r=this.group.color,e=this.group.Yc,o=this.bj.length-1;o>=0;o--){var s=this.bj[o],h=s.Ci;if(s.Hh)s.Hh===this&&(n+=h);else{var a=s.dj[r];if(1===a.length)n+=h;else{var u=this.group.vc,l=u;for(i=a.length-1;i>=0;i--)l=Math.min(a[i].vc,l);u===l&&(n+=h)}}}if(n=Math.min(e,n)/100,t||(n+=e/1e4),this.vj)return 0+n;var f=0,p=0;if(!t&&this.jh){var g=this.jh.kh;for(i=g.length-1;i>=0;i--)g[i]!==this&&(p+=g[i].ij(!0))}if(!t){var g=this.Gj;for(i=g.length-1;i>=0;i--)f+=g[i].Fd.ij(!0);for(g=this.Fj,i=g.length-1;i>=0;i--)f+=g[i].Fd.ij(!0)}return f!==p&&(c.debug,f=p),this.Di+f+n},r.prototype.xi=function(t){if(this.Di>1)return g;if(0===this.Di)return f;var i=this.Dj[0],n=i.Ci;if(n>6)return g;var r=this.group,e=r.color;if(3>n&&!i.dj[1-e].length)return f;c.debug;for(var o,h=null,a=0,u=0,d=0,v=null,m=null,y=0,b=i.Sj,w=!1,x=[0,0,0,0,0],k=0;n>k;k++){for(var j=b[k],q=0,M=0,S=0,G=j.Md.length-1;G>=0;G--){var Y=j.Md[G];switch(Y.color){case l:S++;break;case e:M++;break;default:if(1===Y.group.Yc){S++,y+=2;break}q++,v?Y.group!==v&&(m=Y.group):v=Y.group}}if(q){if(2>S+(M?1:0))continue}else if(y++,o=j,x[S]++,2>S)continue;if(c.debug,d++,j.Ue()&&(w=!0),h&&!h.Ue()){if(u>q)continue;if(a+u>=S+q)continue}h=j,u=q,a=S}if(w&&d>1&&d--,c.debug,!h)return f;if(1===y&&!m&&v&&v.Sc.length<3&&this.Tj(v,o,h))return f;if(d>=2){if(u)return g;if(!s(n,x,b))return g}return t[0]=h.Zc,t[1]=h.$c,p},r.prototype.Tj=function(t,i,n){for(var r=i.Md.length-1;r>=0;r--){var e=i.Md[r];if(e.color===l&&e!==n&&e.$e(t))return!0}return!1},r.prototype.oj=function(){if(!this.jh)return b;for(var t=this.jh.kh,i=0,n=!1,r=t.length-1;r>=0;r--){var e=t[r];e!==this&&(n||e.uj?n=e.uj=!0:(i+=e.Di,i>=2&&(n=e.uj=!0)))}return n?(c.debug,this.uj=!0,y):b},r.prototype.Uj=function(){if(this.jh)return!1;if(this.group.Sc.length>=6)return!1;for(var t=this.bj.length-1;t>=0;t--)if(this.bj[t].color===this.group.color)return!1;return!0},r.prototype.pj=function(t){if(this.Di>=2)return this.uj=!0,c.debug,y;if(this.Uj())return m;var i=[],n=this.xi(i);if(n===p){if(this.Jj=.5,void 0===t)return b;t!==this.group.color&&(n=f)}return n===f?(this.Jj=0,this.jh||this.Ei.length?b:this.Vj()>=1.5?b:(this.nj=this.ij(),m)):(this.uj=!0,this.Jj=1,c.debug,y)},r.prototype.lj=function(){var t=this.group.Nd();if(!t.length)return m;for(var i=this.nj||this.ij(),n=h(i)&&!this.Fj.length&&!this.Gj.length,r=null,e=n?this.group.Ld():null,o=0;o<t.length;o++){var s=t[o],a=s.Fd,u=a.ij(),l=i-u;if(c.debug,l>0)return c.debug,this.Ij=!1,b;if(0===l&&(c.debug,n)){if(a.Ij===!1||u!==i||s.Sc.length<3)continue;for(var f=e.length-1;f>=0;f--){var p=e[f];if(!p.$e(s)&&this.xf.wf(p).Hh!==this){n=!1;break}}n&&(r=a)}}return n&&r?(this.Ij=!0,b):m},r.prototype.rj=function(){return this.group.Yc>1?b:m},r.prototype.sj=function(){var t=this.nj=this.ij();if(t>=2)return this.uj=!0,c.debug,y;if(this.Ij)return this.uj=!0,c.debug,y;for(var i=this.Fj.length-1;i>=0;i--)if(this.Fj[i].Fd.uj)return this.uj=!0,c.debug,y;return m},r.prototype.Wj=function(t,i){if(this.jh){for(var n=this.jh.kh,r=0,e=n.length-1;e>=0;e--)r+=t.call(n[e],i);return r}return t.call(this,i)},r.prototype.Ih=function(t,i){this.Ej[t]+=i},r.prototype.Ag=function(){for(var t=1-this.group.color,i=this.bj.length-1;i>=0;i--){var n=this.bj[i];if(n.color!==t)return!1}return!0},r.prototype.Xj=function(){for(var t=this.group.color,i=this.bj.length-1;i>=0;i--){var n=this.bj[i];if(void 0===n.color)for(var r=n.dj[1-t],e=r.length-1;e>=0;e--){var o=r[e],s=o.Fd.jj();if(6>s)return 1}}return 0},r.prototype.Lh=function(){return this.Di+this.Jj+this.Xj()+(this.Ej[d]+this.Ej[v])/2},r.prototype.Vj=function(){return this.Wj(this.Lh)},r.prototype.Yj=function(){return this.group.Sc.length},r.prototype.jj=function(){return this.Wj(this.Yj)}},{"../../../constants":43,"../../../log":46,"./Band":35}],39:[function(t,i,n){"use strict";function r(t,i){this.Ga=t,this.code=i,this.Zc=this.$c=0,this.Ci=0,this.dj=null,this.Sj=null,this.Zj=void 0,this.color=void 0,this.Hh=void 0,this.$j=!1,this._j=!1,this.Rj=-1,this.Rf=null,this.ak=!1}function e(t){return t?v[t]:v[0]}function o(t){for(var i=t.length-1;i>=0;i--)if(!t[i].Fd.vj)return!1;return!0}function s(t){return"#"+t.vc}var h=t("../../../constants"),a=t("./FakeSpot"),u=t("../../../Grid"),c=t("../../../log"),l=h.Ca,f=h.Da,p=1,g=2,d=3,v=["void","eye","fake","dame"];i.g=r,r.prototype.bk=function(t,i){return this.Zc=t,this.$c=i,this.Rf=[],this.dj=[[],[]],this.Sj=[],this.dj},r.prototype.ck=function(t,i){this.Ci++,this.Sj.push(this.Ga.Hc(t,i))},r.prototype.Nj=function(t,i){c.debug,this._j=!0;var n=this.Sj.indexOf(t),r=this.Rf[n];return r?r.Cj(i):r=this.Rf[n]=new a(t,i),r},r.prototype.fj=function(){var t=this.dj[l],i=this.dj[f],n=o(t),r=o(i);if(n&&r)return this.$j||void 0===this.color?!1:this.dk();if(this.Zj===p)return!1;if(!n&&!r)return!1;var e=n?f:l;return this.ak=!t.length||!i.length,this._j?this.ek(e):(this.Rj=this.Ci,this.fk(e))},r.prototype.ek=function(t){this.Zj=g,this.color=t,this.Hh&&(this.Hh.Mj(this),this.Hh=null);for(var i=this.Rf.length-1;i>=0;i--){var n=this.Rf[i];n&&(n.zf=!1)}return!0},r.prototype.gj=function(){if(this.Zj!==g)return!1;var t=this.Rj,i=this.Rj=this.Ci-this.gk();return c.debug,i!==t},r.prototype.gk=function(t){t||(t=[]);for(var i=this.Rf.length-1;i>=0;i--){var n=this.Rf[i];if(n&&n.color===this.color)for(var r=n.dj,e=r.length-1;e>=0;e--)if(r[e].Fd.Qj()){c.debug&&!n.zf,n.zf=!0,t.push(n.Tf);break}}return t.length},r.prototype.zf=function(t){for(var i=this.Rf.length-1;i>=0;i--){var n=this.Rf[i];if(n&&n.color===this.color&&n.Tf===t)return n.zf}return!1},r.prototype.hj=function(){if(this.Zj===g){if(0===this.Rj){if(this.Hh)throw new Error("NEVER HAPPENS");return void c.debug}c.debug;var t=this.color;return this.color=this.Zj=void 0,this.fk(t)}},r.prototype.fk=function(t){return this.ak?(this.hk(t),!0):this.kj(t)},r.prototype.ik=function(t){for(var i=this.dj[t],n=i[0],r=0,e=i.length-1;e>=0;e--){var o=i[e],s=o.Sc.length;o.Yc>1&&s>r&&(n=o,r=s)}this.Hh=n.Fd.Lj(this)},r.prototype.hk=function(t){return c.debug,this.Zj=p,this.color=t,this.ik(t),!0},r.prototype.kj=function(t){if(t===this.color)return!1;c.debug,this.Hh&&(this.Hh.Mj(this),this.Hh=null),this.color=t;for(var i=this.dj[1-t],n=i.length-1;n>=0;n--)for(var r=i[n].Fd.bj,e=r.length-1;e>=0;e--)if(r[e]!==this&&r[e].color===t)return!0;return this.ik(t),!0},r.prototype.wj=function(){c.debug,this.Hh&&(this.Hh.Mj(this),this.Hh=null),this.Zj=d,this.color=void 0},r.prototype.dk=function(){c.debug;var t=this.color;if(void 0===t)throw new Error("dead group's eye of undefined owner");this.$j=!0,this._j=!1,this.Hh&&(this.Hh.Mj(this),this.Hh=null),this.Zj=p,this.color=1-t;for(var i=this.dj[t],n=i.length-1;n>=0;n--){var r=i[n].Fd;if(r.Aj.length)return this.Hh=r.Aj[0].Fd.Lj(this),!0}return!0},r.prototype.Bj=function(t){return void 0===this.color?0:(t&&(t.length=0,this._j&&this.gk(t)),this.Ci)},r.prototype.jk=function(t){var i=t.group;return this.dj[i.color].indexOf(i)>-1},r.prototype.toString=function(){return"{"+e(this.Zj)+"-"+u.gb(this.Zc,this.$c)+" vcount:"+this.Ci+" black:"+(this.dj[l].map(s).toString()||"-")+" white:"+(this.dj[f].map(s).toString()||"-")+"}"}},{"../../../Grid":12,"../../../constants":43,"../../../log":46,"./FakeSpot":37}],40:[function(t,i,n){"use strict";function r(t,i){this.Ga=t,this.kc=i.kc,this.dj=null,this.kk=null}var e=t("../../../constants"),o=e.gc;i.g=r,r.prototype.cj=function(t,i,n,r){if(this.kc[i][t]!==n)return 0;this.kk=n;var e="number"!=typeof r?r:null;this.dj=e&&e.bk(t,i);for(var o,s,h,a=0,u=this.kc,c=[[t,i,i]];o=c.pop();)if(s=o[0],i=o[1],h=o[2],u[i][s]===n){for(;this.lk(s,i-1);)i--;for(;this.lk(s,h+1);)h++;a+=h-i+1;for(var l=s-1;s+1>=l;l+=2){for(var f=null,p=i;h>=p;p++)s>l&&(u[p][s]=r,e&&e.ck(s,p)),this.lk(l,p)?f||(f=p):f&&(c.push([l,f,p-1]),f=null);f&&c.push([l,f,h])}}return a},r.prototype.lk=function(t,i){var n=this.kc[i][t];if(n===o)return!1;if(n===this.kk)return!0;if(!this.dj)return!1;if("number"!=typeof n)return!1;var r=this.Ga.Hc(t,i).group;if(!r)throw new Error("Unexpected: ZoneFiller replacing a group");var e=this.dj[n];return-1===e.indexOf(r)&&e.push(r),!1}},{"../../../constants":43}],41:[function(t,i,n){"use strict";function r(t,i,n){this.name="Chuckie",this.fe=t,this.xf=new o(t),this.nk(n),this.setColor(i)}function e(t,i){return i[1]-t[1]}var o=t("./boan/BoardAnalyser"),s=t("../../constants"),h=t("../../Genes"),a=t("../../Grid"),u=t("../../log"),c=t("../../test"),l=t("./boan/ZoneFiller"),f=t("./Connector"),p=t("./GroupAnalyser"),g=t("./GroupsAndVoids"),d=t("./Hunter"),v=t("./Influence"),m=t("./MoveInfo"),y=t("./NoEasyPrisoner"),b=t("./PotentialEyes"),w=t("./PotentialTerritory"),x=t("./Pusher"),k=t("./Savior"),j=t("./Shaper"),q=t("./Spacer"),M=s.gc,S=s.Ca,G=s.Uf,Y=s.mk,D=s.Vf,C=-1;i.g=r,r.pk="Chuckie",r.qk="0.1",r.he=o,r.rk=l,r.prototype.sk=function(t){var i=new t(this);return this.ag.push(i),i},r.prototype.tk=function(){var t=this.Nf={};this.ag=[],t.Mf=this.sk(m),t.hg=this.sk(w),t.uk=this.sk(g),t.ig=this.sk(v),t.fg=this.sk(b),t.vk=this.sk(p),t.dg=this.sk(y),t.wk=this.sk(k),t.xh=this.sk(d),t.cg=this.sk(f),t.xk=this.sk(q),t.yk=this.sk(x),t.zk=this.sk(j);for(var i=0;i<this.ag.length;i++)this.ag[i].$f()},r.prototype.setColor=function(t){this.color=t;for(var i=0;i<this.ag.length;i++)this.ag[i].jg(t)},r.prototype.nk=function(t){this.pg=t||this.pg||new h,this.Yf=this.og("smallerMove",.03,.01,.1),this.Ga!==this.fe.Ga&&(this.Ga=this.fe.Ga,this.Ya=this.Ga.Ya,this.Af=this.fe.xa,this.Ak=new a(this.Ya,M),this.Xf=new a(this.Ya,0,M),this.tk()),this.Ma=S,this.Bk=this.Ck=0,this.Dk=this.Ek=this.Fk=0,this.Gk=!1,this.eh=this.fh=C,this.kg=null},r.prototype.Hk=function(t){for(var i=0;i<this.ag.length;i++){var n=this.ag[i];if(n.name===t)return n}return null},r.prototype.og=function(t,i,n,r){return void 0===n&&(n=null),void 0===r&&(r=null),this.pg.get(this.name+"-"+t,i,n,r)},r.prototype.Ik=function(t,i,n){this.Dk=n,this.Ek=t,this.Fk=i,this.Gk=1!==this.Jk},r.prototype.Kk=function(t,i,n){if(n>this.Dk)this.Jk=1,this.Ik(t,i,n);else{if(this.Jk++,Math.random()*this.Jk>=1)return;this.Ik(t,i,n)}},r.prototype.Lk=function(){this.Bk++;var t=this.Ak.kc,i=this.Xf.kc;this.Mk(),this.Nk(t,i),this.Ok(t,i);var n=this.Pk(t,i);return u.lg(this.Rg?u.mg:u.gh),n},r.prototype.Mk=function(){this.Dk=this.Yf-.001,this.Ek=C,this.Ma=this.fe.Ma,this.Rg=!!u.debug,u.lg(u.gh)},r.prototype.Nk=function(t,i){for(var n=1;n<=this.Ya;n++)for(var r=1;r<=this.Ya;r++)this.Ga.Bb(r,n,this.color)?(t[n][r]=G,i[n][r]=0):t[n][r]=Y;if(this.eh!==C){if(t[this.fh][this.eh]===Y)throw new Error("Invalid test move: "+this.eh+","+this.fh);t[this.fh][this.eh]=D}},r.prototype.Ok=function(t,i){for(var n=0;n<this.ag.length;n++){var r=this.ag[n];u.lg(this.Rg&&this.kg===r.name?u.mg:u.gh);var e=Date.now();r.Fg&&r.Fg(),r.Jf(t,i);var o=Date.now()-e;o>=3&&!c.Qk&&u.Rk("Slowness: "+r.name+" took "+o+"ms")}this.Nf.Mf.Sg(t,i)},r.prototype.Pk=function(t,i){for(var n=1;n<=this.Ya;n++)for(var r=1;r<=this.Ya;r++)t[n][r]<G||i[n][r]<this.Dk||this.Kk(r,n,i[n][r]);return this.Dk<this.Yf?"pass":(this.Gk&&this.Ck++,a.gb(this.Ek,this.Fk))},r.prototype.Sk=function(){var t=this.Nf.hg;return t.Yh().kc},r.prototype.Tk=function(){var t=this.Nf.hg;return t.Jf(),t.Rh.kc},r.prototype.Uk=function(t,i){this.eh=t,this.fh=i,this.Lk(),this.eh=C},r.prototype.Vk=function(t,i){for(var n={},r=0;r<this.ag.length;r++)this.ag[r].ng(t,i,n);return n},r.prototype.Wk=function(t,i){return this.Uk(t,i),this.Xf.kc[i][t]},r.prototype.Xk=function(t,i,n){this.Uk(t,i);var r=this.Hk(n);return r.Xf.kc[i][t]},r.prototype.Yk=function(t){this.kg=t},r.prototype.Zk=function(t,i){var n=this.fe.ib(t);if(!n)return"";var r=n[0],o=n[1];if(i){if(!this.Ga.Bb(r,o,this.fe.Ma))return"Invalid move: "+t;this.Uk(r,o)}var s=this.Vk(r,o),h=this.Xf.kc[o][r],a=[];for(var u in s)0!==s[u]&&a.push([u,s[u]]);a.sort(e);for(var c=t+" ("+h.toFixed(2)+")\n",l=0;l<a.length;l++)c+="- "+a[l][0]+": "+a[l][1].toFixed(2)+"\n";return c}},{"../../Genes":10,"../../Grid":12,"../../constants":43,"../../log":46,"../../test":48,"./Connector":20,"./GroupAnalyser":22,"./GroupsAndVoids":23,"./Hunter":25,"./Influence":26,"./MoveInfo":27,"./NoEasyPrisoner":28,"./PotentialEyes":29,"./PotentialTerritory":30,"./Pusher":31,"./Savior":32,"./Shaper":33,"./Spacer":34,"./boan/BoardAnalyser":36,"./boan/ZoneFiller":40}],42:[function(t,i,n){"use strict";function r(){this.$k=null,this.ie=this._k=this.al=this.bl=null}i.g=new r,r.prototype.cl=function(t){this.$k={};for(var i=0;i<t.length;i++){var n=t[i];this.$k[n.name]=n.dl}var r=t.length-1;this.ie=this._k=t[r].dl,this.al=r>=1?t[r-1].dl:null,this.bl=r>=2?t[r-2].dl:null}},{}],43:[function(t,i,n){"use strict";function r(){this.Ah=0,this.Bh=1,this.gc=-99,this.EMPTY=-1,this.Ca=0,this.Da=1,this.Uf=0,this.Vf=1,this.mk=-1,this.NEVER=0,this.vi=1,this.ALWAYS=2,this.Ne=0,this.Oe=3,this.zh=7,this.yh=1,this.Mh=this.af=0,this.df=1,this.Nh=this.bf=2,this.cf=3,this.ef=4,this.ff=5,this.gf=6,this.hf=7,this["if"]=8,this.Ef=9,this.jf=10,this.kf=11,this._e=12,this.Ea="Japanese",this.el="Chinese",this.fl=0,this.gl=1}i.g=new r},{}],44:[function(t,i,n){"use strict";function r(t){return"\n"!==t.slice(-1)?0:"\r\n"!==t.slice(-2)?1:2}n._f=function(t){return t.name||t.toString().split(/ |\(/,2)[1]},n.clone=function(t){if(null===t||void 0===t)return t;var i;if(t instanceof Array){i=[];for(var n=0,r=t.length;r>n;n++)i[n]=t[n]}else{if("object"!=typeof t)throw new Error("clone called on "+typeof t);if("function"==typeof t.clone)return t.clone();i={};for(var e in t){var o=t[e];"function"!=typeof o&&(i[e]=o)}}return i},String.prototype._b=function(t){if(void 0===t)return this.substr(0,this.length-r(this));var i=this.length-t.length;return this.substr(i)===t?this.substr(0,i):this.toString()},String.prototype.vd=function(t){if(void 0===t)t=r(this)||1;else if("number"!=typeof t)throw new Error("Invalid parameter type for String.count: "+typeof t);return this.substr(0,this.length-t)},String.prototype.startsWith||(String.prototype.startsWith=function(t){return this.substr(0,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t){return this.substr(this.length-t.length)===t}),String.prototype.format=function(t){if("%"!==this[0])throw new Error("Invalid format: "+this.toString());var i,n=this.slice(1,-1),r=0,e=this.slice(-1);switch(e){case"d":case"x":var o=" ";"0"===n[r]&&(r++,o="0");var s=parseInt(n.substr(r));i=t.toString("x"===e?16:10);for(var h=s-i.length;h>0;h--)i=o+i;return i;case"f":var a="";if("+"===n[r]&&(r++,t>0&&(a="+")),"."!==n[r++])break;var u=parseInt(n.substr(r));return a+t.toFixed(u)}throw new Error("Unknown format: "+this.toString())},String.prototype.Be=function(t,i){return this>=t&&i>=this},n.hl=function(t,i){for(var n=new Array(t),r=t-1;r>=0;r--)n[r]=i;return n},n.ad=function(t,i,r){for(var e=new Array(t),o=e[0]=n.hl(i,r),s=t-1;s>=1;s--)e[s]=o.concat();return e},Array.il=function(t,i){if(void 0===t)return[];if(void 0===i)return new Array(t);var n,r=[];if("function"==typeof i)for(n=0;t>n;n++)r[n]=i(n);else for(n=0;t>n;n++)r[n]=i;return r},Array.prototype.jl=function(t){for(var i=this.length,n=0;n<t.length;n++){var r=t[n];-1===this.indexOf(r)&&this.push(r)}return this.length-i}},{}],45:[function(t,i,n){"use strict";function r(){this.kl=null,this.map={},this.ll=this.ml.bind(this);try{var t=window.localStorage.getItem(o);t&&(this.map=JSON.parse(t))}catch(i){e.nl("Cannot load local preferences: "+i)}}var e=t("./log"),o="localPref";r.prototype.terminate=function(){this.kl&&this.ml()},r.prototype.ol=function(){this.kl||(this.kl=window.setTimeout(this.ll,6e4))},r.prototype.ml=function(){window.clearTimeout(this.kl),this.kl=null;try{window.localStorage.setItem(o,JSON.stringify(this.map))}catch(t){e.nl("Cannot save local preferences: "+t);
}},r.prototype.Pb=function(t,i){var n=this.map[t];return void 0!==n?n:i},r.prototype.Mb=function(t,i){this.map[t]=i,this.ol()},i.g=new r},{"./log":46}],46:[function(t,i,n){"use strict";function r(){this.level=NaN,this.pl=null,this.mg=0,this.gh=1,this.ql=2,this.ERROR=3,this.rl=4,this.sl=!1,this.Od=!1}var e=console,o=0,s=1,h=2,a=3,u=4;r.prototype.lg=function(t){t!==this.level&&(this.level=t,this.debug=o>=t?this.tl:null,this.info=s>=t?this.Ie:null,this.warn=h>=t?this.Rk:null,this.error=a>=t?this.nl:null,this.fatal=u>=t?this.ul:null)},r.prototype.vl=function(t){this.pl=t},r.prototype.wl=function(t,i){var n=this;return function(r){n.level>t||n.pl&&!n.pl(t,r)||i.call(e,r)}};var c=i.g=new r;r.prototype.tl=c.wl(o,e.debug),r.prototype.Ie=c.wl(s,e.info),r.prototype.Rk=c.wl(h,e.warn),r.prototype.nl=c.wl(a,e.error),r.prototype.ul=c.wl(u,e.error),c.lg(s)},{}],47:[function(t,i,n){"use strict";function r(){this.appName=e.name,this.appVersion=e.version,this.xl=null,this.yl=null}var e=t("../package.json");i.g=new r},{"../package.json":75}],48:[function(t,i,n){"use strict";function r(){this.debug=!1,this.zl=this.Qk=!1,this.Al=null,this.Bl=null}i.g=new r,r.prototype.Cl=function(t,i){this.Al=new t,i(this.Al)},r.prototype.assert=function(t,i){if(t!==!0)throw new Error("assertion failed: "+(i||t))}},{}],49:[function(t,i,n){"use strict";function r(){this.Dl=null,this.El=null,this.Ga=null,this.Ya=0,this.Fl=null,this.cursor={type:"CR",x:0,y:0},this.Gl=!1,this.Hl={type:null,x:0,y:0}}function e(t){switch(t){case-1:return{type:"mini",c:l.B};case-.5:return{type:"outline",c:l.B};case 0:return null;case.5:return{type:"outline",c:l.W};case 1:return{type:"mini",c:l.W};default:return null}}function o(t){switch(t){case a.od+p:case a.nd+f:return{type:"mini",c:l.B};case a.od+f:case a.nd+p:return{type:"mini",c:l.W};case a.md:return{type:"SL",c:"grey"};default:return null}}function s(t){if(null===t)return null;var i=1,n=0,r=2,e=0;if(void 0!==y&&(n=y),void 0!==b&&(r=b),void 0!==w&&(e=w),t===e)return null;for(var o=t.toFixed(r),s=n;r>s;s++)o=o._b("0");if(o=o._b("."),"0."===o.substr(0,2)&&(o=o.slice(1)),0===e){if("0"===o||".0"===o)return null;i=1>t?.6:1}return{type:"LB",text:o,scale:i}}var h=t("../constants"),a=t("../Grid"),u=t("../log"),c=t("./uh/touchManager");t("../../lib/wgo.js");var l=window.WGo,f=h.Da,p=h.Ca,g=h.EMPTY,d=window.devicePixelRatio||1,v={};v[l.B]=p,v[l.W]=f;var m={};m[g]=null,m[p]=l.B,m[f]=l.W,i.g=r,r.prototype.create=function(t,i,n,r){var e=n.Ya;if(this.Ga=n,!this.Dl||this.Ya!==e){this.Ya=e,r=r||{};var o=r.noCoords?0:-.23,s={size:e,width:i,section:{top:o,left:o,right:o,bottom:o},coordFontSize:.6};switch(r.background){case"wood":s.background=(window.rootDir||".")+"/assets/wood1.jpg";break;default:s.background="#c75"}t.clear(),this.Dl=new l.Il(t.Jl(),s),this.Kl=60+this.Dl.Ll,this.Gl=!1,this.Hl.type=null,r.noCoords||this.Dl.Ml(l.Il.Nl),this.Ol()}},r.prototype.Ol=function(){var t=this;c.Pl(this.Dl.Ql,function(i,n,r){if("dragCancel"===i)return t.Rl(-1,-1);"drag"===i.substr(0,4)&&(r-=t.Kl);var e=t.Sl(n,r);switch(n=e[0],r=e[1],i){case"dragStart":return t.Rl(n,r);case"drag":return t.Rl(n,r);case"dragEnd":return t.Rl(-1,-1),t.Tl(n,r);case"tap":return t.Tl(n,r)}})},r.prototype.Ul=function(t){this.Vl=m[t]},r.prototype.Rl=function(t,i){var n=this.Wl(t,i);if(this.Gl){if(t===this.cursor.x&&i===this.cursor.y)return;this.Dl.Xl(this.cursor)}this.Gl=n,n&&(this.cursor.x=t,this.cursor.y=i,this.Dl.Yl[t][i][0]?(this.cursor.type="CR",this.cursor.c=void 0):(this.cursor.type=void 0,this.cursor.c=this.Vl),this.Dl.Zl(this.cursor))},r.prototype.$l=function(t,i,n){this.Hl.type&&this.Dl.Xl(this.Hl),this.Hl.type=t,t&&(this.Hl.x=i-1,this.Hl.y=this.Ya-n,this.Dl.Zl(this.Hl))},r.prototype.Wl=function(t,i){return t>=0&&i>=0&&t<this.Ya&&i<this.Ya},r.prototype.Tl=function(t,i){var n=t+1,r=this.Ya-i;if(!this.Wl(t,i))return this.El("!"+(n>=1&&n<=this.Ya?a.ud(n):r));if(this.Ga.Ic(n,r)===g){var e=a.gb(n,r);this.El(e)}},r.prototype._l=function(t){this.El=t},r.prototype.Sl=function(t,i){var n=this.Dl;return t=Math.round((t*d-n.left)/n.am),i=Math.round((i*d-n.top)/n.bm),[t,i]},r.prototype.refresh=function(){var t=!1;"regular"!==this.Fl&&(this.Fl="regular",t=!0);for(var i=0;i<this.Ya;i++)for(var n=0;n<this.Ya;n++){var r=this.Ga.Ic(n+1,this.Ya-i),e=m[r],o=this.Dl.Yl[n][i][0];t&&(o=null,this.Dl.cm(n,i)),null===e?o&&this.Dl.cm(n,i):o&&o.c===e||this.Dl.Zl({x:n,y:i,c:e})}},r.prototype.show=function(t,i,n){this.refresh(),this.Fl=t;for(var r=0;r<this.Ya;r++)for(var e=0;e<this.Ya;e++){var o=n(i[this.Ya-r][e+1]);o&&(o.x=e,o.y=r,this.Dl.Zl(o))}};var y,b,w;r.prototype.dm=function(t,i,n){y=t,b=i,w=n};var x={Rh:e,em:o,value:s};r.prototype.fm=function(t,i){var n=x[t];return n?void this.show(t,i,n):u.error&&u.error("invalid display type:",t)},r.prototype.gm=function(t){this.show("scoring",t,o)}},{"../../lib/wgo.js":72,"../Grid":12,"../constants":43,"../log":46,"./uh/touchManager":70}],50:[function(t,i,n){"use strict";function r(t,i){this.im=i,this.jm(t),this.km()}t("./loadGameDlg.less");var e=t("./uh/getText"),o=t("./uh/PopupDlg"),s=t("./uh/Transit"),h=t("./uh").hm;i.g=r,r.prototype.jm=function(t){this.options=t;var i=this.lm=h.mm(null,"loadGameDialog dialog");i.nm(!1),i.mm("dialogTitle").om("Load a game");var n=this.pm=i.mm("mainDiv");this.qm=h.rm(n,"loadGame","Game to load:").setAttribute("type","file"),this.qm.v("change",this.sm.bind(this)),h.tm(n),h.um(n,"inputLbl","Recent games:");for(var r=["-"].concat(t.vm),s=[],a=0;a<r.length;a++)s.push(a);this.vm=h.wm(n,"recentGames",r,s);var u=n.mm("moves");this.ve=h.rm(u,"moves","Moves to load:",t.ve),u.mm("loadMovesInfo").om("(SGF format is also accepted)");var c=i.mm("btnDiv");h.xm(c,"loadBtn",e("#load"),this.sm.bind(this)),h.xm(c,"cancelBtn",e("#cancel"),this.ym.bind(this,!0)),i.nm(!0),o.zm(i,document.body)},r.prototype.km=function(){new s(this.lm).from("opacity",0).Am("opacity",1).start(500)},r.prototype.sm=function(){var t=this.options;t.Bm=t.Cm=void 0;var i=this.vm.value();if(this.qm.Dm()){var n=this;this.qm.Em(function(i){t.Cm=i,n.ym()})}else i>0?(t.Bm=i-1,this.ym()):(t.ve=this.ve.value(),this.ym())},r.prototype.ym=function(t){this.options.Fm=!!t,this.im(this.options)&&o.Gm(this.lm)}},{"./loadGameDlg.less":56,"./uh":66,"./uh/PopupDlg":62,"./uh/Transit":64,"./uh/getText":65}],51:[function(t,i,n){"use strict";function r(t,i,n){var r=this.Hm=t.mm("moveIndicator "+i);this.Im=r.mm("label").om(n);var e=r.mm("icon");this.Jm=e.mm("text")}t("./moveIndicator.less");var e=t("../constants"),o=e.Da,s=e.Ca;i.g=r,r.prototype.Km=function(t,i,n){this.Hm.nm(null!==t),null!==t&&(this.Hm.Lm("black",i===s),this.Hm.Lm("white",i===o),this.Jm.om(t),n&&this.Im.om(n))}},{"../constants":43,"./moveIndicator.less":57}],52:[function(t,i,n){"use strict";function r(t,i){this.im=i,this.Mm=t.Ya,this.Nm=t.Nm,this.jm(t),this.Om(),this.Pm(),this.km()}t("./newGameDlg.less");var e=t("../ai"),o=t("../constants"),s=t("./uh/getText"),h=t("./SettingDlg"),a=t("./uh/Transit"),u=t("./uh").hm,c=o.Ca,l=o.Da,f=[5,7,9,13,19],p="More options",g=" >>",d=" <<";i.g=r,r.prototype.Om=function(){var t=this.Mm;this.Qm.om(t+" x "+t);var i=t+"x"+t;this.Sm.Rm("backgroundImage",'url("assets/'+i+'.png")'),this.Sm.Rm("backgroundSize",Math.ceil(t/19*100)+"%"),this.Um.Tm(t>5),this.Vm.Tm(19>t)},r.prototype.Wm=function(t){var i=f.indexOf(this.Mm)+t;this.Mm=f[i],this.Om()},r.prototype.Pm=function(){this.Xm[c].Lm("robot",this.Nm[c]),this.Xm[l].Lm("robot",this.Nm[l])},r.prototype.Ym=function(t){this.Nm[t]=!this.Nm[t],this.Pm()},r.prototype.jm=function(t){this.options=t;var i=this.lm=u.mm(document.body,"newGameDialog dialog");i.nm(!1),i.mm("dialogTitle").om("Start a new game");var n=i.mm("mainDiv");u.Zm(n,"settingBtn",this.$m.bind(this));var r=n.mm("centeredDiv").mm("boardDiv");this.Xm=[],this.Xm[0]=u.Zm(r,"playerBtn",this.Ym.bind(this,0));var o=this._m=r.mm("sizeBox");this.Vm=u.Zm(o,"sizeBtn",this.Wm.bind(this,1)),this.Sm=o.mm("boardImgFrame").mm("boardImg"),this.Qm=this.Sm.mm("curSize"),this.Um=u.Zm(o,"sizeBtn",this.Wm.bind(this,-1)),this.Um.Lm("down",!0),this.Xm[1]=u.Zm(r,"white playerBtn",this.Ym.bind(this,1)),this.an=u.xm(n,"advancedBtn",p+g,this.bn.bind(this));var h=this.cn=i.mm("advancedDiv");u.um(h,"inputLbl","Handicap:"),this.dn=u.wm(h,"handicap",[0,2,3,4,5,6,7,8,9],null,t.dn);var a=h.mm("rules");u.um(a,"inputLbl","Rules:"),this.rules=u.wm(a,"rules",["Japanese","Chinese"],null,t.rules);var c=Object.keys(e.$k);if(c.length>1){var l=h.mm();u.um(l,"inputLbl","Black AI:"),this.ie=u.wm(l,"defaultAi",c,null,e.ie.name),u.um(l,"defAiInfo","(White AI always uses latest AI version)")}var f=u.xm(i,"startBtn",s("#play"),this.en.bind(this));i.nm(!0);var d=this.cn.Hm.clientHeight+f.Hm.clientHeight+24;this.cn.Rm("marginTop",-d+"px")},r.prototype.km=function(){new a(this._m).from("opacity",0).Am("opacity",1).start(1e3)},r.prototype.bn=function(){this.fn?(this.gn=!this.gn,this.fn.hn(200)):(this.cn.nm(!0),this.gn=!0,this.fn=new a(this.cn).Am("marginTop","0").start(200)),this.an.om(p+(this.gn?d:g))},r.prototype.$m=function(){new h(this.lm)},r.prototype.en=function(){var t=this.options;t.Ya=this.Mm,t.dn=~~this.dn.value(),t.Nm=this.Nm,e.ie=this.ie?e.$k[this.ie.value()]:e.ie,t.rules=this.rules.value(),this.ym()},r.prototype.ym=function(){return this.im(this.options)?(this.close(),!0):!1},r.prototype.close=function(){u.removeChild(document.body,this.lm)}},{"../ai":42,"../constants":43,"./SettingDlg":53,"./newGameDlg.less":58,"./uh":66,"./uh/Transit":64,"./uh/getText":65}],53:[function(t,i,n){"use strict";function r(){var t=this["in"];a.Gm(t.lm)}function e(t){var i=this.lm=o.mm(null,"settingDlg dialog");i.mm("dialogTitle").om("Settings");var n=i.mm("content"),e=s.jn();o.um(n,"inputLbl","Color theme:");var u=o.wm(n,"theme",e,null,s.kn);u.v("change",function(){var t=this.value();s.ln(t),h.Mb("theme",t)});var c=i.mm("btnDiv"),l=o.xm(c,"okBtn","OK",r);l["in"]=this,a.zm(i,t||document.body)}t("./settingDlg.less");var o=t("./uh").hm,s=t("./uh/Painter"),h=t("../localPref"),a=t("./uh/PopupDlg");i.g=e},{"../localPref":45,"./settingDlg.less":59,"./uh":66,"./uh/Painter":61,"./uh/PopupDlg":62}],54:[function(t,i,n){"use strict";function r(t){this.mn(),this.fe=new a,this.nn=new w(this.fe),this.on=new u(y),this.pn=null,this.Dl=null,this.initDev?this.initDev():this.qn=!0,t&&this.fe.Va(t)}t("./ui.less");var e=t("../../config/colors.json"),o=t("../ai"),s=t("./Board"),h=t("../constants"),a=t("../GameLogic"),u=t("../GameRecord"),c=t("./uh/getText"),l=t("./LoadGameDlg"),f=t("../main"),p=t("../Move"),g=t("./MoveIndicator"),d=t("./NewGameDlg"),v=t("./uh/Painter"),m=t("./uh/PopupDlg"),y=t("../localPref"),b=t("../ReviewTree"),w=t("../ScoreAnalyser"),x=t("./SettingDlg"),k=t("./uh/TopMenu"),j=t("./uh"),q=j.hm,M=p.Ba,S=".neonBlack",G=h.Da,Y=h.Ca,D=h.gl,C=h.fl,T=document.documentElement.clientWidth,E=document.documentElement.clientHeight,B=10;i.g=r,r.prototype.mn=function(){this.Ya=9,this.dn=0,this.Nm=[D,C],this.rn=!1},r.sn=function(){v.tn(e,y.Pb("theme",S)),j.init(v),q.un(f.appName);var t=new r;c.init("en",t.vn.bind(t))},r.prototype.vn=function(){window.addEventListener("beforeunload",this.wn.bind(this)),this.xn();var t=this.on.Ob();if(t){if(this.yn(t))return;this.mn()}this.zn()},r.prototype.xn=function(){var t=this.An=new k({Bn:this.Cn.bind(this),Dn:f.appName+" V"+f.appVersion});t.En("settings",c("#settings")),t.En("review",c("#review")),t.Fn(),t.En("newGame",c("#newGame")),t.En("loadGame",c("#loadGame")),this.Gn=t.Hn(q.mm()),t.En("exportGame",c("#exportGame")),t.Fn()},r.prototype.Cn=function(t){switch(t){case"review":this.In();break;case"newGame":this.zn();break;case"loadGame":this.Jn();break;case"exportGame":this.Kn();break;case"settings":this.$m()}},r.prototype.Ln=function(t){this.rules=t,this.fe.Fa(t)},r.prototype.wn=function(){this.on.Lb(this.rn?this.fe:null,this.pn),y.terminate()},r.prototype.Mn=function(){this.Dl.refresh(),this.inDevMode&&this.devDisplay()},r.prototype.Nn=function(t,i,n,r){var e=this.On="compact"===t,o=this.Pn=q.mm(i,"gameUi");n&&o.mm(e?"testTitle":"pageTitle").om(n),this.Qn=o.mm("board"),r&&(this.Rn=o.mm("boardDesc").Sn(r));var h=o.mm("underBoard");this.Tn(h),this.Un(h),this.qn||this.createDevControls();var a=this.fe.Ga.Ya+2;if(e)this.Vn=28*a;else{this.Wn();var u=E-B-this.An.Xn()-h.Hm.clientHeight;this.Vn=Math.min(u,T-15)}this.Dl=new s,this.Dl._l(this.Yn.bind(this))},r.prototype.Zn=function(){this.Pn&&(q.removeChild(document.body,this.Pn),this.Pn=null,this.Dl=null)},r.prototype.$m=function(){new x},r.prototype.zn=function(){this.An.$n(c("#appTitle")),this.Zn();var t={Ya:this.Ya,dn:this.dn,Nm:this.Nm,rules:this.rules},i=this;this._n=new d(t,function(t){return i.Ya=t.Ya,i.dn=t.dn,i.Nm=[t.Nm[Y]?D:C,t.Nm[G]?D:C],i.Ln(t.rules),i.ao(),i._n=null,!0})},r.prototype.Jn=function(){var t={ve:"",vm:this.on.Vb()},i=this;new l(t,function(t){if(t.Fm)return i.Pn||i._n||i.zn(),!0;var n=t.Cm||i.on.Wb(t.Bm)||t.ve;return n?i.yn(n):!1})},r.prototype.Tn=function(t){var i=this.bo=t.mm("statusBar");this.co=new g(i,"lastMove","Last:"),this["do"]=i.mm("gameInfo"),this.eo=i.mm("message"),this.fo=new g(i,"nextPlayer","Next:")},r.prototype.ho=function(){if(this.An){var t=this.fe.Ja[G]+" VS "+this.fe.Ja[Y]+" (B)";this.An.$n(t)}var i="komi: "+this.fe.La;this.dn&&(i+=", hand: "+this.dn),this.fe.Wa&&(i+=", rules: "+this.fe.Wa),this.fe.Ta&&(i+=", source: "+this.fe.Ta),this.fe.Ua&&(i+=", event: "+this.fe.Ua),this["do"].om(i)},r.prototype.io=function(t){var i=this.fe.history;if(i.length){var n=M(i[i.length-1]);this.co.Km(n,1-this.fe.Ma,"#"+i.length+":");var r=this.fe.ib(n);r?this.Dl.$l("CR",r[0],r[1]):this.Dl.$l(null)}else this.co.Km(null);t=this.fe.Pa?null:M(t||""),this.fo.Km(t,this.fe.Ma),this.Dl.Ul(this.fe.Ma)},r.prototype.statusMessage=function(t){-1===t.indexOf("\n")&&(t="\n"+t),this.eo.om(t)},r.prototype.jo=function(t){this.ko.Sn(t),this.ko.nm(!0)},r.prototype.Un=function(t){var i=this.lo=t.mm("mainControls"),n=i.mm("leftDiv"),r=i.mm("mainDiv"),e=i.mm("rightDiv"),o=this;this.ko=t.mm("outputBox").nm(!1),this.mo=j.no(),q.xm(n,"endReview",c("#endReview"),this.In.bind(this)),q.xm(r,"back10","<<",function(){o.oo(-10)}),q.xm(r,"back1","<",function(){o.oo(-1)}),q.xm(r,"forw1",">",function(){o.oo(1)}),q.xm(r,"forw10",">>",function(){o.oo(10)}),this.controls=j.no(),q.xm(r,"bPass",c("#pass"),function(){o.po("pass")}),q.xm(r,"next","Next",function(){o.qo(1)}),q.xm(r,"next10","Next 10",function(){o.qo(10)}),q.xm(e,"nextAll","Finish",function(){o.qo()}),q.xm(r,"bUndo",c("#undo"),function(){o.ro()}),q.xm(r,"accept","Accept",function(){o.so(!0)}),q.xm(r,"refuse","Refuse",function(){o.so(!1)}),q.xm(r,"newg",c("#newGame"),this.zn.bind(this)),q.xm(e,"bResi",c("#resign"),this.to.bind(this)),this.uo=n.mm("aiVsAiFlags"),this.vo=q.wo(this.uo,"animated","Animated")},r.prototype.Wn=function(){var t=this.xo,i=this.fe.Pa,n=this.fe.Oa,r=!(i||n||t),e=this.Nm[Y]&&this.Nm[G],o=this.On;this.mo.nm(["endReview","back1","back10","forw1","forw10"],t),this.controls.nm(["accept","refuse"],n&&!t),this.controls.nm(["bUndo","bPass","bResi"],r&&!e),this.controls.nm(["next","next10","nextAll"],r&&e),this.controls.nm(["aiVsAiFlags"],r&&e&&!o),this.controls.nm(["newg"],i&&!t&&!o),this.qn||this.toggleDevControls(r,t,e)},r.prototype.yo=function(){this.ho(),this.io(),this.Wn(),this.Mn(),this.statusMessage("")},r.prototype.yn=function(t){this.zo();var i=[];return this.fe.vb(t,i)?(this._n&&(this._n=this._n.close()),this.Nm=[void 0,void 0],this.Ao(),this.Bo(),!0):(new m(null,i.join("\n")),this.Zn(),!1)},r.prototype.ao=function(){this.zo(),this.Ao(),this.statusMessage("Game started. Your turn..."),this.Bo()},r.prototype.Co=function(){this.fe.Xa(this.Ya,this.dn,this.La),this.Ao()},r.prototype.zo=function(){this.rn&&this.on.Sb(this.fe,this.pn),this.pn=null,this.fe.Xa(this.Ya,this.dn,this.La),this.fe._a(G,""),this.fe._a(Y,"")},r.prototype.Ao=function(){this.Do();var t=this.fe;this.Ya=t.Ga.Ya,this.dn=t.kb(),this.rules=t.Wa,this.qn||this.initDev(),this.Pn||this.Nn("main",document.body);var i=this.On?void 0:{background:"wood"};this.Dl.create(this.Qn,this.Vn,t.Ga,i),this.yo()},r.prototype.Do=function(){this.Eo=[];for(var t=Y;G>=t;t++){var i=this.fe.ab(t);if(void 0===this.Nm[t]&&(i.indexOf(o._k.pk)>=0?this.Nm[t]=D:this.Nm[t]=C),this.Nm[t]){var n=this.Fo(t).constructor;i||this.fe._a(t,n.pk+"-"+n.qk)}else i||this.fe._a(t,"human")}},r.prototype.Fo=function(t){var i=this.Eo[t];if(i)return i;var n=t===Y?o.ie:o._k;return i=this.Eo[t]=new n(this.fe,t)},r.prototype.Bo=function(){this.rn=!0,this.Go(),this.Ho()||this.Io()},r.prototype.Go=function(){this.Gn.Jo();var t=this.Ko();if(t){var i=this.Gn.appendChild(q.Lo(null,"menuOption downloadLink",t[1],t[0]));i.v("click",this.Jn.bind(this))}},r.prototype.Yn=function(t){return"!"===t[0]?!this.qn&&this.onDevKey(t.substr(1)):this.xo||this.inEvalMode?!this.qn&&this.showDevData(t,null,!0):void(this.Nm[this.fe.Ma]&&this.qn||this.fe.Oa||this.fe.Pa||this.po(t))},r.prototype.Ho=function(){return this.fe.Oa?(this.Mo(),!0):this.fe.Pa?(this.Tg(),this.No(),!0):!1},r.prototype.Tg=function(){var t=this.nn.le();this.Oo=t.join("\n")},r.prototype.Mo=function(){this.Tg(),this.statusMessage(this.Oo),this.Wn(),this.Dl.gm(this.nn.oe().kc)},r.prototype.so=function(t){var i=this.fe.Ma;return this.Nm[i]&&!this.Nm[1-i]&&(i=1-i),this.fe.Fb(t,i),t?this.No():(this.statusMessage("Score in dispute. Continue playing..."),this.Wn(),this.Mn(),void(this.Nm[Y]&&this.Nm[G]||this.Io()))},r.prototype.No=function(){this.statusMessage(this.Oo),this.Wn()},r.prototype.Po=function(t){var i=this.Qo=this.Eo[this.fe.Ma];this.Ro=i.Ck;var n=i.Lk();return this.fe.mb(n),t||(this.io(),this.statusMessage(""),this.inDevMode&&this.showDevData(n,i,!1)),this.Ho()?n:(t||this.Mn(),n)},r.prototype.po=function(t){if(!this.Ho()){if(!this.fe.mb(t))return this.statusMessage(this.fe.nb().join("\n"));this.Mn(),this.io(),this.statusMessage(""),window.setTimeout(function(t){t.Io()},500,this)}},r.prototype.to=function(){var t=this,i={buttons:["YES","NO"]};new m(this.Pn,"Do you really want to resign?","Confirm",i,function(i){0===i.So&&(t.fe.mb("resi"),t.io(),t.Ho())})},r.prototype.ro=function(){var t="undo";return(this.Nm[Y]===this.Nm[G]||this.inEvalMode)&&(t="half_undo"),this.fe.mb(t)?(this.Mn(),this.io(),void this.statusMessage('Performed "'+t+'"')):this.statusMessage(this.fe.nb().join("\n"))},r.prototype.Io=function(t){this.Nm[this.fe.Ma]&&this.Po(t)},r.prototype.qo=function(t){var i=1===t,n=this.vo.To(),r=!i&&!n;this.Io(r),i||this.fe.Oa||window.setTimeout(function(i){i.qo(t-1)},n?100:0,this)},r.prototype.Kn=function(){var t=this.on.Nb(this.fe,this.pn);q.Uo(t,this.on.Tb(t)+".sgf")},r.prototype.In=function(){this.xo=!this.xo,this.Wn(),this.xo?(this.pn||(this.pn=new b),this.pn.de(this.fe.history),this.Vo=this.pn.ee(),this.Wo=this.Vo.length,this.oo(0)):this.oo(this.Vo.length-this.Wo)},r.prototype.oo=function(t){this.statusMessage("");for(var i=this.Vo,n=this.Wo,r=0;t>r&&n!==i.length;r++)this.fe.mb(i[n]),n++;for(r=0;r>t&&0!==n;r--)this.fe.mb("half_undo"),n--;if(this.Wo=n,this.Mn(),this.mo.Tm(["forw1","forw10"],n!==i.length),this.mo.Tm(["back1","back10"],0!==n),this.io(i[n]),n===i.length&&this.Ho(),this.inEvalMode){var e=n>0?i[n-1]:null;e&&e.length<=3&&this.afterReplay(e)}},r.prototype.Ko=function(){var t=this.fe.Ua;if(!t)return null;var i=this.fe.Ta||"";if(i.toLowerCase().indexOf("littlegolem")<0)return null;var n=c("#downloadLatest")+" (LittleGolem)";return["http://www.littlegolem.net/servlet/sgf/"+t+"/game.sgf",n]}},{"../../config/colors.json":6,"../GameLogic":8,"../GameRecord":9,"../Move":15,"../ReviewTree":16,"../ScoreAnalyser":17,"../ai":42,"../constants":43,"../localPref":45,"../main":47,"./Board":49,"./LoadGameDlg":50,"./MoveIndicator":51,"./NewGameDlg":52,"./SettingDlg":53,"./uh":66,"./uh/Painter":61,"./uh/PopupDlg":62,"./uh/TopMenu":63,"./uh/getText":65,"./ui.less":71}],55:[function(t,i,n){"use strict";var r=t("../ai"),e=[{name:"Chuckie",dl:t("../ai/chuckie")}];r.cl(e);var o=t("./Ui");o.sn()},{"../ai":42,"../ai/chuckie":41,"./Ui":54}],56:[function(t,i,n){var r=".loadGameDialog {\n  margin: 50px;\n}\n.loadGameDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.loadGameDialog .mainDiv .groupFrame {\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 7px;\n}\n.loadGameDialog .mainDiv .loadGameInput {\n  max-width: calc(100% - 220px);\n  font-size: 48px;\n  margin: 35px 0;\n}\n.loadGameDialog .mainDiv .recentGamesDropDwn {\n  max-width: calc(100% - 230px);\n  font-size: 48px;\n  margin: 35px 0;\n}\n.loadGameDialog .mainDiv .moves {\n  margin: 35px 0;\n}\n.loadGameDialog .mainDiv .movesInput {\n  width: 50%;\n}\n.loadGameDialog .mainDiv .loadMovesInfo {\n  font-size: 50%;\n  font-style: italic;\n  margin-left: 203px;\n}\n.loadGameDialog .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.loadGameDialog .btnDiv .loadBtn,\n.loadGameDialog .btnDiv .cancelBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  width: 240px;\n  font-size: 48px;\n}\n";t("lessify")(r),i.g=r},{lessify:74}],57:[function(t,i,n){var r=".moveIndicator {\n  height: 80px;\n  text-align: center;\n}\n.moveIndicator.black .icon {\n  background-color: #000;\n}\n.moveIndicator.black .text {\n  color: #fff;\n  text-shadow: #000 0 0 3px;\n}\n.moveIndicator.white .icon {\n  background-color: #fff;\n}\n.moveIndicator.white .text {\n  color: #000;\n  text-shadow: #fff 0 0 3px;\n}\n.moveIndicator .label {\n  font-size: 30px;\n}\n.moveIndicator .icon {\n  display: inline-block;\n  position: relative;\n  top: -3px;\n  width: 56px;\n  height: 56px;\n  border: 1px solid rgba(127, 127, 127, 0.5);\n  border-radius: 50px;\n}\n.moveIndicator .icon .text {\n  position: relative;\n  width: 84px;\n  text-align: center;\n  left: -14px;\n  top: 6px;\n  font-size: 35px;\n  font-weight: bold;\n}\n";t("lessify")(r),i.g=r},{lessify:74}],58:[function(t,i,n){var r='.newGameDialog {\n  margin: 50px;\n}\n.newGameDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.newGameDialog .mainDiv .centeredDiv {\n  margin-top: -40px;\n  text-align: center;\n}\n.newGameDialog .boardDiv .sizeBox {\n  display: inline-block;\n  position: relative;\n  width: 240px;\n  max-width: 33%;\n  text-align: center;\n  margin: 10px 18px 0 20px;\n}\n.newGameDialog .playerBtn {\n  position: relative;\n  vertical-align: top;\n  top: 162px;\n  left: 2px;\n  width: 200px;\n  max-width: 26%;\n  height: 200px;\n}\n.newGameDialog .playerBtn .playerBtnIcon {\n  background-image: url("assets/humanBlue.png");\n  -webkit-filter: brightness(0);\n  background-size: 80%;\n}\n.newGameDialog .playerBtn.robot .playerBtnIcon {\n  background-size: contain;\n  background-image: url("assets/robotBlue.png");\n}\n.newGameDialog .playerBtn.white .playerBtnIcon {\n  -webkit-filter: invert(1) grayscale(1);\n}\n.newGameDialog .sizeBtn {\n  position: relative;\n  width: 170px;\n  max-width: 88%;\n  height: 120px;\n  margin: 0 0 10px;\n}\n.newGameDialog .sizeBtn .sizeBtnIcon {\n  background-image: url("assets/upBlue.png");\n  background-size: 80%;\n  -webkit-filter: brightness(0);\n}\n.newGameDialog .sizeBtn.down {\n  margin-top: 4px;\n}\n.newGameDialog .sizeBtn.down .sizeBtnIcon {\n  background-image: url("assets/downBlue.png");\n}\n.newGameDialog .boardImgFrame {\n  display: inline-block;\n  position: relative;\n  width: 100%;\n  height: 240px;\n  background-color: #d1cac1;\n  border-radius: 5px;\n  box-shadow: black 3px 3px 6px;\n}\n.newGameDialog .boardImgFrame .boardImg {\n  width: 100%;\n  height: 100%;\n  background: url("assets/19x19.png") 50% no-repeat;\n}\n.newGameDialog .boardImgFrame .curSize {\n  position: absolute;\n  top: -4px;\n  width: 100%;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  text-align: center;\n  color: white;\n  text-shadow: black 3px 3px 5px;\n}\n.newGameDialog .advancedBtn {\n  width: 248px;\n  height: 100px;\n  line-height: 92px;\n  margin: 40px 10px 25px;\n  background-color: #faf7f5;\n  border: 1px solid #a7a7a7;\n}\n.newGameDialog .settingBtn {\n  position: relative;\n  left: calc(100% - 100px);\n  top: 9px;\n  width: 90px;\n  height: 80px;\n}\n.newGameDialog .settingBtn .settingBtnIcon {\n  background-image: url("assets/settings.png");\n  -webkit-filter: sepia(0.9) brightness(3);\n  background-size: auto 87%;\n}\n.newGameDialog .advancedDiv .rules {\n  display: inline-block;\n  margin-left: 87px;\n}\n.newGameDialog .advancedDiv .defAiInfo {\n  font-size: 50%;\n  font-style: italic;\n  width: 400px;\n  display: inline-block;\n}\n.newGameDialog .startBtn {\n  margin: 16px 0 10px -5px;\n  position: relative;\n  left: calc(100% - 240px);\n  width: 240px;\n  font-size: 48px;\n}\n';t("lessify")(r),i.g=r},{lessify:74}],59:[function(t,i,n){var r=".settingDlg {\n  z-index: 2000;\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  margin: 0 20%;\n  width: 60%;\n}\n.settingDlg .content {\n  padding: 20px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.settingDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: 0 0 -10px 0;\n}\n.settingDlg .btnDiv .okBtn {\n  float: right;\n}\n";t("lessify")(r),i.g=r},{lessify:74}],60:[function(t,i,n){"use strict";function r(){}var e="./assets/";i.g=r,r.Xo=function(t,i){var n=new XMLHttpRequest;n.onreadystatechange=function(){return 4===~~n.readyState?200!==~~n.status?i("xhrError: "+n.status):void i(null,n.response):void 0},n.open("GET",t,!0),n.send()},r.Yo=function(t,i){return r.Xo(e+t,i)},r.Uo=function(t,i){return r.Xo(t,i)}},{}],61:[function(t,i,n){"use strict";function r(){this.Zo={},this.$o=null,this.kn=""}function e(t,i){for(var n in i)t.style[n]=i[n]}function o(t,i,n,r){var e,o=n[i],s=r[i];if(o)for(e in o)t.style[e]=s?s[e]||null:null;if(s)for(e in s)t.style[e]=s[e]}i.g=new r,r.prototype.tn=function(t,i){this.Zo=t,this.ln(i,!0),this._o(document.body,"body")},r.prototype.jn=function(){return Object.keys(this.Zo)},r.prototype.ln=function(t,i){if(t!==this.kn){var n=this.$o;if(this.kn=t,this.$o=this.Zo[t],!i)for(var r=document.all,e=0;e<r.length;e++){var o=r[e];this.ap(o,n)}}},r.prototype._o=function(t,i){if(this.$o){var n=this.$o[t.localName];if(n&&e(t,n),i&&(n=this.$o["."+i],n&&e(t,n),i.indexOf(" ")>=0))for(var r=i.split(" "),o=0;o<r.length;o++)n=this.$o["."+r[o]],n&&e(t,n)}},r.prototype.ap=function(t,i){o(t,t.localName,i,this.$o);for(var n=t.className.split(" "),r=0;r<n.length;r++)o(t,"."+n[r],i,this.$o)},r.prototype.bp=function(t,i,n){var r=this.$o[i+"+"+n];if(r){var e=this.$o[i]||{};for(var o in r)t.style[o]=e[o]||null}},r.prototype.toggle=function(t,i,n){if(this.$o){var r,o=t.className.split(" ");if(n){var s=this.$o[t.localName+"+"+i];for(s&&e(t,s),r=0;r<o.length;r++)s=this.$o["."+o[r]+"+"+i],s&&e(t,s)}else for(this.bp(t,t.localName,i),r=0;r<o.length;r++)this.bp(t,"."+o[r],i)}}},{}],62:[function(t,i,n){"use strict";function r(){var t=this["in"];t.options&&(t.options.So=this.id),o.Gm(t.lm),t.im&&t.im(t.options)}function e(t,i,n,e){var o=h.xm(t,"popupDlgBtn",n,r);o["in"]=i,o.id=e}function o(t,i,n,r,s){this.parent=t||document.body,this.options=r,this.im=s;var u=this.lm=h.mm(null,"popupDlg dialog");u.mm("dialogTitle").om(n||a("#problem"));var c=u.mm("content");h.um(c,"message",i);for(var l=r&&r.buttons||[a("#OK")],f=u.mm("btnDiv"),p=0;p<l.length;p++)e(f,this,l[p],p);o.zm(this.lm,this.parent)}function s(t){var i=h.mm(null,"popupOverlay");return t&&(t=t.Hm||t,i.Rm("left",t.offsetLeft+"px"),i.Rm("top",t.offsetTop+"px"),i.Rm("width",t.scrollWidth+2+"px"),i.Rm("height",t.scrollHeight+2+"px")),i}t("./popupDlg.less");var h=t(".").hm,a=t("./getText");i.g=o,o.zm=function(t,i){var n=t.cp=s(i);n.parent=i,n.dp(i),t.dp(n,!0),n.Rm("opacity",1)},o.Gm=function(t){t.cp.Rm("opacity",0),window.setTimeout(function(){t.nm(!1),h.removeChild(t.cp.parent,t.cp)},300)}},{".":66,"./getText":65,"./popupDlg.less":67}],63:[function(t,i,n){"use strict";function r(t){this.ep={},this.Bn=t.Bn,this.jm(t)}function e(){this.An.hp(),this.An.Bn(this.id)}function o(){this.An.hp()}t("./topMenu.less");var s=t("./tapBehavior"),h=t(".").hm;i.g=r,r.prototype.Xn=function(){return this.fp.Hm.clientHeight},r.prototype.$n=function(t){this.gp.om(t)},r.prototype.Fn=function(t){return this.ip.mm(t||"menuSeparator")},r.prototype.En=function(t,i){var n=this.ip.mm("menuOption").om(i);return n.id=t,n.An=this,s(n,e),this.ep[t]=n,n},r.prototype.Hn=function(t){return this.ip.appendChild(t)},r.prototype.removeItem=function(t){this.ip.removeChild(t)},r.prototype.jm=function(t){var i=this.cp=h.mm(document.body,"topMenuOverlay");i.An=this,i.nm(!1),s(i,o);var n=h.mm(document.body,"topMenu");this.fp=h.Zm(n,"menuBtn",this.jp.bind(this)),this.fp.Lm("btn",!1),this.gp=n.mm("topTitle"),this.ip=n.mm("slideMenu"),this.ip.mm("menuTitle").om(t.Dn)},r.prototype.jp=function(){this.cp.nm(!0);var t=this.cp.Hm.clientWidth;t=1,this.cp.Rm("opacity",1),this.ip.Lm("opened",!0)},r.prototype.hp=function(){var t=this.cp;t.Rm("opacity",0),window.setTimeout(function(){t.nm(!1)},300),this.ip.Lm("opened",!1)}},{".":66,"./tapBehavior":68,"./topMenu.less":69}],64:[function(t,i,n){"use strict";function r(t){this.Hm=t.Hm||t,this.kp={},this.lp={},this.mp={},this.timeout=null,this.np=null,this.op=null}function e(t,i){window.clearTimeout(t.timeout),t.timeout=null,t.Hm.style.webkitTransition=t.np,!i&&t.op&&t.op(),t.op=null}i.g=r,r.prototype.from=function(t,i){return this.lp[t]=i,this},r.prototype.Am=function(t,i){return this.mp[t]=i,this},r.prototype.start=function(t,i){var n=this.Hm;n.pp&&n.pp.timeout&&e(n.pp,!0),n.pp=this,this.np=n.style.webkitTransition,n.style.webkitTransition=null;for(var r in this.lp)this.kp[r]=n.style[r],n.style[r]=this.lp[r];n.clientHeight||(n=n);var o="all "+t+"ms ease-in-out";n.style.webkitTransition=o;for(r in this.mp)this.kp.hasOwnProperty(r)||(this.kp[r]=n.style[r]),n.style[r]=this.mp[r];return this.op=i,this.timeout=window.setTimeout(e,t,this),this},r.prototype.reverse=function(t,i){var n=this.mp;this.mp=this.lp,this.lp=n,this.start(t,i)},r.prototype.hn=function(t,i){this.mp=this.kp,this.kp={},this.lp={},this.start(t,i)}},{}],65:[function(t,i,n){"use strict";function r(t){return a[t]}var e=t("./GetFile"),o=t("../../log"),s="en",h=t("../../../assets/en_dict.json"),a=h;i.g=r,r.init=function(t,i){if(a=h,t===s)return i();var n=t+"_dict.json";e.Yo(n,function(t,r){return t?(o.error("Failed to get file "+n+": "+t),i(t)):(a=JSON.parse(r),void i())})}},{"../../../assets/en_dict.json":5,"../../log":46,"./GetFile":60}],66:[function(t,i,n){"use strict";function r(t,i,n,e){this.type=i;var o=this.Hm=document.createElement(i);this.name=e,this.qp=!1,n&&(o.className=n),a&&a._o(o,n),t&&(t instanceof r?t.Hm:t).appendChild(o),u&&u.add(e||n,this)}function e(t,i,n,r){this.left=t,this.top=i,this.width=n,this.height=r}function o(){this.zp={}}var s=t("./tapBehavior"),h=null,a=null,u=null,c=1;n.init=function(t,i){a=t,h=i},n.hm=r,r.prototype.dp=function(t,i){return(t instanceof r?t.Hm:t).appendChild(this.Hm),this.qp=i,h&&i&&h.addElement(this.Hm),this},r.prototype.appendChild=function(t,i){return t.dp(this,i)},r.removeChild=function(t,i){i&&(h&&i.qp&&h.removeElement(i.Hm),t instanceof r&&(t=t.Hm),t.removeChild(i.Hm))},r.prototype.removeChild=function(t){r.removeChild(this,t)},r.prototype.Jo=function(){this.Hm.innerHTML=null},r.prototype.om=function(t){return this.Hm.textContent=t,this},r.prototype.Sn=function(t){return this.Hm.innerHTML=t,this},r.prototype.setAttribute=function(t,i){return this.Hm.setAttribute(t,i),this},r.prototype.Rm=function(t,i){return this.Hm.style[t]=i,this},r.prototype.nm=function(t){return t===this.rp()?this:(this.Hm.style.display=t?"":"none",this.sp=!!t,h&&this.qp&&(t?h.addElement(this.Hm):h.removeElement(this.Hm)),this)},r.prototype.rp=function(){return this.sp||void 0===this.sp},r.prototype.Tm=function(t){return this.Hm.disabled=!t,this.Lm("disabled",!t),this},r.prototype.text=function(){return this.Hm.textContent},r.prototype.tp=function(){
return this.Hm.innerHTML},r.prototype.value=function(){return this.Hm.value},r.prototype.To=function(){return this.Hm.checked},r.prototype.Jl=function(){return this.Hm},r.prototype.clear=function(){this.Hm.innerHTML=""},r.prototype.v=function(t,i){var n=this;this.Hm.addEventListener(t,function(t){i.call(n,t)})},r.prototype.Lm=function(t,i){var n=this.Hm,r=n.className,e=" "+r+" ",o=" "+t+" ",s=e.indexOf(o);if(i){if(s>=0)return;a&&a.toggle(n,t,i),n.className=r+" "+t}else{if(0>s)return;n.className=e.replace(o," ").trim(),a&&a.toggle(n,t,i)}},r.prototype.up=function(){this.Hm.scrollTop=this.Hm.scrollHeight},r.mm=function(t,i,n){return new r(t,"div",i,n||i)},r.prototype.mm=function(t,i){return new r(this,"div",t,i||t)},r.vp=function(t,i,n,e){var o=new r(t,"button",i+"Button",i);return n&&(o.Hm.innerText=n),o.v("click",e),o},r.xm=function(t,i,n,e){var o=new r(t,"div","btn "+i,i);return o.om(n),s(o,e),o},r.Zm=function(t,i,n){var e=r.xm(t,i,null,n);return e.mm(i+"Icon btnIcon"),e},r.Lo=function(t,i,n,e){var o=new r(t,"a",i,i);return o.setAttribute("href",e),o.om(n),o},r.um=function(t,i,n){return new r(t,"div",i,i).om(n)},r.tm=function(t){return new r(t,"br")},r.rm=function(t,i,n,e){var o=i+"Label";r.um(t,o+" inputLbl",n,o);var s=new r(t,"input",i+"Input inputBox",i);return void 0!==e&&(s.Hm.value=e),s},r.wo=function(t,i,n,e,o){var s=new r(t,"div",i+"Div chkBoxDiv"),h=new r(s,"input",i+"ChkBox chkBox",i),a=h.Hm;return a.type="checkbox",a.name=i,void 0!==e&&(a.value=e),a.id=i+"ChkBox"+(void 0!==e?e:c++),o&&(a.checked=!0),new r(s,"label",i+"ChkLabel chkLbl",i).om(n).setAttribute("for",a.id),h},r.wp=function(t,i,n,e,o){e||(e=n);for(var s=[],h=0;h<n.length;h++){var a=s[h]=new r(t,"input",i+"RadioBtn radioBtn",i),u=a.Hm;u.type="radio",u.name=i,u.value=e[h],u.id=i+"Radio"+e[h],e[h]===o&&(u.checked=!0),new r(t,"label",i+"RadioLbl radioLbl",i).om(n[h]).setAttribute("for",u.id)}return s},r.xp=function(t){for(var i=0;i<t.length;i++)if(t[i].Hm.checked)return t[i].Hm.value},r.wm=function(t,i,n,e,o){e||(e=n);var s=new r(t,"select",i+"DropDwn dropDwn",i);s.values=e;for(var h=0,a=0;a<n.length;a++){var u=new r(s,"option").Hm;u.value=e[a],u.textContent=n[a],e[a]===o&&(h=a)}return s.Hm.selectedIndex=h,s},r.prototype.select=function(t){var i=this.values.indexOf(t);-1!==i&&(this.Hm.selectedIndex=i)},r.yp=function(t){var i=(t.Hm||t).getBoundingClientRect();return new e(i.left,i.top,i.width,i.height)},n.no=function(){return u=new o},n.Ap=function(){u=null},o.prototype.add=function(t,i){this.zp[t]=i},o.prototype.get=function(t){return this.zp[t]},o.prototype.Tm=function(t,i,n){"ALL"===t&&(t=Object.keys(this.zp));for(var r=0;r<t.length;r++)if(!n||-1===n.indexOf(t[r])){var e=this.zp[t[r]];e?e.Tm(i):console.error("Invalid control name:",t[r])}},o.prototype.nm=function(t,i,n){"ALL"===t&&(t=Object.keys(this.zp));for(var r=0;r<t.length;r++)if(!n||-1===n.indexOf(t[r])){var e=this.zp[t[r]];e?e.nm(i):console.error("Invalid control name:",t[r])}},r.un=function(t){document.head.getElementsByTagName("title")[0].textContent=t},r.Bp=function(){var t=window.getSelection();if(!t.rangeCount)return null;var i=t.getRangeAt(0),n=i.startContainer.data;return n?n.substring(i.startOffset,i.endOffset):null},r.Uo=function(t,i){var n=new Blob([t]),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download=i,r.click()},r.prototype.Dm=function(){var t=this.Hm.files;return t&&t.length>0},r.prototype.Em=function(t){var i=this.Hm.files;if(!i)return console.error("Invalid field type for uploadFile: "+this.type);if(!i.length)return!1;var n=new FileReader;return n.readAsText(i[0]),n.onloadend=function(){return t(n.result)},!0}},{"./tapBehavior":68}],67:[function(t,i,n){var r=".popupOverlay {\n  z-index: 2000;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.7);\n  transition: opacity 300ms ease-out;\n  opacity: 0;\n}\n.popupDlg {\n  position: relative;\n  margin: 30px auto;\n  width: 480px;\n}\n.popupDlg .content {\n  padding: 20px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.popupDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.popupDlg .btnDiv .popupDlgBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n}\n";t("lessify")(r),i.g=r},{lessify:74}],68:[function(t,i,n){"use strict";var r=t("./touchManager");i.g=function(t,i){r.Pl(t.Hm,function(n){t.Hm.disabled||"tap"===n&&i.call(t)})}},{"./touchManager":70}],69:[function(t,i,n){var r='.topMenuOverlay {\n  z-index: 2000;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  transition: opacity 300ms ease-out;\n  opacity: 0;\n}\n.topMenu {\n  width: 100%;\n  height: 130px;\n}\n.topMenu .menuBtn {\n  display: inline-block;\n  width: 130px;\n  height: 100%;\n  background-color: #000;\n}\n.topMenu .menuBtn .menuBtnIcon {\n  background-image: url("assets/menuBtn.png");\n  -webkit-filter: invert(1) grayscale(1);\n}\n.topMenu .topTitle {\n  display: inline-block;\n  vertical-align: top;\n  width: calc(100% - 130px);\n  height: 100%;\n  overflow: hidden;\n  background-color: #333;\n  color: #fff;\n  padding-left: 31px;\n  font-size: 30px;\n  line-height: 130px;\n}\n.topMenu .slideMenu {\n  z-index: 2010;\n  position: absolute;\n  left: 0;\n  top: 0;\n  min-width: 75%;\n  min-height: 100%;\n  transition: transform 300ms ease-out;\n  -webkit-transform: translateX(-100%);\n  transform: translateX(-100%);\n  background-color: #000;\n  color: #fff;\n}\n.topMenu .slideMenu.opened {\n  -webkit-transform: translateX(0);\n  transform: translateX(0);\n}\n.topMenu .slideMenu .menuTitle {\n  height: 140px;\n  line-height: 140px;\n  padding-left: 50px;\n  font-size: 43px;\n  border-bottom: 1px solid #909090;\n  background-color: #323435;\n}\n.topMenu .slideMenu .menuOption {\n  padding: 0 100px;\n  height: 140px;\n  line-height: 140px;\n  font-size: 30px;\n}\n.topMenu .slideMenu .menuSeparator {\n  border-bottom: 1px solid #777;\n}\n';t("lessify")(r),i.g=r},{lessify:74}],70:[function(t,i,n){"use strict";function r(){this.Cp=this.Dp=0,this.Ep=this.Fp=!1,this.target=null,this.Gp=this.startTime=this.Hp=0}function e(t){var i=t.currentTarget;return v.Gp+=t.changedTouches.length,v.Gp>1?v.Ip(i):void v.Jp(t.changedTouches[0],i)}function o(t){return v.Gp-=t.changedTouches.length,v.Gp>0?console.warn("Extra touchend count?",t):void(v.Kp(t.changedTouches[0],v.target)&&t.preventDefault())}function s(t){return t.changedTouches.length>1?v.Ip(v.target):void(v.Lp(t.changedTouches[0],v.target)&&t.preventDefault())}function h(t){v.Gp-=t.changedTouches.length,v.Ip(v.target)}function a(t){t.button===d&&v.Jp(t,t.currentTarget)}function u(t){t.button===d&&v.Kp(t,v.target)&&t.preventDefault()}function c(t){v.Lp(t,v.target)&&t.preventDefault()}var l=10,f=50,p=300,g=500,d=0,v=i.g=new r;r.prototype.Mp=function(t,i){if(i)null!==this.target&&console.error("Forgot to stop listening on",this.target),this.Ep=!0,this.target=t,t.addEventListener("touchmove",s),t.addEventListener("touchend",o),t.addEventListener("touchcancel",h),document.addEventListener("mousemove",c),document.addEventListener("mouseup",u);else{if(null===this.target)return console.warn("Not listening anyway");this.Ep=!1,this.target=null,t.removeEventListener("touchmove",s),t.removeEventListener("touchend",o),t.removeEventListener("touchcancel",h),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",u)}},r.prototype.Jp=function(t,i){this.Mp(i,!0),this.Ep=!0,this.Cp=t.clientX,this.Dp=t.clientY,this.startTime=Date.now();var n=this;this.Np&&window.clearTimeout(this.Np),this.Np=window.setTimeout(function(){n.Np=null,n.Ep&&!n.Fp&&n.Op(t,i)},p)},r.prototype.Op=function(t,i){this.Fp=!0,this.startTime=Date.now(),i.Pp("dragStart",t.pageX-i.offsetLeft,t.pageY-i.offsetTop)},r.prototype.Ip=function(t){return this.Gp=0,this.Mp(t,!1),this.Fp&&(this.Fp=!1,t.Pp("dragCancel")),!0},r.prototype.Lp=function(t,i){var n=Date.now();return n-this.Hp<f?!0:(this.Hp=n,this.Fp?(i.Pp("drag",t.pageX-i.offsetLeft,t.pageY-i.offsetTop),!0):Math.abs(t.clientX-this.Cp)+Math.abs(t.clientY-this.Dp)<l?!1:n-this.startTime<p?(this.Mp(i,!1),!1):this.Op(t,i))},r.prototype.Kp=function(t,i){if(this.Fp&&Date.now()-this.startTime<g)return this.Ip(i);var n=this.Fp?"dragEnd":"tap";return i.Pp(n,t.pageX-i.offsetLeft,t.pageY-i.offsetTop),this.Mp(i,!1),this.Fp=!1,!0},r.prototype.Pl=function(t,i){t.Pp=i,t.addEventListener("touchstart",e),t.addEventListener("mousedown",a)}},{}],71:[function(t,i,n){var r='body {\n  background-color: #865e50;\n  font-family: "Arial";\n  margin: 0px;\n  height: 1615px;\n}\ndiv {\n  box-sizing: border-box;\n}\n::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 7px;\n  height: 7px;\n}\n::-webkit-scrollbar-track {\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.2);\n  -webkit-border-radius: 10px;\n  border-radius: 7px;\n  margin: 1px;\n}\n::-webkit-scrollbar-thumb {\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, 0.5);\n}\n.downloadLink {\n  text-decoration: none;\n  color: white;\n}\n.pageTitle {\n  margin-top: 7px;\n  margin-bottom: 7px;\n  font-size: 40px;\n  font-weight: bold;\n}\n.subTitle {\n  font-size: 30px;\n  margin-top: 0.5em;\n  margin-bottom: 5px;\n}\n.logBox {\n  font-size: 28px;\n  font-family: "Arial";\n  background-color: white;\n  border: solid #cca 1px;\n  border-radius: 8px;\n  padding: 5px;\n  overflow-y: auto;\n  word-wrap: break-word;\n}\n.inputLbl {\n  display: inline-block;\n  margin-left: 10px;\n  font-size: 28px;\n}\n.inputBox {\n  margin: 17px 13px 17px 13px;\n  min-height: 1cm;\n  text-align: left;\n  font-size: 42px;\n  color: inherit;\n}\n.btn {\n  display: inline-block;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  box-sizing: border-box;\n  padding: 0 2px;\n  border-radius: 13px;\n  width: 160px;\n  height: 120px;\n  line-height: 120px;\n  text-align: center;\n  font-size: 28px;\n  border-color: #987;\n  background-color: #af9e8e;\n  color: #000000;\n}\n.btn.toggled {\n  background-color: #AD4343;\n}\n.btn.disabled {\n  color: #888;\n  opacity: 0.6;\n}\n.btn.pressed {\n  border-style: outset;\n}\n.btnIcon {\n  width: 100%;\n  height: 100%;\n  background-position: 50%;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n.chkBoxDiv {\n  display: inline-block;\n  margin-right: 10px;\n}\n.chkBox {\n  margin: 5px 3px 14px 2px;\n  width: 29px;\n  height: 1.5em;\n}\n.chkLbl {\n  font-size: 28px;\n}\n.dropDwn {\n  font-size: 42px;\n  margin: 17px 13px 17px 13px;\n  color: inherit;\n}\n.radioBtn {\n  margin: 17px 0px 17px 13px;\n  width: 29px;\n  height: 1.5em;\n}\n.radioLbl {\n  margin-right: 13px;\n}\n.dialog {\n  padding: 10px;\n  background-color: #ffffee;\n  color: #000000;\n  border: solid #cca 1px;\n  border-radius: 10px;\n  font-family: Arial;\n  font-size: 42px;\n}\n.dialogTitle {\n  font-size: 50px;\n  background-color: #ffebce;\n  color: #000000;\n  border: solid 1px rgba(195, 50, 50, 0.2);\n  border-radius: 10px;\n  margin: -6px;\n  margin-bottom: 15px;\n  padding: 10px 0px 10px 12px;\n}\n.gameUi {\n  padding: 2px;\n}\n.gameUi .board {\n  margin: 5px 0;\n  background-color: #402f23;\n  border-radius: 7px;\n}\n.gameUi .board .wgo-board {\n  margin: 0 auto;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  /* disables grey shade on long-tap for Safari */\n  /* Below avoid issues when tap-hold on Android */\n  -webkit-user-select: none;\n  -webkit-touch-callout: none;\n}\n.gameUi .boardDesc {\n  margin-top: 3px;\n  font-weight: bold;\n  font-style: italic;\n}\n.gameUi .btn {\n  width: 200px;\n}\n.gameUi .underBoard {\n  padding-bottom: 5px;\n}\n.gameUi .statusBar {\n  position: relative;\n  height: 95px;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: row;\n  flex-direction: row;\n  background-color: #dfc2ac;\n  border: rgba(0, 0, 0, 0.7) 1px solid;\n  border-radius: 7px;\n}\n.gameUi .statusBar .lastMove {\n  margin-left: 15px;\n}\n.gameUi .statusBar .gameInfo {\n  vertical-align: top;\n  margin: 6px 15px 3px 15px;\n  padding: 1px 3px;\n  width: 280px;\n  height: 80px;\n  overflow-y: auto;\n  font-size: 19px;\n  font-family: tahoma;\n  background-color: #fef6ef;\n  border-radius: 7px;\n  border: rgba(0, 0, 0, 0.35) 1px solid;\n}\n.gameUi .statusBar .message {\n  -webkit-flex: 1;\n  flex: 1;\n  white-space: pre-wrap;\n  overflow-y: auto;\n  font-size: 26px;\n  font-weight: bold;\n}\n.gameUi .statusBar .nextPlayer {\n  margin-left: 15px;\n  margin-right: 8px;\n}\n.gameUi .mainControls {\n  margin-top: 10px;\n}\n.gameUi .mainControls .leftDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 20%;\n  padding-left: 10px;\n  text-align: left;\n}\n.gameUi .mainControls .leftDiv .animatedDiv {\n  margin: 16px;\n}\n.gameUi .mainControls .mainDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 60%;\n  text-align: center;\n}\n.gameUi .mainControls .mainDiv .btn {\n  margin: 0 3px;\n  height: 200px;\n  line-height: 200px;\n  max-width: 44%;\n}\n.gameUi .mainControls .mainDiv .back10,\n.gameUi .mainControls .mainDiv .back1,\n.gameUi .mainControls .mainDiv .forw1,\n.gameUi .mainControls .mainDiv .forw10 {\n  max-width: 22%;\n}\n.gameUi .mainControls .rightDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 20%;\n  text-align: right;\n}\n.gameUi .mainControls .leftDiv .btn,\n.gameUi .mainControls .rightDiv .btn {\n  background-color: #5c4137;\n  color: #faebd7;\n  max-width: 100%;\n}\n.gameUi .mainControls .leftDiv .btn.toggled,\n.gameUi .mainControls .rightDiv .btn.toggled {\n  background-color: #AD4343;\n}\n.gameUi .mainControls .leftDiv .btn.resi,\n.gameUi .mainControls .rightDiv .btn.resi {\n  height: 100px;\n  line-height: 100px;\n  width: 150px;\n}\n.gameUi .outputBox {\n  margin: 20px 100px;\n  font-size: 24px;\n  word-wrap: break-word;\n}\n';t("lessify")(r),i.g=r},{lessify:74}],72:[function(t,i,n){!function(t,i){"use strict";var n=document.getElementsByTagName("script"),r=n[n.length-1].src.split("?")[0],e=r.split("/").slice(0,-1).join("/")+"/",o={version:"2.3.1",B:1,W:-1,Qp:!0,Rp:e,lang:"en",Sp:{Tp:{}}};o.opera=-1!=navigator.userAgent.search(/(opera)(?:.*version)?[ \/]([\w.]+)/i),o.Up=-1!=navigator.userAgent.search(/(webkit)[ \/]([\w.]+)/i),o.Vp=-1!=navigator.userAgent.search(/(msie) ([\w.]+)/i),o.Wp=-1!=navigator.userAgent.search(/(mozilla)(?:.*? rv:([\w.]+))?/i)&&!o.Up&&!o.Vp,o.Xp=function(t){var i=o.Sp[o.lang][t]||o.Sp.Tp[t];if(i){for(var n=1;n<arguments.length;n++)i=i.replace("$",arguments[n]);return i}return t},o.Yp=function(t,i){return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.Zp=t,i},o.$p=function(){throw Error("unimplemented abstract method")},o.clone=function(t){if(t&&"object"==typeof t){var i=t.constructor==Array?[]:{};for(var n in t)t[n]==t?i[n]=t:i[n]=o.clone(t[n]);return i}return t},o._p=function(t){return t&&"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t};var s=function(n,r){var r=r||{};for(var e in r)this[e]=r[e];for(var e in o.Il["default"])this[e]===i&&(this[e]=o.Il["default"][e]);for(var e in s.Zo["default"])this.$o[e]===i&&(this.$o[e]=s.Zo["default"][e]);this.aq=this.section.left,this.bq=this.section.top,this.cq=this.size-1-this.section.right,this.dq=this.size-1-this.section.bottom,this.init(),n.appendChild(this.Ql),this.eq=t.devicePixelRatio||1,this.width&&this.height?this.fq(this.width,this.height):this.width?this.gq(this.width):this.height&&this.hq(this.height)};s.Zo={},s.Zo.iq={shadowColor:"rgba(32,32,32,0.5)",shadowTransparentColor:"rgba(32,32,32,0)",shadowBlur:0,shadowSize:function(t){return t.shadowSize},markupBlackColor:"rgba(255,255,255,0.8)",markupWhiteColor:"rgba(0,0,0,0.8)",markupNoneColor:"rgba(0,0,0,0.8)",markupLinesWidth:function(t){return t.jq?t.Ll/7:t.lineWidth},gridLinesWidth:1,gridLinesColor:function(t){return"rgba(0,0,0,"+Math.min(1,t.Ll/15)+")"},starColor:"#000",starSize:function(t){return t.starSize*(t.width/300+1)},stoneSize:function(t){return t.stoneSize*Math.min(t.am,t.bm)/2},coordinatesColor:"rgba(0,0,0,0.7)",font:function(t){return t.font},linesShift:.5},s.Zo["default"]={shadowColor:"rgba(62,32,32,0.5)",shadowTransparentColor:"rgba(62,32,32,0)",shadowBlur:function(t){return.1*t.Ll},shadowSize:1,markupBlackColor:"rgba(255,255,255,0.9)",markupWhiteColor:"rgba(0,0,0,0.7)",markupNoneColor:"rgba(0,0,0,0.7)",markupLinesWidth:function(t){return t.Ll/8},gridLinesWidth:function(t){return t.Ll/15},gridLinesColor:"#654525",starColor:"#531",starSize:function(t){return t.Ll/8+1},stoneSize:function(t){return Math.min(t.am,t.bm)/2},coordinatesColor:"#531",kq:"rgba(0,32,128,0.8)",font:"calibri",linesShift:.25};var h,a=function(t,i){return"function"==typeof i.$o[t]?i.$o[t](i):i.$o[t]},u={lq:function(t,i){var n=i.mq(t.x),r=i.nq(t.y),e=i.Ll;this.beginPath();var o=a("shadowBlur",i),s=Math.max(0,e-.5),h=this.createRadialGradient(n-i.oq,r-i.oq,s-1-o,n-i.oq,r-i.oq,s+o);h.addColorStop(0,a("shadowColor",i)),h.addColorStop(1,a("shadowTransparentColor",i)),this.fillStyle=h,this.arc(n-i.oq,r-i.oq,s+o,0,2*Math.PI,!0),this.fill()},clear:function(t,i){var n=i.mq(t.x),r=i.nq(t.y),e=i.Ll;this.clearRect(n-1.1*e-i.oq,r-1.1*e-i.oq,2.2*e,2.2*e)}},c=function(t,i,n){return t.Yl[i][n][0].c==o.B?a("markupBlackColor",t):t.Yl[i][n][0].c==o.W?a("markupWhiteColor",t):a("markupNoneColor",t)},l=function(t,i,n){return t.Yl[i][n][0]&&t.Yl[i][n][0].c==o.W||t.Yl[i][n][0].c==o.B},f=function(t,i){var n;t[i].clear(),t[i].lq(t);for(var r=0;r<t.size;r++)for(var e=0;e<t.size;e++)for(var o=0;o<t.Yl[r][e].length;o++){var h=t.Yl[r][e][o];n=h.type?"string"==typeof h.type?s.qq[h.type]:h.type:t.pq,n[i]&&n[i].lq.call(t[i].getContext(h),h,t)}for(var a=0;a<t.rq.length;a++){var h=t.rq[a],n=h.Bn;n[i]&&n[i].lq.call(t[i].getContext(h.sq),h.sq,t)}},p=function(t,i,n,r,e,o,s,h){t.strokeStyle="rgba(64,64,64,0.2)",t.lineWidth=r/30*h,t.beginPath(),r-=Math.max(1,t.lineWidth);var a,u,i,c,l,f=i+r*Math.cos(e*Math.PI),p=n+r*Math.sin(e*Math.PI),g=i+r*Math.cos(o*Math.PI),d=n+r*Math.sin(o*Math.PI);g>f?(a=(d-p)/(g-f),u=Math.atan(a)):g==f?u=Math.PI/2:(a=(d-p)/(g-f),u=Math.atan(a)-Math.PI);var v=s*r;c=Math.sin(u)*v,l=Math.cos(u)*v;var m=f+c,y=p-l,b=g+c,w=d-l;t.moveTo(f,p),t.bezierCurveTo(m,y,b,w,g,d),t.stroke()},g=function(t){for(var i=t.angle,n=t.angle,r=0;r<t.tq.length;r++)i+=t.tq[r],n-=t.tq[r],p(t.uq,t.x,t.y,t.vq,i,n,t.wq,t.xq)};s.qq={yq:{Tf:{lq:function(t,i){var n,r=i.mq(t.x),e=i.nq(t.y),s=i.Ll;t.c==o.W?(n=this.createRadialGradient(r-2*s/5,e-2*s/5,s/3,r-s/5,e-s/5,5*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#aaa")):(n=this.createRadialGradient(r-2*s/5,e-2*s/5,1,r-s/5,e-s/5,4*s/5),n.addColorStop(0,"#666"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(r-i.oq,e-i.oq,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill()}},zq:u},Aq:{Tf:{lq:function(t,i){var n,r=i.mq(t.x),e=i.nq(t.y),s=i.Ll;t.c==o.W?(n=this.createRadialGradient(r-2*s/5,e-2*s/5,2,r-s/5,e-s/5,4*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#ddd")):(n=this.createRadialGradient(r-2*s/5,e-2*s/5,1,r-s/5,e-s/5,4*s/5),n.addColorStop(0,"#111"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(r-i.oq,e-i.oq,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill(),this.beginPath(),this.lineWidth=s/6,t.c==o.W?(this.strokeStyle="#999",this.arc(r+s/8,e+s/8,s/2,0,Math.PI/2,!1)):(this.strokeStyle="#ccc",this.arc(r-s/8,e-s/8,s/2,Math.PI,1.5*Math.PI)),this.stroke()}},zq:u},Bq:{Tf:{lq:function(t,i){var n,r=i.mq(t.x),e=i.nq(t.y),s=i.Ll;t.c==o.W?(n=this.createRadialGradient(r-2*s/5,e-2*s/5,s/3,r-s/5,e-s/5,8*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#666")):(n=this.createRadialGradient(r-2*s/5,e-2*s/5,1,r-s/5,e-s/5,3*s/5),n.addColorStop(0,"#555"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(r-i.oq,e-i.oq,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill()}},zq:u},Cq:{Tf:{lq:function(t,i){var n,r,e=i.Ll;h=h||Math.ceil(9999999*Math.random()),n=i.mq(t.x),r=i.nq(t.y);var s;if(s=t.c==o.W?"#aaa":"#000",this.beginPath(),this.fillStyle=s,this.arc(n-i.oq,r-i.oq,Math.max(0,e-.5),0,2*Math.PI,!0),this.fill(),t.c==o.W){var a=h%(3+t.x*i.size+t.y)%3,u=i.size*i.size+t.x*i.size+t.y,c=2/u*(h%u);g(0==a?{uq:this,x:n,y:r,vq:e,angle:c,tq:[.1,.12,.11,.1,.09,.09,.09,.09],wq:.25,xq:1.75}:1==a?{uq:this,x:n,y:r,vq:e,angle:c,tq:[.1,.09,.08,.07,.06,.06,.06,.06,.06,.06,.06],wq:.2,xq:1.5}:{uq:this,x:n,y:r,vq:e,angle:c,tq:[.12,.14,.13,.12,.12,.12],wq:.3,xq:2}),s=this.createRadialGradient(n-2*e/5,r-2*e/5,e/3,n-e/5,r-e/5,5*e/5),s.addColorStop(0,"rgba(255,255,255,0.9)"),s.addColorStop(1,"rgba(255,255,255,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.oq,r-i.oq,Math.max(0,e-.5),0,2*Math.PI,!0),this.fill()}else s=this.createRadialGradient(n+.4*e,r+.4*e,0,n+.5*e,r+.5*e,e),s.addColorStop(0,"rgba(32,32,32,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.oq,r-i.oq,Math.max(0,e-.5),0,2*Math.PI,!0),this.fill(),s=this.createRadialGradient(n-.4*e,r-.4*e,0,n-.5*e,r-.5*e,1.5*e),s.addColorStop(0,"rgba(64,64,64,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.oq,r-i.oq,Math.max(0,e-.5),0,2*Math.PI,!0),this.fill()}},zq:u},Dq:{Tf:{lq:function(t,i){var n=i.mq(t.x),r=i.nq(t.y),e=i.Ll,s=a("markupLinesWidth",i)||1;t.c==o.W?this.fillStyle="white":this.fillStyle="black",this.beginPath(),this.arc(n,r,Math.max(0,e-s),0,2*Math.PI,!0),this.fill(),this.lineWidth=s,this.strokeStyle="black",this.stroke()}}},CR:{Tf:{lq:function(t,i){var n=i.mq(t.x),r=i.nq(t.y),e=i.Ll;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||a("markupLinesWidth",i)||1,this.beginPath(),this.arc(n-i.oq,r-i.oq,e/2,0,2*Math.PI,!0),this.stroke()}}},LB:{Tf:{lq:function(t,i){var n=i.mq(t.x),r=i.nq(t.y),e=i.Ll,o=t.scale||1,s=t.font||a("font",i)||"";this.fillStyle=t.c||c(i,t.x,t.y);var h=1;1==t.text.length?h=1.5:2==t.text.length&&(h=1.2),this.font=Math.round(h*e*o)+"px "+s,this.beginPath(),this.textBaseline="middle",this.textAlign="center",this.fillText(t.text,n,r,2*e)}},ic:{lq:function(t,i){if(!l(i,t.x,t.y)&&!t.Eq){var n=i.mq(t.x),r=i.nq(t.y),e=i.Ll;this.clearRect(n-e,r-e,2*e,2*e)}},clear:function(t,i){l(i,t.x,t.y)||(t.Eq=!0,f(i,"grid"),delete t.Eq)}}},Fq:{Tf:{lq:function(t,i){var n=i.mq(t.x),r=i.nq(t.y),e=Math.round(i.Ll);this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||a("markupLinesWidth",i)||1,this.beginPath(),this.rect(Math.round(n-e/2)-i.oq,Math.round(r-e/2)-i.oq,e,e),this.stroke()}}},ff:{Tf:{lq:function(t,i){var n=i.mq(t.x),r=i.nq(t.y),e=i.Ll;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||a("markupLinesWidth",i)||1,this.beginPath(),this.moveTo(n-i.oq,r-i.oq-Math.round(e/2)),this.lineTo(Math.round(n-e/2)-i.oq,Math.round(r+e/3)+i.oq),this.lineTo(Math.round(n+e/2)+i.oq,Math.round(r+e/3)+i.oq),this.closePath(),this.stroke()}}},Gq:{Tf:{lq:function(t,i){var n=i.mq(t.x),r=i.nq(t.y),e=i.Ll;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineCap="round",this.lineWidth=2*(t.lineWidth||a("markupLinesWidth",i)||1)-1,this.beginPath(),this.moveTo(Math.round(n-e/2),Math.round(r-e/2)),this.lineTo(Math.round(n+e/2),Math.round(r+e/2)),this.moveTo(Math.round(n+e/2)-1,Math.round(r-e/2)),this.lineTo(Math.round(n-e/2)-1,Math.round(r+e/2)),this.stroke(),this.lineCap="butt"}}},SL:{Tf:{lq:function(t,i){var n=i.mq(t.x),r=i.nq(t.y),e=i.Ll;this.fillStyle=t.c||c(i,t.x,t.y),this.beginPath(),this.rect(n-e/2,r-e/2,e,e),this.fill()}}},Hq:{Tf:{lq:function(t,i){var n=i.mq(t.x),r=i.nq(t.y),e=i.Ll;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=2*(t.lineWidth||a("markupLinesWidth",i)||1),this.beginPath(),this.arc(n-e/3,r-e/3,e/6,0,2*Math.PI,!0),this.stroke(),this.beginPath(),this.arc(n+e/3,r-e/3,e/6,0,2*Math.PI,!0),this.stroke(),this.beginPath(),this.moveTo(n-e/1.5,r),this.bezierCurveTo(n-e/1.5,r+e/2,n+e/1.5,r+e/2,n+e/1.5,r),this.stroke()}}},outline:{Tf:{lq:function(t,i){t.alpha?this.globalAlpha=t.alpha:this.globalAlpha=.3,t.stoneStyle?s.qq[t.stoneStyle].Tf.lq.call(this,t,i):i.pq.Tf.lq.call(this,t,i),this.globalAlpha=1}}},mini:{Tf:{lq:function(t,i){i.Ll=i.Ll/2,t.stoneStyle?s.qq[t.stoneStyle].Tf.lq.call(this,t,i):i.pq.Tf.lq.call(this,t,i),i.Ll=2*i.Ll}}}},s.Nl={ic:{lq:function(t,i){var n,r,e,o,s,h;this.fillStyle=a("coordinatesColor",i),this.textBaseline="middle",this.textAlign="center",this.font=i.Ll*i.coordFontSize+"px "+(i.font||""),e=i.mq(-.75),o=i.mq(i.size-.25),s=i.nq(-.75),h=i.nq(i.size-.25);for(var u=0;u<i.size;u++)n=u+"A".charCodeAt(0),n>="I".charCodeAt(0)&&n++,r=i.nq(u),this.fillText(i.size-u,e,r),this.fillText(i.size-u,o,r),r=i.mq(u),this.fillText(String.fromCharCode(n),r,s),this.fillText(String.fromCharCode(n),r,h);this.fillStyle="black"}}},s.Iq=function(){this.Ql=document.createElement("canvas"),this.context=this.Ql.getContext("2d"),this.eq=t.devicePixelRatio||1,this.eq>1&&this.context.scale(this.eq,this.eq)},s.Iq.prototype={constructor:s.Iq,fq:function(t,i){this.Ql.width=t,this.Ql.style.width=t/this.eq+"px",this.Ql.height=i,this.Ql.style.height=i/this.eq+"px"},dp:function(t,i){this.Ql.style.position="absolute",this.Ql.style.zIndex=i,t.appendChild(this.Ql)},Jq:function(t){t.removeChild(this.Ql)},getContext:function(){return this.context},lq:function(t){},clear:function(){this.context.clearRect(0,0,this.Ql.width,this.Ql.height)}},s.Kq=o.Yp(s.Iq,function(){this.Zp.call(this)}),s.Kq.prototype.lq=function(t){var i;this.context.beginPath(),this.context.lineWidth=a("gridLinesWidth",t),this.context.strokeStyle=a("gridLinesColor",t);var n=Math.round(t.left),r=Math.round(t.top),e=Math.round(t.am*(t.size-1)),o=Math.round(t.bm*(t.size-1));this.context.strokeRect(n-t.oq,r-t.oq,e,o);for(var s=1;s<t.size-1;s++)i=Math.round(t.mq(s))-t.oq,this.context.moveTo(i,r),this.context.lineTo(i,r+o),i=Math.round(t.nq(s))-t.oq,this.context.moveTo(n,i),this.context.lineTo(n+e,i);if(this.context.stroke(),this.context.fillStyle=a("starColor",t),t.Lq[t.size])for(var h in t.Lq[t.size])this.context.beginPath(),this.context.arc(t.mq(t.Lq[t.size][h].x)-t.oq,t.nq(t.Lq[t.size][h].y)-t.oq,a("starSize",t),0,2*Math.PI,!0),this.context.fill()},s.Mq=o.Yp(s.Iq,function(){this.init(4)}),s.Mq.prototype.init=function(i){var n,r;this.Nq=i,this.elements=[],this.Oq=[],this.eq=t.devicePixelRatio||1;for(var e=0;i>e;e++)n=document.createElement("canvas"),r=n.getContext("2d"),this.eq>1&&r.scale(this.eq,this.eq),this.elements.push(n),this.Oq.push(r)},s.Mq.prototype.dp=function(t,i){for(var n=0;n<this.Nq;n++)this.elements[n].style.position="absolute",this.elements[n].style.zIndex=i,t.appendChild(this.elements[n])},s.Mq.prototype.Jq=function(t){for(var i=0;i<this.Nq;i++)t.removeChild(this.elements[i])},s.Mq.prototype.getContext=function(t){return t.x%2?t.y%2?this.Oq[0]:this.Oq[1]:t.y%2?this.Oq[2]:this.Oq[3]},s.Mq.prototype.clear=function(t,i){for(var n=0;n<this.Nq;n++)this.Oq[n].clearRect(0,0,this.elements[n].width,this.elements[n].height)},s.Mq.prototype.fq=function(t,i){for(var n=0;n<this.Nq;n++)this.elements[n].width=t,this.elements[n].style.width=t/this.eq+"px",this.elements[n].height=i,this.elements[n].style.height=i/this.eq+"px"},s.Pq=o.Yp(s.Mq,function(t,n,r){this.init(2),this.shadowSize=n===i?1:n,this.Dl=t}),s.Pq.prototype.getContext=function(t){return!(t.x%2&&t.y%2)&&(t.x%2||t.y%2)?this.Oq[1]:this.Oq[0]},s.Pq.prototype.fq=function(t,i){this.Zp.prototype.fq.call(this,t,i);for(var n=0;n<this.Nq;n++)this.Oq[n].setTransform(1,0,0,1,Math.round(this.shadowSize*this.Dl.Ll/7),Math.round(this.shadowSize*this.Dl.Ll/7))};var d=function(t,i){var n=i.mq(t.x),r=i.nq(t.y),e=i.Ll;this.clearRect(n-2*e-i.oq,r-2*e-i.oq,4*e,4*e)},v=function(){return 3*this.width/(4*(this.cq+1-this.aq)+2)-this.am*this.aq},m=function(){return 3*this.height/(4*(this.dq+1-this.bq)+2)-this.bm*this.bq},y=function(){return 4*this.width/(4*(this.cq+1-this.aq)+2)},b=function(){return 4*this.height/(4*(this.dq+1-this.bq)+2)},w=function(t,i){for(var n,r=0;r<this.Yl[t][i].length;r++){var e=this.Yl[t][i][r];n=e.type?"string"==typeof e.type?s.qq[e.type]:e.type:this.pq;for(var o in n)n[o].clear?n[o].clear.call(this[o].getContext(e),e,this):d.call(this[o].getContext(e),e,this)}},x=function(t,i){for(var n,r=0;r<this.Yl[t][i].length;r++){var e=this.Yl[t][i][r];n=e.type?"string"==typeof e.type?s.qq[e.type]:e.type:this.pq;for(var o in n)n[o].lq.call(this[o].getContext(e),e,this)}},k=function(t){var i,n;i=t.layerX*this.eq,i-=this.left,i/=this.am,i=Math.round(i),n=t.layerY*this.eq,n-=this.top,n/=this.bm,n=Math.round(n);var r=t.offsetY*this.eq;return r-=this.top,r/=this.bm,r=Math.round(r),r!==n&&console.error("Using layerY we get",n," BUT using offsetY it would be",r),{x:i>=this.size?-1:i,y:n>=this.size?-1:n}},j=function(){this.Ql.style.width=this.width/this.eq+"px",this.Ql.style.height=this.height/this.eq+"px",this.Ll=a("stoneSize",this),this.oq=a("linesShift",this);for(var t=0;t<this.Nq.length;t++)this.Nq[t].fq(this.width,this.height)};s.prototype={constructor:s,init:function(){this.Yl=[];for(var t=0;t<this.size;t++){this.Yl[t]=[];for(var i=0;i<this.size;i++)this.Yl[t][i]=[]}this.rq=[],this.Nq=[],this.Qq=[],this.Ql=document.createElement("div"),this.Ql.className="wgo-board",this.Ql.style.position="relative",this.background&&("#"==this.background[0]?this.Ql.style.backgroundColor=this.background:(this.Ql.style.backgroundImage="url('"+this.background+"')",this.Ql.style.backgroundColor="#c75")),this.ic=new s.Kq,this.zq=new s.Pq(this,a("shadowSize",this)),this.Tf=new s.Mq,this.Rq(this.ic,100),this.Rq(this.zq,200),this.Rq(this.Tf,300)},gq:function(t){this.width=t,this.width*=this.eq,this.bm=this.am=y.call(this),this.left=v.call(this),this.height=(this.dq-this.bq+1.5)*this.bm,this.top=m.call(this),j.call(this),this.Sq()},hq:function(t){this.height=t,this.height*=this.eq,this.am=this.bm=b.call(this),this.top=m.call(this),this.width=(this.cq-this.aq+1.5)*this.am,this.left=v.call(this),j.call(this),this.Sq()},fq:function(t,i){this.width=t||parseInt(this.Ql.style.width,10),this.width*=this.eq,this.height=i||parseInt(this.Ql.style.height,10),this.height*=this.eq,this.am=y.call(this),this.bm=b.call(this),this.left=v.call(this),this.top=m.call(this),j.call(this),this.Sq()},Tq:function(){return this.section},Uq:function(t,i,n,r){"object"==typeof t?this.section=t:this.section={top:t,right:i,bottom:n,left:r},this.aq=this.section.left,this.bq=this.section.top,this.cq=this.size-1-this.section.right,this.dq=this.size-1-this.section.bottom,this.fq()},Vq:function(t){var t=t||19;if(t!=this.size){this.size=t,this.Yl=[];for(var i=0;i<this.size;i++){this.Yl[i]=[];for(var n=0;n<this.size;n++)this.Yl[i][n]=[]}this.cq=this.size-1-this.section.right,this.dq=this.size-1-this.section.bottom,this.fq()}},Sq:function(){for(var t=0;t<this.Nq.length;t++)this.Nq[t].clear(this),this.Nq[t].lq(this);for(var t=0;t<this.size;t++)for(var i=0;i<this.size;i++)x.call(this,t,i);for(var t=0;t<this.rq.length;t++){var n=this.rq[t],r=n.Bn;for(var e in r)r[e].lq.call(this[e].getContext(n.sq),n.sq,this)}},mq:function(t){return this.left+t*this.am},nq:function(t){return this.top+t*this.bm},Rq:function(t,i){t.dp(this.Ql,i),t.fq(this.width,this.height),this.Nq.push(t)},Wq:function(t){var i=this.Nq.indexOf(t);i>=0&&(this.Nq.splice(i,1),t.Jq(this.Ql))},update:function(t){var i;if(t.remove&&"all"==t.remove)this.Xq();else if(t.remove)for(i=0;i<t.remove.length;i++)this.Xl(t.remove[i]);if(t.add)for(i=0;i<t.add.length;i++)this.Zl(t.add[i])},Zl:function(t){if(t.constructor!=Array){w.call(this,t.x,t.y);for(var i=this.Yl[t.x][t.y],n=0;n<i.length;n++)if(i[n].type==t.type)return i[n]=t,void x.call(this,t.x,t.y);t.type?i.push(t):i.unshift(t),x.call(this,t.x,t.y)}else for(var r=0;r<t.length;r++)this.Zl(t[r])},Xl:function(t){if(t.constructor!=Array){for(var n,r=0;r<this.Yl[t.x][t.y].length;r++)if(this.Yl[t.x][t.y][r].type==t.type){n=r;break}n!==i&&(w.call(this,t.x,t.y),this.Yl[t.x][t.y].splice(n,1),
x.call(this,t.x,t.y))}else for(var e=0;e<t.length;e++)this.Xl(t[e])},cm:function(t,i){this.Yl[t][i].length&&(w.call(this,t,i),this.Yl[t][i]=[])},Xq:function(){this.Yl=[];for(var t=0;t<this.size;t++){this.Yl[t]=[];for(var i=0;i<this.size;i++)this.Yl[t][i]=[]}this.Sq()},Ml:function(t,i){this.rq.push({Bn:t,sq:i}),this.Sq()},Yq:function(t,i){for(var n=0;n<this.rq.length;n++){var r=this.rq[n];if(r.Bn==t&&r.sq==i)return this.rq.splice(n,1),this.Sq(),!0}return!1},addEventListener:function(t,i){var n=this,r={type:t,Zq:i,$q:function(t){var r=k.call(n,t);i(r.x,r.y,t)}};this.Ql.addEventListener(t,r,!0),this.Qq.push(r)},removeEventListener:function(t,i){for(var n=0;n<this.Qq.length;n++){var r=this.Qq[n];if(r.type==t&&r.Zq==i)return this.Ql.removeEventListener(r.type,r,!0),this.Qq.splice(n,1),!0}return!1},_q:function(){return{ar:o.clone(this.Yl),br:o.clone(this.rq)}},cr:function(t){this.Yl=t.ar||this.Yl,this.rq=t.br||this.rq,this.Sq()}},s["default"]={size:19,width:0,height:0,font:"Calibri",lineWidth:1,jq:!1,Lq:{19:[{x:3,y:3},{x:9,y:3},{x:15,y:3},{x:3,y:9},{x:9,y:9},{x:15,y:9},{x:3,y:15},{x:9,y:15},{x:15,y:15}],13:[{x:3,y:3},{x:9,y:3},{x:3,y:9},{x:9,y:9}],9:[{x:4,y:4}]},pq:s.qq.Cq,starSize:1,shadowSize:1,stoneSize:1,section:{top:0,right:0,bottom:0,left:0},background:o.Rp+"wood1.jpg",$o:{}},o.Il=s,t.WGo=o}(window)},{}],73:[function(t,i,n){i.g=function(t,i){var n=i||document;if(n.createStyleSheet){var r=n.createStyleSheet();return r.cssText=t,r.ownerNode}var e=n.getElementsByTagName("head")[0],o=n.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(n.createTextNode(t)),e.appendChild(o),o},i.g.dr=function(t){if(document.createStyleSheet)return document.createStyleSheet(t).ownerNode;var i=document.getElementsByTagName("head")[0],n=document.createElement("link");return n.rel="stylesheet",n.href=t,i.appendChild(n),n}},{}],74:[function(t,i,n){i.g=t("cssify")},{cssify:73}],75:[function(t,i,n){i.g={name:"1g0",version:"0.3.0",description:"",er:"Olivier Lombart (kubicle)",gr:"TBD",scripts:{hr:"browserify js/ui/htmlApp.js -t lessify | uglifyjs -o build/bld.js -m --mangle-props --reserved-file build/reserved.json --reserve-domprops --mangle-regex=\"/^[a-zA-Z0-9_]+$/\" -c pure_funcs=['log.debug','test.assert']","dev-build":"watchify js/test/testApp.js -o build/devBuild.js -t lessify -v",test:"node js/test/ciTestApp.js --ci",ir:"node node_modules/istanbul/lib/cli.js cover js/test/ciTestApp.js -x **/frankie/** -x **/droopy/** -- --cover"},jr:"js/ui/htmlApp.js",kr:{type:"git",url:"https://github.com/kubicle/1g0"},lr:{url:"https://github.com/kubicle/1g0/issues"},mr:["baduk","go","igo","weiqi"],nr:{or:"~0.3.22","codeclimate-test-reporter":"~0.1.1",pr:"~10.2.4",lessify:"~1.0.1",qr:"~3.2.2","uglify-js":"~2.6.2"}}},{}]},{},[55]);