!function t(i,n,e){function r(s,h){if(!n[s]){if(!i[s]){var u="function"==typeof require&&require;if(!h&&u)return u(s,!0);if(o)return o(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[s]={exports:{}};i[s][0].call(p.exports,function(t){var n=i[s][1][t];return r(n||t)},p,p.exports,t,i,n,e)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<e.length;s++)r(e[s]);return r}({1:[function(t,i,n){"function"==typeof Object.create?i.exports=function(t,i){t.g=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,h:!1,i:!0,j:!0}})}:i.exports=function(t,i){t.g=i;var n=function(){};n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],2:[function(t,i,n){function e(){p=!1,h.length?a=h.concat(a):c=-1,a.length&&r()}function r(){if(!p){var t=setTimeout(e);p=!0;for(var i=a.length;i;){for(h=a,a=[];++c<i;)h[c].k();c=-1,i=a.length}h=null,p=!1,clearTimeout(t)}}function o(t,i){this.m=t,this.o=i}function s(){}var h,u=i.exports={},a=[],p=!1,c=-1;u.l=function(t){var i=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)i[n-1]=arguments[n];a.push(new o(t,i)),1!==a.length||p||setTimeout(r,0)},o.prototype.k=function(){this.m.apply(null,this.o)},u.title="browser",u.p=!0,u.q={},u.s=[],u.version="",u.t={},u.u=s,u.addListener=s,u.v=s,u.A=s,u.removeListener=s,u.C=s,u.D=s,u.F=function(t){throw new Error("process.binding is not supported")},u.G=function(){return"/"},u.H=function(t){throw new Error("process.chdir is not supported")},u.I=function(){return 0}},{}],3:[function(t,i,n){i.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.J&&"function"==typeof t.fill&&"function"==typeof t.K}},{}],4:[function(t,i,n){(function(i,e){function r(t,i){var e={T:[],U:s};return arguments.length>=3&&(e.V=arguments[2]),arguments.length>=4&&(e.X=arguments[3]),g(i)?e.Y=i:i&&n.Z(e,i),x(e.Y)&&(e.Y=!1),x(e.V)&&(e.V=2),x(e.X)&&(e.X=!1),x(e.$)&&(e.$=!0),e.X&&(e.U=o),u(e,t,e.V)}function o(t,i){var n=r.aa[i];return n?"["+r.X[n][0]+"m"+t+"["+r.X[n][1]+"m":t}function s(t,i){return t}function h(t){var i={};return t.forEach(function(t,n){i[t]=!0}),i}function u(t,i,e){if(t.$&&i&&S(i._)&&i._!==n._&&(!i.constructor||i.constructor.prototype!==i)){var r=i._(e,t);return b(r)||(r=u(t,r,e)),r}var o=a(t,i);if(o)return o;var s=Object.keys(i),g=h(s);if(t.Y&&(s=Object.getOwnPropertyNames(i)),C(i)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(i);if(0===s.length){if(S(i)){var v=i.name?": "+i.name:"";return t.U("[Function"+v+"]","special")}if(k(i))return t.U(RegExp.prototype.toString.call(i),"regexp");if(z(i))return t.U(Date.prototype.toString.call(i),"date");if(C(i))return p(i)}var y="",m=!1,w=["{","}"];if(d(i)&&(m=!0,w=["[","]"]),S(i)){y=" [Function"+(i.name?": "+i.name:"")+"]"}if(k(i)&&(y=" "+RegExp.prototype.toString.call(i)),z(i)&&(y=" "+Date.prototype.toUTCString.call(i)),C(i)&&(y=" "+p(i)),0===s.length&&(!m||0==i.length))return w[0]+y+w[1];if(e<0)return k(i)?t.U(RegExp.prototype.toString.call(i),"regexp"):t.U("[Object]","special");t.T.push(i);var x;return x=m?c(t,i,e,g,s):s.map(function(n){return l(t,i,e,g,n,m)}),t.T.pop(),f(x,y,w)}function a(t,i){if(x(i))return t.U("undefined","undefined");if(b(i)){var n="'"+JSON.stringify(i).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.U(n,"string")}return m(i)?t.U(""+i,"number"):g(i)?t.U(""+i,"boolean"):v(i)?t.U("null","null"):void 0}function p(t){return"["+Error.prototype.toString.call(t)+"]"}function c(t,i,n,e,r){for(var o=[],s=0,h=i.length;s<h;++s)G(i,String(s))?o.push(l(t,i,n,e,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(l(t,i,n,e,r,!0))}),o}function l(t,i,n,e,r,o){var s,h,a;if(a=Object.getOwnPropertyDescriptor(i,r)||{value:i[r]},a.get?h=a.set?t.U("[Getter/Setter]","special"):t.U("[Getter]","special"):a.set&&(h=t.U("[Setter]","special")),G(e,r)||(s="["+r+"]"),h||(t.T.indexOf(a.value)<0?(h=v(n)?u(t,a.value,null):u(t,a.value,n-1),h.indexOf("\n")>-1&&(h=o?h.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+h.split("\n").map(function(t){return"   "+t}).join("\n"))):h=t.U("[Circular]","special")),x(s)){if(o&&r.match(/^\d+$/))return h;s=JSON.stringify(""+r),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.U(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.U(s,"string"))}return s+": "+h}function f(t,i,n){var e=0;return t.reduce(function(t,i){return e++,i.indexOf("\n")>=0&&e++,t+i.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===i?"":i+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+i+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function v(t){return null===t}function y(t){return null==t}function m(t){return"number"==typeof t}function b(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function x(t){return void 0===t}function k(t){return j(t)&&"[object RegExp]"===q(t)}function j(t){return"object"==typeof t&&null!==t}function z(t){return j(t)&&"[object Date]"===q(t)}function C(t){return j(t)&&("[object Error]"===q(t)||t instanceof Error)}function S(t){return"function"==typeof t}function B(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function q(t){return Object.prototype.toString.call(t)}function M(t){return t<10?"0"+t.toString(10):t.toString(10)}function D(){var t=new Date,i=[M(t.getHours()),M(t.getMinutes()),M(t.getSeconds())].join(":");return[t.getDate(),T[t.getMonth()],i].join(" ")}function G(t,i){return Object.prototype.hasOwnProperty.call(t,i)}n.format=function(t){if(!b(t)){for(var i=[],n=0;n<arguments.length;n++)i.push(r(arguments[n]));return i.join(" ")}for(var n=1,e=arguments,o=e.length,s=String(t).replace(/%[sdj%]/g,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(e[n++]);case"%d":return Number(e[n++]);case"%j":try{return JSON.stringify(e[n++])}catch(t){return"[Circular]"}default:return t}}),h=e[n];n<o;h=e[++n])v(h)||!j(h)?s+=" "+h:s+=" "+r(h);return s},n.L=function(t,r){function o(){if(!s){if(i.N)throw new Error(r);i.O?console.trace(r):console.error(r),s=!0}return t.apply(this,arguments)}if(x(e.process))return function(){return n.L(t,r).apply(this,arguments)};if(i.M===!0)return t;var s=!1;return o};var A,E={};n.P=function(t){if(x(A)&&(A=i.q.R||""),t=t.toUpperCase(),!E[t])if(new RegExp("\\b"+t+"\\b","i").test(A)){var e=i.S;E[t]=function(){var i=n.format.apply(n,arguments);console.error("%s %d: %s",t,e,i)}}else E[t]=function(){};return E[t]},n._=r,r.X={"bold":[1,22],"italic":[3,23],"underline":[4,24],"inverse":[7,27],"white":[37,39],"grey":[90,39],"black":[30,39],"blue":[34,39],"cyan":[36,39],"green":[32,39],"magenta":[35,39],"red":[31,39],"yellow":[33,39]},r.aa={"special":"cyan","number":"yellow","boolean":"yellow","undefined":"grey","null":"bold","string":"green","date":"magenta","regexp":"red"},n.isArray=d,n.ba=g,n.ca=v,n.da=y,n.ea=m,n.fa=b,n.ga=w,n.ha=x,n.ia=k,n.ja=j,n.ka=z,n.la=C,n.ma=S,n.na=B,n.isBuffer=t("./support/isBuffer");var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",D(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n.Z=function(t,i){if(!i||!j(i))return t;for(var n=Object.keys(i),e=n.length;e--;)t[n[e]]=i[n[e]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":3,"_process":2,"inherits":1}],5:[function(t,i,n){i.exports={"#noInternet":"Error: no internet connection","#httpReqError":"Http error %1 while requesting %2","#appTitle":"1g0: let's play go!","#cancelAction":"Cancel","#confirmTitle":"Confirm","#problem":"Problem","#helpTip":"Help tip","#ok":"OK","#yes":"YES","#no":"NO","#cancel":"Cancel","#close":"Close","#none":"-","#play":"Play","#load":"Load","#newGame":"New game","#myGames":"My games","#importGame":"Import games","#exportGame":"Export game","#downloadLatest":"Update from %1","#fromFile":"From file:","#selectFile":"Select file","#recentGames":"Recent games:","#fromText":"From copy/paste:","#fromTextHelp":"Paste game in SGF format, e.g. (;FF[4]...)","#invalidSgf":'Invalid SGF game\n(game starts with "%1...")',"#mergeDivergence":"Merge error: games diverge at move #%1","#archivedGames":"Archived games","#deleteGame":"Delete","#deleteGameConfirm":"Do you really want to delete this game?","#archiveGame":"Archive","#archiveGameConfirm":"Do you want to archive this game? (you can restore it later)","#showArchivedGames":"Archived games","#restoreGame":"Restore","#empty":"(empty)","#myGamesHelp":"Any game you create or load/edit will be added to this list","#confirmSave":"Do you want to save this game, so you can continue it or study it later?","#settings":"Settings","#colorTheme":"Color theme","#setupDropbox":"Setup Dropbox","#devMenu":"Dev Menu","#resetAll":"Reset all","#resetAllConfirm":"All your unsynced game studies will be lost, are you sure?","#review":"Study","#endStudy":"End study","#evalScore":"Evaluate score","#bookmark":"Bookmark on/off","#rewindAll":"Go to game start","#gotoLastMove":"Go to game last move","#prune":"Delete this variation","#pruneConfirm":"Delete variation %1?\n(%3 moves starting by %2)","#resign":"Resign","#pass":"Pass","#undo":"Undo","#next":"Next","#nextN":"Next %1","#finish":"Finish","#accept":"Accept","#refuse":"Refuse","#slowAutomatic":"Slower","#gameStarted":"Game started...","#resignConfirm":"Do you really want to resign?","#cycleBookmarks":"Use this button to cycle through bookmarks. First, move to another position and set another bookmark.","#add":"Add","#remove":"Remove","#getLatestGame":"Get latest game moves","#retrieving":"Retrieving game %2 from %1...","#retrieved":"Game updated.","#syncGame":"Sync this game","#syncMyGames":"Sync my games","#syncStart":"Connecting...","#noCloud":"Not connected to cloud","#archivedGame":"[archived %1]","#remote":"[remote %1]","#uploaded":"Uploaded: ","#downloaded":"Downloaded: ","#alreadySync":"Already in sync: ","#synced":"Synced: ","#deleted":"Deleted: ","#archived":"Archived: ","#unarchived":"Unarchived: ","#undeleted":"Undeleted: ","#syncDone":"Sync completed."}},{}],6:[function(t,i,n){i.exports={"preload":{"5x5.png":"1","7x7.png":"1","9x9.png":"1","13x13.png":"1","19x19.png":"1","cloudSync.png":"1","cycle.png":"1","down.png":"1","empty.png":"1","human.png":"1","import.png":"1","lastReal.png":"1","menuBtn.png":"1","myGames.png":"1","prune.png":"1","refresh.png":"1","robot.png":"1","scoring.png":"1","settings.png":"1","trash.png":"1","up.png":"1","wood.jpg":"1"},"onDemand":{"i18n_en.json":"0.1"}}},{}],7:[function(t,i,n){i.exports={".cafeAuLait":{".menuBtn":{"backgroundColor":"#704f43"},".topMenu":{"backgroundColor":"#5c4137"},".btnInfo":{"color":"#483710"},".btn+disabled":{"opacity":.4}},".neonBlack":{"body":{"backgroundColor":"#000"},".btn":{"backgroundColor":"#02192b","color":"#daebef","borderColor":"#5d80c6"},".btn+toggled":{"backgroundColor":"#380966","color":"#cad904"},".btn+disabled":{"opacity":.6},".menuBtn":{"backgroundColor":"#0e4571"},".topMenu":{"backgroundColor":"#0b3557"},".statusBar":{"backgroundColor":"#c7cced","border":"#07b2ff 1px solid","boxShadow":"3px 3px 20px #537cc6"},".board":{"backgroundColor":"#002"},".mainControls":{"color":"#daebef"},".dialog":{"backgroundColor":"#0d0217","color":"#daebef","boxShadow":"#3fb 3px 3px 20px","border":"solid #b395d7 1px"},".dialogTitle":{"backgroundColor":"#0b3557","color":"#fffaff","textShadow":"#06b1ff 4px 4px 7px","borderColor":"#fff","boxShadow":"#00abff 3px 3px 20px"},".playerBtn":{"backgroundColor":"#5283ff"},".sizeBtn":{"backgroundColor":"#5283ff"},".boardImgFrame":{"backgroundColor":"#09132a","boxShadow":"#3fb 3px 3px 20px"},".curSize":{"textShadow":"#0a9da9 3px 3px 5px"},".gameList":{"border":"1px solid #8ea3da","backgroundColor":"#000"},".oneGame+selected":{"backgroundColor":"#2a4990"},".dropDwn":{"backgroundColor":"#000"},".inputBox":{"backgroundColor":"#000"},".devDiv":{"backgroundColor":"#5a3571","color":"#38cead","border":"1px solid #400ac1"},".devLogBox":{"color":"#000"}},".bottleGreen":{"body":{"backgroundColor":"#000"},".btn":{"backgroundColor":"#022b10","color":"#fff","borderColor":"#5dc677"},".btn+toggled":{"backgroundColor":"#380966","color":"#cad904"},".btn+disabled":{"opacity":.6},".menuBtn":{"backgroundColor":"#146c43"},".topMenu":{"backgroundColor":"#0b573e"},".statusBar":{"backgroundColor":"#8ca197","border":"#2d8722 1px solid","boxShadow":"3px 3px 20px #537cc6"},".board":{"backgroundColor":"#002600"},".mainControls":{"color":"#eee"},".dialog":{"backgroundColor":"#071903","color":"#eee","boxShadow":"#3ff 2px 2px 15px","border":"solid #000 1px"},".dialogTitle":{"backgroundColor":"#0b573e","color":"#fffaff","textShadow":"#06b1ff 4px 4px 7px","borderColor":"#fff","boxShadow":"#00abff 3px 3px 20px"},".playerBtn":{"backgroundColor":"#107733"},".sizeBtn":{"backgroundColor":"#107733"},".boardImgFrame":{"backgroundColor":"#0c2529","boxShadow":"#3ff 2px 2px 15px"},".curSize":{"textShadow":"#0a9da9 3px 3px 5px"},".gameList":{"border":"1px solid #8ea3da","backgroundColor":"#000"},".oneGame+selected":{"backgroundColor":"#2a4990"},".dropDwn":{"backgroundColor":"#000"},".inputBox":{"backgroundColor":"#000"},".devDiv":{"backgroundColor":"#5a3571","color":"#38cead","border":"1px solid #400ac1"},".devLogBox":{"color":"#000"}}}},{}],8:[function(t,i,n){i.exports={"confirm-delete-moves":3}},{}],9:[function(t,i,n){i.exports={"server-url":"https://ig0.herokuapp.com/","dropbox-clientId":"gdap2n66j8rl89n"}},{}],10:[function(t,i,n){i.exports={".cgos":{"useAreaScoring":!0,"usePositionalSuperko":!0},".chinese":{"useAreaScoring":!0,"usePositionalSuperko":!0},".japanese":{}}},{}],11:[function(t,i,n){i.exports={"preload":{"scorer.js":"!0.1"},"onDemand":{}}},{}],12:[function(t,i,n){"use strict";function e(t){this.oa=t,this.pa=null,this.qa=null,this.ra=null,this.sa=null,this.ta=null,this.ua={},this.va=null,this.wa=0}function r(t,i){return 0===i?"":", "+i+" "+t}function o(t){return t||0===t?" "+t:""}function s(t){var i=t.eb(),n=parseInt(i);return isNaN(n)?n=19:i=i.substr(i.indexOf(" ")+1),String.fromCharCode(90-n)+"|"+i}function h(t,i){return s(t).localeCompare(s(i))}var u=t("./GameInfo"),a=t("./hh/getText"),p=t("./net/goSites"),c=t("./ReviewTree"),l=t("./SgfReader"),f=t("./SgfWriter");i.exports=e;e.prototype.xa=function(){var t={};return t["sgf"]=this.ya(),t["tagMap"]=this.ua,t["serverStamp"]=this.va,t["lastChange"]=this.wa,t},e.prototype.za=function(t){if(this.oa)throw new Error("Game already initialized");return"string"==typeof t&&"("===t[0]?(this.oa=t,!0):!!t["sgf"]&&(this.oa=t["sgf"],this.ua=t["tagMap"]||{},this.va=t["serverStamp"]||null,this.wa=t["lastChange"]||0,!0)},e.prototype.Aa=function(t,i,n,e){this.qa=new c(e),this.sa=e||[],this.ra=new u,this.ra.Aa(),this.ra.Ba(t,i,n,this.sa.length)},e.prototype.Ca=function(t,i,n){if(!l.Da(t))return i.push(a("#invalidSgf",t.substr(0,15))),!1;if(this.oa)throw new Error("Game already initialized");return this.oa=t,this.Ea(i,n)},e.prototype.Ea=function(t,i){var n=new l;return!!n.Fa(this.oa,t,i)&&(this.ra=new u,this.ra.Ga(n.Ha),this.qa=n.Ia(),this.sa=n.Ja()||[],this.ta=n.Ka(),!0)},e.prototype.La=function(t,i){var n=this.Ia(),e=t.Ia(),r=n.La(e);return r!==-1?(i.push(a("#mergeDivergence",r+1)),!1):(this.ta=n.Ma(),this.oa=null,!0)},e.prototype.Na=function(t){if(!this.ta||this.ta.join()!==t.join()){var i=this.Ia();this.ta=t.concat(),i.Na(t)}},e.prototype.Oa=function(){return this.ra||this.Ea(),this.ra},e.prototype.Ia=function(){return this.qa||this.Ea(),this.qa},e.prototype.Ja=function(){return this.sa||this.Ea(),this.sa},e.prototype.Ka=function(){return this.ta||(this.ta=this.Ia().Ma()),this.ta},e.prototype.ya=function(){return this.oa||this.Pa(),this.oa},e.prototype.Pa=function(){var t=new f,i=t.Qa(this.ra,this.qa);this.Ra(i)},e.prototype.Ra=function(t){return t!==this.oa&&(this.oa=t,this.ua={},this.va=null,this.wa=Date.now(),!0)},e.prototype.Sa=function(t,i){var n=this.ua[t];if(n)return n;var e=i,r=this.oa.indexOf(t+"[");if(r>=0){var o=this.oa.substring(r+t.length+1,this.oa.indexOf("]",r));switch(typeof i){case"number":e=parseFloat(o);break;default:e=o}}return void 0!==e&&(this.ua[t]=e),e},e.prototype.Ta=function(t){var i=this.Sa(t,"?");return i.length<=10?i:i.substr(0,9).trim()+"."},e.prototype.Ua=function(){var t=this.ua["movCount"];return void 0!==t?t:(t=this.Ka().length,this.ua["movCount"]=t,t)},e.prototype.Va=function(){var t=this.ua["varCount"];if(void 0!==t)return t;var i=this.Ia(),n=i.Wa();for(i.Xa(),t=0;;){var e=i.Ya();if(!i.Za())break;t+=e?e.length-1:0}return t+=e?e.length:i.$a()?1:0,i._a(n),this.ua["varCount"]=t,t},e.prototype.ab=function(t,i){this.va=t,this.wa=i},e.prototype.bb=function(){return this.va},e.prototype.cb=function(){return this.wa},e.prototype.eb=function(){this.oa||this.Pa();var t="",i=this.Sa("SZ",19);return 19!==i&&(t+=i+"x"+i+" "),t+=this.Ta("PW")+"/"+this.Ta("PB"),t+=r("mov.",this.Ua()),t+=r("var.",this.Va())},e.prototype.fb=function(){if(this.pa)return this.pa;this.oa||this.Pa();var t="",i=this.Sa("SZ",19);return 19!==i&&(t+=i+"x"+i+" "),t+=this.Ta("PW")+"-VS-"+this.Ta("PB"),t+=o(this.Sa("DT")),t+=o(this.gb("PC")),t+=o(this.gb("SO")),t+=o(this.gb("EV")),t=t.replace(/[\\\/]/g,"-"),this.pa=t,t},e.prototype.gb=function(t){var i=this.Sa(t);return i?p.hb(t,i):i},e.ib=h},{"./GameInfo":13,"./ReviewTree":25,"./SgfReader":27,"./SgfWriter":28,"./hh/getText":72,"./net/goSites":85}],13:[function(t,i,n){"use strict";function e(){this.jb()}i.exports=e,e.prototype.jb=function(){this.kb={}},e.prototype.Aa=function(){this.jb(),this.lb("date",(new Date).toISOString().substr(0,10))},e.prototype.Ga=function(t){this.jb();for(var i in t)this.kb[i]=t[i]},e.prototype.mb=function(t){return this.kb[t]},e.prototype.lb=function(t,i){this.kb[t]=i},e.prototype.nb=function(){return this.kb},e.prototype.Ba=function(t,i,n,e){this.lb("boardSize",t),this.lb("komi",i),this.lb("rules",n),e&&this.lb("handicap",e)},e.prototype.ob=function(t,i,n){var e=t?"W":"B",r=i||n||"Resign";this.lb("result",e+"+"+r)},e.prototype.pb=function(){return this.mb("result")}},{}],14:[function(t,i,n){"use strict";function e(){this.yb(y),this.zb=null,this.Ab()}var r=t("./constants"),o=t("./Goban"),s=t("./HandicapSetter"),h=t("./log"),u=t("./Move"),a=t("../config/rules.json"),p=u.qb,c=u.rb,l=u.sb,f=u.tb,d=u.ub,g=r.vb,v=r.wb,y=r.xb;i.exports=e,e.prototype.Ab=function(){this.history=[],this.Bb=[],this.Cb=null,this.Db=0,this.Eb=this.Fb=g,this.Gb=this.Hb=!1,this.Ib=this.Jb=null},e.prototype.Kb=function(t){this.yb(t.Lb,!0),this.Mb(t.zb.Nb,t.Cb,t.Db),this.Ob(t.Fb),this.Pb(t.history)},e.prototype.Qb=function(){this.zb.clear(),this.history=[],this.Eb=this.Fb,this.Gb=this.Hb=!1,this.Rb()},e.prototype.yb=function(t,i){this.Lb=t,t=t||"unspecified";var n=a["."+t.toLowerCase()];if(!n){if(!i)throw new Error("Invalid rules: "+t+"\nValid values: "+Object.keys(a).map(function(t){return t.substr(1)}).join(", "));n=a["."+y.toLowerCase()]}this.usePositionalSuperko=n.usePositionalSuperko||!1,this.useAreaScoring=n.useAreaScoring||!1},e.prototype.Sb=function(){return this.Lb},e.prototype.Mb=function(t,i,n){if(this.Ab(),this.zb&&t===this.zb.Nb)this.zb.clear();else if(this.zb=new o(t),this.zb.Nb!==t)return this.Tb("Size could not be set: "+t);return this.zb.Ub(this.usePositionalSuperko),this.Db=void 0!==n?n:.5,i=i||0,!!this.Vb(i)},e.prototype.Wb=function(t){this.Db=t},e.prototype.Ob=function(t){this.Eb=this.Fb=t},e.prototype.Vb=function(t){if(this.history.length>0)throw new Error("Handicap cannot be changed during a game");if(0===t||"0"===t)return this.Cb=null,this.Ob(g),!0;var i,n,e;if(""+~~t==""+t)for(e=~~t,i=s.Xb(this.zb.Nb,e),this.Cb=[],n=0;n<i.length;n++)this.Cb.push(d(i[n][0],i[n][1]));else e=t.length,this.Cb=t;return this.Cb.length||(this.Cb=null),this.Rb(),this.Ob(this.Cb?v:g),!(e&&(!this.Cb||this.Cb.length!==e))||this.Tb("Handicap could not be set: "+t)},e.prototype.Rb=function(){var t=this.Cb;if(t)for(var i=0;i<t.length;i++){var n=f(t[i]);this.zb.Yb(n[0],n[1],n[2]||g)}},e.prototype.Zb=function(){return this.Cb},e.prototype.$b=function(){return this.Cb?this.Cb.length:0},e.prototype._b=function(t,i){if(h.error&&h.error(t),!i)throw new Error(t);return i.push(t),!1},e.prototype.Pb=function(t,i){if(!t||!t.length)return!0;for(var n=0;n<t.length;n++)if(!this.ac(t[n]))return this._b("Failed playing loaded move #"+(n+1)+":\n"+this.bc().join(", "),i);return!0},e.prototype.cc=function(t,i){return!t||this.Pb(t.split(","),i)},e.prototype.ac=function(t){if(this.Hb&&t.indexOf("undo")<0)return this.Tb("Game already ended");if(/^[B|W]?-?[a-z][1-2]?[0-9]$/.test(t))return this.dc(t);var i=l(t);if(i.startsWith("pass"))return this.ec();if(i.startsWith("resi"))return this.fc(c(t));if("undo"===i)return this.gc();if("half_undo"===i)return this.gc(!0);if(i.startsWith("hand")){var n=i.substr(i.indexOf(":")+1);return this.Vb(n.split("-"))}return i.startsWith("load:")?this.cc(i.slice(5)):this.Tb("Invalid command: "+i.substr(0,20))},e.prototype.dc=function(t){var i=f(t);3===i.length&&(this.Eb=i[2]);var n=i[0],e=i[1];return this.zb.hc(n,e,this.Eb)?(this.zb.Yb(n,e,this.Eb),this.ic(t),this.jc(),!0):this.Tb("Invalid move: "+t)},e.prototype.fc=function(t,i){t=void 0!==t?t:this.Eb,this.Ib=t,this.Jb=i;var n=p("resign",t)+(i?"-"+i:"");return this.ic(n),this.jc(),this.Hb=!0,this.Gb=!1,!0},e.prototype.ec=function(){var t=this.history[this.history.length-1];return t&&t.endsWith("pass")&&(this.Gb=!0),this.ic(p("pass",this.Eb)),this.jc(),!0},e.prototype.kc=function(){if(!this.Gb)return this.Tb("Game is not ending yet");this.Gb=!1,this.Hb=!0},e.prototype.lc=function(){for(this.Gb=!1;this.history[this.history.length-1].endsWith("pass");)this.history.pop(),this.jc()},e.prototype.mc=function(){return this.history.length},e.prototype.nc=function(){return this.history},e.prototype.oc=function(){var t="";this.Cb&&(t="handicap:"+this.Cb.join("-")+",");var i=this.history;return i[0]=p(l(i[0]),this.Fb),t+i.join(",")},e.prototype.Tb=function(t){return this.Bb.push(t),!1},e.prototype.bc=function(){var t=this.Bb;return this.Bb=[],t},e.prototype.jc=function(){this.Eb=1-this.Eb},e.prototype.ic=function(t){return this.history.push(t)},e.prototype.gc=function(t){var i=t?1:2;if(this.history.length<i)return this.Tb("Nothing to undo");this.Hb=this.Gb=!1;for(var n=i;n>=1;n--){var e=this.history.pop();!e.endsWith("pass")&&e.indexOf("resi")<0&&this.zb.pc()}return t&&this.jc(),!0}},{"../config/rules.json":10,"./Goban":18,"./HandicapSetter":21,"./Move":23,"./constants":53,"./log":81}],15:[function(t,i,n){"use strict";function e(t){this.qc=t,this.rc=null,this.sc()}var r=t("./GameInVault"),o=t("./GameVaultList"),s=t("./MostRecentlyUsedList");i.exports=e,e.prototype.sc=function(){this.tc=new o(this.qc,"myActiveGames"),this.uc=new o(this.qc,"archivedGames"),this.vc=new o(this.qc,"recentGames"),this.wc=new s(this.qc,"mostRecentGames",5),this.tc.xc("myGames")},e.prototype.yc=function(t){return this.rc&&this.zc(),this.rc=t,this.rc},e.prototype.Ac=function(){return this.rc},e.prototype.zc=function(){var t=this.rc;return t&&(this.rc=null,this.tc.Bc(t),this.Cc(t)),t},e.prototype.Dc=function(t){var i=this.wc.getItem(t);return this.vc.Ec(i)||null},e.prototype.Fc=function(t){this.tc.Bc(t)},e.prototype.Gc=function(t){return this.tc.Ec(t)||null},e.prototype.Hc=function(){return this.tc.Ic()};e.Jc={Kc:0,ACTIVE:1,Lc:2,Mc:-1},e.prototype.Nc=function(t){return this.tc.Ec(t)?1:this.uc.Ec(t)?2:this.Oc(t)?-1:0},e.prototype.Pc=function(t){return this.uc.Ec(t)},e.prototype.Qc=function(){return this.uc.Ic()},e.prototype.Rc=function(t){return this.tc.Sc(t)},e.prototype.Tc=function(t){return this.uc.Sc(t)},e.prototype.Oc=function(t){return this.tc.Oc(t)||this.uc.Oc(t)},e.prototype.Uc=function(t){return this.tc.Vc(this.uc,t)},e.prototype.Wc=function(t){return this.uc.Vc(this.tc,t)},e.prototype.Xc=function(t){this.uc.Bc(t)},e.prototype.Yc=function(t,i){var n=new r;if(!n.Ca(t,i))return null;var e=this.tc.Ec(n.fb());return e?e.La(n,i)?e:null:n},e.prototype.Zc=function(t){this.qc.$c("interruptedGame",t.xa())},e.prototype._c=function(){var t=this.qc.ad("interruptedGame");if(!t)return null;var i=new r;return i.za(t)?(this.qc.$c("interruptedGame",null),i):(console.error("Invalid serialized game"),null)},e.prototype.bd=function(){for(var t=this.wc.dd(),i=[],n=0;n<t.length;n++){var e=this.vc.Ec(t[n]);e&&i.push(e.eb())}return i},e.prototype.Cc=function(t){this.vc.Bc(t);var i=t.fb();this.wc.ed(i)&&this.vc.Sc(i)}},{"./GameInVault":12,"./GameVaultList":16,"./MostRecentlyUsedList":22}],16:[function(t,i,n){"use strict";function e(t,i){this.qc=t,this.fd=i,this.gd={},this.hd=null,this.jd={},this.kd()}var r=t("./GameInVault");i.exports=e;e.prototype.kd=function(){this.hd=this.qc.ad(this.fd,{}),this.jd=this.qc.ad(this.fd+"~",{});for(var t in this.hd){var i=new r;i.za(this.hd[t]),this.gd[t]=i}},e.prototype.xc=function(t){for(var i=this.qc.ad(t,[]),n=0;n<i.length;n++){var e=new r(i[n]),o=e.fb();this.gd[o]=e,this.hd[o]=e.xa()}this.qc.$c(this.fd,this.hd),this.qc.$c(t,void 0)},e.prototype.Bc=function(t){var i=t.fb();this.gd[i]=t,this.hd[i]=t.xa(),this.qc.$c(this.fd,this.hd),this.jd[i]&&(delete this.jd[i],this.qc.$c(this.fd+"~",this.jd))},e.prototype.ld=function(t){return!!this.gd[t]&&(delete this.gd[t],delete this.hd[t],this.qc.$c(this.fd,this.hd),!0)},e.prototype.Sc=function(t){return!!this.ld(t)&&(this.jd[t]=Date.now(),this.qc.$c(this.fd+"~",this.jd),!0)},e.prototype.Oc=function(t){return this.jd[t]},e.prototype.Ic=function(){var t=[];for(var i in this.gd)t.push(this.gd[i]);return t},e.prototype.Ec=function(t){return this.gd[t]},e.prototype.Vc=function(t,i){var n=this.gd[i];return!!n&&(this.ld(i),t.Bc(n),!0)}},{"./GameInVault":12}],17:[function(t,i,n){"use strict";function e(t,i,n){this.md=t||{},this.nd=i||{},this.name=n||"#"+o++}var r=t("./helper"),o=1;i.exports=e;e.prototype.clone=function(t){return new e(r.clone(this.md),r.clone(this.nd),t)},e.prototype.od=function(t){this.nd=t},e.prototype.toString=function(){var t="{"+this.name+" - ";for(var i in this.md)t+=i+":"+this.md[i].toFixed(2)+", ";return t.pd(", ")+"}"},e.prototype.qd=function(t){var i=0;for(var n in this.md){var e=this.md[n],r=t.md[n];r<0!=e<0?r<0?(e-=r,r=0):(r-=e,e=0):(e=Math.abs(e),r=Math.abs(r));var o;o=0===r?e>1?1:e:0===e?r>1?1:r:1-(r>=e?e/r:r/e),i+=o}return i},e.prototype.get=function(t,i,n,e){void 0===n&&(n=null),void 0===e&&(e=null);var r=this.md[t];if(r)return r;if(this.md[t]=i,(n||e)&&(this.nd[t]=[n,e]),n&&e&&n>e)throw new Error("Limits are invalid: "+n+" > "+e);return i},e.prototype.xa=function(){return JSON.stringify(this)},e.rd=function(t){var i=JSON.parse(t);this.md=i.md,this.nd=i.nd},e.prototype.sd=function(t,i,n,e,r){var o=this.md,s=t.md;i.od(this.nd),n.od(this.nd);var h=i.md,u=n.md,a=~~(Math.random()*o.length),p=~~(Math.random()*a),c=0;for(var l in o)c<p||c>a?(h[l]=o[l],u[l]=s[l]):(h[l]=s[l],u[l]=o[l]),Math.random()<e&&(h[l]=this.td(l,h[l],r)),Math.random()<e&&(u[l]=this.td(l,u[l],r)),c++},e.prototype.td=function(t,i,n){var e,r=this.nd[t];if(r){var o=r[0],s=r[1];if(Math.random()<n)e=o+Math.random()*(s-o);else{e=i*(1+2*Math.random()*.05-.05),o&&e<o&&(e=o),s&&e>s&&(e=s)}}else e=i+10*(Math.random()-.5);return e},e.prototype.ud=function(){for(var t in this.md)this.md[t]=this.td(t,this.md[t],1);return this}},{"./helper":54}],18:[function(t,i,n){"use strict";function e(t){if(void 0===t&&(t=19),t!==~~t||t<3)throw new Error("Invalid goban size: "+t);this.Nb=t,this.wd=new o(t,u),this.grid=new o(t,s.vd),this.xd=this.grid.yd;var i,n;for(n=t;n>=1;n--)for(i=t;i>=1;i--)this.xd[n][i]=new s(this,i,n,a);for(n=1;n<=t;n++)for(i=1;i<=t;i++)this.xd[n][i].zd();e.Ad=new h(this,new s(this,-50,-50,a),-100,0),this.Bd=[e.Ad],this.Cd=[e.Ad],this.Dd=[],this.Ed=0,this.history=[],this.Ub(!1),this.Fd=0}var r=t("./constants"),o=t("./Grid"),s=t("./Stone"),h=t("./Group"),u=(t("./test"),r.vd),a=r.EMPTY;i.exports=e,e.prototype.clear=function(){for(var t=1;t<=this.Nb;t++)for(var i=1;i<=this.Nb;i++){var n=this.xd[t][i];n.group&&n.group.clear()}this.Bd.shift(),this.Cd.shift(),this.Dd.concat(this.Bd),this.Dd.concat(this.Cd),this.Bd.length=0,this.Cd.length=0,this.Bd.push(e.Ad),this.Cd.push(e.Ad),this.Ed=0,this.history.length=0,this.Ub(!1),this.Fd=0},e.prototype.Gd=function(t,i){var n=++this.Ed,e=this.Dd.pop();return e?e.Hd(t,i,n):e=new h(this,t,i,n),e},e.prototype.Id=function(t){t.Jd===this.Ed&&this.Ed--,this.Dd.push(t)},e.prototype.Kd=function(){return this.grid.Ld()},e.prototype.Md=function(t){this.wd.Md(t);for(var i=this.Nb;i>=1;i--)for(var n=1;n<=this.Nb;n++){var e=this.wd.yd[i][n];e!==a&&this.Yb(n,i,e)}},e.prototype.Nd=function(){for(var t={},i=this.Nb;i>=1;i--)for(var n=this.Nb;n>=1;n--){var e=this.xd[i][n].group;e&&(t[e.Jd]=e)}return t},e.prototype.Od=function(){for(var t,i="Board:\n"+this.toString()+"\nGroups:\n"+this.grid.Pd(function(t){return t.group?""+t.group.Jd:"."})+"\nStones in groups:\n",n={},e=this.grid.yd,r=0;t=e[r],r<e.length;r++)for(var o,s=t,h=0;o=s[h],h<s.length;h++)o&&o.group&&(n[o.group.Jd]=o.group);for(var u=1;u<=this.Ed;u++)n[u]&&(i+=n[u].Od()+"\n");return i},e.prototype.toString=function(){return this.grid.Pd()},e.prototype.hc=function(t,i,n){if(t<1||t>this.Nb||i<1||i>this.Nb)return!1;var e=this.xd[i][t];if(e.color!==a)return!1;if(e.Qd(n))return!1;if(this.Rd){if(this.Sd[this.Td(t,i,n)])return!1}else if(e.Ud(n))return!1;return!0},e.prototype.Vd=function(t,i){return this.xd[i][t]},e.prototype.Wd=function(t,i){return this.xd[i][t].color},e.prototype.Xd=function(t,i){return this.xd[i][t].Xd()},e.prototype.Yd=function(){return this.history.length},e.prototype.Yb=function(t,i,n){this.Zd(t,i,n);var e=this.xd[i][t];if(e.color!==a)throw new Error("Tried to play on existing stone in "+e);return this.$d(t,i,n)},e.prototype.pc=function(){if(!this.history.length)throw new Error("Extra undo");this.history.pop()._d(),this.Zd()},e.prototype.$d=function(t,i,n){var e=this.xd[i][t];return e.Qd(n),this.history.push(e),this.Fd++,e.ae(n),e},e.prototype.be=function(){this.history.pop()._d()},e.prototype.ce=function(){return this.Bd[this.Bd.length-1]},e.prototype.de=function(){return this.history[this.history.length-1]},e.prototype.ee=function(t){t=t||[0,0];for(var i=this.Bd.length-1;i>0;i--){var n=this.Bd[i];t[n.color]+=n.fe.length}return t},e.prototype.Ub=function(t){if(this.history.length>0)throw new Error("Superko rule changed during game");this.Rd=t,t?(this.ge=this.he(),this.ie=[],this.Sd={}):(this.ge=null,this.ie=this.Sd=null)},e.prototype.Zd=function(t,i,n){this.Rd?t?(this.ie.push(this.ge),this.Sd[this.ge]=this.history.length,this.ge=this.Td(t,i,n)):(this.ge=this.ie.pop(),this.Sd[this.ge]=null):this.ge=null},e.prototype.Td=function(t,i,n){for(var e=this.je(this.ge,t,i,n),r=this.Vd(t,i).ke(1-n),o=r.length-1;o>=0;o--)if(!(r[o].le>1))for(var s=r[o].fe,h=s.length-1;h>=0;h--){var u=s[h];e=this.je(e,u.me,u.ne,a)}return e},e.prototype.oe=function(){return this.Rd?this.ge:(this.ge||(this.ge=this.Kd()),this.ge)};var p="0".charCodeAt();e.prototype.he=function(){for(var t="",i="",n=this.Nb,e=1;e<=n;e++)for(var r=this.xd[e],o=1;o<=n;o++)t+=String.fromCharCode(p+r[o].color+1),4===t.length&&(i+=String.fromCharCode(parseInt(t,3)+33),t="");return t.length&&(t=(t+"000").substr(0,4),i+=String.fromCharCode(parseInt(t,3)+33)),i},e.prototype.je=function(t,i,n,e){var r,o=(n-1)*this.Nb+(i-1),s=~~(o/4),h=o%4;if(e===a){var u=("000"+(t.charCodeAt(s)-33).toString(3)).slice(-4),p=u.substr(0,h)+"0"+u.substr(h+1);r=parseInt(p,3)+33}else r=t.charCodeAt(s)+(1<<e)*Math.pow(3,3-h);return t.substr(0,s)+String.fromCharCode(r)+t.substr(s+1)}},{"./Grid":19,"./Group":20,"./Stone":29,"./constants":53,"./test":86}],19:[function(t,i,n){"use strict";function e(t,i,n){if(void 0===i)throw new Error("Grid init value must be defined");this.Nb=t,void 0===n?this.yd=u.qe(t+2,t+2,i):(this.yd=u.qe(t+2,t+2,n),this.init(i))}function r(t){if(t===c)return"(BORDER)";if(t>=e.ye)return String.fromCharCode("A".charCodeAt()+t-e.ye)
;if(t<e.Ae||t>=e.we.length)throw new Error("Invalid color "+t);return t<0&&(t+=e.we.length),e.we[t]}function o(t){return r("number"==typeof t?t:t.color)}function s(t){for(var i="",n=t.length-1;n>=0;n--)i+=t[n];return i}var h=t("./constants"),u=t("./helper"),a=t("./Move"),p=a.pe,c=h.vd;i.exports=e,e.re="+",e.se="?",e.te="@O",e.ue="&#",e.ve="-:",e.we=e.te+e.ue+e.ve+e.se+e.re,e.xe=e.se+e.re+e.we,e.ye=100,e.ze=-1,e.Ae=-2,e.Be=2,e.Ce=4,e.De=[0,0,-1,1,1,-1,-1,1],e.Ee="-'?.:",e.prototype.init=function(t){if(void 0===t)throw new Error("Grid init value must be defined");for(var i=this.Nb;i>=1;i--)for(var n=this.yd[i],e=this.Nb;e>=1;e--)n[e]=t},e.prototype.J=function(t){if(t.Nb!==this.Nb)throw new Error("Cannot copy between different sized grids");for(var i=this.Nb;i>=1;i--)for(var n=this.yd[i],e=t.yd[i],r=this.Nb;r>=1;r--)n[r]=e[r];return this},e.prototype.Fe=function(t){var i=t.grid;if(i.Nb!==this.Nb)throw new Error("Cannot copy between different sized grids");for(var n=this.Nb;n>=1;n--)for(var e=this.yd[n],r=i.yd[n],o=this.Nb;o>=1;o--)e[o]=r[o].color;return this},e.Ge=function(t){return e.xe.indexOf(t)+e.Ae},e.prototype.Pd=function(t){return this.He(!0,"\n",t||o)},e.prototype.Ld=function(t){return this.He(!1,",",t||o)},e.Ie=function(t){return t.indexOf(",")},e.prototype.He=function(t,i,n){var r,o,s,h=new e(this.Nb,"").yd,u=1;for(o=this.Nb;o>=1;o--)for(r=1;r<=this.Nb;r++)null!==(s=n(this.yd[o][r]))&&(h[o][r]=s,u=Math.max(u,s.length));var a=u,c="          ",l="";for(o=this.Nb;o>=1;o--){for(t&&(l+="%2d".format(o)+" "),r=1;r<=this.Nb;r++)s=h[o][r],s.length<a&&(s=c.substr(1,a-s.length)+s),l+=s;l+=i}if(t){for(l+="   ",r=1;r<=this.Nb;r++)l+=c.substr(1,a-1)+p(r);l+="\n"}return"\n"!==i&&(l=l.Je()),l},e.prototype.toString=function(){for(var t="",i=this.Nb;i>=1;i--){for(var n=1;n<=this.Nb;n++)t+=r(this.yd[i][n]);t+="\n"}return t},e.prototype.Kd=function(){return"object"==typeof this.yd[1][1]?this.Ld(function(t){return r(t.color)}):this.Ld(function(t){return r(t)})},e.prototype.Md=function(t){var i=t.split(/\"|,/);if(i.length!==this.Nb)throw new Error("Invalid image: "+i.length+" rows instead of "+this.Nb);for(var n=this.Nb;n>=1;n--){var r=i[this.Nb-n];if(r.length!==this.Nb)throw new Error("Invalid image: row "+r);for(var o=1;o<=this.Nb;o++)this.yd[n][o]=e.Ge(r[o-1])}},e.Ke=function(t){return t.split(",").reverse().join()},e.Le=function(t){return t.split(",").map(s).join()},e.Me=function(t){return s(t)},e.Ne=function(t){for(var i="",n=t.split(","),e=n[0].length-1;e>=0;e--){i+=",";for(var r=0;r<n.length;r++)i+=n[r][e]}return i.substr(1)}},{"./Move":23,"./constants":53,"./helper":54}],20:[function(t,i,n){"use strict";function e(t,i,n,e){this.zb=t,this.fe=[i],this.le=n,this.color=i.color,this.Pe=null,this.Qe=null,this.Re=null,this.Jd=e,this.Se=null,this.Te=this.Ue=0}var r=t("./constants"),o=t("./log"),s=t("./Move"),h=s.Oe,u=r.EMPTY;i.exports=e,e.prototype.Hd=function(t,i,n){this.fe.length=0,this.fe.push(t),this.le=i,this.color=t.color,this.Pe=this.Qe=this.Re=null,this.Jd=n,this.Te=this.Ue=0},e.prototype.clear=function(){for(var t=this.fe.length-1;t>=0;t--)this.fe[t].clear();this.zb.Id(this)},e.prototype.toString=function(t){if(0===t)return"#"+this.Jd;if(1===t)return this.fe[0]+" x"+this.fe.length;for(var i,n="{group #"+this.Jd+" of "+this.fe.length+" "+h(this.color)+" stones [",e=this.fe,r=0;i=e[r],r<e.length;r++)n+=i.Ve()+",";return n=n.Je(),n+="], lives:"+this.le,this.Pe&&(n+=" MERGED with #"+this.Pe.Jd),this.Re&&(n+=" KILLED by "+this.Re.Ve()),n+="}"},e.prototype.We=function(){return this.fe.length&&this.fe[0].group===this},e.prototype.Od=function(){return this.toString()},e.prototype.Xe=function(){return this.fe.map(function(t){return t.Ve()}).sort().join(",")},e.prototype.Ye=function(){for(var t,i=[],n=this.fe,e=0;t=n[e],e<n.length;e++)for(var r,o=t.Ze,s=0;r=o[s],s<o.length;s++)r.color===u&&i.indexOf(r)<0&&i.push(r);if(i.length!==this.le)throw new Error("Wrong life count for group");return i},e.prototype.$e=function(){for(var t,i=[],n=1-this.color,e=this.fe,r=0;t=e[r],r<e.length;r++)for(var s,h=t.Ze,u=0;s=h[u],u<h.length;u++)s.color===n&&i.indexOf(s.group)<0&&i.push(s.group);return o._e&&i.length,i},e.prototype.af=function(t){for(var i,n=-1,e=t.Ze,r=0;i=e[r],r<e.length;r++)if(i.color===u){n++;for(var s,h=i.Ze,a=0;s=h[a],a<h.length;a++)if(s.group===this&&s!==t){n--;break}}return o._e,n},e.prototype.bf=function(t){if(o._e,this.fe.push(t),this.le+=this.af(t),this.le<0)throw new Error("Unexpected error (lives<0 on connect)");o._e},e.prototype.cf=function(t){if(o._e,this.fe.length>1){if(this.le-=this.af(t),this.le<0)throw new Error("Lives<0 on disconnect")}else this.zb.Id(this),o._e;if(this.fe.pop()!==t)throw new Error("Unexpected error (disconnect order)")},e.prototype.df=function(t){if(--this.le<=0)return this.ef(t)},e.prototype.ff=function(t){if(this.le--,o._e,this.le<1)throw new Error("Unexpected error (lives<1 on attack by resucitated)")},e.prototype.gf=function(t){this.le++,o._e},e.prototype.hf=function(t,i){if(t.Pe===this||t===this||this.color!==t.color)throw new Error("Invalid merge");o._e,this.le+=t.fe.length;for(var n,e=t.fe,r=0;n=e[r],r<e.length;r++)n.jf(this),this.bf(n);t.Pe=this,t.Qe=i,this.zb.Cd.push(t),o._e},e.prototype.kf=function(t){o._e;for(var i,n=t.fe,e=n.length-1;i=n[e],e>=0;e--)this.cf(i),i.jf(t);this.le-=t.fe.length,t.Qe=t.Pe=null,o._e},e.prototype.lf=function(t){for(var i=this.zb.Cd,n=i.length-1;n>=0;n--){var e=i[n];if(e.Qe!==t||e.Pe!==this)break;this.kf(e),i.pop()}},e.prototype.ef=function(t){if(o._e,this.le<0)throw new Error("Unexpected error (lives<0)");for(var i,n=this.fe,e=0;i=n[e],e<n.length;e++){for(var r,s=i.ke(1-this.color),h=0;r=s[h],h<s.length;h++)r.gf(i);i.mf()}this.Re=t,this.zb.Bd.push(this),o._e},e.prototype.nf=function(){this.Re=null,this.le=1;for(var t,i=this.fe,n=0;t=i[n],n<i.length;n++){t.pf(this);for(var e,r=t.ke(1-this.color),o=0;e=r[o],o<r.length;o++)e.ff(t)}},e.qf=function(t){for(var i=t.zb.Bd,n=i.length-1;n>=0;n--){var e=i[n];if(e.Re!==t)break;i.pop(),o._e,e.nf()}}},{"./Move":23,"./constants":53,"./log":81}],21:[function(t,i,n){"use strict";function e(){}i.exports=new e,e.prototype.Xb=function(t,i){if(i>4&&(t<9||t%2==0)&&(i=4),t<=5)return[];for(var n=t<13?2:3,e=1+n,r=(1+t)/2,o=t-n,s=[],h=0;h<i;h++){switch(i%2==1&&i>4&&h===i-1&&(h=8),h){case 0:var u=e,a=e;break;case 1:u=o,a=o;break;case 2:u=e,a=o;break;case 3:u=o,a=e;break;case 4:u=e,a=r;break;case 5:u=o,a=r;break;case 6:u=r,a=e;break;case 7:u=r,a=o;break;case 8:u=r,a=r}s.push([u,a])}return s}},{}],22:[function(t,i,n){"use strict";function e(t,i,n){this.qc=t,this.fd=i,this.rf=n,this.sf=t.ad(i,[])}i.exports=e,e.prototype.ed=function(t){var i,n=this.sf.indexOf(t);if(0!==n)return n<0?(this.sf.unshift(t),this.sf.length>this.rf&&(i=this.sf.splice(this.rf))):(this.sf.splice(n,1),this.sf.unshift(t)),this.qc.$c(this.fd,this.sf),i},e.prototype.getItem=function(t){return this.sf[t]},e.prototype.dd=function(){return this.sf}},{}],23:[function(t,i,n){"use strict";function e(t){switch(t[0]){case"B":return h;case"W":return u;default:return}}function r(t){return"B"!==t[0]&&"W"!==t[0]?t:"-"!==t[1]?t.substr(1):t.substr(2)}function o(t,i){var n=a.indexOf(t[0])+1,e=parseInt(t.substr(1,2));if(!n||isNaN(e)){if(i)return null;throw new Error("Illegal move parsed: "+t)}return[n,e]}var s=t("./constants"),h=s.vb,u=s.wb,a="abcdefghjklmnopqrstuvwxyz",p=["black","white"];n.rb=e,n.sb=r,n.qb=function(t,i){return(i===h?"B-":"W-")+t},n.Oe=function(t){return p[t]},n.tf=o,n.tb=function(t){var i=e(t);void 0!==i&&(t=r(t));var n=o(t,!0);if(!n){if("pass"===t||t.startsWith("resi"))return null;throw new Error("Illegal move parsed: "+t)}return void 0!==i?n.concat(i):n},n.ub=function(t,i){return a[t-1]+i},n.pe=function(t){return a[t-1]}},{"./constants":53}],24:[function(t,i,n){"use strict";function e(t,i){this.uf=t,this.vf=i,this.wf=null,this.xf=!1}var r=t("./GameInVault");i.exports=e,e.prototype.yf=function(t,i,n,e,o,s){var h=this.uf;h.yb(e),h.Mb(t,i,n);var u=this.wf=new r;u.Aa(h.zb.Nb,h.Db,h.Sb(),h.Zb()),this.vf&&this.vf.yc(u)},e.prototype.zf=function(){var t=this.uf;this.wf=new r,this.wf.Aa(t.zb.Nb,t.Db,t.Sb(),t.Zb())},e.prototype.Af=function(t,i,n){var e=new r;return!!e.Ca(t,i,n)&&this.Bf(e,i)},e.prototype.Bf=function(t,i){var n=t.Oa();return this.uf.Mb(n.mb("boardSize"),t.Ja(),n.mb("komi")),this.uf.yb(n.mb("rules"),!0),!!this.uf.Pb(t.Ka(),i)&&(this.wf=t,this.vf&&this.vf.yc(t),!0)},e.prototype.Zc=function(){this.Cf(),this.vf.Zc(this.wf)},e.prototype._c=function(){return this.vf._c()},e.prototype.Df=function(){return!!this.vf.Gc(this.wf.fb())},e.prototype.zc=function(){if(this.wf)return this.Cf(),this.vf.zc()},e.prototype.Ef=function(t){this.vf.Rc(t.fb())},e.prototype.Yc=function(t,i){return this.zc(),this.vf.Yc(t,i)},e.prototype.Ff=function(){return this.Cf(),{oa:this.wf.ya(),id:this.wf.fb()}},e.prototype.Oa=function(){return this.wf.Oa()},e.prototype.Gf=function(t,i){this.wf.Oa().lb(t,i)},e.prototype.Cf=function(){this.xf||this.wf.Na(this.uf.history),this.wf.Pa()},e.prototype.Hf=function(){return this.xf=!0,this.wf.Na(this.uf.history),this.wf.Ia()},e.prototype.If=function(){this.xf=!1},e.prototype.Jf=function(){return this.uf.zb},e.prototype.Kf=function(){return this.uf.zb.Nb},e.prototype.Lf=function(){return this.uf.Eb},e.prototype.Mf=function(){return this.uf.Hb?"ENDED":this.pb()&&!this.xf?"ENDED":this.uf.Gb?"ENDING":null},e.prototype.nc=function(){return this.uf.history},e.prototype.ac=function(t){return this.uf.ac(t)?"":this.uf.bc().join("\n")},e.prototype.lc=function(){this.uf.lc()},e.prototype.kc=function(t,i){this.uf.kc(),this.wf.Oa().ob(t,i)},e.prototype.Nf=function(){this.uf.ac("resi"),this.wf.Oa().ob(this.uf.Eb)},e.prototype.pb=function(){return this.wf.Oa().pb()}},{"./GameInVault":12}],25:[function(t,i,n){"use strict";function e(t){this.root=new r(null,[]),this.Of=-1,this.Pf=this.root,this.Qf=-1,this.Rf(t)}function r(t,i,n){this.Sf=t,this.Tf=t?t.Tf+t.Uf.length:0,this.Uf=i,this.Ha=n||[],this.children=null,this.Vf=!1}function o(t,i,n){this.og=t,this.pg=i,this.qg=n}function s(t,i){return a(t)===a(i)}var h=t("./constants"),u=t("./Move"),a=u.sb,p=h.vb,c=h.wb;i.exports=e,r.prototype.Wf=function(){return[this.Uf,this.Ha]},r.prototype.Xf=function(t){for(var i=0;i<this.children.length;i++)if(s(t,this.children[i].Uf[0]))return this.children[i];return null},r.prototype.Yf=function(t){var i=new r(this,[t]);return this.children.push(i),i},r.prototype.Zf=function(){this.children||(this.children=[],this.Yf(""))},r.prototype.$f=function(){this.children.unshift(new r(this,[""]))},r.prototype._f=function(){return""===this.Uf[0]},r.prototype.ag=function(){if(!this.children)return null;var t=this.children[0];return t._f()?null:t},r.prototype.bg=function(){if(!this.children)return null;var t=this.children[0];return t._f()&&(t=this.children[1]),t||null},r.prototype.cg=function(){if(this.children)throw new Error("Invalid _deleteLastMove");if(this.Uf.length>1)return this.Uf.length--,this;var t=this.Sf;return t.dg(this),t},r.prototype.dg=function(t){var i=this.children;i.splice(i.indexOf(t),1),i.length||(this.children=null)},r.prototype.eg=function(t,i){var n=this.Uf.splice(t),e=this.Ha.splice(t);if(!n.length)throw new Error("Invalid split at end");var o=new r(this,n,e);o.Vf=i;var s=o.children=this.children;if(s)for(var h=0;h<s.length;h++)s[h].Sf=o;this.children=[o]},r.prototype.fg=function(t,i){var n;if(t===this.Uf.length){if(!this.children)throw new Error("Unexpected fork");n=this.Xf(i)||this.Yf(i)}else this.eg(t,this.Vf),n=new r(this,[i]),this.children.push(n);return n},r.prototype.gg=function(){for(var t=this;t;)t.Vf=!1,t=t.ag()},r.prototype.hg=function(){this.Vf=!0;var t=this.Sf.children;t[0]!==this&&(t.splice(t.indexOf(this),1),t[0]._f()?t[0]=this:t.unshift(this))},r.prototype.ig=function(t){t+1!==this.Uf.length?(this.eg(t+1,!1),this.$f()):this.children&&!this.children[0]._f()&&this.$f()},r.prototype.jg=function(){var t=this.Uf.length;if(this.children)for(var i=0;i<this.children.length;i++)t+=this.children[i].jg();return t},e.prototype.Rf=function(t){if(t&&!t.length)throw new Error("empty setupMoves array");this.sa=t,this.Fb=t?c:p},e.prototype.Ja=function(){return this.sa},e.prototype.kg=function(){return this.root},e.prototype.lg=function(){return this.Qf<0?null:this.Pf.Uf[this.Qf]},e.prototype.mg=function(){return this.Pf.Tf+this.Qf},e.prototype.ng=function(){return this.Pf.Vf},e.prototype.Wa=function(){return[this.Pf,this.Qf]},e.prototype._a=function(t){this.Pf=t[0],this.Qf=t[1]},e.prototype.rg=function(t){if(!(t.qg<t.pg.Uf.length)){var i=this.Pf,n=this.Qf;this.sg(t),t.pg=this.Pf,t.qg=this.Qf,this.Pf=i,this.Qf=n}},e.prototype.getBookmark=function(){for(var t=this.mg()+1,i=new Array(t),n=this.Pf,e=this.Qf,r=t-1;r>=0;r--)i[r]=this.lg(),this.tg();return this.Pf=n,this.Qf=e,new o(i,n,e)},e.prototype.sg=function(t){this.Xa();for(var i=t.og,n=0;n<i.length;n++)this.ug(i[n])},e.prototype.vg=function(t){return this.rg(t),this.Pf===t.pg&&this.Qf===t.qg},e.prototype.wg=function(t){return t.og},e.prototype.xg=function(){return this.getBookmark().og},e.prototype.Xa=function(){this.Pf=this.root,this.Qf=-1},e.prototype.yg=function(){return this.Pf.Ha[this.Qf]},e.prototype.zg=function(t){if(t){var i=this.Pf.Ha[this.Qf];i||(i=this.Pf.Ha[this.Qf]={});for(var n in t)i[n]=t[n]}},e.prototype.Ag=function(t){return t.Tf%2==0?this.Fb:1-this.Fb},e.prototype.Bg=function(t){var i=this.Pf;if(++this.Qf===i.Uf.length){if(!i.children)return i.Uf.push(t)}else if(s(t,i.Uf[this.Qf]))return;this.Pf=i.fg(this.Qf,t),this.Qf=0},e.prototype.ug=function(t){var i=this.Pf;this.Qf===i.Uf.length-1&&i.Vf&&i.Zf(),this.Bg(t)},e.prototype.Cg=function(){this.Pf.Zf()},e.prototype.tg=function(){if(this.Qf>0)this.Qf--;else if(this.Pf!==this.root)this.Pf=this.Pf.Sf,this.Qf=this.Pf.Uf.length-1;else{if(this.Qf===-1)return!1;this.Qf=-1}return!0},e.prototype.Dg=function(t){for(;t>0;){if(t<=this.Qf)return void(this.Qf-=t);if(t-=this.Qf+1,this.Qf=0,this.tg(),this.Qf===-1)break}},e.prototype.Eg=function(t){var i=this.Pf;if(this.Qf===i.Uf.length-1){if(!(i=t?i.ag():i.bg()))return null;this.Pf=i,this.Qf=0}else this.Qf++;return this.Pf.Uf[this.Qf]},e.prototype.Fg=function(){return this.Eg()},e.prototype.Za=function(){return this.Eg(!0)},e.prototype.Gg=function(){var t=this.Pf;return this.Qf===t.Uf.length-1&&!t.bg()},e.prototype.$a=function(){var t=this.Pf,i=this.Qf,n=this.Eg();return this.Pf=t,this.Qf=i,n},e.prototype.Ya=function(){var t=this.Pf;if(this.Qf<t.Uf.length-1)return null;var i=t.children;if(!i)return null;if(1===i.length)return null;if(2===i.length&&""===i[0].Uf[0])return null;var n=[];t.Vf||""===i[0].Uf[0]||n.push("");for(var e=0;e<i.length;e++)n.push(i[e].Uf[0]);return n},e.prototype.Na=function(t){this.root.gg(),this.Of=t.length,this.root.Vf=!0,this.Pf=this.root,this.Qf=-1;for(var i=this.Pf,n=0;n<t.length;n++)this.Bg(t[n]),this.Pf!==i&&(i=this.Pf,i.hg());i.ig(this.Qf)},e.prototype.Ma=function(){for(var t=[],i=this.root;;){i.Vf=!0;for(var n=0;n<i.Uf.length;n++)t.push(i.Uf[n]);if(!i.children)break;i=i.children[0]}return i._f()?(t.pop(),this.Pf=i.Sf):this.Pf=i,this.Qf=this.Pf.Uf.length-1,this.Of=t.length,t},e.prototype.Hg=function(){return this.Of},e.prototype.Ig=function(t){var i=this.Pf.Xf(t);if(!i)throw new Error("Invalid variation "+t);return i.jg()},e.prototype.Jg=function(t){if(this.Qf!==this.Pf.Uf.length-1)return!1;var i=this.Pf.Xf(t);return!(!i||i.Vf)&&(this.Pf.dg(i),!0)},e.prototype.Kg=function(){var t=this.Pf;if(t.Vf)return!1;if(t.children)return!1;var i=t.Uf.length;return this.Qf===i-1&&(this.Pf=t.cg(),this.Qf=this.Pf.Uf.length-1,!0)},e.prototype.La=function(t){var i=this.Lg(t);return i!==-1?i:(this.Xa(),t.Xa(),this.Mg(t),-1)},e.prototype.Lg=function(t){for(var i=this.Ma(),n=t.Ma(),e=Math.min(i.length,n.length),r=0;r<e;r++)if(i[r]!==n[r])return r;return n.length>e&&this.Na(n),-1},e.prototype.Mg=function(t){for(var i,n=0;!(i=t.Ya());){var e=t.Eg();if(!e)break;n++,this.ug(e),this.zg(t.yg())}if(i)for(var r=0;r<i.length;r++){var o=i[r];""!==o&&(this.ug(o),t.ug(o),this.Mg(t),this.tg(),t.tg())}n&&(this.Dg(n),t.Dg(n))}},{"./Move":23,"./constants":53}],26:[function(t,i,n){"use strict";function e(t){this.uf=t;var i=u.Og("scorer.js");this.Pg=new i}function r(t){return 0===t?"Tie game":a(t>0?p:c)+" wins by "+o(Math.abs(t))}function o(t){return 1!==t?t+" points":"1 point"}var s=t("./constants"),h=t("./Move"),u=t("./loaders").Ng,a=h.Oe,p=s.vb,c=s.wb;i.exports=e,e.prototype.Qg=function(t){var i=(t||this.Rg())[0];return i[p]-i[c]},e.prototype.Sg=function(t){return this.Tg(t)},e.prototype.Ug=function(){return this.Rg()},e.prototype.getScoringGrid=function(){return this.Pg["getScoringGrid"]()},e.prototype.Rg=function(){var t=this.uf;if(null!==t.Ib)return["resi",1-t.Ib,t.Jb];var i=t.zb;if(0!==i.Yd()){var n=t.useAreaScoring?null:i.ee();return this.Pg["countScore"](i.Kd(),n,t.Db),this.Pg["getScoreInfo"]()}},e.prototype.Tg=function(t){if("resi"===t[0]){var i,n=a(t[1]),e=a(1-t[1]);switch(t[2]){case"time":i=e+" ran out of time";break;case null:case void 0:i=e+" resigned";break;default:i=e+" disqualified: "+t[2]}return[n+" won ("+i+")"]}if(!t||2!==t.length)throw new Error("Invalid score info: "+t);var s=t[0],h=t[1];if(s.length!==h.length)throw new Error("Invalid score info");var u=[],l=s[p]-s[c];u.push(r(l));for(var f=p;f<=c;f++){var d=h[f],g=d[0],v=d[1],y=d[2],m=0!==v?" "+(v<0?"-":"+")+" "+Math.abs(v)+" prisoners":"",b=y>0?" + "+y+" komi":"",w=v||y?" ("+g+m+b+")":"";u.push(a(f)+": "+o(s[f])+w)}return u}},{"./Move":23,"./constants":53,"./loaders":80}],27:[function(t,i,n){"use strict";function e(){y||s(),this.text=null,this.Vg=null,this.Wg=this.Db=0,this.sa=this.ta=this.Uf=null,this.Xg=null,this.qa=null,this.Ha=null,this.Eb=l,this.Yg=!1}function r(t,i,n){g[t]=[i,n],v[n]=t}function o(t,i){y[t]=i}function s(){g={},v={},y={},r("GM","int",null),r("FF","int","fileFormat"),r("SZ","int","boardSize"),r("AB","move",null),r("AW","move",null),r("HA","int","handicap"),r("KM","real","komi"),r("RU","text","rules"),r("RE","text","result"),r("PB","text","playerBlack"),r("PW","text","playerWhite"),r("BS","int","blackSpecies"),r("WS","int","whiteSpecies"),r("LT","flag","enforceLosingOnTime"),r("SO","text","source"),r("ID","text","gameId"),r("AP","text","application"),r("BR","text","blackRank"),r("WR","text","whiteRank"),r("BT","text","blackTeam"),r("WT","text","whiteTeam"),r("TM","text","timeLimit"),r("OT","text","overtimeMethod"),r("EV","text","event"),r("RO","text","round"),r("DT","text","date"),r("PC","text","place"),r("GN","text","gameName"),r("ON","text","openingPlayed"),r("GC","text","gameComment"),r("C","text","comment"),r("N","text","nodeName"),r("US","text","userName"),r("AN","text","analyseAuthor"),r("CP","text","copyright"),r("CA","text","characterSet"),r("ST","text","variationStyle"),o("B","move"),o("W","move"),o("AB","move"),o("AW","move"),o("BL",null),o("WL",null),o("C","text"),o("CR",null),o("BM",null),o("N",null)}function h(t){if(t.dh("a","z"))return t.charCodeAt()-97;if(t.dh("A","Z"))return t.charCodeAt()-39;throw new Error("Invalid coordinate value: "+t)}function u(t){for(var i=0;;){var n=t.indexOf("]",i);if(n===-1)return-1;if("\\"!==t[n-1])return n;i=n+1}}var a=t("./constants"),p=t("./log"),c=t("./ReviewTree"),l=a.vb,f=a.wb,d=["B","W"],g=null,v=null,y=null;i.exports=e,e.Zg=function(){return y||s(),v},e.Da=function(t){var i=t.trim();return"("===i[0]&&";"===i.substr(1).trim()[0]},e.prototype.$g=function(t,i){if(!e.Da(t))throw new Error("Not an SGF file");this._g(t),this.ah(),this.bh(i)},e.prototype.Fa=function(t,i,n){try{return this.$g(t,n),!0}catch(t){var e="Failed loading SGF moves:\n"+t;if(!i)throw new Error(e);return i.push(e),!1}},e.prototype.Ja=function(){return this.sa},e.prototype.Ka=function(){return this.ta},e.prototype.Ia=function(){return this.qa},e.prototype.mb=function(t,i){var n=this.Ha[t];return void 0!==n?n:i};e.prototype.eh=function(t){if(this.Wg)throw new Error("SZ set twice");this.Wg=t},e.prototype.fh=function(t){if(!this.Wg)throw new Error("Move seen before SZ is known");return""===t||"tt"===t&&this.Wg<=19?"pass":"abcdefghjklmnopqrstuvwxyz"[h(t[0])]+(this.Wg-h(t[1]))},e.prototype.gh=function(t,i,n){n?(t!==this.Eb&&(i=d[t]+i),this.Eb=t,this.sa.push(i)):(this.Yg=!0,i=d[t]+i,this.Eb=1-t,this.Uf.push(i))},e.prototype.Bg=function(t,i,n){if(!this.Yg)return this.gh(t,i,n);t!==this.Eb&&(i=d[t]+i),this.Eb=1-t,this.Uf.push(i)},e.prototype.hh=function(t){var i=this.Uf.length-1;this.Xg[i]=(this.Xg[i]||"")+t},e.prototype.ih=function(t,i){switch(i){case"text":return t;case"int":return parseInt(t);case"real":return parseFloat(t);case"flag":return!0;case"move":return this.fh(t);default:throw new Error("Invalid tag type: "+i)}},e.prototype.jh=function(t,i){var n=y[t];if(void 0===n)return p.warn&&p.warn("Unknown property "+t+"["+i+"] ignored");if(n){var e=this.ih(i,n);switch(t){case"B":return this.Bg(l,e);case"W":return this.Bg(f,e);case"AB":return this.Bg(l,e,!0);case"AW":return this.Bg(f,e,!0);case"C":return this.hh(i)}}},e.prototype.bh=function(t){this.qa=new c,this.kh(this.Vg,1),this.sa.length||(this.sa=null),this.qa.Rf(this.sa),this.ta=this.qa.Ma(),void 0!==t&&(this.ta=this.ta.slice(0,t))},e.prototype.kh=function(t,i){for(var n=i;n<t.length;n++){var e=t[n];if("seq"!==e[0]){this.Uf=[],this.Xg=[];for(var r=0;r<e.length;r+=2){var o=e[r]||o,s=e[r+1];this.jh(o,s)}for(var h=0;h<this.Uf.length;h++)this.qa.ug(this.Uf[h]),this.Xg[h]&&this.qa.zg({lh:this.Xg[h]})}else{if(!e[1].length){this.qa.Cg();continue}var u=this.qa.Wa(),a=this.Eb;this.kh(e,1),this.Eb=a,this.qa._a(u)}}},e.prototype.mh=function(t,i){var n=g[t];if(void 0===n)return this.Ha[t]=i,p.nh("Unknown property in SGF header: "+t+"["+i+"]");var e=n[0],r=n[1],o=this.ih(i,e);return r&&(this.Ha[r]=o),o},e.prototype.ah=function(){this.Wg=this.Db=0,this.Ha={},this.sa=[],this.Eb=l,this.Yg=!1;for(var t=this.Vg[0],i=0;i<=t.length-1;i+=2){var n=t[i],e=t[i+1],r=this.mh(n,e);switch(n){case"GM":if(1!==r)throw new Error("SGF game is not a GO game");break;case"FF":(r<3||r>4)&&p.warn&&p.warn("SGF format "+r+". Not sure we handle it well.");break;case"SZ":this.eh(r);break;case"KM":this.Db=r;break;case"AB":this.Bg(l,r,!0);break;case"AW":this.Bg(f,r,!0)}}},e.prototype._g=function(t){this.text=t,this.Vg=[],t=this.oh(t),""!==(t=this.ph(t))&&this.qh("Trailing text ignored",t)},e.prototype.ph=function(t){for(t=this.rh("(",t),t=this.oh(t);";"===t[0];)t=this.sh(t);for(;"("===t[0];){var i=this.Vg;this.Vg=["seq"],t=this.ph(t),i.push(this.Vg),this.Vg=i}return t=this.rh(")",t),t=this.oh(t)},e.prototype.sh=function(t){t=this.rh(";",t);for(var i=[];;){for(var n=0;t[n]&&t[n].dh("A","Z");)n++;var e=t.substr(0,n);if(""===e)break;for(i.push(e),t=this.rh(e,t);;){t=this.rh("[",t);var r=u(t);r<0&&this.qh("Missing ']'",t);var o=t.substr(0,r);if(i.push(o),t=this.rh(o+"]",t),"["!==t[0])break;i.push(null)}}return this.Vg.push(i),t=this.oh(t)},e.prototype.oh=function(t){return t.trim()},e.prototype.rh=function(t,i){return i.startsWith(t)||this.qh(t+" expected",i),i.replace(t,"").trim()},e.prototype.qh=function(t,i){throw new Error("Syntax error: '"+t+"' at ..."+i.substr(0,20)+"...")}},{"./ReviewTree":25,"./constants":53,"./log":81}],28:[function(t,i,n){"use strict";function e(){this.qa=null,this.Nb=0,this.th="",this.uh="",c||r()}function r(){c={};for(var t=0;t<l.length;t++){var i=l[t];c[i]=!0}for(t=0;t<f.length;t++)c[f[t]]=!0}function o(t,i){return void 0===i||null===i?"":t+"["+i+"]"}var s=t("./constants"),h=t("./Move"),u=t("./SgfReader"),a=h.tb,p=s.vb,c=null,l=["playerWhite","playerBlack","source","event","place","boardSize","komi","rules","date"],f=["fileFormat","handicap"];i.exports=e,e.prototype.vh=function(t,i){this.Nb=t.mb("boardSize");for(var n=u.Zg(),e=t.nb(),r="",s=0;s<l.length;s++){var h=l[s];r+=o(n[h],e[h])}for(var a in e)c[a]||(r+=o(n[a],e[a]));return r+=this.wh(i)},e.prototype.wh=function(t){if(!t)return"";this.th="A",this.uh="B";for(var i=o("HA",t.length),n=0;n<t.length;n++)i+=this.xh(t[n]);return i},e.prototype.xh=function(t){if(""===t)return"";var i,n=this.th,e=this.uh,r=a(t);if(r)void 0!==r[2]&&(e=r[2]===p?"B":"W"),i=String.fromCharCode(96+r[0])+String.fromCharCode(97+this.Nb-r[1]);else{if(!t.endsWith("pass"))return null;i=""}return""===n&&(this.uh="W"===e?"B":"W"),n+e+"["+i+"]"},e.prototype.yh=function(t,i){for(var n="",e=0;e<t.length;e++){var r=this.xh(t[e]);if(null===r)break;n+=";"+r,i[e]&&i[e].lh&&(n+="C["+i[e].lh+"]")}return n},e.prototype.zh=function(t){this.uh=this.qa.Ag(t)===p?"B":"W";var i=t.Wf(),n=this.yh(i[0],i[1]);if(t.children)for(var e=0;e<t.children.length;e++)n+="("+this.zh(t.children[e])+")";return n},e.prototype.Qa=function(t,i){this.qa=i;var n="(;FF[4]GM[1]"+this.vh(t,i.Ja());return this.th="",(n+=this.zh(i.kg()))+")"}},{"./Move":23,"./SgfReader":27,"./constants":53}],29:[function(t,i,n){"use strict";function e(t,i,n,e){this.zb=t,this.me=i,this.ne=n,this.color=e,this.group=null,this.Ze=[],this.Ch=[]}var r=t("./constants"),o=t("./Group"),s=t("./Move"),h=s.ub,u=r.EMPTY,a=r.vd,p=r.Ah,c=r.Bh;i.exports=e,e.vd=new e(null,-1,-1,a);var l=e.Dh=[[0,1],[1,0],[0,-1],[-1,0]],f=e.Eh=[[1,1],[1,-1],[-1,-1],[-1,1]];e.prototype.clear=function(){this.color=u,this.group=null},e.prototype.zd=function(){for(var t=this.zb.xd,i=c;i>=p;i--){var n=t[this.ne+l[i][1]][this.me+l[i][0]];n.color===u&&this.Ze.push(n),this.Ch.push(n),n=t[this.ne+f[i][1]][this.me+f[i][0]],this.Ch.push(n)}},e.prototype.toString=function(){return this.color===u?this.Ve():(this.color?"W":"B")+"-"+this.Ve()},e.prototype.Ve=function(){return h(this.me,this.ne)},e.prototype.Fh=function(){return this.Gh().map(function(t){return t.Ve()}).sort().join(",")},e.prototype.Xd=function(){return this.color===u},e.prototype.Hh=function(){return 2===this.Ze.length},e.prototype.Ih=function(){var t=this.zb,i=t.Nb-1;return t.Vd(1===this.me?2:i,1===this.ne?2:i)},e.prototype.Jh=function(){return this.Ze.length<=3},e.prototype.Kh=function(){var t=this.zb.Nb,i=this.me,n=this.ne;return Math.min(Math.min(i-1,t-i),Math.min(n-1,t-n))},e.prototype.Qd=function(t){for(var i=this.Ze.length-1;i>=0;i--){var n=this.Ze[i];if(n.color===u)return!1;if(n.color!==t){if(1===n.group.le)return!1}else if(n.group.le>1)return!1}return!0},e.prototype.Ud=function(t){for(var i=null,n=this.Ze.length-1;n>=0;n--){var e=this.Ze[n].group;if(e&&e.color===1-t&&1===e.le){if(i)return!1;i=e}}if(!i)return!1;if(1!==i.fe.length)return!1;var r=i.fe[0];if(this.zb.de()!==r)return!1;var o=this.zb.ce();if(!o||o.Re!==r||1!==o.fe.length)return!1;var s=o.fe[0];return s.me===this.me&&s.ne===this.ne},e.prototype.mf=function(){this.color=u,this.group=null},e.prototype.pf=function(t){this.group=t,this.color=t.color},e.prototype.ae=function(t){this.color=t;var i=this.ke(t);0===i.length?this.group=this.zb.Gd(this,this.Lh()):(this.group=i[0],this.group.bf(this));for(var n=this.ke(1-t),e=n.length-1;e>=0;e--)n[e].df(this);for(var r=1;r<i.length;r++)this.group.hf(i[r],this)},e.prototype._d=function(){this.group.lf(this),this.group.cf(this);for(var t=this.ke(1-this.color),i=t.length-1;i>=0;i--)t[i].gf(this);this.group=null,this.color=u,o.qf(this)},e.prototype.jf=function(t){this.group=t},e.prototype.ke=function(t){for(var i=[],n=this.Ze,e=n.length-1;e>=0;e--){var r=n[e];r.color===t&&i.indexOf(r.group)<0&&i.push(r.group)}return i},e.prototype.Gh=function(){for(var t=[],i=this.Ze,n=i.length-1;n>=0;n--){var e=i[n];e.color===u&&t.push(e)}return t},e.prototype.Lh=function(){for(var t=0,i=this.Ze,n=i.length-1;n>=0;n--)i[n].color===u&&t++;return t},e.prototype.Mh=function(t,i){for(var n=0,e=this.Ze,r=e.length-1;r>=0;r--)e[r].color===t&&(i&&i.push(e[r]),n++);return n},e.prototype.Nh=function(t){for(var i=this.Ze,n=i.length-1;n>=0;n--)if(i[n].group===t)return!0;return!1}},{"./Group":20,"./Move":23,"./constants":53}],30:[function(t,i,n){"use strict";function e(t){s.call(this,t)}var r=t("../../constants"),o=t("./DiamondZone"),s=t("./Heuristic"),h=t("util").inherits,u=t("../../log"),a=t("../../Move"),p=(t("../../test"),a.Oe),c=r.EMPTY,l=r.vd,f=r.Oh,d=r.Ph,g=r.Qh,v=r.Rh,y=r.Sh,m=r.Th,b=r.Uh,w=r.Vh,x=r.Wh,k=r.Xh,j=r.Yh,z=r.Zh;h(e,s),i.exports=e,e.prototype.$h=function(t,i,n){var e=this.zb.Vd(t,i);if(this._h[i][t]<0)return 0;var r,o=1-n;if(this.ai(e,n)&&this.ai(e,o)){var s=[];r=[],1!==this.bi(e,o,s,r)||r.length||this.di.ci(s,e,e,o)}var h=[];switch(r=[],this.bi(e,n,h,r)){case 0:return this.ei(e,n,h);case 1:this.di.ci(h,e,e,n);for(var u=r.length-1;u>=0;u--)this.di.ci(h,e,r[u],n);return 0;default:return 0}},e.prototype.bi=function(t,i,n,e){for(var r=1-i,s=0,h=0,u=0,a=!1,p=0;p<8;p++){var C=p%2,S=t.Ch[p];switch(S.color){case l:case c:continue;case i:var B=S.group;C?h++:(s++,1===B.le&&(a=!0)),n.indexOf(B)<0&&n.push(B);break;default:if(1===S.group.le)break;C||u++}}if(n.length<2)return-1;if(4===s)return a?1:0;var q=new o(t,i),M=q.fi;q.normalize();var D,G,A;if(t.Jh()){if(t.Hh())return 0;if(3===s)return a?1:0;if(2===s){if(a)return 1;if(M[d].color!==i){if(q.gi("2n","?.?o*o---"),!u)return 0}else{if(q.gi("2n","?o..*o---"),M[b].color===c)return 0;if(!u)return 0;if(M[v].group.le<=3)return 0}}else if(1===s){if(q.gi("1n","B.?.*A---"),!u)return 0;if(M[d].color===c){if(M[v].group.le<4)return 0;if(A=M[b],A.color===i)return 0;A.color===c&&(e.push(A),e.push(M[d]))}}else{if(q.gi("02","B.A.*.---"),!u)return 0;if(M[d].color===c)return 0;if(u>1)return-1;if(1===M[m].group.le||1===M[b].group.le)return-1}return 1}if(3===s){if(a)return 1;if(!u)return 0;if(q.gi("3n","?x?o*o?o?"),3===n.length)return 1;if(n.length,M[v].group===M[g].group){if(q.gi("3n","?x?A*B?A."),M[x].color===c)return 0}else if(M[w].color===c)return 0;return 1}if(2===s){if(M[y].group===M[g].group)return q.gi("2n","B.?.*A?A?"),u||M[w].color===r&&M[b].color===r?1:0;if(M[d].color===i){if(q.gi("2n","?B?.*.?A?"),4===h)return 0;if(3===h){if(q.gi("23",".BB.*.AAA"),!u)return 0;if(1===u){if(M[v].color===r)return 0;if(M[j].color!==r||M[j].group.le<3)return 0}}else if(2===h)if(M[b].color===i){if(q.gi("22",".BB.*..AA"),!u)return 0;if(1===u&&M[v].color===r)return 0}else if(M[m].color===i){if(q.gi("22","BB..*..AA"),u)return 1;if(M[w].color!==r||M[b].color!==r)return 0;e.push(M[v]),e.push(M[y]),M[w].color!==r&&e.push(M[w]),M[b].color!==r&&e.push(M[b])}else{if(q.gi("22",".B..*.AAA"),u)return 1;if(M[m].color!==r||M[b].color!==r)return 0;e.push(M[v]),e.push(M[y]),M[m].color!==r&&e.push(M[m]),M[b].color!==r&&e.push(M[b])}else{if(1!==h)return q.gi("20",".B..*..A."),u?1:M[v].Jh()||M[y].Jh()?0:M[z].Jh()&&(G=M[y],0===this.hi[r][G.ne][G.me])?0:M[j].Jh()&&(D=M[v],0===this.hi[r][D.ne][D.me])?0:(M[v].Mh(r)<3&&e.push(M[v]),M[y].Mh(r)<3&&e.push(M[y]),1);if(q.gi("21",".B..*..AA"),!u)return 0}}else if(q.gi("2n","?.?.*B?A."),3===h){if(q.gi("23","C.B.*BAA."),2===n.length)return 0;if(M[x].color===c){if(M[j].color!==r||M[k].color!==r)return 0;if(u<2)return 0}else e.push(M[d]),e.push(M[v])}else if(2===h)if(M[x].color===c){if(M[m].color!==i)return q.gi("22","..B.*BAA "),0;if(q.gi("22","o...*ooo "),0===u)return 0;if(2===n.length)return M[g].group!==M[y].group?0:M[v].color===c?-1:M[b].color===c?(e.push(M[d]),1):-1;M[v].color===c&&e.push(M[v])}else{if(M[x].color===i){if(q.gi("22","B...*A.AA"),2===u)return-1;var E=M[b].color===r,T=M[w].color===r;return 0===u?E||T?(e.push(M[d]),e.push(M[v]),1):0:(M[v].color!==c||T?M[d].color!==c||E||e.push(M[y]):e.push(M[v]),1)}if(M[m].color!==i){if(q.gi("22","..B.*BAAx"),2===u)return 1;if(0===u){if(M[m].color!==c)return 1;e.push(M[m]),e.push(M[d]),e.push(M[v])}return 1}if(q.gi("22","o...*ooox"),u)return 1;var N=M[j].color,P=M[k].color;if(M[y].group.le>2&&N!==r)return 0;M[b].color!==c||N===r&&P===r||e.push(M[b]),a||(e.push(M[d]),e.push(M[v]))}else if(1===h){if(M[m].color===i)return q.gi("21","C...*B.A."),u||(e.push(M[d]),e.push(M[v])),1;if(q.gi("21","....*BAA."),M[x].color===c)return 0;if(1===M[x].group.le)return 0;M[d].color===c&&e.push(M[d]),M[v].color===c&&e.push(M[v])}else{if(q.gi("20","....*B.A."),M[x].color===c)return 0;if(!u){if(1===M[f].Kh())return 0;e.push(M[d]),e.push(M[v])}}}else if(1===s)if(4===h){if(0===u)return 0}else if(3===h){if(M[m].color!==i){if(M[y].color===c)return 0}else if(M[y].color===c){if(M[z].color!==r)return 0;if(M[m].group===M[b].group)return 0
;0===u?(e.push(M[v]),e.push(M[d]),e.push(M[y])):1===u&&M[v].color===r&&(e.push(M[d]),e.push(M[y]))}}else if(2===h){if(M[m].color===c&&M[y].color===c)return 0}else q.gi("11","..B.*..A."),u||(e.push(M[y]),M[x].color===c&&(e.push(M[d]),e.push(M[v]),M[z].color!==r&&e.push(M[x])));else if(4===h){if(0===u&&n.length<4)return 0}else{if(3!==h)return M[w].color===i&&M[x].color===i?(q.gi("02","....*.B.A"),M[g].color===c?-1:M[g].group.le<=2?1:-1):(q.gi("02","B...*...A"),1);if(M[y].color===c&&M[x].group===M[w].group||M[g].color===c&&M[x].group===M[b].group)return 0}return 1},e.prototype.ei=function(t,i,n){if(i!==this.color)return 0;u.debug&&(p(i),n[0],n[1]);var e=this.ki.ji.ii(t);if(e.li(t)&&2===n.length){if(this.ki.mi)return.5;var r=this.di.ni(n[0].Se);return r>0&&r<1?.5:0}return e.color!==i?0:this.ki.mi?-.5:-1},e.prototype.oi=function(t,i){return[this.zb.Vd(t.me,i.ne),this.zb.Vd(i.me,t.ne)]},e.prototype.pi=function(t,i,n){var e=Math.abs(i.me-t.me),r=Math.abs(i.ne-t.ne);if(e+r===1)return 0;var o,s=1-n,h=0;if(1===e&&1===r){var u=this.oi(t,i),a=u[0],p=u[1];if(a.color===n||p.color===n)return 0;if(a.color===s&&h++,p.color===s&&h++,0===h)return 0;if(2===h)return 99;var c=a.color===s?0:1,l=u[c],f=u[1-c];return t.Jh()||i.Jh()?1===f.Kh()?l.group.le>2?1:0:0!==f.Mh(s)?1:0:1===f.Kh()?0!==f.Mh(s)?1:0:1}if(e+r===2){if(o=this.zb.Vd((t.me+i.me)/2,(t.ne+i.ne)/2),o.color===n)return 0;if(o.color===s)return o.group.le;for(var d=o.Ze.length-1;d>=0;d--)o.Ze[d].color===s&&h++;return h>=1?1:t.Jh()&&i.Jh()?0:.5}if(e+r===3&&t.Jh()&&i.Jh()){for(var g=this.qi(t,i),v=0,y=g.length-1;y>=0;y--)o=g[y],o.color===s&&(v+=o.group.le),0!==o.Mh(s)&&(v+=1);return v}return e+r},e.prototype.ai=function(t,i){for(var n=[],e=t.Ze.length-1;e>=0;e--){var r=t.Ze[e];switch(r.color){case c:n.push(r);break;case i:if(r.group.le>1)return r;break;default:if(1===r.group.le)return r.group.$e()[0].fe[0]}}for(var o=2,s=n.length-1;s>=0;s--)for(var h=n[s],u=h.Ze.length-1;u>=0;u--){var a=h.Ze[u];if(a!==t&&(a.color===i&&0!==this.di.ni(a.group.Se))){var p=this.pi(t,a,i);if(!(p>=2)&&(o-=2-p)<=.5)return a}}return null}},{"../../Move":23,"../../constants":53,"../../log":81,"../../test":86,"./DiamondZone":31,"./Heuristic":34,"util":4}],31:[function(t,i,n){"use strict";function e(t,i){this.color=i,this.fi=new Array(13);var n=t.me,e=t.ne,r=t.zb.xd,o=t.zb.Nb,s=this.fi,h=u.vd;s[c]=t,s[l]=r[e+1][n],s[v]=r[e+1][n-1],s[y]=r[e+1][n+1],s[f]=r[e-1][n],s[m]=r[e-1][n-1],s[b]=r[e-1][n+1],s[d]=r[e][n-1],s[g]=r[e][n+1],s[k]=n>2?r[e][n-2]:h,s[j]=n<o-1?r[e][n+2]:h,s[x]=e>2?r[e-2][n]:h,s[w]=e<o-1?r[e+2][n]:h}function r(t){return t===a?C:z[t+1]}function o(t,i){for(var n="",e=0;e<i.length;e++){var o=i[e];n+="string"==typeof o?o:r(t[o].color)}return n}var s=t("../../constants"),h=t("../../Grid"),u=t("../../Stone"),a=s.vd,p=s.EMPTY,c=s.Oh,l=s.Ph,f=s.Qh,d=s.Rh,g=s.Sh,v=s.Th,y=s.Uh,m=s.Vh,b=s.Wh,w=s.Xh,x=s.ri,k=s.Yh,j=s.Zh;i.exports=e;var z=h.re+h.te,C="|";e.prototype.toString=function(){var t=this.fi;return o(t,[" "," ",w," "," "])+"\n"+o(t,[" ",v,l,y," "])+"\n"+o(t,[k,d,"*",g,j])+"\n"+o(t,[" ",m,f,b," "])+"\n"+o(t,[" "," ",x," "," "])+"\n"},e.prototype.si=function(){var t,i=this.fi;t=i[l],i[l]=i[f],i[f]=t,t=i[w],i[w]=i[x],i[x]=t,t=i[v],i[v]=i[m],i[m]=t,t=i[y],i[y]=i[b],i[b]=t},e.prototype.ti=function(){var t,i=this.fi;t=i[d],i[d]=i[g],i[g]=t,t=i[k],i[k]=i[j],i[j]=t,t=i[v],i[v]=i[y],i[y]=t,t=i[m],i[m]=i[b],i[b]=t},e.prototype.ui=function(){var t,i=this.fi;t=i[d],i[d]=i[f],i[f]=i[g],i[g]=i[l],i[l]=t,t=i[k],i[k]=i[x],i[x]=i[j],i[j]=i[w],i[w]=t,t=i[v],i[v]=i[m],i[m]=i[b],i[b]=i[y],i[y]=t},e.prototype.vi=function(){var t,i=this.fi;t=i[d],i[d]=i[l],i[l]=i[g],i[g]=i[f],i[f]=t,t=i[k],i[k]=i[w],i[w]=i[j],i[j]=i[x],i[x]=t,t=i[v],i[v]=i[y],i[y]=i[b],i[b]=i[m],i[m]=t},e.prototype.normalize=function(){var t,i=this.color,n=this.fi;if(n[c].Jh()){n[l].color===a?this.si():n[d].color===a?this.vi():n[g].color===a&&this.ui();var e=n[d].color===i,r=n[g].color===i;return void(e&&!r?this.ti():e===r&&n[v].color===i&&n[y].color!==i&&this.ti())}var o=!1,s=!0,h=!0,u=n[l].color===i?1:0,p=n[f].color===i?1:0,w=n[d].color===i?1:0,x=n[g].color===i?1:0;u>p?(this.si(),w>x&&this.ti(),w!==x&&(o=!0)):u<p?(w>x&&this.ti(),w!==x&&(o=!0)):p?w>x?this.vi():x>w?this.ui():(s=!1,w&&(h=!1)):w>x?this.vi():x>w?this.ui():(w?this.vi():h=!1,s=!1);var k=n[y].color===i?1:0,j=n[m].color===i?1:0;if(s&&o)n[l].color!==i&&n[d].color!==i&&k&&!j&&(this.ui(),this.ti());else{var z=n[v].color===i?1:0,C=n[b].color===i?1:0;s||(z+k>j+C?(this.si(),t=z,z=j,j=t,t=k,k=C,C=t):o||(o=!0,!h&&z<k&&j<C?this.ui():!h&&z>k&&j>C?this.vi():o=!1)),!o&&(j>C||j===C&&z>k)&&this.ti()}};var S=[v,l,y,d,c,g,m,f,b],B=["TL","TOP","TR","LEFT","CENTER","RIGHT","BL","BOTTOM","BR"];e.prototype.gi=function(t,i){for(var n=this.fi,e=this.color,r=1-e,o={},s=0,h=0,u=0;u<S.length;u++){var c=n[S[u]],l=i[u],f=c.color;switch(f===e&&(u%2?s++:h++),l){case"o":if(f===e)continue;break;case"A":case"B":case"C":case"D":if(f!==e)break;var d=o[l];if(d){if(d!==c.group)break}else o[l]=c.group;continue;case"*":case" ":if(f===p)continue;break;case".":if(f!==e)continue;break;case"x":if(f===r)continue;break;case"?":continue;case"-":if(f===a)continue}return l+"!="+f+" in "+B[u]+"\n"+this}var g=parseInt(t[0]),v=parseInt(t[1]);return s!==g?"numDirects="+s:!(!isNaN(v)&&h!==v)||"numDiags="+h}},{"../../Grid":19,"../../Stone":29,"../../constants":53}],32:[function(t,i,n){"use strict";function e(t){r.call(this,t)}var r=t("./Heuristic");(0,t("util").inherits)(e,r),i.exports=e,e.prototype.wi=function(){this.ki.ji.xi()}},{"./Heuristic":34,"util":4}],33:[function(t,i,n){"use strict";function e(t){s.call(this,t),this.grid=new o(this.Nb,u),this.yi=t.Ai.zi}var r=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,u=r.vd;h(e,s),i.exports=e,e.prototype.wi=function(){var t=this.zb;this.ki.ji.Bi(t,this.grid),this.Ci()},e.prototype.Ci=function(){var t=this.ki.ji.Di;for(var i in t)for(var n=~~i,e=t[n],r=e.group.color,o=e.Ei.length-1;o>=0;o--){var s=e.Ei[o];s.li&&this.yi.Fi(s.Gi,r)}}},{"../../Grid":19,"../../constants":53,"./Heuristic":34,"util":4}],34:[function(t,i,n){"use strict";function e(t){this.ki=t,this.Ji(),this.zb=t.zb,this.Nb=t.zb.Nb,this.Ki=new o(this.Nb,0,u),this.Li=t.Li,this.color=this.Mi=null,this.Ni()}var r=t("../../constants"),o=t("../../Grid"),s=t("../../log"),h=t("../../helper"),u=r.vd,a=r.Hi,p=r.Ii;i.exports=e,e.prototype.Ji=function(){var t=this.constructor;this.name=t.name||h.Oi(t),this.name.length<5&&(this.name+=this.ki.Pi.length)},e.prototype.Ni=function(){var t=this.ki.Ai;this.Qi=t.Ri,this.di=t.zi,this._h=t.Si?t.Si.Ki.yd:null,this.Ti=t.Ui,this.Vi=t.Wi,this.hi=t.Xi?t.Xi.hi:null},e.prototype.Yi=function(t){this.color=t,this.Mi=1-t},e.prototype.wi=function(t,i){for(var n=s.level,e=this.ki.color,r=this.Ki.yd,o=1;o<=this.Nb;o++)for(var h=1;h<=this.Nb;h++){var u=t[o][h];if(!(u<a)){u===p&&this.name===this.ki.Zi&&s.$i(s._i);var c=r[o][h]=this.$h(h,o,e);i[o][h]+=c,u===p&&s.$i(n)}}},e.prototype.aj=function(t,i,n){var e=this.Ki.yd[i][t];e&&(n[this.name]=e)},e.prototype.bj=function(t,i,n,e){return this.ki.cj.get(this.name+"-"+t,i,n,e)}},{"../../Grid":19,"../../constants":53,"../../helper":54,"../../log":81}],35:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.dj=null}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),u=t("../../Move"),a=(t("../../test"),u.Oe),p=u.ub,c=r.EMPTY;s(e,o),i.exports=e,e.prototype.ej=function(t,i){for(var n=t.$e(),e=n.length-1;e>=0;e--){var r=n[e];if(!(r.le>1)){var o=r.fe.length;if(o>=i)return!0;for(var s=r.$e(),h=s.length-1;h>=0;h--)if((o+=s[h].le-1)>=i)return!0}}return!1},e.prototype.fj=function(t,i){for(var n=0,e=0,r=0,o=t.Ze.length-1;o>=0;o--){var s=t.Ze[o];switch(s.color){case c:r++;break;case i:r+=s.group.le-1,n++;break;default:1===s.group.le&&(e+=s.group.fe.length)}}switch(e){case 0:return!(r<=1);case 1:return!!r||!n;default:return!0}},e.prototype.gj=function(t,i,n,e){for(var r=!1,o=!1,s=1-i[0].color,h=i.length-1;h>=0;h--){var u=i[h];1===u.le&&(o=!0,(!n||1===n&&e)&&this.di.hj(t,s),n||(!this.ij(u,n)||this.ej(u,1)?this.di.jj(u,t):this.ki.mi&&(r=!0)))}return r&&this.di.kj(t),o},e.prototype.lj=function(t,i,n){if(!i.Nh(n))return!1;for(var e=i.ke(n.color),r=e.length-1;r>=0;r--){var o=e[r];if(o.le>2)return!1;if(!t.Nh(o))return!1}return!0},e.prototype.mj=function(t,i,n,e,r,o){for(var s,u=!1,p=t.ke(e),c=i.length-1;c>=0;c--)if(s=i[c],2===s.le&&!this.ej(s,2)&&(0!==n.length||1!==p.length||2!==p[0].le)){if(1===n.length&&0===p.length){if(!this.lj(t,n[0],s))continue;u=!0,h.debug&&a(e)}r||!s.Se.nj()?o.push(s):h.debug&&a(e)}return u},e.prototype.oj=function(t,i,n){return!(!n||i.le!==n.le)&&(!!n.We()&&!(t.Nh(n)&&n.af(t)<1))},e.prototype.pj=function(t,i,n,e){for(var r=!1,o=i.length-1;o>=0;o--){var s=i[o],h=s.le;h>2&&this.oj(t,s,null)?(n||this.di.qj(s,t),r=!0):h>=2&&0===n&&!e&&(n||this.di.rj(s,t))}return r},e.prototype.sj=function(){this.dj=[]},e.prototype.$h=function(t,i,n){return this.tj(t,i,n,0),0},e.prototype.tj=function(t,i,n,e,r){var o=this.zb.Vd(t,i),s=o.ke(1-n);if(!s.length)return!1;var u=o.Gh(),c=this.gj(o,s,e,r),l=[],f=this.mj(o,s,u,n,e,l),d=!1;if(0===e&&(f&&!c?(this.dj.push(o),this._h[i][t]+=2,this._h[i][t]):this._h[i][t]<-2&&(d=!0,this._h[i][t]-=1e3,h.debug)),!f&&u.length<=1&&!this.fj(o,n))return!1;var g=this.pj(o,s,e,d);if(!l.length)return c||g;this.zb.$d(t,i,n);for(var v=[!1,!1,!1],y=l.length-1;y>=0;y--)if(h.debug&&(a(n),l[y]),!this.ij(l[y],e)){if(1===l.length){l.pop();break}v[y]=!0}this.zb.be();var m=this.uj(o,l,v,e);return h.debug&&(c||g||m)&&(a(n),p(t,i)),c||g||m},e.prototype.uj=function(t,i,n,e){switch(i.length){case 0:return!1;case 1:return!n[0]&&(e||this.di.jj(i[0],t),!0);case 3:case 2:return e||(n[1]?this.di.jj(i[0],t):this.di.jj(i[1],t)),!0;default:throw new Error("Unexpected in Hunter#getMultipleChaseThreat")}},e.prototype.ij=function(t,i){var n=t.Ye();if(1!==n.length)throw new Error("Unexpected: hunter #1: "+n.length);var e=n[0],r=t.color,o=!0;return this.fj(e,r)&&(this.zb.$d(e.me,e.ne,r),o=this.vj(e,i),this.zb.be()),h.debug,o},e.prototype.wj=function(t){for(var i=1-t.color,n=t.Ze,e=n.length-1;e>=0;e--){var r=n[e];if(r.color===i){var o=r.group;if(1===o.le){return o.Ye()[0].Nh(t.group)?this.ij(o,1)?1:-1:1}}}return 0},e.prototype.vj=function(t,i){var n=t.group;if(n.le<=1)return!0;if(n.le>2)return!1;var e=this.wj(t);if(0!==e)return e<0;var r=t.Gh();if(2!==r.length&&(r=n.Ye()),2!==r.length)throw new Error("Unexpected: hunter #2");var o=r[0],s=r[1];h.debug;var u=1-n.color;return this.tj(o.me,o.ne,u,i+1)||this.tj(s.me,s.ne,u,i+1)},e.prototype.xj=function(t){return this.vj(t,1)},e.prototype.yj=function(t,i,n){return this.tj(t,i,n,1,n===this.Mi)}},{"../../Move":23,"../../constants":53,"../../log":81,"../../test":86,"./Heuristic":34,"util":4}],36:[function(t,i,n){"use strict";function e(t){s.call(this,t),this.zj=[new o(this.Nb,u),new o(this.Nb,u)],this.hi=[this.zj[p].yd,this.zj[c].yd]}var r=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,u=r.vd,a=r.EMPTY,p=r.vb,c=r.wb;h(e,s),i.exports=e,e.prototype.wi=function(){this.zj[p].init(0),this.zj[c].init(0);for(var t=1;t<=this.Nb;t++)for(var i=1;i<=this.Nb;i++){var n=this.zb.Vd(i,t),e=n.color;if(e!==a)for(var r,o=this.hi[e],s=n.Ze,h=0;r=s[h],h<s.length;h++)if(o[r.ne][r.me]+=2,r.color===a)for(var u,l=r.Ze,f=0;u=l[f],f<l.length;f++)u!==n&&(o[u.ne][u.me]+=1)}}},{"../../Grid":19,"../../constants":53,"./Heuristic":34,"util":4}],37:[function(t,i,n){"use strict";function e(t){u.call(this,t),this.debug=!1,this.grid=new s(this.Nb,null),this.Aj=[],this.Bj="",this.Cj=this.bj("spaceInvasion",2,.01,4),this.Dj=this.bj("pressure",1,.01,2)}function r(){this.Hj=null,this.Ij=[!1,!1],this.Jj=0,this.Kj=[],this.Lj=[],this.Mj=[]}function o(t,i,n){this.name=t,this.Jj=i,this.group=n,this.Qj=1/0}var s=t("../../Grid"),h=t("./boan/GroupInfo"),u=t("./Heuristic"),a=t("util").inherits,p=t("../../log"),c=t("../../Move"),l=(t("../../test"),c.Oe);a(e,u),i.exports=e,e.prototype.wi=function(){this.debug=this.ki.Ej,this.grid.init(null),this.Aj.length=0},e.prototype.Fj=function(t,i){u.prototype.wi.call(this,t,i)},e.prototype.$h=function(t,i){var n=this.grid.yd[i][t];return n?n.Gj():0},e.prototype.aj=function(t,i,n){var e=this.grid.yd[i][t];e&&e.Gj(n,this.name)},r.prototype.Gj=function(t,i){var n=this.Jj;t&&n&&(t[i+"-base"]=n);var e=this.Kj;if(!e.length)return n;for(var r=e.length-1;r>=0;r--){var o=e[r],s=o.Jj*this.Lj[r];if(n+=s,t){var h=this.Lj[r];t[i+"-"+o+(1!==h?" factor:"+h.toFixed(2):"")]=s}}return n},e.prototype.Nj=function(t,i){return this.grid.yd[i][t]},e.prototype.Oj=function(t,i){var n=this.grid.yd[i][t];return n||(this.grid.yd[i][t]=n=new r,n)},e.prototype.Fi=function(t,i){p.debug&&l(i),this.Oj(t.me,t.ne).Hj=i},e.prototype.Pj=function(t,i){var n=this.Nj(t.me,t.ne);return n&&n.Hj===i},e.prototype.hj=function(t,i){this.Oj(t.me,t.ne).Ij[i]=!0},e.prototype.Ij=function(t,i){var n=this.Nj(t.me,t.ne);return n&&n.Ij[i]},o.prototype.toString=function(){return this.name+(this.Qj!==1/0?" minMoves:"+this.Qj:"")+" score:"+this.Jj.toFixed(2)},e.prototype.Rj=function(t,i,n){this.Bj=t+" on "+i.toString(1),n.me===this.ki.Sj&&n.ne===this.ki.Tj?(p.$i(p._i),this.Bj):p.level===p._i&&p.$i(p.Uj)},e.prototype.Vj=function(t){var i=this.Aj[t.Jd];if(i)return i;for(var n=2*t.fe.length,e=t.Ye(),r=0,s=e.length-1;s>=0;s--)r+=e[s].Lh();return n+=this.Cj*Math.max(0,r-1),this.Aj[t.Jd]=i=new o("life/death of "+t.toString(1),n,t),i},e.prototype.Wj=function(t,i,n,e){if(!i)throw new Error("Unexpected");n=n||1,e=e||1,p.debug&&n&&n.toFixed(2);var r=this.Oj(i.me,i.ne),o=r.Kj,s=r.Lj,h=r.Mj,u=o.indexOf(t);return u<0?(o.push(t),s.push(n),h.push(e)):(s[u]=Math.max(s[u],n),h[u]=Math.min(h[u],e)),t.Qj=Math.min(t.Qj,e),t},e.prototype.ni=function(t){var i=t.ni;if(void 0!==i)return i;var n,e=t.Xj;n=e?e.Yj:[t];var r=this.Ti.Zj(n);return i=t.ni=this.$j(r,t.group.color===this.ki.Eb)},e.prototype.$j=function(t,i){return t>=2?1:t<1.5?0:i?1:.5},e.prototype._j=function(t,i,n,e,r,o){e=e||1;var s,u=t[0].group.color===this.ki.Eb,a=this.Ti.Zj(t),c=this.$j(a,u);if(o){s=c-this.$j(a+o,!0),s=Math.min(2*s,1)}else s=1-c;if(e*=s,p.debug&&h.ak(t),e<.1)return void(p.debug&&h.ak(t));for(var l=r||0,f=t.length-1;f>=0;f--)l+=t[f].group.le;for(f=t.length-1;f>=0;f--)this.bk(t[f].group,i,n,e,l)},e.prototype.bk=function(t,i,n,e,r){if(!(e<.1)){var o=this.Vj(t);return n||this.ck(t,i,e,r),this.Wj(o,i,e,r)}},e.prototype.ck=function(t,i,n,e){if(!(1===t.fe.length&&t.fe[0].Hh()||0===i.Lh()&&t.fe.length<3)){e=e||1;for(var r=t.$e(),o=r.length-1;o>=0;o--){var s=r[o];s.le===e&&(this.bk(s,i,!0,n,e),this.dk(s,i,n,e))}}},e.prototype.dk=function(t,i,n,e){for(var r=t.Se.ek(i),o=r.length-1;o>=0;o--)this._j(r[o],i,!0,n,e)},e.prototype.rj=function(t,i){var n=1/(t.le+1)*this.Dj;if(this.ni(t.Se)<.5){if(!this.ki.mi)return 0;n=this.Li}this.Oj(i.me,i.ne).Jj+=n,this.debug&&i.me===this.ki.Sj&&i.ne===this.ki.Tj&&p.nh("MoveInfo "+l(1-t.color)+" - pressure at "+i+": "+n.toFixed(2))},e.prototype.kj=function(t){this.Oj(t.me,t.ne).Jj+=this.Li},e.prototype.qj=function(t,i){this.debug&&this.Rj("race",t,i);var n=t.Se,e=n.Xj?n.Xj.Yj:[n];this._j(e,i,!1)},e.prototype.fk=function(t,i,n,e){this.debug&&this.Rj("eye threat",t,i);var r=t.Se,o=r.Xj?r.Xj.Yj:[r];return this._j(o,i,n===t.color,void 0,void 0,-e),!0},e.prototype.ci=function(t,i,n,e){var r=t[0];this.debug&&this.Rj("cut",r,i);for(var o=e===r.color,s=r.Se.gk(t,i),h=s.length-1;h>=0;h--)this._j(s[h],n,o,void 0,1)},e.prototype.jj=function(t,i){this.debug&&this.Rj("kill",t,i);for(var n=t.Se.ek(i),e=n.length-1;e>=0;e--)this._j(n[e],i,!1);this.bk(t,i,!1,1,t.le)},e.prototype.hk=function(t,i){this.debug&&this.Rj("rescue",t,i),this.dk(t,i),this.bk(t,i,!0)}},{"../../Grid":19,"../../Move":23,"../../log":81,"../../test":86,"./Heuristic":34,"./boan/GroupInfo":48,"util":4}],38:[function(t,i,n){"use strict";function e(t){r.call(this,t),this.ik=null}var r=t("./Heuristic"),o=t("util").inherits,s=t("../../log"),h=t("../../Move"),u=h.ub;o(e,r),i.exports=e,e.prototype.sj=function(){this.ik||(this.ik=this.ki.Ai.jk)},e.prototype.$h=function(t,i,n){if(this.hi[1-n][i][t]<2&&this.hi[n][i][t]<2&&0===this.zb.Vd(t,i).Mh(n))return 0;var e=this.zb.$d(t,i,n),r=e.group,o=0;return s.debug&&u(t,i),1===r.le?1===r.fe.length&&e.Gh()[0].Ud(this.Mi)?s.debug:(o-=2*r.fe.length,s.debug):2===r.le&&(s.debug,this.ik.xj(e)&&(o-=2*r.fe.length,s.debug)),this.zb.be(),o}},{"../../Move":23,"../../log":81,"./Heuristic":34,"util":4}],39:[function(t,i,n){"use strict";function e(t){s.call(this,t),this.pk=[new o(this.Nb,a),new o(this.Nb,a)],this.qk=this.bj("wideSpaceToEye",.7,.01,1),this.rk=this.bj("stoneCountToEye",.33,.25,1)}var r=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,u=t("../../log"),a=r.vd,p=r.kk,c=r.lk,l=r.EMPTY,f=r.vb,d=r.wb,g=r.mk,v=r.nk;h(e,s),i.exports=e,e.prototype.wi=function(){this.sk()},e.prototype.sk=function(){this.pk[g].init(l),this.pk[v].init(l);for(var t=this.Nb;t>=1;t--)for(var i=this.Nb;i>=1;i--){var n=this.zb.Vd(i,t);if(n.color===l){var e=this.tk(i,t,n);if(null!==e){var r=this.ki.ji.ii(n);if(!r.uk&&!this.di.Pj(n,e)){for(var o=n.Ze,s=null,h=this.hi[1-e],a=1,f=o.length-1;f>=0;f--){var d=o[f];d.color===e&&(s=d.group),1!==a||d.Jh()||0!==h[d.ne][d.me]||d.Lh()!==d.Ze.length||(a=2)}if(!s){if(!n.Hh())continue;if(!(s=n.Ih().group))continue}if(n.Jh()){for(var y=!1,m=1-e,b=c;b>=p;b-=2){var w=n.Ch[b];if(w.color===m){y=!0;break}}if(y)continue}var x=(i+t)%2,k=this.pk[x].yd;k[t][i]=e,s.Se.vk(x,a),u.debug}}}}},e.prototype.wk=function(t,i){var n=t.me,e=t.ne,r=(n+e)%2;return this.pk[r].yd[e][n]===i},e.prototype.tk=function(t,i,n){var e=this.hi[f][i][t],r=this.hi[d][i][t],o=e>r?f:d,s=Math.max(e,r),h=Math.min(e,r);if(h>1)return null;var u=0,a=this.Nb;return 1===h&&n.Hh()&&n.Ih().color===l&&u++,1!==t&&t!==a&&1!==i&&i!==a||u++,s+u-3-h<0?null:o},e.prototype.xk=function(t){for(var i=0,n=t.color,e=this.hi[1-n],r=this.hi[n],o=t.fe,s=o.length-1;s>=0;s--){var h=o[s];if(!h.Jh())for(var u=h.Ch.length-1;u>=0;u--){var a=h.Ch[u];if(a.color===l&&!(r[a.ne][a.me]>4)){var p=e[a.ne][a.me];if(!(p>1)){var c=a.Kh();if(0!==c)if(1!==c){var f=a.me-h.me,d=a.ne-h.ne,g=a.me+f,v=a.ne+d;0===e[v][g]&&i++}else{if(p>0)continue;i++}}}}}return i},e.prototype.Zj=function(t){for(var i=0,n=0,e=t.length-1;e>=0;e--){var r=t[e];i+=r.yk(),n+=r.group.fe.length}n<6&&(i=Math.min(i,n*this.rk));var o=0;for(e=t.length-1;e>=0;e--)o+=this.xk(t[e].group);return i+=o*this.qk}},{"../../Grid":19,"../../constants":53,"../../log":81,"./Heuristic":34,"util":4}],40:[function(t,i,n){"use strict";function e(t){h.call(this,t),this.Bk=new s(this.Nb,f),this.Ck=this.Bk.yd,this.Dk=new s(this.Nb,f),this.zj=[new s(this.Nb,f),new s(this.Nb,f)],this.Ek=new s(this.Nb,f),this.Fk()}function r(t,i,n){switch(t){case m:return[i,1];case b:return[1,i];case w:return[i,n];case x:return[n,i]}}var o=t("../../constants"),s=t("../../Grid"),h=t("./Heuristic"),u=t("util").inherits,a=t("../../log"),p=t("../../Move"),c=t("../../Stone"),l=p.Oe,f=o.vd,d=o.EMPTY,g=o.vb,v=o.wb,y=o.NEVER,m=o.zk,b=o.Sh,w=o.Ak,x=o.Rh,k=o.Ah,j=o.Bh,z=s.De,C=c.Dh,S=c.Eh;u(e,h),i.exports=e,e.prototype.wi=function(){this.Bk.Fe(this.zb),this.Gk(g),this.Gk(v),this.Hk()},e.prototype.Ik=function(t,i,n){var e=n===g?-1:1,r=y;return s.De[2+this.zj[g].yd[i][t]]===e&&r++,s.De[2+this.zj[v].yd[i][t]]===e&&r++,r},e.prototype.Jk=function(t,i,n){return this.Ek.yd[i][t]*(n===g?1:-1)},e.prototype.Kk=function(t,i,n){return s.De[2+this.zj[1-n].yd[i][t]]*(n===g?1:-1)},e.prototype.toString=function(){return"\nBLACK first:\n"+this.zj[g]+"WHITE first:\n"+this.zj[v]},e.prototype.Lk=function(){this.Bk.Fe(this.zb);var t=this.zj[g];this.Mk(this.Bk,t.J(this.Bk)),this.Nk(t.yd,v),this.Nk(t.yd,g);var i=this.ki.ji;return i.countScore(this.zb),[i.getScoringGrid().yd,i.getScoreInfo()]},e.prototype.Mk=function(t,i){for(var n=t.yd,e=i.yd,r=~~(2*Math.random()),o=this.Nb;o>=1;o--)for(var s=n[o],h=this.Nb;h>=1;h--)s[h]===d&&(this.Ok(n,e,h,o,r,1-r)?(this.Pk(e,h,o,r),r=1-r):this.Ok(n,e,h,o,1-r,r)&&this.Pk(e,h,o,1-r))},e.prototype.Qk=function(t){return this.zj[t].Ld(function(t){return"@?O"[s.De[2+t]+1]})},e.prototype.Rk=function(t){for(t=this.zb.Yd()-t;t-- >0;)this.zb.be()},e.prototype.Gk=function(t){var i=this.zb.Yd(),n=this.zj[t];this.Sk(n,t),this.ki.ji.Tk(this.zb,n,t),this.Rk(i)},e.prototype.Hk=function(){for(var t=this.zj[g].yd,i=this.zj[v].yd,n=this.Ek.yd,e=this.Nb;e>=1;e--)for(var r=this.Nb;r>=1;r--)n[e][r]=(z[2+t[e][r]]+z[2+i[e][r]])/2;a.debug&&this.Bk},e.prototype.Sk=function(t,i){this.Uk=null,this.Vk(this.Bk,t.J(this.Bk),i),a.debug,this.Nk(t.yd,i),a.debug,this.Wk(this.Dk.J(t)),this.Uk=this.Dk.yd,a.debug&&this.Dk,this.Vk(this.Bk,t.J(this.Bk),i),a.debug,this.Nk(t.yd,i),a.debug},e.prototype.Vk=function(t,i,n){a.debug&&l(n);for(var e=t.yd,r=i.yd,o=this.Nb;o>=1;o--)for(var s=e[o],h=this.Nb;h>=1;h--)s[h]===d&&this.Ok(e,r,h,o,n,1-n)&&this.Pk(r,h,o,n)},e.prototype.Wk=function(t){for(var i=t.yd,n=1;n<=this.Nb;n++)for(var e=1;e<=this.Nb;e++)if(this.Ck[n][e]===d){var r=i[n][e];if(r!==d){var o=this.Xk(i,e,n,1-r);0===o&&(i[n][e]=d)}}},e.prototype.Ok=function(t,i,n,e,r,o){switch(this.Xk(t,n,e,r)){case 0:if(!this.Yk(t,n,e,r))return!1;break;case 4:return!1;case 3:if(0===this.Xk(t,n,e,o))return!1}return!0},e.prototype.Pk=function(t,i,n,e,r){if(this.Uk){if(!r&&this.Uk[n][i]===d)return;if(this.zb.Vd(i,n).Qd(e))return;this.zb.$d(i,n,e)}t[n][i]=e},e.prototype.Xk=function(t,i,n,e){for(var r=0,o=k;o<=j;o++){var s=C[o];t[n+s[1]][i+s[0]]===e&&r++}return r},e.prototype.Yk=function(t,i,n,e){for(var r=k;r<=j;r++){var o=S[r];if(t[n+o[1]][i+o[0]]===e)return!0}return!1},e.prototype.Fk=function(){for(var t=[],i=k;i<=j;i++)for(var n=C[i][0],e=C[i][1],o=this.Nb-1;o>=2;o--){var s=r(i,o,this.Nb);t.push([s[0],s[1],n,e])}this.Zk=t},e.prototype.Nk=function(t,i){for(var n,e,r,o,s,h,u=this.Zk,a=u.length-1;a>=0;a--){var p=u[a],c=p[0],l=p[1];if(t[l][c]===d){var f=p[2],g=p[3],v=c+f,y=l+g,m=t[y][v];if(m===d){var b=v+f,w=y+g;if((m=t[w][b])===d){var x=b+f;if((m=t[w+g][x])===d);else{if(m!==i)continue;if(n=t[l-f][c-g],e=t[l+f][c+g],r=t[y-f][v-g],o=t[y+f][v+g],s=t[w-f][b-g],h=t[w+f][b+g],n===m&&r===m&&s===m)continue;if(e===m&&o===m&&h===m)continue;if(this.Pk(t,b,w,m,!0),n===m&&r===m)continue;if(e===m&&o===m)continue;if(this.Pk(t,v,y,m,!0),n===m||e===m)continue;this.Pk(t,c,l,m,!0)}}else{if(m!==i)continue;if(n=t[l-f][c-g],e=t[l+f][c+g],r=t[y-f][v-g],o=t[y+f][v+g],n!==1-m&&r===m)continue;if(e!==1-m&&o===m)continue;if(this.Pk(t,v,y,m,!0),n===m||e===m)continue;this.Pk(t,c,l,m,!0)}}else{if(m!==i)continue;if(n=t[l-f][c-g],e=t[l+f][c+g],r=t[y-f][v-g],o=t[y+f][v+g],n===m&&r!==1-m)continue;if(e===m&&o!==1-m)continue;this.Pk(t,c,l,m,!0)}}}}},{"../../Grid":19,"../../Move":23,"../../Stone":29,"../../constants":53,"../../log":81,"./Heuristic":34,"util":4}],41:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.$k=[],this._k=this.bj("allyInfl",.03,.01,1),this.al=this.bj("enemyInfl",.13,.01,1)}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),u=t("../../Move"),a=t("../../Stone"),p=u.Oe,c=u.ub,l=r.EMPTY,f=a.Dh,d=r.Ah,g=r.Bh;s(e,o),i.exports=e,e.prototype.wi=function(t,i){var n=this.$k;n.length=0,o.prototype.wi.call(this,t,i);for(var e=n.length-1;e>=0;e--)this.bl(n[e],i)},e.prototype.$h=function(t,i,n){return this.cl(t,i,1-n,!0),this.cl(t,i,n)},e.prototype.dl=function(t,i,n,e,r){if(!(this._h[t.ne][t.me]<0)){var o=1-n.group.color,s=this.Qi.ai(t,o);s&&(this.di.ni(s.group.Se)<.5||(h.debug&&(p(1-o),e.toFixed(2)),r[t.ne][t.me]+=e,this.Ki.yd[t.ne][t.me]+=e))}},e.prototype.bl=function(t,i){var n=t[0],e=t[1],r=t[2];if(this.dl(n,n,e,r,i),!this.di.Ij(n,e.color)){var o=e.group;if(!n.Nh(o))for(var s=0;s<8;s++){var h=n.Ch[s];h.color===l&&(h.Nh(o)&&this.dl(h,n,e,r,i))}}},e.prototype.cl=function(t,i,n,e){var r=this.hi[1-n][i][t];if(0===r)return 0;var o=this.hi[n][i][t];if(o>=4)return 0;if(!e&&this._h[i][t]<0)return 0;var s=this.zb.Vd(t,i);if(0===s.Lh())return 0;var u=this.Qi.ai(s,n);if(!u)return 0;if(!e&&!this.Qi.ai(s,1-n))return 0;var a=this.el(t,i,n),l=a+this.al*r-this._k*o;return l*=this.di.ni(u.group.Se),e?l?(h.debug&&(c(t,i),l.toFixed(2)),this.$k.push([s,u,l])):0:(h.debug&&(p(n),c(t,i),l.toFixed(2)),l)},e.prototype.fl=function(t,i,n,e,r){var o=this.zb.Vd(t,i);if(o.color!==l)return 0;var s=this.Vi.Kk(t,i,e);if(o.Jh()&&(s/=2),s<=0)return 0;if(0==--r)return s;var h=f[n][0],u=f[n][1],a=f[(n+3)%4],p=a[0],c=a[1];return s+=this.fl(t+h+p,i+u+c,n,e,r),s+=this.fl(t+h-p,i+u-c,n,e,r)};e.prototype.el=function(t,i,n){for(var e=Math.max(0,this.Vi.Kk(t,i,n)),r=d;r<=g;r++)e+=this.fl(t+f[r][0],i+f[r][1],r,n,1);var o=this.zb.Vd(t,i);return o.Hh()?e=Math.max(e-1,0):o.Jh()&&(e=Math.max(e-.85,0)),e}},{"../../Move":23,"../../Stone":29,"../../constants":53,"../../log":81,"./Heuristic":34,"util":4}],42:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.ik=null}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),u=t("../../Move"),a=u.Oe,p=r.EMPTY,c=r.vd;s(e,o),i.exports=e,e.prototype.sj=function(){this.ik||(this.ik=this.ki.Ai.jk)},e.prototype.$h=function(t,i){var n=this.zb.Vd(t,i);return this.gl(t,i,n),0},e.prototype.gl=function(t,i,n){for(var e,r,o=[],s=this.color,u=n.ke(s),p=0;r=u[p],p<u.length;p++)1===r.le?o.push(r):2===r.le&&o.push(r);if(o.length&&(h.debug&&(a(s),o[0],o.length>1&&o.length),this.ik.yj(t,i,this.Mi))){this.zb.$d(t,i,s),h.debug&&a(s);var c=!this.ik.xj(n);this.zb.be();var l;if(!c){for(e=o.length-1;e>=0;e--)if(r=o[e],1!==r.le){var f=r.Ye();if(l=f[0]===n?f[1]:f[0],this.zb.$d(l.me,l.ne,s),c=!this.ik.xj(l),this.zb.be(),c)break}if(!c)return void(h.debug&&a(this.color));n=l}for(e=o.length-1;e>=0;e--)r=o[e],l&&1===r.le||(this.di.hk(r,n),h.debug)}},e.prototype.hl=function(t,i,n){var e=0,r=0,o=this.Nb;if(1===i||i===o)r=1;else{if(1!==n&&n!==o)throw new Error("not along border");e=1}var s=r,h=e;if(this.zb.Vd(i+s,n+h).color===c&&(s=-s,h=-h),this.zb.Vd(i+s,n+h).group!==t){var u=t.color,a=this.zb.Vd(i+e,n+r);for(a.group===t&&(e=-e,r=-r);;)switch(i+=e,n+=r,a=this.zb.Vd(i,n),a.color){case c:return null;case u:return a.group.le>2?a.group:null;case p:var l=this.zb.Vd(i+s,n+h);if(l.color===p)continue;return l.color===1-u?null:l.group.le>2?l.group:null;default:return null}}}},{"../../Move":23,"../../constants":53,"../../log":81,"./Heuristic":34,"util":4}],43:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.pk=t.Ai.Ui.pk}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),u=t("../../Move"),a=u.Oe,p=r.EMPTY,c=r.NEVER,l=r.il,f=r.mk,d=r.nk;s(e,o),i.exports=e,e.prototype.wi=function(t,i){o.prototype.wi.call(this,t,i);var n=this.ki.ji.Di;for(var e in n){var r=n[~~e].group;this.jl(i,r)}},e.prototype.jl=function(t,i){var n=[];if(i.Se.kl(n)===l){var e=this.zb.Vd(n[0],n[1]);h.debug&&a(this.color),this.di.fk(i,e,this.color,.5)}},e.prototype.$h=function(t,i,n){var e=this.zb.Vd(t,i);return this.ll(e,n),this.ll(e,1-n),this.ml(e,n)},e.prototype.ll=function(t,i){if(this.Vi.Ik(t.me,t.ne,i)!==c){var n=this.ki.ji.ii(t);n.uk&&n.color===i?this.nl(t,i,n):this.ol(t,i)}},e.prototype.nl=function(t,i,n){switch(n.pl){case 1:for(var e=t.Ze.length-1;e>=0;e--){var r=t.Ze[e];if(r.color===i&&1===r.group.le)return h.debug&&a(i),this.di.fk(r.group,t,i,1)}return;case 2:var o=n.uk;if(this.di.Pj(t,i))return this.di.fk(o.group,t,i,1);if(o.ql>1)return;var s=o.rl.length&&o.rl[0].group;if(s&&t.Nh(s)&&(1===s.le||!t.Hh()))return this.di.fk(o.group,t,i,1);return;default:return}},e.prototype.ol=function(t,i){if(!(this._h[t.ne][t.me]<0)&&this.Qi.ai(t,1-i)){for(var n=this.pk[f].yd,e=this.pk[d].yd,r=this.hi[1-i],o=null,s=null,h=0,u=t.Ze.length-1;u>=0;u--){var a=t.Ze[u];switch(a.color){case p:var c=a.me,l=a.ne;if(n[l][c]===i||e[l][c]===i){if(1===r[l][c]&&2!==r[t.ne][t.me])continue;o=a,h++,o.Hh()&&2===o.Lh()&&h++}break;case i:s||(s=a.group)}}o&&(s||(s=o.ke(i)[0]),this.di.fk(s,t,i,h/2))}},e.prototype.ml=function(t,i){var n,e=t.Gh(),r=e.length,o=this.ki.ji.ii(t);if(o.uk&&o.color===i){if(0===r)return-1;if(1===r)return this.Ti.wk(e[0],i)?0:-1;if(1===this.di.ni(o.uk))return 0;var s=t.Mh(i);if(3===r&&1===s)return.5;for(n=r-1;n>=0;n--){var h=e[n];if(!this.di.Pj(h,i)&&1===h.Lh())return.5}}else{e=t.Gh();var u=!1;for(n=r-1;n>=0&&!u;n--)u=this.Ti.wk(e[n],i);if(!u)return 0;if(t.Hh())return-1;if(t.Jh())return-.2;if(r>=3&&!this.hi[1-i][t.ne][t.me])return 1}return 0}},{"../../Move":23,"../../constants":53,"../../log":81,"./Heuristic":34,"util":4}],44:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.sl=this.bj("enemyInfl",.07,.01,.5),this.tl=this.bj("allyInfl",.5,.01,.5),this.ul=this.bj("border",10,0,20),this.vl=this.Nb<=9?[0,.2,.8,.95,1]:[0,.2,.8,1,.95,.8]}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=r.EMPTY;s(e,o),i.exports=e,e.prototype.$h=function(t,i){var n=0;if(!this.ki.mi){var e=this.Vi.Jk(t,i,this.color);e<0&&(n+=e)}for(var r=this.zb.Vd(t,i),o=this.hi[this.Mi],s=this.hi[this.color],u=o[i][t],a=s[i][t],p=r.Ze.length-1;p>=0;p--){var c=r.Ze[p];if(c.color!==h)return n;u+=o[c.ne][c.me],a+=s[c.ne][c.me]}var l=1+this.Nb/9*(this.sl*Math.max(u-3,0)+this.tl*Math.max(a-3,0)),f=this.vl.length-1,d=Math.min(this.Kh(t),f),g=Math.min(this.Kh(i),f);return n+this.vl[d]*this.vl[g]*this.ul/l},e.prototype.Kh=function(t){return Math.min(t-1,this.Nb-t)}},{"../../constants":53,"./Heuristic":34,"util":4}],45:[function(t,i,n){"use strict";function e(t){this.wl=t.group.Jd,this.Yj=[t],t.Xj=this}function r(t){return"#"+t.group.Jd}var o=t("../../../log");i.exports=e,e.prototype.toString=function(){return this.Yj.map(r).toString()},e.prototype.xl=function(t){if(!t.Xj)return o.debug&&this.toString(),this.Yj.push(t),void(t.Xj=this);if(t.Xj.wl!==this.wl){o.debug&&(t.Xj.toString(),this.toString());for(var i=t.Xj.Yj,n=i.length-1;n>=0;n--)this.Yj.push(i[n]),i[n].Xj=this}},e.prototype.remove=function(t){var i=this.Yj.indexOf(t);if(i<0)throw new Error("Band.remove on wrong Band");this.Yj.splice(i,1),t.Xj=null,o.debug&&this.toString()},e.yl=function(t){if(1===t.length)throw new Error("add Band of 1");for(var i=null,n=0;n<t.length;n++)if(t[n].Se.Xj){i=t[n].Se.Xj;break}var r=0;for(i||(i=new e(t[r++].Se)),n=r;n<t.length;n++)i.xl(t[n].Se)}},{"../../../log":81}],46:[function(t,i,n){"use strict";function e(t){this.Cl=t,this.version="chuckie",this.mode=null,this.mi=!1,this.zb=null,this.Dl=null,this.Ki=null,this.El=[],this.Di=null,this.Fl=[0,0],this.Gl=[0,0],this.Hl=null}function r(t){return t>1&&t<2?t-1:t}function o(t){if(!(t[b]===t[w]||t[b]>=x&&t[w]>=x))return t[b]=r(t[b]),t[w]=r(t[w]),t[b]>t[w]?b:w}function s(t,i){for(var n=0;n<i.length;n++){var e=i[n];l.debug&&(t.name,e.group.Jd),e.bm()!==k&&(i[n]=null)}var r=0;for(n=0;n<i.length;n++)i[n]&&(i[n].cm(t.name+": liveliness="+i[n].dm.toFixed(4)),r++);return r}function h(t,i){for(var n=0;n<i.length;n++)i[n].cm(t.name);return i.length}function u(){return 0}var a=t("../../../constants"),p=t("../../../Grid"),c=t("./GroupInfo"),l=t("../../../log"),f=t("../../../Move"),d=t("./Void"),g=t("./ZoneFiller"),v=f.Oe,y=a.EMPTY,m=a.vd,b=a.vb,w=a.wb,x=c.zl,k=c.Al,j=c.Bl;i.exports=e,e.prototype.countScore=function(t){l.debug,this.Fl[b]=this.Fl[w]=0,this.Gl[b]=this.Gl[w]=0,this.Ki&&this.Ki.Nb===t.Nb||(this.Ki=new p(t.Nb,m)),this.Il(0,t,this.Ki)&&(this.Jl(),this.mi||t.ee(this.Gl))},e.prototype.getScoringGrid=function(){return this.Ki},e.prototype.getScoreInfo=function(){var t=this.Fl,i=this.Gl,n=this.Cl.Db;return[[t[b]+i[w],t[w]+i[b]+n],[[t[b],i[w],0],[t[w],i[b],n]]]},e.prototype.ii=function(t){return this.Dl.yd[t.ne][t.me]},e.prototype.Bi=function(t,i){this.Il(2,t,i)},e.prototype.xi=function(){this.Jl()},e.prototype.Tk=function(t,i,n){this.Il(1,t,i)&&this.Jl(n)},e.prototype.Kd=function(){return this.Dl.Kd()},e.prototype.Od=function(){for(var t,i="Grid:\n"+this.Dl.Pd()+"Voids:\n",n=this.El,e=0;t=n[e],e<n.length;e++)i+=t.toString()+"\n";i+="Groups:\n";for(var r in this.Di)i+=this.Di[~~r].toString()+"\n";return this.Fl&&(i+="Score:"+this.Fl.map(function(t,i){return" player "+i+": "+t+" points"})),i},e.prototype.Il=function(t,i,n){return this.mode=t,this.mi=this.Cl.useAreaScoring&&0===t,this.zb=i,this.Dl=n,this.Hl=new g(i,n),0!==i.Yd()&&(n.Fe(i),this.Kl(),this.Ll(),this.Ml(),!0)},
e.prototype.Jl=function(t){2===this.mode?this.Nl():(this.Ol(),this.Nl(t),this.Pl(),this.Ql())},e.prototype.Rl=function(t,i){var n=this.Di[t.Jd];n||(t.Se&&t.Se.ji===this?t.Se.Sl():t.Se=new c(t,this),n=this.Di[t.Jd]=t.Se),n.Tl.push(i)},e.prototype.Kl=function(){l.debug;var t=p.ye;this.Di={},this.El.length=0;for(var i,n,e=this.zb,r=new d(e,t++),o=1;o<=e.Nb;o++)for(var s=1;s<=e.Nb;s++){var h=this.Hl.Ul(s,o,y,r);if(0!==h){this.El.push(r);for(var u=b;u<=w;u++)for(n=r.Vl[u],i=n.length-1;i>=0;i--)this.Rl(n[i],r);r=new d(e,t++)}}},e.prototype.Ll=function(){for(var t in this.Di)this.Di[~~t].Wl()},e.prototype.Ml=function(){l.debug;for(var t=this.El,i=t.length,n=i-1;n>=0;n--)t[n].Xl();for(var e;;){for(e=!1,n=i-1;n>=0;n--)t[n].Yl()&&(e=!0);if(!e)break}for(n=i-1;n>=0;n--)t[n].Zl()},e.prototype.Ol=function(){if(!this.mi){var t=this.zb;if(!(t.Yd()<2*t.Nb))for(var i=[0,0],n=[0,0];;){for(var e=!1,r=this.El.length-1;r>=0;r--){var s=this.El[r];if(void 0===s.color&&!(s.pl>2*t.Nb)){i[b]=i[w]=n[b]=n[w]=0;for(var h=b;h<=w;h++)for(var u=s.Vl[h].length-1;u>=0;u--){var a=s.Vl[h][u].Se;i[h]+=a.$l(),n[h]+=a._l()}if(!(n[b]>4&&n[w]>4)){var p=o(i);void 0!==p?(l.debug&&(v(p),i[p].toFixed(4),i[1-p].toFixed(4)),s.am(p),e=!0):l.debug&&i[0]}}}if(!e)break}}};var z={name:"brothers",k:c.prototype.em},C={name:"singleEye",k:c.prototype.fm,gm:s},S={name:"race",k:c.prototype.bm,gm:u},B={name:"atari",k:c.prototype.hm},q={name:"final",k:c.prototype.im},M=[];M[0]=[z,B,C,S,q],M[1]=[z,C],M[2]=[z,C,S],e.prototype.jm=function(t,i){l.debug&&t.name;var n=0,e=0,r=[];for(var o in this.Di){var s=this.Di[~~o];if(!s.km&&!s.lm)switch(e++,t.k.call(s,i)){case k:r.push(s);break;case j:n++}}return r.length&&(n+=t.gm?t.gm(t,r):h(t,r)),l.debug&&n&&t.name,n===e?0:0===n?e:-n},e.prototype.Nl=function(t){if(!this.mi){for(var i,n=M[this.mode],e=0;e<n.length;){if(0===(i=this.jm(n[e++],t)))return void this.Ml();i<0&&(e=0,this.Ml())}l.debug}},e.prototype.Pl=function(){for(var t=[],i=this.El.length-1;i>=0;i--){var n=this.El[i];t[b]=t[w]=!1;for(var e=b;e<=w;e++)for(var r,o=n.Vl[e],s=0;r=o[s],s<o.length;s++)if(this.mi||r.Se.$l()>=2){t[e]=!0;break}t[b]&&t[w]?n.mm():this.mi&&(n.color=t[b]?b:w)}},e.prototype.Ql=function(){this.nm(),this.om(),this.pm()},e.prototype.nm=function(){if(this.mi)for(var t in this.Di){var i=this.Di[~~t].group;this.Fl[i.color]+=i.fe.length}},e.prototype.om=function(){if(!this.mi)for(var t in this.Di){var i=this.Di[~~t];if(i.lm){for(var n=!1,e=i.qm.length-1;e>=0;e--)if(!i.qm[e].Se.lm){n=!0;break}var r=i.group.color;if(!i.qm.length||n){var o=i.group.fe[0],s=this.Hl.Ul(o.me,o.ne,r,p.Be+r);this.Gl[r]+=s,this.Fl[1-r]+=s}else for(var h=i.Tl.length-1;h>=0;h--)i.Tl[h].am(r)}}},e.prototype.pm=function(){for(var t=this.Dl.yd,i=[],n=this.El.length-1;n>=0;n--){var e=this.El[n],r=e.rm(this.mi?null:i);if(r){this.Fl[e.color]+=r-i.length,this.Hl.Ul(e.me,e.ne,e,p.Ce+e.color);for(var o=i.length-1;o>=0;o--){var s=i[o];t[s.ne][s.me]=p.Ae}}else this.Hl.Ul(e.me,e.ne,e,p.Ae)}}},{"../../../Grid":19,"../../../Move":23,"../../../constants":53,"../../../log":81,"./GroupInfo":48,"./Void":49,"./ZoneFiller":50}],47:[function(t,i,n){"use strict";function e(t,i){this.Gi=t,this.Vl=[],this.color=i[0].color,this.li=!1,this.sm(i)}i.exports=e,e.prototype.sm=function(t){for(var i=this.Vl,n=t.length-1;n>=0;n--){var e=t[n];i.indexOf(e)<0&&i.push(e)}}},{}],48:[function(t,i,n){"use strict";function e(t,i){this.ji=i,this.tm=[],this.Tl=[],this.rl=[],this.qm=[],this.um=[0,0],this.Ei=[],this.vm=[],this.wm=[],this.group=t,this.Sl()}function r(t){return t>f?t>d?"ALWAYS":"SOMETIMES":"NEVER"}function o(t,i,n){for(var e=i.length-1;e>=0;e--)for(var r=i[e].Se,o=t.length-1;o>=0;o--)if(!(t[o].indexOf(r)<0)){n!==-1&&n!==o?(t[n]=t[n].concat(t[o]),t.splice(o,1),o<n&&n--):n=o;break}return n}function s(t,i,n,e){var r=-1;r=o(t,n,r),r=o(t,e,r),r<0?t.push([i]):t[r].push(i)}function h(t,i,n){switch(t){case 4:return 4===i[2];case 5:return 1===i[3]&&3===i[2];case 6:if(2===i[3]&&4===i[2]){for(var e=0,r=0;r<6;r++)if(!n[r].Jh()&&++e>2)return!1;return!0}return 1===i[4]&&3===i[2]&&2===i[1];default:return!1}}function u(t){return.0202===t||1.0202===t}var a=t("../../../constants"),p=t("./Band"),c=t("../../../log"),l=a.EMPTY,f=a.NEVER,d=a.il,g=a.ALWAYS,v=a.mk,y=a.nk;i.exports=e;var m=e.Al=-1,b=e.Bl=1,w=e.xm=0,x=e.zl=1e3;e.prototype.Sl=function(){this.ql=this.dm=0,this.tm.length=0,this.Tl.length=0,this.Xj=null,this.km=this.lm=!1,this.ni=void 0,this.ym=void 0,this.rl.length=0,this.qm.length=0,this.um[v]=this.um[y]=0,this.Ei.length=0,this.vm.length=0,this.wm.length=0,this.zm=0},e.Am=function(t){return"#"+t.group.Jd},e.prototype.toString=function(){var t=this.Xj?this.Xj.toString():"";return this.group.toString()+" (isAlive:"+this.km+" isDead:"+this.lm+" voids:"+this.tm.length+" brothers:["+t+"] deadEnemies:["+this.rl.map(e.Am)+"])"},e.prototype.Bm=function(t){return c.debug,this.tm.push(t),this.ql++,this},e.prototype.Cm=function(t){var i=this.tm.indexOf(t);if(i===-1)throw new Error("remove unknown void");c.debug,this.tm.splice(i,1),this.ql--},e.prototype.Wl=function(){for(var t=this.group,i=t.color,n=[],e=[],r=[],o=t.Ye(),s=o.length-1;s>=0;s--)for(var h=o[s],u=h.Ze,a=null,c=u.length-1;c>=0;c--){var l=u[c];if(l.color===i&&l.group!==t){a=l.group;var f=n.indexOf(a);f>=0?r[f]!==h&&(e[f]=!1):(n.push(a),e.push(!0),r.push(h))}}if(n.length){for(var d=n.length-1;d>=0;d--)if(e[d]){var g=r[d],v=this.ji.ii(g).Dm(g,[t,n[d]]);this.Ei.push(v),this.vm.push(n[d])}else this.wm.push(n[d]);n.push(t),p.yl(n)}},e.ak=function(t){return"subband["+t.length+" groups: "+t.map(function(t){return t.group.toString(1)}).join(", ")+"]"},e.prototype.Em=function(t){for(var i=[],n=this.vm.length-1;n>=0;n--)this.Ei[n].Gi!==t&&i.push(this.vm[n]);return i},e.prototype.gk=function(t,i){for(var n,e=[],r=t.length-1;r>=0;r--){var o=t[r].Se,h=o.Xj;if(h){if(h===n)continue;n=h;for(var u=h.Yj.length-1;u>=0;u--){var a=h.Yj[u];s(e,a,a.wm,a.Em(i))}}else e.push([o])}return e},e.prototype.ek=function(t){var i=this.Xj;if(!i)return[];for(var n=[],e=i.Yj.length-1;e>=0;e--){var r=i.Yj[e];r!==this&&s(n,r,r.wm,r.Em(t))}return n},e.prototype.Fm=function(){if(this.ql>=2)return f;var t=this.yk();return t>=3?f:0===t?g:d},e.prototype.Gm=function(){if(this.Fm()===f)return!1;if(this.wm.length)return!1;for(var t=this.group.color,i=0,n=0,e=this.Tl.length-1;e>=0;e--){var r=this.Tl[e];r.color===t&&0!==r.Hm&&(i++,r.Hm>=3&&n++,this.rl.length&&n++)}return!(i+n>=2)},e.prototype.cm=function(t){this.lm=!0;for(var i=this.Tl,n=this.group.color,e=1-n,r=null,o=i.length-1;o>=0;o--){var s=i[o],h=s.Vl[e],u=0;if(h.length){for(var a=h.length-1;a>=0;a--)u+=h[a].fe.length;s.pl>u||(s.am(e),r=s)}}if(!r)return void c.debug;for(var p=this.qm=this.group.$e(),l=p.length-1;l>=0;l--){var f=p[l];f.Se.rl.push(this);for(var d=l-1;d>=0;d--){var g=p[d],v=g.Se;if(v.vm.indexOf(f)===-1){v.vm.push(f);var y=r.Dm(r.Im[0],[f,g]);v.Ei.push(y)}}}c.debug},e.prototype.$l=function(t){if(this.km||this.ql>=2&&!this.lm)return x;for(var i,n=0,e=this.group.color,r=this.group.le,o=this.Tl.length-1;o>=0;o--){var s=this.Tl[o],h=s.pl;if(s.uk)s.uk===this&&(n+=h);else{var u=s.Vl[e];if(1===u.length)n+=h;else{var a=this.group.Jd,p=a;for(i=u.length-1;i>=0;i--)p=Math.min(u[i].Jd,p);a===p&&(n+=h)}}}if(n=Math.min(r,n)/100,t||(n+=r/1e4),this.lm)return 0+n;var l=0,f=0;if(!t&&this.Xj){var d=this.Xj.Yj;for(i=d.length-1;i>=0;i--)d[i]!==this&&(f+=d[i].$l(!0))}if(!t){var d=this.wm;for(i=d.length-1;i>=0;i--)l+=d[i].Se.$l(!0);for(d=this.vm,i=d.length-1;i>=0;i--)l+=d[i].Se.$l(!0)}return l!==f&&(c.debug,l=f),this.ql+l+n},e.prototype.kl=function(t){if(this.ql>1)return g;if(0===this.ql)return f;var i=this.tm[0],n=i.pl;if(n>6)return g;var e=this.group,r=e.color;if(n<3&&!i.Vl[1-r].length)return f;c.debug;for(var o,s=null,u=0,a=0,p=0,v=null,y=null,m=0,b=i.Im,w=!1,x=[0,0,0,0,0],k=0;k<n;k++){for(var j=b[k],z=0,C=0,S=0,B=j.Ze.length-1;B>=0;B--){var q=j.Ze[B];switch(q.color){case l:S++;break;case r:C++;break;default:if(1===q.group.le){S++,m+=2;break}z++,v?q.group!==v&&(y=q.group):v=q.group}}if(z){if(S+(C?1:0)<2)continue}else if(m++,o=j,x[S]++,S<2)continue;if(c.debug,p++,j.Hh()&&(w=!0),s&&!s.Hh()){if(z<a)continue;if(S+z<=u+a)continue}s=j,a=z,u=S}if(w&&p>1&&p--,c.debug,!s)return f;if(1===m&&!y&&v&&v.fe.length<3&&this.Jm(v,o,s))return f;if(p>=2){if(a)return g;if(!h(n,x,b))return g}return t[0]=s.me,t[1]=s.ne,d},e.prototype.Jm=function(t,i,n){for(var e=i.Ze.length-1;e>=0;e--){var r=i.Ze[e];if(r.color===l&&r!==n&&r.Nh(t))return!0}return!1},e.prototype.em=function(){if(!this.Xj)return w;for(var t=this.Xj.Yj,i=0,n=!1,e=t.length-1;e>=0;e--){var r=t[e];r!==this&&(n||r.km?n=r.km=!0:(i+=r.ql)>=2&&(n=r.km=!0))}return n?(c.debug,this.km=!0,b):w},e.prototype.Km=function(){if(this.Xj)return!1;if(this.group.fe.length>=6)return!1;for(var t=this.Tl.length-1;t>=0;t--)if(this.Tl[t].color===this.group.color)return!1;return!0},e.prototype.fm=function(t){if(this.ql>=2)return this.km=!0,c.debug,b;if(this.Km())return m;var i=[],n=this.kl(i);if(n===d){if(this.zm=.5,void 0===t)return w;t!==this.group.color&&(n=f)}return n===f?(this.zm=0,this.Xj||this.rl.length?w:this.Lm()>=1.5?w:(this.dm=this.$l(),m)):(this.km=!0,this.zm=1,c.debug&&r(n),b)},e.prototype.bm=function(){var t=this.group.$e();if(!t.length)return m;for(var i=this.dm||this.$l(),n=u(i)&&!this.vm.length&&!this.wm.length,e=null,r=n?this.group.Ye():null,o=0;o<t.length;o++){var s=t[o],h=s.Se,a=h.$l(),p=i-a;if(c.debug&&(this.group.Jd,i.toFixed(4),a.toFixed(4),s.Jd),p>0)return c.debug,this.ym=!1,w;if(0===p&&(c.debug&&this.group,n)){if(h.ym===!1||a!==i||s.fe.length<3)continue;for(var l=r.length-1;l>=0;l--){var f=r[l];if(!f.Nh(s)&&this.ji.ii(f).uk!==this){n=!1;break}}n&&(e=h)}}return n&&e?(this.ym=!0,w):m},e.prototype.hm=function(){return this.group.le>1?w:m},e.prototype.im=function(){var t=this.dm=this.$l();if(t>=2)return this.km=!0,c.debug,b;if(this.ym)return this.km=!0,c.debug,b;for(var i=this.vm.length-1;i>=0;i--)if(this.vm[i].Se.km)return this.km=!0,c.debug&&this.vm[i],b;return m},e.prototype.Mm=function(t,i){if(this.Xj){for(var n=this.Xj.Yj,e=0,r=n.length-1;r>=0;r--)e+=t.call(n[r],i);return e}return t.call(this,i)},e.prototype.vk=function(t,i){this.um[t]+=i},e.prototype.nj=function(){for(var t=1-this.group.color,i=this.Tl.length-1;i>=0;i--){if(this.Tl[i].color!==t)return!1}return!0},e.prototype.Nm=function(){for(var t=this.group.color,i=this.Tl.length-1;i>=0;i--){var n=this.Tl[i];if(void 0===n.color)for(var e=n.Vl[1-t],r=e.length-1;r>=0;r--){var o=e[r],s=o.Se._l();if(s<6)return 1}}return 0},e.prototype.yk=function(){return this.ql+this.zm+this.Nm()+(this.um[v]+this.um[y])/2},e.prototype.Lm=function(){return this.Mm(this.yk)},e.prototype.Om=function(){return this.group.fe.length},e.prototype._l=function(){return this.Mm(this.Om)}},{"../../../constants":53,"../../../log":81,"./Band":45}],49:[function(t,i,n){"use strict";function e(t,i){this.zb=t,this.code=i,this.me=this.ne=0,this.pl=0,this.Vl=null,this.Im=null,this.Pm=void 0,this.color=void 0,this.uk=void 0,this.Qm=!1,this.Rm=!1,this.Hm=-1,this.Ei=null,this.Sm=!1}function r(t){return t?g[t]:g[0]}function o(t){for(var i=t.length-1;i>=0;i--)if(!t[i].Se.lm)return!1;return!0}function s(t){return"#"+t.Jd}var h=t("../../../constants"),u=t("./FakeSpot"),a=t("../../../log"),p=t("../../../Move"),c=p.Oe,l=p.ub,f=h.vb,d=h.wb,g=["void","eye","fake","dame"];i.exports=e,e.prototype.Tm=function(t,i){return this.me=t,this.ne=i,this.Ei=[],this.Vl=[[],[]],this.Im=[],this.Vl},e.prototype.Um=function(t,i){this.pl++,this.Im.push(this.zb.Vd(t,i))},e.prototype.Dm=function(t,i){a.debug&&i.map(function(t){return t.Jd}),this.Rm=!0;var n=this.Im.indexOf(t),e=this.Ei[n];return e?e.sm(i):e=this.Ei[n]=new u(t,i),e},e.prototype.Xl=function(){var t=this.Vl[f],i=this.Vl[d],n=o(t),e=o(i);if(n&&e)return!this.Qm&&void 0!==this.color&&this.Vm();if(1===this.Pm)return!1;if(!n&&!e)return!1;var r=n?d:f;return this.Sm=!t.length||!i.length,this.Rm?this.Wm(r):(this.Hm=this.pl,this.Xm(r))},e.prototype.Wm=function(t){this.Pm=2,this.color=t,this.uk&&(this.uk.Cm(this),this.uk=null);for(var i=this.Ei.length-1;i>=0;i--){var n=this.Ei[i];n&&(n.li=!1)}return!0},e.prototype.Yl=function(){if(2!==this.Pm)return!1;var t=this.Hm,i=this.Hm=this.pl-this.Ym();return a.debug,i!==t},e.prototype.Ym=function(t){t||(t=[]);for(var i=this.Ei.length-1;i>=0;i--){var n=this.Ei[i];if(n&&n.color===this.color)for(var e=n.Vl,r=e.length-1;r>=0;r--)if(e[r].Se.Gm()){a.debug&&!n.li&&n.Gi,n.li=!0,t.push(n.Gi);break}}return t.length},e.prototype.li=function(t){for(var i=this.Ei.length-1;i>=0;i--){var n=this.Ei[i];if(n&&n.color===this.color&&n.Gi===t)return n.li}return!1},e.prototype.Zl=function(){if(2===this.Pm){if(0===this.Hm){if(this.uk)throw new Error("NEVER HAPPENS");return void a.debug}a.debug;var t=this.color;return this.color=this.Pm=void 0,this.Xm(t)}},e.prototype.Xm=function(t){return this.Sm?(this.Zm(t),!0):this.am(t)},e.prototype.$m=function(t){for(var i=this.Vl[t],n=i[0],e=0,r=i.length-1;r>=0;r--){var o=i[r],s=o.fe.length;o.le>1&&s>e&&(n=o,e=s)}this.uk=n.Se.Bm(this)},e.prototype.Zm=function(t){return a.debug&&c(t),this.Pm=1,this.color=t,this.$m(t),!0},e.prototype.am=function(t){if(t===this.color)return!1;a.debug&&c(t),this.uk&&(this.uk.Cm(this),this.uk=null),this.color=t;for(var i=this.Vl[1-t],n=i.length-1;n>=0;n--)for(var e=i[n].Se.Tl,r=e.length-1;r>=0;r--)if(e[r]!==this&&e[r].color===t)return!0;return this.$m(t),!0},e.prototype.mm=function(){a.debug,this.uk&&(this.uk.Cm(this),this.uk=null),this.Pm=3,this.color=void 0},e.prototype.Vm=function(){a.debug;var t=this.color;if(void 0===t)throw new Error("dead group's eye of undefined owner");this.Qm=!0,this.Rm=!1,this.uk&&(this.uk.Cm(this),this.uk=null),this.Pm=1,this.color=1-t;for(var i=this.Vl[t],n=i.length-1;n>=0;n--){var e=i[n].Se;if(e.qm.length)return this.uk=e.qm[0].Se.Bm(this),!0}return!0},e.prototype.rm=function(t){return void 0===this.color?0:(t&&(t.length=0,this.Rm&&this.Ym(t)),this.pl)},e.prototype._m=function(t){var i=t.group;return this.Vl[i.color].indexOf(i)>-1},e.prototype.toString=function(){return"{"+r(this.Pm)+"-"+l(this.me,this.ne)+" vcount:"+this.pl+" black:"+(this.Vl[f].map(s).toString()||"-")+" white:"+(this.Vl[d].map(s).toString()||"-")+"}"}},{"../../../Move":23,"../../../constants":53,"../../../log":81,"./FakeSpot":47}],50:[function(t,i,n){"use strict";function e(t,i){this.zb=t,this.yd=i.yd,this.Vl=null,this.an=null}var r=t("../../../constants"),o=r.vd;i.exports=e,e.prototype.Ul=function(t,i,n,e){if(this.yd[i][t]!==n)return 0;this.an=n;var r="number"!=typeof e?e:null;this.Vl=r&&r.Tm(t,i);for(var o,s,h,u=0,a=this.yd,p=[[t,i,i]];o=p.pop();)if(s=o[0],i=o[1],h=o[2],a[i][s]===n){for(;this.bn(s,i-1);)i--;for(;this.bn(s,h+1);)h++;u+=h-i+1;for(var c=s-1;c<=s+1;c+=2){for(var l=null,f=i;f<=h;f++)c<s&&(a[f][s]=e,r&&r.Um(s,f)),this.bn(c,f)?l||(l=f):l&&(p.push([c,l,f-1]),l=null);l&&p.push([c,l,h])}}return u},e.prototype.bn=function(t,i){var n=this.yd[i][t];if(n===o)return!1;if(n===this.an)return!0;if(!this.Vl)return!1;if("number"!=typeof n)return!1;var e=this.zb.Vd(t,i).group;if(!e)throw new Error("Unexpected: ZoneFiller replacing a group");var r=this.Vl[n];return r.indexOf(e)===-1&&r.push(e),!1}},{"../../../constants":53}],51:[function(t,i,n){"use strict";function e(t,i,n){this.name="Chuckie",this.Cl=t,this.ji=new o(t),this.dn(n),this.setColor(i)}function r(t,i){return i[1]-t[1]}var o=t("./boan/BoardAnalyser"),s=t("../../constants"),h=t("../../Genes"),u=t("../../Grid"),a=t("../../log"),p=t("../../Move"),c=t("../../test"),l=t("./boan/ZoneFiller"),f=t("./Connector"),d=t("./GroupAnalyser"),g=t("./GroupsAndVoids"),v=t("./Hunter"),y=t("./Influence"),m=t("./MoveInfo"),b=t("./NoEasyPrisoner"),w=t("./PotentialEyes"),x=t("./PotentialTerritory"),k=t("./Pusher"),j=t("./Savior"),z=t("./Shaper"),C=t("./Spacer"),S=p.tb,B=p.ub,q=s.vd,M=s.vb,D=s.Hi,G=s.cn,A=s.Ii;i.exports=e,e.en="Chuckie",e.fn="0.1",e.gn=o,e.hn=l,e.prototype.jn=function(t){var i=new t(this);return this.Pi.push(i),i},e.prototype.kn=function(){var t=this.Ai={};this.Pi=[],t.zi=this.jn(m),t.Wi=this.jn(x),t.ln=this.jn(g),t.Xi=this.jn(y),t.Ui=this.jn(w),t.mn=this.jn(d),t.Si=this.jn(b),t.nn=this.jn(j),t.jk=this.jn(v),t.Ri=this.jn(f),t.on=this.jn(C),t.pn=this.jn(k),t.qn=this.jn(z);for(var i=0;i<this.Pi.length;i++)this.Pi[i].Ni()},e.prototype.setColor=function(t){this.color=t;for(var i=0;i<this.Pi.length;i++)this.Pi[i].Yi(t)},e.prototype.dn=function(t){this.cj=t||this.cj||new h,this.Li=this.bj("smallerMove",.03,.01,.1),this.zb!==this.Cl.zb&&(this.zb=this.Cl.zb,this.Nb=this.zb.Nb,this.mi=this.Cl.useAreaScoring,this.rn=new u(this.Nb,q),this.Ki=new u(this.Nb,0,q),this.kn()),this.Eb=M,this.sn=this.tn=0,this.un=this.vn=this.wn=0,this.xn=!1,this.Sj=this.Tj=-1,this.Zi=null},e.prototype.yn=function(t){for(var i=0;i<this.Pi.length;i++){var n=this.Pi[i];if(n.name===t)return n}return null},e.prototype.bj=function(t,i,n,e){return void 0===n&&(n=null),void 0===e&&(e=null),this.cj.get(this.name+"-"+t,i,n,e)},e.prototype.zn=function(t,i,n){this.un=n,this.vn=t,this.wn=i,this.xn=1!==this.An},e.prototype.Bn=function(t,i,n){if(n>this.un)this.An=1,this.zn(t,i,n);else{if(this.An++,Math.random()*this.An>=1)return;this.zn(t,i,n)}},e.prototype.Cn=function(){this.sn++;var t=this.rn.yd,i=this.Ki.yd;this.Dn(),this.En(t,i),this.Fn(t,i);var n=this.Gn(t,i);return a.$i(this.Ej?a._i:a.Uj),n},e.prototype.Hn=function(t,i){i(this.Cn())},e.prototype.In=function(t,i){if(!i.startsWith("pass")){var n=S(i),e=n[0],r=n[1];if(!this.zb.hc(e,r,t))throw new Error("Invalid move: "+i);this.zb.Yb(e,r,t)}},e.prototype.Dn=function(){this.un=this.Li-.001,this.vn=-1,this.Eb=this.Cl.Eb,this.Ej=!!a.debug,a.$i(a.Uj)},e.prototype.En=function(t,i){for(var n=1;n<=this.Nb;n++)for(var e=1;e<=this.Nb;e++)this.zb.hc(e,n,this.color)?(t[n][e]=D,i[n][e]=0):t[n][e]=G;if(this.Sj!==-1){if(t[this.Tj][this.Sj]===G)throw new Error("Invalid test move: "+this.Sj+","+this.Tj);t[this.Tj][this.Sj]=A}},e.prototype.Fn=function(t,i){for(var n=0;n<this.Pi.length;n++){var e=this.Pi[n];a.$i(this.Ej&&this.Zi===e.name?a._i:a.Uj);var r=Date.now();e.sj&&e.sj(),e.wi(t,i);var o=Date.now()-r;o>=3&&!c.Jn&&a.Kn("Slowness: "+e.name+" took "+o+"ms")}this.Ai.zi.Fj(t,i)},e.prototype.Gn=function(t,i){for(var n=1;n<=this.Nb;n++)for(var e=1;e<=this.Nb;e++)t[n][e]<D||i[n][e]<this.un||this.Bn(e,n,i[n][e]);return this.un<this.Li?"pass":(this.xn&&this.tn++,B(this.vn,this.wn))},e.prototype.Ln=function(){return this.Ai.Wi.Lk()},e.prototype.Mn=function(){var t=this.Ai.Wi;return t.wi(),t.Ek.yd},e.prototype.Nn=function(t,i){this.Sj=t,this.Tj=i,this.Cn(),this.Sj=-1},e.prototype.On=function(t,i){for(var n={},e=0;e<this.Pi.length;e++)this.Pi[e].aj(t,i,n);return n},e.prototype.Pn=function(t,i){return this.Nn(t,i),this.Ki.yd[i][t]},e.prototype.Qn=function(t,i,n){return this.Nn(t,i),this.yn(n).Ki.yd[i][t]},e.prototype.Rn=function(t){this.Zi=t},e.prototype.Sn=function(t,i){var n=S(t);if(!n)return"";var e=n[0],o=n[1];if(i){if(!this.zb.hc(e,o,this.Cl.Eb))return"Invalid move: "+t;this.Nn(e,o)}var s=this.On(e,o),h=this.Ki.yd[o][e],u=[];for(var a in s)0!==s[a]&&u.push([a,s[a]]);u.sort(r);for(var p=t+" ("+h.toFixed(2)+")\n",c=0;c<u.length;c++)p+="- "+u[c][0]+": "+u[c][1].toFixed(2)+"\n";return p}},{"../../Genes":17,"../../Grid":19,"../../Move":23,"../../constants":53,"../../log":81,"../../test":86,"./Connector":30,"./GroupAnalyser":32,"./GroupsAndVoids":33,"./Hunter":35,"./Influence":36,"./MoveInfo":37,"./NoEasyPrisoner":38,"./PotentialEyes":39,"./PotentialTerritory":40,"./Pusher":41,"./Savior":42,"./Shaper":43,"./Spacer":44,"./boan/BoardAnalyser":46,"./boan/ZoneFiller":50}],52:[function(t,i,n){"use strict";function e(){this.Tn=null,this.Un=this.Vn=this.Wn=this.Xn=null}i.exports=new e,e.prototype.Yn=function(t){this.Tn={};for(var i=0;i<t.length;i++){var n=t[i];this.Tn[n.name]=n.Zn}var e=t.length-1;this.Un=this.Vn=t[e].Zn,this.Wn=e>=1?t[e-1].Zn:null,this.Xn=e>=2?t[e-2].Zn:null}},{}],53:[function(t,i,n){"use strict";function e(){this.mk=0,this.nk=1,this.vd=-99,this.EMPTY=-1,this.vb=0,this.wb=1,this.Hi=0,this.Ii=1,this.cn=-1,this.NEVER=0,this.il=1,this.ALWAYS=2,this.Ah=0,this.Bh=3,this.lk=7,this.kk=1,this.zk=this.Ph=0,this.Sh=1,this.Ak=this.Qh=2,this.Rh=3,this.Th=4,this.Uh=5,this.Vh=6,this.Wh=7,this.Xh=8,this.ri=9,this.Yh=10,this.Zh=11,this.Oh=12,this.xb="Japanese",this.$n="Chinese",this._n=0,this.ao=1}i.exports=new e},{}],54:[function(t,i,n){"use strict";function e(t){return"\n"!==t.slice(-1)?0:"\r\n"!==t.slice(-2)?1:2}n.Oi=function(t){return t.name||t.toString().split(/ |\(/,2)[1]},n.clone=function(t){if(null===t||void 0===t)return t;var i;if(t instanceof Array){i=[];for(var n=0,e=t.length;n<e;n++)i[n]=t[n]}else{if("object"!=typeof t)throw new Error("clone called on "+typeof t);if("function"==typeof t.clone)return t.clone();i={};for(var r in t){var o=t[r];"function"!=typeof o&&(i[r]=o)}}return i},String.prototype.pd=function(t){if(void 0===t)return this.substr(0,this.length-e(this));var i=this.length-t.length;return this.substr(i)===t?this.substr(0,i):this.toString()},String.prototype.Je=function(t){if(void 0===t)t=e(this)||1;else if("number"!=typeof t)throw new Error("Invalid parameter type for String.count: "+typeof t);return this.substr(0,this.length-t)},String.prototype.startsWith||(String.prototype.startsWith=function(t){return this.substr(0,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t){return this.substr(this.length-t.length)===t}),String.prototype.format=function(t){if("%"!==this[0])throw new Error("Invalid format: "+this.toString());var i,n=this.slice(1,-1),e=0,r=this.slice(-1);switch(r){case"d":case"x":var o=" ";"0"===n[e]&&(e++,o="0");var s=parseInt(n.substr(e));i=t.toString("x"===r?16:10);for(var h=s-i.length;h>0;h--)i=o+i;return i;case"f":var u="";if("+"===n[e]&&(e++,t>0&&(u="+")),"."!==n[e++])break;var a=parseInt(n.substr(e));return u+t.toFixed(a)}throw new Error("Unknown format: "+this.toString())},String.prototype.dh=function(t,i){return this>=t&&this<=i},n.bo=function(t,i){for(var n=new Array(t),e=t-1;e>=0;e--)n[e]=i;return n},n.qe=function(t,i,e){for(var r=new Array(t),o=r[0]=n.bo(i,e),s=t-1;s>=1;s--)r[s]=o.concat();return r},Array.new=function(t,i){if(void 0===t)return[];if(void 0===i)return new Array(t);var n,e=[];if("function"==typeof i)for(n=0;n<t;n++)e[n]=i(n);else for(n=0;n<t;n++)e[n]=i;return e},Array.prototype.co=function(t){for(var i=this.length,n=0;n<t.length;n++){var e=t[n];this.indexOf(e)===-1&&this.push(e)}return this.length-i}},{}],55:[function(require,module,exports){"use strict";function AssetLoader(){this.eo=!1,this.fo=null,this.ho={},this.qc=null,this.io=null}var CachedAsset=require("./CachedAsset"),contra=require("contra"),GetFile=require("./GetFile"),LocalPref=require("./LocalPref"),log=require("../log"),VERSION_SEPARATOR="-",MAX_CONCURRENT_LOAD=1;module.exports=AssetLoader,AssetLoader.prototype.jo=function(t,i,n,e){this.fo=t,this.ko=i,this.lo=n,this.qc=new LocalPref(i),this.qc.mo(),this.no();var r=n+"file_list.json",o=this;GetFile.oo(r,function(t,i){t?log.warn("Failed to load store list: "+r):o.io=JSON.parse(i),o.po(e)})},AssetLoader.prototype.qo=function(){this.qc.qo()},AssetLoader.prototype.po=function(t){var i=this;contra.ro(this.fo.preload,1,function(t,n,e){if(i.ho[n])return e();i.ho[n]=new CachedAsset(i,n,t).preload(e)},function(n){i.eo=!0,n&&log.error(n),t()})},AssetLoader.prototype.so=function(t,i){var n=this.fo.onDemand[t];if(!n)return log.error("unlisted onDemand asset: "+t);this.ho[t]=new CachedAsset(this,t,n).getData(i)},AssetLoader.prototype.to=function(t,i){this.ho[t]=new CachedAsset(this,t,"0.1").uo(i)},AssetLoader.prototype.vo=function(t,i){this.wo(i,this.xo.bind(this,t))},AssetLoader.prototype.yo=function(t,i){this.wo(t,i)},AssetLoader.prototype.zo=function(t){var i=this.ho[t];return i?i.Ao():log.error("unlisted preload asset: "+t)},AssetLoader.prototype.wo=function(t,i){var n=this.ho[t];if(!n)return i("unlisted asset: "+t);n.getData(i)},AssetLoader.prototype.xo=function(t,i,n){if(this.eo)return i?log.error(i):void(n.startsWith("file:")?t.Bo("backgroundImage",'url("'+n.substr(5)+'")'):t.Bo("backgroundImage",'url("data:image/png;base64,'+btoa(n)+'")'))},AssetLoader.prototype.no=function(){for(var t=this.qc.Co(),i=0;i<t.length;i++){var n=t[i];this.fo.preload[n]||this.fo.onDemand[n]||this.qc.Do(n)}},AssetLoader.prototype.Eo=function(t,i){if(!this.io)return{Fo:this.Go(t,i),version:i};var n=this.io[t];if(!n)return null;"string"==typeof n&&(n=[n]);for(var e=n.length-1;e>=0;e--){var r=n[e];if(this.Ho(r,i))return{Fo:this.Go(t,r),version:r}}return null},AssetLoader.prototype.Go=function(t,i){var n=t.lastIndexOf(".");n<0&&(n=t.length);var e=t.substr(0,n)+"-"+i+t.substr(n);return this.lo+e},AssetLoader.prototype.Ho=function(t,i){var n=t.split("."),e=i.split(".");return(void 0===e[0]||e[0]===n[0])&&((void 0===e[1]||e[1]<=n[1])&&(void 0===e[2]||e[2]<=n[2]))},AssetLoader.prototype.Io=function(t,i){this.qc.$c(t,i)},AssetLoader.prototype.Jo=function(t){return this.qc.ad(t,null)},AssetLoader.prototype.Ko=function(t){this.qc.$c(t,null)},AssetLoader.prototype.Og=function(scriptName){var script=this.zo(scriptName);if(!script)throw new Error("Script not found: "+scriptName);return"string"!=typeof script?script:eval("var module={exports:{}},exports=module.exports;"+script+"module.exports")}},{"../log":81,"./CachedAsset":56,"./GetFile":59,"./LocalPref":60,"contra":134}],56:[function(t,i,n){"use strict";function e(t,i,n){this.Lo=t,this.Mo=i,this.No=n,this.Oo=!1,this.Po=0,this.data=null,this.Qo=""}var r=t("./GetFile"),o=t("../log");i.exports=e,e.prototype.preload=function(t){return this.Oo=!0,this.Ro(t),this};e.prototype.So=function(){var t=this.Qo+"##"+this.data;this.Lo.Io(this.Mo,t)},e.prototype.To=function(){var t=this.Lo.Jo(this.Mo);if(!t)return!1;var i=t.substr(0,12),n=i.indexOf("##"),e=i.substr(0,n);return"!"!==this.No[0]&&this.Lo.Ho(e,this.No)?(this.data=t.substr(n+"##".length),this.Qo=e,!0):(this.Lo.Ko(this.Mo),!1)},e.prototype.getData=function(t){return this.data?t(null,this.data):this.Ro(t),this},e.prototype.Ao=function(){return this.data},e.prototype.uo=function(t){return this.data=t,this},e.prototype.Ro=function(t){if(this.To())return t(null,this.data);var i="!"!==this.No[0]?this.No:this.No.substr(1),n=this.Lo.Eo(this.Mo,i);if(!n)return t("No remote version for: "+this.Mo+", "+i);r.oo(n.Fo,this.Uo.bind(this,n.version,t))},e.prototype.Uo=function(t,i,n,e){var r=this.Oo;if(this.Oo=!1,n)return o.error("_onLoad: "+n),this.Po++,i(r?null:n);this.data=e,this.Qo=t,"!"!==this.No[0]&&this.So(),i(null,r?null:e)}},{"../log":81,"./GetFile":59}],57:[function(t,i,n){"use strict";function e(t){this.options=t,this.Vo=[],this.parent=document.body,this.Wo=s.Xo(null,"contextMenu"),this.Yo=!1}function r(){this.contextMenu.Yo&&(this.Zo&&this.Zo.call(this,this.name),this.$o("selected",!0),window.setTimeout(this.contextMenu._o.bind(this.contextMenu)))}t("./contextMenu.less");var o=t("../loaders").Lo,s=t("./Dome"),h=t("./getText"),u=t("./PopupDlg"),a=t("./tapBehavior");i.exports=e,e.prototype.ap=function(t,i,n){var e=n&&n.name,o=n&&n.bp,h="menuItem"+(e?" "+e:""),u=s.Xo(this.Wo,h).cp(1);return u.icon=u.Xo("icon").dp(1.5),o&&this.ep(u,o),u.label=u.Xo("text").fp(t),u.name=e,u.Zo=i,u.contextMenu=this,a(u,r),this.Vo.push(u),u},e.prototype.ep=function(t,i){o.vo(t.icon,i)},e.prototype.gp=function(t,i,n){var e;this.options&&this.options.hp?e=this._o.bind(this):this.ap(h("#cancelAction"),null),u.ip(this.Wo,this.parent,e);var r=s.jp(t),o=s.jp(this.Wo);o.kp(r,i,n),s.lp(o),this.Wo.Bo("left",o.left+"px"),this.Wo.Bo("top",o.top+"px"),this.Yo=!0},e.prototype._o=function(){this.Yo&&(this.Yo=!1,u.mp(this.Wo))}},{"../loaders":80,"./Dome":58,"./PopupDlg":64,"./contextMenu.less":69,"./getText":72,"./tapBehavior":76}],58:[function(t,i,n){"use strict";function e(t,i,n,r){this.type=i;var o=this.np=document.createElement(i);this.name=r,this.op=!1,n&&(o.className=n),f&&f.pp(o,n),t&&(t instanceof e?t.np:t).appendChild(o),d&&d.add(r||n,this)}function r(){var t=document.documentElement.clientWidth,i=document.documentElement.clientHeight;i===y&&(i+=m),h=new p(0,0,t,i),e.qp=t,e.rp=i;var n=window.devicePixelRatio||1;u=50+25*(n-1)}function o(){if((window.devicePixelRatio||1)>=1.5){var t=v;document.documentElement.style["fontSize"]=t+"px"}}function s(){this.Wp={}}t("./dome.less");var h,u,a=t("./fileHelper"),p=t("./Rect"),c=t("./tapBehavior"),l=null,f=null,d=null,g=1,v=23,y=1137,m=119;i.exports=e,e.init=function(t,i){f=t,l=i,r(),o()},e.prototype.sp=function(t,i){return(t instanceof e?t.np:t).appendChild(this.np),this.op=i,l&&i&&l.addElement(this.np),this},e.prototype.appendChild=function(t,i){return t.sp(this,i)},e.removeChild=function(t,i){i&&(l&&i.op&&l.tp(i.np),t instanceof e&&(t=t.np),t.removeChild(i.np))},e.prototype.removeChild=function(t){e.removeChild(this,t)},e.prototype.up=function(){return this.np.childElementCount},e.prototype.vp=function(){this.np.innerHTML=null},e.prototype.fp=function(t){return this.np.textContent=t,this},e.prototype.wp=function(t){return this.np.innerHTML=t,this},e.prototype.setAttribute=function(t,i){return this.np.setAttribute(t,i),this},e.prototype.Bo=function(t,i){return this.np.style[t]=i,this},e.prototype.xp=function(t){return t===this.yp()?this:(this.np.style.display=t?"":"none",this.zp=!!t,l&&this.op&&(t?l.addElement(this.np):l.tp(this.np)),this)},e.prototype.yp=function(){return this.zp||void 0===this.zp},e.prototype.Ap=function(t){return this.np.disabled=!t,this.$o("disabled",!t),this},e.prototype.dp=function(t){return this.Bo("width",t*u+"px")},e.prototype.cp=function(t){return this.Bo("height",t*u+"px")},e.prototype.Bp=function(t){return this.Bo("minWidth",t*u+"px")},e.prototype.Cp=function(t){return this.Bo("minHeight",t*u+"px")},e.prototype.text=function(){return this.np.textContent},e.prototype.Dp=function(){return this.np.innerHTML},e.prototype.value=function(){return this.np.value},e.prototype.Ep=function(){return this.np.checked},e.prototype.Fp=function(){return this.np},e.prototype.clear=function(){this.np.innerHTML=""},e.prototype.u=function(t,i){var n=this;this.np.addEventListener(t,function(t){i.call(n,t)})},e.prototype.$o=function(t,i){var n=this.np,e=n.className,r=" "+e+" ",o=" "+t+" ",s=r.indexOf(o);if(i){if(s>=0)return;f&&f.toggle(n,t,i),n.className=e+" "+t}else{if(s<0)return;n.className=r.replace(o," ").trim(),f&&f.toggle(n,t,i)}},e.prototype.Gp=function(){this.np.scrollTop=this.np.scrollHeight},e.Xo=function(t,i,n){return new e(t,"div",i,n||i)},e.prototype.Xo=function(t,i){return new e(this,"div",t,i||t)},e.Hp=function(t,i,n,r){var o=new e(t,"button",i+"Button",i);return n&&(o.np.innerText=n),o.u("click",r),o},e.Ip=function(t,i,n,r){var o=new e(t,"div","btn "+i,i);return n&&(o.Jp=o.Xo(i+"Text btnText").fp(n)),c(o,r),o},e.prototype.Kp=function(t){this.Jp.fp(t)},e.Lp=function(t,i,n,r){var o=e.Ip(t,i,r,n);return o.icon=o.Xo(i+"Icon btnIcon"),o},e.Mp=function(t,i,n,r){var o=new e(t,"a",i,i);return o.setAttribute("href",r),o.fp(n),o},e.Np=function(t,i,n){return new e(t,"div",i,i).fp(n)},e.Op=function(t){return new e(t,"br")},e.Pp=function(t,i,n,r,o){var s=n||o?e.Xo(t,i+"Div"):t;n&&e.Xo(s,i+"Label inputLbl").fp(n);var h=new e(s,"input",i+"Input inputBox",i);return h.Qp=s,o&&e.Xo(s,i+"Desc inputDesc").fp(o),void 0!==r&&(h.np.value=r),h},e.Rp=function(t,i,n,r,o){var s=new e(t,"div",i+"Div chkBoxDiv"),h=new e(s,"input",i+"ChkBox chkBox",i),u=h.np;return u.type="checkbox",u.name=i,void 0!==r&&(u.value=r),u.id=i+"ChkBox"+(void 0!==r?r:g++),o&&(u.checked=!0),new e(s,"label",i+"ChkLabel chkLbl",i).fp(n).setAttribute("for",u.id),h},e.Sp=function(t,i,n,r,o){r||(r=n);for(var s=[],h=0;h<n.length;h++){var u=s[h]=new e(t,"input",i+"RadioBtn radioBtn",i),a=u.np;a.type="radio",a.name=i,a.value=r[h],a.id=i+"Radio"+r[h],r[h]===o&&(a.checked=!0),new e(t,"label",i+"RadioLbl radioLbl",i).fp(n[h]).setAttribute("for",a.id)}return s},e.Tp=function(t){for(var i=0;i<t.length;i++)if(t[i].np.checked)return t[i].np.value},e.Up=function(t,i,n,r,o){if(r||(r=n),"byIndex"===r)for(r=[],a=0;a<n.length;a++)r.push(a);var s=new e(t,"select",i+"DropDwn dropDwn",i).Bo("fontSize",.6*u+"px");s.values=r
;for(var h=0,a=0;a<n.length;a++){var p=new e(s,"option").np;p.value=r[a],p.textContent=n[a],r[a]===o&&(h=a)}return s.np.selectedIndex=h,s},e.prototype.select=function(t){var i=this.values.indexOf(t);i!==-1&&(this.np.selectedIndex=i)},e.jp=function(t){var i=(t.np||t).getBoundingClientRect();return 0===i.width&&0===i.height&&console.error("newRect on invisible element",t),new p(i.left,i.top,i.width,i.height)},e.lp=function(t){t.Vp(h,10)},e.Xp=function(){return d=new s},e.Yp=function(){d=null},s.prototype.add=function(t,i){this.Wp[t]=i},s.prototype.get=function(t){return this.Wp[t]},s.prototype.Ap=function(t,i,n){"ALL"===t&&(t=Object.keys(this.Wp));for(var e=0;e<t.length;e++)if(!n||n.indexOf(t[e])===-1){var r=this.Wp[t[e]];r?r.Ap(i):console.error("Invalid control name:",t[e])}},s.prototype.xp=function(t,i,n){"ALL"===t&&(t=Object.keys(this.Wp));for(var e=0;e<t.length;e++)if(!n||n.indexOf(t[e])===-1){var r=this.Wp[t[e]];r?r.xp(i):console.error("Invalid control name:",t[e])}},e.Zp=function(t){document.head.getElementsByTagName("title")[0].textContent=t},e.$p=function(){var t=window.getSelection();if(!t.rangeCount)return null;var i=t.getRangeAt(0),n=i.startContainer.data;return n?n.substring(i.startOffset,i.endOffset):null},e.oo=function(t,i,n){var e=new Blob([t],{type:n||"text/plain"}),r=document.createElement("a");r.href=URL.createObjectURL(e),r.download=i,r.click()},e.prototype._p=function(){var t=this.np.files;return t&&t.length>0},e.prototype.aq=function(t){var i=this.np.files;return i?!!i.length&&(a.bq(i[0],t),!0):console.error("Invalid field type for uploadFile: "+this.type)}},{"./Rect":65,"./dome.less":70,"./fileHelper":71,"./tapBehavior":76}],59:[function(t,i,n){"use strict";function e(t,i){var n=new XMLHttpRequest;n.responseType="arraybuffer",n.onreadystatechange=function(){if(4==~~n.readyState){if(200!=~~n.status){var e;e=0===n.status?r("#noInternet"):r("#httpReqError",n.status,t),o.error(e);var s=new Error(e);return s.code=n.status,i(s)}var h=new Uint8Array(n.response);i(null,String.fromCharCode.apply(null,h))}},n.open("GET",t,!0),n.send()}var r=t("./getText"),o=t("../log"),s={};n.cq=function(t,i){s[t]=i},n.oo=function(t,i){return void 0!==s[t]?i(null,s[t]):"file:"===window.location.protocol?i(null,"file:"+t):e(t,i)}},{"../log":81,"./getText":72}],60:[function(t,i,n){"use strict";function e(t,i){this.dq=t,this.eq=i,this.fd=r+t+(i?"_"+i:""),this.fq=!1,this.gq=null,this.map={},this.hq=this.iq.bind(this),this.jq=console.error,1===i&&"1g0"===t&&window.localStorage.getItem("currentVersion")&&(window.localStorage.removeItem("currentVersion"),window.localStorage.setItem(this.kq(),this.fd))}var r="localPref_";i.exports=e,e.prototype.qo=function(){this.gq=window.clearTimeout(this.gq),this.fq=!1,this.map={},window.localStorage.removeItem(this.fd),window.localStorage.removeItem(this.kq())},e.prototype.lq=function(t){this.jq=t},e.prototype.mo=function(){if(!this.Ro(this.fd)&&this.version){var t=window.localStorage.getItem(this.kq());t||(t=r+this.dq),this.Ro(t)&&(this.fq=!0)}},e.prototype.kq=function(){return r+this.dq+"_currentKey"},e.prototype.mq=function(){this.gq&&this.iq()},e.prototype.nq=function(){this.gq||(this.gq=window.setTimeout(this.hq,6e4))},e.prototype.Ro=function(t){try{var i=window.localStorage.getItem(t);return!!i&&(this.map=JSON.parse(i),!0)}catch(t){this.jq("Cannot load local preferences: "+t)}},e.prototype.iq=function(){this.gq=window.clearTimeout(this.gq);try{window.localStorage.setItem(this.fd,JSON.stringify(this.map)),this.fq&&(window.localStorage.setItem(this.kq(),this.fd),this.fq=!1)}catch(t){this.jq("Cannot save local preferences: "+t)}},e.prototype.Co=function(){return Object.keys(this.map)},e.prototype.Do=function(t){delete this.map[t]},e.prototype.ad=function(t,i){var n=this.map[t];return void 0!==n?n:i},e.prototype.$c=function(t,i){this.map[t]=i,this.nq()}},{}],61:[function(t,i,n){"use strict";function e(){this.level=NaN,this.oq=null,this._i=o,this.Uj=s,this.pq=h,this.ERROR=u,this.qq=a,this.rq=!1,this._e=!1}var r=console,o=0,s=1,h=2,u=3,a=4;i.exports=e,e.prototype.$i=function(t){t!==this.level&&(this.level=t,this.debug=t<=o?this.sq:null,this.info=t<=s?this.nh:null,this.warn=t<=h?this.Kn:null,this.error=t<=u?this.tq:null,this.fatal=t<=a?this.uq:null)},e.prototype.vq=function(t){this.oq=t},e.prototype.sq=function(t){this.wq(o,r.debug,t)},e.prototype.nh=function(t){this.wq(s,r.info,t)},e.prototype.Kn=function(t){this.wq(h,r.warn,t)},e.prototype.tq=function(t){this.wq(u,r.error,t)},e.prototype.uq=function(t){this.wq(a,r.error,t)},e.prototype.wq=function(t,i,n){t<this.level||this.oq&&!this.oq(t,n)||i.call(r,n)}},{}],62:[function(t,i,n){"use strict";function e(t,i,n){this.parent=t=t||document.body,n=n||{};var e="notifPopup"+(n.className?" "+n.className:""),h=this.xq=r.Xo(null,e).xp(!1);n.title&&h.Xo("title").cp(1).Xo("text").fp(n.title),n.yq&&(this.zq=r.Ip(h,"closeBtn",o("#close"),this.close.bind(this)).cp(1)),this.content=h.Xo("content"),this.yp=!1,this.Aq=n.Aq,this.Aq?s.ip(this.xq,this.parent):h.sp(t),i&&(this.Bq(i),this.show())}t("./notificationPopup.less");var r=t("./Dome"),o=t("./getText"),s=t("./PopupDlg"),h=t("./Transit");i.exports=e,e.prototype.Cq=function(t){this.zq&&this.zq.xp(t)},e.prototype.Bq=function(t,i){var n=this.content.Xo("msg").fp(t);void 0!==i&&n.$o("level"+i,!0),this.content.Gp()},e.prototype.close=function(){this.hide()},e.prototype.clear=function(){this.content.vp()},e.prototype.show=function(){this.yp||(this.yp=!0,this.xq.xp(!0),s.Dq(this.xq))},e.prototype.hide=function(){this.yp&&(this.yp=!1,this.Aq?s.mp(this.xq):new h(this.xq).from("opacity",1).Eq("opacity",0).start(500))}},{"./Dome":58,"./PopupDlg":64,"./Transit":68,"./getText":72,"./notificationPopup.less":74}],63:[function(t,i,n){"use strict";function e(){this.Fq={},this.Gq=null,this.Hq=""}function r(t,i){for(var n in i)t.style[n]=i[n]}function o(t,i,n,e){var r,o=n[i],s=e[i];if(o)for(r in o)t.style[r]=s?s[r]||null:null;if(s)for(r in s)t.style[r]=s[r]}i.exports=new e,e.prototype.Iq=function(t,i){this.Fq=t,this.Jq(i,!0),this.pp(document.body,"body")},e.prototype.Kq=function(){return Object.keys(this.Fq)},e.prototype.Jq=function(t,i){if(t!==this.Hq){var n=this.Gq;if(this.Hq=t,this.Gq=this.Fq[t],!i)for(var e=document.all,r=0;r<e.length;r++){var o=e[r];this.Lq(o,n)}}},e.prototype.pp=function(t,i){if(this.Gq){var n=this.Gq[t.localName];if(n&&r(t,n),i&&(n=this.Gq["."+i],n&&r(t,n),i.indexOf(" ")>=0))for(var e=i.split(" "),o=0;o<e.length;o++)(n=this.Gq["."+e[o]])&&r(t,n)}},e.prototype.Lq=function(t,i){o(t,t.localName,i,this.Gq);for(var n=t.className.split(" "),e=0;e<n.length;e++)o(t,"."+n[e],i,this.Gq)},e.prototype.Mq=function(t,i,n){var e=this.Gq[i+"+"+n];if(e){var r=this.Gq[i]||{};for(var o in e)t.style[o]=r[o]||null}},e.prototype.toggle=function(t,i,n){if(this.Gq){var e,o=t.className.split(" ");if(n){var s=this.Gq[t.localName+"+"+i];for(s&&r(t,s),e=0;e<o.length;e++)(s=this.Gq["."+o[e]+"+"+i])&&r(t,s)}else for(this.Mq(t,t.localName,i),e=0;e<o.length;e++)this.Mq(t,"."+o[e],i)}}},{}],64:[function(t,i,n){"use strict";function e(){var t=this.Nq;t.options&&(t.options.Oq=this.id),o.mp(t.xq),t.Pq&&t.Pq(t.options)}function r(t,i,n,r){var o=h.Ip(t,"popupDlgBtn",n,e).cp(1).Bp(2);o.Nq=i,o.id=r}function o(t,i,n,e,s){this.parent=t||document.body,this.options=e,this.Pq=s;var a=this.xq=h.Xo(null,"popupDlg dialog");a.Xo("dialogTitle").fp(n||u("#problem"));var p=a.Xo("content");h.Np(p,"message",i);for(var c=e&&e.buttons||[u("#ok")],l=a.Xo("btnDiv"),f=0;f<c.length;f++)r(l,this,c[f],f);o.ip(this.xq,this.parent)}function s(t){var i=h.Xo(null,"popupOverlay");return t&&(t=t.np||t,i.Bo("left",t.offsetLeft+"px"),i.Bo("top",t.offsetTop+"px"),i.Bo("width",t.scrollWidth+2+"px"),i.Bo("height",t.scrollHeight+2+"px")),i}t("./popupDlg.less");var h=t("./Dome"),u=t("./getText"),a=t("./tapBehavior"),p=t("./Transit");i.exports=o,o.ip=function(t,i,n){var e=t.Qq=s(i);e.parent=i,e.sp(i),t.sp(e,!0),e.Bo("opacity",1),n&&a(e,n)},o.mp=function(t){var i=t.Qq;if(!i.parent)return console.error("Already detached overlay",t);i.Bo("opacity",0),window.setTimeout(function(n){t.xp(!1),h.removeChild(n,i)},300,i.parent),i.parent=null},o.Rq=function(t,i,n,e){var r={buttons:[u("#yes"),u("#no")]};new o(t,i,u("#confirmTitle"),r,function(t){0===t.Oq&&n(e)})},o.Dq=function(t){new p(t).from("opacity",0).Eq("opacity",1).start(500)}},{"./Dome":58,"./Transit":68,"./getText":72,"./popupDlg.less":75,"./tapBehavior":76}],65:[function(t,i,n){"use strict";function e(t,i,n,e){this.left=t,this.top=i,this.width=n,this.height=e}i.exports=e,e.prototype.kp=function(t,i,n){var e=t.left,r=t.top;switch(i){case 1:e+=t.width+15;break;case-1:e+=-this.width-15;break;case void 0:case 0:e+=t.width/2-this.width/2;break;default:e+=i*t.width}switch(n){case 1:r+=t.height+15;break;case void 0:case-1:r+=-this.height-15;break;case 0:r+=t.height/2-this.height/2;break;default:r+=n*t.height}this.left=Math.round(e),this.top=Math.round(r)},e.prototype.Vp=function(t,i){var n=Math.max(Math.min(this.left,t.width-this.width-i),i),e=Math.max(Math.min(this.top,t.height-this.height-i),i);this.left=Math.round(n),this.top=Math.round(e)}},{}],66:[function(t,i,n){"use strict";function e(t){this.Tq={},this.Uq=t.Uq,this.Vq=t.Vq,this.Wq(t),this.Xq()}function r(){this.ar.Zq()}function o(){this.removeEventListener(c.qr,o),this.rr.Qq.xp(!1)}t("./topMenu.less");var s=t("../loaders").Lo,h=t("./Dome"),u=t("./tapBehavior"),a=t("./TopMenuOption"),p=t("./touchManager"),c=t("./Transit"),l={height:1.1,Sq:2};i.exports=e,e.prototype.Yq=function(){this.Zq()},e.prototype.$q=function(t){this._q.fp(t)},e.prototype.br=function(t){return this.cr.Xo(t||"menuSeparator")},e.prototype.dr=function(t,i,n){var e=new a(this,t,i,l);return n&&s.vo(e.icon,n),this.Tq[t]=e,e},e.prototype.er=function(t){this.Zq(),this.Uq(t)},e.prototype.ap=function(t){return this.cr.appendChild(t)},e.prototype.removeItem=function(t){this.cr.removeChild(t)},e.prototype.Wq=function(t){var i=this.Qq=h.Xo(null,"topMenuOverlay");i.ar=this,i.xp(!1),i.Bo("opacity",0),i.sp(document.body),u(i,r);var n=h.Xo(null,"topMenu").cp(1),e=this.gr=h.Xo(n,"menuBtn").dp(1),o=e.Xo("menuBtnIcon btnIcon");s.vo(o,"menuBtn.png"),u(e,this.hr.bind(this)),this._q=n.Xo("topTitle"),this.width=Math.min(~~(.85*h.qp),675);var a=this.ir=n.Xo("slideMenu"),p=this.cr=a.Xo("menuContent");p.Bo("width",this.width+"px"),p.Bo("minHeight",h.rp+"px"),a.Xo("sideHandle").Bo("height",h.rp+"px");var c=p.Xo("menuTitle").cp(1.5),l=c.Xo("text").fp(t.jr);u(l,this.Zq.bind(this)),this.kr(-this.width),n.sp(document.body)},e.prototype.kr=function(t){this.lr=t,this.ir.Bo(c.mr,"translate3D("+t+"px,0,0)")},e.prototype.nr=function(t){var i=Math.max(50,~~(Math.abs(t-this.lr)/this.width*300));this.ir.Bo(c.or,c.pr+" "+i+"ms ease-out"),this.kr(t)},e.prototype.hr=function(){var t=!1;if(this.Qq.yp()||(t=!0,this.Qq.xp(!0)),this.Vq&&t){var i=this.Qq.np.clientWidth;i++,this.Qq.Bo("opacity",.7)}this.nr(0)},e.prototype.Zq=function(){this.Vq&&this.Qq.Bo("opacity",0),this.ir.np.addEventListener(c.qr,o),this.ir.np.rr=this,this.nr(-this.width)},e.prototype.Xq=function(){var t,i,n,e,r=this;p.sr(this.ir.np,function(o,s){switch(o){case"dragStart":return t=s,i=n=r.lr,e=i<0?-1:1,r.ir.Bo(c.or,null),void r.Qq.xp(!0);case"drag":var h=i+(s-t);if(h===n)return;return e=h-n,h>0&&(h=0),n=h,r.kr(h),void(r.Vq&&r.Qq.Bo("opacity",.7*(1+h/r.width)));case"dragEnd":return void(e>0?r.hr():r.Zq());case"tap":return r.Zq()}},{tr:!0,ur:0})}},{"../loaders":80,"./Dome":58,"./TopMenuOption":67,"./Transit":68,"./tapBehavior":76,"./topMenu.less":77,"./touchManager":78}],67:[function(t,i,n){"use strict";function e(t,i,n,e){var s=this.vr=t.cr.Xo("menuOption "+i).cp(e.height);s.wr=this,this.icon=s.Xo("icon").dp(e.Sq),this.label=s.Xo("label").fp(n),this.ar=t,this.id=i,o(s,r)}function r(){var t=this.wr;t.ar.er(t.id)}var o=t("./tapBehavior");i.exports=e,e.prototype.xp=function(t){this.vr.xp(t)},e.prototype.fp=function(t){this.label.fp(t)}},{"./tapBehavior":76}],68:[function(t,i,n){"use strict";function e(t){this.np=t.np||t,this.xr={},this.yr={},this.zr={},this.timeout=null,this.Ar=null,this.Br=null}function r(t,i){window.clearTimeout(t.timeout),t.timeout=null,t.np.style[e.or]=t.Ar,!i&&t.Br&&t.Br(),t.Br=null}i.exports=e,e.prototype.from=function(t,i){return this.yr[t]=i,this},e.prototype.Eq=function(t,i){return this.zr[t]=i,this},e.prototype.start=function(t,i){var n=this.np;n.Cr&&n.Cr.timeout&&r(n.Cr,!0),n.Cr=this,this.Ar=n.style[e.or],n.style[e.or]=null;for(var o in this.yr)this.xr[o]=n.style[o],n.style[o]=this.yr[o];n.clientHeight||(n=n),n.style[e.or]="all "+t+"ms ease-in-out";for(o in this.zr)this.xr.hasOwnProperty(o)||(this.xr[o]=n.style[o]),n.style[o]=this.zr[o];return this.Br=i,this.timeout=window.setTimeout(r,t,this),this},e.prototype.reverse=function(t,i){var n=this.zr;this.zr=this.yr,this.yr=n,this.start(t,i)},e.prototype.Dr=function(t,i){this.zr=this.xr,this.xr={},this.yr={},this.start(t,i)},function(){void 0===document.body.style.webkitTransition?(e.or="transition",e.qr="transitionend",e.mr="transform",e.pr="transform"):(e.or="webkitTransition",e.qr="webkitTransitionEnd",e.mr="webkitTransform",e.pr="-webkit-transform")}()},{}],69:[function(t,i,n){var e=".contextMenu {\n  position: absolute;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  cursor: default;\n  max-width: 70%;\n  background-color: rgba(120, 120, 120, 0.2);\n  border-radius: 7px;\n  border: 1px solid #58636d;\n}\n.contextMenu .menuItem {\n  position: relative;\n  margin: 1px 1px 0 1px;\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.7);\n  color: #e4e4e4;\n}\n.contextMenu .menuItem.pressed {\n  background-color: #333;\n}\n.contextMenu .menuItem.selected {\n  background-color: #555;\n}\n.contextMenu .menuItem .icon {\n  display: inline-block;\n  vertical-align: top;\n  position: relative;\n  left: 0;\n  top: 0.5rem;\n  height: calc(100% - 1rem);\n  background-position: 50%;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n.contextMenu .menuItem .text {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  display: inline-block;\n  vertical-align: top;\n  position: relative;\n  font-size: 1.2rem;\n  max-width: 50vw;\n  max-height: 100%;\n  overflow: hidden;\n}\n";t("lessify")(e),i.exports=e},{"lessify":151}],70:[function(t,i,n){var e='body {\n  background-color: #865e50;\n  font-size: 1rem;\n  font-family: "Arial";\n  margin: 0px;\n  height: 2048px;\n}\ndiv {\n  box-sizing: border-box;\n}\n::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 7px;\n  height: 7px;\n}\n::-webkit-scrollbar-track {\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.2);\n  -webkit-border-radius: 10px;\n  border-radius: 7px;\n  margin: 1px;\n}\n::-webkit-scrollbar-thumb {\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, 0.5);\n}\n.btn {\n  position: relative;\n  display: inline-block;\n  vertical-align: top;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  cursor: default;\n  box-sizing: border-box;\n  padding: 0 2px;\n  border-radius: 13px;\n  min-width: 4rem;\n  font-size: 1rem;\n  text-align: center;\n  border: 1px solid #7a6c5c;\n  background-color: #af9e8e;\n  color: #000;\n}\n.btn.disabled {\n  color: #000;\n  border-style: hidden;\n  opacity: 0.5;\n}\n.btn.pressed {\n  border-style: outset;\n  -webkit-filter: brightness(1.5);\n  filter: brightness(1.5);\n}\n.btnIcon {\n  position: absolute;\n  left: 2px;\n  top: 2px;\n  width: calc(100% - 4px);\n  height: calc(100% - 4px);\n  background-position: 50%;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n.btnText {\n  position: relative;\n  margin: 0 3px;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  z-index: 1;\n  max-height: 100%;\n  overflow: hidden;\n}\n.inputLbl {\n  display: inline-block;\n  margin: 0 5px 0 10px;\n  font-size: 1rem;\n}\n.inputBox {\n  display: inline-block;\n  margin: 0.5rem 0;\n  min-height: 3rem;\n  text-align: left;\n  font-size: 1.3rem;\n  color: inherit;\n}\n.inputDesc {\n  display: inline-block;\n  margin-left: 1rem;\n  max-width: 30%;\n  vertical-align: middle;\n  font-size: 0.9rem;\n  font-style: italic;\n}\n.chkBoxDiv {\n  display: inline-block;\n  margin-right: 10px;\n}\n.chkBox {\n  margin: 5px 3px 14px 2px;\n  width: 1rem;\n  height: 1rem;\n}\n.chkLbl {\n  font-size: 1rem;\n}\n.dropDwn {\n  margin: 17px 13px 17px 13px;\n  color: inherit;\n}\n.radioBtn {\n  margin: 17px 0px 17px 13px;\n  width: 29px;\n  height: 1.5em;\n}\n.radioLbl {\n  margin-right: 13px;\n}\n.dialog {\n  position: relative;\n  margin: 0 auto;\n  max-width: 750px;\n  padding: 10px;\n  background-color: #ffe;\n  color: #000;\n  border: solid #cca 1px;\n  border-radius: 10px;\n  font-family: Arial;\n  font-size: 1rem;\n}\n.dialogTitle {\n  font-size: 2rem;\n  background-color: #ffebce;\n  color: #000;\n  border: solid 1px rgba(195, 50, 50, 0.2);\n  border-radius: 10px;\n  margin: -6px;\n  margin-bottom: 15px;\n  padding: 10px 0px 10px 12px;\n}\n';t("lessify")(e),i.exports=e},{"lessify":151}],71:[function(t,i,n){"use strict";n.bq=function(t,i){var n=new FileReader;n.onloadend=function(){return i(n.result)},n.readAsText(t)}},{}],72:[function(t,i,n){"use strict";function e(t){var i=o[t];if(void 0===i&&(i=r[t]),void 0===i)return"("+t+")";if(arguments.length<=1)return i;for(var n=1;n<arguments.length;n++)i=i.replace("%"+n,arguments[n]);return i}var r=t("../../assets/i18n_en-0.1.json"),o=r;i.exports=e,e.Er=function(t,i,n){var e="i18n_"+t+".json";i.so(e,function(t,i){if(t)return n();o=JSON.parse(i),n()})}},{"../../assets/i18n_en-0.1.json":5}],73:[function(t,i,n){"use strict";var e=t("./Dome");n.init=function(t,i){e.init(t,i)}},{"./Dome":58}],74:[function(t,i,n){var e=".notifPopup {\n  z-index: 3000;\n  border-radius: 13px;\n  background-color: rgba(0, 0, 0, 0.7);\n}\n.notifPopup .title {\n  line-height: 100px;\n  padding: 0 1rem;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  border-radius: 12px;\n  background-color: rgba(77, 77, 77, 0.5);\n}\n.notifPopup .title .text {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  position: relative;\n  color: #fff;\n  font-size: 1.5rem;\n}\n.notifPopup .closeBtn {\n  position: absolute;\n  top: 0;\n  right: 0;\n}\n.notifPopup .content {\n  padding: 1.2rem;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  font-size: 1.2rem;\n  color: white;\n  height: 300px;\n  overflow-y: scroll;\n}\n.notifPopup .content .level0 {\n  color: #888;\n}\n.notifPopup .content .level1 {\n  color: #0a0;\n}\n.notifPopup .content .level2 {\n  color: #fb0;\n}\n.notifPopup .content .level3 {\n  color: #f33;\n  font-weight: bold;\n}\n.notifPopup .content .msg {\n  max-height: 999999px;\n  margin-bottom: 0.5rem;\n}\n";t("lessify")(e),i.exports=e},{"lessify":151}],75:[function(t,i,n){var e=".popupOverlay {\n  z-index: 2000;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.7);\n  transition: opacity 300ms ease-out;\n  opacity: 0;\n}\n.popupDlg {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  max-width: 75%;\n}\n.popupDlg .content {\n  padding: 20px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.popupDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n}\n.popupDlg .btnDiv .popupDlgBtn {\n  float: right;\n  margin-left: 0.5rem;\n}\n";t("lessify")(e),i.exports=e},{"lessify":151}],76:[function(t,i,n){"use strict";var e=t("./touchManager");i.exports=function(t,i){e.sr(t.np,function(n){switch(n){case"tap":if(t.np.disabled)return;return i.call(t),!0;case"pressed":if(t.np.disabled)return;return t.$o("pressed",!0);case"released":return t.$o("pressed",!1)}})}},{"./touchManager":78}],77:[function(t,i,n){var e=".topMenuOverlay {\n  z-index: 1900;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: #000;\n  -webkit-transition: opacity 300ms ease-out;\n  transition: opacity 300ms ease-out;\n  -webkit-transform: translate3D(0, 0, 0);\n  transform: translate3D(0, 0, 0);\n}\n.topMenu {\n  width: 100%;\n  background-color: #333;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  cursor: default;\n}\n.topMenu .menuBtn {\n  position: relative;\n  display: inline-block;\n  height: 100%;\n  background-color: #000;\n}\n.topMenu .menuBtn.pressed {\n  -webkit-filter: brightness(1.5);\n  filter: brightness(1.5);\n}\n.topMenu .menuBtn .menuBtnIcon {\n  -webkit-filter: invert(1) grayscale(1);\n  filter: invert(1) grayscale(1);\n}\n.topMenu .topTitle {\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  display: inline-block;\n  vertical-align: top;\n  width: calc(100% - 130px);\n  overflow: hidden;\n  color: #fff;\n  padding-left: 1em;\n  font-size: 1.5rem;\n}\n.topMenu .slideMenu {\n  z-index: 1901;\n  position: absolute;\n  top: 0;\n}\n.topMenu .sideHandle {\n  width: 10px;\n  display: inline-block;\n  vertical-align: top;\n}\n.topMenu .menuContent {\n  display: inline-block;\n  overflow-x: hidden;\n  background-color: #000;\n  color: #fff;\n}\n.topMenu .menuTitle {\n  padding-left: 1.6rem;\n  font-size: 1.6rem;\n  border-bottom: 1px solid #909090;\n  background-color: #323435;\n}\n.topMenu .menuTitle .text {\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.topMenu .menuOption {\n  position: relative;\n  font-size: 1.4rem;\n}\n.topMenu .menuOption.pressed {\n  background-color: #444;\n}\n.topMenu .menuOption .icon {\n  display: inline-block;\n  height: 100%;\n  background-size: auto 70%;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.topMenu .menuOption .label {\n  display: inline-block;\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.topMenu .menuSeparator {\n  border-bottom: 1px solid #777;\n}\n";t("lessify")(e),i.exports=e},{"lessify":151}],78:[function(t,i,n){"use strict";function e(){this.Fr=this.Gr=0,this.Hr=this.Ir=!1,this.startTime=this.Jr=0,this.Kr=[],this.Lr=0,this.Mr=null,this.Nr=!1,r()}function r(){window.addEventListener("mousemove",function t(){d.Nr=!0,window.removeEventListener("mousemove",t)})}function o(t){if(d.Hr)return d.Or();d.Pr(t.changedTouches[0],t,t.currentTarget)}function s(t){d.Qr(t.changedTouches[0],t)}function h(t){if(t.changedTouches.length>1)return d.Or();d.Rr(t.changedTouches[0],t)}function u(){d.Or()}function a(t){t.button===f&&d.Pr(t,t,t.currentTarget)}function p(t){t.button===f&&d.Qr(t,t)}function c(t){d.Rr(t,t)}function l(t,i,n){i.Ur.Wr=null,t._r(i,n)}var f=0,d=i.exports=new e;e.prototype.Sr=function(t){return!(this.Kr.indexOf(t)>=0)&&(this.Kr.push(t),this.Lr++,t.Ur.Tr("pressed"),t.addEventListener("touchmove",h),t.addEventListener("touchend",s),t.addEventListener("touchcancel",u),1===this.Lr&&(document.addEventListener("mousemove",c),document.addEventListener("mouseup",p)),!0)},e.prototype.Vr=function(t){var i=this.Kr.indexOf(t);if(i<0)return console.error("target not listening",t);this.Kr[i]=null,this.Lr--;var n=t.Ur;n.Tr("released"),n.Wr&&(n.Wr=window.clearTimeout(n.Wr)),t.removeEventListener("touchmove",h),t.removeEventListener("touchend",s),t.removeEventListener("touchcancel",u),0===this.Lr&&(document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",p),this.Kr.length=0)},e.prototype.Xr=function(){this.Yr(null)},e.prototype.Yr=function(t){for(var i=0;i<this.Kr.length;i++){var n=this.Kr[i];n&&n!==t&&this.Vr(n)}this.Mr=t},e.prototype.Pr=function(t,i,n){if(this.Ir&&this.Zr(),this.Sr(n)){this.Fr=t.clientX,this.Gr=t.clientY,this.startTime=Date.now();var e=n.Ur;if(e.tr&&!this.Hr){var r=e.$r;0===r?i.preventDefault():e.Wr=window.setTimeout(l,r,this,n,t)}}},e.prototype.Rr=function(t,i){var n=Date.now();if(n-this.Jr<50)return i.preventDefault();this.Jr=n;var e;if(this.Hr)return e=this.Mr.Ur,e.Tr("drag",t.pageX-e.as,t.pageY-e.bs),i.preventDefault();for(var r=Math.abs(t.clientX-this.Fr)+Math.abs(t.clientY-this.Gr),o=0;o<this.Kr.length;o++){var s=this.Kr[o];if(s&&(e=s.Ur,!(r<e.cs)))if(e.tr){if(!(n-this.startTime<e.$r)){this._r(s,t);break}this.Vr(s)}else this.Vr(s)}i.preventDefault()},e.prototype.Qr=function(t,i){i.preventDefault();var n,e;if(this.Ir=!0,this.Hr){n=this.Mr,e=n.Ur;Date.now()-this.startTime<e.ds?this.Or():(this.Hr=!1,this.Vr(n),e.Tr("dragEnd",t.pageX-e.as,t.pageY-e.bs))}else{for(var r=0;r<this.Kr.length&&(!(n=this.Kr[r])||(e=n.Ur,!e.Tr("tap",t.pageX-e.as,t.pageY-e.bs)));r++);this.Xr()}this.Ir=!1},e.prototype.Zr=function(){console.warn("Cleaning up touchManager"),this.Ir=!1,this.Xr()},e.prototype._r=function(t,i){this.Hr=!0,this.startTime=Date.now(),this.Yr(t);var n=t.Ur;n.Tr("dragStart",i.pageX-n.as,i.pageY-n.bs)},e.prototype.Or=function(){this.Hr&&(this.Hr=!1,this.Mr.Ur.Tr("dragCancel")),this.Xr()},e.prototype.sr=function(t,i,n){n=n||{};var e={Tr:i,cs:void 0!==n.es?n.es:10};n.tr&&(e.tr=!0,e.$r=n.gs||0,e.ds=void 0!==n.ur?n.ur:100,e.as=t.offsetLeft,e.bs=t.offsetTop),t.Ur=e,t.addEventListener("touchstart",o),t.addEventListener("mousedown",a)}},{}],79:[function(t,i,n){"use strict";function e(t){return decodeURIComponent(t.replace(o," "))}var r=/([^&=]+)=?([^&]*)/g,o=/\+/g;n.hs=function(t){t=(t||window.location.search).substring(1);for(var i={};;){var n=r.exec(t);if(!n)break;i[e(n[1])]=e(n[2])}return i},n.js=function(t){document.location.href=t},n.ks=function(){var t=window.location;return t.protocol+"//"+t.host+t.pathname},n.ls=function(){n.js(n.ks())}},{}],80:[function(t,i,n){var e=t("../config/assets.json"),r=t("./hh/AssetLoader"),o=t("contra"),s=t("./hh/getText"),h=t("../config/scripts.json"),u=new r,a=new r;n.Lo=u,n.Ng=a,n.init=function(t,i){o.ms([function(i){u.jo(e,t+"_assets","assets/",i)},function(t){s.Er("en",u,t)},function(i){a.jo(h,t+"_scripts","build/",i)},function(){i()}])}},{"../config/assets.json":6,"../config/scripts.json":11,"./hh/AssetLoader":55,"./hh/getText":72,"contra":134}],81:[function(t,i,n){"use strict";var e=t("./hh/Logger"),r=new e;r.$i(r.Uj),i.exports=r},{"./hh/Logger":61}],82:[function(t,i,n){"use strict";function e(){this.appName=r.name,this.appVersion=r.version,this.ns=null,this.os=null}var r=t("../package.json");i.exports=new e},{"../package.json":157}],83:[function(t,i,n){"use strict";function e(t){this.ts=t,this.us=null,this.files=null,this.vs=null}var r=t("Dropbox"),o=t("../hh/fileHelper"),s=t("../hh/getText"),h=t("../../config/net.json"),u=t("../hh/PopupDlg"),a=t("../hh/urlHelper");n.ps=function(t){var i=a.hs(window.location.hash);if(i["error"])return t.$c("dbxToken",null),new u(null,i["error_description"],s("#problem")+": "+i["error"],{},function(){t.mq(),a.ls()}),!1;var n=i["access_token"];return!!n&&(t.$c("dbxToken",n),t.mq(),a.ls(),!0)},n.qs=function(t){var i=t.ad("dbxToken");return i?new e(i):null},n.rs=function(){var t=new r({"clientId":h["dropbox-clientId"]}),i=t.ss(a.ks());a.js(i)},e.prototype.connect=function(t){this.us||(this.us=new r({"accessToken":this.ts})),this.ws("",t)},e.prototype.ws=function(t,i){if(!this.us)return i(s("#noDropbox"));var n=this;this.us.xs({"path":t}).then(function(t){var e=t["entries"];n.files={};for(var r=0;r<e.length;r++)n.ys(e[r]);i()}).catch(i)},e.prototype.ys=function(t){var i=t["path_display"];"file"!==t[".tag"]?this.files[i]={path:i,zs:!0}:this.files[i]={path:i,timestamp:t["server_modified"]}},e.prototype.As=function(t){if("/"!==(t=t||"/"))throw new Error("Unsupported call to getNumEntries + path");return this.vs=Object.keys(this.files),this.vs.length},e.prototype.Bs=function(t){var i=this.vs[t];return i?{path:i,timestamp:this.files[i].timestamp}:null},e.prototype.oo=function(t,i){if(!this.us)return i(s("#noDropbox"));this.us.Cs({"path":t}).then(function(t){o.bq(t["fileBlob"],function(n){i(null,n,t["server_modified"])})}).catch(i)},e.prototype.aq=function(t,i,n){if(!this.us)return n(s("#noDropbox"));var e=new Blob([i],{type:"text/plain"}),r=this;this.us.Ds({"path":t,"contents":e,"mode":{".tag":"overwrite"},"mute":!0}).then(function(i){var e=i["server_modified"];r.files[t]={timestamp:e},n(null,e)}).catch(n)},e.prototype.Es=function(t,i){if(!this.us)return i(s("#noDropbox"));var n=this;this.us.Fs({"path":t}).then(function(){n.files[t]={zs:!0},i()}).catch(i)},e.prototype.Gs=function(t,i){if(!this.us)return i(s("#noDropbox"));var n=this;this.us.Hs({"path":t}).then(function(){delete n.files[t],i()}).catch(i)},e.prototype.Is=function(t,i,n){if(!this.us)return n(s("#noDropbox"));var e=this;this.us.Js({"from_path":t,"to_path":i}).then(function(){e.files[i]=e.files[t],delete e.files[t],n()}).catch(n)}},{"../../config/net.json":9,"../hh/PopupDlg":64,"../hh/fileHelper":71,"../hh/getText":72,"../hh/urlHelper":79,"Dropbox":120}],84:[function(t,i,n){"use strict";function e(t,i,n,e){this.qc=t,this.Ks=i,this.vf=n,this.Ls=e,this.Ms=null,this.Ns=this.Os=null}function r(t){return"/"+t}function o(t){return f+"/"+t}function s(t){return new Date(t).toISOString().substring(0,19)+"Z"}function h(t){return new Date(t).getTime()}var u=t("contra"),a=t("../GameInVault"),p=t("../GameVault").Jc,c=t("../hh/getText"),l=t("../log"),f="/archivedGames";i.exports=e,e.prototype.connect=function(t){this.Ms={};var i=this;this.Ks.connect(function(n){if(n)return i.Ps(n,t);i.Qs(t)})},e.prototype.Ps=function(t,i){var n=t;"string"==typeof t.error&&(n=t.error,void 0!==t.response&&(n+="\nResponse: "+t.response),void 0!==t.status&&(n+="\nStatus: "+t.status)),this.Ls(n,l.ERROR),i(t)},e.prototype.Qs=function(t){for(var i=!1,n=!1,e=this.Ks.As(),r=0;r<e;r++){var o=this.Ks.Bs(r),s=o.path;if("/vaultState.json"===s)i=!0;else if(s===f)n=!0;else{var h=s.substr(1);this.Ms[h]=o.timestamp}}n||this.Ks.Es(f,function(){}),i?this.Rs(t):(this.Ns={},this.Os={},t())},e.Ss=s,e.Ts=h,e.prototype.Us=function(t,i,n){var e=this.vf.Nc(t);if(e===p.Kc)return n();if(e===p.ACTIVE)return n();switch(e){case p.Lc:var r=this.vf.Pc(t),o=s(r.cb());i>o?(this.vf.Wc(t),this.Ls(c("#unarchived")+t,l.pq),n()):(this.Ls(c("#archived")+c("#remote",t),l._i),this.Vs(t,o,n));break;case p.Mc:var h=s(this.vf.Oc(t));i>h?(this.Ls(c("#undeleted")+t,l.pq),n()):(this.Ls(c("#deleted")+c("#remote",t),l._i),this.Ws(t,h,n));break;default:throw new Error("Unexpected GameState: "+e)}},e.prototype.Xs=function(t,i){var n=this;this.Ys(r(t),function(e,r,o){if(e)return i(e);n.Zs(r,t,o),n.Ls(c("#downloaded")+t,l.Uj),i()})},e.prototype.Ys=function(t,i){this.Ks.oo(t,function(t,n,e){if(t)return self.Ps(t,i);var r=[],o=new a;if(!o.Ca(n,r))return self.Ps(r.join("\n"),i);i(null,o,e)})},e.prototype.$s=function(t,i){var n=t.fb(),e=this,o=this.Ms[n];return o?o===t.bb()?(this.Ls(c("#alreadySync")+n,l._i),i()):void this.at(t,r(n),function(r){if(r)return i(r);e._s(t,n,i)}):this._s(t,n,i)},e.prototype.at=function(t,i,n){var e=this;this.Ys(i,function(i,r){if(i)return n(i);var o=[];if(!t.La(r,o))return i=t.fb()+": "+o.join("\n"),e.Ps(i,n);n()})},e.prototype._s=function(t,i,n){var e=!!this.Ms[i];if(!e){var h=s(t.cb());if(this.Ns[i]>h)return this.vf.Rc(i),this.Ls(c("#deleted")+i,l._i),n();if(this.Os[i]>=h)return this.vf.Uc(i),this.Ls(c("#archived")+i,l._i),n()}var u=this;this.Ks.aq(r(i),t.ya(),function(r,s){return r?u.Ps(r,n):(u.Zs(t,i,s),e?(u.Ls(c("#synced")+i,l.Uj),
n()):u.Ns[i]?(u.Ls(c("#undeleted")+c("#remote",i),l.pq),delete u.Ns[i],u.bt(n)):u.Os[i]?(u.Ls(c("#unarchived")+c("#remote",i),l._i),delete u.Os[i],u.bt(function(){u.Ks.Gs(o(i),n)})):(u.Ls(c("#uploaded")+i,l._i),void n()))})},e.prototype.Zs=function(t,i,n){this.Ms[i]=n,t.ab(n,h(n)),this.vf.Fc(t)},e.prototype.ct=function(t,i,n,e){this.Os[i]=n,t.ab(n,h(n)),this.vf.Xc(t),this.bt(e)},e.prototype.Vs=function(t,i,n){this.Os[t]=i;var e=this;this.bt(function(){delete e.Ms[t],e.Ks.Is(r(t),o(t),n)})},e.prototype.dt=function(t,i){var n=t.fb();if(this.Ms[n])return i();var e=t.bb(),r=this.Os[n],s=this;if(r===e)return i();var h=o(n);if(!r)return this.Ns[n]?i():this.Ks.aq(h,t.ya(),function(e,r){if(e)return i(e);s.Ls(c("#uploaded")+c("#archivedGame",n),l._i),s.ct(t,n,r,i)});this.at(t,h,function(e){if(e)return i(e);s.Ks.aq(h,t.ya(),function(e,r){if(e)return i(e);s.Ls(c("#synced")+c("#archivedGame",n),l.pq),s.ct(t,n,r,i)})})},e.prototype.et=function(t,i){var n=this;this.Ys(o(t),function(e,r,o){if(e)return i(e);n.Ls(c("#downloaded")+c("#archivedGame",t),l._i),n.ct(r,t,o,i)})},e.prototype.Ws=function(t,i,n){this.Ns[t]=i;var e=this;this.bt(function(){delete e.Ms[t],e.Ks.Gs(r(t),n)})};e.prototype.Rs=function(t){var i=this;this.Ks.oo("/vaultState.json",function(n,e){if(n)return i.Ps(n,t);var r=JSON.parse(e);i.Ns=r["deletedFiles"]||{},i.Os=r["archivedFiles"]||{},t()})},e.prototype.bt=function(t){var i={};i["deletedFiles"]=this.Ns,i["archivedFiles"]=this.Os;var n=JSON.stringify(i);this.Ks.aq("/vaultState.json",n,t)},e.prototype.ft=function(t,i){if(t===this.vf.Ac())throw new Error("syncOneGame(unsaved)");this.$s(t,i)},e.prototype.gt=function(t){if(this.vf.Ac())throw new Error("syncAll with unsaved");var i=this;u.ms([this.ht.bind(this),this.it.bind(this),this.jt.bind(this),this.kt.bind(this),this.lt.bind(this)],function(n){if(n)return i.Ps(n,t);i.Ls(c("#syncDone")),t()})},e.prototype.ht=function(t){var i=this;u.ro.ms(this.Ms,function(t,n,e){i.Us(n,t,e)},t)},e.prototype.it=function(t){var i=this;u.ro.ms(this.vf.Hc(),function(t,n){i.$s(t,n)},t)},e.prototype.jt=function(t){var i=this;u.ro.ms(this.Ms,function(t,n,e){if(i.vf.Gc(n))return e();i.Xs(n,e)},t)},e.prototype.kt=function(t){var i=this;u.ro.ms(this.vf.Qc(),function(t,n){i.dt(t,n)},t)},e.prototype.lt=function(t){var i=this;u.ro.ms(this.Os,function(t,n,e){if(i.vf.Nc(n)!==p.Kc)return e();i.et(n,e)},t)}},{"../GameInVault":12,"../GameVault":15,"../hh/getText":72,"../log":81,"contra":134}],85:[function(t,i,n){"use strict";var e=t("../../config/net.json");n.nt=function(t){var i,n=(t.mb("source")||"").toLowerCase(),e=t.mb("place")||"";return n.indexOf("littlegolem")>=0?(i=t.mb("event"),i?{site:"LittleGolem",id:i}:null):n.indexOf("www.dragongoserver")>=0?(i=n.substr(n.indexOf("gid=")+4),{site:"DragonGo",id:i}):e.indexOf("online-go.com/game/")>=0?(i=e.substr(e.indexOf("/game/")+6),{site:"OGS",id:i}):null},n.ot=function(t,i){return e["server-url"]+"getgame?site="+t+"&id="+i},n.pt=function(t){switch(t.site){case"LittleGolem":return"http://www.littlegolem.net/servlet/sgf/"+t.id+"/game.sgf";case"DragonGo":return"http://www.dragongoserver.net/sgf.php?gid="+t.id+"&owned_comments=1";case"OGS":return"https://online-go.com/api/v1/games/"+t.id+"/sgf";default:return null}};var r={"http://www.littlegolem.com":"LittleGolem","OGS: http://online-go.com/game/":"OGS:","http://www.dragongoserver.net/game.php?gid=":"DragonGo:"};n.hb=function(t,i){for(var n in r)i=i.replace(n,r[n]);return"EV"===t&&""+parseInt(i)===i&&(i="EV:"+i),i}},{"../../config/net.json":9}],86:[function(t,i,n){"use strict";function e(){this.debug=!1,this.qt=this.Jn=!1,this.rt=null,this.st=null}i.exports=new e,e.prototype.tt=function(t,i){this.rt=new t,i(this.rt)},e.prototype.assert=function(t,i){if(t!==!0)throw new Error("assertion failed: "+(i||t))}},{}],87:[function(t,i,n){"use strict";function e(){this.ut=null,this.vt=null,this.zb=null,this.Nb=0,this.wt=null,this.cursor={type:"CR",x:0,y:0},this.xt=!1,this.yt={type:null,x:0,y:0}}function r(t){switch(t){case-1:return{type:"mini",c:f.B};case-.5:return{type:"outline",c:f.B};case 0:return null;case.5:return{type:"outline",c:f.W};case 1:return{type:"mini",c:f.W};default:return null}}function o(t){switch(t){case a.Ce+y:case a.Be+v:return{type:"mini",c:f.B};case a.Ce+v:case a.Be+y:return{type:"mini",c:f.W};case a.Ae:return{type:"SL",c:"grey"};default:return null}}function s(t){if(null===t)return null;var i=1,n=0,e=2,r=0;if(void 0!==k&&(n=k),void 0!==j&&(e=j),void 0!==z&&(r=z),t===r)return null;for(var o=t.toFixed(e),s=n;s<e;s++)o=o.pd("0");if(o=o.pd("."),"0."===o.substr(0,2)&&(o=o.slice(1)),0===r){if("0"===o||".0"===o)return null;i=t<1?.6:1}return{type:"LB",text:o,scale:i}}var h=t("../loaders").Lo,u=t("../constants"),a=t("../Grid"),p=t("../log"),c=t("../Move"),l=t("../hh/touchManager");t("../../lib/wgo.js");var f=window.WGo,d=c.pe,g=c.ub,v=u.wb,y=u.vb,m=u.EMPTY,b=window.devicePixelRatio||1,w={};w[f.B]=y,w[f.W]=v;var x={};x[m]=null,x[y]=f.B,x[v]=f.W;i.exports=e,e.prototype.create=function(t,i,n,e){var r=n.Nb;if(this.zb=n,!this.ut||this.Nb!==r){this.Nb=r,e=e||{};var o=e.zt?0:-.23,s={size:r,width:i,section:{top:o,left:o,right:o,bottom:o},coordFontSize:.6};switch(e.background){case"wood":var u=h.zo("wood.jpg");s.background=u.startsWith("file:")?u.substr(5):"data:image/png;base64,"+btoa(u);break;default:s.background="#c75"}t.clear(),this.ut=new f.At(t.Fp(),s),this.xt=!1,this.yt.type=null,e.zt||this.ut.Bt(f.At.Ct),this.Dt()}},e.prototype.Dt=function(){var t=this;l.sr(this.ut.Et,function(i,n,e){if("dragCancel"===i)return t.Ft(-1,-1);"drag"===i.substr(0,4)&&(e-=65*b);var r=t.Gt(n,e);switch(n=r[0],e=r[1],i){case"dragStart":case"drag":return t.Ft(n,e);case"dragEnd":if(t.Ft(-1,-1),Date.now()-t.Ht<300)return;return t.It(n,e);case"tap":return t.It(n,e)}},{tr:!0,gs:300,ur:500})},e.prototype.Jt=function(t){this.Kt=x[t]},e.prototype.Ft=function(t,i){var n=this.Lt(t,i);if(this.xt){if(t===this.cursor.x&&i===this.cursor.y)return;this.ut.Mt(this.cursor)}this.xt=n,n&&(this.cursor.x=t,this.cursor.y=i,this.Ht=Date.now(),this.ut.Nt[t][i][0]?(this.cursor.type="SL",this.cursor.c=void 0):(this.cursor.type=void 0,this.cursor.c=this.Kt),this.ut.Ot(this.cursor))},e.prototype.Pt=function(t,i,n){this.yt.type&&this.ut.Mt(this.yt),this.yt.type=t,t&&(this.yt.x=i-1,this.yt.y=this.Nb-n,this.ut.Ot(this.yt))},e.prototype.Qt=function(t,i,n,e){this.ut.Ot({x:i-1,y:this.Nb-n,type:"LB",text:t,scale:e?1.1:.8})},e.prototype.Lt=function(t,i){return t>=0&&i>=0&&t<this.Nb&&i<this.Nb},e.prototype.It=function(t,i){var n=t+1,e=this.Nb-i;if(!this.Lt(t,i))return this.vt("!"+(n>=1&&n<=this.Nb?d(n):e));if(this.zb.Wd(n,e)===m){var r=g(n,e);this.vt(r)}},e.prototype.Rt=function(t){this.vt=t},e.prototype.Gt=function(t,i){var n=this.ut;return t=Math.round((t*b-n.left)/n.St),i=Math.round((i*b-n.top)/n.Tt),[t,i]},e.prototype.refresh=function(){var t=!1;"regular"!==this.wt&&(this.wt="regular",t=!0);for(var i=0;i<this.Nb;i++)for(var n=0;n<this.Nb;n++){var e=this.zb.Wd(n+1,this.Nb-i),r=x[e],o=this.ut.Nt[n][i][0];t&&(o=null,this.ut.Ut(n,i)),null===r?o&&this.ut.Ut(n,i):o&&o.c===r||(o&&this.ut.Ut(n,i),this.ut.Ot({x:n,y:i,c:r}))}},e.prototype.show=function(t,i,n){this.refresh(),this.wt=t;for(var e=0;e<this.Nb;e++)for(var r=0;r<this.Nb;r++){var o=n(i[this.Nb-e][r+1]);o&&(o.x=r,o.y=e,this.ut.Ot(o))}};var k,j,z;e.prototype.Vt=function(t,i,n){k=t,j=i,z=n};var C={Ek:r,Wt:o,value:s};e.prototype.Xt=function(t,i){var n=C[t];if(!n)return p.error&&p.error("invalid display type: "+t);this.show(t,i,n)},e.prototype.Yt=function(t){this.show("scoring",t,o)}},{"../../lib/wgo.js":114,"../Grid":19,"../Move":23,"../constants":53,"../hh/touchManager":78,"../loaders":80,"../log":81}],88:[function(t,i,n){"use strict";function e(t){this.qc=t;var i=this.xq=s.Xo(null,"devDlg dialog");i.Xo("dialogTitle").fp(h("#devMenu"));var n=i.Xo("content");s.Ip(n,"resetAllBtn",h("#resetAll"),r).cp(1.2).Nq=this;var e=i.Xo("btnDiv");s.Ip(e,"closeBtn",h("#close"),o).cp(1.2).Nq=this,a.ip(i,document.body)}function r(){a.Rq(null,h("#resetAllConfirm"),function(t){t.qc.qo(),u.Lo.qo(),u.Ng.qo(),p.ls()},this.Nq)}function o(){a.mp(this.Nq.xq)}t("./devDlg.less");var s=t("../hh/Dome"),h=t("../hh/getText"),u=t("../loaders"),a=t("../hh/PopupDlg"),p=t("../hh/urlHelper");i.exports=e},{"../hh/Dome":58,"../hh/PopupDlg":64,"../hh/getText":72,"../hh/urlHelper":79,"../loaders":80,"./devDlg.less":101}],89:[function(t,i,n){"use strict";function e(t,i,n,e){this.Zt=i,this.$t=n,this._t=e,this.au=null,this.bu=null,this.list=t.Xo("gameList")}function r(){this.fu.gu(this)}t("./gameList.less");var o=t("../GameInVault"),s=t("../hh/tapBehavior");i.exports=e,e.prototype.cu=function(){return this.bu},e.prototype.du=function(){return this.au.text()},e.prototype.eu=function(t){t.sort(o.ib),this.list.vp();for(var i=0;i<t.length;i++){var n=t[i],e=this.list.Xo("oneGame").cp(1);e.Xo("text").fp(n.eb()),e.pa=n.fb(),e.fu=this,s(e,r)}},e.prototype.gu=function(t){this.au&&this.au.$o("selected",!1),t.$o("selected",!0),this.au=t,this.bu=t.pa,this.$t.call(this.Zt,this.bu)},e.prototype.hu=function(){this.au&&this.au.$o("selected",!1),this.list.up()||this.list.Xo("emptyMsg").fp(this._t),this.au=null,this.bu=null,this.$t.call(this.Zt,this.bu)},e.prototype.iu=function(){this.au&&(this.list.removeChild(this.au),this.hu())}},{"../GameInVault":12,"../hh/tapBehavior":76,"./gameList.less":102}],90:[function(t,i,n){"use strict";function e(t){s.emitter(this),this.ju=t,this.scorer=new f(t.uf),this.ku=new l(this,t.uf),this.ut=null,this.lu=0,this.mu=!this.nu}t("./ui.less");var r=t("./Board"),o=t("../constants"),s=t("contra"),h=t("../hh/Dome"),u=t("../hh/getText"),a=t("../Move"),p=t("./MoveIndicator"),c=t("../hh/PopupDlg"),l=t("./ReviewUi"),f=t("../ScoreAnalyser"),d=a.tb,g=a.sb,v=o.wb,y=o.vb;i.exports=e,e.prototype.ou=function(){this.ut.refresh(),this.pu&&this.qu()},e.prototype.ru=function(t,i,n,e){var o=this.su="compact"===t,s=this.tu=h.Xo(i,"gameUi");n&&s.Xo(o?"testTitle":"pageTitle").fp(n),this.uu=s.Xo("board"),e&&(this.vu=s.Xo("boardDesc").wp(e));var u=s.Xo("underBoard");if(this.wu(u),this.xu(u),o)this.yu=28*(this.ju.Kf()+2);else{this.zu();var a=h.rp-10-s.np.offsetTop-u.np.clientHeight;this.yu=Math.min(a,h.qp-15)}this.ut=new r,this.ut.Rt(this.Au.bind(this))},e.prototype.wu=function(t){var i=this.Bu=t.Xo("statusBar").cp(1);this.Cu=new p(i,1,"lastMove","Last:"),this.Du=i.Xo("msgBar"),this.Eu=new p(i,1,"nextMove","Next:")},e.prototype.Fu=function(t){var i=this.ju.Lf(),n=this.ju.nc();if(n.length){var e=g(n[n.length-1]);this.Cu.Gu(e,1-i,"#"+n.length+":");var r=d(e);r?this.ut.Pt("CR",r[0],r[1]):this.ut.Pt(null)}else this.Cu.Gu(null);t=this.ju.Mf()?null:g(t||""),this.Eu.Gu(t,i),this.ut.Jt(i)},e.prototype.statusMessage=function(t){t.indexOf("\n")===-1&&(t="\n"+t),this.Du.fp(t)},e.prototype.xu=function(t){var i=this.Hu=t.Xo("mainControls"),n=i.Xo("leftDiv"),e=i.Xo("mainDiv"),r=i.Xo("rightDiv");this.su||this.ku.Iu(n,e,r,1.2),this.controls=h.Xp(),h.Ip(e,"bPass",u("#pass"),this.Ju.bind(this,"pass")).cp(1),h.Ip(e,"bUndo",u("#undo"),this.Ku.bind(this)).cp(1),h.Ip(e,"next",u("#next"),this.Lu.bind(this,1)).cp(1.2),h.Ip(e,"next10",u("#nextN",10),this.Lu.bind(this,10)).cp(1.2),h.Ip(e,"accept",u("#accept"),this.Mu.bind(this)).cp(1.2).dp(2),h.Ip(e,"refuse",u("#refuse"),this.Nu.bind(this)).cp(1.2).dp(2),h.Ip(e,"newg",u("#newGame"),this.D.bind(this,"backToNewGame")).cp(1.2).dp(2),h.Ip(r,"bResi",u("#resign"),this.Nf.bind(this)).cp(.9),h.Ip(r,"nextAll",u("#finish"),this.Lu.bind(this)).cp(.9),this.Ou=n.Xo("aiVsAiFlags"),this.Pu=h.Rp(this.Ou,"animated",u("#slowAutomatic")),this.mu||this.Qu(),h.Yp()},e.prototype.zu=function(){var t=this.ju.Mf(),i="ENDING"===t,n="ENDED"===t,e=this.ku.xf,r=!t&&!e,o=this.Ru[y]&&this.Ru[v],s=this.su;s||this.ku.zu(),this.controls.xp(["accept","refuse"],i&&!e),this.controls.xp(["bUndo","bPass","bResi"],r&&!o),this.controls.xp(["next","next10","nextAll"],r&&o),this.controls.xp(["aiVsAiFlags"],r&&o&&!s),this.controls.xp(["newg"],n&&!e&&!s),this.mu||this.Su(r,e,o,s)},e.prototype.Tu=function(t,i){this.Ru=[t,i],this.mu||this.nu(),this.tu||this.ru("main",document.body);var n=this.su?void 0:{background:"wood"};this.ut.create(this.uu,this.yu,this.ju.Jf(),n),this.ou(),this.Fu(),this.zu()},e.prototype.Uu=function(){this.Vu=0,this.Wu()||(this.Xu(),this.ju.nc().length<=1&&this.statusMessage(u("#gameStarted")))},e.prototype.Yu=function(){this.ku.Zu()},e.prototype.$u=function(){this.tu&&(h.removeChild(document.body,this.tu),this.tu=null,this.ut=null)},e.prototype._u=function(){return!!this.tu},e.prototype.Au=function(t){if("!"===t[0])return!this.mu&&this.av(t.substr(1));var i=this.ku.xf;if(i||this.bv)return!this.mu&&this.bv&&this.cv(t,null,!0),void(i&&this.ku.dv(t));this.ev||this.Ru[this.ju.Lf()]&&this.mu||this.ju.Mf()||this.Ju(t)},e.prototype.Xu=function(){this.fv=Date.now();var t=this.ju.Lf();this.Ru[t]&&(this.ev=!0),this.D("nextPlayerTurn",t,void 0)},e.prototype.Ju=function(t){var i=this.ju.Lf(),n=this.ju.ac(t);if(n)return this.statusMessage(n);this.ev=!1,this.D("playerMove",i,t),this.Wu()||(this.ou(),this.Fu(),this.statusMessage(""),this.Ru[y]&&this.Ru[v]?this.gv():this.Xu())},e.prototype.Lu=function(t){this.Vu=t?t-1:1/0,this.Xu()},e.prototype.gv=function(){if(this.Vu){this.Vu--;var t=this.Pu.Ep();window.setTimeout(function(t){t.Xu()},t?500:0,this)}},e.prototype.Wu=function(){switch(this.ju.Mf()){case"ENDING":return this.hv(),!0;case"ENDED":return this.Rg(),this.iv(),!0;default:return!1}},e.prototype.Rg=function(){var t=this.ju.pb();this.jv=this.scorer.Ug(),this.jv?this.kv=t||this.scorer.Sg(this.jv).join("\n"):this.kv="Null game"},e.prototype.hv=function(){this.Rg(),this.statusMessage(this.kv),this.zu(),this.jv?this.ut.Yt(this.scorer.getScoringGrid()):(this.ju.kc(y,0),this.iv())},e.prototype.Mu=function(){var t=this.scorer.Qg(this.jv);this.ju.kc(t>0?y:v,Math.abs(t)),this.iv()},e.prototype.Nu=function(){this.ju.lc(),this.statusMessage("Score in dispute. Continue playing..."),this.ou(),this.Fu(),this.zu(),this.Ru[y]&&this.Ru[v]||this.Xu()},e.prototype.iv=function(){this.statusMessage(this.kv),this.zu()},e.prototype.Nf=function(){c.Rq(null,u("#resignConfirm"),function(t){t.ju.Nf(),t.Fu(),t.Wu()},this)},e.prototype.Ku=function(){var t=this.Ru[y]===this.Ru[v]||this.bv,i=this.ju.ac(t?"half_undo":"undo");if(i)return this.statusMessage(i);this.ou(),this.Fu()}},{"../Move":23,"../ScoreAnalyser":26,"../constants":53,"../hh/Dome":58,"../hh/PopupDlg":64,"../hh/getText":72,"./Board":87,"./MoveIndicator":92,"./ReviewUi":97,"./ui.less":112,"contra":134}],91:[function(t,i,n){"use strict";function e(t,i){this.vf=t,this.Pq=i,this.Wq(),s.Dq(this.xq)}t("./importDlg.less");var r=t("../hh/Dome"),o=t("../hh/getText"),s=t("../hh/PopupDlg");i.exports=e,e.prototype.Wq=function(){var t=this.xq=r.Xo(null,"importDialog dialog");t.xp(!1),t.Xo("dialogTitle").fp(o("#importGame"));var i=this.lv=t.Xo("mainDiv");this.loadGame=r.Pp(i,"loadGame",o("#fromFile")).setAttribute("type","file").setAttribute("id","fileInput").xp(!1),new r(this.loadGame.Qp,"label","btn fileInputBtn").setAttribute("for","fileInput").cp(1.2).Xo("btnText").fp(o("#selectFile")),this.loadGame.u("change",this.mv.bind(this)),r.Op(i),this.Uf=r.Pp(i,"moves",o("#fromText"),void 0,o("#fromTextHelp"));var n=t.Xo("btnDiv");r.Ip(n,"loadBtn",o("#load"),this.mv.bind(this)).cp(1.2),r.Ip(n,"cancelBtn",o("#cancel"),this.nv.bind(this)).cp(1.2),t.xp(!0),s.ip(t,document.body)},e.prototype.mv=function(){if(this.loadGame._p()){var t=this;this.loadGame.aq(function(i){t.ov(i)})}else this.ov(this.Uf.value())},e.prototype.ov=function(t){if(t){var i=[],n=this.vf.Yc(t,i);if(!n)return new s(null,i.join("\n"));this.Pq({Cl:n})&&s.mp(this.xq)}},e.prototype.nv=function(){s.mp(this.xq),this.Pq({pv:!0})}},{"../hh/Dome":58,"../hh/PopupDlg":64,"../hh/getText":72,"./importDlg.less":104}],92:[function(t,i,n){"use strict";function e(t,i,n,e){var r=this.np=t.Xo("moveIndicator "+n).dp(i);this.qv=r.Xo("label").fp(e),r.Xo("stone").Xo("icon"),this.rv=r.Xo("text")}t("./moveIndicator.less");var r=t("../constants"),o=r.wb,s=r.vb;i.exports=e,e.prototype.Gu=function(t,i,n){this.np.xp(null!==t),null!==t&&(this.np.$o("black",i===s),this.np.$o("white",i===o),this.rv.fp(t),n&&this.qv.fp(n))}},{"../constants":53,"./moveIndicator.less":105}],93:[function(t,i,n){"use strict";function e(t,i){this.vf=t,this.sv=i,this.tv=!1,this.Wq(),this.fu.eu(this.vf.Qc()),this.fu.hu(),h.Dq(this.xq)}t("./myArchivedGamesDlg.less");var r=t("../hh/Dome"),o=t("./GameList"),s=t("../hh/getText"),h=t("../hh/PopupDlg");i.exports=e,e.prototype.uv=function(){var t=!!this.fu.cu();this.vv.Ap(t),this.wv.Ap(t)},e.prototype.xv=function(){var t=this.fu.cu();if(t){var i=s("#deleteGameConfirm")+"\n\n"+this.fu.du();h.Rq(null,i,function(i){i.vf.Tc(t)||console.error("Failed to delete gameId: "+t),i.fu.iu()},this)}},e.prototype.yv=function(){var t=this.fu.cu();t&&this.vf.Wc(t)&&(this.fu.iu(),this.tv=!0)},e.prototype.Wq=function(){var t=this.xq=r.Xo(null,"myArchivedGamesDialog dialog");t.xp(!1),t.Xo("dialogTitle").fp(s("#archivedGames"));var i=this.lv=t.Xo("mainDiv");this.fu=new o(this.lv,this,this.uv,s("#empty")),this.vv=r.Ip(i,"delGameBtn",s("#deleteGame"),this.xv.bind(this)).cp(1.2),this.wv=r.Ip(i,"restoreGameBtn",s("#restoreGame"),this.yv.bind(this)).cp(1.2);var n=t.Xo("btnDiv");r.Ip(n,"closeBtn",s("#close"),this.zv.bind(this)).cp(1.2),t.xp(!0),h.ip(t,document.body)},e.prototype.zv=function(){h.mp(this.xq),this.tv&&this.sv()}},{"../hh/Dome":58,"../hh/PopupDlg":64,"../hh/getText":72,"./GameList":89,"./myArchivedGamesDlg.less":106}],94:[function(t,i,n){"use strict";function e(t,i){this.vf=t,this.Pq=i,this.result={},this.Wq(),this.kd(),a.Dq(this.xq)}function r(){var t=this.Zt;t.fu.hu(),t.Cv.Ap(this.value()>0)}t("./myGamesDlg.less");var o=t("../hh/Dome"),s=t("./GameList"),h=t("../hh/getText"),u=t("./MyArchivedGamesDlg"),a=t("../hh/PopupDlg");i.exports=e,e.prototype.Av=function(){var t=!!this.fu.cu();this.vv.Ap(t),this.Bv.Ap(t),this.Cv.Ap(t),t&&this.Dv.select(0)},e.prototype.xv=function(){var t=this.fu.cu();if(t){var i=h("#deleteGameConfirm")+"\n\n"+this.fu.du();a.Rq(null,i,function(i){i.vf.Rc(t)||console.error("Failed to delete gameId: "+t),i.fu.iu()},this)}},e.prototype.Ev=function(){var t=this.fu.cu();if(t){var i=h("#archiveGameConfirm")+"\n\n"+this.fu.du();a.Rq(null,i,function(i){i.vf.Uc(t)&&i.fu.iu()},this)}},e.prototype.Fv=function(){new u(this.vf,this.kd.bind(this))},e.prototype.kd=function(){this.fu.eu(this.vf.Hc()),this.Av(),this.fu.hu()},e.prototype.Wq=function(){var t=this.xq=o.Xo(null,"myGamesDialog dialog");t.xp(!1),t.Xo("dialogTitle").fp(h("#myGames"));var i=this.lv=t.Xo("mainDiv");this.fu=new s(this.lv,this,this.Av,h("#myGamesHelp")),this.vv=o.Ip(i,"delGameBtn",h("#deleteGame"),this.xv.bind(this)).cp(1.2),this.Bv=o.Ip(i,"archiveGameBtn",h("#archiveGame"),this.Ev.bind(this)).cp(1.2),this.Gv=o.Ip(i,"showArchiveBtn",h("#showArchivedGames"),this.Fv.bind(this)).cp(1.2);var n=i.Xo();o.Np(n,"inputLbl",h("#recentGames"));var e=[h("#none")].concat(this.vf.bd());this.Dv=o.Up(n,"recentGames",e,"byIndex"),this.Dv.u("change",r),this.Dv.Zt=this;var u=t.Xo("btnDiv");this.Cv=o.Ip(u,"loadBtn",h("#load"),this.mv.bind(this)).cp(1.2),o.Ip(u,"cancelBtn",h("#cancel"),this.ov.bind(this,!0)).cp(1.2),t.xp(!0),a.ip(t,document.body)},e.prototype.mv=function(){var t=this.Dv.value();if(t>0)return this.result.Cl=this.vf.Dc(t-1),void this.ov();var i=this.fu.cu();i&&(this.result.Cl=this.vf.Gc(i),this.ov())},e.prototype.ov=function(t){this.result.pv=!!t,this.Pq(this.result)&&a.mp(this.xq)}},{"../hh/Dome":58,"../hh/PopupDlg":64,"../hh/getText":72,"./GameList":89,"./MyArchivedGamesDlg":93,"./myGamesDlg.less":107}],95:[function(t,i,n){"use strict";function e(t,i){this.Pq=i,this.Hv=t.Nb,this.Iv=t.Iv,this.Jv=t.Jv,this.Wq(t),this.Kv(),this.Lv(),a.Dq(this.xq)}t("./newGameDlg.less");var r=t("../ai"),o=t("../loaders").Lo,s=t("../constants"),h=t("../hh/Dome"),u=t("../hh/getText"),a=t("../hh/PopupDlg"),p=t("../hh/Transit"),c=s.vb,l=s.wb,f=[5,7,9,13,19];i.exports=e,e.prototype.Kv=function(){var t=this.Hv;this.Mv.fp(t+" x "+t),o.vo(this.Nv,t+"x"+t+".png"),this.Nv.Bo("backgroundSize",Math.ceil(t/19*100)+"%"),this.Ov.Ap(t>5),this.Pv.Ap(t<19)},e.prototype.Qv=function(t){var i=f.indexOf(this.Hv)+t;this.Hv=f[i],this.Kv()},e.prototype.Lv=function(){o.vo(this.Rv[c].icon,this.Iv?"robot.png":"human.png"),o.vo(this.Rv[l].icon,this.Jv?"robot.png":"human.png")},e.prototype.Sv=function(t){t===c?this.Iv=!this.Iv:this.Jv=!this.Jv,this.Lv()},e.prototype.Wq=function(t){this.options=t;var i=this.xq=h.Xo(document.body,"newGameDialog dialog");i.xp(!1),i.Xo("dialogTitle").fp("Start a new game");var n=i.Xo("mainDiv"),e=n.Xo("centeredDiv").Xo("boardDiv");this.Rv=[],this.Rv[c]=h.Lp(e,"playerBtn",this.Sv.bind(this,c));var s=this.Tv=e.Xo("sizeBox");this.Pv=h.Lp(s,"sizeBtn",this.Qv.bind(this,1)),o.vo(this.Pv.icon,"up.png"),this.Nv=s.Xo("boardImgFrame").Xo("boardImg"),this.Mv=this.Nv.Xo("curSize"),this.Ov=h.Lp(s,"sizeBtn",this.Qv.bind(this,-1)),this.Ov.$o("down",!0),o.vo(this.Ov.icon,"down.png"),this.Rv[l]=h.Lp(e,"white playerBtn",this.Sv.bind(this,l)),this.Uv=h.Ip(n,"advancedBtn","More options >>",this.Vv.bind(this)).cp(1.3);var a=this.Wv=i.Xo("advancedDiv");h.Np(a,"inputLbl","Handicap:"),this.Xv=h.Up(a,"handicap",[0,2,3,4,5,6,7,8,9],null,t.Xv),h.Np(a,"inputLbl","Komi:"),this.Db=h.Up(a,"komi",[.5,1.5,2.5,3.5,4.5,5.5,6.5,7.5],null,t.Db);var p=a.Xo("rules");h.Np(p,"inputLbl","Rules:"),this.rules=h.Up(p,"rules",["Japanese","Chinese"],null,t.rules);var f=Object.keys(r.Tn);if(f.length>1){var d=a.Xo();h.Np(d,"inputLbl","Black AI:"),this.Un=h.Up(d,"defaultAi",f,null,r.Un.name),h.Np(d,"defAiInfo","(White AI always uses latest AI version)")}var g=h.Ip(i,"startBtn",u("#play"),this.Yv.bind(this)).cp(1.3);i.xp(!0);var v=this.Wv.np.clientHeight+g.np.clientHeight+24;this.Wv.Bo("marginTop",-v+"px")},e.prototype.Vv=function(){this.Zv?(this.$v=!this.$v,this.Zv.Dr(200)):(this.Wv.xp(!0),this.$v=!0,this.Zv=new p(this.Wv).Eq("marginTop","0").start(200)),this.Uv.Kp("More options"+(this.$v?" <<":" >>"))},e.prototype.Yv=function(){var t=this.options;t.Nb=this.Hv,t.Xv=~~this.Xv.value(),t.Db=parseFloat(this.Db.value()),t.Iv=this.Iv,t.Jv=this.Jv,r.Un=this.Un?r.Tn[this.Un.value()]:r.Un,t.rules=this.rules.value(),this.ov()},e.prototype.ov=function(){this.close(),this.Pq(this.options)},e.prototype.close=function(){h.removeChild(document.body,this.xq)}},{"../ai":52,"../constants":53,"../hh/Dome":58,"../hh/PopupDlg":64,"../hh/Transit":68,"../hh/getText":72,"../loaders":80,"./newGameDlg.less":108}],96:[function(t,i,n){"use strict";function e(t){this.parent=t,this._v=null}t("./progressLog.less");var r=t("../hh/NotificationPopup");i.exports=e,e.prototype.start=function(t,i){this._v=new r(this.parent,null,{className:"progressLog",yq:!0,Aq:!0,title:t}),this._v.Cq(!1),this._v.Bq(i),this._v.show()},e.prototype.stop=function(t,i){t&&this._v.Bq(t,i),this._v.Cq(!0),this._v=null},e.prototype.Bq=function(t,i){this._v.Bq(t,i)}},{"../hh/NotificationPopup":62,"./progressLog.less":109}],97:[function(t,i,n){"use strict";function e(t,i){this.ns=t,this.Cl=i,this.ju=t.ju,this.xf=!1,this.qa=null,this.aw=null,this.bw=null,this.Zu()}function r(){this.ku.dv(this.move)}function o(t){return t?String.fromCharCode(64+t):g}t("./reviewUi.less");var s=t("../loaders").Lo,h=t("../constants"),u=t("../hh/ContextMenu"),a=t("../hh/Dome"),p=t("../hh/getText"),c=t("../../config/misc.json"),l=t("../Move"),f=t("../hh/PopupDlg"),d=l.tb,g="*";i.exports=e,e.prototype.Zu=function(){this.xf&&this.cw(),this.xf=!1,this.qa=null,this.bookmarks=[],this.dw=this.ew=-1,this.fw=[]},e.prototype.Iu=function(t,i,n,e){this.aw=a.Xp(),this.gw=a.Ip(t,"study"," ",this.hw.bind(this)).cp(e),a.Ip(i,"back10","<<",this.iw.bind(this)).cp(e),a.Ip(i,"back1","<",this.jw.bind(this)).cp(e),a.Ip(i,"forw1",">",this.kw.bind(this)).cp(e),a.Ip(i,"forw10",">>",this.lw.bind(this)).cp(e),this.mw=a.Ip(n,"toggleMarkBtn",".",this.nw.bind(this)).cp(e),this.ow=a.Lp(n,"cycleBtn",this.pw.bind(this),".").cp(e),s.vo(this.ow.icon,"cycle.png"),this.qw=a.Lp(null,"delMoveBtn",this.rw.bind(this),"."),s.vo(this.qw.icon,"trash.png"),a.Yp()},e.prototype.zu=function(){this.gw.Kp(this.xf?"...":p("#review")),this.aw.xp(["back1","back10","forw1","forw10","cycleBtn","toggleMarkBtn"],this.xf),this.xf&&this.sw()},e.prototype.hw=function(){if(!this.xf)return this.tw();var t=new u({hp:!0});t.ap(p("#rewindAll"),this.uw.bind(this),{name:"rewind",bp:"empty.png"}),t.ap(p("#gotoLastMove"),this.vw.bind(this),{name:"lastReal",bp:"lastReal.png"}),t.ap(p("#bookmark"),this.nw.bind(this),{name:"bookmark",bp:"cycle.png"}),t.ap(p("#evalScore"),this.ww.bind(this),{name:"scoring",bp:"scoring.png"}),this.qa.ng()||t.ap(p("#prune"),this.xw.bind(this),{name:"prune",bp:"prune.png"}),t.ap(p("#endStudy"),this.cw.bind(this)),t.gp(this.gw,1,0)},e.prototype.ww=function(){var t=this.ns.yw(h.vb).Ln();this.ns.ut.Yt(t[0]),this.bw.fp(this.ns.scorer.Tg(t[1]).join("\n"))},e.prototype.nw=function(){this.dw===-1?this.zw():this.Aw()},e.prototype.zw=function(){this.dw=this.ew=this.bookmarks.length,this.bookmarks.push(this.qa.getBookmark()),this.sw()},e.prototype.Aw=function(){this.bookmarks.splice(this.dw,1),this.dw=-1,this.sw(),this.Bw=!0},e.prototype.pw=function(){if(this.dw!==-1&&1===this.bookmarks.length)return new f(null,p("#cycleBookmarks"),p("#helpTip"));this.dw!==-1||this.Bw||this.zw();var t=(this.ew+1)%this.bookmarks.length,i=this.bookmarks[t];this.qa.sg(i),this.Cl.Qb();for(var n=this.qa.wg(i),e=0;e<n.length;e++)this.Cl.ac(n[e]);this.Cw()},e.prototype.rw=function(){var t=this.qa;!t.ng()&&t.Gg()&&t.Kg()&&(this.fw.pop(),this.Cl.ac("half_undo"),this.Cw())},e.prototype.xw=function(){var t=this.qa;if(!t.ng()){for(var i,n;(i=t.lg(),t.tg())&&(this.Cl.ac("half_undo"),!t.ng())&&!(n=t.Ya()););var e=t.Ig(i);if(e<c["confirm-delete-moves"])return this.Dw(i);this.Cw();var r=o(n?n.indexOf(i):1),s=t.mg()+2,h=p("#pruneConfirm",r,s+"-"+i,e);f.Rq(null,h,this.Dw.bind(this,i))}},e.prototype.Dw=function(t){var i=this.qa.mg()+1;this.qa.Jg(t),this.fw.splice(i),this.Cw()},e.prototype.tw=function(){this.xf=!0,this.qa=this.ju.Hf(),this.bw=this.ns.Du,this.ns.zu(),this.Cw()},e.prototype.cw=function(){this.xf=!1,this.Ew(),this.ju.If(),this.Fw(),this.ns.ou(),this.ns.Fu(),this.ns.zu(),this.ns.Wu()},e.prototype.dv=function(t){if(!this.Cl.ac(t))return this.ns.statusMessage(this.Cl.bc().join("\n"));this.qa.ug(t),this.Cw()},e.prototype.jw=function(){this.qa.tg()&&(this.Cl.ac("half_undo"),this.Cw())},e.prototype.iw=function(){for(var t=this.qa,i=t.Hg()-1,n=t.mg();t.tg()&&(this.Cl.ac("half_undo"),!t.Ya())&&(--n!==i||!t.ng()););this.Cw()},e.prototype.kw=function(){this.Gw&&(this.qa.ug(this.Gw),this.Cl.ac(this.Gw),this.Cw())},e.prototype.lw=function(){for(var t=this.qa,i=t.Hg()-1,n=t.mg();this.Gw&&(t.ug(this.Gw),this.Cl.ac(this.Gw),!t.Ya())&&(++n!==i||!t.ng());)this.Hw();this.Cw()},e.prototype.Hw=function(){for(var t=this.qa.xg(),i=!0,n=0;n<t.length;n++)if(t[n]!==this.fw[n]){i=!1;break}i?this.Gw=this.fw[n]:(this.fw=t,this.Gw=null),this.Gw||(this.Gw=this.qa.$a())},e.prototype.uw=function(){this.qa.Xa(),this.Cl.Qb(),this.Cw()},e.prototype.vw=function(){this.Ew(),this.Cw()},e.prototype.Ew=function(){for(this.qa.Xa(),this.Cl.Qb();;){var t=this.qa.Za();if(!t)break;this.Cl.ac(t)}},e.prototype.Cw=function(){this.ns.ou(),this.Hw();var t=this.qa,i=t.lg(),n=t.Gg();this.dw=-1;for(var e=0;e<this.bookmarks.length;e++)if(t.vg(this.bookmarks[e])){this.dw=this.ew=e;break}this.aw.Ap(["forw1","forw10"],!!this.Gw),this.aw.Ap(["back1","back10"],!!i),this.sw(),this.Iw(i,n,this.Gw),n&&this.ns.Wu(),this.ns.bv&&i&&i.length<=3&&this.ns.Jw(i)},e.prototype.sw=function(){this.Bw=!1;var t=this.bookmarks.length>0;this.ow.xp(t),this.mw.xp(t),t&&(this.dw!==-1?(this.ow.Kp(this.dw+1+"/"+this.bookmarks.length),this.mw.Kp("Remove")):(this.ow.Kp(""),this.mw.Kp("Add")))},e.prototype.Fw=function(){this.bw.vp()},e.prototype.Iw=function(t,i,n){if(this.bw.vp(),this.ns.Fu(n),i)t&&!this.qa.ng()&&(this.qw.sp(this.bw),this.qw.Kp(t));else{var e=this.qa.Ya();e&&this.Kw(e)}this.Lw()},e.prototype.Kw=function(t){for(var i=0;i<t.length;i++){var n=t[i];if(n){var e=d(n),s=o(i),h=this.qa.Ig(n);e?this.ns.ut.Qt(s,e[0],e[1]):s=n;var u=a.Ip(this.bw,"variationBtn",s,r).dp(1.3);u.ku=this,u.move=n,h&&u.Xo("btnInfo").fp(h)}}},e.prototype.Lw=function(){var t=this.qa.yg();if(t&&t.lh){var i=t.lh.replace(/\\\]/g,"]");this.bw.Xo("moveComment").fp(i)}}},{"../../config/misc.json":8,"../Move":23,"../constants":53,"../hh/ContextMenu":57,"../hh/Dome":58,"../hh/PopupDlg":64,"../hh/getText":72,"../loaders":80,"./reviewUi.less":110}],98:[function(t,i,n){"use strict";function e(t){this.qc=t;var i=this.xq=u.Xo(null,"settingDlg dialog"),n=i.Xo("dialogTitle").fp(p("#settings"));f(n,r),n.Nq=this,this.Mw=0;var e=i.Xo("content"),h=c.Kq();u.Np(e,"inputLbl",p("#colorTheme")+":"),u.Up(e,"theme",h,null,c.Hq).u("change",function(){var i=this.value();c.Jq(i),t.$c("theme",i)});var a=e.Xo("cloudDiv");u.Np(a,"inputLbl",p("#syncMyGames")+":"),u.Ip(a,"dropboxBtn",p("#setupDropbox"),o).cp(1.2);var d=i.Xo("btnDiv");u.Ip(d,"okBtn",p("#ok"),s).cp(1.2).Nq=this,l.ip(i,document.body)}function r(){++this.Nq.Mw%4||new h(this.Nq.qc)}function o(){a.rs()}function s(){l.mp(this.Nq.xq)}t("./settingDlg.less");var h=t("./DevDlg"),u=t("../hh/Dome"),a=t("../net/DropboxHelper"),p=t("../hh/getText"),c=t("../hh/Painter"),l=t("../hh/PopupDlg"),f=t("../hh/tapBehavior");i.exports=e},{"../hh/Dome":58,"../hh/Painter":63,"../hh/PopupDlg":64,"../hh/getText":72,"../hh/tapBehavior":76,"../net/DropboxHelper":83,"./DevDlg":88,"./settingDlg.less":111}],99:[function(t,i,n){function e(){this.qc=r,this.Ow=!1,this.vf=new f(r),this.uf=new c,this.ju=new S(this.uf,this.vf),this.Pw=new l(this.ju),this.Qw=new q(document.body),this.Rw=p.qs(r),this.Sw=this.Tw.bind(this),this.Uw()}var r,o=t("../ai"),s=t("../../config/colors.json"),h=t("contra"),u=t("../constants"),a=t("../hh/Dome"),p=t("../net/DropboxHelper"),c=t("../GameLogic"),l=t("./GameUi"),f=t("../GameVault"),d=t("../hh/GetFile"),g=t("../hh/getText"),v=t("../net/goSites"),y=t("../hh"),m=t("./ImportDlg"),b=t("../loaders"),w=t("../hh/LocalPref"),x=t("../log"),k=t("../main"),j=t("./MyGamesDlg"),z=t("./NewGameDlg"),C=t("../hh/Painter"),S=t("../PendingGame"),B=t("../hh/PopupDlg"),q=t("./ProgressLog"),M=t("./SettingDlg"),D=t("../net/SyncHelper"),G=t("./UiTopMenu"),A=t("../hh/urlHelper"),E=u.wb,T=u.vb,N=u.ao,P=u._n;n.Nw=function(){r=new w("1g0",1),r.mo(),C.Iq(s,r.ad("theme",".neonBlack")),y.init(C),p.ps(r)||(document.body.style.height=a.rp+"px",h.ms([function(t){b.init("1g0",t)},function(){new e}]))},e.prototype.Uw=function(){a.Zp(k.appName+(this.mu?"":" dev")),window.addEventListener("beforeunload",this.Vw.bind(this,"unloading")),window.addEventListener("visibilitychange",this.Vw.bind(this,"visibility")),window.setInterval(this.Vw.bind(this,"autosave"),3e5),this.lu=r.ad("newGameIndex",1),this.Ww=r.ad("newGameSize",9),this.Xw=r.ad("newGameKomi",5.5),this.Yw=r.ad("newGameHandCount",0),this.Zw=r.ad("newGameRules","Japanese"),this.$w=r.ad("newGamePlayerB",N),this._w=r.ad("newGamePlayerW",P),this.ax=new G(this.bx.bind(this)),this.ax.ex(!!this.Rw),this.Pw.u("backToNewGame",this.gx.bind(this)),this.Pw.u("nextPlayerTurn",this.hx.bind(this)),this.Pw.u("playerMove",this.ix.bind(this));var t=this.ju._c();if(!t||!this.jx(t)){var i=A.hs(window.location.hash),n=i["site"],e=i["loadGame"];if(n&&e)return this.kx({site:n,id:e,lx:!0});this.mx()}},e.prototype.Vw=function(t){("visibility"!==t?document.hidden:!document.hidden)||(this.Ow&&this.ju.Zc(),r.$c("newGameIndex",this.lu),r.mq())},e.prototype.bx=function(t){switch(t){case"newGame":this.gx();break;case"myGames":this.nx(this.ox);break;case"importGame":this.nx(this.px);break;case"exportGame":this.qx();break;case"syncGame":this.sx();break;case"syncMyGames":this.nx(this.tx);break;case"settings":new M(r);break;case"downloadLatest":this.kx(this.ax.ux)}},e.prototype.vx=function(){this.ax.ex(!!this.Rw),this.Pw.$u()},e.prototype.wx=function(){this.Pw._u()||this.xx||this.mx()},e.prototype.gx=function(){this.nx(this.mx)},e.prototype.mx=function(){if(!this.xx){this.yx();var t={Nb:this.Ww,Xv:this.Yw,Db:this.Xw,Iv:this.$w,
Jv:this._w,rules:this.Zw},i=this;this.xx=new z(t,function(t){return i.Ww=t.Nb,i.Yw=t.Xv,i.Xw=t.Db,i.Zw=t.rules,i.$w=t.Iv,i._w=t.Jv,r.$c("newGameSize",i.Ww),r.$c("newGameKomi",i.Xw),r.$c("newGameHandCount",i.Yw),r.$c("newGameRules",i.Zw),r.$c("newGamePlayerB",i.$w),r.$c("newGamePlayerW",i._w),i.zx(),i.xx=null,!0})}},e.prototype.ox=function(){this.yx();var t=this;new j(this.vf,function(i){return i.pv?(t.wx(),!0):t.jx(i.Cl)})},e.prototype.px=function(){this.yx();var t=this;new m(this.vf,function(i){return i.pv?(t.wx(),!0):t.jx(i.Cl)})},e.prototype.Ax=function(){this.Ow&&(this.ju.zc(),this.Pw.Yu(),this.Ow=!1)},e.prototype.nx=function(t){if(!this.Ow)return t&&t.call(this);var i=this.ju.Df(),n=this.ju.zc();return this.Pw.Yu(),this.Ow=!1,i?t&&t.call(this):this.Bx(n,t)},e.prototype.Bx=function(t,i){var n=this;new B(null,g("#confirmSave"),g("#confirmTitle"),{buttons:[g("#yes"),g("#no")]},function(e){0!==e.Oq&&n.ju.Ef(t),i&&i.call(n)})},e.prototype.yx=function(){this.nx(),this.vx()},e.prototype.jx=function(t){var i=[];if(!this.ju.Bf(t,i))return new B(null,i.join("\n")),this.vx(),!1;this.xx&&(this.xx=this.xx.close());var n=this.Cx(T),e=this.Cx(E);return this.Dx(n,e),!0},e.prototype.zx=function(){this.ju.yf(this.Ww,this.Yw,this.Xw,this.Zw,this.$w,this._w),this.ju.Gf("source",k.appName),this.ju.Gf("event",this.lu++),this.Dx(this.$w,this._w)},e.prototype.Dx=function(t,i){this.Ex(t,i),this.Pw.Tu(t,i),this.Ow=!0,this.Pw.Uu(),this.ax.Fx(this.ju.Oa(),!!this.Rw)},e.prototype.Cx=function(t){var i=this.ju.Oa(),n=i.mb(t===T?"playerBlack":"playerWhite");return n&&n.indexOf(o.Vn.en)>=0?N:P},e.prototype.Ex=function(t,i){this.Ru=[t,i],this.Gx=[];for(var n=this.ju.Oa(),e=T;e<=E;e++){var r=e===T?"playerBlack":"playerWhite",o=n.mb(r);if(this.Ru[e]){var s=this.yw(e).constructor;o||this.ju.Gf(r,s.en+"-"+s.fn)}else o||this.ju.Gf(r,"human")}},e.prototype.yw=function(t){var i=this.Gx[t];if(i)return i;var n=t===T?o.Un:o.Vn;return i=this.Gx[t]=new n(this.uf,t)},e.prototype.hx=function(t,i){this.Ru[t]&&this.Gx[t].Hn(i,this.Sw)},e.prototype.Tw=function(t){this.Pw.Ju(t)},e.prototype.ix=function(t,i){},e.prototype.qx=function(){var t=this.ju.Ff();a.oo(t.oa,t.id+".sgf")},e.prototype.kx=function(t){this.Qw.start(g("#getLatestGame"),g("#retrieving",t.site,t.id));var i=v.ot(t.site,t.id),n=this;d.oo(i,function(i,e){if(i)return n.Qw.stop(i,x.ERROR);var r=[];n.Ax();var o=n.ju.Yc(e,r);if(!o)return n.Qw.stop(r.join("\n"),x.ERROR);n.jx(o),n.Qw.stop(g("#retrieved")),t.lx&&A.ls()})},e.prototype.Hx=function(t){if(this.Ix)return t(null,this.Ix);var i=new D(r,this.Rw,this.vf,this.Qw.Bq.bind(this.Qw)),n=this;i.connect(function(e){if(e)return t(e);n.Ix=i,t(null,i)})},e.prototype.sx=function(){this.Qw.start(g("#syncGame"),g("#syncStart"));var t=this;this.Hx(function(i,n){if(i)return t.Qw.stop();var e=t.vf.Ac();t.Ax(),n.ft(e,function(i){i||t.jx(e),t.Qw.stop()})})},e.prototype.tx=function(){this.mx(),this.Qw.start(g("#syncMyGames"),g("#syncStart"));var t=this;this.Hx(function(i,n){if(i)return t.Qw.stop();n.gt(function(){t.Qw.stop()})})}},{"../../config/colors.json":7,"../GameLogic":14,"../GameVault":15,"../PendingGame":24,"../ai":52,"../constants":53,"../hh":73,"../hh/Dome":58,"../hh/GetFile":59,"../hh/LocalPref":60,"../hh/Painter":63,"../hh/PopupDlg":64,"../hh/getText":72,"../hh/urlHelper":79,"../loaders":80,"../log":81,"../main":82,"../net/DropboxHelper":83,"../net/SyncHelper":84,"../net/goSites":85,"./GameUi":90,"./ImportDlg":91,"./MyGamesDlg":94,"./NewGameDlg":95,"./ProgressLog":96,"./SettingDlg":98,"./UiTopMenu":100,"contra":134}],100:[function(t,i,n){"use strict";function e(t){this.Jx(t)}function r(t,i){return i?t+i:""}t("./uiTopMenu.less");var o=t("../hh/Dome"),s=t("../hh/getText"),h=t("../net/goSites"),u=t("../main"),a=t("../hh/TopMenu");i.exports=e,e.prototype.Jx=function(t){var i=this.ar=new a({Uq:t,jr:u.appName+" V"+u.appVersion});i.dr("settings",s("#settings"),"settings.png"),i.br(),i.dr("myGames",s("#myGames"),"myGames.png"),i.dr("newGame",s("#newGame"),"robot.png"),i.dr("importGame",s("#importGame"),"import.png"),this.Kx=i.dr("syncMyGames",s("#syncMyGames"),"cloudSync.png"),i.br(),this.Lx=i.ap(o.Xo(null,"gameInfo")),this.Mx=i.dr("downloadLatest","","refresh.png"),this.Nx=i.dr("syncGame",s("#syncGame")),this.Ox=i.dr("exportGame",s("#exportGame")),i.br()},e.prototype.ex=function(t){this.ar.$q(s("#appTitle")),this.Nx.xp(!1),this.Kx.xp(t),this.Lx.fp(""),this.Mx.xp(!1),this.Ox.xp(!1)},e.prototype.Fx=function(t,i){this.ar.$q(t.mb("playerWhite")+" VS "+t.mb("playerBlack")+" (B)");var n="komi: "+(t.mb("komi")||0);n+=r(", hand: ",t.mb("handicap")),n+=r(", rules: ",t.mb("rules")),n+=r(", date: ",t.mb("date")),n+=r(", source: ",t.mb("source")),n+=r(", event: ",t.mb("event")),n+=r(", place: ",t.mb("place")),n+=r(", result: ",t.mb("result")),this.Lx.fp(n),this.Nx.xp(i);var e=this.ux=h.nt(t);e&&this.Mx.fp(s("#downloadLatest",e.site)),this.Mx.xp(!!e),this.Ox.xp(!0)}},{"../hh/Dome":58,"../hh/TopMenu":66,"../hh/getText":72,"../main":82,"../net/goSites":85,"./uiTopMenu.less":113}],101:[function(t,i,n){var e=".devDlg {\n  z-index: 2000;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  width: 60%;\n}\n.devDlg .content {\n  padding: 1rem;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.devDlg .content .cloudDiv {\n  margin-top: 1rem;\n}\n.devDlg .content .dropboxBtn {\n  display: inline-block;\n  margin: -1rem 0 0 0.5rem;\n  padding: 1rem;\n}\n.devDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n  text-align: right;\n}\n.devDlg .btnDiv .closeBtn {\n  min-width: 20%;\n}\n";t("lessify")(e),i.exports=e},{"lessify":151}],102:[function(t,i,n){var e=".gameList {\n  position: relative;\n  border: 1px solid #a9a9a9;\n  border-radius: 6px;\n  max-height: 20rem;\n  min-height: 9rem;\n  overflow-y: auto;\n  overflow-x: hidden;\n  background-color: #fff;\n  font-size: 1.2rem;\n}\n.gameList .oneGame {\n  position: relative;\n  padding: 5px;\n}\n.gameList .oneGame .text {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  position: absolute;\n}\n.gameList .oneGame.selected {\n  background-color: #b7b29e;\n  border-radius: 5px;\n}\n.gameList .emptyMsg {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  position: absolute;\n  width: 100%;\n  text-align: center;\n  font-style: italic;\n  opacity: 0.7;\n}\n";t("lessify")(e),i.exports=e},{"lessify":151}],103:[function(t,i,n){"use strict";var e=t("../ai"),r=[{name:"Chuckie",Zn:t("../ai/chuckie")}];e.Yn(r),t("./UiMain").Nw()},{"../ai":52,"../ai/chuckie":51,"./UiMain":99}],104:[function(t,i,n){var e=".importDialog {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  top: 45%;\n}\n.importDialog .mainDiv .loadGameDiv {\n  display: inline-block;\n  margin: 1rem 0;\n}\n.importDialog .mainDiv .fileInputBtn {\n  vertical-align: middle;\n  min-width: 6rem;\n}\n.importDialog .mainDiv .movesInput {\n  width: 30%;\n}\n.importDialog .mainDiv .movesDesc {\n  max-width: 25%;\n}\n.importDialog .btnDiv {\n  display: inline-block;\n  width: 100%;\n}\n.importDialog .btnDiv .loadBtn,\n.importDialog .btnDiv .cancelBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  min-width: 20%;\n}\n";t("lessify")(e),i.exports=e},{"lessify":151}],105:[function(t,i,n){var e=".moveIndicator {\n  position: relative;\n  height: 100%;\n  text-align: center;\n  padding: 1px 0 0 1px;\n}\n.moveIndicator.black .icon {\n  background-color: #000;\n}\n.moveIndicator.black .text {\n  color: #fff;\n  text-shadow: 0 0 3px #000;\n}\n.moveIndicator.white .icon {\n  background-color: #fff;\n}\n.moveIndicator.white .text {\n  color: #000;\n  text-shadow: 0 0 3px #fff;\n}\n.moveIndicator .label {\n  position: relative;\n  width: 100%;\n  font-size: 0.8rem;\n  line-height: 0.8rem;\n}\n.moveIndicator .stone {\n  width: calc(100% - 0.8rem);\n  height: calc(100% - 0.8rem);\n}\n.moveIndicator .icon {\n  position: relative;\n  left: 0.4rem;\n  top: -1px;\n  width: 100%;\n  height: 100%;\n  border: 1px solid rgba(0, 0, 0, 0.4);\n  border-radius: 50%;\n}\n.moveIndicator .text {\n  position: absolute;\n  width: 100%;\n  top: calc(0.4rem + 50% - 0.5em);\n  line-height: 1em;\n  font-size: 1em;\n  font-weight: bold;\n}\n";t("lessify")(e),i.exports=e},{"lessify":151}],106:[function(t,i,n){var e=".myArchivedGamesDialog {\n  margin: 0 65px;\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.myArchivedGamesDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.myArchivedGamesDialog .delGameBtn,\n.myArchivedGamesDialog .restoreGameBtn {\n  vertical-align: top;\n  margin: 20px 12px 20px 0;\n  min-width: 20%;\n}\n.myArchivedGamesDialog .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.myArchivedGamesDialog .btnDiv .closeBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  width: 20%;\n  font-size: 1.5rem;\n}\n";t("lessify")(e),i.exports=e},{"lessify":151}],107:[function(t,i,n){var e=".myGamesDialog {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.myGamesDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.myGamesDialog .mainDiv .recentGamesDropDwn {\n  max-width: calc(100% - 230px);\n  margin: 0 0 0.5rem 0;\n}\n.myGamesDialog .delGameBtn,\n.myGamesDialog .archiveGameBtn,\n.myGamesDialog .showArchiveBtn {\n  vertical-align: top;\n  margin: 1rem 0.7rem 1rem 0;\n  min-width: 20%;\n}\n.myGamesDialog .btnDiv {\n  width: 100%;\n  display: inline-block;\n}\n.myGamesDialog .btnDiv .loadBtn,\n.myGamesDialog .btnDiv .cancelBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  width: 20%;\n  font-size: 1.5rem;\n}\n";t("lessify")(e),i.exports=e},{"lessify":151}],108:[function(t,i,n){var e=".newGameDialog {\n  margin-top: 2rem;\n}\n.newGameDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.newGameDialog .mainDiv .centeredDiv {\n  margin-top: 20px;\n  text-align: center;\n}\n.newGameDialog .boardDiv .sizeBox {\n  display: inline-block;\n  position: relative;\n  width: 240px;\n  max-width: 33%;\n  text-align: center;\n  margin: 10px 18px 0 20px;\n}\n.newGameDialog .playerBtn {\n  position: relative;\n  vertical-align: top;\n  top: 144px;\n  left: 2px;\n  width: 200px;\n  max-width: 23%;\n  height: 150px;\n  max-height: initial;\n}\n.newGameDialog .playerBtn .playerBtnIcon {\n  -webkit-filter: brightness(0);\n  filter: brightness(0);\n  background-size: contain;\n}\n.newGameDialog .playerBtn.white .playerBtnIcon {\n  -webkit-filter: invert(1) grayscale(1);\n  filter: invert(1) grayscale(1);\n}\n.newGameDialog .sizeBtn {\n  position: relative;\n  width: 170px;\n  max-width: 88%;\n  height: 100px;\n  max-height: initial;\n  margin: 0 0 10px;\n}\n.newGameDialog .sizeBtn .sizeBtnIcon {\n  background-size: 80%;\n  -webkit-filter: brightness(0);\n  filter: brightness(0);\n}\n.newGameDialog .sizeBtn.down {\n  margin-top: 4px;\n}\n.newGameDialog .boardImgFrame {\n  display: inline-block;\n  position: relative;\n  width: 91%;\n  height: 195px;\n  background-color: #d1cac1;\n  border-radius: 5px;\n  box-shadow: black 3px 3px 6px;\n}\n.newGameDialog .boardImgFrame .boardImg {\n  width: 100%;\n  height: 100%;\n  background-position: 50%;\n  background-repeat: no-repeat;\n}\n.newGameDialog .boardImgFrame .curSize {\n  position: absolute;\n  top: -4px;\n  width: 100%;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  cursor: default;\n  text-align: center;\n  color: white;\n  font-size: 2.5rem;\n  text-shadow: 3px 3px 5px #000;\n}\n.newGameDialog .advancedBtn {\n  width: 25%;\n  margin: 20px 10px 7px;\n}\n.newGameDialog .advancedDiv .rules {\n  display: inline-block;\n  margin-left: 87px;\n}\n.newGameDialog .advancedDiv .defAiInfo {\n  font-size: 0.8rem;\n  font-style: italic;\n  width: 400px;\n  display: inline-block;\n}\n.newGameDialog .startBtn {\n  margin: 16px 0 10px -5px;\n  position: relative;\n  left: 75%;\n  width: 25%;\n  font-size: 1.5rem;\n}\n";t("lessify")(e),i.exports=e},{"lessify":151}],109:[function(t,i,n){var e=".notifPopup.progressLog {\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  margin: 0 auto;\n  width: 95%;\n  max-width: 800px;\n  border: 1px solid rgba(255, 255, 255, 0.33);\n}\n.notifPopup.progressLog .content {\n  font-size: 1.2rem;\n}\n";t("lessify")(e),i.exports=e},{"lessify":151}],110:[function(t,i,n){var e=".gameUi .btnIcon {\n  -webkit-filter: sepia(1) brightness(7);\n  filter: sepia(1) brightness(7);\n}\n.gameUi .statusBar .btn {\n  margin: 1px;\n  height: calc(100% - 2px);\n}\n.gameUi .statusBar .delMoveBtn {\n  float: left;\n}\n.gameUi .statusBar .delMoveBtn .btnText {\n  top: 59%;\n  color: #000;\n  text-shadow: 0 0 3px #fff;\n}\n.gameUi .statusBar .variationBtn {\n  margin-right: 0.2rem;\n}\n.gameUi .statusBar .variationBtn .btnInfo {\n  position: absolute;\n  right: 5px;\n  bottom: 1px;\n  color: #aaa;\n}\n.gameUi .statusBar .moveComment {\n  margin-top: 2px;\n  background-color: white;\n  color: black;\n  border-radius: 5px;\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  padding: 2px 4px;\n  white-space: pre-wrap;\n  text-align: left;\n  font-size: 1rem;\n  font-weight: normal;\n}\n.gameUi .mainControls .btn.back10,\n.gameUi .mainControls .btn.back1,\n.gameUi .mainControls .btn.forw1,\n.gameUi .mainControls .btn.forw10 {\n  max-width: 22%;\n}\n.gameUi .mainControls .btn.cycleBtn {\n  margin: 0 0 0.3rem 0.3rem;\n  max-width: calc(50% - 5px);\n}\n.gameUi .mainControls .btn.cycleBtn .btnText {\n  left: 4px;\n  color: #fff;\n}\nbody .contextMenu {\n  border: 1px solid #58636d;\n  background-color: #3b3d47;\n}\nbody .contextMenu .menuItem {\n  padding-right: 20px;\n  background-color: #000;\n  border: 1px solid #505050;\n}\nbody .contextMenu .menuItem .icon {\n  -webkit-filter: grayscale(1) brightness(7);\n  filter: grayscale(1) brightness(7);\n}\nbody .contextMenu .menuItem.scoring .icon {\n  -webkit-filter: brightness(0.8);\n  filter: brightness(0.8);\n}\n";t("lessify")(e),i.exports=e},{"lessify":151}],111:[function(t,i,n){var e=".settingDlg {\n  z-index: 2000;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  width: 60%;\n}\n.settingDlg .content {\n  padding: 1rem;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.settingDlg .content .cloudDiv {\n  margin-top: 1rem;\n}\n.settingDlg .content .dropboxBtn {\n  display: inline-block;\n  margin: -1rem 0 0 0.5rem;\n  padding: 1rem;\n}\n.settingDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n  text-align: right;\n}\n.settingDlg .btnDiv .okBtn {\n  min-width: 20%;\n}\n";t("lessify")(e),i.exports=e},{"lessify":151}],112:[function(t,i,n){var e=".gameUi {\n  padding: 2px;\n}\n.gameUi .board {\n  margin: 5px 0;\n  background-color: #402f23;\n  border-radius: 7px;\n}\n.gameUi .board .wgo-board {\n  margin: 0 auto;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  /* disables grey shade on long-tap for Safari */\n  /* Below avoid issues when tap-hold on Android */\n  -webkit-user-select: none;\n  -webkit-touch-callout: none;\n}\n.gameUi .boardDesc {\n  margin-top: 3px;\n  font-weight: bold;\n  font-style: italic;\n}\n.gameUi .underBoard {\n  padding-bottom: 5px;\n}\n.gameUi .statusBar {\n  position: relative;\n  box-sizing: content-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: row;\n  flex-direction: row;\n  background-color: #dfc2ac;\n  border: rgba(0, 0, 0, 0.7) 1px solid;\n  border-radius: 7px;\n}\n.gameUi .statusBar .msgBar {\n  -webkit-flex: 1;\n  flex: 1;\n  height: 100%;\n  white-space: pre-wrap;\n  overflow-y: auto;\n  font-size: 1rem;\n  font-weight: bold;\n  text-align: center;\n}\n.gameUi .mainControls {\n  margin-top: 10px;\n}\n.gameUi .mainControls .mainDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 50%;\n  text-align: center;\n}\n.gameUi .mainControls .mainDiv .btn {\n  margin: 0 3px;\n  max-width: 45%;\n}\n.gameUi .mainControls .leftDiv,\n.gameUi .mainControls .rightDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 25%;\n}\n.gameUi .mainControls .leftDiv .btn,\n.gameUi .mainControls .rightDiv .btn {\n  background-color: #5c4137;\n  color: #faebd7;\n  max-width: 48%;\n}\n.gameUi .mainControls .leftDiv {\n  text-align: left;\n}\n.gameUi .mainControls .leftDiv .animatedDiv {\n  margin: 16px;\n}\n.gameUi .mainControls .rightDiv {\n  text-align: right;\n}\n";t("lessify")(e),i.exports=e},{"lessify":151}],113:[function(t,i,n){var e=".topMenu .menuOption .icon {\n  -webkit-filter: invert(0.6) grayscale(1);\n  filter: invert(0.6) grayscale(1);\n}\n.topMenu .menuOption.myGames .icon {\n  background-size: auto 45%;\n}\n.topMenu .menuOption.newGame .icon {\n  background-position-y: 0;\n}\n.topMenu .gameInfo {\n  padding: 1rem;\n  font-size: 1.3rem;\n  background-color: #282a2b;\n}\n";t("lessify")(e),i.exports=e},{"lessify":151}],114:[function(t,i,n){!function(t,i){"use strict";var n=document.getElementsByTagName("script"),e=n[n.length-1].src.split("?")[0],r=e.split("/").slice(0,-1).join("/")+"/",o={version:"2.3.1",B:1,W:-1,Px:!0,Qx:r,lang:"en",Rx:{Sx:{}}};o.opera=navigator.userAgent.search(/(opera)(?:.*version)?[ \/]([\w.]+)/i)!=-1,o.Tx=navigator.userAgent.search(/(webkit)[ \/]([\w.]+)/i)!=-1,o.Ux=navigator.userAgent.search(/(msie) ([\w.]+)/i)!=-1,o.Vx=navigator.userAgent.search(/(mozilla)(?:.*? rv:([\w.]+))?/i)!=-1&&!o.Tx&&!o.Ux,o.Wx=function(t){var i=o.Rx[o.lang][t]||o.Rx.Sx[t];if(i){for(var n=1;n<arguments.length;n++)i=i.replace("$",arguments[n]);return i}return t},o.Xx=function(t,i){return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.super=t,i},o.Yx=function(){throw Error("unimplemented abstract method")},o.clone=function(t){if(t&&"object"==typeof t){var i=t.constructor==Array?[]:{};for(var n in t)t[n]==t?i[n]=t:i[n]=o.clone(t[n]);return i}return t},o.Zx=function(t){return t&&"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t};var s=function(i,n){var n=n||{};for(var e in n)this[e]=n[e];for(var e in o.At.default)void 0===this[e]&&(this[e]=o.At.default[e]);for(var e in s.Fq.default)void 0===this.Gq[e]&&(this.Gq[e]=s.Fq.default[e]);this.$x=this.section.left,this._x=this.section.top,this.ay=this.size-1-this.section.right,this.by=this.size-1-this.section.bottom,this.init(),i.appendChild(this.Et),this.ey=t.devicePixelRatio||1,this.width&&this.height?this.gy(this.width,this.height):this.width?this.dp(this.width):this.height&&this.cp(this.height)};s.Fq={},s.Fq.hy={shadowColor:"rgba(32,32,32,0.5)",shadowTransparentColor:"rgba(32,32,32,0)",shadowBlur:0,shadowSize:function(t){return t.shadowSize},markupBlackColor:"rgba(255,255,255,0.8)",markupWhiteColor:"rgba(0,0,0,0.8)",markupNoneColor:"rgba(0,0,0,0.8)",markupLinesWidth:function(t){return t.iy?t.jy/7:t.lineWidth},gridLinesWidth:1,gridLinesColor:function(t){return"rgba(0,0,0,"+Math.min(1,t.jy/15)+")"},starColor:"#000",starSize:function(t){return t.starSize*(t.width/300+1)},stoneSize:function(t){return t.stoneSize*Math.min(t.St,t.Tt)/2},coordinatesColor:"rgba(0,0,0,0.7)",font:function(t){return t.font},linesShift:.5},s.Fq.default={shadowColor:"rgba(62,32,32,0.5)",shadowTransparentColor:"rgba(62,32,32,0)",shadowBlur:function(t){return.1*t.jy},shadowSize:1,markupBlackColor:"rgba(255,255,255,0.9)",markupWhiteColor:"rgba(0,0,0,0.7)",markupNoneColor:"rgba(0,0,0,0.7)",markupLinesWidth:function(t){return t.jy/8},gridLinesWidth:function(t){return t.jy/15},gridLinesColor:"#654525",starColor:"#531",starSize:function(t){return t.jy/8+1},stoneSize:function(t){return Math.min(t.St,t.Tt)/2},coordinatesColor:"#531",ky:"rgba(0,32,128,0.8)",font:"calibri",linesShift:.25};var h,u=function(t,i){return"function"==typeof i.Gq[t]?i.Gq[t](i):i.Gq[t]},a={ly:function(t,i){var n=i.my(t.x),e=i.ny(t.y),r=i.jy;this.beginPath();var o=u("shadowBlur",i),s=Math.max(0,r-.5),h=this.createRadialGradient(n-i.oy,e-i.oy,s-1-o,n-i.oy,e-i.oy,s+o);h.addColorStop(0,u("shadowColor",i)),h.addColorStop(1,u("shadowTransparentColor",i)),this.fillStyle=h,this.arc(n-i.oy,e-i.oy,s+o,0,2*Math.PI,!0),this.fill()},clear:function(t,i){var n=i.my(t.x),e=i.ny(t.y),r=i.jy;this.clearRect(n-1.1*r-i.oy,e-1.1*r-i.oy,2.2*r,2.2*r)}},p=function(t,i,n){return t.Nt[i][n][0].c==o.B?u("markupBlackColor",t):t.Nt[i][n][0].c==o.W?u("markupWhiteColor",t):u("markupNoneColor",t)},c=function(t,i,n){return t.Nt[i][n][0]&&t.Nt[i][n][0].c==o.W||t.Nt[i][n][0].c==o.B},l=function(t,i){var n;t[i].clear(),t[i].ly(t);for(var e=0;e<t.size;e++)for(var r=0;r<t.size;r++)for(var o=0;o<t.Nt[e][r].length;o++){var h=t.Nt[e][r][o];n=h.type?"string"==typeof h.type?s.qy[h.type]:h.type:t.py,n[i]&&n[i].ly.call(t[i].getContext(h),h,t)}for(var u=0;u<t.sy.length;u++){var h=t.sy[u],n=h.Uq;n[i]&&n[i].ly.call(t[i].getContext(h.ty),h.ty,t)}},f=function(t,i,n,e,r,o,s,h){t.strokeStyle="rgba(64,64,64,0.2)",t.lineWidth=e/30*h,t.beginPath(),e-=Math.max(1,t.lineWidth);var u,a,i,p,c,l=i+e*Math.cos(r*Math.PI),f=n+e*Math.sin(r*Math.PI),d=i+e*Math.cos(o*Math.PI),g=n+e*Math.sin(o*Math.PI);d>l?(u=(g-f)/(d-l),a=Math.atan(u)):d==l?a=Math.PI/2:(u=(g-f)/(d-l),a=Math.atan(u)-Math.PI);var v=s*e;p=Math.sin(a)*v,c=Math.cos(a)*v;var y=l+p,m=f-c,b=d+p,w=g-c;t.moveTo(l,f),t.bezierCurveTo(y,m,b,w,d,g),t.stroke()},d=function(t){for(var i=t.angle,n=t.angle,e=0;e<t.uy.length;e++)i+=t.uy[e],n-=t.uy[e],f(t.vy,t.x,t.y,t.wy,i,n,t.xy,t.yy)};s.qy={zy:{Gi:{ly:function(t,i){var n,e=i.my(t.x),r=i.ny(t.y),s=i.jy;t.c==o.W?(n=this.createRadialGradient(e-2*s/5,r-2*s/5,s/3,e-s/5,r-s/5,5*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#aaa")):(n=this.createRadialGradient(e-2*s/5,r-2*s/5,1,e-s/5,r-s/5,4*s/5),n.addColorStop(0,"#666"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(e-i.oy,r-i.oy,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill()}},Ay:a},By:{Gi:{ly:function(t,i){var n,e=i.my(t.x),r=i.ny(t.y),s=i.jy;t.c==o.W?(n=this.createRadialGradient(e-2*s/5,r-2*s/5,2,e-s/5,r-s/5,4*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#ddd")):(n=this.createRadialGradient(e-2*s/5,r-2*s/5,1,e-s/5,r-s/5,4*s/5),n.addColorStop(0,"#111"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(e-i.oy,r-i.oy,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill(),this.beginPath(),this.lineWidth=s/6,t.c==o.W?(this.strokeStyle="#999",this.arc(e+s/8,r+s/8,s/2,0,Math.PI/2,!1)):(this.strokeStyle="#ccc",this.arc(e-s/8,r-s/8,s/2,Math.PI,1.5*Math.PI)),this.stroke()}},Ay:a},Cy:{Gi:{ly:function(t,i){var n,e=i.my(t.x),r=i.ny(t.y),s=i.jy;t.c==o.W?(n=this.createRadialGradient(e-2*s/5,r-2*s/5,s/3,e-s/5,r-s/5,8*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#666")):(n=this.createRadialGradient(e-2*s/5,r-2*s/5,1,e-s/5,r-s/5,3*s/5),n.addColorStop(0,"#555"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(e-i.oy,r-i.oy,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill()}},Ay:a},Dy:{Gi:{ly:function(t,i){var n,e,r=i.jy;h=h||Math.ceil(9999999*Math.random()),n=i.my(t.x),e=i.ny(t.y);var s;if(s=t.c==o.W?"#aaa":"#000",this.beginPath(),this.fillStyle=s,this.arc(n-i.oy,e-i.oy,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill(),t.c==o.W){var u=h%(3+t.x*i.size+t.y)%3,a=i.size*i.size+t.x*i.size+t.y,p=2/a*(h%a);d(0==u?{vy:this,x:n,y:e,wy:r,angle:p,uy:[.1,.12,.11,.1,.09,.09,.09,.09],xy:.25,yy:1.75}:1==u?{vy:this,x:n,y:e,wy:r,angle:p,uy:[.1,.09,.08,.07,.06,.06,.06,.06,.06,.06,.06],xy:.2,yy:1.5}:{vy:this,x:n,y:e,wy:r,angle:p,uy:[.12,.14,.13,.12,.12,.12],xy:.3,yy:2}),s=this.createRadialGradient(n-2*r/5,e-2*r/5,r/3,n-r/5,e-r/5,5*r/5),s.addColorStop(0,"rgba(255,255,255,0.9)"),s.addColorStop(1,"rgba(255,255,255,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.oy,e-i.oy,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill()}else s=this.createRadialGradient(n+.4*r,e+.4*r,0,n+.5*r,e+.5*r,r),s.addColorStop(0,"rgba(32,32,32,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.oy,e-i.oy,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill(),s=this.createRadialGradient(n-.4*r,e-.4*r,0,n-.5*r,e-.5*r,1.5*r),s.addColorStop(0,"rgba(64,64,64,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.oy,e-i.oy,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill()}},Ay:a},Ey:{Gi:{ly:function(t,i){var n=i.my(t.x),e=i.ny(t.y),r=i.jy,s=u("markupLinesWidth",i)||1;t.c==o.W?this.fillStyle="white":this.fillStyle="black",this.beginPath(),this.arc(n,e,Math.max(0,r-s),0,2*Math.PI,!0),this.fill(),this.lineWidth=s,this.strokeStyle="black",this.stroke()}}},CR:{Gi:{ly:function(t,i){var n=i.my(t.x),e=i.ny(t.y),r=i.jy;this.strokeStyle=t.c||p(i,t.x,t.y),this.lineWidth=t.lineWidth||u("markupLinesWidth",i)||1,this.beginPath(),this.arc(n-i.oy,e-i.oy,r/2,0,2*Math.PI,!0),this.stroke()}}},LB:{Gi:{ly:function(t,i){var n=i.my(t.x),e=i.ny(t.y),r=i.jy,o=t.scale||1,s=t.font||u("font",i)||"";this.fillStyle=t.c||p(i,t.x,t.y);var h=1;1==t.text.length?h=1.5:2==t.text.length&&(h=1.2),this.font=Math.round(h*r*o)+"px "+s,this.beginPath(),this.textBaseline="middle",this.textAlign="center",this.fillText(t.text,n,e,2*r)}},grid:{ly:function(t,i){if(!c(i,t.x,t.y)&&!t.Fy){var n=i.my(t.x),e=i.ny(t.y),r=i.jy;this.clearRect(n-r,e-r,2*r,2*r)}},clear:function(t,i){c(i,t.x,t.y)||(t.Fy=!0,l(i,"grid"),delete t.Fy)}}},Gy:{Gi:{ly:function(t,i){var n=i.my(t.x),e=i.ny(t.y),r=Math.round(i.jy);this.strokeStyle=t.c||p(i,t.x,t.y),this.lineWidth=t.lineWidth||u("markupLinesWidth",i)||1,this.beginPath(),this.rect(Math.round(n-r/2)-i.oy,Math.round(e-r/2)-i.oy,r,r),this.stroke()}}},Uh:{Gi:{ly:function(t,i){var n=i.my(t.x),e=i.ny(t.y),r=i.jy;this.strokeStyle=t.c||p(i,t.x,t.y),this.lineWidth=t.lineWidth||u("markupLinesWidth",i)||1,this.beginPath(),this.moveTo(n-i.oy,e-i.oy-Math.round(r/2)),this.lineTo(Math.round(n-r/2)-i.oy,Math.round(e+r/3)+i.oy),this.lineTo(Math.round(n+r/2)+i.oy,Math.round(e+r/3)+i.oy),this.closePath(),this.stroke()}}},Hy:{Gi:{ly:function(t,i){var n=i.my(t.x),e=i.ny(t.y),r=i.jy;this.strokeStyle=t.c||p(i,t.x,t.y),this.lineCap="round",this.lineWidth=2*(t.lineWidth||u("markupLinesWidth",i)||1)-1,this.beginPath(),this.moveTo(Math.round(n-r/2),Math.round(e-r/2)),this.lineTo(Math.round(n+r/2),Math.round(e+r/2)),this.moveTo(Math.round(n+r/2)-1,Math.round(e-r/2)),this.lineTo(Math.round(n-r/2)-1,Math.round(e+r/2)),this.stroke(),this.lineCap="butt"}}},SL:{Gi:{ly:function(t,i){var n=i.my(t.x),e=i.ny(t.y),r=i.jy;this.fillStyle=t.c||p(i,t.x,t.y),this.beginPath(),this.rect(n-r/2,e-r/2,r,r),this.fill()}}},Iy:{Gi:{ly:function(t,i){var n=i.my(t.x),e=i.ny(t.y),r=i.jy;this.strokeStyle=t.c||p(i,t.x,t.y),this.lineWidth=2*(t.lineWidth||u("markupLinesWidth",i)||1),this.beginPath(),this.arc(n-r/3,e-r/3,r/6,0,2*Math.PI,!0),this.stroke(),this.beginPath(),this.arc(n+r/3,e-r/3,r/6,0,2*Math.PI,!0),this.stroke(),this.beginPath(),this.moveTo(n-r/1.5,e),this.bezierCurveTo(n-r/1.5,e+r/2,n+r/1.5,e+r/2,n+r/1.5,e),this.stroke()}}},outline:{Gi:{ly:function(t,i){t.alpha?this.globalAlpha=t.alpha:this.globalAlpha=.3,t.Jy?s.qy[t.Jy].Gi.ly.call(this,t,i):i.py.Gi.ly.call(this,t,i),this.globalAlpha=1}}},mini:{Gi:{ly:function(t,i){i.jy=i.jy/2,t.Jy?s.qy[t.Jy].Gi.ly.call(this,t,i):i.py.Gi.ly.call(this,t,i),i.jy=2*i.jy}}}},s.Ct={grid:{ly:function(t,i){var n,e,r,o,s,h;this.fillStyle=u("coordinatesColor",i),this.textBaseline="middle",this.textAlign="center",this.font=i.jy*i.coordFontSize+"px "+(i.font||""),r=i.my(-.75),o=i.my(i.size-.25),s=i.ny(-.75),h=i.ny(i.size-.25);for(var a=0;a<i.size;a++)n=a+"A".charCodeAt(0),n>="I".charCodeAt(0)&&n++,e=i.ny(a),this.fillText(i.size-a,r,e),this.fillText(i.size-a,o,e),e=i.my(a),this.fillText(String.fromCharCode(n),e,s),this.fillText(String.fromCharCode(n),e,h);this.fillStyle="black"}}},s.Ky=function(){this.Et=document.createElement("canvas"),this.context=this.Et.getContext("2d"),this.ey=t.devicePixelRatio||1,this.ey>1&&this.context.scale(this.ey,this.ey)},s.Ky.prototype={constructor:s.Ky,gy:function(t,i){this.Et.width=t,this.Et.style.width=t/this.ey+"px",this.Et.height=i,this.Et.style.height=i/this.ey+"px"},sp:function(t,i){this.Et.style.position="absolute",this.Et.style.zIndex=i,t.appendChild(this.Et)},Ly:function(t){t.removeChild(this.Et)},getContext:function(){return this.context},ly:function(t){},clear:function(){this.context.clearRect(0,0,this.Et.width,this.Et.height)}},s.My=o.Xx(s.Ky,function(){this.super.call(this)}),s.My.prototype.ly=function(t){var i;this.context.beginPath(),this.context.lineWidth=u("gridLinesWidth",t),this.context.strokeStyle=u("gridLinesColor",t);var n=Math.round(t.left),e=Math.round(t.top),r=Math.round(t.St*(t.size-1)),o=Math.round(t.Tt*(t.size-1));this.context.strokeRect(n-t.oy,e-t.oy,r,o);for(var s=1;s<t.size-1;s++)i=Math.round(t.my(s))-t.oy,this.context.moveTo(i,e),this.context.lineTo(i,e+o),i=Math.round(t.ny(s))-t.oy,this.context.moveTo(n,i),this.context.lineTo(n+r,i);if(this.context.stroke(),this.context.fillStyle=u("starColor",t),t.Ny[t.size])for(var h in t.Ny[t.size])this.context.beginPath(),this.context.arc(t.my(t.Ny[t.size][h].x)-t.oy,t.ny(t.Ny[t.size][h].y)-t.oy,u("starSize",t),0,2*Math.PI,!0),this.context.fill()},s.Oy=o.Xx(s.Ky,function(){this.init(4)}),s.Oy.prototype.init=function(i){var n,e;this.Py=i,this.elements=[],this.Qy=[],this.ey=t.devicePixelRatio||1;for(var r=0;r<i;r++)n=document.createElement("canvas"),e=n.getContext("2d"),this.ey>1&&e.scale(this.ey,this.ey),this.elements.push(n),this.Qy.push(e)},s.Oy.prototype.sp=function(t,i){for(var n=0;n<this.Py;n++)this.elements[n].style.position="absolute",this.elements[n].style.zIndex=i,t.appendChild(this.elements[n])},s.Oy.prototype.Ly=function(t){for(var i=0;i<this.Py;i++)t.removeChild(this.elements[i])},s.Oy.prototype.getContext=function(t){return t.x%2?t.y%2?this.Qy[0]:this.Qy[1]:t.y%2?this.Qy[2]:this.Qy[3]},s.Oy.prototype.clear=function(t,i){for(var n=0;n<this.Py;n++)this.Qy[n].clearRect(0,0,this.elements[n].width,this.elements[n].height)},s.Oy.prototype.gy=function(t,i){for(var n=0;n<this.Py;n++)this.elements[n].width=t,this.elements[n].style.width=t/this.ey+"px",this.elements[n].height=i,this.elements[n].style.height=i/this.ey+"px"},s.Ry=o.Xx(s.Oy,function(t,i,n){this.init(2),this.shadowSize=void 0===i?1:i,this.ut=t}),s.Ry.prototype.getContext=function(t){return!(t.x%2&&t.y%2)&&(t.x%2||t.y%2)?this.Qy[1]:this.Qy[0]},s.Ry.prototype.gy=function(t,i){this.super.prototype.gy.call(this,t,i);for(var n=0;n<this.Py;n++)this.Qy[n].setTransform(1,0,0,1,Math.round(this.shadowSize*this.ut.jy/7),Math.round(this.shadowSize*this.ut.jy/7))};var g=function(t,i){var n=i.my(t.x),e=i.ny(t.y),r=i.jy;this.clearRect(n-2*r-i.oy,e-2*r-i.oy,4*r,4*r)},v=function(){return 3*this.width/(4*(this.ay+1-this.$x)+2)-this.St*this.$x},y=function(){return 3*this.height/(4*(this.by+1-this._x)+2)-this.Tt*this._x},m=function(){return 4*this.width/(4*(this.ay+1-this.$x)+2)},b=function(){return 4*this.height/(4*(this.by+1-this._x)+2)},w=function(t,i){for(var n,e=0;e<this.Nt[t][i].length;e++){var r=this.Nt[t][i][e];n=r.type?"string"==typeof r.type?s.qy[r.type]:r.type:this.py;for(var o in n)n[o].clear?n[o].clear.call(this[o].getContext(r),r,this):g.call(this[o].getContext(r),r,this)}},x=function(t,i){for(var n,e=0;e<this.Nt[t][i].length;e++){var r=this.Nt[t][i][e];n=r.type?"string"==typeof r.type?s.qy[r.type]:r.type:this.py;for(var o in n)n[o].ly.call(this[o].getContext(r),r,this)}},k=function(t){var i,n;i=t.layerX*this.ey,i-=this.left,i/=this.St,i=Math.round(i),n=t.layerY*this.ey,n-=this.top,n/=this.Tt,n=Math.round(n);var e=t.offsetY*this.ey;return e-=this.top,e/=this.Tt,e=Math.round(e),e!==n&&console.error("Using layerY we get",n," BUT using offsetY it would be",e),{x:i>=this.size?-1:i,y:n>=this.size?-1:n}},j=function(){this.Et.style.width=this.width/this.ey+"px",this.Et.style.height=this.height/this.ey+"px",this.jy=u("stoneSize",this),this.oy=u("linesShift",this)
;for(var t=0;t<this.Py.length;t++)this.Py[t].gy(this.width,this.height)};s.prototype={constructor:s,init:function(){this.Nt=[];for(var t=0;t<this.size;t++){this.Nt[t]=[];for(var i=0;i<this.size;i++)this.Nt[t][i]=[]}this.sy=[],this.Py=[],this.Sy=[],this.Et=document.createElement("div"),this.Et.className="wgo-board",this.Et.style.position="relative",this.background&&("#"==this.background[0]?this.Et.style.backgroundColor=this.background:(this.Et.style.backgroundImage="url('"+this.background+"')",this.Et.style.backgroundColor="#c75")),this.grid=new s.My,this.Ay=new s.Ry(this,u("shadowSize",this)),this.Gi=new s.Oy,this.Ty(this.grid,100),this.Ty(this.Ay,200),this.Ty(this.Gi,300)},dp:function(t){this.width=t,this.width*=this.ey,this.Tt=this.St=m.call(this),this.left=v.call(this),this.height=(this.by-this._x+1.5)*this.Tt,this.top=y.call(this),j.call(this),this.Uy()},cp:function(t){this.height=t,this.height*=this.ey,this.St=this.Tt=b.call(this),this.top=y.call(this),this.width=(this.ay-this.$x+1.5)*this.St,this.left=v.call(this),j.call(this),this.Uy()},gy:function(t,i){this.width=t||parseInt(this.Et.style.width,10),this.width*=this.ey,this.height=i||parseInt(this.Et.style.height,10),this.height*=this.ey,this.St=m.call(this),this.Tt=b.call(this),this.left=v.call(this),this.top=y.call(this),j.call(this),this.Uy()},Vy:function(){return this.section},Wy:function(t,i,n,e){this.section="object"==typeof t?t:{top:t,right:i,bottom:n,left:e},this.$x=this.section.left,this._x=this.section.top,this.ay=this.size-1-this.section.right,this.by=this.size-1-this.section.bottom,this.gy()},Xy:function(t){var t=t||19;if(t!=this.size){this.size=t,this.Nt=[];for(var i=0;i<this.size;i++){this.Nt[i]=[];for(var n=0;n<this.size;n++)this.Nt[i][n]=[]}this.ay=this.size-1-this.section.right,this.by=this.size-1-this.section.bottom,this.gy()}},Uy:function(){for(var t=0;t<this.Py.length;t++)this.Py[t].clear(this),this.Py[t].ly(this);for(var t=0;t<this.size;t++)for(var i=0;i<this.size;i++)x.call(this,t,i);for(var t=0;t<this.sy.length;t++){var n=this.sy[t],e=n.Uq;for(var r in e)e[r].ly.call(this[r].getContext(n.ty),n.ty,this)}},my:function(t){return this.left+t*this.St},ny:function(t){return this.top+t*this.Tt},Ty:function(t,i){t.sp(this.Et,i),t.gy(this.width,this.height),this.Py.push(t)},Yy:function(t){var i=this.Py.indexOf(t);i>=0&&(this.Py.splice(i,1),t.Ly(this.Et))},update:function(t){var i;if(t.remove&&"all"==t.remove)this.Zy();else if(t.remove)for(i=0;i<t.remove.length;i++)this.Mt(t.remove[i]);if(t.add)for(i=0;i<t.add.length;i++)this.Ot(t.add[i])},Ot:function(t){if(t.constructor!=Array){w.call(this,t.x,t.y);for(var i=this.Nt[t.x][t.y],n=0;n<i.length;n++)if(i[n].type==t.type)return i[n]=t,void x.call(this,t.x,t.y);t.type?i.push(t):i.unshift(t),x.call(this,t.x,t.y)}else for(var e=0;e<t.length;e++)this.Ot(t[e])},Mt:function(t){if(t.constructor!=Array){for(var i,n=0;n<this.Nt[t.x][t.y].length;n++)if(this.Nt[t.x][t.y][n].type==t.type){i=n;break}void 0!==i&&(w.call(this,t.x,t.y),this.Nt[t.x][t.y].splice(i,1),x.call(this,t.x,t.y))}else for(var e=0;e<t.length;e++)this.Mt(t[e])},Ut:function(t,i){this.Nt[t][i].length&&(w.call(this,t,i),this.Nt[t][i]=[])},Zy:function(){this.Nt=[];for(var t=0;t<this.size;t++){this.Nt[t]=[];for(var i=0;i<this.size;i++)this.Nt[t][i]=[]}this.Uy()},Bt:function(t,i){this.sy.push({Uq:t,ty:i}),this.Uy()},$y:function(t,i){for(var n=0;n<this.sy.length;n++){var e=this.sy[n];if(e.Uq==t&&e.ty==i)return this.sy.splice(n,1),this.Uy(),!0}return!1},addEventListener:function(t,i){var n=this,e={type:t,_y:i,az:function(t){var e=k.call(n,t);i(e.x,e.y,t)}};this.Et.addEventListener(t,e,!0),this.Sy.push(e)},removeEventListener:function(t,i){for(var n=0;n<this.Sy.length;n++){var e=this.Sy[n];if(e.type==t&&e._y==i)return this.Et.removeEventListener(e.type,e,!0),this.Sy.splice(n,1),!0}return!1},bz:function(){return{cz:o.clone(this.Nt),dz:o.clone(this.sy)}},ez:function(t){this.Nt=t.cz||this.Nt,this.sy=t.dz||this.sy,this.Uy()}},s.default={size:19,width:0,height:0,font:"Calibri",lineWidth:1,iy:!1,Ny:{19:[{x:3,y:3},{x:9,y:3},{x:15,y:3},{x:3,y:9},{x:9,y:9},{x:15,y:9},{x:3,y:15},{x:9,y:15},{x:15,y:15}],13:[{x:3,y:3},{x:9,y:3},{x:3,y:9},{x:9,y:9}],9:[{x:4,y:4}]},py:s.qy.Dy,starSize:1,shadowSize:1,stoneSize:1,section:{top:0,right:0,bottom:0,left:0},background:o.Qx+"wood1.jpg",Gq:{}},o.At=s,t.WGo=o}(window)},{}],115:[function(t,i,n){var e,r,o,s=t("superagent"),h=t("es6-promise").Promise,u=t("./get-base-url"),a=t("./http-header-safe-json");s.parse["application/octect-stream"]=function(t){return t},e=function(t,i){return{status:t.status,error:(i?i.text:null)||t.toString(),response:i}},o=function(t,i){t.text="",t.fz("binary"),t.u("data",function(i){t.text+=i}),t.u("end",function(){i()})},r=function(t,i,n,r,p,c){if("user"!==n)throw new Error("Unexpected auth type: "+n);return new h(function(n,h){function l(t){n&&n(t)}function f(t){h&&h(t)}function d(t,i){var n;t?f(e(t,i)):(n=JSON.parse(i.headers["dropbox-api-result"]),i.gz?n.fileBlob=i.gz.response:n.hz=i.iz.text,l(n))}var g;g=s.jz(u(r)+t).set("Authorization","Bearer "+p).set("Dropbox-API-Arg",a(i)).u("request",function(){this.gz&&(this.gz.responseType="blob")}),c&&(g=g.set("Dropbox-API-Select-User",c)),"undefined"==typeof window?g.buffer(!0).parse(o).end(d):g.end(d)})},i.exports=r},{"./get-base-url":118,"./http-header-safe-json":119,"es6-promise":149,"superagent":153}],116:[function(t,i,n){var e,r=t("./request-constants");t("./object-assign-polyfill"),e=function(t){t=t||{},this.accessToken=t.accessToken,this.clientId=t.clientId,this.kz=t.kz},e.prototype.lz=function(t){this.accessToken=t},e.prototype.mz=function(){return this.accessToken},e.prototype.nz=function(t){this.clientId=t},e.prototype.oz=function(){return this.clientId},e.prototype.ss=function(t,i){var n,e=this.oz();if(!e)throw new Error("A client id is required. You can set the client id using .setClientId().");if(!t)throw new Error("A redirect uri is required.");return n="https://www.dropbox.com/oauth2/authorize?response_type=token&client_id="+e,t&&(n=n+"&redirect_uri="+t),i&&(n=n+"&state="+i),n},e.prototype.pz=function(t,i,n,e,o){var s=null;switch(o){case r.qz:s=this.rz();break;case r.sz:s=this.tz();break;case r.uz:s=this.vz();break;default:throw new Error("Invalid request style: "+o)}return s(t,i,n,e,this.mz(),this.kz)},e.prototype.wz=function(t){e.prototype.xz=t},e.prototype.rz=function(){return void 0===e.prototype.xz&&(e.prototype.xz=t("./rpc-request")),e.prototype.xz},e.prototype.yz=function(t){e.prototype.zz=t},e.prototype.tz=function(){return void 0===e.prototype.zz&&(e.prototype.zz=t("./download-request")),e.prototype.zz},e.prototype.Az=function(t){e.prototype.Bz=t},e.prototype.vz=function(){return void 0===e.prototype.Bz&&(e.prototype.Bz=t("./upload-request")),e.prototype.Bz},i.exports=e},{"./download-request":115,"./object-assign-polyfill":121,"./request-constants":122,"./rpc-request":124,"./upload-request":125}],117:[function(t,i,n){var e,r=t("./dropbox-base"),o=t("./routes");e=function(t){r.call(this,t)},e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype=Object.assign(e.prototype,o),e.prototype.Cz=function(t){return this.pz("sharing/get_shared_link_file",t,"api","download")},i.exports=e},{"./dropbox-base":116,"./routes":123}],118:[function(t,i,n){function e(t){return"https://"+t+".dropboxapi.com/2/"}i.exports=e},{}],119:[function(t,i,n){function e(t){return JSON.stringify(t).replace(r,function(t){return"\\u"+("000"+t.charCodeAt(0).toString(16)).slice(-4)})}var r=/[\u007f-\uffff]/g;i.exports=e},{}],120:[function(t,i,n){var e=t("./dropbox");i.exports=e},{"./dropbox":117}],121:[function(t,i,n){"function"!=typeof Object.assign&&function(){Object.assign=function(t){"use strict";var i,n,e,r;if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(i=Object(t),n=1;n<arguments.length;n++)if(void 0!==(e=arguments[n])&&null!==e)for(r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);return i}}()},{}],122:[function(t,i,n){var e={qz:"rpc",sz:"download",uz:"upload"};i.exports=e},{}],123:[function(t,i,n){var e={};e.Dz=function(t){return this.pz("auth/token/from_oauth1",t,"app","api","rpc")},e.Ez=function(t){return this.pz("auth/token/revoke",t,"user","api","rpc")},e.Fz=function(t){return this.pz("files/alpha/get_metadata",t,"user","api","rpc")},e.Gz=function(t){return this.pz("files/alpha/upload",t,"user","content","upload")},e.Hz=function(t){return this.pz("files/copy",t,"user","api","rpc")},e.Iz=function(t){return this.pz("files/copy_batch",t,"user","api","rpc")},e.Jz=function(t){return this.pz("files/copy_batch/check",t,"user","api","rpc")},e.Kz=function(t){return this.pz("files/copy_reference/get",t,"user","api","rpc")},e.Lz=function(t){return this.pz("files/copy_reference/save",t,"user","api","rpc")},e.Fs=function(t){return this.pz("files/create_folder",t,"user","api","rpc")},e.Hs=function(t){return this.pz("files/delete",t,"user","api","rpc")},e.Mz=function(t){return this.pz("files/delete_batch",t,"user","api","rpc")},e.Nz=function(t){return this.pz("files/delete_batch/check",t,"user","api","rpc")},e.Cs=function(t){return this.pz("files/download",t,"user","content","download")},e.Oz=function(t){return this.pz("files/get_metadata",t,"user","api","rpc")},e.Pz=function(t){return this.pz("files/get_preview",t,"user","content","download")},e.Qz=function(t){return this.pz("files/get_temporary_link",t,"user","api","rpc")},e.Rz=function(t){return this.pz("files/get_thumbnail",t,"user","content","download")},e.xs=function(t){return this.pz("files/list_folder",t,"user","api","rpc")},e.Sz=function(t){return this.pz("files/list_folder/continue",t,"user","api","rpc")},e.Tz=function(t){return this.pz("files/list_folder/get_latest_cursor",t,"user","api","rpc")},e.Uz=function(t){return this.pz("files/list_folder/longpoll",t,"noauth","notify","rpc")},e.Vz=function(t){return this.pz("files/list_revisions",t,"user","api","rpc")},e.Js=function(t){return this.pz("files/move",t,"user","api","rpc")},e.Wz=function(t){return this.pz("files/move_batch",t,"user","api","rpc")},e.Xz=function(t){return this.pz("files/move_batch/check",t,"user","api","rpc")},e.Yz=function(t){return this.pz("files/permanently_delete",t,"user","api","rpc")},e.Zz=function(t){return this.pz("files/properties/add",t,"user","api","rpc")},e.$z=function(t){return this.pz("files/properties/overwrite",t,"user","api","rpc")},e._z=function(t){return this.pz("files/properties/remove",t,"user","api","rpc")},e.aA=function(t){return this.pz("files/properties/template/get",t,"user","api","rpc")},e.bA=function(t){return this.pz("files/properties/template/list",t,"user","api","rpc")},e.cA=function(t){return this.pz("files/properties/update",t,"user","api","rpc")},e.dA=function(t){return this.pz("files/restore",t,"user","api","rpc")},e.eA=function(t){return this.pz("files/save_url",t,"user","api","rpc")},e.fA=function(t){return this.pz("files/save_url/check_job_status",t,"user","api","rpc")},e.gA=function(t){return this.pz("files/search",t,"user","api","rpc")},e.Ds=function(t){return this.pz("files/upload",t,"user","content","upload")},e.hA=function(t){return this.pz("files/upload_session/append",t,"user","content","upload")},e.iA=function(t){return this.pz("files/upload_session/append_v2",t,"user","content","upload")},e.jA=function(t){return this.pz("files/upload_session/finish",t,"user","content","upload")},e.kA=function(t){return this.pz("files/upload_session/finish_batch",t,"user","api","rpc")},e.lA=function(t){return this.pz("files/upload_session/finish_batch/check",t,"user","api","rpc")},e.mA=function(t){return this.pz("files/upload_session/start",t,"user","content","upload")},e.nA=function(t){return this.pz("paper/docs/archive",t,"user","api","rpc")},e.oA=function(t){return this.pz("paper/docs/download",t,"user","api","download")},e.pA=function(t){return this.pz("paper/docs/folder_users/list",t,"user","api","rpc")},e.qA=function(t){return this.pz("paper/docs/folder_users/list/continue",t,"user","api","rpc")},e.rA=function(t){return this.pz("paper/docs/get_folder_info",t,"user","api","rpc")},e.sA=function(t){return this.pz("paper/docs/list",t,"user","api","rpc")},e.tA=function(t){return this.pz("paper/docs/list/continue",t,"user","api","rpc")},e.uA=function(t){return this.pz("paper/docs/permanently_delete",t,"user","api","rpc")},e.vA=function(t){return this.pz("paper/docs/sharing_policy/get",t,"user","api","rpc")},e.wA=function(t){return this.pz("paper/docs/sharing_policy/set",t,"user","api","rpc")},e.xA=function(t){return this.pz("paper/docs/users/add",t,"user","api","rpc")},e.yA=function(t){return this.pz("paper/docs/users/list",t,"user","api","rpc")},e.zA=function(t){return this.pz("paper/docs/users/list/continue",t,"user","api","rpc")},e.AA=function(t){return this.pz("paper/docs/users/remove",t,"user","api","rpc")},e.BA=function(t){return this.pz("sharing/add_file_member",t,"user","api","rpc")},e.CA=function(t){return this.pz("sharing/add_folder_member",t,"user","api","rpc")},e.DA=function(t){return this.pz("sharing/change_file_member_access",t,"user","api","rpc")},e.EA=function(t){return this.pz("sharing/check_job_status",t,"user","api","rpc")},e.FA=function(t){return this.pz("sharing/check_remove_member_job_status",t,"user","api","rpc")},e.GA=function(t){return this.pz("sharing/check_share_job_status",t,"user","api","rpc")},e.HA=function(t){return this.pz("sharing/create_shared_link",t,"user","api","rpc")},e.IA=function(t){return this.pz("sharing/create_shared_link_with_settings",t,"user","api","rpc")},e.JA=function(t){return this.pz("sharing/get_file_metadata",t,"user","api","rpc")},e.KA=function(t){return this.pz("sharing/get_file_metadata/batch",t,"user","api","rpc")},e.LA=function(t){return this.pz("sharing/get_folder_metadata",t,"user","api","rpc")},e.MA=function(t){return this.pz("sharing/get_shared_link_file",t,"user","content","download")},e.NA=function(t){return this.pz("sharing/get_shared_link_metadata",t,"user","api","rpc")},e.OA=function(t){return this.pz("sharing/get_shared_links",t,"user","api","rpc")},e.PA=function(t){return this.pz("sharing/list_file_members",t,"user","api","rpc")},e.QA=function(t){return this.pz("sharing/list_file_members/batch",t,"user","api","rpc")},e.RA=function(t){return this.pz("sharing/list_file_members/continue",t,"user","api","rpc")},e.SA=function(t){return this.pz("sharing/list_folder_members",t,"user","api","rpc")},e.TA=function(t){return this.pz("sharing/list_folder_members/continue",t,"user","api","rpc")},e.UA=function(t){return this.pz("sharing/list_folders",t,"user","api","rpc")},e.VA=function(t){return this.pz("sharing/list_folders/continue",t,"user","api","rpc")},e.WA=function(t){return this.pz("sharing/list_mountable_folders",t,"user","api","rpc")},e.XA=function(t){return this.pz("sharing/list_mountable_folders/continue",t,"user","api","rpc")},e.YA=function(t){return this.pz("sharing/list_received_files",t,"user","api","rpc")},e.ZA=function(t){return this.pz("sharing/list_received_files/continue",t,"user","api","rpc")},e.$A=function(t){return this.pz("sharing/list_shared_links",t,"user","api","rpc")},e._A=function(t){return this.pz("sharing/modify_shared_link_settings",t,"user","api","rpc")},e.aB=function(t){return this.pz("sharing/mount_folder",t,"user","api","rpc")},e.bB=function(t){return this.pz("sharing/relinquish_file_membership",t,"user","api","rpc")},e.cB=function(t){return this.pz("sharing/relinquish_folder_membership",t,"user","api","rpc")},e.dB=function(t){return this.pz("sharing/remove_file_member",t,"user","api","rpc")},e.eB=function(t){return this.pz("sharing/remove_file_member_2",t,"user","api","rpc")},e.fB=function(t){return this.pz("sharing/remove_folder_member",t,"user","api","rpc")},e.gB=function(t){return this.pz("sharing/revoke_shared_link",t,"user","api","rpc")},e.hB=function(t){return this.pz("sharing/share_folder",t,"user","api","rpc")},e.iB=function(t){return this.pz("sharing/transfer_folder",t,"user","api","rpc")},e.jB=function(t){return this.pz("sharing/unmount_folder",t,"user","api","rpc")},e.kB=function(t){return this.pz("sharing/unshare_file",t,"user","api","rpc")},e.lB=function(t){return this.pz("sharing/unshare_folder",t,"user","api","rpc")},e.mB=function(t){return this.pz("sharing/update_file_member",t,"user","api","rpc")},e.nB=function(t){return this.pz("sharing/update_folder_member",t,"user","api","rpc")},e.oB=function(t){return this.pz("sharing/update_folder_policy",t,"user","api","rpc")},e.pB=function(t){return this.pz("users/get_account",t,"user","api","rpc")},e.qB=function(t){return this.pz("users/get_account_batch",t,"user","api","rpc")},e.rB=function(t){return this.pz("users/get_current_account",t,"user","api","rpc")},e.sB=function(t){return this.pz("users/get_space_usage",t,"user","api","rpc")},i.exports=e},{}],124:[function(t,i,n){var e=t("superagent"),r=t("es6-promise").Promise,o=t("./get-base-url"),s=function(t,i){return{status:t.status,error:(i?i.text:null)||t.toString(),response:i}},h=function(t,i,n,h,u,a){return new r(function(r,p){function c(t){r&&r(t)}function l(t){p&&p(t)}function f(t,i){t?l(s(t,i)):c(i.body)}var d;switch(i||(i=null),d=e.jz(o(h)+t).type("application/json"),n){case"team":case"user":d.set("Authorization","Bearer "+u);break;case"noauth":break;default:throw new Error("Unhandled auth type: "+n)}a&&(d=d.set("Dropbox-API-Select-User",a)),d.send(i).end(f)})};i.exports=h},{"./get-base-url":118,"es6-promise":149,"superagent":153}],125:[function(t,i,n){var e=t("superagent"),r=t("es6-promise").Promise,o=t("./get-base-url"),s=t("./http-header-safe-json"),h=function(t,i){return{status:t.status,error:(i?i.text:null)||t.toString(),response:i}},u=function(t,i,n,u,a,p){if("user"!==n)throw new Error("Unexpected auth type: "+n);return new r(function(n,r){function c(t){n&&n(t)}function l(t){r&&r(t)}function f(t,i){t?l(h(t,i)):c(i.body)}var d,g=i.contents;delete i.contents,d=e.jz(o(u)+t).type("application/octet-stream").set("Authorization","Bearer "+a).set("Dropbox-API-Arg",s(i)),p&&(d=d.set("Dropbox-API-Select-User",p)),d.send(g).end(f)})};i.exports=u},{"./get-base-url":118,"./http-header-safe-json":119,"es6-promise":149,"superagent":153}],126:[function(t,i,n){function e(t){if(t)return r(t)}function r(t){for(var i in e.prototype)t[i]=e.prototype[i];return t}void 0!==i&&(i.exports=e),e.prototype.u=e.prototype.addEventListener=function(t,i){return this.tB=this.tB||{},(this.tB["$"+t]=this.tB["$"+t]||[]).push(i),this},e.prototype.v=function(t,i){function n(){this.A(t,n),i.apply(this,arguments)}return n.uB=i,this.u(t,n),this},e.prototype.A=e.prototype.removeListener=e.prototype.C=e.prototype.removeEventListener=function(t,i){if(this.tB=this.tB||{},0==arguments.length)return this.tB={},this;var n=this.tB["$"+t];if(!n)return this;if(1==arguments.length)return delete this.tB["$"+t],this;for(var e,r=0;r<n.length;r++)if((e=n[r])===i||e.uB===i){n.splice(r,1);break}return this},e.prototype.D=function(t){this.tB=this.tB||{};var i=[].slice.call(arguments,1),n=this.tB["$"+t];if(n){n=n.slice(0);for(var e=0,r=n.length;e<r;++e)n[e].apply(this,i)}return this},e.prototype.Sy=function(t){return this.tB=this.tB||{},this.tB["$"+t]||[]},e.prototype.vB=function(t){return!!this.Sy(t).length}},{}],127:[function(t,i,n){i.exports=1/0},{}],128:[function(t,i,n){i.exports=1},{}],129:[function(t,i,n){"use strict";var e=t("./_map");i.exports=function(t){function i(t,i){return function(t){i(t)}}return e(t,i)}},{"./_map":131}],130:[function(t,i,n){"use strict";var e=t("./a"),r=t("./_map");i.exports=function(t){function i(t,i){return function(n,r){function o(t,i){return!!r[i]}if(n)return void i(n);i(null,e(r)?t.filter(o):function(){var i={};return Object.keys(t).forEach(function(n){o(null,n)&&(i[n]=t[n])}),i}())}}return r(t,i)}},{"./_map":131,"./a":132}],131:[function(t,i,n){"use strict";var e=t("./a"),r=t("./once"),o=t("./concurrent"),s=t("./CONCURRENTLY"),h=t("./SERIAL");i.exports=function t(i,n,u){function a(t,h,u,a){var p=arguments;2===p.length&&(u=h,h=s),3===p.length&&"number"!=typeof h&&(a=u,u=h,h=s);var c=Object.keys(t),l=e(t)?[]:{};c.forEach(function(i){l[i]=function(n){3===u.length?u(t[i],i,n):u(t[i],n)}}),o(l,i||h,n?n(t,r(a)):a)}return u||(a.ms=t(h,n,!0)),a}},{"./CONCURRENTLY":127,"./SERIAL":128,"./a":132,"./concurrent":133,"./once":145}],132:[function(t,i,n){"use strict";i.exports=function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],133:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./a"),o=t("./once"),s=t("./queue"),h=t("./errored"),u=t("./debounce"),a=t("./CONCURRENTLY");i.exports=function(t,i,n){function p(i,n){function r(){var t=e(arguments);h(t,c)||(d[i]=t.shift(),n())}u(t[i],[r])}"function"==typeof i&&(n=i,i=a);var c=o(n),l=s(p,i),f=Object.keys(t),d=r(t)?[]:{};l.unshift(f),l.u("drain",function(){c(null,d)})}},{"./CONCURRENTLY":127,"./a":132,"./debounce":136,"./errored":139,"./once":145,"./queue":146,"atoa":142}],134:[function(t,i,n){"use strict";i.exports={wB:t("./curry"),xB:t("./concurrent"),ms:t("./series"),yB:t("./waterfall"),ro:t("./each"),map:t("./map"),filter:t("./filter"),zB:t("./queue"),emitter:t("./emitter")}},{"./concurrent":133,"./curry":135,"./each":137,"./emitter":138,"./filter":140,"./map":141,"./queue":146,"./series":147,"./waterfall":148}],135:[function(t,i,n){"use strict";var e=t("atoa");i.exports=function(){var t=e(arguments),i=t.shift();return function(){var n=e(arguments);i.apply(i,t.concat(n))}}},{"atoa":142}],136:[function(t,i,n){"use strict";var e=t("ticky");i.exports=function(t,i,n){t&&e(function(){t.apply(n||null,i||[])})}},{"ticky":143}],137:[function(t,i,n){"use strict";i.exports=t("./_each")()},{"./_each":129}],138:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./debounce");i.exports=function(t,i){var n=i||{},o={};return void 0===t&&(t={}),t.u=function(i,n){return o[i]?o[i].push(n):o[i]=[n],t},t.v=function(i,n){return n.AB=!0,t.u(i,n),t},t.A=function(i,n){var e=arguments.length;if(1===e)delete o[i];else if(0===e)o={};else{var r=o[i];if(!r)return t;r.splice(r.indexOf(n),1)}return t},t.D=function(){var i=e(arguments);return t.BB(i.shift()).apply(this,i)},t.BB=function(i){var s=(o[i]||[]).slice(0);return function(){var o=e(arguments),h=this||t;if("error"===i&&n.throws!==!1&&!s.length)throw 1===o.length?o[0]:o;return s.forEach(function(e){n.async?r(e,o,h):e.apply(h,o),e.AB&&t.A(i,e)}),t}},t}},{"./debounce":136,"atoa":142}],139:[function(t,i,n){"use strict";var e=t("./debounce");i.exports=function(t,i,n){var r=t.shift();if(r)return n&&n.CB(),e(i,[r]),!0}},{"./debounce":136}],140:[function(t,i,n){"use strict";i.exports=t("./_filter")()},{"./_filter":130}],141:[function(t,i,n){"use strict";i.exports=t("./_map")()},{"./_map":131}],142:[function(t,i,n){i.exports=function(t,i){return Array.prototype.slice.call(t,i)}},{}],143:[function(t,i,n){var e,r="function"==typeof setImmediate;e=r?function(t){setImmediate(t)}:function(t){setTimeout(t,0)},i.exports=e},{}],144:[function(t,i,n){"use strict";i.exports=function(){}},{}],145:[function(t,i,n){"use strict";var e=t("./noop");i.exports=function(t){function i(){n||(n=!0,(t||e).apply(null,arguments))}var n;return i.CB=function(){n=!0},i}},{"./noop":144}],146:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./a"),o=t("./once"),s=t("./emitter"),h=t("./debounce");i.exports=function(t,i){function n(t,i,n){(r(i)?i:[i]).forEach(function(i){c[t]({Wx:i,done:n})}),h(u)}function u(){if(!(p||l>=f)){if(!c.length)return void(0===l&&d.D("drain"));l++;var i=c.pop();t(i.Wx,o(a.bind(null,i))),h(u)}}function a(t){l--,h(t.done,e(arguments,1)),h(u)}var p,c=[],l=0,f=i||1,d=s({push:n.bind(null,"push"),unshift:n.bind(null,"unshift"),pause:function(){p=!0},resume:function(){p=!1,h(u)},pending:c});return Object.defineProperty&&!Object.DB&&Object.defineProperty(d,"length",{get:function(){return c.length}}),d}},{"./a":132,"./debounce":136,"./emitter":138,"./once":145,"atoa":142}],147:[function(t,i,n){"use strict";var e=t("./concurrent"),r=t("./SERIAL");i.exports=function(t,i){e(t,r,i)}},{"./SERIAL":128,"./concurrent":133}],148:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./once"),o=t("./errored"),s=t("./debounce");i.exports=function(t,i){function n(){var i=e(arguments),u=t.shift();if(u){if(o(i,h))return;i.push(r(n)),s(u,i)}else s(h,arguments)}var h=r(i);n()}},{"./debounce":136,"./errored":139,"./once":145,"atoa":142}],149:[function(t,i,n){(function(e,r){!function(t,e){"object"==typeof n&&void 0!==i?i.exports=e():"function"==typeof define&&define.EB?define(e):t.FB=e()}(this,function(){"use strict";function i(t){return"function"==typeof t||"object"==typeof t&&null!==t}function n(t){return"function"==typeof t}function o(t){W=t}function s(t){V=t}function h(){return function(){H(a)}}function u(){var t=setTimeout;return function(){return t(a,1)}}function a(){for(var t=0;t<X;t+=2){(0,Z[t])(Z[t+1]),Z[t]=void 0,Z[t+1]=void 0}X=0}function p(t,i){var n=arguments,e=this,r=new this.constructor(l);void 0===r[tt]&&G(r);var o=e.IB;return o?function(){var t=n[o-1];V(function(){return q(o,r,t,e.JB)})}():z(e,r,t,i),r}function c(t){var i=this;if(t&&"object"==typeof t&&t.constructor===i)return t;var n=new i(l);return w(n,t),n}function l(){}function f(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function g(t){try{return t.then}catch(t){return rt.error=t,rt}}function v(t,i,n,e){try{t.call(i,n,e)}catch(t){return t}}function y(t,i,n){V(function(t){var e=!1,r=v(n,i,function(n){e||(e=!0,i!==n?w(t,n):k(t,n))},function(i){e||(e=!0,j(t,i))},"Settle: "+(t.Jp||" unknown promise"));!e&&r&&(e=!0,j(t,r))},t)}function m(t,i){i.IB===nt?k(t,i.JB):i.IB===et?j(t,i.JB):z(i,void 0,function(i){return w(t,i)},function(i){return j(t,i)})}function b(t,i,e){i.constructor===t.constructor&&e===p&&i.constructor.resolve===c?m(t,i):e===rt?j(t,rt.error):void 0===e?k(t,i):n(e)?y(t,i,e):k(t,i)}function w(t,n){t===n?j(t,f()):i(n)?b(t,n,g(n)):k(t,n)}function x(t){t.KB&&t.KB(t.JB),C(t)}function k(t,i){t.IB===it&&(t.JB=i,t.IB=nt,0!==t.MB.length&&V(C,t))}function j(t,i){t.IB===it&&(t.IB=et,t.JB=i,V(x,t))}function z(t,i,n,e){var r=t.MB,o=r.length;t.KB=null,r[o]=i,r[o+nt]=n,r[o+et]=e,0===o&&t.IB&&V(C,t)}function C(t){var i=t.MB,n=t.IB;if(0!==i.length){for(var e=void 0,r=void 0,o=t.JB,s=0;s<i.length;s+=3)e=i[s],r=i[s+n],e?q(n,e,r,o):r(o);t.MB.length=0}}function S(){this.error=null}function B(t,i){try{return t(i)}catch(t){return ot.error=t,ot}}function q(t,i,e,r){var o=n(e),s=void 0,h=void 0,u=void 0,a=void 0;if(o){if(s=B(e,r),s===ot?(a=!0,h=s.error,s=null):u=!0,i===s)return void j(i,d())}else s=r,u=!0;i.IB!==it||(o&&u?w(i,s):a?j(i,h):t===nt?k(i,s):t===et&&j(i,s))}function M(t,i){try{i(function(i){w(t,i)},function(i){j(t,i)})}catch(i){j(t,i)}}function D(){return st++}function G(t){t[tt]=st++,t.IB=void 0,t.JB=void 0,t.MB=[]}function A(t,i){this.NB=t,this.OB=new t(l),this.OB[tt]||G(this.OB),R(i)?(this.PB=i,this.length=i.length,this.QB=i.length,this.JB=new Array(this.length),0===this.length?k(this.OB,this.JB):(this.length=this.length||0,this.RB(),0===this.QB&&k(this.OB,this.JB))):j(this.OB,E())}function E(){return new Error("Array Methods must be provided an Array")}function T(t){return new A(this,t).OB}function N(t){var i=this;return new i(R(t)?function(n,e){for(var r=t.length,o=0;o<r;o++)i.resolve(t[o]).then(n,e)}:function(t,i){return i(new TypeError("You must pass an array to race."))})}function P(t){var i=this,n=new i(l);return j(n,t),n}function I(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function _(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function O(t){this[tt]=D(),this.JB=this.IB=void 0,this.MB=[],l!==t&&("function"!=typeof t&&I(),this instanceof O?M(this,t):_())}function L(){var t=void 0;if(void 0!==r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var i=t.Promise;if(i){var n=null;try{n=Object.prototype.toString.call(i.resolve())}catch(t){}if("[object Promise]"===n&&!i.cast)return}t.Promise=O}var U=void 0;U=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var R=U,X=0,H=void 0,W=void 0,V=function(t,i){Z[X]=t,Z[X+1]=i,2===(X+=2)&&(W?W(a):K())},F="undefined"!=typeof window?window:void 0,Y=F||{},J=Y.MutationObserver||Y.WebKitMutationObserver,$="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),Q="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Z=new Array(1e3),K=void 0;K=$?function(){return function(){return e.l(a)}}():J?function(){var t=0,i=new J(a),n=document.createTextNode("");return i.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():Q?function(){var t=new MessageChannel;return t.port1.onmessage=a,function(){return t.port2.postMessage(0)}}():void 0===F&&"function"==typeof t?function(){try{var i=t,n=i("vertx");return H=n.GB||n.HB,h()}catch(t){return u()}}():u();var tt=Math.random().toString(36).substring(16),it=void 0,nt=1,et=2,rt=new S,ot=new S,st=0;return A.prototype.RB=function(){for(var t=this.length,i=this.PB,n=0;this.IB===it&&n<t;n++)this.SB(i[n],n)},A.prototype.SB=function(t,i){var n=this.NB,e=n.resolve;if(e===c){var r=g(t);if(r===p&&t.IB!==it)this.TB(t.IB,i,t.JB);else if("function"!=typeof r)this.QB--,this.JB[i]=t;else if(n===O){var o=new n(l);b(o,t,r),this.UB(o,i)}else this.UB(new n(function(i){return i(t)}),i)}else this.UB(e(t),i)},A.prototype.TB=function(t,i,n){var e=this.OB;e.IB===it&&(this.QB--,t===et?j(e,n):this.JB[i]=n),0===this.QB&&k(e,this.JB)},A.prototype.UB=function(t,i){var n=this;z(t,void 0,function(t){return n.TB(nt,i,t)},function(t){return n.TB(et,i,t)})},O.all=T,O.race=N,O.resolve=c,O.reject=P,O.VB=o,O.WB=s,O.XB=V,O.prototype={constructor:O,then:p,"catch":function(t){return this.then(null,t)}},L(),O.YB=L,O.Promise=O,O})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"_process":2}],150:[function(t,i,n){i.exports=function(t,i){var n=i||document;if(n.createStyleSheet){var e=n.createStyleSheet();return e.cssText=t,e.ownerNode}var r=n.getElementsByTagName("head")[0],o=n.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(n.createTextNode(t)),r.appendChild(o),o},i.exports.ZB=function(t){if(document.createStyleSheet)return document.createStyleSheet(t).ownerNode;var i=document.getElementsByTagName("head")[0],n=document.createElement("link");return n.rel="stylesheet",n.href=t,i.appendChild(n),n}},{}],151:[function(t,i,n){i.exports=t("cssify")},{"cssify":150}],152:[function(t,i,n){i.exports=function(t,i,n){for(var e=0,r=t.length,o=3==arguments.length?n:t[e++];e<r;)o=i.call(null,o,t[e],++e,t);return o}},{}],153:[function(t,i,n){function e(){}function r(t){switch({}.toString.call(t)){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(t){if(!b(t))return t;var i=[];for(var n in t)null!=t[n]&&s(i,n,t[n]);return i.join("&")}function s(t,i,n){if(Array.isArray(n))return n.forEach(function(n){s(t,i,n)});t.push(encodeURIComponent(i)+"="+encodeURIComponent(n))}function h(t){for(var i,n,e={},r=t.split("&"),o=0,s=r.length;o<s;++o)n=r[o],i=n.split("="),e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]);return e}function u(t){var i,n,e,r,o=t.split(/\r?\n/),s={};o.pop();for(var h=0,u=o.length;h<u;++h)n=o[h],i=n.indexOf(":"),e=n.slice(0,i).toLowerCase(),r=x(n.slice(i+1)),s[e]=r;return s}function a(t){return/[\/+]json\b/.test(t)}function p(t){return t.split(/ *; */).shift()}function c(t){return y(t.split(/ *; */),function(t,i){var n=i.split(/ *= */),e=n.shift(),r=n.shift();return e&&r&&(t[e]=r),t},{})}function l(t,i){i=i||{},this.eC=t,this.gz=this.eC.gz,
this.text="HEAD"!=this.eC.method&&(""===this.gz.responseType||"text"===this.gz.responseType)||void 0===this.gz.responseType?this.gz.responseText:null,this.statusText=this.eC.gz.statusText,this.fC(this.gz.status),this.gC=this.headers=u(this.gz.getAllResponseHeaders()),this.gC["content-type"]=this.gz.getResponseHeader("content-type"),this.hC(this.gC),this.body="HEAD"!=this.eC.method?this.iC(this.text?this.text:this.gz.response):null}function f(t,i){var n=this;this.vC=this.vC||[],this.method=t,this.url=i,this.gC={},this.wC={},this.u("end",function(){var t=null,i=null;try{i=new l(n)}catch(i){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.xC=i,t.yC=n.gz&&n.gz.responseText?n.gz.responseText:null,t.jC=n.gz&&n.gz.status?n.gz.status:null,n._y(t)}if(n.D("response",i),t)return n._y(t,i);if(i.status>=200&&i.status<300)return n._y(t,i);var e=new Error(i.statusText||"Unsuccessful HTTP response");e.xC=t,e.response=i,e.status=i.status,n._y(e,i)})}function d(t,i){var n=w("DELETE",t);return i&&n.end(i),n}var g,v=t("emitter"),y=t("reduce"),m=t("./request-base"),b=t("./is-object");g="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var w=i.exports=t("./request").bind(null,f);w.$B=function(){if(!(!g.XMLHttpRequest||g.location&&"file:"==g.location.protocol&&g._B))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1};var x="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};w.aC=o,w.bC=h,w.types={Dp:"text/html",json:"application/json",cC:"application/xml",dC:"application/x-www-form-urlencoded","form":"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},w.xa={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify},w.parse={"application/x-www-form-urlencoded":h,"application/json":JSON.parse},l.prototype.get=function(t){return this.gC[t.toLowerCase()]},l.prototype.hC=function(t){var i=this.gC["content-type"]||"";this.type=p(i);var n=c(i);for(var e in n)this[e]=n[e]},l.prototype.iC=function(t){var i=w.parse[this.type];return!i&&a(this.type)&&(i=w.parse["application/json"]),i&&t&&(t.length||t instanceof Object)?i(t):null},l.prototype.fC=function(t){1223===t&&(t=204);var i=t/100|0;this.status=this.jC=t,this.kC=i,this.info=1==i,this.ok=2==i,this.lC=4==i,this.mC=5==i,this.error=(4==i||5==i)&&this.nC(),this.oC=202==t,this.pC=204==t,this.qC=400==t,this.rC=401==t,this.sC=406==t,this.tC=404==t,this.uC=403==t},l.prototype.nC=function(){var t=this.eC,i=t.method,n=t.url,e="cannot "+i+" "+n+" ("+this.status+")",r=new Error(e);return r.status=this.status,r.method=i,r.url=n,r},w.Response=l,v(f.prototype);for(var k in m)f.prototype[k]=m[k];f.prototype.abort=function(){if(!this.zC)return this.zC=!0,this.gz&&this.gz.abort(),this.clearTimeout(),this.D("abort"),this},f.prototype.type=function(t){return this.set("Content-Type",w.types[t]||t),this},f.prototype.responseType=function(t){return this.AC=t,this},f.prototype.accept=function(t){return this.set("Accept",w.types[t]||t),this},f.prototype.BC=function(t,i,n){switch(n||(n={type:"basic"}),n.type){case"basic":var e=btoa(t+":"+i);this.set("Authorization","Basic "+e);break;case"auto":this.username=t,this.password=i}return this},f.prototype.CC=function(t){return"string"!=typeof t&&(t=o(t)),t&&this.vC.push(t),this},f.prototype.DC=function(t,i,n){return this.EC().append(t,i,n||i.name),this},f.prototype.EC=function(){return this.FC||(this.FC=new g.FormData),this.FC},f.prototype.send=function(t){var i=b(t),n=this.wC["content-type"];if(i&&b(this.GC))for(var e in t)this.GC[e]=t[e];else"string"==typeof t?(n||this.type("form"),n=this.wC["content-type"],this.GC="application/x-www-form-urlencoded"==n?this.GC?this.GC+"&"+t:t:(this.GC||"")+t):this.GC=t;return!i||r(t)?this:(n||this.type("json"),this)},l.prototype.parse=function(t){return g.console&&console.warn("Client-side parse() method has been renamed to serialize(). This method is not compatible with superagent v2.0"),this.xa(t),this},l.prototype.xa=function(t){return this.HC=t,this},f.prototype._y=function(t,i){var n=this.IC;this.clearTimeout(),n(t,i)},f.prototype.JC=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.KC=!0,t.status=this.status,t.method=this.method,t.url=this.url,this._y(t)},f.prototype.LC=function(){var t=this.MC,i=new Error("timeout of "+t+"ms exceeded");i.timeout=t,this._y(i)},f.prototype.withCredentials=function(){return this.NC=!0,this},f.prototype.end=function(t){var i=this,n=this.gz=w.$B(),o=this.vC.join("&"),s=this.MC,h=this.FC||this.GC;this.IC=t||e,n.onreadystatechange=function(){if(4==n.readyState){var t;try{t=n.status}catch(i){t=0}if(0==t){if(i.OC)return i.LC();if(i.zC)return;return i.JC()}i.D("end")}};var u=function(t){t.total>0&&(t.PC=t.loaded/t.total*100),t.direction="download",i.D("progress",t)};this.vB("progress")&&(n.onprogress=u);try{n.upload&&this.vB("progress")&&(n.upload.onprogress=u)}catch(t){}if(s&&!this.QC&&(this.QC=setTimeout(function(){i.OC=!0,i.abort()},s)),o&&(o=w.aC(o),this.url+=~this.url.indexOf("?")?"&"+o:"?"+o),this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0),this.NC&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof h&&!r(h)){var p=this.wC["content-type"],c=this.HC||w.xa[p?p.split(";")[0]:""];!c&&a(p)&&(c=w.xa["application/json"]),c&&(h=c(h))}for(var l in this.gC)null!=this.gC[l]&&n.setRequestHeader(l,this.gC[l]);return this.AC&&(n.responseType=this.AC),this.D("request",this),n.send(void 0!==h?h:null),this},w.Request=f,w.get=function(t,i,n){var e=w("GET",t);return"function"==typeof i&&(n=i,i=null),i&&e.CC(i),n&&e.end(n),e},w.head=function(t,i,n){var e=w("HEAD",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e},w["del"]=d,w["delete"]=d,w.RC=function(t,i,n){var e=w("PATCH",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e},w.jz=function(t,i,n){var e=w("POST",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e},w.put=function(t,i,n){var e=w("PUT",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e}},{"./is-object":154,"./request":156,"./request-base":155,"emitter":126,"reduce":152}],154:[function(t,i,n){function e(t){return null!=t&&"object"==typeof t}i.exports=e},{}],155:[function(t,i,n){var e=t("./is-object");n.clearTimeout=function(){return this.MC=0,clearTimeout(this.QC),this},n.parse=function(t){return this.HC=t,this},n.timeout=function(t){return this.MC=t,this},n.then=function(t,i){return this.end(function(n,e){n?i(n):t(e)})},n.SC=function(t){return t(this),this},n.get=function(t){return this.wC[t.toLowerCase()]},n.TC=n.get,n.set=function(t,i){if(e(t)){for(var n in t)this.set(n,t[n]);return this}return this.wC[t.toLowerCase()]=i,this.gC[t]=i,this},n.UC=function(t){return delete this.wC[t.toLowerCase()],delete this.gC[t],this},n.VC=function(t,i){return this.EC().append(t,i),this}},{"./is-object":154}],156:[function(t,i,n){function e(t,i,n){return"function"==typeof n?new t("GET",i).end(n):2==arguments.length?new t("GET",i):new t(i,n)}i.exports=e},{}],157:[function(t,i,n){i.exports={"name":"1g0","version":"0.4.14","description":"","author":"Olivier Lombart (kubicle)","license":"TBD","scripts":{"build":"browserify js/ui/htmlApp.js -t lessify | uglifyjs -o build/bld.js -m --mangle-props=unquoted --reserved-file build/reserved.json --reserve-domprops -c properties=false,pure_funcs=['log.debug','test.assert']","dev-build":"watchify js/test/htmlTestApp.js -o build/devBuild.js -t lessify -v","scorer":"browserify js/scorer/BoardAnalyser.js --standalone scorer -t lessify | uglifyjs -o build/scorer-0.1.js -m --mangle-props=unquoted --reserved-file build/reserved.json --reserve-domprops -c properties=false,pure_funcs=['log.debug','test.assert']","dev-scorer":"browserify js/scorer/BoardAnalyser.js --standalone scorer -o build/scorer-0.1.js","test":"node js/test/ciTestApp.js --ci","coverage":"node node_modules/istanbul/lib/cli.js cover js/test/ciTestApp.js -x **/frankie/** -x **/droopy/** -- --cover"},"main":"js/ui/htmlApp.js","repository":{"type":"git","url":"https://github.com/kubicle/1g0"},"bugs":{"url":"https://github.com/kubicle/1g0/issues"},"keywords":["baduk","go","igo","weiqi"],"dependencies":{"contra":"~1.9.4","dropbox":"~2.5.2"},"devDependencies":{"istanbul":"~0.3.22","codeclimate-test-reporter":"~0.1.1","browserify":"~10.2.4","lessify":"~1.0.1","watchify":"~3.2.2","uglify-js":"~2.8.18"}}},{}]},{},[103]);