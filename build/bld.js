!function t(i,n,e){function r(s,h){if(!n[s]){if(!i[s]){var a="function"==typeof require&&require;if(!h&&a)return a(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={g:{}};i[s][0].call(c.g,function(t){var n=i[s][1][t];return r(n||t)},c,c.g,t,i,n,e)}return n[s].g}for(var o="function"==typeof require&&require,s=0;s<e.length;s++)r(e[s]);return r}({1:[function(t,i,n){"function"==typeof Object.create?i.g=function(t,i){t.h=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,i:!1,j:!0,k:!0}})}:i.g=function(t,i){t.h=i;var n=function(){};n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],2:[function(t,i,n){function e(){c=!1,h.length?u=h.concat(u):p=-1,u.length&&r()}function r(){if(!c){var t=setTimeout(e);c=!0;for(var i=u.length;i;){for(h=u,u=[];++p<i;)h[p].l();p=-1,i=u.length}h=null,c=!1,clearTimeout(t)}}function o(t,i){this.o=t,this.p=i}function s(){}var h,a=i.g={},u=[],c=!1,p=-1;a.m=function(t){var i=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)i[n-1]=arguments[n];u.push(new o(t,i)),1!==u.length||c||setTimeout(r,0)},o.prototype.l=function(){this.o.apply(null,this.p)},a.title="browser",a.q=!0,a.s={},a.t=[],a.version="",a.u={},a.v=s,a.addListener=s,a.A=s,a.C=s,a.removeListener=s,a.D=s,a.F=s,a.G=function(t){throw new Error("process.binding is not supported")},a.H=function(){return"/"},a.I=function(t){throw new Error("process.chdir is not supported")},a.J=function(){return 0}},{}],3:[function(t,i,n){i.g=function(t){return t&&"object"==typeof t&&"function"==typeof t.K&&"function"==typeof t.fill&&"function"==typeof t.L}},{}],4:[function(t,i,n){(function(i,e){function r(t,i){var e={U:[],V:s};return arguments.length>=3&&(e.X=arguments[2]),arguments.length>=4&&(e.Y=arguments[3]),g(i)?e.Z=i:i&&n.$(e,i),x(e.Z)&&(e.Z=!1),x(e.X)&&(e.X=2),x(e.Y)&&(e.Y=!1),x(e._)&&(e._=!0),e.Y&&(e.V=o),a(e,t,e.X)}function o(t,i){var n=r.ba[i];return n?"["+r.Y[n][0]+"m"+t+"["+r.Y[n][1]+"m":t}function s(t,i){return t}function h(t){var i={};return t.forEach(function(t,n){i[t]=!0}),i}function a(t,i,e){if(t._&&i&&G(i.aa)&&i.aa!==n.aa&&(!i.constructor||i.constructor.prototype!==i)){var r=i.aa(e,t);return m(r)||(r=a(t,r,e)),r}var o=u(t,i);if(o)return o;var s=Object.keys(i),g=h(s);if(t.Z&&(s=Object.getOwnPropertyNames(i)),E(i)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(i);if(0===s.length){if(G(i)){var v=i.name?": "+i.name:"";return t.V("[Function"+v+"]","special")}if(k(i))return t.V(RegExp.prototype.toString.call(i),"regexp");if(j(i))return t.V(Date.prototype.toString.call(i),"date");if(E(i))return c(i)}var y="",b=!1,w=["{","}"];if(d(i)&&(b=!0,w=["[","]"]),G(i)){y=" [Function"+(i.name?": "+i.name:"")+"]"}if(k(i)&&(y=" "+RegExp.prototype.toString.call(i)),j(i)&&(y=" "+Date.prototype.toUTCString.call(i)),E(i)&&(y=" "+c(i)),0===s.length&&(!b||0==i.length))return w[0]+y+w[1];if(e<0)return k(i)?t.V(RegExp.prototype.toString.call(i),"regexp"):t.V("[Object]","special");t.U.push(i);var x;return x=b?p(t,i,e,g,s):s.map(function(n){return l(t,i,e,g,n,b)}),t.U.pop(),f(x,y,w)}function u(t,i){if(x(i))return t.V("undefined","undefined");if(m(i)){var n="'"+JSON.stringify(i).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.V(n,"string")}return b(i)?t.V(""+i,"number"):g(i)?t.V(""+i,"boolean"):v(i)?t.V("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,i,n,e,r){for(var o=[],s=0,h=i.length;s<h;++s)D(i,String(s))?o.push(l(t,i,n,e,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(l(t,i,n,e,r,!0))}),o}function l(t,i,n,e,r,o){var s,h,u;if(u=Object.getOwnPropertyDescriptor(i,r)||{value:i[r]},u.get?h=u.set?t.V("[Getter/Setter]","special"):t.V("[Getter]","special"):u.set&&(h=t.V("[Setter]","special")),D(e,r)||(s="["+r+"]"),h||(t.U.indexOf(u.value)<0?(h=v(n)?a(t,u.value,null):a(t,u.value,n-1),h.indexOf("\n")>-1&&(h=o?h.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+h.split("\n").map(function(t){return"   "+t}).join("\n"))):h=t.V("[Circular]","special")),x(s)){if(o&&r.match(/^\d+$/))return h;s=JSON.stringify(""+r),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.V(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.V(s,"string"))}return s+": "+h}function f(t,i,n){var e=0;return t.reduce(function(t,i){return e++,i.indexOf("\n")>=0&&e++,t+i.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===i?"":i+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+i+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function v(t){return null===t}function y(t){return null==t}function b(t){return"number"==typeof t}function m(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function x(t){return void 0===t}function k(t){return A(t)&&"[object RegExp]"===S(t)}function A(t){return"object"==typeof t&&null!==t}function j(t){return A(t)&&"[object Date]"===S(t)}function E(t){return A(t)&&("[object Error]"===S(t)||t instanceof Error)}function G(t){return"function"==typeof t}function M(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function S(t){return Object.prototype.toString.call(t)}function q(t){return t<10?"0"+t.toString(10):t.toString(10)}function C(){var t=new Date,i=[q(t.getHours()),q(t.getMinutes()),q(t.getSeconds())].join(":");return[t.getDate(),T[t.getMonth()],i].join(" ")}function D(t,i){return Object.prototype.hasOwnProperty.call(t,i)}n.format=function(t){if(!m(t)){for(var i=[],n=0;n<arguments.length;n++)i.push(r(arguments[n]));return i.join(" ")}for(var n=1,e=arguments,o=e.length,s=String(t).replace(/%[sdj%]/g,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(e[n++]);case"%d":return Number(e[n++]);case"%j":try{return JSON.stringify(e[n++])}catch(t){return"[Circular]"}default:return t}}),h=e[n];n<o;h=e[++n])v(h)||!A(h)?s+=" "+h:s+=" "+r(h);return s},n.M=function(t,r){function o(){if(!s){if(i.O)throw new Error(r);i.P?console.trace(r):console.error(r),s=!0}return t.apply(this,arguments)}if(x(e.process))return function(){return n.M(t,r).apply(this,arguments)};if(i.N===!0)return t;var s=!1;return o};var B,z={};n.R=function(t){if(x(B)&&(B=i.s.S||""),t=t.toUpperCase(),!z[t])if(new RegExp("\\b"+t+"\\b","i").test(B)){var e=i.T;z[t]=function(){var i=n.format.apply(n,arguments);console.error("%s %d: %s",t,e,i)}}else z[t]=function(){};return z[t]},n.aa=r,r.Y={"bold":[1,22],"italic":[3,23],"underline":[4,24],"inverse":[7,27],"white":[37,39],"grey":[90,39],"black":[30,39],"blue":[34,39],"cyan":[36,39],"green":[32,39],"magenta":[35,39],"red":[31,39],"yellow":[33,39]},r.ba={"special":"cyan","number":"yellow","boolean":"yellow","undefined":"grey","null":"bold","string":"green","date":"magenta","regexp":"red"},n.isArray=d,n.ca=g,n.da=v,n.ea=y,n.fa=b,n.ga=m,n.ha=w,n.ia=x,n.ja=k,n.ka=A,n.la=j,n.ma=E,n.na=G,n.oa=M,n.isBuffer=t("./support/isBuffer");var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",C(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n.$=function(t,i){if(!i||!A(i))return t;for(var n=Object.keys(i),e=n.length;e--;)t[n[e]]=i[n[e]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":3,"_process":2,"inherits":1}],5:[function(t,i,n){i.g={"#noInternet":"Error: no internet connection","#httpReqError":"Http error %1 while requesting %2","#appTitle":"1g0: let's play go!","#cancelAction":"Cancel","#confirmTitle":"Confirm","#problem":"Problem","#ok":"OK","#yes":"YES","#no":"NO","#cancel":"Cancel","#close":"Close","#none":"-","#play":"Play","#load":"Load","#newGame":"New game","#myGames":"My games","#importGame":"Import games","#exportGame":"Export game","#downloadLatest":"Update from %1","#fromFile":"From file:","#selectFile":"Select file","#recentGames":"Recent games:","#fromText":"From copy/paste:","#fromTextHelp":"Paste game in SGF format, e.g. (;FF[4]...)","#invalidSgf":'Invalid SGF game\n(game starts with "%1...")',"#mergeDivergence":"Merge error: games diverge at move #%1","#archivedGames":"Archived games","#deleteGame":"Delete","#deleteGameConfirm":"Do you really want to delete this game?","#archiveGame":"Archive","#archiveGameConfirm":"Do you want to archive this game? (you can restore it later)","#showArchivedGames":"Archived games","#restoreGame":"Restore","#empty":"(empty)","#myGamesHelp":"Any game you create or load/edit will be added to this list","#settings":"Settings","#colorTheme":"Color theme","#setupDropbox":"Setup Dropbox","#review":"Study","#endStudy":"End study","#evalScore":"Evaluate score","#bookmark":"Bookmark on/off","#rewindAll":"Go to game start","#gotoLastMove":"Go to game last move","#prune":"Delete this variation","#pruneConfirm":"Deletion of variation %1 (%3 moves starting by %2)?","#resign":"Resign","#pass":"Pass","#undo":"Undo","#next":"Next","#nextN":"Next %1","#finish":"Finish","#accept":"Accept","#refuse":"Refuse","#resignConfirm":"Do you really want to resign?","#getLatestGame":"Get latest game moves","#retrieving":"Retrieving game %2 from %1...","#retrieved":"Game updated.","#syncGame":"Sync this game","#syncMyGames":"Sync my games","#syncStart":"Connecting...","#noCloud":"Not connected to cloud","#archivedGame":"[archived %1]","#remote":"[remote %1]","#uploaded":"Uploaded: ","#downloaded":"Downloaded: ","#alreadySync":"Already in sync: ","#synced":"Synced: ","#deleted":"Deleted: ","#archived":"Archived: ","#unarchived":"Unarchived: ","#undeleted":"Undeleted: ","#syncDone":"Sync completed."}},{}],6:[function(t,i,n){i.g={".cafeAuLait":{".menuBtn":{"backgroundColor":"#704f43"},".topMenu":{"backgroundColor":"#5c4137"}},".neonBlack":{"body":{"backgroundColor":"#000"},".btn":{"backgroundColor":"#02192b","color":"#daebef","borderColor":"#5d80c6"},".btn+toggled":{"backgroundColor":"#380966","color":"#cad904"},".menuBtn":{"backgroundColor":"#0e4571"},".topMenu":{"backgroundColor":"#0b3557"},".statusBar":{"backgroundColor":"#c7cced","border":"#07b2ff 1px solid","boxShadow":"3px 3px 20px #537cc6"},".board":{"backgroundColor":"#002"},".mainControls":{"color":"#daebef"},".dialog":{"backgroundColor":"#0d0217","color":"#daebef","boxShadow":"#3fb 3px 3px 20px","border":"solid #b395d7 1px"},".dialogTitle":{"backgroundColor":"#0b3557","color":"#fffaff","textShadow":"#06b1ff 4px 4px 7px","borderColor":"#fff","boxShadow":"#00abff 3px 3px 20px"},".playerBtn":{"backgroundColor":"#5283ff"},".sizeBtn":{"backgroundColor":"#5283ff"},".boardImgFrame":{"backgroundColor":"#09132a","boxShadow":"#3fb 3px 3px 20px"},".curSize":{"textShadow":"#0a9da9 3px 3px 5px"},".gameList":{"border":"1px solid #8ea3da","backgroundColor":"#000"},".oneGame+selected":{"backgroundColor":"#2a4990"},".dropDwn":{"backgroundColor":"#000"},".inputBox":{"backgroundColor":"#000"},".devDiv":{"backgroundColor":"#5a3571","color":"#38cead","border":"1px solid #400ac1"},".devLogBox":{"color":"#000"}},".bottleGreen":{"body":{"backgroundColor":"#000"},".btn":{"backgroundColor":"#022b10","color":"#fff","borderColor":"#5dc677"},".btn+toggled":{"backgroundColor":"#380966","color":"#cad904"},".menuBtn":{"backgroundColor":"#146c43"},".topMenu":{"backgroundColor":"#0b573e"},".statusBar":{"backgroundColor":"#8ca197","border":"#2d8722 1px solid","boxShadow":"3px 3px 20px #537cc6"},".board":{"backgroundColor":"#002600"},".mainControls":{"color":"#eee"},".dialog":{"backgroundColor":"#071903","color":"#eee","boxShadow":"#3ff 2px 2px 15px","border":"solid #000 1px"},".dialogTitle":{"backgroundColor":"#0b573e","color":"#fffaff","textShadow":"#06b1ff 4px 4px 7px","borderColor":"#fff","boxShadow":"#00abff 3px 3px 20px"},".playerBtn":{"backgroundColor":"#107733"},".sizeBtn":{"backgroundColor":"#107733"},".boardImgFrame":{"backgroundColor":"#0c2529","boxShadow":"#3ff 2px 2px 15px"},".curSize":{"textShadow":"#0a9da9 3px 3px 5px"},".gameList":{"border":"1px solid #8ea3da","backgroundColor":"#000"},".oneGame+selected":{"backgroundColor":"#2a4990"},".dropDwn":{"backgroundColor":"#000"},".inputBox":{"backgroundColor":"#000"},".devDiv":{"backgroundColor":"#5a3571","color":"#38cead","border":"1px solid #400ac1"},".devLogBox":{"color":"#000"}}}},{}],7:[function(t,i,n){i.g={"confirm-delete-moves":3}},{}],8:[function(t,i,n){i.g={"server-url":"https://ig0.herokuapp.com/","dropbox-clientId":"gdap2n66j8rl89n"}},{}],9:[function(t,i,n){i.g={".cgos":{"useAreaScoring":!0,"usePositionalSuperko":!0},".chinese":{"useAreaScoring":!0,"usePositionalSuperko":!0},".japanese":{}}},{}],10:[function(t,i,n){"use strict";function e(t){this.pa=t,this.qa=null,this.ra=null,this.sa=null,this.ta=null,this.ua=null,this.va={},this.wa=null,this.xa=0}function r(t){return(t.length-t.replace(/;[BW]\[/g,"").length)/3}function o(t){return(t.length-t.replace(/\(;/g,"").length)/2-1}function s(t,i){return 0===i?"":", "+i+" "+t}function h(t){return t||0===t?" "+t:""}function a(t){var i=t.Ya(),n=parseInt(i);return isNaN(n)?n=19:i=i.substr(i.indexOf(" ")+1),String.fromCharCode(90-n)+"|"+i}function u(t,i){return a(t).localeCompare(a(i))}var c=t("./GameInfo"),p=t("./hh/getText"),l=t("./net/goSites"),f=t("./ReviewTree"),d=t("./SgfReader"),g=t("./SgfWriter");i.g=e;e.prototype.ya=function(){var t={};return t["sgf"]=this.za(),t["tagMap"]=this.va,t["serverStamp"]=this.wa,t["lastChange"]=this.xa,t},e.prototype.Aa=function(t){if(this.pa)throw new Error("Game already initialized");return"string"==typeof t&&"("===t[0]?(this.pa=t,!0):!!t["sgf"]&&(this.pa=t["sgf"],this.va=t["tagMap"]||{},this.wa=t["serverStamp"]||null,this.xa=t["lastChange"]||0,!0)},e.prototype.Ba=function(t,i,n,e){this.ra=new f(e),this.ta=e||[],this.sa=new c,this.sa.Ba(),this.sa.Ca(t,i,n)},e.prototype.Da=function(t,i,n){if(!d.Ea(t))return i.push(p("#invalidSgf",t.substr(0,15))),!1;if(this.pa)throw new Error("Game already initialized");return this.pa=t,this.Fa(i,n)},e.prototype.Fa=function(t,i){var n=new d;return!!n.Ga(this.pa,t,i)&&(this.sa=new c,this.sa.Ha(n.Ia),this.ra=n.Ja(),this.ta=n.Ka()||[],this.ua=n.La(),!0)},e.prototype.Ma=function(t,i){var n=this.Ja(),e=t.Ja(),r=n.Ma(e);return r!==-1?(i.push(p("#mergeDivergence",r+1)),!1):(this.ua=n.Na(),this.pa=null,!0)},e.prototype.Oa=function(t){if(!this.ua||this.ua.join()!==t.join()){var i=this.Ja();this.ua=t.concat(),i.Oa(t)}},e.prototype.Pa=function(){return this.sa||this.Fa(),this.sa},e.prototype.Ja=function(){return this.ra||this.Fa(),this.ra},e.prototype.Ka=function(){return this.ta||this.Fa(),this.ta},e.prototype.La=function(){return this.ua||(this.ua=this.Ja().Na()),this.ua},e.prototype.za=function(){return this.pa||this.Qa(),this.pa},e.prototype.Qa=function(){var t=new g,i=t.Ra(this.sa,this.ra);this.Sa(i)},e.prototype.Sa=function(t){return t!==this.pa&&(this.pa=t,this.wa=null,this.xa=Date.now(),!0)},e.prototype.Ta=function(t,i){var n=this.va[t];if(n)return n;var e=i,r=this.pa.indexOf(t+"[");if(r>=0){var o=this.pa.substring(r+t.length+1,this.pa.indexOf("]",r));switch(typeof i){case"number":e=parseFloat(o);break;default:e=o}}return void 0!==e&&(this.va[t]=e),e},e.prototype.Ua=function(t){var i=this.Ta(t,"?");return i.length<=10?i:i.substr(0,9).trim()+"."},e.prototype.Va=function(t,i){this.wa=t,this.xa=i},e.prototype.Wa=function(){return this.wa},e.prototype.Xa=function(){return this.xa},e.prototype.Ya=function(){var t="",i=this.Ta("SZ",19);return 19!==i&&(t+=i+"x"+i+" "),t+=this.Ua("PW")+"/"+this.Ua("PB"),t+=s("mov.",r(this.pa)),t+=s("var.",o(this.pa))},e.prototype.Za=function(){if(this.qa)return this.qa;var t="",i=this.Ta("SZ",19);return 19!==i&&(t+=i+"x"+i+" "),t+=this.Ua("PW")+"-VS-"+this.Ua("PB"),t+=h(this.Ta("DT")),t+=h(this.$a("PC")),t+=h(this.$a("SO")),t+=h(this.$a("EV")),t=t.replace(/[\\\/]/g,"-"),this.qa=t,t},e.prototype.$a=function(t){var i=this.Ta(t);return i?l._a(t,i):i},e.ab=u},{"./GameInfo":11,"./ReviewTree":23,"./SgfReader":25,"./SgfWriter":26,"./hh/getText":67,"./net/goSites":79}],11:[function(t,i,n){"use strict";function e(){this.bb()}i.g=e,e.prototype.bb=function(){this.cb={}},e.prototype.Ba=function(){this.bb(),this.eb("date",(new Date).toISOString().substr(0,10))},e.prototype.Ha=function(t){this.bb();for(var i in t)this.cb[i]=t[i]},e.prototype.fb=function(t){return this.cb[t]},e.prototype.eb=function(t,i){this.cb[t]=i},e.prototype.gb=function(){return this.cb},e.prototype.Ca=function(t,i,n){this.eb("boardSize",t),this.eb("komi",i),this.eb("rules",n)}},{}],12:[function(t,i,n){"use strict";function e(){this.pb(y),this.qb=null,this.rb()}var r=t("./constants"),o=t("./Goban"),s=t("./HandicapSetter"),h=t("./log"),a=t("./Move"),u=t("../config/rules.json"),c=a.hb,p=a.ib,l=a.jb,f=a.kb,d=a.lb,g=r.mb,v=r.nb,y=r.ob;i.g=e,e.prototype.rb=function(){this.history=[],this.sb=[],this.tb=null,this.ub=0,this.vb=this.wb=g,this.xb=this.yb=!1,this.zb=this.Ab=null},e.prototype.Bb=function(t){this.pb(t.Cb,!0),this.Db(t.qb.Eb,t.tb,t.ub),this.Fb(t.wb),this.Gb(t.history)},e.prototype.Hb=function(){this.qb.clear(),this.history=[],this.vb=this.wb,this.Ib()},e.prototype.pb=function(t,i){this.Cb=t,t=t||"unspecified";var n=u["."+t.toLowerCase()];if(!n){if(!i)throw new Error("Invalid rules: "+t+"\nValid values: "+Object.keys(u).map(function(t){return t.substr(1)}).join(", "));n=u["."+y.toLowerCase()]}this.usePositionalSuperko=n.usePositionalSuperko||!1,this.useAreaScoring=n.useAreaScoring||!1},e.prototype.Jb=function(){return this.Cb},e.prototype.Db=function(t,i,n){if(this.rb(),this.qb&&t===this.qb.Eb)this.qb.clear();else if(this.qb=new o(t),this.qb.Eb!==t)return this.Kb("Size could not be set: "+t);return this.qb.Lb(this.usePositionalSuperko),this.ub=void 0!==n?n:i?.5:6.5,i=i||0,!!this.Mb(i)},e.prototype.Fb=function(t){this.vb=this.wb=t},e.prototype.Mb=function(t){if(this.history.length>0)throw new Error("Handicap cannot be changed during a game");if(0===t||"0"===t)return this.tb=null,this.Fb(g),!0;var i,n,e;if(""+~~t==""+t)for(e=~~t,i=s.Nb(this.qb.Eb,e),this.tb=[],n=0;n<i.length;n++)this.tb.push(d(i[n][0],i[n][1]));else e=t.length,this.tb=t;return this.tb.length||(this.tb=null),this.Ib(),this.Fb(this.tb?v:g),!(e&&(!this.tb||this.tb.length!==e))||this.Kb("Handicap could not be set: "+t)},e.prototype.Ib=function(){var t=this.tb;if(t)for(var i=0;i<t.length;i++){var n=f(t[i]);this.qb.Ob(n[0],n[1],n[2]||g)}},e.prototype.Pb=function(){return this.tb},e.prototype.Qb=function(){return this.tb?this.tb.length:0},e.prototype.Rb=function(t,i){if(h.error&&h.error(t),!i)throw new Error(t);return i.push(t),!1},e.prototype.Gb=function(t,i){if(!t||!t.length)return!0;for(var n=0;n<t.length;n++)if(!this.Sb(t[n]))return this.Rb("Failed playing loaded move #"+(n+1)+":\n"+this.Tb().join(", "),i);return!0},e.prototype.Ub=function(t,i){return!t||this.Gb(t.split(","),i)},e.prototype.Sb=function(t){if(this.yb&&t.indexOf("undo")<0)return this.Kb("Game already ended");if(/^[B|W]?-?[a-z][1-2]?[0-9]$/.test(t))return this.Vb(t);var i=l(t);if(i.startsWith("pass"))return this.Wb();if(i.startsWith("resi"))return this.Xb(p(t));if("undo"===i)return this.Yb();if("half_undo"===i)return this.Yb(!0);if(i.startsWith("hand")){var n=i.substr(i.indexOf(":")+1);return this.Mb(n.split("-"))}return i.startsWith("load:")?this.Ub(i.slice(5)):this.Kb("Invalid command: "+i.substr(0,20))},e.prototype.Vb=function(t){var i=f(t);3===i.length&&(this.vb=i[2]);var n=i[0],e=i[1];return this.qb.Zb(n,e,this.vb)?(this.qb.Ob(n,e,this.vb),this.$b(t),this._b(),!0):this.Kb("Invalid move: "+t)},e.prototype.Xb=function(t,i){t=void 0!==t?t:this.vb,this.zb=t,this.Ab=i;var n=c("resign",t)+(i?"-"+i:"");return this.$b(n),this._b(),this.yb=!0,this.xb=!1,!0},e.prototype.Wb=function(){var t=this.history[this.history.length-1];return t&&t.endsWith("pass")&&(this.xb=!0),this.$b(c("pass",this.vb)),this._b(),!0},e.prototype.ac=function(t,i){return this.xb?(this.xb=!1,t?(this.yb=!0,!0):(i!==this.vb&&(this.history.pop(),this._b()),!0)):this.Kb("The game is not ending yet")},e.prototype.bc=function(){return this.history.length},e.prototype.cc=function(){var t="";this.tb&&(t="handicap:"+this.tb.join("-")+",");var i=this.history;return i[0]=c(l(i[0]),this.wb),t+i.join(",")},e.prototype.Kb=function(t){return this.sb.push(t),!1},e.prototype.Tb=function(){var t=this.sb;return this.sb=[],t},e.prototype._b=function(){this.vb=1-this.vb},e.prototype.$b=function(t){return this.history.push(t)},e.prototype.Yb=function(t){var i=t?1:2;if(this.history.length<i)return this.Kb("Nothing to undo");this.yb=this.xb=!1;for(var n=i;n>=1;n--){var e=this.history.pop();!e.endsWith("pass")&&e.indexOf("resi")<0&&this.qb.dc()}return t&&this._b(),!0}},{"../config/rules.json":9,"./Goban":16,"./HandicapSetter":19,"./Move":21,"./constants":51,"./log":75}],13:[function(t,i,n){"use strict";function e(t){this.ec=t,this.fc=null,this.gc()}var r=t("./GameInVault"),o=t("./GameVaultList"),s=t("./MostRecentlyUsedList");i.g=e,e.prototype.gc=function(){this.hc=new o(this.ec,"myActiveGames"),this.ic=new o(this.ec,"archivedGames"),this.jc=new o(this.ec,"recentGames"),this.kc=new s(this.ec,"mostRecentGames",5),this.hc.lc("myGames")},e.prototype.mc=function(t){return this.fc&&this.nc(),this.fc=t,this.fc},e.prototype.oc=function(){return this.fc},e.prototype.nc=function(){var t=this.fc;return t&&(this.fc=null,this.hc.pc(t),this.qc(t)),t},e.prototype.rc=function(t){var i=this.kc.getItem(t);return this.jc.sc(i)||null},e.prototype.tc=function(t){this.hc.pc(t)},e.prototype.uc=function(t){return this.hc.sc(t)||null},e.prototype.vc=function(){return this.hc.wc()};e.xc={yc:0,ACTIVE:1,zc:2,Ac:-1},e.prototype.Bc=function(t){return this.hc.sc(t)?1:this.ic.sc(t)?2:this.Cc(t)?-1:0},e.prototype.Dc=function(t){return this.ic.sc(t)},e.prototype.Ec=function(){return this.ic.wc()},e.prototype.Fc=function(t){return this.hc.Gc(t)},e.prototype.Hc=function(t){return this.ic.Gc(t)},e.prototype.Cc=function(t){return this.hc.Cc(t)||this.ic.Cc(t)},e.prototype.Ic=function(t){return this.hc.Jc(this.ic,t)},e.prototype.Kc=function(t){return this.ic.Jc(this.hc,t)},e.prototype.Lc=function(t){this.ic.pc(t)},e.prototype.Mc=function(t,i){var n=new r;if(!n.Da(t,i))return null;var e=this.hc.sc(n.Za());return e?e.Ma(n,i)?e:null:n},e.prototype.Nc=function(t){this.ec.Oc("interruptedGame",t.ya())},e.prototype.Pc=function(){var t=this.ec.Qc("interruptedGame");if(!t)return null;var i=new r;return i.Aa(t)?(this.ec.Oc("interruptedGame",null),i):(console.error("Invalid serialized game"),null)},e.prototype.Rc=function(){for(var t=this.kc.Sc(),i=[],n=0;n<t.length;n++){var e=this.jc.sc(t[n]);e&&i.push(e.Ya())}return i},e.prototype.qc=function(t){this.jc.pc(t);var i=t.Za();this.kc.Tc(i)&&this.jc.Gc(i)}},{"./GameInVault":10,"./GameVaultList":14,"./MostRecentlyUsedList":20}],14:[function(t,i,n){"use strict";function e(t,i){this.ec=t,this.Uc=i,this.Vc={},this.Wc=null,this.Xc={},this.Yc()}var r=t("./GameInVault");i.g=e;e.prototype.Yc=function(){this.Wc=this.ec.Qc(this.Uc,{}),this.Xc=this.ec.Qc(this.Uc+"~",{});for(var t in this.Wc){var i=new r;i.Aa(this.Wc[t]),this.Vc[t]=i}},e.prototype.lc=function(t){for(var i=this.ec.Qc(t,[]),n=0;n<i.length;n++){var e=new r(i[n]),o=e.Za();this.Vc[o]=e,this.Wc[o]=e.ya()}this.ec.Oc(this.Uc,this.Wc),this.ec.Oc(t,void 0)},e.prototype.pc=function(t){var i=t.Za();this.Vc[i]=t,this.Wc[i]=t.ya(),this.ec.Oc(this.Uc,this.Wc),this.Xc[i]&&(delete this.Xc[i],this.ec.Oc(this.Uc+"~",this.Xc))},e.prototype.Zc=function(t){return!!this.Vc[t]&&(delete this.Vc[t],delete this.Wc[t],this.ec.Oc(this.Uc,this.Wc),!0)},e.prototype.Gc=function(t){return!!this.Zc(t)&&(this.Xc[t]=Date.now(),this.ec.Oc(this.Uc+"~",this.Xc),!0)},e.prototype.Cc=function(t){return this.Xc[t]},e.prototype.wc=function(){var t=[];for(var i in this.Vc)t.push(this.Vc[i]);return t},e.prototype.sc=function(t){return this.Vc[t]},e.prototype.Jc=function(t,i){var n=this.Vc[i];return!!n&&(this.Zc(i),t.pc(n),!0)}},{"./GameInVault":10}],15:[function(t,i,n){"use strict";function e(t,i,n){this.$c=t||{},this._c=i||{},this.name=n||"#"+o++}var r=t("./helper"),o=1;i.g=e;e.prototype.clone=function(t){return new e(r.clone(this.$c),r.clone(this._c),t)},e.prototype.ad=function(t){this._c=t},e.prototype.toString=function(){var t="{"+this.name+" - ";for(var i in this.$c)t+=i+":"+this.$c[i].toFixed(2)+", ";return t.bd(", ")+"}"},e.prototype.dd=function(t){var i=0;for(var n in this.$c){var e=this.$c[n],r=t.$c[n];r<0!=e<0?r<0?(e-=r,r=0):(r-=e,e=0):(e=Math.abs(e),r=Math.abs(r));var o;o=0===r?e>1?1:e:0===e?r>1?1:r:1-(r>=e?e/r:r/e),i+=o}return i},e.prototype.get=function(t,i,n,e){void 0===n&&(n=null),void 0===e&&(e=null);var r=this.$c[t];if(r)return r;if(this.$c[t]=i,(n||e)&&(this._c[t]=[n,e]),n&&e&&n>e)throw new Error("Limits are invalid: "+n+" > "+e);return i},e.prototype.ya=function(){return JSON.stringify(this)},e.ed=function(t){var i=JSON.parse(t);this.$c=i.$c,this._c=i._c},e.prototype.fd=function(t,i,n,e,r){var o=this.$c,s=t.$c;i.ad(this._c),n.ad(this._c);var h=i.$c,a=n.$c,u=~~(Math.random()*o.length),c=~~(Math.random()*u),p=0;for(var l in o)p<c||p>u?(h[l]=o[l],a[l]=s[l]):(h[l]=s[l],a[l]=o[l]),Math.random()<e&&(h[l]=this.gd(l,h[l],r)),Math.random()<e&&(a[l]=this.gd(l,a[l],r)),p++},e.prototype.gd=function(t,i,n){var e,r=this._c[t];if(r){var o=r[0],s=r[1];if(Math.random()<n)e=o+Math.random()*(s-o);else{e=i*(1+2*Math.random()*.05-.05),o&&e<o&&(e=o),s&&e>s&&(e=s)}}else e=i+10*(Math.random()-.5);return e},e.prototype.hd=function(){for(var t in this.$c)this.$c[t]=this.gd(t,this.$c[t],1);return this}},{"./helper":52}],16:[function(t,i,n){"use strict";function e(t){if(void 0===t&&(t=19),t!==~~t||t<3)throw new Error("Invalid goban size: "+t);this.Eb=t,this.kd=new o(t,a),this.grid=new o(t,s.jd),this.ld=this.grid.md;var i,n;for(n=t;n>=1;n--)for(i=t;i>=1;i--)this.ld[n][i]=new s(this,i,n,u);for(n=1;n<=t;n++)for(i=1;i<=t;i++)this.ld[n][i].nd();e.od=new h(this,new s(this,-50,-50,u),-100,0),this.pd=[e.od],this.qd=[e.od],this.rd=[],this.sd=0,this.history=[],this.Lb(!1),this.td=0}var r=t("./constants"),o=t("./Grid"),s=t("./Stone"),h=t("./Group"),a=(t("./test"),r.jd),u=r.EMPTY;i.g=e,e.prototype.clear=function(){for(var t=1;t<=this.Eb;t++)for(var i=1;i<=this.Eb;i++){var n=this.ld[t][i];n.group&&n.group.clear()}this.pd.shift(),this.qd.shift(),this.rd.concat(this.pd),this.rd.concat(this.qd),this.pd.length=0,this.qd.length=0,this.pd.push(e.od),this.qd.push(e.od),this.sd=0,this.history.length=0,this.Lb(!1),this.td=0},e.prototype.ud=function(t,i){var n=++this.sd,e=this.rd.pop();return e?e.vd(t,i,n):e=new h(this,t,i,n),e},e.prototype.wd=function(t){t.xd===this.sd&&this.sd--,this.rd.push(t)},e.prototype.yd=function(){return this.grid.zd()},e.prototype.Ad=function(t){this.kd.Ad(t);for(var i=this.Eb;i>=1;i--)for(var n=1;n<=this.Eb;n++){var e=this.kd.md[i][n];e!==u&&this.Ob(n,i,e)}},e.prototype.Bd=function(){for(var t={},i=this.Eb;i>=1;i--)for(var n=this.Eb;n>=1;n--){var e=this.ld[i][n].group;e&&(t[e.xd]=e)}return t},e.prototype.Cd=function(){for(var t,i="Board:\n"+this.toString()+"\nGroups:\n"+this.grid.Dd(function(t){return t.group?""+t.group.xd:"."})+"\nStones in groups:\n",n={},e=this.grid.md,r=0;t=e[r],r<e.length;r++)for(var o,s=t,h=0;o=s[h],h<s.length;h++)o&&o.group&&(n[o.group.xd]=o.group);for(var a=1;a<=this.sd;a++)n[a]&&(i+=n[a].Cd()+"\n");return i},e.prototype.toString=function(){return this.grid.Dd()},e.prototype.Zb=function(t,i,n){if(t<1||t>this.Eb||i<1||i>this.Eb)return!1;var e=this.ld[i][t];if(e.color!==u)return!1;if(e.Ed(n))return!1;if(this.Fd){if(this.Gd[this.Hd(t,i,n)])return!1}else if(e.Id(n))return!1;return!0},e.prototype.Jd=function(t,i){return this.ld[i][t]},e.prototype.Kd=function(t,i){return this.ld[i][t].color},e.prototype.Ld=function(t,i){return this.ld[i][t].Ld()},e.prototype.bc=function(){return this.history.length},e.prototype.Ob=function(t,i,n){this.Md(t,i,n);var e=this.ld[i][t];if(e.color!==u)throw new Error("Tried to play on existing stone in "+e);return this.Nd(t,i,n)},e.prototype.dc=function(){if(!this.history.length)throw new Error("Extra undo");this.history.pop().Od(),this.Md()},e.prototype.Nd=function(t,i,n){var e=this.ld[i][t];return e.Ed(n),this.history.push(e),this.td++,e.Pd(n),e},e.prototype.Qd=function(){this.history.pop().Od()},e.prototype.Rd=function(){return this.pd[this.pd.length-1]},e.prototype.Sd=function(){return this.history[this.history.length-1]},e.prototype.Td=function(t){t=t||[0,0];for(var i=this.pd.length-1;i>=0;i--){var n=this.pd[i];t[n.color]+=n.Ud.length}return t},e.prototype.Lb=function(t){if(this.history.length>0)throw new Error("Superko rule changed during game");this.Fd=t,t?(this.Vd=this.Wd(),this.Xd=[],this.Gd={}):(this.Vd=null,this.Xd=this.Gd=null)},e.prototype.Md=function(t,i,n){this.Fd?t?(this.Xd.push(this.Vd),this.Gd[this.Vd]=this.history.length,this.Vd=this.Hd(t,i,n)):(this.Vd=this.Xd.pop(),this.Gd[this.Vd]=null):this.Vd=null},e.prototype.Hd=function(t,i,n){for(var e=this.Yd(this.Vd,t,i,n),r=this.Jd(t,i).Zd(1-n),o=r.length-1;o>=0;o--)if(!(r[o].$d>1))for(var s=r[o].Ud,h=s.length-1;h>=0;h--){var a=s[h];e=this.Yd(e,a._d,a.ae,u)}return e},e.prototype.be=function(){return this.Fd?this.Vd:(this.Vd||(this.Vd=this.yd()),this.Vd)};var c="0".charCodeAt();e.prototype.Wd=function(){for(var t="",i="",n=this.Eb,e=1;e<=n;e++)for(var r=this.ld[e],o=1;o<=n;o++)t+=String.fromCharCode(c+r[o].color+1),4===t.length&&(i+=String.fromCharCode(parseInt(t,3)+33),t="");return t.length&&(t=(t+"000").substr(0,4),i+=String.fromCharCode(parseInt(t,3)+33)),i},e.prototype.Yd=function(t,i,n,e){var r,o=(n-1)*this.Eb+(i-1),s=~~(o/4),h=o%4;if(e===u){var a=("000"+(t.charCodeAt(s)-33).toString(3)).slice(-4),c=a.substr(0,h)+"0"+a.substr(h+1);r=parseInt(c,3)+33}else r=t.charCodeAt(s)+(1<<e)*Math.pow(3,3-h);return t.substr(0,s)+String.fromCharCode(r)+t.substr(s+1)}},{"./Grid":17,"./Group":18,"./Stone":27,"./constants":51,"./test":80}],17:[function(t,i,n){"use strict";function e(t,i,n){if(void 0===i)throw new Error("Grid init value must be defined");this.Eb=t,void 0===n?this.md=a.de(t+2,t+2,i):(this.md=a.de(t+2,t+2,n),this.init(i))}function r(t){if(t===p)return"(BORDER)";if(t>=e.le)return String.fromCharCode("A".charCodeAt()+t-e.le);if(t<e.ne||t>=e.je.length)throw new Error("Invalid color "+t);return t<0&&(t+=e.je.length),e.je[t]}function o(t){return r("number"==typeof t?t:t.color)}function s(t){for(var i="",n=t.length-1;n>=0;n--)i+=t[n];return i}var h=t("./constants"),a=t("./helper"),u=t("./Move"),c=u.ce,p=h.jd;i.g=e,e.ee="+",e.fe="?",e.ge="@O",e.he="&#",e.ie="-:",e.je=e.ge+e.he+e.ie+e.fe+e.ee,e.ke=e.fe+e.ee+e.je,e.le=100,e.me=-1,e.ne=-2,e.oe=2,e.pe=4,e.qe=[0,0,-1,1,1,-1,-1,1],e.re="-'?.:",e.prototype.init=function(t){if(void 0===t)throw new Error("Grid init value must be defined");for(var i=this.Eb;i>=1;i--)for(var n=this.md[i],e=this.Eb;e>=1;e--)n[e]=t},e.prototype.K=function(t){if(t.Eb!==this.Eb)throw new Error("Cannot copy between different sized grids");for(var i=this.Eb;i>=1;i--)for(var n=this.md[i],e=t.md[i],r=this.Eb;r>=1;r--)n[r]=e[r];return this},e.prototype.se=function(t){var i=t.grid;if(i.Eb!==this.Eb)throw new Error("Cannot copy between different sized grids");for(var n=this.Eb;n>=1;n--)for(var e=this.md[n],r=i.md[n],o=this.Eb;o>=1;o--)e[o]=r[o].color;return this},e.te=function(t){return e.ke.indexOf(t)+e.ne},e.prototype.Dd=function(t){return this.ue(!0,"\n",t||o)},e.prototype.zd=function(t){return this.ue(!1,",",t||o)},e.prototype.ue=function(t,i,n){var r,o,s,h=new e(this.Eb,"").md,a=1;for(o=this.Eb;o>=1;o--)for(r=1;r<=this.Eb;r++)null!==(s=n(this.md[o][r]))&&(h[o][r]=s,a=Math.max(a,s.length));var u=a,p="          ",l="";for(o=this.Eb;o>=1;o--){for(t&&(l+="%2d".format(o)+" "),r=1;r<=this.Eb;r++)s=h[o][r],s.length<u&&(s=p.substr(1,u-s.length)+s),l+=s;l+=i}if(t){for(l+="   ",r=1;r<=this.Eb;r++)l+=p.substr(1,u-1)+c(r);l+="\n"}return"\n"!==i&&(l=l.ve()),l},e.prototype.toString=function(){for(var t="",i=this.Eb;i>=1;i--){for(var n=1;n<=this.Eb;n++)t+=r(this.md[i][n]);t+="\n"}return t},e.prototype.yd=function(){
return"object"==typeof this.md[1][1]?this.zd(function(t){return r(t.color)}):this.zd(function(t){return r(t)})},e.prototype.Ad=function(t){var i=t.split(/\"|,/);if(i.length!==this.Eb)throw new Error("Invalid image: "+i.length+" rows instead of "+this.Eb);for(var n=this.Eb;n>=1;n--){var r=i[this.Eb-n];if(r.length!==this.Eb)throw new Error("Invalid image: row "+r);for(var o=1;o<=this.Eb;o++)this.md[n][o]=e.te(r[o-1])}},e.we=function(t){return t.split(",").reverse().join()},e.xe=function(t){return t.split(",").map(s).join()},e.ye=function(t){return s(t)},e.ze=function(t){for(var i="",n=t.split(","),e=n[0].length-1;e>=0;e--){i+=",";for(var r=0;r<n.length;r++)i+=n[r][e]}return i.substr(1)}},{"./Move":21,"./constants":51,"./helper":52}],18:[function(t,i,n){"use strict";function e(t,i,n,e){this.qb=t,this.Ud=[i],this.$d=n,this.color=i.color,this.Be=null,this.Ce=null,this.De=null,this.xd=e,this.Ee=null,this.Fe=this.Ge=0}var r=t("./constants"),o=t("./log"),s=t("./Move"),h=s.Ae,a=r.EMPTY;i.g=e,e.prototype.vd=function(t,i,n){this.Ud.length=0,this.Ud.push(t),this.$d=i,this.color=t.color,this.Be=this.Ce=this.De=null,this.xd=n,this.Fe=this.Ge=0},e.prototype.clear=function(){for(var t=this.Ud.length-1;t>=0;t--)this.Ud[t].clear();this.qb.wd(this)},e.prototype.toString=function(t){if(0===t)return"#"+this.xd;if(1===t)return this.Ud[0]+" x"+this.Ud.length;for(var i,n="{group #"+this.xd+" of "+this.Ud.length+" "+h(this.color)+" stones [",e=this.Ud,r=0;i=e[r],r<e.length;r++)n+=i.He()+",";return n=n.ve(),n+="], lives:"+this.$d,this.Be&&(n+=" MERGED with #"+this.Be.xd),this.De&&(n+=" KILLED by "+this.De.He()),n+="}"},e.prototype.Ie=function(){return this.Ud.length&&this.Ud[0].group===this},e.prototype.Cd=function(){return this.toString()},e.prototype.Je=function(){return this.Ud.map(function(t){return t.He()}).sort().join(",")},e.prototype.Ke=function(){for(var t,i=[],n=this.Ud,e=0;t=n[e],e<n.length;e++)for(var r,o=t.Le,s=0;r=o[s],s<o.length;s++)r.color===a&&i.indexOf(r)<0&&i.push(r);if(i.length!==this.$d)throw new Error("Wrong life count for group");return i},e.prototype.Me=function(){for(var t,i=[],n=1-this.color,e=this.Ud,r=0;t=e[r],r<e.length;r++)for(var s,h=t.Le,a=0;s=h[a],a<h.length;a++)s.color===n&&i.indexOf(s.group)<0&&i.push(s.group);return o.Ne&&i.length,i},e.prototype.Oe=function(t){for(var i,n=-1,e=t.Le,r=0;i=e[r],r<e.length;r++)if(i.color===a){n++;for(var s,h=i.Le,u=0;s=h[u],u<h.length;u++)if(s.group===this&&s!==t){n--;break}}return o.Ne,n},e.prototype.Pe=function(t){if(o.Ne,this.Ud.push(t),this.$d+=this.Oe(t),this.$d<0)throw new Error("Unexpected error (lives<0 on connect)");o.Ne},e.prototype.Qe=function(t){if(o.Ne,this.Ud.length>1){if(this.$d-=this.Oe(t),this.$d<0)throw new Error("Lives<0 on disconnect")}else this.qb.wd(this),o.Ne;if(this.Ud.pop()!==t)throw new Error("Unexpected error (disconnect order)")},e.prototype.Re=function(t){if(--this.$d<=0)return this.Se(t)},e.prototype.Te=function(t){if(this.$d--,o.Ne,this.$d<1)throw new Error("Unexpected error (lives<1 on attack by resucitated)")},e.prototype.Ue=function(t){this.$d++,o.Ne},e.prototype.Ve=function(t,i){if(t.Be===this||t===this||this.color!==t.color)throw new Error("Invalid merge");o.Ne,this.$d+=t.Ud.length;for(var n,e=t.Ud,r=0;n=e[r],r<e.length;r++)n.We(this),this.Pe(n);t.Be=this,t.Ce=i,this.qb.qd.push(t),o.Ne},e.prototype.Xe=function(t){o.Ne;for(var i,n=t.Ud,e=n.length-1;i=n[e],e>=0;e--)this.Qe(i),i.We(t);this.$d-=t.Ud.length,t.Ce=t.Be=null,o.Ne},e.prototype.Ye=function(t){for(var i=this.qb.qd,n=i.length-1;n>=0;n--){var e=i[n];if(e.Ce!==t||e.Be!==this)break;this.Xe(e),i.pop()}},e.prototype.Se=function(t){if(o.Ne,this.$d<0)throw new Error("Unexpected error (lives<0)");for(var i,n=this.Ud,e=0;i=n[e],e<n.length;e++){for(var r,s=i.Zd(1-this.color),h=0;r=s[h],h<s.length;h++)r.Ue(i);i.Ze()}this.De=t,this.qb.pd.push(this),o.Ne},e.prototype.$e=function(){this.De=null,this.$d=1;for(var t,i=this.Ud,n=0;t=i[n],n<i.length;n++){t._e(this);for(var e,r=t.Zd(1-this.color),o=0;e=r[o],o<r.length;o++)e.Te(t)}},e.af=function(t){for(var i=t.qb.pd,n=i.length-1;n>=0;n--){var e=i[n];if(e.De!==t)break;i.pop(),o.Ne,e.$e()}}},{"./Move":21,"./constants":51,"./log":75}],19:[function(t,i,n){"use strict";function e(){}i.g=new e,e.prototype.Nb=function(t,i){if(i>4&&(t<9||t%2==0)&&(i=4),t<=5)return[];for(var n=t<13?2:3,e=1+n,r=(1+t)/2,o=t-n,s=[],h=0;h<i;h++){switch(i%2==1&&i>4&&h===i-1&&(h=8),h){case 0:var a=e,u=e;break;case 1:a=o,u=o;break;case 2:a=e,u=o;break;case 3:a=o,u=e;break;case 4:a=e,u=r;break;case 5:a=o,u=r;break;case 6:a=r,u=e;break;case 7:a=r,u=o;break;case 8:a=r,u=r}s.push([a,u])}return s}},{}],20:[function(t,i,n){"use strict";function e(t,i,n){this.ec=t,this.Uc=i,this.bf=n,this.cf=t.Qc(i,[])}i.g=e,e.prototype.Tc=function(t){var i,n=this.cf.indexOf(t);if(0!==n)return n<0?(this.cf.unshift(t),this.cf.length>this.bf&&(i=this.cf.splice(this.bf))):(this.cf.splice(n,1),this.cf.unshift(t)),this.ec.Oc(this.Uc,this.cf),i},e.prototype.getItem=function(t){return this.cf[t]},e.prototype.Sc=function(){return this.cf}},{}],21:[function(t,i,n){"use strict";function e(t){switch(t[0]){case"B":return h;case"W":return a;default:return}}function r(t){return"B"!==t[0]&&"W"!==t[0]?t:"-"!==t[1]?t.substr(1):t.substr(2)}function o(t,i){var n=u.indexOf(t[0])+1,e=parseInt(t.substr(1,2));if(!n||isNaN(e)){if(i)return null;throw new Error("Illegal move parsed: "+t)}return[n,e]}var s=t("./constants"),h=s.mb,a=s.nb,u="abcdefghjklmnopqrstuvwxyz",c=["black","white"];n.ib=e,n.jb=r,n.hb=function(t,i){return(i===h?"B-":"W-")+t},n.Ae=function(t){return c[t]},n.df=o,n.kb=function(t){var i=e(t);void 0!==i&&(t=r(t));var n=o(t,!0);if(!n){if("pass"===t||t.startsWith("resi"))return null;throw new Error("Illegal move parsed: "+t)}return void 0!==i?n.concat(i):n},n.lb=function(t,i){return u[t-1]+i},n.ce=function(t){return u[t-1]}},{"./constants":51}],22:[function(t,i,n){"use strict";function e(t,i){this.ef=t,this.ff=i,this.gf=null,this.hf=!1}var r=t("./GameInVault");i.g=e,e.prototype.jf=function(t,i,n,e){var o=this.ef;o.pb(e),o.Db(t,i,n);var s=this.gf=new r;s.Ba(o.qb.Eb,o.ub,o.Jb(),o.Pb()),this.ff&&this.ff.mc(s)},e.prototype.kf=function(){var t=this.ef;this.gf=new r,this.gf.Ba(t.qb.Eb,t.ub,t.Jb(),t.Pb())},e.prototype.lf=function(t,i,n){var e=new r;return!!e.Da(t,i,n)&&this.mf(e,i)},e.prototype.mf=function(t,i){var n=t.Pa();return this.ef.Db(n.fb("boardSize"),t.Ka(),n.fb("komi")),this.ef.pb(n.fb("rules"),!0),!!this.ef.Gb(t.La(),i)&&(this.gf=t,this.ff&&this.ff.mc(t),!0)},e.prototype.Nc=function(){this.nf(),this.ff.Nc(this.gf)},e.prototype.Pc=function(){return this.ff.Pc()},e.prototype.nc=function(){this.nf(),this.ff.nc()},e.prototype.Mc=function(t,i){return this.nc(),this.ff.Mc(t,i)},e.prototype.pf=function(){return this.nf(),{pa:this.gf.za(),id:this.gf.Za()}},e.prototype.Pa=function(){return this.gf.Pa()},e.prototype.qf=function(t,i){this.gf.Pa().eb(t,i)},e.prototype.nf=function(){this.hf||this.gf.Oa(this.ef.history),this.gf.Qa()},e.prototype.rf=function(){return this.hf=!0,this.gf.Oa(this.ef.history),this.gf.Ja()},e.prototype.sf=function(){this.hf=!1}},{"./GameInVault":10}],23:[function(t,i,n){"use strict";function e(t){this.root=new r(null,[]),this.tf=-1,this.uf=this.root,this.vf=-1,this.wf(t)}function r(t,i,n){this.xf=t,this.yf=t?t.yf+t.zf.length:0,this.zf=i,this.Ia=n||[],this.children=null,this.Af=!1}function o(t,i,n){this.Xf=t,this.Yf=i,this.Zf=n}function s(t,i){return u(t)===u(i)}var h=t("./constants"),a=t("./Move"),u=a.jb,c=h.mb,p=h.nb;i.g=e,r.prototype.Bf=function(){return[this.zf,this.Ia]},r.prototype.Cf=function(t){for(var i=0;i<this.children.length;i++)if(s(t,this.children[i].zf[0]))return this.children[i];return null},r.prototype.Df=function(t){var i=new r(this,[t]);return this.children.push(i),i},r.prototype.Ef=function(){this.children||(this.children=[],this.Df(""))},r.prototype.Ff=function(){this.children.unshift(new r(this,[""]))},r.prototype.Gf=function(){return""===this.zf[0]},r.prototype.Hf=function(){if(!this.children)return null;var t=this.children[0];return t.Gf()?null:t},r.prototype.If=function(){if(!this.children)return null;var t=this.children[0];return t.Gf()&&(t=this.children[1]),t||null},r.prototype.Jf=function(){if(this.children)throw new Error("Invalid _deleteLastMove");if(this.zf.length>1)return this.zf.length--,this;var t=this.xf;return t.Kf(this),t},r.prototype.Kf=function(t){var i=this.children;i.splice(i.indexOf(t),1),i.length||(this.children=null)},r.prototype.Lf=function(t,i){var n=this.zf.splice(t),e=this.Ia.splice(t);if(!n.length)throw new Error("Invalid split at end");var o=new r(this,n,e);o.Af=i;var s=o.children=this.children;if(s)for(var h=0;h<s.length;h++)s[h].xf=o;this.children=[o]},r.prototype.Mf=function(t,i){var n;if(t===this.zf.length){if(!this.children)throw new Error("Unexpected fork");n=this.Cf(i)||this.Df(i)}else this.Lf(t,this.Af),n=new r(this,[i]),this.children.push(n);return n},r.prototype.Nf=function(){for(var t=this;t;)t.Af=!1,t=t.Hf()},r.prototype.Of=function(){this.Af=!0;var t=this.xf.children;t[0]!==this&&(t.splice(t.indexOf(this),1),t[0].Gf()?t[0]=this:t.unshift(this))},r.prototype.Pf=function(t){t+1!==this.zf.length?(this.Lf(t+1,!1),this.Ff()):this.children&&!this.children[0].Gf()&&this.Ff()},r.prototype.Qf=function(){var t=this.zf.length;if(this.children)for(var i=0;i<this.children.length;i++)t+=this.children[i].Qf();return t},e.prototype.wf=function(t){if(t&&!t.length)throw new Error("empty setupMoves array");this.ta=t,this.wb=t?p:c},e.prototype.Ka=function(){return this.ta},e.prototype.Rf=function(){return this.root},e.prototype.Sf=function(){return this.vf<0?null:this.uf.zf[this.vf]},e.prototype.Tf=function(){return this.uf.yf+this.vf},e.prototype.Uf=function(){return this.uf.Af},e.prototype.Vf=function(){return[this.uf,this.vf]},e.prototype.Wf=function(t){this.uf=t[0],this.vf=t[1]},e.prototype.$f=function(t){if(!(t.Zf<t.Yf.zf.length)){var i=this.uf,n=this.vf;this._f(t),t.Yf=this.uf,t.Zf=this.vf,this.uf=i,this.vf=n}},e.prototype.getBookmark=function(){for(var t=this.Tf()+1,i=new Array(t),n=this.uf,e=this.vf,r=t-1;r>=0;r--)i[r]=this.Sf(),this.ag();return this.uf=n,this.vf=e,new o(i,n,e)},e.prototype._f=function(t){this.bg();for(var i=t.Xf,n=0;n<i.length;n++)this.cg(i[n])},e.prototype.dg=function(t){return this.$f(t),this.uf===t.Yf&&this.vf===t.Zf},e.prototype.eg=function(t){return t.Xf},e.prototype.fg=function(){return this.getBookmark().Xf},e.prototype.bg=function(){this.uf=this.root,this.vf=-1},e.prototype.gg=function(){return this.uf.Ia[this.vf]},e.prototype.hg=function(t){if(t){var i=this.uf.Ia[this.vf];i||(i=this.uf.Ia[this.vf]={});for(var n in t)i[n]=t[n]}},e.prototype.ig=function(t){return t.yf%2==0?this.wb:1-this.wb},e.prototype.jg=function(t){var i=this.uf;if(++this.vf===i.zf.length){if(!i.children)return i.zf.push(t)}else if(s(t,i.zf[this.vf]))return;this.uf=i.Mf(this.vf,t),this.vf=0},e.prototype.cg=function(t){var i=this.uf;this.vf===i.zf.length-1&&i.Af&&i.Ef(),this.jg(t)},e.prototype.kg=function(){this.uf.Ef()},e.prototype.ag=function(){if(this.vf>0)this.vf--;else if(this.uf!==this.root)this.uf=this.uf.xf,this.vf=this.uf.zf.length-1;else{if(this.vf===-1)return!1;this.vf=-1}return!0},e.prototype.lg=function(t){for(;t>0;){if(t<=this.vf)return void(this.vf-=t);if(t-=this.vf+1,this.vf=0,this.ag(),this.vf===-1)break}},e.prototype.mg=function(t){var i=this.uf;if(this.vf===i.zf.length-1){if(!(i=t?i.Hf():i.If()))return null;this.uf=i,this.vf=0}else this.vf++;return this.uf.zf[this.vf]},e.prototype.ng=function(){return this.mg()},e.prototype.og=function(){return this.mg(!0)},e.prototype.pg=function(){var t=this.uf;return this.vf===t.zf.length-1&&!t.If()},e.prototype.qg=function(){var t=this.uf,i=this.vf,n=this.mg();return this.uf=t,this.vf=i,n},e.prototype.rg=function(){var t=this.uf;if(this.vf<t.zf.length-1)return null;var i=t.children;if(!i)return null;if(1===i.length)return null;if(2===i.length&&""===i[0].zf[0])return null;var n=[];t.Af||""===i[0].zf[0]||n.push("");for(var e=0;e<i.length;e++)n.push(i[e].zf[0]);return n},e.prototype.Oa=function(t){this.root.Nf(),this.tf=t.length,this.root.Af=!0,this.uf=this.root,this.vf=-1;for(var i=this.uf,n=0;n<t.length;n++)this.jg(t[n]),this.uf!==i&&(i=this.uf,i.Of());i.Pf(this.vf)},e.prototype.Na=function(){for(var t=[],i=this.root;;){i.Af=!0;for(var n=0;n<i.zf.length;n++)t.push(i.zf[n]);if(!i.children)break;i=i.children[0]}return i.Gf()?(t.pop(),this.uf=i.xf):this.uf=i,this.vf=this.uf.zf.length-1,this.tf=t.length,t},e.prototype.sg=function(){return this.tf},e.prototype.tg=function(t){var i=this.uf.Cf(t);if(!i)throw new Error("Invalid variation "+t);return i.Qf()},e.prototype.ug=function(t){if(this.vf!==this.uf.zf.length-1)return!1;var i=this.uf.Cf(t);return!(!i||i.Af)&&(this.uf.Kf(i),!0)},e.prototype.vg=function(){var t=this.uf;if(t.Af)return!1;if(t.children)return!1;var i=t.zf.length;return this.vf===i-1&&(this.uf=t.Jf(),this.vf=this.uf.zf.length-1,!0)},e.prototype.Ma=function(t){var i=this.wg(t);return i!==-1?i:(this.bg(),t.bg(),this.xg(t),-1)},e.prototype.wg=function(t){for(var i=this.Na(),n=t.Na(),e=Math.min(i.length,n.length),r=0;r<e;r++)if(i[r]!==n[r])return r;return n.length>e&&this.Oa(n),-1},e.prototype.xg=function(t){for(var i,n=0;!(i=t.rg());){var e=t.mg();if(!e)break;n++,this.cg(e),this.hg(t.gg())}if(i)for(var r=0;r<i.length;r++){var o=i[r];""!==o&&(this.cg(o),t.cg(o),this.xg(t),this.ag(),t.ag())}n&&(this.lg(n),t.lg(n))}},{"./Move":21,"./constants":51}],24:[function(t,i,n){"use strict";function e(t){this.yg=t,this.zg=new s.Bg.Ag(t)}function r(t){return 0===t?"Tie game":u(t>0?c:p)+" wins by "+o(Math.abs(t))}function o(t){return 1!==t?t+" points":"1 point"}var s=t("./ai"),h=t("./constants"),a=t("./Move"),u=a.Ae,c=h.mb,p=h.nb;i.g=e,e.prototype.Cg=function(){var t=this.Dg()[0];return t[c]-t[p]},e.prototype.Eg=function(){return this.Fg(this.Dg())},e.prototype.Gg=function(){return this.Dg()},e.prototype.Hg=function(){return this.zg.Hg()},e.prototype.Dg=function(){var t=this.yg;return null!==t.zb?["resi",1-t.zb,t.Ab]:(this.zg.Ig(t.qb),this.zg.Jg())},e.prototype.Fg=function(t){if("resi"===t[0]){var i,n=u(t[1]),e=u(1-t[1]);switch(t[2]){case"time":i=e+" ran out of time";break;case null:case void 0:i=e+" resigned";break;default:i=e+" disqualified: "+t[2]}return[n+" won ("+i+")"]}if(!t||2!==t.length)throw new Error("Invalid score info: "+t);var s=t[0],h=t[1];if(s.length!==h.length)throw new Error("Invalid score info");var a=[],l=s[c]-s[p];a.push(r(l));for(var f=c;f<=p;f++){var d=h[f],g=d[0],v=d[1],y=d[2],b=0!==v?" "+(v<0?"-":"+")+" "+Math.abs(v)+" prisoners":"",m=y>0?" + "+y+" komi":"",w=v||y?" ("+g+b+m+")":"";a.push(u(f)+": "+o(s[f])+w)}return a}},{"./Move":21,"./ai":50,"./constants":51}],25:[function(t,i,n){"use strict";function e(){y||s(),this.text=null,this.Kg=null,this.Lg=this.ub=0,this.ta=this.ua=this.zf=null,this.Mg=null,this.ra=null,this.Ia=null,this.vb=l,this.Ng=!1}function r(t,i,n){g[t]=[i,n],v[n]=t}function o(t,i){y[t]=i}function s(){g={},v={},y={},r("GM","int",null),r("FF","int","fileFormat"),r("SZ","int","boardSize"),r("AB","move",null),r("AW","move",null),r("HA","int","handicap"),r("KM","real","komi"),r("RU","text","rules"),r("RE","text","result"),r("PB","text","playerBlack"),r("PW","text","playerWhite"),r("BS","int","blackSpecies"),r("WS","int","whiteSpecies"),r("LT","flag","enforceLosingOnTime"),r("SO","text","source"),r("ID","text","gameId"),r("AP","text","application"),r("BR","text","blackRank"),r("WR","text","whiteRank"),r("BT","text","blackTeam"),r("WT","text","whiteTeam"),r("TM","text","timeLimit"),r("OT","text","overtimeMethod"),r("EV","text","event"),r("RO","text","round"),r("DT","text","date"),r("PC","text","place"),r("GN","text","gameName"),r("ON","text","openingPlayed"),r("GC","text","gameComment"),r("C","text","comment"),r("N","text","nodeName"),r("US","text","userName"),r("AN","text","analyseAuthor"),r("CP","text","copyright"),r("CA","text","characterSet"),r("ST","text","variationStyle"),o("B","move"),o("W","move"),o("AB","move"),o("AW","move"),o("BL",null),o("WL",null),o("C","text"),o("CR",null),o("BM",null),o("N",null)}function h(t){if(t.Tg("a","z"))return t.charCodeAt()-97;if(t.Tg("A","Z"))return t.charCodeAt()-39;throw new Error("Invalid coordinate value: "+t)}function a(t){for(var i=0;;){var n=t.indexOf("]",i);if(n===-1)return-1;if("\\"!==t[n-1])return n;i=n+1}}var u=t("./constants"),c=t("./log"),p=t("./ReviewTree"),l=u.mb,f=u.nb,d=["B","W"],g=null,v=null,y=null;i.g=e,e.Og=function(){return y||s(),v},e.Ea=function(t){var i=t.trim();return"("===i[0]&&";"===i.substr(1).trim()[0]},e.prototype.Pg=function(t,i){if(!e.Ea(t))throw new Error("Not an SGF file");this.Qg(t),this.Rg(),this.Sg(i)},e.prototype.Ga=function(t,i,n){try{return this.Pg(t,n),!0}catch(t){var e="Failed loading SGF moves:\n"+t;if(!i)throw new Error(e);return i.push(e),!1}},e.prototype.Ka=function(){return this.ta},e.prototype.La=function(){return this.ua},e.prototype.Ja=function(){return this.ra},e.prototype.fb=function(t,i){var n=this.Ia[t];return void 0!==n?n:i};e.prototype.Ug=function(t){if(this.Lg)throw new Error("SZ set twice");this.Lg=t},e.prototype.Vg=function(t){if(!this.Lg)throw new Error("Move seen before SZ is known");return""===t||"tt"===t&&this.Lg<=19?"pass":"abcdefghjklmnopqrstuvwxyz"[h(t[0])]+(this.Lg-h(t[1]))},e.prototype.jg=function(t,i,n){if(!this.Ng&&n)t!==this.vb&&(i=d[t]+i),this.vb=t,this.ta.push(i);else{if(this.Ng){if(t!==this.vb)throw new Error("Bad move color: "+d[t]+i)}else this.Ng=!0,i=d[t]+i;this.vb=1-t,this.zf.push(i)}},e.prototype.Wg=function(t){var i=this.zf.length-1;this.Mg[i]=(this.Mg[i]||"")+t},e.prototype.Xg=function(t,i){switch(i){case"text":return t;case"int":return parseInt(t);case"real":return parseFloat(t);case"flag":return!0;case"move":return this.Vg(t);default:throw new Error("Invalid tag type: "+i)}},e.prototype.Yg=function(t,i){var n=y[t];if(void 0===n)return c.warn&&c.warn("Unknown property "+t+"["+i+"] ignored");if(n){var e=this.Xg(i,n);switch(t){case"B":return this.jg(l,e);case"W":return this.jg(f,e);case"AB":return this.jg(l,e,!0);case"AW":return this.jg(f,e,!0);case"C":return this.Wg(i)}}},e.prototype.Sg=function(t){this.ra=new p,this.Zg(this.Kg,1),this.ta.length||(this.ta=null),this.ra.wf(this.ta),this.ua=this.ra.Na(),void 0!==t&&(this.ua=this.ua.slice(0,t))},e.prototype.Zg=function(t,i){for(var n=i;n<t.length;n++){var e=t[n];if("seq"!==e[0]){this.zf=[],this.Mg=[];for(var r=0;r<e.length;r+=2){var o=e[r]||o,s=e[r+1];this.Yg(o,s)}for(var h=0;h<this.zf.length;h++)this.ra.cg(this.zf[h]),this.Mg[h]&&this.ra.hg({$g:this.Mg[h]})}else{if(!e[1].length){this.ra.kg();continue}var a=this.ra.Vf(),u=this.vb;this.Zg(e,1),this.vb=u,this.ra.Wf(a)}}},e.prototype._g=function(t,i){var n=g[t];if(void 0===n)return this.Ia[t]=i,c.ah("Unknown property in SGF header: "+t+"["+i+"]");var e=n[0],r=n[1],o=this.Xg(i,e);return r&&(this.Ia[r]=o),o},e.prototype.Rg=function(){this.Lg=this.ub=0,this.Ia={},this.ta=[],this.vb=l,this.Ng=!1;for(var t=this.Kg[0],i=0;i<=t.length-1;i+=2){var n=t[i],e=t[i+1],r=this._g(n,e);switch(n){case"GM":if(1!==r)throw new Error("SGF game is not a GO game");break;case"FF":(r<3||r>4)&&c.warn&&c.warn("SGF format "+r+". Not sure we handle it well.");break;case"SZ":this.Ug(r);break;case"KM":this.ub=r;break;case"AB":this.jg(l,r,!0);break;case"AW":this.jg(f,r,!0)}}},e.prototype.Qg=function(t){this.text=t,this.Kg=[],t=this.bh(t),""!==(t=this.dh(t))&&this.eh("Trailing text ignored",t)},e.prototype.dh=function(t){for(t=this.fh("(",t),t=this.bh(t);";"===t[0];)t=this.gh(t);for(;"("===t[0];){var i=this.Kg;this.Kg=["seq"],t=this.dh(t),i.push(this.Kg),this.Kg=i}return t=this.fh(")",t),t=this.bh(t)},e.prototype.gh=function(t){t=this.fh(";",t);for(var i=[];;){for(var n=0;t[n]&&t[n].Tg("A","Z");)n++;var e=t.substr(0,n);if(""===e)break;for(i.push(e),t=this.fh(e,t);;){t=this.fh("[",t);var r=a(t);r<0&&this.eh("Missing ']'",t);var o=t.substr(0,r);if(i.push(o),t=this.fh(o+"]",t),"["!==t[0])break;i.push(null)}}return this.Kg.push(i),t=this.bh(t)},e.prototype.bh=function(t){return t.trim()},e.prototype.fh=function(t,i){return i.startsWith(t)||this.eh(t+" expected",i),i.replace(t,"").trim()},e.prototype.eh=function(t,i){throw new Error("Syntax error: '"+t+"' at ..."+i.substr(0,20)+"...")}},{"./ReviewTree":23,"./constants":51,"./log":75}],26:[function(t,i,n){"use strict";function e(){this.ra=null,this.Eb=0,this.hh="",this.ih="",p||r()}function r(){p={};for(var t=0;t<l.length;t++){var i=l[t];p[i]=!0}for(t=0;t<f.length;t++)p[f[t]]=!0}function o(t,i){return void 0===i||null===i?"":t+"["+i+"]"}var s=t("./constants"),h=t("./Move"),a=t("./SgfReader"),u=h.kb,c=s.mb,p=null,l=["playerWhite","playerBlack","source","event","place","boardSize","komi","rules","date"],f=["fileFormat","handicap"];i.g=e,e.prototype.jh=function(t,i){this.Eb=t.fb("boardSize");for(var n=a.Og(),e=t.gb(),r="",s=0;s<l.length;s++){var h=l[s];r+=o(n[h],e[h])}for(var u in e)p[u]||(r+=o(n[u],e[u]));return r+=this.kh(i)},e.prototype.kh=function(t){if(!t)return"";this.hh="A",this.ih="B";for(var i=o("HA",t.length),n=0;n<t.length;n++)i+=this.lh(t[n]);return i},e.prototype.lh=function(t){if(""===t)return"";var i,n=this.hh,e=this.ih,r=u(t);if(r)void 0!==r[2]&&(e=r[2]===c?"B":"W"),i=String.fromCharCode(96+r[0])+String.fromCharCode(97+this.Eb-r[1]);else{if(!t.endsWith("pass"))return null;i=""}return""===n&&(this.ih="W"===e?"B":"W"),n+e+"["+i+"]"},e.prototype.mh=function(t,i){for(var n="",e=0;e<t.length;e++){var r=this.lh(t[e]);if(null===r)break;n+=";"+r,i[e]&&i[e].$g&&(n+="C["+i[e].$g+"]")}return n},e.prototype.nh=function(t){this.ih=this.ra.ig(t)===c?"B":"W";var i=t.Bf(),n=this.mh(i[0],i[1]);if(t.children)for(var e=0;e<t.children.length;e++)n+="("+this.nh(t.children[e])+")";return n},e.prototype.Ra=function(t,i){this.ra=i;var n="(;FF[4]GM[1]"+this.jh(t,i.Ka());return this.hh="",(n+=this.nh(i.Rf()))+")"}},{"./Move":21,"./SgfReader":25,"./constants":51}],27:[function(t,i,n){"use strict";function e(t,i,n,e){this.qb=t,this._d=i,this.ae=n,this.color=e,this.group=null,this.Le=[],this.qh=[]}var r=t("./constants"),o=t("./Group"),s=t("./Move"),h=s.lb,a=r.EMPTY,u=r.jd,c=r.oh,p=r.ph;i.g=e,e.jd=new e(null,-1,-1,u);var l=e.rh=[[0,1],[1,0],[0,-1],[-1,0]],f=e.sh=[[1,1],[1,-1],[-1,-1],[-1,1]];e.prototype.clear=function(){this.color=a,this.group=null},e.prototype.nd=function(){for(var t=this.qb.ld,i=p;i>=c;i--){var n=t[this.ae+l[i][1]][this._d+l[i][0]];n.color===a&&this.Le.push(n),this.qh.push(n),n=t[this.ae+f[i][1]][this._d+f[i][0]],this.qh.push(n)}},e.prototype.toString=function(){return this.color===a?this.He():(this.color?"W":"B")+"-"+this.He()},e.prototype.He=function(){return h(this._d,this.ae)},e.prototype.th=function(){return this.uh().map(function(t){return t.He()}).sort().join(",")},e.prototype.Ld=function(){return this.color===a},e.prototype.vh=function(){return 2===this.Le.length},e.prototype.wh=function(){var t=this.qb,i=t.Eb-1;return t.Jd(1===this._d?2:i,1===this.ae?2:i)},e.prototype.xh=function(){return this.Le.length<=3},e.prototype.yh=function(){var t=this.qb.Eb,i=this._d,n=this.ae;return Math.min(Math.min(i-1,t-i),Math.min(n-1,t-n))},e.prototype.Ed=function(t){for(var i=this.Le.length-1;i>=0;i--){var n=this.Le[i];if(n.color===a)return!1;if(n.color!==t){if(1===n.group.$d)return!1}else if(n.group.$d>1)return!1}return!0},e.prototype.Id=function(t){for(var i=null,n=this.Le.length-1;n>=0;n--){var e=this.Le[n].group;if(e&&e.color===1-t&&1===e.$d){if(i)return!1;i=e}}if(!i)return!1;if(1!==i.Ud.length)return!1;var r=i.Ud[0];if(this.qb.Sd()!==r)return!1;var o=this.qb.Rd();if(!o||o.De!==r||1!==o.Ud.length)return!1;var s=o.Ud[0];return s._d===this._d&&s.ae===this.ae},e.prototype.Ze=function(){this.color=a,this.group=null},e.prototype._e=function(t){this.group=t,this.color=t.color},e.prototype.Pd=function(t){this.color=t;var i=this.Zd(t);0===i.length?this.group=this.qb.ud(this,this.zh()):(this.group=i[0],this.group.Pe(this));for(var n=this.Zd(1-t),e=n.length-1;e>=0;e--)n[e].Re(this);for(var r=1;r<i.length;r++)this.group.Ve(i[r],this)},e.prototype.Od=function(){this.group.Ye(this),this.group.Qe(this);for(var t=this.Zd(1-this.color),i=t.length-1;i>=0;i--)t[i].Ue(this);this.group=null,this.color=a,o.af(this)},e.prototype.We=function(t){this.group=t},e.prototype.Zd=function(t){for(var i=[],n=this.Le,e=n.length-1;e>=0;e--){var r=n[e];r.color===t&&i.indexOf(r.group)<0&&i.push(r.group)}return i},e.prototype.uh=function(){for(var t=[],i=this.Le,n=i.length-1;n>=0;n--){var e=i[n];e.color===a&&t.push(e)}return t},e.prototype.zh=function(){for(var t=0,i=this.Le,n=i.length-1;n>=0;n--)i[n].color===a&&t++;return t},e.prototype.Ah=function(t,i){for(var n=0,e=this.Le,r=e.length-1;r>=0;r--)e[r].color===t&&(i&&i.push(e[r]),n++);return n},e.prototype.Bh=function(t){for(var i=this.Le,n=i.length-1;n>=0;n--)if(i[n].group===t)return!0;return!1}},{"./Group":18,"./Move":21,"./constants":51}],28:[function(t,i,n){"use strict";function e(t){s.call(this,t)}var r=t("../../constants"),o=t("./DiamondZone"),s=t("./Heuristic"),h=t("util").inherits,a=t("../../log"),u=t("../../Move"),c=(t("../../test"),u.Ae),p=r.EMPTY,l=r.jd,f=r.Ch,d=r.Dh,g=r.Eh,v=r.Fh,y=r.Gh,b=r.Hh,m=r.Ih,w=r.Jh,x=r.Kh,k=r.Lh,A=r.Mh,j=r.Nh;h(e,s),i.g=e,e.prototype.Oh=function(t,i,n){var e=this.qb.Jd(t,i);if(this.Ph[i][t]<0)return 0;var r,o=1-n;if(this.Qh(e,n)&&this.Qh(e,o)){var s=[];r=[],1!==this.Rh(e,o,s,r)||r.length||this.Th.Sh(s,e,e,o)}var h=[];switch(r=[],this.Rh(e,n,h,r)){case 0:return this.Uh(e,n,h);case 1:this.Th.Sh(h,e,e,n);for(var a=r.length-1;a>=0;a--)this.Th.Sh(h,e,r[a],n);return 0;default:return 0}},e.prototype.Rh=function(t,i,n,e){for(var r=1-i,s=0,h=0,a=0,u=!1,c=0;c<8;c++){var E=c%2,G=t.qh[c];switch(G.color){case l:case p:continue;case i:var M=G.group;E?h++:(s++,1===M.$d&&(u=!0)),n.indexOf(M)<0&&n.push(M);break;default:if(1===G.group.$d)break;E||a++}}if(n.length<2)return-1;if(4===s)return u?1:0;var S=new o(t,i),q=S.Vh;S.normalize();var C,D,B;if(t.xh()){if(t.vh())return 0;if(3===s)return u?1:0;if(2===s){if(u)return 1;if(q[d].color!==i){if(S.Wh("2n","?.?o*o---"),!a)return 0}else{if(S.Wh("2n","?o..*o---"),q[m].color===p)return 0;if(!a)return 0;if(q[v].group.$d<=3)return 0}}else if(1===s){if(S.Wh("1n","B.?.*A---"),!a)return 0;if(q[d].color===p){if(q[v].group.$d<4)return 0;if(B=q[m],B.color===i)return 0;B.color===p&&(e.push(B),e.push(q[d]))}}else{if(S.Wh("02","B.A.*.---"),!a)return 0;if(q[d].color===p)return 0;if(a>1)return-1;if(1===q[b].group.$d||1===q[m].group.$d)return-1}return 1}if(3===s){if(u)return 1;if(!a)return 0;if(S.Wh("3n","?x?o*o?o?"),3===n.length)return 1;if(n.length,q[v].group===q[g].group){if(S.Wh("3n","?x?A*B?A."),q[x].color===p)return 0}else if(q[w].color===p)return 0;return 1}if(2===s){if(q[y].group===q[g].group)return S.Wh("2n","B.?.*A?A?"),a||q[w].color===r&&q[m].color===r?1:0;if(q[d].color===i){if(S.Wh("2n","?B?.*.?A?"),4===h)return 0;if(3===h){if(S.Wh("23",".BB.*.AAA"),!a)return 0;if(1===a){if(q[v].color===r)return 0;if(q[A].color!==r||q[A].group.$d<3)return 0}}else if(2===h)if(q[m].color===i){if(S.Wh("22",".BB.*..AA"),!a)return 0;if(1===a&&q[v].color===r)return 0}else if(q[b].color===i){if(S.Wh("22","BB..*..AA"),a)return 1;if(q[w].color!==r||q[m].color!==r)return 0;e.push(q[v]),e.push(q[y]),q[w].color!==r&&e.push(q[w]),q[m].color!==r&&e.push(q[m])}else{if(S.Wh("22",".B..*.AAA"),a)return 1;if(q[b].color!==r||q[m].color!==r)return 0;e.push(q[v]),e.push(q[y]),q[b].color!==r&&e.push(q[b]),q[m].color!==r&&e.push(q[m])}else{if(1!==h)return S.Wh("20",".B..*..A."),a?1:q[v].xh()||q[y].xh()?0:q[j].xh()&&(D=q[y],0===this.Xh[r][D.ae][D._d])?0:q[A].xh()&&(C=q[v],0===this.Xh[r][C.ae][C._d])?0:(q[v].Ah(r)<3&&e.push(q[v]),q[y].Ah(r)<3&&e.push(q[y]),1);if(S.Wh("21",".B..*..AA"),!a)return 0}}else if(S.Wh("2n","?.?.*B?A."),3===h){if(S.Wh("23","C.B.*BAA."),2===n.length)return 0;if(q[x].color===p){if(q[A].color!==r||q[k].color!==r)return 0;if(a<2)return 0}else e.push(q[d]),e.push(q[v])}else if(2===h)if(q[x].color===p){if(q[b].color!==i)return S.Wh("22","..B.*BAA "),0;if(S.Wh("22","o...*ooo "),0===a)return 0;if(2===n.length)return q[g].group!==q[y].group?0:q[v].color===p?-1:q[m].color===p?(e.push(q[d]),1):-1;q[v].color===p&&e.push(q[v])}else{if(q[x].color===i){if(S.Wh("22","B...*A.AA"),2===a)return-1;var z=q[m].color===r,T=q[w].color===r;return 0===a?z||T?(e.push(q[d]),e.push(q[v]),1):0:(q[v].color!==p||T?q[d].color!==p||z||e.push(q[y]):e.push(q[v]),1)}if(q[b].color!==i){if(S.Wh("22","..B.*BAAx"),2===a)return 1;if(0===a){if(q[b].color!==p)return 1;e.push(q[b]),e.push(q[d]),e.push(q[v])}return 1}if(S.Wh("22","o...*ooox"),a)return 1;var _=q[A].color,I=q[k].color;if(q[y].group.$d>2&&_!==r)return 0;q[m].color!==p||_===r&&I===r||e.push(q[m]),u||(e.push(q[d]),e.push(q[v]))}else if(1===h){if(q[b].color===i)return S.Wh("21","C...*B.A."),a||(e.push(q[d]),e.push(q[v])),1;if(S.Wh("21","....*BAA."),q[x].color===p)return 0;if(1===q[x].group.$d)return 0;q[d].color===p&&e.push(q[d]),q[v].color===p&&e.push(q[v])}else{if(S.Wh("20","....*B.A."),q[x].color===p)return 0;if(!a){if(1===q[f].yh())return 0;e.push(q[d]),e.push(q[v])}}}else if(1===s)if(4===h){if(0===a)return 0}else if(3===h){if(q[b].color!==i){if(q[y].color===p)return 0}else if(q[y].color===p){if(q[j].color!==r)return 0;if(q[b].group===q[m].group)return 0;0===a?(e.push(q[v]),e.push(q[d]),e.push(q[y])):1===a&&q[v].color===r&&(e.push(q[d]),e.push(q[y]))}}else if(2===h){if(q[b].color===p&&q[y].color===p)return 0}else S.Wh("11","..B.*..A."),a||(e.push(q[y]),q[x].color===p&&(e.push(q[d]),e.push(q[v]),q[j].color!==r&&e.push(q[x])));else if(4===h){if(0===a&&n.length<4)return 0}else{if(3!==h)return q[w].color===i&&q[x].color===i?(S.Wh("02","....*.B.A"),q[g].color===p?-1:q[g].group.$d<=2?1:-1):(S.Wh("02","B...*...A"),1);if(q[y].color===p&&q[x].group===q[w].group||q[g].color===p&&q[x].group===q[m].group)return 0}return 1},e.prototype.Uh=function(t,i,n){if(i!==this.color)return 0;a.debug&&(c(i),n[0],n[1]);var e=this.$h.Zh.Yh(t);if(e._h(t)&&2===n.length){if(this.$h.ai)return.5;var r=this.Th.bi(n[0].Ee);return r>0&&r<1?.5:0}return e.color!==i?0:this.$h.ai?-.5:-1},e.prototype.ci=function(t,i){return[this.qb.Jd(t._d,i.ae),this.qb.Jd(i._d,t.ae)]},e.prototype.di=function(t,i,n){var e=Math.abs(i._d-t._d),r=Math.abs(i.ae-t.ae);if(e+r===1)return 0;var o,s=1-n,h=0;if(1===e&&1===r){var a=this.ci(t,i),u=a[0],c=a[1];if(u.color===n||c.color===n)return 0;if(u.color===s&&h++,c.color===s&&h++,0===h)return 0;if(2===h)return 99;var p=u.color===s?0:1,l=a[p],f=a[1-p];return t.xh()||i.xh()?1===f.yh()?l.group.$d>2?1:0:0!==f.Ah(s)?1:0:1===f.yh()?0!==f.Ah(s)?1:0:1}if(e+r===2){if(o=this.qb.Jd((t._d+i._d)/2,(t.ae+i.ae)/2),o.color===n)return 0;if(o.color===s)return o.group.$d;for(var d=o.Le.length-1;d>=0;d--)o.Le[d].color===s&&h++;return h>=1?1:t.xh()&&i.xh()?0:.5}if(e+r===3&&t.xh()&&i.xh()){for(var g=this.ei(t,i),v=0,y=g.length-1;y>=0;y--)o=g[y],o.color===s&&(v+=o.group.$d),0!==o.Ah(s)&&(v+=1);return v}return e+r},e.prototype.Qh=function(t,i){for(var n=[],e=t.Le.length-1;e>=0;e--){var r=t.Le[e];switch(r.color){case p:n.push(r);break;case i:if(r.group.$d>1)return r;break;default:if(1===r.group.$d)return r.group.Me()[0].Ud[0]}}for(var o=2,s=n.length-1;s>=0;s--)for(var h=n[s],a=h.Le.length-1;a>=0;a--){var u=h.Le[a];if(u!==t&&(u.color===i&&0!==this.Th.bi(u.group.Ee))){var c=this.di(t,u,i);if(!(c>=2)&&(o-=2-c)<=.5)return u}}return null}},{"../../Move":21,"../../constants":51,"../../log":75,"../../test":80,"./DiamondZone":29,"./Heuristic":32,"util":4}],29:[function(t,i,n){"use strict";function e(t,i){this.color=i,this.Vh=new Array(13);var n=t._d,e=t.ae,r=t.qb.ld,o=t.qb.Eb,s=this.Vh,h=a.jd;s[p]=t,s[l]=r[e+1][n],s[v]=r[e+1][n-1],s[y]=r[e+1][n+1],s[f]=r[e-1][n],s[b]=r[e-1][n-1],s[m]=r[e-1][n+1],s[d]=r[e][n-1],s[g]=r[e][n+1],s[k]=n>2?r[e][n-2]:h,s[A]=n<o-1?r[e][n+2]:h,s[x]=e>2?r[e-2][n]:h,s[w]=e<o-1?r[e+2][n]:h}function r(t){return t===u?E:j[t+1]}function o(t,i){for(var n="",e=0;e<i.length;e++){var o=i[e];n+="string"==typeof o?o:r(t[o].color)}return n}
var s=t("../../constants"),h=t("../../Grid"),a=t("../../Stone"),u=s.jd,c=s.EMPTY,p=s.Ch,l=s.Dh,f=s.Eh,d=s.Fh,g=s.Gh,v=s.Hh,y=s.Ih,b=s.Jh,m=s.Kh,w=s.Lh,x=s.fi,k=s.Mh,A=s.Nh;i.g=e;var j=h.ee+h.ge,E="|";e.prototype.toString=function(){var t=this.Vh;return o(t,[" "," ",w," "," "])+"\n"+o(t,[" ",v,l,y," "])+"\n"+o(t,[k,d,"*",g,A])+"\n"+o(t,[" ",b,f,m," "])+"\n"+o(t,[" "," ",x," "," "])+"\n"},e.prototype.gi=function(){var t,i=this.Vh;t=i[l],i[l]=i[f],i[f]=t,t=i[w],i[w]=i[x],i[x]=t,t=i[v],i[v]=i[b],i[b]=t,t=i[y],i[y]=i[m],i[m]=t},e.prototype.hi=function(){var t,i=this.Vh;t=i[d],i[d]=i[g],i[g]=t,t=i[k],i[k]=i[A],i[A]=t,t=i[v],i[v]=i[y],i[y]=t,t=i[b],i[b]=i[m],i[m]=t},e.prototype.ii=function(){var t,i=this.Vh;t=i[d],i[d]=i[f],i[f]=i[g],i[g]=i[l],i[l]=t,t=i[k],i[k]=i[x],i[x]=i[A],i[A]=i[w],i[w]=t,t=i[v],i[v]=i[b],i[b]=i[m],i[m]=i[y],i[y]=t},e.prototype.ji=function(){var t,i=this.Vh;t=i[d],i[d]=i[l],i[l]=i[g],i[g]=i[f],i[f]=t,t=i[k],i[k]=i[w],i[w]=i[A],i[A]=i[x],i[x]=t,t=i[v],i[v]=i[y],i[y]=i[m],i[m]=i[b],i[b]=t},e.prototype.normalize=function(){var t,i=this.color,n=this.Vh;if(n[p].xh()){n[l].color===u?this.gi():n[d].color===u?this.ji():n[g].color===u&&this.ii();var e=n[d].color===i,r=n[g].color===i;return void(e&&!r?this.hi():e===r&&n[v].color===i&&n[y].color!==i&&this.hi())}var o=!1,s=!0,h=!0,a=n[l].color===i?1:0,c=n[f].color===i?1:0,w=n[d].color===i?1:0,x=n[g].color===i?1:0;a>c?(this.gi(),w>x&&this.hi(),w!==x&&(o=!0)):a<c?(w>x&&this.hi(),w!==x&&(o=!0)):c?w>x?this.ji():x>w?this.ii():(s=!1,w&&(h=!1)):w>x?this.ji():x>w?this.ii():(w?this.ji():h=!1,s=!1);var k=n[y].color===i?1:0,A=n[b].color===i?1:0;if(s&&o)n[l].color!==i&&n[d].color!==i&&k&&!A&&(this.ii(),this.hi());else{var j=n[v].color===i?1:0,E=n[m].color===i?1:0;s||(j+k>A+E?(this.gi(),t=j,j=A,A=t,t=k,k=E,E=t):o||(o=!0,!h&&j<k&&A<E?this.ii():!h&&j>k&&A>E?this.ji():o=!1)),!o&&(A>E||A===E&&j>k)&&this.hi()}};var G=[v,l,y,d,p,g,b,f,m],M=["TL","TOP","TR","LEFT","CENTER","RIGHT","BL","BOTTOM","BR"];e.prototype.Wh=function(t,i){for(var n=this.Vh,e=this.color,r=1-e,o={},s=0,h=0,a=0;a<G.length;a++){var p=n[G[a]],l=i[a],f=p.color;switch(f===e&&(a%2?s++:h++),l){case"o":if(f===e)continue;break;case"A":case"B":case"C":case"D":if(f!==e)break;var d=o[l];if(d){if(d!==p.group)break}else o[l]=p.group;continue;case"*":case" ":if(f===c)continue;break;case".":if(f!==e)continue;break;case"x":if(f===r)continue;break;case"?":continue;case"-":if(f===u)continue}return l+"!="+f+" in "+M[a]+"\n"+this}var g=parseInt(t[0]),v=parseInt(t[1]);return s!==g?"numDirects="+s:!(!isNaN(v)&&h!==v)||"numDiags="+h}},{"../../Grid":17,"../../Stone":27,"../../constants":51}],30:[function(t,i,n){"use strict";function e(t){r.call(this,t)}var r=t("./Heuristic");(0,t("util").inherits)(e,r),i.g=e,e.prototype.ki=function(){this.$h.Zh.li()}},{"./Heuristic":32,"util":4}],31:[function(t,i,n){"use strict";function e(t){s.call(this,t),this.grid=new o(this.Eb,a),this.mi=t.oi.ni}var r=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,a=r.jd;h(e,s),i.g=e,e.prototype.ki=function(){var t=this.qb;this.$h.Zh.pi(t,this.grid),this.qi()},e.prototype.qi=function(){var t=this.$h.Zh.ri;for(var i in t)for(var n=~~i,e=t[n],r=e.group.color,o=e.si.length-1;o>=0;o--){var s=e.si[o];s._h&&this.mi.ti(s.ui,r)}}},{"../../Grid":17,"../../constants":51,"./Heuristic":32,"util":4}],32:[function(t,i,n){"use strict";function e(t){this.$h=t,this.xi(),this.qb=t.qb,this.Eb=t.qb.Eb,this.yi=new o(this.Eb,0,a),this.zi=t.zi,this.color=this.Ai=null,this.Bi()}var r=t("../../constants"),o=t("../../Grid"),s=t("../../log"),h=t("../../helper"),a=r.jd,u=r.vi,c=r.wi;i.g=e,e.prototype.xi=function(){var t=this.constructor;this.name=t.name||h.Ci(t),this.name.length<5&&(this.name+=this.$h.Di.length)},e.prototype.Bi=function(){var t=this.$h.oi;this.Ei=t.Fi,this.Th=t.ni,this.Ph=t.Gi?t.Gi.yi.md:null,this.Hi=t.Ii,this.Ji=t.Ki,this.Xh=t.Li?t.Li.Xh:null},e.prototype.Mi=function(t){this.color=t,this.Ai=1-t},e.prototype.ki=function(t,i){for(var n=s.level,e=this.$h.color,r=this.yi.md,o=1;o<=this.Eb;o++)for(var h=1;h<=this.Eb;h++){var a=t[o][h];if(!(a<u)){a===c&&this.name===this.$h.Ni&&s.Oi(s.Pi);var p=r[o][h]=this.Oh(h,o,e);i[o][h]+=p,a===c&&s.Oi(n)}}},e.prototype.Qi=function(t,i,n){var e=this.yi.md[i][t];e&&(n[this.name]=e)},e.prototype.Ri=function(t,i,n,e){return this.$h.Si.get(this.name+"-"+t,i,n,e)}},{"../../Grid":17,"../../constants":51,"../../helper":52,"../../log":75}],33:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.Ti=null}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),a=t("../../Move"),u=(t("../../test"),a.Ae),c=a.lb,p=r.EMPTY;s(e,o),i.g=e,e.prototype.Ui=function(t,i){for(var n=t.Me(),e=n.length-1;e>=0;e--){var r=n[e];if(!(r.$d>1)){var o=r.Ud.length;if(o>=i)return!0;for(var s=r.Me(),h=s.length-1;h>=0;h--)if((o+=s[h].$d-1)>=i)return!0}}return!1},e.prototype.Vi=function(t,i){for(var n=0,e=0,r=0,o=t.Le.length-1;o>=0;o--){var s=t.Le[o];switch(s.color){case p:r++;break;case i:r+=s.group.$d-1,n++;break;default:1===s.group.$d&&(e+=s.group.Ud.length)}}switch(e){case 0:return!(r<=1);case 1:return!!r||!n;default:return!0}},e.prototype.Wi=function(t,i,n,e){for(var r=!1,o=!1,s=1-i[0].color,h=i.length-1;h>=0;h--){var a=i[h];1===a.$d&&(o=!0,(!n||1===n&&e)&&this.Th.Xi(t,s),n||(!this.Yi(a,n)||this.Ui(a,1)?this.Th.Zi(a,t):this.$h.ai&&(r=!0)))}return r&&this.Th.$i(t),o},e.prototype._i=function(t,i,n){if(!i.Bh(n))return!1;for(var e=i.Zd(n.color),r=e.length-1;r>=0;r--){var o=e[r];if(o.$d>2)return!1;if(!t.Bh(o))return!1}return!0},e.prototype.aj=function(t,i,n,e,r,o){for(var s,a=!1,c=t.Zd(e),p=i.length-1;p>=0;p--)if(s=i[p],2===s.$d&&!this.Ui(s,2)&&(0!==n.length||1!==c.length||2!==c[0].$d)){if(1===n.length&&0===c.length){if(!this._i(t,n[0],s))continue;a=!0,h.debug&&u(e)}r||!s.Ee.bj()?o.push(s):h.debug&&u(e)}return a},e.prototype.cj=function(t,i,n){return!(!n||i.$d!==n.$d)&&(!!n.Ie()&&!(t.Bh(n)&&n.Oe(t)<1))},e.prototype.dj=function(t,i,n,e){for(var r=!1,o=i.length-1;o>=0;o--){var s=i[o],h=s.$d;h>2&&this.cj(t,s,null)?(n||this.Th.ej(s,t),r=!0):h>=2&&0===n&&!e&&(n||this.Th.fj(s,t))}return r},e.prototype.gj=function(){this.Ti=[]},e.prototype.Oh=function(t,i,n){return this.hj(t,i,n,0),0},e.prototype.hj=function(t,i,n,e,r){var o=this.qb.Jd(t,i),s=o.Zd(1-n);if(!s.length)return!1;var a=o.uh(),p=this.Wi(o,s,e,r),l=[],f=this.aj(o,s,a,n,e,l),d=!1;if(0===e&&(f&&!p?(this.Ti.push(o),this.Ph[i][t]+=2,this.Ph[i][t]):this.Ph[i][t]<-2&&(d=!0,this.Ph[i][t]-=1e3,h.debug)),!f&&a.length<=1&&!this.Vi(o,n))return!1;var g=this.dj(o,s,e,d);if(!l.length)return p||g;this.qb.Nd(t,i,n);for(var v=[!1,!1,!1],y=l.length-1;y>=0;y--)if(h.debug&&(u(n),l[y]),!this.Yi(l[y],e)){if(1===l.length){l.pop();break}v[y]=!0}this.qb.Qd();var b=this.ij(o,l,v,e);return h.debug&&(p||g||b)&&(u(n),c(t,i)),p||g||b},e.prototype.ij=function(t,i,n,e){switch(i.length){case 0:return!1;case 1:return!n[0]&&(e||this.Th.Zi(i[0],t),!0);case 3:case 2:return e||(n[1]?this.Th.Zi(i[0],t):this.Th.Zi(i[1],t)),!0;default:throw new Error("Unexpected in Hunter#getMultipleChaseThreat")}},e.prototype.Yi=function(t,i){var n=t.Ke();if(1!==n.length)throw new Error("Unexpected: hunter #1: "+n.length);var e=n[0],r=t.color,o=!0;return this.Vi(e,r)&&(this.qb.Nd(e._d,e.ae,r),o=this.jj(e,i),this.qb.Qd()),h.debug,o},e.prototype.kj=function(t){for(var i=1-t.color,n=t.Le,e=n.length-1;e>=0;e--){var r=n[e];if(r.color===i){var o=r.group;if(1===o.$d){return o.Ke()[0].Bh(t.group)?this.Yi(o,1)?1:-1:1}}}return 0},e.prototype.jj=function(t,i){var n=t.group;if(n.$d<=1)return!0;if(n.$d>2)return!1;var e=this.kj(t);if(0!==e)return e<0;var r=t.uh();if(2!==r.length&&(r=n.Ke()),2!==r.length)throw new Error("Unexpected: hunter #2");var o=r[0],s=r[1];h.debug;var a=1-n.color;return this.hj(o._d,o.ae,a,i+1)||this.hj(s._d,s.ae,a,i+1)},e.prototype.lj=function(t){return this.jj(t,1)},e.prototype.mj=function(t,i,n){return this.hj(t,i,n,1,n===this.Ai)}},{"../../Move":21,"../../constants":51,"../../log":75,"../../test":80,"./Heuristic":32,"util":4}],34:[function(t,i,n){"use strict";function e(t){s.call(this,t),this.nj=[new o(this.Eb,a),new o(this.Eb,a)],this.Xh=[this.nj[c].md,this.nj[p].md]}var r=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,a=r.jd,u=r.EMPTY,c=r.mb,p=r.nb;h(e,s),i.g=e,e.prototype.ki=function(){this.nj[c].init(0),this.nj[p].init(0);for(var t=1;t<=this.Eb;t++)for(var i=1;i<=this.Eb;i++){var n=this.qb.Jd(i,t),e=n.color;if(e!==u)for(var r,o=this.Xh[e],s=n.Le,h=0;r=s[h],h<s.length;h++)if(o[r.ae][r._d]+=2,r.color===u)for(var a,l=r.Le,f=0;a=l[f],f<l.length;f++)a!==n&&(o[a.ae][a._d]+=1)}}},{"../../Grid":17,"../../constants":51,"./Heuristic":32,"util":4}],35:[function(t,i,n){"use strict";function e(t){a.call(this,t),this.debug=!1,this.grid=new s(this.Eb,null),this.oj=[],this.pj="",this.qj=this.Ri("spaceInvasion",2,.01,4),this.rj=this.Ri("pressure",1,.01,2)}function r(){this.vj=null,this.wj=[!1,!1],this.xj=0,this.yj=[],this.zj=[],this.Aj=[]}function o(t,i,n){this.name=t,this.xj=i,this.group=n,this.Ej=1/0}var s=t("../../Grid"),h=t("./boan/GroupInfo"),a=t("./Heuristic"),u=t("util").inherits,c=t("../../log"),p=t("../../Move"),l=(t("../../test"),p.Ae);u(e,a),i.g=e,e.prototype.ki=function(){this.debug=this.$h.sj,this.grid.init(null),this.oj.length=0},e.prototype.tj=function(t,i){a.prototype.ki.call(this,t,i)},e.prototype.Oh=function(t,i){var n=this.grid.md[i][t];return n?n.uj():0},e.prototype.Qi=function(t,i,n){var e=this.grid.md[i][t];e&&e.uj(n,this.name)},r.prototype.uj=function(t,i){var n=this.xj;t&&n&&(t[i+"-base"]=n);var e=this.yj;if(!e.length)return n;for(var r=e.length-1;r>=0;r--){var o=e[r],s=o.xj*this.zj[r];if(n+=s,t){var h=this.zj[r];t[i+"-"+o+(1!==h?" factor:"+h.toFixed(2):"")]=s}}return n},e.prototype.Bj=function(t,i){return this.grid.md[i][t]},e.prototype.Cj=function(t,i){var n=this.grid.md[i][t];return n||(this.grid.md[i][t]=n=new r,n)},e.prototype.ti=function(t,i){c.debug&&l(i),this.Cj(t._d,t.ae).vj=i},e.prototype.Dj=function(t,i){var n=this.Bj(t._d,t.ae);return n&&n.vj===i},e.prototype.Xi=function(t,i){this.Cj(t._d,t.ae).wj[i]=!0},e.prototype.wj=function(t,i){var n=this.Bj(t._d,t.ae);return n&&n.wj[i]},o.prototype.toString=function(){return this.name+(this.Ej!==1/0?" minMoves:"+this.Ej:"")+" score:"+this.xj.toFixed(2)},e.prototype.Fj=function(t,i,n){this.pj=t+" on "+i.toString(1),n._d===this.$h.Gj&&n.ae===this.$h.Hj?(c.Oi(c.Pi),this.pj):c.level===c.Pi&&c.Oi(c.Ij)},e.prototype.Jj=function(t){var i=this.oj[t.xd];if(i)return i;for(var n=2*t.Ud.length,e=t.Ke(),r=0,s=e.length-1;s>=0;s--)r+=e[s].zh();return n+=this.qj*Math.max(0,r-1),this.oj[t.xd]=i=new o("life/death of "+t.toString(1),n,t),i},e.prototype.Kj=function(t,i,n,e){if(!i)throw new Error("Unexpected");n=n||1,e=e||1,c.debug&&n&&n.toFixed(2);var r=this.Cj(i._d,i.ae),o=r.yj,s=r.zj,h=r.Aj,a=o.indexOf(t);return a<0?(o.push(t),s.push(n),h.push(e)):(s[a]=Math.max(s[a],n),h[a]=Math.min(h[a],e)),t.Ej=Math.min(t.Ej,e),t},e.prototype.bi=function(t){var i=t.bi;if(void 0!==i)return i;var n,e=t.Lj;n=e?e.Mj:[t];var r=this.Hi.Nj(n);return i=t.bi=this.Oj(r,t.group.color===this.$h.vb)},e.prototype.Oj=function(t,i){return t>=2?1:t<1.5?0:i?1:.5},e.prototype.Pj=function(t,i,n,e,r,o){e=e||1;var s,a=t[0].group.color===this.$h.vb,u=this.Hi.Nj(t),p=this.Oj(u,a);if(o){s=p-this.Oj(u+o,!0),s=Math.min(2*s,1)}else s=1-p;if(e*=s,c.debug&&h.Qj(t),e<.1)return void(c.debug&&h.Qj(t));for(var l=r||0,f=t.length-1;f>=0;f--)l+=t[f].group.$d;for(f=t.length-1;f>=0;f--)this.Rj(t[f].group,i,n,e,l)},e.prototype.Rj=function(t,i,n,e,r){if(!(e<.1)){var o=this.Jj(t);return n||this.Sj(t,i,e,r),this.Kj(o,i,e,r)}},e.prototype.Sj=function(t,i,n,e){if(!(1===t.Ud.length&&t.Ud[0].vh()||0===i.zh()&&t.Ud.length<3)){e=e||1;for(var r=t.Me(),o=r.length-1;o>=0;o--){var s=r[o];s.$d===e&&(this.Rj(s,i,!0,n,e),this.Tj(s,i,n,e))}}},e.prototype.Tj=function(t,i,n,e){for(var r=t.Ee.Uj(i),o=r.length-1;o>=0;o--)this.Pj(r[o],i,!0,n,e)},e.prototype.fj=function(t,i){var n=1/(t.$d+1)*this.rj;if(this.bi(t.Ee)<.5){if(!this.$h.ai)return 0;n=this.zi}this.Cj(i._d,i.ae).xj+=n,this.debug&&i._d===this.$h.Gj&&i.ae===this.$h.Hj&&c.ah("MoveInfo "+l(1-t.color)+" - pressure at "+i+": "+n.toFixed(2))},e.prototype.$i=function(t){this.Cj(t._d,t.ae).xj+=this.zi},e.prototype.ej=function(t,i){this.debug&&this.Fj("race",t,i);var n=t.Ee,e=n.Lj?n.Lj.Mj:[n];this.Pj(e,i,!1)},e.prototype.Vj=function(t,i,n,e){this.debug&&this.Fj("eye threat",t,i);var r=t.Ee,o=r.Lj?r.Lj.Mj:[r];return this.Pj(o,i,n===t.color,void 0,void 0,-e),!0},e.prototype.Sh=function(t,i,n,e){var r=t[0];this.debug&&this.Fj("cut",r,i);for(var o=e===r.color,s=r.Ee.Wj(t,i),h=s.length-1;h>=0;h--)this.Pj(s[h],n,o,void 0,1)},e.prototype.Zi=function(t,i){this.debug&&this.Fj("kill",t,i);for(var n=t.Ee.Uj(i),e=n.length-1;e>=0;e--)this.Pj(n[e],i,!1);this.Rj(t,i,!1,1,t.$d)},e.prototype.Xj=function(t,i){this.debug&&this.Fj("rescue",t,i),this.Tj(t,i),this.Rj(t,i,!0)}},{"../../Grid":17,"../../Move":21,"../../log":75,"../../test":80,"./Heuristic":32,"./boan/GroupInfo":46,"util":4}],36:[function(t,i,n){"use strict";function e(t){r.call(this,t),this.Yj=null}var r=t("./Heuristic"),o=t("util").inherits,s=t("../../log"),h=t("../../Move"),a=h.lb;o(e,r),i.g=e,e.prototype.gj=function(){this.Yj||(this.Yj=this.$h.oi.Zj)},e.prototype.Oh=function(t,i,n){if(this.Xh[1-n][i][t]<2&&this.Xh[n][i][t]<2&&0===this.qb.Jd(t,i).Ah(n))return 0;var e=this.qb.Nd(t,i,n),r=e.group,o=0;return s.debug&&a(t,i),1===r.$d?1===r.Ud.length&&e.uh()[0].Id(this.Ai)?s.debug:(o-=2*r.Ud.length,s.debug):2===r.$d&&(s.debug,this.Yj.lj(e)&&(o-=2*r.Ud.length,s.debug)),this.qb.Qd(),o}},{"../../Move":21,"../../log":75,"./Heuristic":32,"util":4}],37:[function(t,i,n){"use strict";function e(t){s.call(this,t),this.ck=[new o(this.Eb,u),new o(this.Eb,u)],this.dk=this.Ri("wideSpaceToEye",.7,.01,1),this.ek=this.Ri("stoneCountToEye",.33,.25,1)}var r=t("../../constants"),o=t("../../Grid"),s=t("./Heuristic"),h=t("util").inherits,a=t("../../log"),u=r.jd,c=r.$j,p=r._j,l=r.EMPTY,f=r.mb,d=r.nb,g=r.ak,v=r.bk;h(e,s),i.g=e,e.prototype.ki=function(){this.fk()},e.prototype.fk=function(){this.ck[g].init(l),this.ck[v].init(l);for(var t=this.Eb;t>=1;t--)for(var i=this.Eb;i>=1;i--){var n=this.qb.Jd(i,t);if(n.color===l){var e=this.gk(i,t,n);if(null!==e){var r=this.$h.Zh.Yh(n);if(!r.hk&&!this.Th.Dj(n,e)){for(var o=n.Le,s=null,h=this.Xh[1-e],u=1,f=o.length-1;f>=0;f--){var d=o[f];d.color===e&&(s=d.group),1!==u||d.xh()||0!==h[d.ae][d._d]||d.zh()!==d.Le.length||(u=2)}if(!s){if(!n.vh())continue;if(!(s=n.wh().group))continue}if(n.xh()){for(var y=!1,b=1-e,m=p;m>=c;m-=2){var w=n.qh[m];if(w.color===b){y=!0;break}}if(y)continue}var x=(i+t)%2,k=this.ck[x].md;k[t][i]=e,s.Ee.ik(x,u),a.debug}}}}},e.prototype.jk=function(t,i){var n=t._d,e=t.ae,r=(n+e)%2;return this.ck[r].md[e][n]===i},e.prototype.gk=function(t,i,n){var e=this.Xh[f][i][t],r=this.Xh[d][i][t],o=e>r?f:d,s=Math.max(e,r),h=Math.min(e,r);if(h>1)return null;var a=0,u=this.Eb;return 1===h&&n.vh()&&n.wh().color===l&&a++,1!==t&&t!==u&&1!==i&&i!==u||a++,s+a-3-h<0?null:o},e.prototype.kk=function(t){for(var i=0,n=t.color,e=this.Xh[1-n],r=this.Xh[n],o=t.Ud,s=o.length-1;s>=0;s--){var h=o[s];if(!h.xh())for(var a=h.qh.length-1;a>=0;a--){var u=h.qh[a];if(u.color===l&&!(r[u.ae][u._d]>4)){var c=e[u.ae][u._d];if(!(c>1)){var p=u.yh();if(0!==p)if(1!==p){var f=u._d-h._d,d=u.ae-h.ae,g=u._d+f,v=u.ae+d;0===e[v][g]&&i++}else{if(c>0)continue;i++}}}}}return i},e.prototype.Nj=function(t){for(var i=0,n=0,e=t.length-1;e>=0;e--){var r=t[e];i+=r.lk(),n+=r.group.Ud.length}n<6&&(i=Math.min(i,n*this.ek));var o=0;for(e=t.length-1;e>=0;e--)o+=this.kk(t[e].group);return i+=o*this.dk}},{"../../Grid":17,"../../constants":51,"../../log":75,"./Heuristic":32,"util":4}],38:[function(t,i,n){"use strict";function e(t){h.call(this,t),this.pk=new s(this.Eb,f),this.qk=this.pk.md,this.rk=new s(this.Eb,f),this.nj=[new s(this.Eb,f),new s(this.Eb,f)],this.sk=new s(this.Eb,f),this.tk()}function r(t,i,n){switch(t){case b:return[i,1];case m:return[1,i];case w:return[i,n];case x:return[n,i]}}var o=t("../../constants"),s=t("../../Grid"),h=t("./Heuristic"),a=t("util").inherits,u=t("../../log"),c=t("../../Move"),p=t("../../Stone"),l=c.Ae,f=o.jd,d=o.EMPTY,g=o.mb,v=o.nb,y=o.NEVER,b=o.mk,m=o.Gh,w=o.nk,x=o.Fh,k=o.oh,A=o.ph,j=s.qe,E=p.rh,G=p.sh;a(e,h),i.g=e,e.prototype.ki=function(){this.pk.se(this.qb),this.uk(g),this.uk(v),this.vk()},e.prototype.wk=function(t,i,n){var e=n===g?-1:1,r=y;return s.qe[2+this.nj[g].md[i][t]]===e&&r++,s.qe[2+this.nj[v].md[i][t]]===e&&r++,r},e.prototype.xk=function(t,i,n){return this.sk.md[i][t]*(n===g?1:-1)},e.prototype.yk=function(t,i,n){return s.qe[2+this.nj[1-n].md[i][t]]*(n===g?1:-1)},e.prototype.toString=function(){return"\nBLACK first:\n"+this.nj[g]+"WHITE first:\n"+this.nj[v]},e.prototype.zk=function(){this.pk.se(this.qb);var t=this.nj[g];this.Ak(this.pk,t.K(this.pk)),this.Bk(t.md,v),this.Bk(t.md,g);var i=this.$h.Zh;return i.Ig(this.qb),[i.Hg().md,i.Jg()]},e.prototype.Ak=function(t,i){for(var n=t.md,e=i.md,r=~~(2*Math.random()),o=this.Eb;o>=1;o--)for(var s=n[o],h=this.Eb;h>=1;h--)s[h]===d&&(this.Ck(n,e,h,o,r,1-r)?(this.Dk(e,h,o,r),r=1-r):this.Ck(n,e,h,o,1-r,r)&&this.Dk(e,h,o,1-r))},e.prototype.Ek=function(t){return this.nj[t].zd(function(t){return"@?O"[s.qe[2+t]+1]})},e.prototype.Fk=function(t){for(t=this.qb.bc()-t;t-- >0;)this.qb.Qd()},e.prototype.uk=function(t){var i=this.qb.bc(),n=this.nj[t];this.Gk(n,t),this.$h.Zh.Hk(this.qb,n,t),this.Fk(i)},e.prototype.vk=function(){for(var t=this.nj[g].md,i=this.nj[v].md,n=this.sk.md,e=this.Eb;e>=1;e--)for(var r=this.Eb;r>=1;r--)n[e][r]=(j[2+t[e][r]]+j[2+i[e][r]])/2;u.debug&&this.pk},e.prototype.Gk=function(t,i){this.Ik=null,this.Jk(this.pk,t.K(this.pk),i),u.debug,this.Bk(t.md,i),u.debug,this.Kk(this.rk.K(t)),this.Ik=this.rk.md,u.debug&&this.rk,this.Jk(this.pk,t.K(this.pk),i),u.debug,this.Bk(t.md,i),u.debug},e.prototype.Jk=function(t,i,n){u.debug&&l(n);for(var e=t.md,r=i.md,o=this.Eb;o>=1;o--)for(var s=e[o],h=this.Eb;h>=1;h--)s[h]===d&&this.Ck(e,r,h,o,n,1-n)&&this.Dk(r,h,o,n)},e.prototype.Kk=function(t){for(var i=t.md,n=1;n<=this.Eb;n++)for(var e=1;e<=this.Eb;e++)if(this.qk[n][e]===d){var r=i[n][e];if(r!==d){var o=this.Lk(i,e,n,1-r);0===o&&(i[n][e]=d)}}},e.prototype.Ck=function(t,i,n,e,r,o){switch(this.Lk(t,n,e,r)){case 0:if(!this.Mk(t,n,e,r))return!1;break;case 4:return!1;case 3:if(0===this.Lk(t,n,e,o))return!1}return!0},e.prototype.Dk=function(t,i,n,e,r){if(this.Ik){if(!r&&this.Ik[n][i]===d)return;if(this.qb.Jd(i,n).Ed(e))return;this.qb.Nd(i,n,e)}t[n][i]=e},e.prototype.Lk=function(t,i,n,e){for(var r=0,o=k;o<=A;o++){var s=E[o];t[n+s[1]][i+s[0]]===e&&r++}return r},e.prototype.Mk=function(t,i,n,e){for(var r=k;r<=A;r++){var o=G[r];if(t[n+o[1]][i+o[0]]===e)return!0}return!1},e.prototype.tk=function(){for(var t=[],i=k;i<=A;i++)for(var n=E[i][0],e=E[i][1],o=this.Eb-1;o>=2;o--){var s=r(i,o,this.Eb);t.push([s[0],s[1],n,e])}this.Nk=t},e.prototype.Bk=function(t,i){for(var n,e,r,o,s,h,a=this.Nk,u=a.length-1;u>=0;u--){var c=a[u],p=c[0],l=c[1];if(t[l][p]===d){var f=c[2],g=c[3],v=p+f,y=l+g,b=t[y][v];if(b===d){var m=v+f,w=y+g;if((b=t[w][m])===d){var x=m+f;if((b=t[w+g][x])===d);else{if(b!==i)continue;if(n=t[l-f][p-g],e=t[l+f][p+g],r=t[y-f][v-g],o=t[y+f][v+g],s=t[w-f][m-g],h=t[w+f][m+g],n===b&&r===b&&s===b)continue;if(e===b&&o===b&&h===b)continue;if(this.Dk(t,m,w,b,!0),n===b&&r===b)continue;if(e===b&&o===b)continue;if(this.Dk(t,v,y,b,!0),n===b||e===b)continue;this.Dk(t,p,l,b,!0)}}else{if(b!==i)continue;if(n=t[l-f][p-g],e=t[l+f][p+g],r=t[y-f][v-g],o=t[y+f][v+g],n!==1-b&&r===b)continue;if(e!==1-b&&o===b)continue;if(this.Dk(t,v,y,b,!0),n===b||e===b)continue;this.Dk(t,p,l,b,!0)}}else{if(b!==i)continue;if(n=t[l-f][p-g],e=t[l+f][p+g],r=t[y-f][v-g],o=t[y+f][v+g],n===b&&r!==1-b)continue;if(e===b&&o!==1-b)continue;this.Dk(t,p,l,b,!0)}}}}},{"../../Grid":17,"../../Move":21,"../../Stone":27,"../../constants":51,"../../log":75,"./Heuristic":32,"util":4}],39:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.Ok=[],this.Pk=this.Ri("allyInfl",.03,.01,1),this.Qk=this.Ri("enemyInfl",.13,.01,1)}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),a=t("../../Move"),u=t("../../Stone"),c=a.Ae,p=a.lb,l=r.EMPTY,f=u.rh,d=r.oh,g=r.ph;s(e,o),i.g=e,e.prototype.ki=function(t,i){var n=this.Ok;n.length=0,o.prototype.ki.call(this,t,i);for(var e=n.length-1;e>=0;e--)this.Rk(n[e],i)},e.prototype.Oh=function(t,i,n){return this.Sk(t,i,1-n,!0),this.Sk(t,i,n)},e.prototype.Tk=function(t,i,n,e,r){if(!(this.Ph[t.ae][t._d]<0)){var o=1-n.group.color,s=this.Ei.Qh(t,o);s&&(this.Th.bi(s.group.Ee)<.5||(h.debug&&(c(1-o),e.toFixed(2)),r[t.ae][t._d]+=e,this.yi.md[t.ae][t._d]+=e))}},e.prototype.Rk=function(t,i){var n=t[0],e=t[1],r=t[2];if(this.Tk(n,n,e,r,i),!this.Th.wj(n,e.color)){var o=e.group;if(!n.Bh(o))for(var s=0;s<8;s++){var h=n.qh[s];h.color===l&&(h.Bh(o)&&this.Tk(h,n,e,r,i))}}},e.prototype.Sk=function(t,i,n,e){var r=this.Xh[1-n][i][t];if(0===r)return 0;var o=this.Xh[n][i][t];if(o>=4)return 0;if(!e&&this.Ph[i][t]<0)return 0;var s=this.qb.Jd(t,i);if(0===s.zh())return 0;var a=this.Ei.Qh(s,n);if(!a)return 0;if(!e&&!this.Ei.Qh(s,1-n))return 0;var u=this.Uk(t,i,n),l=u+this.Qk*r-this.Pk*o;return l*=this.Th.bi(a.group.Ee),e?l?(h.debug&&(p(t,i),l.toFixed(2)),this.Ok.push([s,a,l])):0:(h.debug&&(c(n),p(t,i),l.toFixed(2)),l)},e.prototype.Vk=function(t,i,n,e,r){var o=this.qb.Jd(t,i);if(o.color!==l)return 0;var s=this.Ji.yk(t,i,e);if(o.xh()&&(s/=2),s<=0)return 0;if(0==--r)return s;var h=f[n][0],a=f[n][1],u=f[(n+3)%4],c=u[0],p=u[1];return s+=this.Vk(t+h+c,i+a+p,n,e,r),s+=this.Vk(t+h-c,i+a-p,n,e,r)};e.prototype.Uk=function(t,i,n){for(var e=Math.max(0,this.Ji.yk(t,i,n)),r=d;r<=g;r++)e+=this.Vk(t+f[r][0],i+f[r][1],r,n,1);var o=this.qb.Jd(t,i);return o.vh()?e=Math.max(e-1,0):o.xh()&&(e=Math.max(e-.85,0)),e}},{"../../Move":21,"../../Stone":27,"../../constants":51,"../../log":75,"./Heuristic":32,"util":4}],40:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.Yj=null}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),a=t("../../Move"),u=a.Ae,c=r.EMPTY,p=r.jd;s(e,o),i.g=e,e.prototype.gj=function(){this.Yj||(this.Yj=this.$h.oi.Zj)},e.prototype.Oh=function(t,i){var n=this.qb.Jd(t,i);return this.Wk(t,i,n),0},e.prototype.Wk=function(t,i,n){for(var e,r,o=[],s=this.color,a=n.Zd(s),c=0;r=a[c],c<a.length;c++)1===r.$d?o.push(r):2===r.$d&&o.push(r);if(o.length&&(h.debug&&(u(s),o[0],o.length>1&&o.length),this.Yj.mj(t,i,this.Ai))){this.qb.Nd(t,i,s),h.debug&&u(s);var p=!this.Yj.lj(n);this.qb.Qd();var l;if(!p){for(e=o.length-1;e>=0;e--)if(r=o[e],1!==r.$d){var f=r.Ke();if(l=f[0]===n?f[1]:f[0],this.qb.Nd(l._d,l.ae,s),p=!this.Yj.lj(l),this.qb.Qd(),p)break}if(!p)return void(h.debug&&u(this.color));n=l}for(e=o.length-1;e>=0;e--)r=o[e],l&&1===r.$d||(this.Th.Xj(r,n),h.debug)}},e.prototype.Xk=function(t,i,n){var e=0,r=0,o=this.Eb;if(1===i||i===o)r=1;else{if(1!==n&&n!==o)throw new Error("not along border");e=1}var s=r,h=e;if(this.qb.Jd(i+s,n+h).color===p&&(s=-s,h=-h),this.qb.Jd(i+s,n+h).group!==t){var a=t.color,u=this.qb.Jd(i+e,n+r);for(u.group===t&&(e=-e,r=-r);;)switch(i+=e,n+=r,u=this.qb.Jd(i,n),u.color){case p:return null;case a:return u.group.$d>2?u.group:null;case c:var l=this.qb.Jd(i+s,n+h);if(l.color===c)continue;return l.color===1-a?null:l.group.$d>2?l.group:null;default:return null}}}},{"../../Move":21,"../../constants":51,"../../log":75,"./Heuristic":32,"util":4}],41:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.ck=t.oi.Ii.ck}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=t("../../log"),a=t("../../Move"),u=a.Ae,c=r.EMPTY,p=r.NEVER,l=r.Yk,f=r.ak,d=r.bk;s(e,o),i.g=e,e.prototype.ki=function(t,i){o.prototype.ki.call(this,t,i);var n=this.$h.Zh.ri;for(var e in n){var r=n[~~e].group;this.Zk(i,r)}},e.prototype.Zk=function(t,i){var n=[];if(i.Ee.$k(n)===l){var e=this.qb.Jd(n[0],n[1]);h.debug&&u(this.color),this.Th.Vj(i,e,this.color,.5)}},e.prototype.Oh=function(t,i,n){var e=this.qb.Jd(t,i);return this._k(e,n),this._k(e,1-n),this.al(e,n)},e.prototype._k=function(t,i){if(this.Ji.wk(t._d,t.ae,i)!==p){var n=this.$h.Zh.Yh(t);n.hk&&n.color===i?this.bl(t,i,n):this.cl(t,i)}},e.prototype.bl=function(t,i,n){switch(n.dl){case 1:for(var e=t.Le.length-1;e>=0;e--){var r=t.Le[e];if(r.color===i&&1===r.group.$d)return h.debug&&u(i),this.Th.Vj(r.group,t,i,1)}return;case 2:var o=n.hk;if(this.Th.Dj(t,i))return this.Th.Vj(o.group,t,i,1);if(o.el>1)return;var s=o.fl.length&&o.fl[0].group;if(s&&t.Bh(s)&&(1===s.$d||!t.vh()))return this.Th.Vj(o.group,t,i,1);return;default:return}},e.prototype.cl=function(t,i){if(!(this.Ph[t.ae][t._d]<0)&&this.Ei.Qh(t,1-i)){for(var n=this.ck[f].md,e=this.ck[d].md,r=this.Xh[1-i],o=null,s=null,h=0,a=t.Le.length-1;a>=0;a--){var u=t.Le[a];switch(u.color){case c:var p=u._d,l=u.ae;if(n[l][p]===i||e[l][p]===i){if(1===r[l][p]&&2!==r[t.ae][t._d])continue;o=u,h++,o.vh()&&2===o.zh()&&h++}break;case i:s||(s=u.group)}}o&&(s||(s=o.Zd(i)[0]),this.Th.Vj(s,t,i,h/2))}},e.prototype.al=function(t,i){var n,e=t.uh(),r=e.length,o=this.$h.Zh.Yh(t);if(o.hk&&o.color===i){if(0===r)return-1;if(1===r)return this.Hi.jk(e[0],i)?0:-1;if(1===this.Th.bi(o.hk))return 0;var s=t.Ah(i);if(3===r&&1===s)return.5;for(n=r-1;n>=0;n--){var h=e[n];if(!this.Th.Dj(h,i)&&1===h.zh())return.5}}else{e=t.uh();var a=!1;for(n=r-1;n>=0&&!a;n--)a=this.Hi.jk(e[n],i);if(!a)return 0;if(t.vh())return-1;if(t.xh())return-.2;if(r>=3&&!this.Xh[1-i][t.ae][t._d])return 1}return 0}},{"../../Move":21,"../../constants":51,"../../log":75,"./Heuristic":32,"util":4}],42:[function(t,i,n){"use strict";function e(t){o.call(this,t),this.gl=this.Ri("enemyInfl",.07,.01,.5),this.hl=this.Ri("allyInfl",.5,.01,.5),this.il=this.Ri("border",10,0,20),this.jl=this.Eb<=9?[0,.2,.8,.95,1]:[0,.2,.8,1,.95,.8]}var r=t("../../constants"),o=t("./Heuristic"),s=t("util").inherits,h=r.EMPTY;s(e,o),i.g=e,e.prototype.Oh=function(t,i){var n=0;if(!this.$h.ai){var e=this.Ji.xk(t,i,this.color);e<0&&(n+=e)}for(var r=this.qb.Jd(t,i),o=this.Xh[this.Ai],s=this.Xh[this.color],a=o[i][t],u=s[i][t],c=r.Le.length-1;c>=0;c--){var p=r.Le[c];if(p.color!==h)return n;a+=o[p.ae][p._d],u+=s[p.ae][p._d]}var l=1+this.Eb/9*(this.gl*Math.max(a-3,0)+this.hl*Math.max(u-3,0)),f=this.jl.length-1,d=Math.min(this.yh(t),f),g=Math.min(this.yh(i),f);return n+this.jl[d]*this.jl[g]*this.il/l},e.prototype.yh=function(t){return Math.min(t-1,this.Eb-t)}},{"../../constants":51,"./Heuristic":32,"util":4}],43:[function(t,i,n){"use strict";function e(t){this.kl=t.group.xd,this.Mj=[t],t.Lj=this}function r(t){return"#"+t.group.xd}var o=t("../../../log");i.g=e,e.prototype.toString=function(){return this.Mj.map(r).toString()},e.prototype.ll=function(t){if(!t.Lj)return o.debug&&this.toString(),this.Mj.push(t),void(t.Lj=this);if(t.Lj.kl!==this.kl){o.debug&&(t.Lj.toString(),this.toString());for(var i=t.Lj.Mj,n=i.length-1;n>=0;n--)this.Mj.push(i[n]),i[n].Lj=this}},e.prototype.remove=function(t){var i=this.Mj.indexOf(t);if(i<0)throw new Error("Band.remove on wrong Band");this.Mj.splice(i,1),t.Lj=null,o.debug&&this.toString()},e.ml=function(t){if(1===t.length)throw new Error("add Band of 1");for(var i=null,n=0;n<t.length;n++)if(t[n].Ee.Lj){i=t[n].Ee.Lj;break}var r=0;for(i||(i=new e(t[r++].Ee)),n=r;n<t.length;n++)i.ll(t[n].Ee)}},{"../../../log":75}],44:[function(t,i,n){"use strict";function e(t){this.yg=t,this.version="chuckie",this.mode=null,this.ai=!1,this.qb=null,this.ql=null,this.yi=null,this.rl=[],this.ri=null,this.sl=[0,0],this.tl=[0,0],this.ul=null}function r(t){return t>1&&t<2?t-1:t}function o(t){if(!(t[m]===t[w]||t[m]>=x&&t[w]>=x))return t[m]=r(t[m]),t[w]=r(t[w]),t[m]>t[w]?m:w}function s(t,i){for(var n=0;n<i.length;n++){var e=i[n];l.debug&&(t.name,e.group.xd),e.Ql()!==k&&(i[n]=null)}var r=0;for(n=0;n<i.length;n++)i[n]&&(i[n].Rl(t.name+": liveliness="+i[n].Sl.toFixed(4)),r++);return r}function h(t,i){for(var n=0;n<i.length;n++)i[n].Rl(t.name);return i.length}function a(){return 0}var u=t("../../../constants"),c=t("../../../Grid"),p=t("./GroupInfo"),l=t("../../../log"),f=t("../../../Move"),d=t("./Void"),g=t("./ZoneFiller"),v=f.Ae,y=u.EMPTY,b=u.jd,m=u.mb,w=u.nb,x=p.nl,k=p.ol,A=p.pl;i.g=e,e.prototype.Ig=function(t){l.debug,this.sl[m]=this.sl[w]=0,this.tl[m]=this.tl[w]=0,this.yi&&this.yi.Eb===t.Eb||(this.yi=new c(t.Eb,b)),this.vl(0,t,this.yi)&&(this.wl(),this.ai||t.Td(this.tl))},e.prototype.Hg=function(){return this.yi},e.prototype.Jg=function(){var t=this.sl,i=this.tl,n=this.yg.ub;return[[t[m]+i[w],t[w]+i[m]+n],[[t[m],i[w],0],[t[w],i[m],n]]]},e.prototype.Yh=function(t){return this.ql.md[t.ae][t._d]},e.prototype.pi=function(t,i){this.vl(2,t,i)},e.prototype.li=function(){this.wl()},e.prototype.Hk=function(t,i,n){this.vl(1,t,i)&&this.wl(n)},e.prototype.yd=function(){return this.ql.yd()},e.prototype.Cd=function(){for(var t,i="Grid:\n"+this.ql.Dd()+"Voids:\n",n=this.rl,e=0;t=n[e],e<n.length;e++)i+=t.toString()+"\n";i+="Groups:\n";for(var r in this.ri)i+=this.ri[~~r].toString()+"\n";return this.sl&&(i+="Score:"+this.sl.map(function(t,i){return" player "+i+": "+t+" points"})),i},e.prototype.vl=function(t,i,n){return this.mode=t,this.ai=this.yg.useAreaScoring&&0===t,this.qb=i,this.ql=n,this.ul=new g(i,n),0!==i.bc()&&(n.se(i),this.xl(),this.yl(),this.zl(),!0)},e.prototype.wl=function(t){2===this.mode?this.Al():(this.Bl(),this.Al(t),this.Cl(),this.Dl())},e.prototype.El=function(t,i){var n=this.ri[t.xd];n||(t.Ee&&t.Ee.Zh===this?t.Ee.Fl():t.Ee=new p(t,this),n=this.ri[t.xd]=t.Ee),n.Gl.push(i)},e.prototype.xl=function(){l.debug;var t=c.le;this.ri={},this.rl.length=0;for(var i,n,e=this.qb,r=new d(e,t++),o=1;o<=e.Eb;o++)for(var s=1;s<=e.Eb;s++){var h=this.ul.Hl(s,o,y,r);if(0!==h){this.rl.push(r);for(var a=m;a<=w;a++)for(n=r.Il[a],i=n.length-1;i>=0;i--)this.El(n[i],r);r=new d(e,t++)}}},e.prototype.yl=function(){for(var t in this.ri)this.ri[~~t].Jl()},e.prototype.zl=function(){l.debug;for(var t=this.rl,i=t.length,n=i-1;n>=0;n--)t[n].Kl();for(var e;;){for(e=!1,n=i-1;n>=0;n--)t[n].Ll()&&(e=!0);if(!e)break}for(n=i-1;n>=0;n--)t[n].Ml()},e.prototype.Bl=function(){if(!this.ai){var t=this.qb;if(!(t.bc()<2*t.Eb))for(var i=[0,0],n=[0,0];;){for(var e=!1,r=this.rl.length-1;r>=0;r--){var s=this.rl[r];if(void 0===s.color&&!(s.dl>2*t.Eb)){i[m]=i[w]=n[m]=n[w]=0;for(var h=m;h<=w;h++)for(var a=s.Il[h].length-1;a>=0;a--){var u=s.Il[h][a].Ee;i[h]+=u.Nl(),n[h]+=u.Ol()}if(!(n[m]>4&&n[w]>4)){var c=o(i);void 0!==c?(l.debug&&(v(c),i[c].toFixed(4),i[1-c].toFixed(4)),s.Pl(c),e=!0):l.debug&&i[0]}}}if(!e)break}}};var j={name:"brothers",l:p.prototype.Tl},E={name:"singleEye",l:p.prototype.Ul,Vl:s},G={name:"race",l:p.prototype.Ql,Vl:a},M={name:"atari",l:p.prototype.Wl},S={name:"final",l:p.prototype.Xl},q=[];q[0]=[j,M,E,G,S],q[1]=[j,E],q[2]=[j,E,G],e.prototype.Yl=function(t,i){l.debug&&t.name;var n=0,e=0,r=[];for(var o in this.ri){var s=this.ri[~~o];if(!s.Zl&&!s.$l)switch(e++,t.l.call(s,i)){case k:r.push(s);break;case A:n++}}return r.length&&(n+=t.Vl?t.Vl(t,r):h(t,r)),l.debug&&n&&t.name,n===e?0:0===n?e:-n},e.prototype.Al=function(t){if(!this.ai){for(var i,n=q[this.mode],e=0;e<n.length;){if(0===(i=this.Yl(n[e++],t)))return void this.zl();i<0&&(e=0,this.zl())}l.debug}},e.prototype.Cl=function(){for(var t=[],i=this.rl.length-1;i>=0;i--){var n=this.rl[i];t[m]=t[w]=!1;for(var e=m;e<=w;e++)for(var r,o=n.Il[e],s=0;r=o[s],s<o.length;s++)if(this.ai||r.Ee.Nl()>=2){t[e]=!0;break}t[m]&&t[w]?n._l():this.ai&&(n.color=t[m]?m:w)}},e.prototype.Dl=function(){this.am(),this.bm(),this.cm()},e.prototype.am=function(){if(this.ai)for(var t in this.ri){var i=this.ri[~~t].group;this.sl[i.color]+=i.Ud.length}},e.prototype.bm=function(){if(!this.ai)for(var t in this.ri){var i=this.ri[~~t];if(i.$l){for(var n=!1,e=i.dm.length-1;e>=0;e--)if(!i.dm[e].Ee.$l){n=!0;break}var r=i.group.color;if(!i.dm.length||n){var o=i.group.Ud[0],s=this.ul.Hl(o._d,o.ae,r,c.oe+r);this.tl[r]+=s,this.sl[1-r]+=s}else for(var h=i.Gl.length-1;h>=0;h--)i.Gl[h].Pl(r)}}},e.prototype.cm=function(){for(var t=this.ql.md,i=[],n=this.rl.length-1;n>=0;n--){var e=this.rl[n],r=e.em(this.ai?null:i);if(r){this.sl[e.color]+=r-i.length,this.ul.Hl(e._d,e.ae,e,c.pe+e.color)
;for(var o=i.length-1;o>=0;o--){var s=i[o];t[s.ae][s._d]=c.ne}}else this.ul.Hl(e._d,e.ae,e,c.ne)}}},{"../../../Grid":17,"../../../Move":21,"../../../constants":51,"../../../log":75,"./GroupInfo":46,"./Void":47,"./ZoneFiller":48}],45:[function(t,i,n){"use strict";function e(t,i){this.ui=t,this.Il=[],this.color=i[0].color,this._h=!1,this.fm(i)}i.g=e,e.prototype.fm=function(t){for(var i=this.Il,n=t.length-1;n>=0;n--){var e=t[n];i.indexOf(e)<0&&i.push(e)}}},{}],46:[function(t,i,n){"use strict";function e(t,i){this.Zh=i,this.gm=[],this.Gl=[],this.fl=[],this.dm=[],this.hm=[0,0],this.si=[],this.im=[],this.jm=[],this.group=t,this.Fl()}function r(t){return t>f?t>d?"ALWAYS":"SOMETIMES":"NEVER"}function o(t,i,n){for(var e=i.length-1;e>=0;e--)for(var r=i[e].Ee,o=t.length-1;o>=0;o--)if(!(t[o].indexOf(r)<0)){n!==-1&&n!==o?(t[n]=t[n].concat(t[o]),t.splice(o,1),o<n&&n--):n=o;break}return n}function s(t,i,n,e){var r=-1;r=o(t,n,r),r=o(t,e,r),r<0?t.push([i]):t[r].push(i)}function h(t,i,n){switch(t){case 4:return 4===i[2];case 5:return 1===i[3]&&3===i[2];case 6:if(2===i[3]&&4===i[2]){for(var e=0,r=0;r<6;r++)if(!n[r].xh()&&++e>2)return!1;return!0}return 1===i[4]&&3===i[2]&&2===i[1];default:return!1}}function a(t){return.0202===t||1.0202===t}var u=t("../../../constants"),c=t("./Band"),p=t("../../../log"),l=u.EMPTY,f=u.NEVER,d=u.Yk,g=u.ALWAYS,v=u.ak,y=u.bk;i.g=e;var b=e.ol=-1,m=e.pl=1,w=e.km=0,x=e.nl=1e3;e.prototype.Fl=function(){this.el=this.Sl=0,this.gm.length=0,this.Gl.length=0,this.Lj=null,this.Zl=this.$l=!1,this.bi=void 0,this.lm=void 0,this.fl.length=0,this.dm.length=0,this.hm[v]=this.hm[y]=0,this.si.length=0,this.im.length=0,this.jm.length=0,this.mm=0},e.nm=function(t){return"#"+t.group.xd},e.prototype.toString=function(){var t=this.Lj?this.Lj.toString():"";return this.group.toString()+" (isAlive:"+this.Zl+" isDead:"+this.$l+" voids:"+this.gm.length+" brothers:["+t+"] deadEnemies:["+this.fl.map(e.nm)+"])"},e.prototype.om=function(t){return p.debug,this.gm.push(t),this.el++,this},e.prototype.pm=function(t){var i=this.gm.indexOf(t);if(i===-1)throw new Error("remove unknown void");p.debug,this.gm.splice(i,1),this.el--},e.prototype.Jl=function(){for(var t=this.group,i=t.color,n=[],e=[],r=[],o=t.Ke(),s=o.length-1;s>=0;s--)for(var h=o[s],a=h.Le,u=null,p=a.length-1;p>=0;p--){var l=a[p];if(l.color===i&&l.group!==t){u=l.group;var f=n.indexOf(u);f>=0?r[f]!==h&&(e[f]=!1):(n.push(u),e.push(!0),r.push(h))}}if(n.length){for(var d=n.length-1;d>=0;d--)if(e[d]){var g=r[d],v=this.Zh.Yh(g).qm(g,[t,n[d]]);this.si.push(v),this.im.push(n[d])}else this.jm.push(n[d]);n.push(t),c.ml(n)}},e.Qj=function(t){return"subband["+t.length+" groups: "+t.map(function(t){return t.group.toString(1)}).join(", ")+"]"},e.prototype.rm=function(t){for(var i=[],n=this.im.length-1;n>=0;n--)this.si[n].ui!==t&&i.push(this.im[n]);return i},e.prototype.Wj=function(t,i){for(var n,e=[],r=t.length-1;r>=0;r--){var o=t[r].Ee,h=o.Lj;if(h){if(h===n)continue;n=h;for(var a=h.Mj.length-1;a>=0;a--){var u=h.Mj[a];s(e,u,u.jm,u.rm(i))}}else e.push([o])}return e},e.prototype.Uj=function(t){var i=this.Lj;if(!i)return[];for(var n=[],e=i.Mj.length-1;e>=0;e--){var r=i.Mj[e];r!==this&&s(n,r,r.jm,r.rm(t))}return n},e.prototype.sm=function(){if(this.el>=2)return f;var t=this.lk();return t>=3?f:0===t?g:d},e.prototype.tm=function(){if(this.sm()===f)return!1;if(this.jm.length)return!1;for(var t=this.group.color,i=0,n=0,e=this.Gl.length-1;e>=0;e--){var r=this.Gl[e];r.color===t&&0!==r.um&&(i++,r.um>=3&&n++,this.fl.length&&n++)}return!(i+n>=2)},e.prototype.Rl=function(t){this.$l=!0;for(var i=this.Gl,n=this.group.color,e=1-n,r=null,o=i.length-1;o>=0;o--){var s=i[o],h=s.Il[e],a=0;if(h.length){for(var u=h.length-1;u>=0;u--)a+=h[u].Ud.length;s.dl>a||(s.Pl(e),r=s)}}if(!r)return void p.debug;for(var c=this.dm=this.group.Me(),l=c.length-1;l>=0;l--){var f=c[l];f.Ee.fl.push(this);for(var d=l-1;d>=0;d--){var g=c[d],v=g.Ee;if(v.im.indexOf(f)===-1){v.im.push(f);var y=r.qm(r.vm[0],[f,g]);v.si.push(y)}}}p.debug},e.prototype.Nl=function(t){if(this.Zl||this.el>=2&&!this.$l)return x;for(var i,n=0,e=this.group.color,r=this.group.$d,o=this.Gl.length-1;o>=0;o--){var s=this.Gl[o],h=s.dl;if(s.hk)s.hk===this&&(n+=h);else{var a=s.Il[e];if(1===a.length)n+=h;else{var u=this.group.xd,c=u;for(i=a.length-1;i>=0;i--)c=Math.min(a[i].xd,c);u===c&&(n+=h)}}}if(n=Math.min(r,n)/100,t||(n+=r/1e4),this.$l)return 0+n;var l=0,f=0;if(!t&&this.Lj){var d=this.Lj.Mj;for(i=d.length-1;i>=0;i--)d[i]!==this&&(f+=d[i].Nl(!0))}if(!t){var d=this.jm;for(i=d.length-1;i>=0;i--)l+=d[i].Ee.Nl(!0);for(d=this.im,i=d.length-1;i>=0;i--)l+=d[i].Ee.Nl(!0)}return l!==f&&(p.debug,l=f),this.el+l+n},e.prototype.$k=function(t){if(this.el>1)return g;if(0===this.el)return f;var i=this.gm[0],n=i.dl;if(n>6)return g;var e=this.group,r=e.color;if(n<3&&!i.Il[1-r].length)return f;p.debug;for(var o,s=null,a=0,u=0,c=0,v=null,y=null,b=0,m=i.vm,w=!1,x=[0,0,0,0,0],k=0;k<n;k++){for(var A=m[k],j=0,E=0,G=0,M=A.Le.length-1;M>=0;M--){var S=A.Le[M];switch(S.color){case l:G++;break;case r:E++;break;default:if(1===S.group.$d){G++,b+=2;break}j++,v?S.group!==v&&(y=S.group):v=S.group}}if(j){if(G+(E?1:0)<2)continue}else if(b++,o=A,x[G]++,G<2)continue;if(p.debug,c++,A.vh()&&(w=!0),s&&!s.vh()){if(j<u)continue;if(G+j<=a+u)continue}s=A,u=j,a=G}if(w&&c>1&&c--,p.debug,!s)return f;if(1===b&&!y&&v&&v.Ud.length<3&&this.wm(v,o,s))return f;if(c>=2){if(u)return g;if(!h(n,x,m))return g}return t[0]=s._d,t[1]=s.ae,d},e.prototype.wm=function(t,i,n){for(var e=i.Le.length-1;e>=0;e--){var r=i.Le[e];if(r.color===l&&r!==n&&r.Bh(t))return!0}return!1},e.prototype.Tl=function(){if(!this.Lj)return w;for(var t=this.Lj.Mj,i=0,n=!1,e=t.length-1;e>=0;e--){var r=t[e];r!==this&&(n||r.Zl?n=r.Zl=!0:(i+=r.el)>=2&&(n=r.Zl=!0))}return n?(p.debug,this.Zl=!0,m):w},e.prototype.xm=function(){if(this.Lj)return!1;if(this.group.Ud.length>=6)return!1;for(var t=this.Gl.length-1;t>=0;t--)if(this.Gl[t].color===this.group.color)return!1;return!0},e.prototype.Ul=function(t){if(this.el>=2)return this.Zl=!0,p.debug,m;if(this.xm())return b;var i=[],n=this.$k(i);if(n===d){if(this.mm=.5,void 0===t)return w;t!==this.group.color&&(n=f)}return n===f?(this.mm=0,this.Lj||this.fl.length?w:this.ym()>=1.5?w:(this.Sl=this.Nl(),b)):(this.Zl=!0,this.mm=1,p.debug&&r(n),m)},e.prototype.Ql=function(){var t=this.group.Me();if(!t.length)return b;for(var i=this.Sl||this.Nl(),n=a(i)&&!this.im.length&&!this.jm.length,e=null,r=n?this.group.Ke():null,o=0;o<t.length;o++){var s=t[o],h=s.Ee,u=h.Nl(),c=i-u;if(p.debug&&(this.group.xd,i.toFixed(4),u.toFixed(4),s.xd),c>0)return p.debug,this.lm=!1,w;if(0===c&&(p.debug&&this.group,n)){if(h.lm===!1||u!==i||s.Ud.length<3)continue;for(var l=r.length-1;l>=0;l--){var f=r[l];if(!f.Bh(s)&&this.Zh.Yh(f).hk!==this){n=!1;break}}n&&(e=h)}}return n&&e?(this.lm=!0,w):b},e.prototype.Wl=function(){return this.group.$d>1?w:b},e.prototype.Xl=function(){var t=this.Sl=this.Nl();if(t>=2)return this.Zl=!0,p.debug,m;if(this.lm)return this.Zl=!0,p.debug,m;for(var i=this.im.length-1;i>=0;i--)if(this.im[i].Ee.Zl)return this.Zl=!0,p.debug&&this.im[i],m;return b},e.prototype.zm=function(t,i){if(this.Lj){for(var n=this.Lj.Mj,e=0,r=n.length-1;r>=0;r--)e+=t.call(n[r],i);return e}return t.call(this,i)},e.prototype.ik=function(t,i){this.hm[t]+=i},e.prototype.bj=function(){for(var t=1-this.group.color,i=this.Gl.length-1;i>=0;i--){if(this.Gl[i].color!==t)return!1}return!0},e.prototype.Am=function(){for(var t=this.group.color,i=this.Gl.length-1;i>=0;i--){var n=this.Gl[i];if(void 0===n.color)for(var e=n.Il[1-t],r=e.length-1;r>=0;r--){var o=e[r],s=o.Ee.Ol();if(s<6)return 1}}return 0},e.prototype.lk=function(){return this.el+this.mm+this.Am()+(this.hm[v]+this.hm[y])/2},e.prototype.ym=function(){return this.zm(this.lk)},e.prototype.Bm=function(){return this.group.Ud.length},e.prototype.Ol=function(){return this.zm(this.Bm)}},{"../../../constants":51,"../../../log":75,"./Band":43}],47:[function(t,i,n){"use strict";function e(t,i){this.qb=t,this.code=i,this._d=this.ae=0,this.dl=0,this.Il=null,this.vm=null,this.Cm=void 0,this.color=void 0,this.hk=void 0,this.Dm=!1,this.Em=!1,this.um=-1,this.si=null,this.Fm=!1}function r(t){return t?g[t]:g[0]}function o(t){for(var i=t.length-1;i>=0;i--)if(!t[i].Ee.$l)return!1;return!0}function s(t){return"#"+t.xd}var h=t("../../../constants"),a=t("./FakeSpot"),u=t("../../../log"),c=t("../../../Move"),p=c.Ae,l=c.lb,f=h.mb,d=h.nb,g=["void","eye","fake","dame"];i.g=e,e.prototype.Gm=function(t,i){return this._d=t,this.ae=i,this.si=[],this.Il=[[],[]],this.vm=[],this.Il},e.prototype.Hm=function(t,i){this.dl++,this.vm.push(this.qb.Jd(t,i))},e.prototype.qm=function(t,i){u.debug&&i.map(function(t){return t.xd}),this.Em=!0;var n=this.vm.indexOf(t),e=this.si[n];return e?e.fm(i):e=this.si[n]=new a(t,i),e},e.prototype.Kl=function(){var t=this.Il[f],i=this.Il[d],n=o(t),e=o(i);if(n&&e)return!this.Dm&&void 0!==this.color&&this.Im();if(1===this.Cm)return!1;if(!n&&!e)return!1;var r=n?d:f;return this.Fm=!t.length||!i.length,this.Em?this.Jm(r):(this.um=this.dl,this.Km(r))},e.prototype.Jm=function(t){this.Cm=2,this.color=t,this.hk&&(this.hk.pm(this),this.hk=null);for(var i=this.si.length-1;i>=0;i--){var n=this.si[i];n&&(n._h=!1)}return!0},e.prototype.Ll=function(){if(2!==this.Cm)return!1;var t=this.um,i=this.um=this.dl-this.Lm();return u.debug,i!==t},e.prototype.Lm=function(t){t||(t=[]);for(var i=this.si.length-1;i>=0;i--){var n=this.si[i];if(n&&n.color===this.color)for(var e=n.Il,r=e.length-1;r>=0;r--)if(e[r].Ee.tm()){u.debug&&!n._h&&n.ui,n._h=!0,t.push(n.ui);break}}return t.length},e.prototype._h=function(t){for(var i=this.si.length-1;i>=0;i--){var n=this.si[i];if(n&&n.color===this.color&&n.ui===t)return n._h}return!1},e.prototype.Ml=function(){if(2===this.Cm){if(0===this.um){if(this.hk)throw new Error("NEVER HAPPENS");return void u.debug}u.debug;var t=this.color;return this.color=this.Cm=void 0,this.Km(t)}},e.prototype.Km=function(t){return this.Fm?(this.Mm(t),!0):this.Pl(t)},e.prototype.Nm=function(t){for(var i=this.Il[t],n=i[0],e=0,r=i.length-1;r>=0;r--){var o=i[r],s=o.Ud.length;o.$d>1&&s>e&&(n=o,e=s)}this.hk=n.Ee.om(this)},e.prototype.Mm=function(t){return u.debug&&p(t),this.Cm=1,this.color=t,this.Nm(t),!0},e.prototype.Pl=function(t){if(t===this.color)return!1;u.debug&&p(t),this.hk&&(this.hk.pm(this),this.hk=null),this.color=t;for(var i=this.Il[1-t],n=i.length-1;n>=0;n--)for(var e=i[n].Ee.Gl,r=e.length-1;r>=0;r--)if(e[r]!==this&&e[r].color===t)return!0;return this.Nm(t),!0},e.prototype._l=function(){u.debug,this.hk&&(this.hk.pm(this),this.hk=null),this.Cm=3,this.color=void 0},e.prototype.Im=function(){u.debug;var t=this.color;if(void 0===t)throw new Error("dead group's eye of undefined owner");this.Dm=!0,this.Em=!1,this.hk&&(this.hk.pm(this),this.hk=null),this.Cm=1,this.color=1-t;for(var i=this.Il[t],n=i.length-1;n>=0;n--){var e=i[n].Ee;if(e.dm.length)return this.hk=e.dm[0].Ee.om(this),!0}return!0},e.prototype.em=function(t){return void 0===this.color?0:(t&&(t.length=0,this.Em&&this.Lm(t)),this.dl)},e.prototype.Om=function(t){var i=t.group;return this.Il[i.color].indexOf(i)>-1},e.prototype.toString=function(){return"{"+r(this.Cm)+"-"+l(this._d,this.ae)+" vcount:"+this.dl+" black:"+(this.Il[f].map(s).toString()||"-")+" white:"+(this.Il[d].map(s).toString()||"-")+"}"}},{"../../../Move":21,"../../../constants":51,"../../../log":75,"./FakeSpot":45}],48:[function(t,i,n){"use strict";function e(t,i){this.qb=t,this.md=i.md,this.Il=null,this.Pm=null}var r=t("../../../constants"),o=r.jd;i.g=e,e.prototype.Hl=function(t,i,n,e){if(this.md[i][t]!==n)return 0;this.Pm=n;var r="number"!=typeof e?e:null;this.Il=r&&r.Gm(t,i);for(var o,s,h,a=0,u=this.md,c=[[t,i,i]];o=c.pop();)if(s=o[0],i=o[1],h=o[2],u[i][s]===n){for(;this.Qm(s,i-1);)i--;for(;this.Qm(s,h+1);)h++;a+=h-i+1;for(var p=s-1;p<=s+1;p+=2){for(var l=null,f=i;f<=h;f++)p<s&&(u[f][s]=e,r&&r.Hm(s,f)),this.Qm(p,f)?l||(l=f):l&&(c.push([p,l,f-1]),l=null);l&&c.push([p,l,h])}}return a},e.prototype.Qm=function(t,i){var n=this.md[i][t];if(n===o)return!1;if(n===this.Pm)return!0;if(!this.Il)return!1;if("number"!=typeof n)return!1;var e=this.qb.Jd(t,i).group;if(!e)throw new Error("Unexpected: ZoneFiller replacing a group");var r=this.Il[n];return r.indexOf(e)===-1&&r.push(e),!1}},{"../../../constants":51}],49:[function(t,i,n){"use strict";function e(t,i,n){this.name="Chuckie",this.yg=t,this.Zh=new o(t),this.Sm(n),this.setColor(i)}function r(t,i){return i[1]-t[1]}var o=t("./boan/BoardAnalyser"),s=t("../../constants"),h=t("../../Genes"),a=t("../../Grid"),u=t("../../log"),c=t("../../Move"),p=t("../../test"),l=t("./boan/ZoneFiller"),f=t("./Connector"),d=t("./GroupAnalyser"),g=t("./GroupsAndVoids"),v=t("./Hunter"),y=t("./Influence"),b=t("./MoveInfo"),m=t("./NoEasyPrisoner"),w=t("./PotentialEyes"),x=t("./PotentialTerritory"),k=t("./Pusher"),A=t("./Savior"),j=t("./Shaper"),E=t("./Spacer"),G=c.kb,M=c.lb,S=s.jd,q=s.mb,C=s.vi,D=s.Rm,B=s.wi;i.g=e,e.Tm="Chuckie",e.Um="0.1",e.Ag=o,e.Vm=l,e.prototype.Wm=function(t){var i=new t(this);return this.Di.push(i),i},e.prototype.Xm=function(){var t=this.oi={};this.Di=[],t.ni=this.Wm(b),t.Ki=this.Wm(x),t.Ym=this.Wm(g),t.Li=this.Wm(y),t.Ii=this.Wm(w),t.Zm=this.Wm(d),t.Gi=this.Wm(m),t.$m=this.Wm(A),t.Zj=this.Wm(v),t.Fi=this.Wm(f),t._m=this.Wm(E),t.an=this.Wm(k),t.bn=this.Wm(j);for(var i=0;i<this.Di.length;i++)this.Di[i].Bi()},e.prototype.setColor=function(t){this.color=t;for(var i=0;i<this.Di.length;i++)this.Di[i].Mi(t)},e.prototype.Sm=function(t){this.Si=t||this.Si||new h,this.zi=this.Ri("smallerMove",.03,.01,.1),this.qb!==this.yg.qb&&(this.qb=this.yg.qb,this.Eb=this.qb.Eb,this.ai=this.yg.useAreaScoring,this.cn=new a(this.Eb,S),this.yi=new a(this.Eb,0,S),this.Xm()),this.vb=q,this.dn=this.en=0,this.fn=this.gn=this.hn=0,this.jn=!1,this.Gj=this.Hj=-1,this.Ni=null},e.prototype.kn=function(t){for(var i=0;i<this.Di.length;i++){var n=this.Di[i];if(n.name===t)return n}return null},e.prototype.Ri=function(t,i,n,e){return void 0===n&&(n=null),void 0===e&&(e=null),this.Si.get(this.name+"-"+t,i,n,e)},e.prototype.ln=function(t,i,n){this.fn=n,this.gn=t,this.hn=i,this.jn=1!==this.mn},e.prototype.nn=function(t,i,n){if(n>this.fn)this.mn=1,this.ln(t,i,n);else{if(this.mn++,Math.random()*this.mn>=1)return;this.ln(t,i,n)}},e.prototype.on=function(){this.dn++;var t=this.cn.md,i=this.yi.md;this.pn(),this.qn(t,i),this.rn(t,i);var n=this.sn(t,i);return u.Oi(this.sj?u.Pi:u.Ij),n},e.prototype.pn=function(){this.fn=this.zi-.001,this.gn=-1,this.vb=this.yg.vb,this.sj=!!u.debug,u.Oi(u.Ij)},e.prototype.qn=function(t,i){for(var n=1;n<=this.Eb;n++)for(var e=1;e<=this.Eb;e++)this.qb.Zb(e,n,this.color)?(t[n][e]=C,i[n][e]=0):t[n][e]=D;if(this.Gj!==-1){if(t[this.Hj][this.Gj]===D)throw new Error("Invalid test move: "+this.Gj+","+this.Hj);t[this.Hj][this.Gj]=B}},e.prototype.rn=function(t,i){for(var n=0;n<this.Di.length;n++){var e=this.Di[n];u.Oi(this.sj&&this.Ni===e.name?u.Pi:u.Ij);var r=Date.now();e.gj&&e.gj(),e.ki(t,i);var o=Date.now()-r;o>=3&&!p.tn&&u.un("Slowness: "+e.name+" took "+o+"ms")}this.oi.ni.tj(t,i)},e.prototype.sn=function(t,i){for(var n=1;n<=this.Eb;n++)for(var e=1;e<=this.Eb;e++)t[n][e]<C||i[n][e]<this.fn||this.nn(e,n,i[n][e]);return this.fn<this.zi?"pass":(this.jn&&this.en++,M(this.gn,this.hn))},e.prototype.vn=function(){return this.oi.Ki.zk()},e.prototype.wn=function(){var t=this.oi.Ki;return t.ki(),t.sk.md},e.prototype.xn=function(t,i){this.Gj=t,this.Hj=i,this.on(),this.Gj=-1},e.prototype.yn=function(t,i){for(var n={},e=0;e<this.Di.length;e++)this.Di[e].Qi(t,i,n);return n},e.prototype.zn=function(t,i){return this.xn(t,i),this.yi.md[i][t]},e.prototype.An=function(t,i,n){return this.xn(t,i),this.kn(n).yi.md[i][t]},e.prototype.Bn=function(t){this.Ni=t},e.prototype.Cn=function(t,i){var n=G(t);if(!n)return"";var e=n[0],o=n[1];if(i){if(!this.qb.Zb(e,o,this.yg.vb))return"Invalid move: "+t;this.xn(e,o)}var s=this.yn(e,o),h=this.yi.md[o][e],a=[];for(var u in s)0!==s[u]&&a.push([u,s[u]]);a.sort(r);for(var c=t+" ("+h.toFixed(2)+")\n",p=0;p<a.length;p++)c+="- "+a[p][0]+": "+a[p][1].toFixed(2)+"\n";return c}},{"../../Genes":15,"../../Grid":17,"../../Move":21,"../../constants":51,"../../log":75,"../../test":80,"./Connector":28,"./GroupAnalyser":30,"./GroupsAndVoids":31,"./Hunter":33,"./Influence":34,"./MoveInfo":35,"./NoEasyPrisoner":36,"./PotentialEyes":37,"./PotentialTerritory":38,"./Pusher":39,"./Savior":40,"./Shaper":41,"./Spacer":42,"./boan/BoardAnalyser":44,"./boan/ZoneFiller":48}],50:[function(t,i,n){"use strict";function e(){this.Dn=null,this.Bg=this.En=this.Fn=this.Gn=null}i.g=new e,e.prototype.Hn=function(t){this.Dn={};for(var i=0;i<t.length;i++){var n=t[i];this.Dn[n.name]=n.In}var e=t.length-1;this.Bg=this.En=t[e].In,this.Fn=e>=1?t[e-1].In:null,this.Gn=e>=2?t[e-2].In:null}},{}],51:[function(t,i,n){"use strict";function e(){this.ak=0,this.bk=1,this.jd=-99,this.EMPTY=-1,this.mb=0,this.nb=1,this.vi=0,this.wi=1,this.Rm=-1,this.NEVER=0,this.Yk=1,this.ALWAYS=2,this.oh=0,this.ph=3,this._j=7,this.$j=1,this.mk=this.Dh=0,this.Gh=1,this.nk=this.Eh=2,this.Fh=3,this.Hh=4,this.Ih=5,this.Jh=6,this.Kh=7,this.Lh=8,this.fi=9,this.Mh=10,this.Nh=11,this.Ch=12,this.ob="Japanese",this.Jn="Chinese",this.Kn=0,this.Ln=1}i.g=new e},{}],52:[function(t,i,n){"use strict";function e(t){return"\n"!==t.slice(-1)?0:"\r\n"!==t.slice(-2)?1:2}n.Ci=function(t){return t.name||t.toString().split(/ |\(/,2)[1]},n.clone=function(t){if(null===t||void 0===t)return t;var i;if(t instanceof Array){i=[];for(var n=0,e=t.length;n<e;n++)i[n]=t[n]}else{if("object"!=typeof t)throw new Error("clone called on "+typeof t);if("function"==typeof t.clone)return t.clone();i={};for(var r in t){var o=t[r];"function"!=typeof o&&(i[r]=o)}}return i},String.prototype.bd=function(t){if(void 0===t)return this.substr(0,this.length-e(this));var i=this.length-t.length;return this.substr(i)===t?this.substr(0,i):this.toString()},String.prototype.ve=function(t){if(void 0===t)t=e(this)||1;else if("number"!=typeof t)throw new Error("Invalid parameter type for String.count: "+typeof t);return this.substr(0,this.length-t)},String.prototype.startsWith||(String.prototype.startsWith=function(t){return this.substr(0,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t){return this.substr(this.length-t.length)===t}),String.prototype.format=function(t){if("%"!==this[0])throw new Error("Invalid format: "+this.toString());var i,n=this.slice(1,-1),e=0,r=this.slice(-1);switch(r){case"d":case"x":var o=" ";"0"===n[e]&&(e++,o="0");var s=parseInt(n.substr(e));i=t.toString("x"===r?16:10);for(var h=s-i.length;h>0;h--)i=o+i;return i;case"f":var a="";if("+"===n[e]&&(e++,t>0&&(a="+")),"."!==n[e++])break;var u=parseInt(n.substr(e));return a+t.toFixed(u)}throw new Error("Unknown format: "+this.toString())},String.prototype.Tg=function(t,i){return this>=t&&this<=i},n.Mn=function(t,i){for(var n=new Array(t),e=t-1;e>=0;e--)n[e]=i;return n},n.de=function(t,i,e){for(var r=new Array(t),o=r[0]=n.Mn(i,e),s=t-1;s>=1;s--)r[s]=o.concat();return r},Array.new=function(t,i){if(void 0===t)return[];if(void 0===i)return new Array(t);var n,e=[];if("function"==typeof i)for(n=0;n<t;n++)e[n]=i(n);else for(n=0;n<t;n++)e[n]=i;return e},Array.prototype.Nn=function(t){for(var i=this.length,n=0;n<t.length;n++){var e=t[n];this.indexOf(e)===-1&&this.push(e)}return this.length-i}},{}],53:[function(t,i,n){"use strict";function e(t){this.options=t,this.On=[],this.parent=document.body,this.Pn=o.Qn(null,"contextMenu")}function r(){this.contextMenu.Rn(),this.Sn&&this.Sn.call(this,this.name)}t("./contextMenu.less");var o=t("./Dome"),s=t("./getText"),h=t("./PopupDlg"),a=t("./tapBehavior");i.g=e,e.prototype.Tn=function(t,i,n){var e=n&&n.name,s=n&&n.Un,h="menuItem"+(e?" "+e:""),u=o.Qn(this.Pn,h);return s&&u.Qn("icon"),u.Qn("text").Vn(t),u.name=e,u.Sn=i,u.contextMenu=this,a(u,r),this.On.push(u),u},e.prototype.Wn=function(t,i,n){var e;this.options&&this.options.Xn?e=this.Rn.bind(this):this.Tn(s("#cancelAction"),null),h.Yn(this.Pn,this.parent,e);var r=o.Zn(t),a=o.Zn(this.Pn);a.$n(r,i,n),o._n(a),this.Pn.ao("left",a.left+"px"),this.Pn.ao("top",a.top+"px")},e.prototype.Rn=function(){h.bo(this.Pn)}},{"./Dome":54,"./PopupDlg":60,"./contextMenu.less":65,"./getText":67,"./tapBehavior":71}],54:[function(t,i,n){"use strict";function e(t,i,n,r){this.type=i;var o=this.co=document.createElement(i);this.name=r,this.eo=!1,n&&(o.className=n),p&&p.fo(o,n),t&&(t instanceof e?t.co:t).appendChild(o),l&&l.add(r||n,this)}function r(){var t=document.documentElement.clientWidth,i=document.documentElement.clientHeight;i===d&&(i+=g),s=new a(0,0,t,i),e.ho=t,e.io=i}function o(){this.Lo={}}var s,h=t("./fileHelper"),a=t("./Rect"),u=t("./tapBehavior"),c=null,p=null,l=null,f=1,d=1456,g=159;i.g=e,e.init=function(t,i){p=t,c=i,r()},e.prototype.jo=function(t,i){return(t instanceof e?t.co:t).appendChild(this.co),this.eo=i,c&&i&&c.addElement(this.co),this},e.prototype.appendChild=function(t,i){return t.jo(this,i)},e.removeChild=function(t,i){i&&(c&&i.eo&&c.ko(i.co),t instanceof e&&(t=t.co),t.removeChild(i.co))},e.prototype.removeChild=function(t){e.removeChild(this,t)},e.prototype.lo=function(){return this.co.childElementCount},e.prototype.mo=function(){this.co.innerHTML=null},e.prototype.Vn=function(t){return this.co.textContent=t,this},e.prototype.no=function(t){return this.co.innerHTML=t,this},e.prototype.setAttribute=function(t,i){return this.co.setAttribute(t,i),this},e.prototype.ao=function(t,i){return this.co.style[t]=i,this},e.prototype.oo=function(t){return t===this.po()?this:(this.co.style.display=t?"":"none",this.qo=!!t,c&&this.eo&&(t?c.addElement(this.co):c.ko(this.co)),this)},e.prototype.po=function(){return this.qo||void 0===this.qo},e.prototype.ro=function(t){return this.co.disabled=!t,this.so("disabled",!t),this},e.prototype.text=function(){return this.co.textContent},e.prototype.to=function(){return this.co.innerHTML},e.prototype.value=function(){return this.co.value},e.prototype.uo=function(){return this.co.checked},e.prototype.vo=function(){return this.co},e.prototype.clear=function(){this.co.innerHTML=""},e.prototype.v=function(t,i){var n=this;this.co.addEventListener(t,function(t){i.call(n,t)})},e.prototype.so=function(t,i){var n=this.co,e=n.className,r=" "+e+" ",o=" "+t+" ",s=r.indexOf(o);if(i){if(s>=0)return;p&&p.toggle(n,t,i),n.className=e+" "+t}else{if(s<0)return;n.className=r.replace(o," ").trim(),p&&p.toggle(n,t,i)}},e.prototype.wo=function(){this.co.scrollTop=this.co.scrollHeight},e.Qn=function(t,i,n){return new e(t,"div",i,n||i)},e.prototype.Qn=function(t,i){return new e(this,"div",t,i||t)},e.xo=function(t,i,n,r){var o=new e(t,"button",i+"Button",i);return n&&(o.co.innerText=n),o.v("click",r),o},e.yo=function(t,i,n,r){var o=new e(t,"div","btn "+i,i);return n&&(o.zo=o.Qn(i+"Text btnText").Vn(n)),u(o,r),o},e.prototype.Ao=function(t){this.zo.Vn(t)},e.Bo=function(t,i,n,r){var o=e.yo(t,i,r,n);return o.Qn(i+"Icon btnIcon"),o},e.Co=function(t,i,n,r){var o=new e(t,"a",i,i);return o.setAttribute("href",r),o.Vn(n),o},e.Do=function(t,i,n){return new e(t,"div",i,i).Vn(n)},e.Eo=function(t){return new e(t,"br")},e.Fo=function(t,i,n,r){var o=i+"Label";e.Do(t,o+" inputLbl",n,o);var s=new e(t,"input",i+"Input inputBox",i);return void 0!==r&&(s.co.value=r),s},e.Go=function(t,i,n,r,o){var s=new e(t,"div",i+"Div chkBoxDiv"),h=new e(s,"input",i+"ChkBox chkBox",i),a=h.co;return a.type="checkbox",a.name=i,void 0!==r&&(a.value=r),a.id=i+"ChkBox"+(void 0!==r?r:f++),o&&(a.checked=!0),new e(s,"label",i+"ChkLabel chkLbl",i).Vn(n).setAttribute("for",a.id),h},e.Ho=function(t,i,n,r,o){r||(r=n);for(var s=[],h=0;h<n.length;h++){var a=s[h]=new e(t,"input",i+"RadioBtn radioBtn",i),u=a.co;u.type="radio",u.name=i,u.value=r[h],u.id=i+"Radio"+r[h],r[h]===o&&(u.checked=!0),new e(t,"label",i+"RadioLbl radioLbl",i).Vn(n[h]).setAttribute("for",u.id)}return s},e.Io=function(t){for(var i=0;i<t.length;i++)if(t[i].co.checked)return t[i].co.value},e.Jo=function(t,i,n,r,o){if(r||(r=n),"byIndex"===r)for(r=[],a=0;a<n.length;a++)r.push(a);var s=new e(t,"select",i+"DropDwn dropDwn",i);s.values=r;for(var h=0,a=0;a<n.length;a++){var u=new e(s,"option").co;u.value=r[a],u.textContent=n[a],r[a]===o&&(h=a)}return s.co.selectedIndex=h,s},e.prototype.select=function(t){var i=this.values.indexOf(t);i!==-1&&(this.co.selectedIndex=i)},e.Zn=function(t){var i=(t.co||t).getBoundingClientRect();return 0===i.width&&0===i.height&&console.error("newRect on invisible element",t),new a(i.left,i.top,i.width,i.height)},e._n=function(t){t.Ko(s,10)},e.Mo=function(){return l=new o},e.No=function(){l=null},o.prototype.add=function(t,i){this.Lo[t]=i},o.prototype.get=function(t){return this.Lo[t]},o.prototype.ro=function(t,i,n){"ALL"===t&&(t=Object.keys(this.Lo));for(var e=0;e<t.length;e++)if(!n||n.indexOf(t[e])===-1){var r=this.Lo[t[e]];r?r.ro(i):console.error("Invalid control name:",t[e])}},o.prototype.oo=function(t,i,n){"ALL"===t&&(t=Object.keys(this.Lo));for(var e=0;e<t.length;e++)if(!n||n.indexOf(t[e])===-1){var r=this.Lo[t[e]];r?r.oo(i):console.error("Invalid control name:",t[e])}},e.Oo=function(t){document.head.getElementsByTagName("title")[0].textContent=t},e.Po=function(){var t=window.getSelection();if(!t.rangeCount)return null;var i=t.getRangeAt(0),n=i.startContainer.data;return n?n.substring(i.startOffset,i.endOffset):null},e.Qo=function(t,i,n){var e=new Blob([t],{type:n||"text/plain"}),r=document.createElement("a");r.href=URL.createObjectURL(e),r.download=i,r.click()},e.prototype.Ro=function(){var t=this.co.files;return t&&t.length>0},e.prototype.So=function(t){var i=this.co.files;return i?!!i.length&&(h.To(i[0],t),!0):console.error("Invalid field type for uploadFile: "+this.type)}},{"./Rect":61,"./fileHelper":66,"./tapBehavior":71}],55:[function(t,i,n){"use strict";function e(){}var r;i.g=e,e.Uo=function(t){r=t},e.Vo=function(t,i){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==~~n.readyState){if(200!=~~n.status){var e;return e=0===n.status?r("#noInternet"):r("#httpReqError",n.status,t),console.error(e),i(e)}i(null,n.response)}},n.open("GET",t,!0),n.send()},e.Wo=function(t,i){return e.Vo("./assets/"+t,i)},e.Qo=function(t,i){return e.Vo(t,i)}},{}],56:[function(t,i,n){"use strict";function e(t){this.Uc=t?"localPref_"+t:"localPref",this.Xo=!1,this.Yo=null,this.map={},this.Zo=this.$o.bind(this),this._o=console.error}i.g=e,e.prototype.ap=function(t){this._o=t},e.prototype.bp=function(){if(!this.cp(this.Uc)){var t=window.localStorage.getItem("currentVersion");this.cp(t)&&(this.Xo=!0)}},e.prototype.dp=function(){this.Yo&&this.$o()},e.prototype.ep=function(){this.Yo||(this.Yo=window.setTimeout(this.Zo,6e4))},e.prototype.cp=function(t){try{var i=window.localStorage.getItem(t);return!!i&&(this.map=JSON.parse(i),!0)}catch(t){this._o("Cannot load local preferences: "+t)}},e.prototype.$o=function(){window.clearTimeout(this.Yo),this.Yo=null;try{window.localStorage.setItem(this.Uc,JSON.stringify(this.map)),this.Xo&&(window.localStorage.setItem("currentVersion",this.Uc),this.Xo=!1)}catch(t){this._o("Cannot save local preferences: "+t)}},e.prototype.Qc=function(t,i){var n=this.map[t];return void 0!==n?n:i},e.prototype.Oc=function(t,i){this.map[t]=i,this.ep()}},{}],57:[function(t,i,n){"use strict";function e(){this.level=NaN,this.fp=null,this.Pi=o,this.Ij=s,this.gp=h,this.ERROR=a,this.hp=u,this.ip=!1,this.Ne=!1}var r=console,o=0,s=1,h=2,a=3,u=4;i.g=e,e.prototype.Oi=function(t){t!==this.level&&(this.level=t,this.debug=t<=o?this.jp:null,this.info=t<=s?this.ah:null,this.warn=t<=h?this.un:null,this.error=t<=a?this.kp:null,this.fatal=t<=u?this.lp:null)},e.prototype.mp=function(t){this.fp=t},e.prototype.jp=function(t){this.np(o,r.debug,t)},e.prototype.ah=function(t){this.np(s,r.info,t)},e.prototype.un=function(t){this.np(h,r.warn,t)},e.prototype.kp=function(t){this.np(a,r.error,t)},e.prototype.lp=function(t){this.np(u,r.error,t)},e.prototype.np=function(t,i,n){t<this.level||this.fp&&!this.fp(t,n)||i.call(r,n)}},{}],58:[function(t,i,n){"use strict";function e(t,i,n){this.parent=t=t||document.body,n=n||{};var e="notifPopup"+(n.className?" "+n.className:""),h=this.op=r.Qn(null,e).oo(!1);n.title&&h.Qn("title").Vn(n.title),n.pp&&(this.qp=r.yo(h,"closeBtn",o("#close"),this.close.bind(this))),this.content=h.Qn("content"),this.po=!1,this.rp=n.rp,this.rp?s.Yn(this.op,this.parent):h.jo(t),i&&(this.sp(i),this.show())}t("./notificationPopup.less");var r=t("./Dome"),o=t("./getText"),s=t("./PopupDlg"),h=t("./Transit");i.g=e,e.prototype.tp=function(t){this.qp&&this.qp.oo(t)},e.prototype.sp=function(t,i){var n=this.content.Qn("msg").Vn(t);void 0!==i&&n.so("level"+i,!0),this.content.wo()},e.prototype.close=function(){this.hide()},e.prototype.clear=function(){this.content.mo()},e.prototype.show=function(){this.po||(this.po=!0,this.op.oo(!0),s.up(this.op))},e.prototype.hide=function(){this.po&&(this.po=!1,this.rp?s.bo(this.op):new h(this.op).from("opacity",1).vp("opacity",0).start(500))}},{"./Dome":54,"./PopupDlg":60,"./Transit":64,"./getText":67,"./notificationPopup.less":69}],59:[function(t,i,n){"use strict";function e(){this.wp={},this.xp=null,this.yp=""}function r(t,i){for(var n in i)t.style[n]=i[n]}function o(t,i,n,e){var r,o=n[i],s=e[i];if(o)for(r in o)t.style[r]=s?s[r]||null:null;if(s)for(r in s)t.style[r]=s[r]}i.g=new e,e.prototype.zp=function(t,i){this.wp=t,this.Ap(i,!0),this.fo(document.body,"body")},e.prototype.Bp=function(){return Object.keys(this.wp)},e.prototype.Ap=function(t,i){if(t!==this.yp){var n=this.xp;if(this.yp=t,this.xp=this.wp[t],!i)for(var e=document.all,r=0;r<e.length;r++){var o=e[r];this.Cp(o,n)}}},e.prototype.fo=function(t,i){if(this.xp){var n=this.xp[t.localName];if(n&&r(t,n),i&&(n=this.xp["."+i],n&&r(t,n),i.indexOf(" ")>=0))for(var e=i.split(" "),o=0;o<e.length;o++)(n=this.xp["."+e[o]])&&r(t,n)}},e.prototype.Cp=function(t,i){o(t,t.localName,i,this.xp);for(var n=t.className.split(" "),e=0;e<n.length;e++)o(t,"."+n[e],i,this.xp)},e.prototype.Dp=function(t,i,n){var e=this.xp[i+"+"+n];if(e){var r=this.xp[i]||{};for(var o in e)t.style[o]=r[o]||null}},e.prototype.toggle=function(t,i,n){if(this.xp){var e,o=t.className.split(" ");if(n){var s=this.xp[t.localName+"+"+i];for(s&&r(t,s),e=0;e<o.length;e++)(s=this.xp["."+o[e]+"+"+i])&&r(t,s)}else for(this.Dp(t,t.localName,i),e=0;e<o.length;e++)this.Dp(t,"."+o[e],i)}}},{}],60:[function(t,i,n){"use strict";function e(){var t=this.Ep;t.options&&(t.options.Fp=this.id),o.bo(t.op),t.Gp&&t.Gp(t.options)}function r(t,i,n,r){var o=h.yo(t,"popupDlgBtn",n,e);o.Ep=i,o.id=r}function o(t,i,n,e,s){this.parent=t||document.body,this.options=e,this.Gp=s;var u=this.op=h.Qn(null,"popupDlg dialog");u.Qn("dialogTitle").Vn(n||a("#problem"));var c=u.Qn("content");h.Do(c,"message",i);for(var p=e&&e.buttons||[a("#ok")],l=u.Qn("btnDiv"),f=0;f<p.length;f++)r(l,this,p[f],f);o.Yn(this.op,this.parent)}function s(t){var i=h.Qn(null,"popupOverlay");return t&&(t=t.co||t,i.ao("left",t.offsetLeft+"px"),i.ao("top",t.offsetTop+"px"),i.ao("width",t.scrollWidth+2+"px"),i.ao("height",t.scrollHeight+2+"px")),i}t("./popupDlg.less");var h=t("./Dome"),a=t("./getText"),u=t("./tapBehavior"),c=t("./Transit");i.g=o,o.Yn=function(t,i,n){var e=t.Hp=s(i);e.parent=i,e.jo(i),t.jo(e,!0),e.ao("opacity",1),n&&u(e,n)},o.bo=function(t){var i=t.Hp;if(!i.parent)return console.error("Already detached overlay",t);i.ao("opacity",0),window.setTimeout(function(n){t.oo(!1),h.removeChild(n,i)},300,i.parent),i.parent=null},o.Ip=function(t,i,n,e){var r={buttons:[a("#yes"),a("#no")]};new o(t,i,a("#confirmTitle"),r,function(t){0===t.Fp&&n(e)})},o.up=function(t){new c(t).from("opacity",0).vp("opacity",1).start(500)}},{"./Dome":54,"./Transit":64,"./getText":67,"./popupDlg.less":70,"./tapBehavior":71}],61:[function(t,i,n){"use strict";function e(t,i,n,e){this.left=t,this.top=i,this.width=n,this.height=e}i.g=e,e.prototype.$n=function(t,i,n){var e=t.left,r=t.top;switch(i){case 1:e+=t.width+15;break;case-1:e+=-this.width-15;break;case void 0:case 0:e+=t.width/2-this.width/2;break;default:e+=i*t.width}switch(n){case 1:r+=t.height+15;break;case void 0:case-1:r+=-this.height-15;break;case 0:
r+=t.height/2-this.height/2;break;default:r+=n*t.height}this.left=Math.round(e),this.top=Math.round(r)},e.prototype.Ko=function(t,i){var n=Math.max(Math.min(this.left,t.width-this.width-i),i),e=Math.max(Math.min(this.top,t.height-this.height-i),i);this.left=Math.round(n),this.top=Math.round(e)}},{}],62:[function(t,i,n){"use strict";function e(t){this.Jp={},this.Kp=t.Kp,this.Lp=t.Lp,this.Mp(t),this.Np()}function r(){this.Up.Pp()}function o(){this.removeEventListener(c.gq,o),this.hq.Hp.oo(!1)}t("./topMenu.less");var s=t("./Dome"),h=t("./tapBehavior"),a=t("./TopMenuOption"),u=t("./touchManager"),c=t("./Transit");i.g=e,e.prototype.Op=function(){this.Pp()},e.prototype.Qp=function(){return this.Rp.co.clientHeight},e.prototype.Sp=function(t){this.Tp.Vn(t)},e.prototype.Vp=function(t){return this.Wp.Qn(t||"menuSeparator")},e.prototype.Xp=function(t,i,n){var e=new a(this,t,i,n);return this.Jp[t]=e,e},e.prototype.Yp=function(t){this.Pp(),this.Kp(t)},e.prototype.Tn=function(t){return this.Wp.appendChild(t)},e.prototype.removeItem=function(t){this.Wp.removeChild(t)},e.prototype.Mp=function(t){var i=this.Hp=s.Qn(null,"topMenuOverlay");i.Up=this,i.oo(!1),i.ao("opacity",0),i.jo(document.body),h(i,r);var n=s.Qn(null,"topMenu"),e=this.Rp=s.Qn(n,"menuBtn");e.Qn("menuBtnIcon btnIcon"),h(e,this.Zp.bind(this)),this.Tp=n.Qn("topTitle"),this.width=~~(.85*s.ho);var o=this.$p=n.Qn("slideMenu"),a=this.Wp=o.Qn("menuContent");a.ao("width",this.width+"px"),a.ao("minHeight",s.io+"px"),o.Qn("sideHandle").ao("height",s.io+"px");var u=a.Qn("menuTitle").Qn("text").Vn(t._p);h(u,this.Pp.bind(this)),this.aq(-this.width),n.jo(document.body)},e.prototype.aq=function(t){this.bq=t,this.$p.ao(c.cq,"translate3D("+t+"px,0,0)")},e.prototype.dq=function(t){var i=Math.max(50,~~(Math.abs(t-this.bq)/this.width*300));this.$p.ao(c.eq,c.fq+" "+i+"ms ease-out"),this.aq(t)},e.prototype.Zp=function(){var t=!1;if(this.Hp.po()||(t=!0,this.Hp.oo(!0)),this.Lp&&t){var i=this.Hp.co.clientWidth;i++,this.Hp.ao("opacity",.7)}this.dq(0)},e.prototype.Pp=function(){this.Lp&&this.Hp.ao("opacity",0),this.$p.co.addEventListener(c.gq,o),this.$p.co.hq=this,this.dq(-this.width)},e.prototype.Np=function(){var t,i,n,e,r=this;u.iq(this.$p.co,function(o,s){switch(o){case"dragStart":return t=s,i=n=r.bq,e=i<0?-1:1,r.$p.ao(c.eq,null),void r.Hp.oo(!0);case"drag":var h=i+(s-t);if(h===n)return;return e=h-n,h>0&&(h=0),n=h,r.aq(h),void(r.Lp&&r.Hp.ao("opacity",.7*(1+h/r.width)));case"dragEnd":return void(e>0?r.Zp():r.Pp());case"tap":return r.Pp();default:console.error("TopMenu received: "+o)}},{jq:!0,kq:0})}},{"./Dome":54,"./TopMenuOption":63,"./Transit":64,"./tapBehavior":71,"./topMenu.less":72,"./touchManager":73}],63:[function(t,i,n){"use strict";function e(t,i,n,e){var s=this.lq=t.Wp.Qn("menuOption "+i);s.mq=this,e&&s.Qn("icon"),this.label=s.Qn("label").Vn(n),this.Up=t,this.id=i,o(s,r)}function r(){var t=this.mq;t.Up.Yp(t.id)}var o=t("./tapBehavior");i.g=e,e.prototype.oo=function(t){this.lq.oo(t)},e.prototype.Vn=function(t){this.label.Vn(t)}},{"./tapBehavior":71}],64:[function(t,i,n){"use strict";function e(t){this.co=t.co||t,this.nq={},this.oq={},this.pq={},this.timeout=null,this.qq=null,this.rq=null}function r(t,i){window.clearTimeout(t.timeout),t.timeout=null,t.co.style[e.eq]=t.qq,!i&&t.rq&&t.rq(),t.rq=null}i.g=e,e.prototype.from=function(t,i){return this.oq[t]=i,this},e.prototype.vp=function(t,i){return this.pq[t]=i,this},e.prototype.start=function(t,i){var n=this.co;n.sq&&n.sq.timeout&&r(n.sq,!0),n.sq=this,this.qq=n.style[e.eq],n.style[e.eq]=null;for(var o in this.oq)this.nq[o]=n.style[o],n.style[o]=this.oq[o];n.clientHeight||(n=n),n.style[e.eq]="all "+t+"ms ease-in-out";for(o in this.pq)this.nq.hasOwnProperty(o)||(this.nq[o]=n.style[o]),n.style[o]=this.pq[o];return this.rq=i,this.timeout=window.setTimeout(r,t,this),this},e.prototype.reverse=function(t,i){var n=this.pq;this.pq=this.oq,this.oq=n,this.start(t,i)},e.prototype.tq=function(t,i){this.pq=this.nq,this.nq={},this.oq={},this.start(t,i)},function(){void 0===document.body.style.webkitTransition?(e.eq="transition",e.gq="transitionend",e.cq="transform",e.fq="transform"):(e.eq="webkitTransition",e.gq="webkitTransitionEnd",e.cq="webkitTransform",e.fq="-webkit-transform")}()},{}],65:[function(t,i,n){var e=".contextMenu {\n  position: relative;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  cursor: default;\n  width: 150px;\n  background-color: rgba(120, 120, 120, 0.2);\n  border-radius: 7px;\n  border: 1px solid #58636d;\n}\n.contextMenu .menuItem {\n  position: relative;\n  height: 3em;\n  max-height: 8vh;\n  margin: 1px 1px 0 1px;\n  padding: 10px;\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.7);\n  color: #e4e4e4;\n}\n.contextMenu .menuItem .icon {\n  position: absolute;\n  top: 8px;\n  left: 0;\n  width: 20%;\n  height: calc(100% - 16px);\n  background-position: 50%;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n.contextMenu .menuItem .text {\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n";t("lessify")(e),i.g=e},{"lessify":140}],66:[function(t,i,n){"use strict";n.To=function(t,i){var n=new FileReader;n.onloadend=function(){return i(n.result)},n.readAsText(t)}},{}],67:[function(t,i,n){"use strict";function e(t){var i=h[t];if(void 0===i)return"("+t+")";if(arguments.length<=1)return i;for(var n=1;n<arguments.length;n++)i=i.replace("%"+n,arguments[n]);return i}var r=t("./GetFile"),o=t("../log"),s=t("../../assets/i18n_en.json"),h=s;i.g=e,e.init=function(t,i){if(r.Uo(e),h=s,"en"===t)return i();var n="i18n_"+t+".json";r.Wo(n,function(t,e){if(t)return o.error("Failed to get file "+n+": "+t),i(t);h=JSON.parse(e),i()})}},{"../../assets/i18n_en.json":5,"../log":75,"./GetFile":55}],68:[function(t,i,n){"use strict";var e=t("./Dome");n.init=function(t,i){e.init(t,i)}},{"./Dome":54}],69:[function(t,i,n){var e=".notifPopup {\n  z-index: 3000;\n  border-radius: 13px;\n  background-color: rgba(0, 0, 0, 0.7);\n}\n.notifPopup .title {\n  height: 100px;\n  line-height: 100px;\n  padding: 0 20px;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  border-radius: 12px;\n  background-color: rgba(77, 77, 77, 0.5);\n  color: #fff;\n  font-size: 38px;\n}\n.notifPopup .closeBtn {\n  position: absolute;\n  top: 0;\n  right: 0;\n  height: 100px;\n  max-height: initial;\n}\n.notifPopup .content {\n  padding: 20px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  font-size: 30px;\n  color: white;\n  height: 300px;\n  overflow-y: scroll;\n}\n.notifPopup .content .level0 {\n  color: #888;\n}\n.notifPopup .content .level1 {\n  color: #0a0;\n}\n.notifPopup .content .level2 {\n  color: #fb0;\n}\n.notifPopup .content .level3 {\n  color: #c00;\n}\n.notifPopup .content .msg {\n  max-height: 999999px;\n}\n";t("lessify")(e),i.g=e},{"lessify":140}],70:[function(t,i,n){var e=".popupOverlay {\n  z-index: 2000;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.7);\n  transition: opacity 300ms ease-out;\n  opacity: 0;\n}\n.popupDlg {\n  margin: 0 80px;\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.popupDlg .content {\n  padding: 20px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.popupDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.popupDlg .btnDiv .popupDlgBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n}\n";t("lessify")(e),i.g=e},{"lessify":140}],71:[function(t,i,n){"use strict";var e=t("./touchManager");i.g=function(t,i){e.iq(t.co,function(n){if(!t.co.disabled)return"tap"===n?(i.call(t),!0):void 0})}},{"./touchManager":73}],72:[function(t,i,n){var e='.topMenuOverlay {\n  z-index: 1900;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background-color: #000;\n  -webkit-transition: opacity 300ms ease-out;\n  transition: opacity 300ms ease-out;\n  -webkit-transform: translate3D(0, 0, 0);\n  transform: translate3D(0, 0, 0);\n}\n.topMenu {\n  width: 100%;\n  height: 130px;\n  max-height: 7vh;\n  background-color: #333;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  cursor: default;\n}\n.topMenu .menuBtn {\n  position: relative;\n  display: inline-block;\n  width: 130px;\n  max-width: 7vh;\n  height: 100%;\n  background-color: #000;\n}\n.topMenu .menuBtn .menuBtnIcon {\n  background-image: url("assets/menuBtn.png");\n  -webkit-filter: invert(1) grayscale(1);\n  filter: invert(1) grayscale(1);\n}\n.topMenu .topTitle {\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  display: inline-block;\n  vertical-align: top;\n  width: calc(100% - 130px);\n  overflow: hidden;\n  color: #fff;\n  padding-left: 1em;\n  font-size: 30px;\n}\n.topMenu .slideMenu {\n  z-index: 1901;\n  position: absolute;\n  top: 0;\n}\n.topMenu .sideHandle {\n  width: 10px;\n  display: inline-block;\n  vertical-align: top;\n}\n.topMenu .menuContent {\n  display: inline-block;\n  overflow-x: hidden;\n  background-color: #000;\n  color: #fff;\n}\n.topMenu .menuTitle {\n  height: 140px;\n  max-height: 10vh;\n  padding-left: 50px;\n  font-size: 45px;\n  border-bottom: 1px solid #909090;\n  background-color: #323435;\n}\n.topMenu .menuTitle .text {\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.topMenu .menuOption {\n  position: relative;\n  padding: 0 140px;\n  height: 140px;\n  max-height: 8vh;\n  font-size: 45px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.topMenu .menuOption .icon {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 140px;\n  height: 100%;\n  background-size: auto 70%;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n.topMenu .menuOption .label {\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.topMenu .menuSeparator {\n  border-bottom: 1px solid #777;\n}\n';t("lessify")(e),i.g=e},{"lessify":140}],73:[function(t,i,n){"use strict";function e(){this.uq=this.vq=0,this.wq=this.xq=!1,this.startTime=this.yq=0,this.zq=[],this.Aq=0,this.Bq=null,this.Cq=!1,r()}function r(){window.addEventListener("mousemove",function t(){d.Cq=!0,window.removeEventListener("mousemove",t)})}function o(t){if(d.wq)return d.Dq();d.Eq(t.changedTouches[0],t,t.currentTarget)}function s(t){d.Fq(t.changedTouches[0],t)}function h(t){if(t.changedTouches.length>1)return d.Dq();d.Gq(t.changedTouches[0],t)}function a(){d.Dq()}function u(t){t.button===f&&d.Eq(t,t,t.currentTarget)}function c(t){t.button===f&&d.Fq(t,t)}function p(t){d.Gq(t,t)}function l(t,i,n){i.Iq&&(i.Kq=null,t.Qq(i,n))}var f=0,d=i.g=new e;e.prototype.Hq=function(t){this.zq.push(t),this.Aq++,t.Iq=!0,t.addEventListener("touchmove",h),t.addEventListener("touchend",s),t.addEventListener("touchcancel",a),1===this.Aq&&(document.addEventListener("mousemove",p),document.addEventListener("mouseup",c))},e.prototype.Jq=function(t){var i=this.zq.indexOf(t);if(i<0)return console.error("_stopListening: not a target",t);this.zq[i]=null,this.Aq--,t.Iq=!1,t.Kq&&window.clearTimeout(t.Kq),t.removeEventListener("touchmove",h),t.removeEventListener("touchend",s),t.removeEventListener("touchcancel",a),0===this.Aq&&(document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",c),this.zq.length=0)},e.prototype.Lq=function(){this.Mq(null)},e.prototype.Mq=function(t){for(var i=0;i<this.zq.length;i++){var n=this.zq[i];n&&n!==t&&this.Jq(n)}this.Bq=t},e.prototype.Eq=function(t,i,n){this.xq&&this.Nq(),this.Hq(n),this.uq=t.clientX,this.vq=t.clientY,this.startTime=Date.now();var e=n.Oq;if(e.jq&&!this.wq){var r=e.Pq;0===r?i.preventDefault():e.Kq=window.setTimeout(l,r,this,n,t)}},e.prototype.Gq=function(t,i){var n=Date.now();if(n-this.yq<50)return i.preventDefault();this.yq=n;var e;if(this.wq)return e=this.Bq.Oq,e.Rq("drag",t.pageX-e.Sq,t.pageY-e.Tq),i.preventDefault();for(var r=Math.abs(t.clientX-this.uq)+Math.abs(t.clientY-this.vq),o=0;o<this.zq.length;o++){var s=this.zq[o];if(s&&(e=s.Oq,!(r<e.Uq)))if(e.jq){if(!(n-this.startTime<e.Pq)){this.Qq(s,t);break}this.Jq(s)}else this.Jq(s)}i.preventDefault()},e.prototype.Fq=function(t,i){i.preventDefault();var n,e;if(this.xq=!0,this.wq){n=this.Bq,e=n.Oq;if(Date.now()-this.startTime<e.Vq)return this.Dq();this.wq=!1,this.Jq(n),e.Rq("dragEnd",t.pageX-e.Sq,t.pageY-e.Tq)}else{for(var r=0;r<this.zq.length&&(!(n=this.zq[r])||(e=n.Oq,!e.Rq("tap",t.pageX-e.Sq,t.pageY-e.Tq)));r++);this.Lq()}this.xq=!1},e.prototype.Nq=function(){console.warn("Cleaning up touchManager"),this.xq=!1,this.Lq()},e.prototype.Qq=function(t,i){this.wq=!0,this.startTime=Date.now(),this.Mq(t);var n=t.Oq;n.Rq("dragStart",i.pageX-n.Sq,i.pageY-n.Tq)},e.prototype.Dq=function(){this.wq&&(this.wq=!1,this.Bq.Oq.Rq("dragCancel")),this.Lq()},e.prototype.iq=function(t,i,n){n=n||{};var e={Rq:i,Uq:void 0!==n.Wq?n.Wq:10};n.jq&&(e.jq=!0,e.Pq=n.Xq||0,e.Vq=void 0!==n.kq?n.kq:100,e.Sq=t.offsetLeft,e.Tq=t.offsetTop),t.Oq=e,t.addEventListener("touchstart",o),t.addEventListener("mousedown",u)}},{}],74:[function(t,i,n){"use strict";function e(t){return decodeURIComponent(t.replace(o," "))}var r=/([^&=]+)=?([^&]*)/g,o=/\+/g;n.Yq=function(t){t=(t||window.location.search).substring(1);for(var i={};;){var n=r.exec(t);if(!n)break;i[e(n[1])]=e(n[2])}return i},n.Zq=function(t){var i=document.createElement("a");i.href=t,i.click()}},{}],75:[function(t,i,n){"use strict";var e=t("./hh/Logger"),r=new e;r.Oi(r.Ij),i.g=r},{"./hh/Logger":57}],76:[function(t,i,n){"use strict";function e(){this.appName=r.name,this.appVersion=r.version,this.$q=null,this._q=null}var r=t("../package.json");i.g=new e},{"../package.json":146}],77:[function(t,i,n){"use strict";function e(){var t=window.location;return t.protocol+"//"+t.host+t.pathname}function r(t){this.er=t,this.gr=null,this.files=null,this.hr=null}var o=t("Dropbox"),s=t("../hh/fileHelper"),h=t("../hh/getText"),a=t("../../config/net.json"),u=t("../hh/PopupDlg"),c=t("../hh/urlHelper");n.ar=function(t){var i=c.Yq(window.location.hash);if(i["error"])return t.Oc("dbxToken",null),new u(null,i["error_description"],h("#problem")+": "+i["error"],{},function(){t.dp(),c.Zq(e())}),!1;var n=i["access_token"];return!!n&&(t.Oc("dbxToken",n),t.dp(),c.Zq(e()),!0)},n.br=function(t){var i=t.Qc("dbxToken");return i?new r(i):null},n.cr=function(){var t=new o({"clientId":a["dropbox-clientId"]}),i=t.dr(e());c.Zq(i)},r.prototype.connect=function(t){this.gr||(this.gr=new o({"accessToken":this.er})),this.ir("",t)},r.prototype.ir=function(t,i){if(!this.gr)return i(h("#noDropbox"));var n=this;this.gr.jr({"path":t}).then(function(t){var e=t["entries"];n.files={};for(var r=0;r<e.length;r++)n.kr(e[r]);i()}).catch(i)},r.prototype.kr=function(t){var i=t["path_display"];"file"!==t[".tag"]?this.files[i]={path:i,lr:!0}:this.files[i]={path:i,timestamp:t["server_modified"]}},r.prototype.mr=function(t){if("/"!==(t=t||"/"))throw new Error("Unsupported call to getNumEntries + path");return this.hr=Object.keys(this.files),this.hr.length},r.prototype.nr=function(t){var i=this.hr[t];return i?{path:i,timestamp:this.files[i].timestamp}:null},r.prototype.Qo=function(t,i){if(!this.gr)return i(h("#noDropbox"));this.gr.or({"path":t}).then(function(t){s.To(t["fileBlob"],function(n){i(null,n,t["server_modified"])})}).catch(i)},r.prototype.So=function(t,i,n){if(!this.gr)return n(h("#noDropbox"));var e=new Blob([i],{type:"text/plain"}),r=this;this.gr.pr({"path":t,"contents":e,"mode":{".tag":"overwrite"},"mute":!0}).then(function(i){var e=i["server_modified"];r.files[t]={timestamp:e},n(null,e)}).catch(n)},r.prototype.qr=function(t,i){if(!this.gr)return i(h("#noDropbox"));var n=this;this.gr.rr({"path":t}).then(function(){n.files[t]={lr:!0},i()}).catch(i)},r.prototype.sr=function(t,i){if(!this.gr)return i(h("#noDropbox"));var n=this;this.gr.tr({"path":t}).then(function(){delete n.files[t],i()}).catch(i)},r.prototype.ur=function(t,i,n){if(!this.gr)return n(h("#noDropbox"));var e=this;this.gr.vr({"from_path":t,"to_path":i}).then(function(){e.files[i]=e.files[t],delete e.files[t],n()}).catch(n)}},{"../../config/net.json":8,"../hh/PopupDlg":60,"../hh/fileHelper":66,"../hh/getText":67,"../hh/urlHelper":74,"Dropbox":109}],78:[function(t,i,n){"use strict";function e(t,i,n,e){this.ec=t,this.wr=i,this.ff=n,this.xr=e,this.yr=null,this.zr=this.Ar=null}function r(t){return"/"+t}function o(t){return f+"/"+t}function s(t){return new Date(t).toISOString().substring(0,19)+"Z"}function h(t){return new Date(t).getTime()}var a=t("contra"),u=t("../GameInVault"),c=t("../GameVault").xc,p=t("../hh/getText"),l=t("../log"),f="/archivedGames";i.g=e,e.prototype.connect=function(t){this.yr={};var i=this;this.wr.connect(function(n){if(n)return i.Br(n,t);i.Cr(t)})},e.prototype.Br=function(t,i){var n=t;"string"==typeof t.error&&(n=t.error,void 0!==t.response&&(n+="\nResponse: "+t.response),void 0!==t.status&&(n+="\nStatus: "+t.status)),this.xr(n,l.ERROR),i(t)},e.prototype.Cr=function(t){for(var i=!1,n=!1,e=this.wr.mr(),r=0;r<e;r++){var o=this.wr.nr(r),s=o.path;if("/vaultState.json"===s)i=!0;else if(s===f)n=!0;else{var h=s.substr(1);this.yr[h]=o.timestamp}}n||this.wr.qr(f,function(){}),i?this.Dr(t):(this.zr={},this.Ar={},t())},e.Er=s,e.Fr=h,e.prototype.Gr=function(t,i,n){var e=this.ff.Bc(t);if(e===c.yc)return n();if(e===c.ACTIVE)return n();switch(e){case c.zc:var r=this.ff.Dc(t),o=s(r.Xa());i>o?(this.ff.Kc(t),this.xr(p("#unarchived")+t,l.gp),n()):(this.xr(p("#archived")+p("#remote",t),l.Pi),this.Hr(t,o,n));break;case c.Ac:var h=s(this.ff.Cc(t));i>h?(this.xr(p("#undeleted")+t,l.gp),n()):(this.xr(p("#deleted")+p("#remote",t),l.Pi),this.Ir(t,h,n));break;default:throw new Error("Unexpected GameState: "+e)}},e.prototype.Jr=function(t,i){var n=this;this.Kr(r(t),function(e,r,o){if(e)return i(e);n.Lr(r,t,o),n.xr(p("#downloaded")+t,l.Ij),i()})},e.prototype.Kr=function(t,i){this.wr.Qo(t,function(t,n,e){if(t)return self.Br(t,i);var r=[],o=new u;if(!o.Da(n,r))return self.Br(r,i);i(null,o,e)})},e.prototype.Mr=function(t,i){var n=t.Za(),e=this,o=this.yr[n];return o?o===t.Wa()?(this.xr(p("#alreadySync")+n,l.Pi),i()):void this.Or(t,r(n),function(r){if(r)return i(r);e.Nr(t,n,i)}):this.Nr(t,n,i)},e.prototype.Or=function(t,i,n){var e=this;this.Kr(i,function(i,r){if(i)return n(i);var o=[];if(!t.Ma(r,o))return e.Br(o,n);n()})},e.prototype.Nr=function(t,i,n){var e=!!this.yr[i];if(!e){var h=s(t.Xa());if(this.zr[i]>h)return this.ff.Fc(i),this.xr(p("#deleted")+i,l.Pi),n();if(this.Ar[i]>=h)return this.ff.Ic(i),this.xr(p("#archived")+i,l.Pi),n()}var a=this;this.wr.So(r(i),t.za(),function(r,s){return r?a.Br(r,n):(a.Lr(t,i,s),e?(a.xr(p("#synced")+i,l.Ij),n()):a.zr[i]?(a.xr(p("#undeleted")+p("#remote",i),l.gp),delete a.zr[i],a.Pr(n)):a.Ar[i]?(a.xr(p("#unarchived")+p("#remote",i),l.Pi),delete a.Ar[i],a.Pr(function(){a.wr.sr(o(i),n)})):(a.xr(p("#uploaded")+i,l.Pi),void n()))})},e.prototype.Lr=function(t,i,n){this.yr[i]=n,t.Va(n,h(n)),this.ff.tc(t)},e.prototype.Qr=function(t,i,n,e){this.Ar[i]=n,t.Va(n,h(n)),this.ff.Lc(t),this.Pr(e)},e.prototype.Hr=function(t,i,n){this.Ar[t]=i;var e=this;this.Pr(function(){delete e.yr[t],e.wr.ur(r(t),o(t),n)})},e.prototype.Rr=function(t,i){var n=t.Za();if(this.yr[n])return i();var e=t.Wa(),r=this.Ar[n],s=this;if(r===e)return i();var h=o(n);if(!r)return this.zr[n]?i():this.wr.So(h,t.za(),function(e,r){if(e)return i(e);s.xr(p("#uploaded")+p("#archivedGame",n),l.Pi),s.Qr(t,n,r,i)});this.Or(t,h,function(e){if(e)return i(e);s.wr.So(h,t.za(),function(e,r){if(e)return i(e);s.xr(p("#synced")+p("#archivedGame",n),l.gp),s.Qr(t,n,r,i)})})},e.prototype.Sr=function(t,i){var n=this;this.Kr(o(t),function(e,r,o){if(e)return i(e);n.xr(p("#downloaded")+p("#archivedGame",t),l.Pi),n.Qr(r,t,o,i)})},e.prototype.Ir=function(t,i,n){this.zr[t]=i;var e=this;this.Pr(function(){delete e.yr[t],e.wr.sr(r(t),n)})};e.prototype.Dr=function(t){var i=this;this.wr.Qo("/vaultState.json",function(n,e){if(n)return i.Br(n,t);var r=JSON.parse(e);i.zr=r["deletedFiles"]||{},i.Ar=r["archivedFiles"]||{},t()})},e.prototype.Pr=function(t){var i={};i["deletedFiles"]=this.zr,i["archivedFiles"]=this.Ar;var n=JSON.stringify(i);this.wr.So("/vaultState.json",n,t)},e.prototype.Tr=function(t,i){if(t===this.ff.oc())throw new Error("syncOneGame(unsaved)");this.Mr(t,i)},e.prototype.Ur=function(t){if(this.ff.oc())throw new Error("syncAll with unsaved");var i=this;a.Vr([this.Wr.bind(this),this.Xr.bind(this),this.Yr.bind(this),this.Zr.bind(this),this.$r.bind(this)],function(n){if(n)return i.Br(n,t);i.xr(p("#syncDone")),t()})},e.prototype.Wr=function(t){var i=this;a._r.Vr(this.yr,function(t,n,e){i.Gr(n,t,e)},t)},e.prototype.Xr=function(t){var i=this;a._r.Vr(this.ff.vc(),function(t,n){i.Mr(t,n)},t)},e.prototype.Yr=function(t){var i=this;a._r.Vr(this.yr,function(t,n,e){if(i.ff.uc(n))return e();i.Jr(n,e)},t)},e.prototype.Zr=function(t){var i=this;a._r.Vr(this.ff.Ec(),function(t,n){i.Rr(t,n)},t)},e.prototype.$r=function(t){var i=this;a._r.Vr(this.Ar,function(t,n,e){if(i.ff.Bc(n)!==c.yc)return e();i.Sr(n,e)},t)}},{"../GameInVault":10,"../GameVault":13,"../hh/getText":67,"../log":75,"contra":123}],79:[function(t,i,n){"use strict";var e=t("../../config/net.json");n.as=function(t){var i,n=(t.fb("source")||"").toLowerCase(),e=t.fb("place")||"";return n.indexOf("littlegolem")>=0?(i=t.fb("event"),i?{bs:"LittleGolem",id:i}:null):n.indexOf("www.dragongoserver")>=0?(i=n.substr(n.indexOf("gid=")+4),{bs:"DragonGo",id:i}):e.indexOf("online-go.com/game/")>=0?(i=e.substr(e.indexOf("/game/")+6),{bs:"OGS",id:i}):null},n.cs=function(t,i){return e["server-url"]+"getgame?site="+t+"&id="+i},n.ds=function(t){switch(t.bs){case"LittleGolem":return"http://www.littlegolem.net/servlet/sgf/"+t.id+"/game.sgf";case"DragonGo":return"http://www.dragongoserver.net/sgf.php?gid="+t.id+"&owned_comments=1";case"OGS":return"https://online-go.com/api/v1/games/"+t.id+"/sgf";default:return null}};var r={"http://www.littlegolem.com":"LittleGolem","OGS: http://online-go.com/game/":"OGS:","http://www.dragongoserver.net/game.php?gid=":"DragonGo:"};n._a=function(t,i){for(var n in r)i=i.replace(n,r[n]);return"EV"===t&&""+parseInt(i)===i&&(i="EV:"+i),i}},{"../../config/net.json":8}],80:[function(t,i,n){"use strict";function e(){this.debug=!1,this.es=this.tn=!1,this.gs=null,this.hs=null}i.g=new e,e.prototype.js=function(t,i){this.gs=new t,i(this.gs)},e.prototype.assert=function(t,i){if(t!==!0)throw new Error("assertion failed: "+(i||t))}},{}],81:[function(t,i,n){"use strict";function e(){this.ks=null,this.ls=null,this.qb=null,this.Eb=0,this.ms=null,this.cursor={type:"CR",x:0,y:0},this.ns=!1,this.os={type:null,x:0,y:0}}function r(t){switch(t){case-1:return{type:"mini",c:l.B};case-.5:return{type:"outline",c:l.B};case 0:return null;case.5:return{type:"outline",c:l.W};case 1:return{type:"mini",c:l.W};default:return null}}function o(t){switch(t){case a.pe+v:case a.oe+g:return{type:"mini",c:l.B};case a.pe+g:case a.oe+v:return{type:"mini",c:l.W};case a.ne:return{type:"SL",c:"grey"};default:return null}}function s(t){if(null===t)return null;var i=1,n=0,e=2,r=0;if(void 0!==x&&(n=x),void 0!==k&&(e=k),void 0!==A&&(r=A),t===r)return null;for(var o=t.toFixed(e),s=n;s<e;s++)o=o.bd("0");if(o=o.bd("."),"0."===o.substr(0,2)&&(o=o.slice(1)),0===r){if("0"===o||".0"===o)return null;i=t<1?.6:1}return{type:"LB",text:o,scale:i}}var h=t("../constants"),a=t("../Grid"),u=t("../log"),c=t("../Move"),p=t("../hh/touchManager");t("../../lib/wgo.js");var l=window.WGo,f=c.ce,d=c.lb,g=h.nb,v=h.mb,y=h.EMPTY,b=window.devicePixelRatio||1,m={};m[l.B]=v,m[l.W]=g;var w={};w[y]=null,w[v]=l.B,w[g]=l.W;i.g=e,e.prototype.create=function(t,i,n,e){var r=n.Eb;if(this.qb=n,!this.ks||this.Eb!==r){this.Eb=r,e=e||{};var o=e.ps?0:-.23,s={size:r,width:i,section:{top:o,left:o,right:o,bottom:o},coordFontSize:.6};switch(e.background){case"wood":s.background=(window.qs||".")+"/assets/wood1.jpg";break;default:s.background="#c75"}t.clear(),this.ks=new l.rs(t.vo(),s),this.ns=!1,this.os.type=null,e.ps||this.ks.ss(l.rs.ts),this.us()}},e.prototype.us=function(){var t=this;p.iq(this.ks.vs,function(i,n,e){if("dragCancel"===i)return t.ws(-1,-1);"drag"===i.substr(0,4)&&(e-=65*b);var r=t.xs(n,e);switch(n=r[0],e=r[1],i){case"dragStart":case"drag":return t.ws(n,e);case"dragEnd":if(t.ws(-1,-1),Date.now()-t.ys<300)return;return t.zs(n,e);case"tap":return t.zs(n,e)}},{jq:!0,Xq:300,kq:500})},e.prototype.As=function(t){this.Bs=w[t]},e.prototype.ws=function(t,i){var n=this.Cs(t,i);if(this.ns){if(t===this.cursor.x&&i===this.cursor.y)return;this.ks.Ds(this.cursor)}this.ns=n,n&&(this.cursor.x=t,this.cursor.y=i,this.ys=Date.now(),this.ks.Es[t][i][0]?(this.cursor.type="SL",this.cursor.c=void 0):(this.cursor.type=void 0,this.cursor.c=this.Bs),this.ks.Fs(this.cursor))},e.prototype.Gs=function(t,i,n){this.os.type&&this.ks.Ds(this.os),this.os.type=t,t&&(this.os.x=i-1,this.os.y=this.Eb-n,this.ks.Fs(this.os))},e.prototype.Hs=function(t,i,n,e){this.ks.Fs({x:i-1,y:this.Eb-n,type:"LB",text:t,scale:e?1.1:.8})},e.prototype.Cs=function(t,i){return t>=0&&i>=0&&t<this.Eb&&i<this.Eb},e.prototype.zs=function(t,i){var n=t+1,e=this.Eb-i;if(!this.Cs(t,i))return this.ls("!"+(n>=1&&n<=this.Eb?f(n):e));if(this.qb.Kd(n,e)===y){var r=d(n,e);this.ls(r)}},e.prototype.Is=function(t){this.ls=t},e.prototype.xs=function(t,i){var n=this.ks;return t=Math.round((t*b-n.left)/n.Js),i=Math.round((i*b-n.top)/n.Ks),[t,i]},e.prototype.refresh=function(){var t=!1;"regular"!==this.ms&&(this.ms="regular",t=!0);for(var i=0;i<this.Eb;i++)for(var n=0;n<this.Eb;n++){var e=this.qb.Kd(n+1,this.Eb-i),r=w[e],o=this.ks.Es[n][i][0];t&&(o=null,this.ks.Ls(n,i)),null===r?o&&this.ks.Ls(n,i):o&&o.c===r||(o&&this.ks.Ls(n,i),this.ks.Fs({x:n,y:i,c:r}))}},e.prototype.show=function(t,i,n){this.refresh(),this.ms=t;for(var e=0;e<this.Eb;e++)for(var r=0;r<this.Eb;r++){var o=n(i[this.Eb-e][r+1]);o&&(o.x=r,o.y=e,this.ks.Fs(o))}};var x,k,A;e.prototype.Ms=function(t,i,n){x=t,k=i,A=n};var j={sk:r,Ns:o,value:s};e.prototype.Os=function(t,i){var n=j[t];if(!n)return u.error&&u.error("invalid display type: "+t);this.show(t,i,n)},e.prototype.Ps=function(t){this.show("scoring",t,o)}},{"../../lib/wgo.js":103,"../Grid":17,"../Move":21,"../constants":51,"../hh/touchManager":73,"../log":75}],82:[function(t,i,n){"use strict";function e(t,i){this.ff=t,this.Gp=i,this.Mp(),s.up(this.op)}t("./importDlg.less");var r=t("../hh/Dome"),o=t("../hh/getText"),s=t("../hh/PopupDlg");i.g=e,e.prototype.Mp=function(){var t=this.op=r.Qn(null,"importDialog dialog");t.oo(!1),t.Qn("dialogTitle").Vn(o("#importGame"));var i=this.Qs=t.Qn("mainDiv");this.Rs=r.Fo(i,"loadGame",o("#fromFile")).setAttribute("type","file").setAttribute("id","fileInput").oo(!1),new r(i,"label","btn fileInputBtn").setAttribute("for","fileInput").Qn("btnText").Vn(o("#selectFile")),this.Rs.v("change",this.Ss.bind(this)),r.Eo(i);var n=i.Qn("moves");this.zf=r.Fo(n,"moves",o("#fromText")),n.Qn("loadMovesInfo").Vn(o("#fromTextHelp"));var e=t.Qn("btnDiv");r.yo(e,"loadBtn",o("#load"),this.Ss.bind(this)),r.yo(e,"cancelBtn",o("#cancel"),this.Ts.bind(this)),t.oo(!0),s.Yn(t,document.body)},e.prototype.Ss=function(){if(this.Rs.Ro()){var t=this;this.Rs.So(function(i){t.Us(i)})}else this.Us(this.zf.value())},e.prototype.Us=function(t){if(t){var i=[],n=this.ff.Mc(t,i);if(!n)return new s(null,i.join("\n"));this.Gp({yg:n})&&s.bo(this.op)}},e.prototype.Ts=function(){s.bo(this.op),this.Gp({Vs:!0})}},{"../hh/Dome":54,"../hh/PopupDlg":60,"../hh/getText":67,"./importDlg.less":93}],83:[function(t,i,n){"use strict";function e(t,i,n){var e=this.co=t.Qn("moveIndicator "+i);this.Ws=e.Qn("label").Vn(n),e.Qn("icon"),this.Xs=e.Qn("text")}t("./moveIndicator.less");var r=t("../constants"),o=r.nb,s=r.mb;i.g=e,e.prototype.Ys=function(t,i,n){this.co.oo(null!==t),null!==t&&(this.co.so("black",i===s),this.co.so("white",i===o),this.Xs.Vn(t),n&&this.Ws.Vn(n))}},{"../constants":51,"./moveIndicator.less":94}],84:[function(t,i,n){"use strict";function e(t,i){this.ff=t,this.Zs=i,this.$s=!1,this._s=null,this.at=null,this.Mp(),this.Yc(),a.up(this.op)}function r(){this.ct.bt(this)}t("./myArchivedGamesDlg.less");var o=t("../hh/Dome"),s=t("../GameInVault"),h=t("../hh/getText"),a=t("../hh/PopupDlg"),u=t("../hh/tapBehavior");i.g=e,e.prototype.bt=function(t){this._s&&this._s.so("selected",!1),t.so("selected",!0),this._s=t,this.at=t.qa,this.dt()},e.prototype.et=function(){this.ft.lo()||this.ft.Qn("emptyMsg").Vn(h("#empty")),this._s=null,this.dt()},e.prototype.dt=function(){var t=!!this._s;this.gt.ro(t),this.ht.ro(t)},e.prototype.it=function(){if(this._s){var t=h("#deleteGameConfirm")+"\n\n"+this._s.text();a.Ip(null,t,function(t){t.ff.Hc(t.at)||console.error("Failed to delete gameId: "+t.at),t.ft.removeChild(t._s),t.et()},this)}},e.prototype.jt=function(){this._s&&this.ff.Kc(this.at)&&(this.$s=!0,this.ft.removeChild(this._s),this.et())},e.prototype.Yc=function(){var t=this.ff.Ec();t.sort(s.ab),this.ft.mo();for(var i=0;i<t.length;i++){var n=t[i],e=this.ft.Qn("oneGame");e.Qn("text").Vn(n.Ya()),e.qa=n.Za(),e.ct=this,u(e,r)}this.et()},e.prototype.Mp=function(){var t=this.op=o.Qn(null,"myArchivedGamesDialog dialog");t.oo(!1),t.Qn("dialogTitle").Vn(h("#archivedGames"));var i=this.Qs=t.Qn("mainDiv");this.ft=i.Qn("gameList"),this.gt=o.yo(i,"delGameBtn",h("#deleteGame"),this.it.bind(this)),this.ht=o.yo(i,"restoreGameBtn",h("#restoreGame"),this.jt.bind(this));var n=t.Qn("btnDiv");o.yo(n,"closeBtn",h("#close"),this.kt.bind(this)),t.oo(!0),a.Yn(t,document.body)},e.prototype.kt=function(){a.bo(this.op),this.$s&&this.Zs()}},{"../GameInVault":10,"../hh/Dome":54,"../hh/PopupDlg":60,"../hh/getText":67,"../hh/tapBehavior":71,"./myArchivedGamesDlg.less":95}],85:[function(t,i,n){"use strict";function e(t,i){this.ff=t,this.Gp=i,this.result={},this._s=null,this.at=null,this.Mp(),this.Yc(),c.up(this.op)}function r(){this.ct.bt(this)}function o(){var t=this.ct;t.et(),t.ot.ro(this.value()>0)}t("./myGamesDlg.less");var s=t("../hh/Dome"),h=t("../GameInVault"),a=t("../hh/getText"),u=t("./MyArchivedGamesDlg"),c=t("../hh/PopupDlg"),p=t("../hh/tapBehavior");i.g=e,e.prototype.bt=function(t){this._s&&this._s.so("selected",!1),t.so("selected",!0),this._s=t,this.at=t.qa,this.dt(),this.lt.select(0)},e.prototype.et=function(){this.ft.lo()||this.ft.Qn("emptyMsg").Vn(a("#myGamesHelp")),this._s&&this._s.so("selected",!1),this._s=null,this.dt()},e.prototype.dt=function(){var t=!!this._s;this.gt.ro(t),this.nt.ro(t),this.ot.ro(t)},e.prototype.it=function(){if(this._s){var t=a("#deleteGameConfirm")+"\n\n"+this._s.text();c.Ip(null,t,function(t){t.ff.Fc(t.at)||console.error("Failed to delete gameId: "+t.at),t.ft.removeChild(t._s),t.et()},this)}},e.prototype.pt=function(){if(this._s){var t=a("#archiveGameConfirm")+"\n\n"+this._s.text();c.Ip(null,t,function(t){t.ff.Ic(t.at)&&(t.ft.removeChild(t._s),t.et())},this)}},e.prototype.qt=function(){new u(this.ff,this.Yc.bind(this))},e.prototype.Yc=function(){var t=this.ff.vc();t.sort(h.ab),this.ft.mo();for(var i=0;i<t.length;i++){var n=t[i],e=this.ft.Qn("oneGame");e.Qn("text").Vn(n.Ya()),e.qa=n.Za(),e.ct=this,p(e,r)}this.et()},e.prototype.Mp=function(){var t=this.op=s.Qn(null,"myGamesDialog dialog");t.oo(!1),t.Qn("dialogTitle").Vn(a("#myGames"));var i=this.Qs=t.Qn("mainDiv");this.ft=this.Qs.Qn("gameList"),this.gt=s.yo(i,"delGameBtn",a("#deleteGame"),this.it.bind(this)),this.nt=s.yo(i,"archiveGameBtn",a("#archiveGame"),this.pt.bind(this)),
this.rt=s.yo(i,"showArchiveBtn",a("#showArchivedGames"),this.qt.bind(this));var n=i.Qn();s.Do(n,"inputLbl",a("#recentGames"));var e=[a("#none")].concat(this.ff.Rc());this.lt=s.Jo(n,"recentGames",e,"byIndex"),this.lt.v("change",o),this.lt.ct=this;var r=t.Qn("btnDiv");this.ot=s.yo(r,"loadBtn",a("#load"),this.Ss.bind(this)),s.yo(r,"cancelBtn",a("#cancel"),this.Us.bind(this,!0)),t.oo(!0),c.Yn(t,document.body)},e.prototype.Ss=function(){var t=this.lt.value();t>0?(this.result.yg=this.ff.rc(t-1),this.Us()):this._s&&(this.result.yg=this.ff.uc(this.at),this.Us())},e.prototype.Us=function(t){this.result.Vs=!!t,this.Gp(this.result)&&c.bo(this.op)}},{"../GameInVault":10,"../hh/Dome":54,"../hh/PopupDlg":60,"../hh/getText":67,"../hh/tapBehavior":71,"./MyArchivedGamesDlg":84,"./myGamesDlg.less":96}],86:[function(t,i,n){"use strict";function e(t,i){this.Gp=i,this.st=t.Eb,this.tt=t.tt,this.Mp(t),this.ut(),this.vt(),a.up(this.op)}t("./newGameDlg.less");var r=t("../ai"),o=t("../constants"),s=t("../hh/Dome"),h=t("../hh/getText"),a=t("../hh/PopupDlg"),u=t("../hh/Transit"),c=o.mb,p=o.nb,l=[5,7,9,13,19];i.g=e,e.prototype.ut=function(){var t=this.st;this.wt.Vn(t+" x "+t);var i=t+"x"+t;this.xt.ao("backgroundImage",'url("assets/'+i+'.png")'),this.xt.ao("backgroundSize",Math.ceil(t/19*100)+"%"),this.yt.ro(t>5),this.zt.ro(t<19)},e.prototype.At=function(t){var i=l.indexOf(this.st)+t;this.st=l[i],this.ut()},e.prototype.vt=function(){this.Bt[c].so("robot",this.tt[c]),this.Bt[p].so("robot",this.tt[p])},e.prototype.Ct=function(t){this.tt[t]=!this.tt[t],this.vt()},e.prototype.Mp=function(t){this.options=t;var i=this.op=s.Qn(document.body,"newGameDialog dialog");i.oo(!1),i.Qn("dialogTitle").Vn("Start a new game");var n=i.Qn("mainDiv"),e=n.Qn("centeredDiv").Qn("boardDiv");this.Bt=[],this.Bt[0]=s.Bo(e,"playerBtn",this.Ct.bind(this,0));var o=this.Dt=e.Qn("sizeBox");this.zt=s.Bo(o,"sizeBtn",this.At.bind(this,1)),this.xt=o.Qn("boardImgFrame").Qn("boardImg"),this.wt=this.xt.Qn("curSize"),this.yt=s.Bo(o,"sizeBtn",this.At.bind(this,-1)),this.yt.so("down",!0),this.Bt[1]=s.Bo(e,"white playerBtn",this.Ct.bind(this,1)),this.Et=s.yo(n,"advancedBtn","More options >>",this.Ft.bind(this));var a=this.Gt=i.Qn("advancedDiv");s.Do(a,"inputLbl","Handicap:"),this.Ht=s.Jo(a,"handicap",[0,2,3,4,5,6,7,8,9],null,t.Ht);var u=a.Qn("rules");s.Do(u,"inputLbl","Rules:"),this.rules=s.Jo(u,"rules",["Japanese","Chinese"],null,t.rules);var c=Object.keys(r.Dn);if(c.length>1){var p=a.Qn();s.Do(p,"inputLbl","Black AI:"),this.Bg=s.Jo(p,"defaultAi",c,null,r.Bg.name),s.Do(p,"defAiInfo","(White AI always uses latest AI version)")}var l=s.yo(i,"startBtn",h("#play"),this.It.bind(this));i.oo(!0);var f=this.Gt.co.clientHeight+l.co.clientHeight+24;this.Gt.ao("marginTop",-f+"px")},e.prototype.Ft=function(){this.Jt?(this.Kt=!this.Kt,this.Jt.tq(200)):(this.Gt.oo(!0),this.Kt=!0,this.Jt=new u(this.Gt).vp("marginTop","0").start(200)),this.Et.Ao("More options"+(this.Kt?" <<":" >>"))},e.prototype.It=function(){var t=this.options;t.Eb=this.st,t.Ht=~~this.Ht.value(),t.tt=this.tt,r.Bg=this.Bg?r.Dn[this.Bg.value()]:r.Bg,t.rules=this.rules.value(),this.Us()},e.prototype.Us=function(){this.close(),this.Gp(this.options)},e.prototype.close=function(){s.removeChild(document.body,this.op)}},{"../ai":50,"../constants":51,"../hh/Dome":54,"../hh/PopupDlg":60,"../hh/Transit":64,"../hh/getText":67,"./newGameDlg.less":97}],87:[function(t,i,n){"use strict";function e(t){this.parent=t,this.Lt=null}t("./progressLog.less");var r=t("../hh/NotificationPopup");i.g=e,e.prototype.start=function(t,i){this.Lt=new r(this.parent,null,{className:"progressLog",pp:!0,rp:!0,title:t}),this.Lt.tp(!1),this.Lt.sp(i),this.Lt.show()},e.prototype.stop=function(t,i){t&&this.Lt.sp(t,i),this.Lt.tp(!0),this.Lt=null},e.prototype.sp=function(t,i){this.Lt.sp(t,i)}},{"../hh/NotificationPopup":58,"./progressLog.less":98}],88:[function(t,i,n){"use strict";function e(t){this.hf=!1,this.$q=t,this.yg=t.yg,this.Mt=t.Mt,this.ra=null,this.Nt=null,this.Ot=null,this.Pt()}function r(){this.Du.uu(this.move)}function o(t){return t?String.fromCharCode(64+t):d}t("./reviewUi.less");var s=t("../constants"),h=t("../hh/ContextMenu"),a=t("../hh/Dome"),u=t("../hh/getText"),c=t("../../config/misc.json"),p=t("../Move"),l=t("../hh/PopupDlg"),f=p.kb,d="*";i.g=e,e.prototype.Pt=function(){this.hf&&this.Qt(),this.hf=!1,this.ra=null,this.bookmarks=[],this.Rt=this.St=-1,this.Tt=[]},e.prototype.Ut=function(t,i,n){this.Nt=a.Mo(),this.Vt=a.yo(t,"study"," ",this.Wt.bind(this)),a.yo(i,"back10","<<",this.Xt.bind(this)),a.yo(i,"back1","<",this.Yt.bind(this)),a.yo(i,"forw1",">",this.Zt.bind(this)),a.yo(i,"forw10",">>",this.$t.bind(this)),this._t=a.Bo(n,"cycleBtn",this.au.bind(this),"."),this.bu=a.Bo(null,"delMoveBtn",this.cu.bind(this),"."),a.No()},e.prototype.du=function(){this.Vt.Ao(this.hf?"...":u("#review")),this.Nt.oo(["back1","back10","forw1","forw10","cycleBtn"],this.hf),this.hf&&this.eu()},e.prototype.Wt=function(){if(!this.hf)return this.fu();var t=new h({Xn:!0});t.Tn(u("#rewindAll"),this.gu.bind(this),{name:"rewind",Un:!0}),t.Tn(u("#gotoLastMove"),this.hu.bind(this),{name:"lastReal",Un:!0}),t.Tn(u("#bookmark"),this.iu.bind(this),{name:"bookmark",Un:!0}),t.Tn(u("#evalScore"),this.ju.bind(this),{name:"scoring",Un:!0}),this.ra.Uf()||t.Tn(u("#prune"),this.ku.bind(this),{name:"prune",Un:!0}),t.Tn(u("#endStudy"),this.Qt.bind(this)),t.Wn(this.Vt,1,0)},e.prototype.ju=function(){var t=this.$q.lu(s.mb).vn();this.$q.ks.Ps(t[0]),this.Ot.Vn(this.$q.mu.Fg(t[1]).join("\n"))},e.prototype.iu=function(){if(this.Rt!==-1)return this.nu();this.Rt=this.St=this.bookmarks.length,this.bookmarks.push(this.ra.getBookmark()),this.eu()},e.prototype.nu=function(){this.bookmarks.splice(this.Rt,1),this.Rt=-1,this.eu()},e.prototype.au=function(){var t=(this.St+1)%this.bookmarks.length,i=this.bookmarks[t];this.ra._f(i),this.yg.Hb();for(var n=this.ra.eg(i),e=0;e<n.length;e++)this.yg.Sb(n[e]);this.ou()},e.prototype.cu=function(){var t=this.ra;!t.Uf()&&t.pg()&&t.vg()&&(this.Tt.pop(),this.yg.Sb("half_undo"),this.ou())},e.prototype.ku=function(){var t=this.ra;if(!t.Uf()){for(var i,n;;){if(i=t.Sf(),!t.ag())return;if(this.yg.Sb("half_undo"),n=t.rg())break}var e=t.tg(i);if(e<c["confirm-delete-moves"])return this.ra.ug(i),this.ou();this.ou();var r=u("#pruneConfirm",o(n.indexOf(i)),i,e);l.Ip(null,r,function(t){t.ra.ug(i),t.ou()},this)}},e.prototype.fu=function(){this.hf=!0,this.ra=this.Mt.rf(),this.Ot=this.$q.pu,this.$q.du(),this.ou()},e.prototype.Qt=function(){this.hf=!1,this.qu(),this.Mt.sf(),this.ru(),this.$q.su(),this.$q.tu(),this.$q.du()},e.prototype.uu=function(t){if(!this.yg.Sb(t))return this.$q.statusMessage(this.yg.Tb().join("\n"));this.ra.cg(t),this.ou()},e.prototype.Yt=function(){this.ra.ag()&&(this.yg.Sb("half_undo"),this.ou())},e.prototype.Xt=function(){for(var t=this.ra,i=t.sg()-1,n=t.Tf();t.ag()&&(this.yg.Sb("half_undo"),!t.rg())&&(--n!==i||!t.Uf()););this.ou()},e.prototype.Zt=function(){this.vu&&(this.ra.cg(this.vu),this.yg.Sb(this.vu),this.ou())},e.prototype.$t=function(){for(var t=this.ra,i=t.sg()-1,n=t.Tf();this.vu&&(t.cg(this.vu),this.yg.Sb(this.vu),!t.rg())&&(++n!==i||!t.Uf());)this.wu();this.ou()},e.prototype.wu=function(){for(var t=this.ra.fg(),i=!0,n=0;n<t.length;n++)if(t[n]!==this.Tt[n]){i=!1;break}i?this.vu=this.Tt[n]:(this.Tt=t,this.vu=null),this.vu||(this.vu=this.ra.qg())},e.prototype.gu=function(){this.ra.bg(),this.yg.Hb(),this.ou()},e.prototype.hu=function(){this.qu(),this.ou()},e.prototype.qu=function(){for(this.ra.bg(),this.yg.Hb();;){var t=this.ra.og();if(!t)break;this.yg.Sb(t)}},e.prototype.ou=function(){this.$q.su(),this.wu();var t=this.ra,i=t.Sf(),n=t.pg();this.Rt=-1;for(var e=0;e<this.bookmarks.length;e++)if(t.dg(this.bookmarks[e])){this.Rt=this.St=e;break}this.Nt.ro(["forw1","forw10"],!!this.vu),this.Nt.ro(["back1","back10"],!!i),this.eu(),n&&this.$q.xu(),this.yu(i,n,this.vu),this.$q.zu&&i&&i.length<=3&&this.$q.Au(i)},e.prototype.eu=function(){this._t.oo(!!this.bookmarks.length),this.Rt!==-1?(this._t.Ao(this.Rt+1+"/"+this.bookmarks.length),this._t.ro(1!==this.bookmarks.length)):(this._t.Ao(""),this._t.ro(!0))},e.prototype.ru=function(){this.Ot.mo()},e.prototype.yu=function(t,i,n){if(this.Ot.mo(),this.$q.tu(n),i)t&&!this.ra.Uf()&&(this.bu.jo(this.Ot),this.bu.Ao(t));else{var e=this.ra.rg();e&&this.Bu(e)}this.Cu()},e.prototype.Bu=function(t){for(var i=0;i<t.length;i++){var n=t[i];if(n){var e=f(n),s=o(i),h=this.ra.tg(n);e?this.$q.ks.Hs(s,e[0],e[1]):s=n;var u=a.yo(this.Ot,"variationBtn",s,r);u.Du=this,u.move=n,h&&u.Qn("size").Vn(h)}}},e.prototype.Cu=function(){var t=this.ra.gg();t&&t.$g&&this.Ot.Qn("moveComment").Vn(t.$g)}},{"../../config/misc.json":7,"../Move":21,"../constants":51,"../hh/ContextMenu":53,"../hh/Dome":54,"../hh/PopupDlg":60,"../hh/getText":67,"./reviewUi.less":99}],89:[function(t,i,n){"use strict";function e(t){var i=this.op=s.Qn(null,"settingDlg dialog");i.Qn("dialogTitle").Vn(a("#settings"));var n=i.Qn("content"),e=u.Bp();s.Do(n,"inputLbl",a("#colorTheme")+":"),s.Jo(n,"theme",e,null,u.yp).v("change",function(){var i=this.value();u.Ap(i),t.Oc("theme",i)});var h=n.Qn("cloudDiv");s.Do(h,"inputLbl",a("#syncMyGames")+":"),s.yo(h,"dropboxBtn",a("#setupDropbox"),r);var p=i.Qn("btnDiv");s.yo(p,"okBtn",a("#ok"),o).Ep=this,c.Yn(i,document.body)}function r(){h.cr()}function o(){var t=this.Ep;c.bo(t.op)}t("./settingDlg.less");var s=t("../hh/Dome"),h=t("../net/DropboxHelper"),a=t("../hh/getText"),u=t("../hh/Painter"),c=t("../hh/PopupDlg");i.g=e},{"../hh/Dome":54,"../hh/Painter":59,"../hh/PopupDlg":60,"../hh/getText":67,"../net/DropboxHelper":77,"./settingDlg.less":100}],90:[function(t,i,n){"use strict";function e(t){this.Gu(),this.ec=P,this.yg=new c,this.ff=new p(P),this.Mt=new A(this.yg,this.ff),this.mu=new q(this.yg),this.Du=new S(this),this.ks=null,this.Hu=new j(document.body),this.Iu=u.br(P),this.Ju=0,this.Ku=!this.Lu,t&&this.yg.Bb(t)}t("./ui.less");var r=t("../ai"),o=t("./Board"),s=t("../../config/colors.json"),h=t("../constants"),a=t("../hh/Dome"),u=t("../net/DropboxHelper"),c=t("../GameLogic"),p=t("../GameVault"),l=t("../hh/GetFile"),f=t("../hh/getText"),d=t("../net/goSites"),g=t("../hh"),v=t("./ImportDlg"),y=t("../log"),b=t("../main"),m=t("../Move"),w=t("./MoveIndicator"),x=t("./MyGamesDlg"),k=t("./NewGameDlg"),A=t("../PendingGame"),j=t("./ProgressLog"),E=t("../hh/Painter"),G=t("../hh/PopupDlg"),M=t("../hh/LocalPref"),S=t("./ReviewUi"),q=t("../ScoreAnalyser"),C=t("./SettingDlg"),D=t("../net/SyncHelper"),B=t("./UiTopMenu"),z=m.kb,T=m.jb,_=h.nb,I=h.mb,L=h.Ln,O=h.Kn,P=new M("1g0_1");e.Eu=function(){P.bp(),E.zp(s,P.Qc("theme",".neonBlack")),g.init(E),document.body.style.height=a.io+"px",f.init("en",function(){u.ar(P)||(new e).Fu()})},i.g=e,e.prototype.Gu=function(){this.Eb=9,this.Ht=0,this.tt=[L,O],this.Mu=!1},e.prototype.Fu=function(){a.Oo(b.appName+(this.Ku?"":" dev")),window.addEventListener("beforeunload",this.Nu.bind(this,"unloading")),window.addEventListener("visibilitychange",this.Nu.bind(this,"visibility")),window.setInterval(this.Nu.bind(this,"autosave"),3e5),this.Ju=P.Qc("newGameIndex",1),this.Ou=new B(this.Pu.bind(this)),this.Ou.Qu(!!this.Iu);var t=this.Mt.Pc();if(t){if(this.Ru(t))return;this.Gu()}this.Su()},e.prototype.Nu=function(t){("visibility"!==t?document.hidden:!document.hidden)||(this.Mu&&this.Mt.Nc(),P.Oc("newGameIndex",this.Ju),P.dp())},e.prototype.Pu=function(t){switch(t){case"newGame":this.Su();break;case"myGames":this.Tu();break;case"importGame":this.Uu();break;case"exportGame":this.Vu();break;case"syncGame":this.Wu();break;case"syncMyGames":this.Xu();break;case"settings":new C(P);break;case"downloadLatest":this.Yu()}},e.prototype.su=function(){this.ks.refresh(),this.Zu&&this.$u()},e.prototype._u=function(t,i,n,e){var r=this.av="compact"===t,s=this.bv=a.Qn(i,"gameUi");n&&s.Qn(r?"testTitle":"pageTitle").Vn(n),this.cv=s.Qn("board"),e&&(this.dv=s.Qn("boardDesc").no(e));var h=s.Qn("underBoard");this.ev(h),this.fv(h);var u=this.yg.qb.Eb+2;if(r)this.gv=28*u;else{this.du();var c=a.io-10-this.Ou.Qp()-h.co.clientHeight;this.gv=Math.min(c,a.ho-15)}this.ks=new o,this.ks.Is(this.hv.bind(this))},e.prototype.iv=function(){this.Ou.Qu(!!this.Iu),this.bv&&(a.removeChild(document.body,this.bv),this.bv=null,this.ks=null)},e.prototype.jv=function(){this.bv||this.kv||this.Su()},e.prototype.Su=function(){if(!this.kv){this.lv();var t={Eb:this.Eb,Ht:this.Ht,tt:this.tt,rules:this.rules},i=this;this.kv=new k(t,function(t){return i.Eb=t.Eb,i.Ht=t.Ht,i.tt=[t.tt[I]?L:O,t.tt[_]?L:O],i.mv(t.rules),i.kv=null,!0})}},e.prototype.Tu=function(){this.lv();var t=this;new x(this.ff,function(i){return i.Vs?(t.jv(),!0):t.Ru(i.yg)})},e.prototype.Uu=function(){this.lv();var t=this;new v(this.ff,function(i){return i.Vs?(t.jv(),!0):t.Ru(i.yg)})},e.prototype.ev=function(t){var i=this.nv=t.Qn("statusBar");this.ov=new w(i,"lastMove","Last:"),this.pu=i.Qn("msgBar"),this.pv=new w(i,"nextMove","Next:")},e.prototype.tu=function(t){var i=this.yg.history;if(i.length){var n=T(i[i.length-1]);this.ov.Ys(n,1-this.yg.vb,"#"+i.length+":");var e=z(n);e?this.ks.Gs("CR",e[0],e[1]):this.ks.Gs(null)}else this.ov.Ys(null);t=this.yg.yb?null:T(t||""),this.pv.Ys(t,this.yg.vb),this.ks.As(this.yg.vb)},e.prototype.statusMessage=function(t){t.indexOf("\n")===-1&&(t="\n"+t),this.pu.Vn(t)},e.prototype.fv=function(t){var i=this.qv=t.Qn("mainControls"),n=i.Qn("leftDiv"),e=i.Qn("mainDiv"),r=i.Qn("rightDiv");this.av||this.Du.Ut(n,e,r),this.controls=a.Mo(),a.yo(e,"bPass",f("#pass"),this.rv.bind(this,"pass")),a.yo(e,"next",f("#next"),this.sv.bind(this,1)),a.yo(e,"next10",f("#nextN",10),this.sv.bind(this,10)),a.yo(r,"nextAll",f("#finish"),this.sv.bind(this)),a.yo(e,"bUndo",f("#undo"),this.tv.bind(this)),a.yo(e,"accept",f("#accept"),this.uv.bind(this,!0)),a.yo(e,"refuse",f("#refuse"),this.uv.bind(this,!1)),a.yo(e,"newg",f("#newGame"),this.Su.bind(this)),a.yo(r,"bResi",f("#resign"),this.vv.bind(this)),this.wv=n.Qn("aiVsAiFlags"),this.xv=a.Go(this.wv,"animated","Animated"),this.Ku||this.yv(),a.No()},e.prototype.du=function(){var t=this.Du.hf,i=this.yg.yb,n=this.yg.xb,e=!(i||n||t),r=this.tt[I]&&this.tt[_],o=this.av;o||this.Du.du(),this.controls.oo(["accept","refuse"],n&&!t),this.controls.oo(["bUndo","bPass","bResi"],e&&!r),this.controls.oo(["next","next10","nextAll"],e&&r),this.controls.oo(["aiVsAiFlags"],e&&r&&!o),this.controls.oo(["newg"],i&&!t&&!o),this.Ku||this.zv(e,t,r)},e.prototype.Av=function(){this.Mu&&(this.Mt.nc(),this.Du.Pt(),this.Mu=!1)},e.prototype.lv=function(){this.Av(),this.iv()},e.prototype.Bv=function(){this.Av()},e.prototype.Ru=function(t){var i=[];return this.Mt.mf(t,i)?(this.kv&&(this.kv=this.kv.close()),this.tt=[void 0,void 0],this.Cv(),this.Dv(),!0):(new G(null,i.join("\n")),this.iv(),!1)},e.prototype.mv=function(t){this.rules=t,this.Mt.jf(this.Eb,this.Ht,this.ub,t),this.Mt.qf("source",b.appName),this.Mt.qf("event",this.Ju++),this.Cv(),this.statusMessage("Game started. Your turn..."),this.Dv()},e.prototype.Ev=function(){this.Mt.kf(),this.Cv()},e.prototype.Cv=function(){this.Fv();var t=this.yg;this.Eb=t.qb.Eb,this.Ht=t.Qb(),this.rules=t.Jb(),this.Ku||this.Lu(),this.bv||this._u("main",document.body);var i=this.av?void 0:{background:"wood"};this.ks.create(this.cv,this.gv,t.qb,i),this.Gv()},e.prototype.Fv=function(){this.Hv=[];for(var t=this.Mt.Pa(),i=I;i<=_;i++){var n=i===I?"playerBlack":"playerWhite",e=t.fb(n);if(void 0===this.tt[i]&&(e&&e.indexOf(r.En.Tm)>=0?this.tt[i]=L:this.tt[i]=O),this.tt[i]){var o=this.lu(i).constructor;e||this.Mt.qf(n,o.Tm+"-"+o.Um)}else e||this.Mt.qf(n,"human")}},e.prototype.Gv=function(){this.su(),this.tu(),this.du()},e.prototype.lu=function(t){var i=this.Hv[t];if(i)return i;var n=t===I?r.Bg:r.En;return i=this.Hv[t]=new n(this.yg,t)},e.prototype.Dv=function(){this.Mu=!0,this.Ou.Iv(this.Mt.Pa(),!!this.Iu),this.xu()||this.Jv()},e.prototype.hv=function(t){if("!"===t[0])return!this.Ku&&this.Kv(t.substr(1));var i=this.Du.hf;if(i||this.zu)return!this.Ku&&this.zu&&this.Lv(t,null,!0),void(i&&this.Du.uu(t));this.Mv||this.tt[this.yg.vb]&&this.Ku||this.yg.xb||this.yg.yb||this.rv(t)},e.prototype.xu=function(){return this.yg.xb?(this.Nv(),!0):!!this.yg.yb&&(this.uj(),this.Ov(),!0)},e.prototype.uj=function(){var t=this.mu.Eg();this.Pv=t.join("\n")},e.prototype.Nv=function(){this.uj(),this.statusMessage(this.Pv),this.du(),this.ks.Ps(this.mu.Hg().md)},e.prototype.uv=function(t){var i=this.yg.vb;if(this.tt[i]&&!this.tt[1-i]&&(i=1-i),this.yg.ac(t,i),t)return this.Ov();this.statusMessage("Score in dispute. Continue playing..."),this.du(),this.su(),this.tt[I]&&this.tt[_]||this.Jv()},e.prototype.Ov=function(){this.statusMessage(this.Pv),this.du()},e.prototype.Qv=function(t){var i=this.Rv=this.Hv[this.yg.vb],n=Date.now();this.Mv=!0;var e=i.on(),r=Math.max(0,(t||0)-(Date.now()-n));window.setTimeout(function(t){t.Sv(e),t.Mv=!1},r,this)},e.prototype.Tv=function(t){var i=this.Rv=this.Hv[this.yg.vb];this.Uv=i.en;var n=i.on();return this.Sv(n,t),n},e.prototype.Sv=function(t,i){this.yg.Sb(t),i||(this.su(),this.tu(),this.statusMessage(""),this.Zu&&this.Lv(t,this.Rv,!1)),this.xu()},e.prototype.rv=function(t){if(!this.xu()){if(!this.yg.Sb(t))return this.statusMessage(this.yg.Tb().join("\n"));this.su(),this.tu(),this.statusMessage(""),this.tt[this.yg.vb]&&this.Qv(500)}},e.prototype.vv=function(){G.Ip(this.bv,f("#resignConfirm"),function(t){t.yg.Sb("resi"),t.tu(),t.xu()},this)},e.prototype.tv=function(){var t=this.tt[I]===this.tt[_]||this.zu;if(!this.yg.Sb(t?"half_undo":"undo"))return this.statusMessage(this.yg.Tb().join("\n"));this.su(),this.tu()},e.prototype.Jv=function(t){this.tt[this.yg.vb]&&this.Tv(t)},e.prototype.sv=function(t){var i=1===t,n=this.xv.uo(),e=!i&&!n;this.Jv(e),i||this.yg.xb||window.setTimeout(function(i){i.sv(t-1)},n?100:0,this)},e.prototype.Vu=function(){var t=this.Mt.pf();a.Qo(t.pa,t.id+".sgf")},e.prototype.Yu=function(){var t=this.Ou.Vv;this.Hu.start(f("#getLatestGame"),f("#retrieving",t.bs,t.id));var i=d.cs(t.bs,t.id),n=this;l.Qo(i,function(t,i){if(t)return n.Hu.stop(t,y.ERROR);var e=[];n.Bv();var r=n.Mt.Mc(i,e);if(!r)return n.Hu.stop(e.join("\n"),y.ERROR);n.Ru(r),n.Hu.stop(f("#retrieved"))})},e.prototype.Wv=function(t){if(this.Xv)return t(null,this.Xv);var i=new D(P,this.Iu,this.ff,this.Hu.sp.bind(this.Hu)),n=this;i.connect(function(e){if(e)return t(e);n.Xv=i,t(null,i)})},e.prototype.Wu=function(){this.Hu.start(f("#syncGame"),f("#syncStart"));var t=this;this.Wv(function(i,n){if(i)return t.Hu.stop();var e=t.ff.oc();t.Bv(),n.Tr(e,function(i){i||t.Ru(e),t.Hu.stop()})})},e.prototype.Xu=function(){this.lv(),this.Su(),this.Hu.start(f("#syncMyGames"),f("#syncStart"));var t=this;this.Wv(function(i,n){if(i)return t.Hu.stop();n.Ur(function(){t.Hu.stop()})})}},{"../../config/colors.json":6,"../GameLogic":12,"../GameVault":13,"../Move":21,"../PendingGame":22,"../ScoreAnalyser":24,"../ai":50,"../constants":51,"../hh":68,"../hh/Dome":54,"../hh/GetFile":55,"../hh/LocalPref":56,"../hh/Painter":59,"../hh/PopupDlg":60,"../hh/getText":67,"../log":75,"../main":76,"../net/DropboxHelper":77,"../net/SyncHelper":78,"../net/goSites":79,"./Board":81,"./ImportDlg":82,"./MoveIndicator":83,"./MyGamesDlg":85,"./NewGameDlg":86,"./ProgressLog":87,"./ReviewUi":88,"./SettingDlg":89,"./UiTopMenu":91,"./ui.less":101}],91:[function(t,i,n){"use strict";function e(t){this.Yv(t)}function r(t,i){return i?t+i:""}t("./uiTopMenu.less");var o=t("../hh/Dome"),s=t("../hh/getText"),h=t("../net/goSites"),a=t("../main"),u=t("../hh/TopMenu");i.g=e,e.prototype.Qp=function(){return this.Up.Qp()},e.prototype.Yv=function(t){var i=this.Up=new u({Kp:t,_p:a.appName+" V"+a.appVersion});i.Xp("settings",s("#settings"),!0),i.Vp(),i.Xp("myGames",s("#myGames"),!0),i.Xp("newGame",s("#newGame"),!0),i.Xp("importGame",s("#importGame"),!0),this.Zv=i.Xp("syncMyGames",s("#syncMyGames"),!0),i.Vp(),this.$v=i.Tn(o.Qn(null,"gameInfo")),this._v=i.Xp("downloadLatest","",!0),this.aw=i.Xp("syncGame",s("#syncGame")),this.bw=i.Xp("exportGame",s("#exportGame")),i.Vp()},e.prototype.Qu=function(t){this.Up.Sp(s("#appTitle")),this.aw.oo(!1),this.Zv.oo(t),this.$v.Vn(""),this._v.oo(!1),this.bw.oo(!1)},e.prototype.Iv=function(t,i){this.Up.Sp(t.fb("playerWhite")+" VS "+t.fb("playerBlack")+" (B)");var n="komi: "+(t.fb("komi")||0);n+=r(", hand: ",t.fb("handicap")),n+=r(", rules: ",t.fb("rules")),n+=r(", date: ",t.fb("date")),n+=r(", source: ",t.fb("source")),n+=r(", event: ",t.fb("event")),n+=r(", place: ",t.fb("place")),this.$v.Vn(n),this.aw.oo(i);var e=this.Vv=h.as(t);e&&this._v.Vn(s("#downloadLatest",e.bs)),this._v.oo(!!e),this.bw.oo(!0)}},{"../hh/Dome":54,"../hh/TopMenu":62,"../hh/getText":67,"../main":76,"../net/goSites":79,"./uiTopMenu.less":102}],92:[function(t,i,n){"use strict";var e=t("../ai"),r=[{name:"Chuckie",In:t("../ai/chuckie")}];e.Hn(r),t("./Ui").Eu()},{"../ai":50,"../ai/chuckie":49,"./Ui":90}],93:[function(t,i,n){var e=".importDialog {\n  margin: 50px;\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  top: 40%;\n}\n.importDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.importDialog .mainDiv .groupFrame {\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 7px;\n}\n.importDialog .mainDiv .loadGameLabel {\n  margin-top: 30px;\n}\n.importDialog .mainDiv .fileInputBtn {\n  margin: 10px 15px;\n}\n.importDialog .mainDiv .moves {\n  margin: 35px 0;\n}\n.importDialog .mainDiv .movesInput {\n  width: 50%;\n}\n.importDialog .mainDiv .loadMovesInfo {\n  margin-left: 229px;\n  font-size: 50%;\n  font-style: italic;\n}\n.importDialog .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.importDialog .btnDiv .loadBtn,\n.importDialog .btnDiv .cancelBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  width: 240px;\n  font-size: 48px;\n}\n";t("lessify")(e),i.g=e},{"lessify":140}],94:[function(t,i,n){var e=".moveIndicator {\n  position: relative;\n  height: 100%;\n}\n.moveIndicator.black .icon {\n  background-color: #000;\n}\n.moveIndicator.black .text {\n  color: #fff;\n  text-shadow: 0 0 3px #000;\n}\n.moveIndicator.white .icon {\n  background-color: #fff;\n}\n.moveIndicator.white .text {\n  color: #000;\n  text-shadow: 0 0 3px #fff;\n}\n.moveIndicator .label {\n  position: relative;\n  width: 100%;\n  text-align: center;\n  font-size: 20px;\n  line-height: 18px;\n}\n.moveIndicator .icon {\n  position: relative;\n  left: 10px;\n  width: calc(100% - 20px);\n  padding-bottom: calc(100% - 22px);\n  border: 1px solid rgba(0, 0, 0, 0.4);\n  border-radius: 50%;\n}\n.moveIndicator .text {\n  position: absolute;\n  width: 100%;\n  text-align: center;\n  bottom: calc(50% - 25px);\n  font-size: 32px;\n  font-weight: bold;\n}\n";t("lessify")(e),i.g=e},{"lessify":140}],95:[function(t,i,n){var e=".myArchivedGamesDialog {\n  margin: 0 65px;\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.myArchivedGamesDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.myArchivedGamesDialog .delGameBtn,\n.myArchivedGamesDialog .restoreGameBtn {\n  vertical-align: top;\n  margin: 20px 12px 20px 0;\n  width: 220px;\n  height: 120px;\n}\n.myArchivedGamesDialog .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.myArchivedGamesDialog .btnDiv .closeBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  width: 240px;\n  font-size: 48px;\n}\n";t("lessify")(e),i.g=e},{"lessify":140}],96:[function(t,i,n){var e=".myGamesDialog {\n  margin: 0 40px;\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.myGamesDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.myGamesDialog .mainDiv .recentGamesDropDwn {\n  max-width: calc(100% - 230px);\n  font-size: 48px;\n  margin: 35px 0;\n}\n.myGamesDialog .delGameBtn,\n.myGamesDialog .archiveGameBtn,\n.myGamesDialog .showArchiveBtn {\n  vertical-align: top;\n  margin: 20px 12px 20px 0;\n  width: 220px;\n  height: 120px;\n}\n.myGamesDialog .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: -10px 0 -10px 0;\n}\n.myGamesDialog .btnDiv .loadBtn,\n.myGamesDialog .btnDiv .cancelBtn {\n  float: right;\n  margin: 10px 0 0 10px;\n  width: 240px;\n  font-size: 48px;\n}\n";t("lessify")(e),i.g=e},{"lessify":140}],97:[function(t,i,n){var e='.newGameDialog {\n  margin: 50px;\n}\n.newGameDialog .mainDiv {\n  position: relative;\n  background-color: inherit;\n}\n.newGameDialog .mainDiv .centeredDiv {\n  margin-top: 20px;\n  text-align: center;\n}\n.newGameDialog .boardDiv .sizeBox {\n  display: inline-block;\n  position: relative;\n  width: 240px;\n  max-width: 33%;\n  text-align: center;\n  margin: 10px 18px 0 20px;\n}\n.newGameDialog .playerBtn {\n  position: relative;\n  vertical-align: top;\n  top: 144px;\n  left: 2px;\n  width: 200px;\n  max-width: 23%;\n  height: 150px;\n  max-height: initial;\n}\n.newGameDialog .playerBtn .playerBtnIcon {\n  background-image: url("assets/humanBlue.png");\n  -webkit-filter: brightness(0);\n  filter: brightness(0);\n  background-size: 80%;\n}\n.newGameDialog .playerBtn.robot .playerBtnIcon {\n  background-size: contain;\n  background-image: url("assets/robotBlue.png");\n}\n.newGameDialog .playerBtn.white .playerBtnIcon {\n  -webkit-filter: invert(1) grayscale(1);\n  filter: invert(1) grayscale(1);\n}\n.newGameDialog .sizeBtn {\n  position: relative;\n  width: 170px;\n  max-width: 88%;\n  height: 100px;\n  max-height: initial;\n  margin: 0 0 10px;\n}\n.newGameDialog .sizeBtn .sizeBtnIcon {\n  background-image: url("assets/upBlue.png");\n  background-size: 80%;\n  -webkit-filter: brightness(0);\n  filter: brightness(0);\n}\n.newGameDialog .sizeBtn.down {\n  margin-top: 4px;\n}\n.newGameDialog .sizeBtn.down .sizeBtnIcon {\n  background-image: url("assets/downBlue.png");\n}\n.newGameDialog .boardImgFrame {\n  display: inline-block;\n  position: relative;\n  width: 91%;\n  height: 195px;\n  background-color: #d1cac1;\n  border-radius: 5px;\n  box-shadow: black 3px 3px 6px;\n}\n.newGameDialog .boardImgFrame .boardImg {\n  width: 100%;\n  height: 100%;\n  background: url("assets/19x19.png") 50% no-repeat;\n}\n.newGameDialog .boardImgFrame .curSize {\n  position: absolute;\n  top: -4px;\n  width: 100%;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  cursor: default;\n  text-align: center;\n  color: white;\n  text-shadow: 3px 3px 5px #000;\n}\n.newGameDialog .advancedBtn {\n  width: 248px;\n  height: 100px;\n  margin: 20px 10px 7px;\n  background-color: #faf7f5;\n  border: 1px solid #a7a7a7;\n}\n.newGameDialog .advancedDiv .rules {\n  display: inline-block;\n  margin-left: 87px;\n}\n.newGameDialog .advancedDiv .defAiInfo {\n  font-size: 50%;\n  font-style: italic;\n  width: 400px;\n  display: inline-block;\n}\n.newGameDialog .startBtn {\n  margin: 16px 0 10px -5px;\n  position: relative;\n  left: calc(100% - 240px);\n  width: 240px;\n  font-size: 48px;\n}\n';t("lessify")(e),i.g=e},{"lessify":140}],98:[function(t,i,n){var e=".notifPopup.progressLog {\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  margin: 0 auto;\n  width: 1020px;\n  max-width: 95%;\n  border: 1px solid rgba(255, 255, 255, 0.33);\n}\n.notifPopup.progressLog .content {\n  font-size: 36px;\n}\n";t("lessify")(e),i.g=e},{"lessify":140}],99:[function(t,i,n){var e='.gameUi .btnIcon {\n  -webkit-filter: sepia(1) brightness(7);\n  filter: sepia(1) brightness(7);\n}\n.gameUi .statusBar .btn {\n  margin: 1px;\n  width: 120px;\n  max-width: 12vw;\n  height: calc(100% - 2px);\n  max-height: 8vh;\n}\n.gameUi .statusBar .delMoveBtn {\n  float: left;\n}\n.gameUi .statusBar .delMoveBtn .btnIcon {\n  background-image: url("assets/trash.png");\n}\n.gameUi .statusBar .delMoveBtn .btnText {\n  top: 59%;\n  color: #000;\n  text-shadow: 0 0 3px #fff;\n}\n.gameUi .statusBar .variationBtn .size {\n  position: absolute;\n  right: 5px;\n  bottom: 1px;\n  color: #aaa;\n}\n.gameUi .statusBar .moveComment {\n  margin-top: 2px;\n  background-color: white;\n  color: black;\n  border-radius: 5px;\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  text-align: left;\n  font-size: 22px;\n  font-weight: normal;\n  padding: 2px 4px;\n}\n.gameUi .mainControls .btn.back10,\n.gameUi .mainControls .btn.back1,\n.gameUi .mainControls .btn.forw1,\n.gameUi .mainControls .btn.forw10 {\n  max-width: 22%;\n}\n.gameUi .mainControls .btn.cycleBtn {\n  margin-left: 10px;\n  max-width: calc(50% - 5px);\n}\n.gameUi .mainControls .btn.cycleBtn .btnIcon {\n  background-image: url("assets/cycle.png");\n}\n.gameUi .mainControls .btn.cycleBtn .btnText {\n  left: 5px;\n  color: #fff;\n}\nbody .contextMenu {\n  width: 500px;\n  border-radius: 9px;\n  border: 1px solid #58636d;\n  background-color: #3b3d47;\n}\nbody .contextMenu .menuItem {\n  font-size: 30px;\n  padding-left: 120px;\n  padding-right: 20px;\n  background-color: #000;\n  border: 1px solid #505050;\n  border-radius: 9px;\n}\nbody .contextMenu .menuItem .icon {\n  width: 120px;\n  -webkit-filter: grayscale(1) brightness(4);\n  filter: grayscale(1) brightness(4);\n}\nbody .contextMenu .menuItem.scoring .icon {\n  -webkit-filter: brightness(0.8);\n  filter: brightness(0.8);\n  background-image: url("assets/scoring.png");\n}\nbody .contextMenu .menuItem.rewind .icon {\n  background-image: url("assets/empty.png");\n}\nbody .contextMenu .menuItem.lastReal .icon {\n  background-image: url("assets/lastReal.png");\n}\nbody .contextMenu .menuItem.bookmark .icon {\n  background-image: url("assets/cycle.png");\n}\nbody .contextMenu .menuItem.prune .icon {\n  background-image: url("assets/pruning.png");\n}\n';t("lessify")(e),i.g=e},{"lessify":140}],100:[function(t,i,n){var e=".settingDlg {\n  z-index: 2000;\n  position: absolute;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  margin: 0 20%;\n  width: 60%;\n}\n.settingDlg .content {\n  padding: 20px;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.settingDlg .content .cloudDiv {\n  margin-top: 20px;\n}\n.settingDlg .content .dropboxBtn {\n  display: block;\n  margin: 10px;\n  width: 300px;\n}\n.settingDlg .btnDiv {\n  width: 100%;\n  display: inline-block;\n  margin: 0 0 -10px 0;\n}\n.settingDlg .btnDiv .okBtn {\n  float: right;\n}\n";t("lessify")(e),i.g=e},{"lessify":140}],101:[function(t,i,n){
var e='body {\n  background-color: #865e50;\n  font-family: "Arial";\n  font-size: 16px;\n  margin: 0px;\n  height: 2048px;\n}\ndiv {\n  box-sizing: border-box;\n}\n::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 7px;\n  height: 7px;\n}\n::-webkit-scrollbar-track {\n  -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.2);\n  -webkit-border-radius: 10px;\n  border-radius: 7px;\n  margin: 1px;\n}\n::-webkit-scrollbar-thumb {\n  border-radius: 7px;\n  background-color: rgba(0, 0, 0, 0.5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, 0.5);\n}\n.downloadLink {\n  text-decoration: none;\n  color: white;\n}\n.pageTitle {\n  margin-top: 7px;\n  margin-bottom: 7px;\n  font-size: 40px;\n  font-weight: bold;\n}\n.subTitle {\n  font-size: 30px;\n  margin-top: 0.5em;\n  margin-bottom: 5px;\n}\n.logBox {\n  font-size: 28px;\n  font-family: "Arial";\n  background-color: white;\n  border: solid #cca 1px;\n  border-radius: 8px;\n  padding: 5px;\n  overflow-y: auto;\n  word-wrap: break-word;\n}\n.inputLbl {\n  display: inline-block;\n  margin: 0 5px 0 10px;\n  font-size: 28px;\n}\n.inputBox {\n  margin: 17px 0 17px 0;\n  min-height: 4rem;\n  text-align: left;\n  font-size: 42px;\n  color: inherit;\n}\n.btn {\n  position: relative;\n  display: inline-block;\n  vertical-align: top;\n  -webkit-touch-callout: none;\n  /* iOS Safari */\n  -webkit-user-select: none;\n  /* Chrome/Safari/Opera */\n  -moz-user-select: none;\n  /* Firefox */\n  -ms-user-select: none;\n  /* Internet Explorer/Edge */\n  user-select: none;\n  /* Non-prefixed version, currently not supported by any browser */\n  cursor: default;\n  box-sizing: border-box;\n  padding: 0 2px;\n  border-radius: 13px;\n  width: 160px;\n  height: 120px;\n  max-height: 8vh;\n  text-align: center;\n  font-size: 28px;\n  border: 1px solid #7a6c5c;\n  background-color: #af9e8e;\n  color: #000000;\n}\n.btn.toggled {\n  background-color: #AD4343;\n}\n.btn.disabled {\n  color: #000;\n  border-style: hidden;\n  opacity: 0.6;\n}\n.btn.pressed {\n  border-style: outset;\n}\n.btnIcon {\n  position: absolute;\n  left: 2px;\n  top: 2px;\n  width: calc(100% - 4px);\n  height: calc(100% - 4px);\n  background-position: 50%;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n.btnText {\n  position: relative;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  z-index: 1;\n}\n.chkBoxDiv {\n  display: inline-block;\n  margin-right: 10px;\n}\n.chkBox {\n  margin: 5px 3px 14px 2px;\n  width: 29px;\n  height: 1.5em;\n}\n.chkLbl {\n  font-size: 28px;\n}\n.dropDwn {\n  font-size: 42px;\n  margin: 17px 13px 17px 13px;\n  color: inherit;\n}\n.radioBtn {\n  margin: 17px 0px 17px 13px;\n  width: 29px;\n  height: 1.5em;\n}\n.radioLbl {\n  margin-right: 13px;\n}\n.dialog {\n  padding: 10px;\n  background-color: #ffffee;\n  color: #000000;\n  border: solid #cca 1px;\n  border-radius: 10px;\n  font-family: Arial;\n  font-size: 42px;\n}\n.dialogTitle {\n  font-size: 45px;\n  background-color: #ffebce;\n  color: #000000;\n  border: solid 1px rgba(195, 50, 50, 0.2);\n  border-radius: 10px;\n  margin: -6px;\n  margin-bottom: 15px;\n  padding: 10px 0px 10px 12px;\n}\n.gameList {\n  position: relative;\n  border: 1px solid #a9a9a9;\n  border-radius: 6px;\n  max-height: 50vh;\n  min-height: 160px;\n  overflow-y: auto;\n  overflow-x: hidden;\n  background-color: #fff;\n}\n.gameList .oneGame {\n  position: relative;\n  height: 4rem;\n  padding: 5px;\n}\n.gameList .oneGame .text {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  position: absolute;\n  font-size: 30px;\n}\n.gameList .oneGame.selected {\n  background-color: #b7b29e;\n  border-radius: 5px;\n}\n.gameList .emptyMsg {\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n  position: absolute;\n  width: 100%;\n  text-align: center;\n  font-style: italic;\n  opacity: 0.7;\n}\n.gameUi {\n  padding: 2px;\n}\n.gameUi .board {\n  margin: 5px 0;\n  background-color: #402f23;\n  border-radius: 7px;\n}\n.gameUi .board .wgo-board {\n  margin: 0 auto;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  /* disables grey shade on long-tap for Safari */\n  /* Below avoid issues when tap-hold on Android */\n  -webkit-user-select: none;\n  -webkit-touch-callout: none;\n}\n.gameUi .boardDesc {\n  margin-top: 3px;\n  font-weight: bold;\n  font-style: italic;\n}\n.gameUi .btn {\n  width: 200px;\n}\n.gameUi .underBoard {\n  padding-bottom: 5px;\n}\n.gameUi .statusBar {\n  position: relative;\n  height: 130px;\n  max-height: 8vh;\n  box-sizing: content-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: row;\n  flex-direction: row;\n  background-color: #dfc2ac;\n  border: rgba(0, 0, 0, 0.7) 1px solid;\n  border-radius: 7px;\n}\n.gameUi .statusBar .moveIndicator {\n  margin: 1px 7px 0;\n  width: 130px;\n  max-width: 8vh;\n}\n.gameUi .statusBar .msgBar {\n  -webkit-flex: 1;\n  flex: 1;\n  height: 100%;\n  white-space: pre-wrap;\n  overflow-y: auto;\n  font-size: 26px;\n  font-weight: bold;\n  text-align: center;\n}\n.gameUi .mainControls {\n  margin-top: 10px;\n}\n.gameUi .mainControls .leftDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 20%;\n  padding-left: 10px;\n  text-align: left;\n}\n.gameUi .mainControls .leftDiv .animatedDiv {\n  margin: 16px;\n}\n.gameUi .mainControls .mainDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 60%;\n  text-align: center;\n}\n.gameUi .mainControls .mainDiv .btn {\n  margin: 0 3px;\n  height: 200px;\n  max-width: 44%;\n}\n.gameUi .mainControls .rightDiv {\n  display: inline-block;\n  vertical-align: top;\n  width: 20%;\n  text-align: right;\n}\n.gameUi .mainControls .leftDiv .btn,\n.gameUi .mainControls .rightDiv .btn {\n  background-color: #5c4137;\n  color: #faebd7;\n  max-width: 100%;\n}\n.gameUi .mainControls .leftDiv .btn.toggled,\n.gameUi .mainControls .rightDiv .btn.toggled {\n  background-color: #AD4343;\n}\n.gameUi .mainControls .leftDiv .btn.resi,\n.gameUi .mainControls .rightDiv .btn.resi {\n  height: 100px;\n  width: 150px;\n}\n';t("lessify")(e),i.g=e},{"lessify":140}],102:[function(t,i,n){var e=".topMenu .menuOption .icon {\n  -webkit-filter: invert(0.6) grayscale(1);\n  filter: invert(0.6) grayscale(1);\n}\n.topMenu .menuOption.settings .icon {\n  background-image: url(assets/settings.png);\n}\n.topMenu .menuOption.myGames .icon {\n  background-image: url(assets/myGames.png);\n  background-size: auto 45%;\n}\n.topMenu .menuOption.newGame .icon {\n  background-image: url(assets/robotBlue.png);\n  background-position-y: 0;\n}\n.topMenu .menuOption.importGame .icon {\n  background-image: url(assets/import.png);\n}\n.topMenu .menuOption.syncMyGames .icon {\n  background-image: url(assets/cloudSync.png);\n}\n.topMenu .menuOption.downloadLatest .icon {\n  background-image: url(assets/refresh.png);\n}\n.topMenu .gameInfo {\n  padding: 15px 20px 15px 100px;\n  font-size: 150%;\n  background-color: #282a2b;\n}\n";t("lessify")(e),i.g=e},{"lessify":140}],103:[function(t,i,n){!function(t,i){"use strict";var n=document.getElementsByTagName("script"),e=n[n.length-1].src.split("?")[0],r=e.split("/").slice(0,-1).join("/")+"/",o={version:"2.3.1",B:1,W:-1,cw:!0,dw:r,lang:"en",ew:{fw:{}}};o.opera=navigator.userAgent.search(/(opera)(?:.*version)?[ \/]([\w.]+)/i)!=-1,o.gw=navigator.userAgent.search(/(webkit)[ \/]([\w.]+)/i)!=-1,o.hw=navigator.userAgent.search(/(msie) ([\w.]+)/i)!=-1,o.iw=navigator.userAgent.search(/(mozilla)(?:.*? rv:([\w.]+))?/i)!=-1&&!o.gw&&!o.hw,o.jw=function(t){var i=o.ew[o.lang][t]||o.ew.fw[t];if(i){for(var n=1;n<arguments.length;n++)i=i.replace("$",arguments[n]);return i}return t},o.kw=function(t,i){return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.super=t,i},o.lw=function(){throw Error("unimplemented abstract method")},o.clone=function(t){if(t&&"object"==typeof t){var i=t.constructor==Array?[]:{};for(var n in t)t[n]==t?i[n]=t:i[n]=o.clone(t[n]);return i}return t},o.mw=function(t){return t&&"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t};var s=function(i,n){var n=n||{};for(var e in n)this[e]=n[e];for(var e in o.rs.default)void 0===this[e]&&(this[e]=o.rs.default[e]);for(var e in s.wp.default)void 0===this.xp[e]&&(this.xp[e]=s.wp.default[e]);this.nw=this.section.left,this.ow=this.section.top,this.pw=this.size-1-this.section.right,this.qw=this.size-1-this.section.bottom,this.init(),i.appendChild(this.vs),this.rw=t.devicePixelRatio||1,this.width&&this.height?this.sw(this.width,this.height):this.width?this.tw(this.width):this.height&&this.uw(this.height)};s.wp={},s.wp.vw={shadowColor:"rgba(32,32,32,0.5)",shadowTransparentColor:"rgba(32,32,32,0)",shadowBlur:0,shadowSize:function(t){return t.shadowSize},markupBlackColor:"rgba(255,255,255,0.8)",markupWhiteColor:"rgba(0,0,0,0.8)",markupNoneColor:"rgba(0,0,0,0.8)",markupLinesWidth:function(t){return t.ww?t.xw/7:t.lineWidth},gridLinesWidth:1,gridLinesColor:function(t){return"rgba(0,0,0,"+Math.min(1,t.xw/15)+")"},starColor:"#000",starSize:function(t){return t.starSize*(t.width/300+1)},stoneSize:function(t){return t.stoneSize*Math.min(t.Js,t.Ks)/2},coordinatesColor:"rgba(0,0,0,0.7)",font:function(t){return t.font},linesShift:.5},s.wp.default={shadowColor:"rgba(62,32,32,0.5)",shadowTransparentColor:"rgba(62,32,32,0)",shadowBlur:function(t){return.1*t.xw},shadowSize:1,markupBlackColor:"rgba(255,255,255,0.9)",markupWhiteColor:"rgba(0,0,0,0.7)",markupNoneColor:"rgba(0,0,0,0.7)",markupLinesWidth:function(t){return t.xw/8},gridLinesWidth:function(t){return t.xw/15},gridLinesColor:"#654525",starColor:"#531",starSize:function(t){return t.xw/8+1},stoneSize:function(t){return Math.min(t.Js,t.Ks)/2},coordinatesColor:"#531",yw:"rgba(0,32,128,0.8)",font:"calibri",linesShift:.25};var h,a=function(t,i){return"function"==typeof i.xp[t]?i.xp[t](i):i.xp[t]},u={zw:function(t,i){var n=i.Aw(t.x),e=i.Bw(t.y),r=i.xw;this.beginPath();var o=a("shadowBlur",i),s=Math.max(0,r-.5),h=this.createRadialGradient(n-i.Cw,e-i.Cw,s-1-o,n-i.Cw,e-i.Cw,s+o);h.addColorStop(0,a("shadowColor",i)),h.addColorStop(1,a("shadowTransparentColor",i)),this.fillStyle=h,this.arc(n-i.Cw,e-i.Cw,s+o,0,2*Math.PI,!0),this.fill()},clear:function(t,i){var n=i.Aw(t.x),e=i.Bw(t.y),r=i.xw;this.clearRect(n-1.1*r-i.Cw,e-1.1*r-i.Cw,2.2*r,2.2*r)}},c=function(t,i,n){return t.Es[i][n][0].c==o.B?a("markupBlackColor",t):t.Es[i][n][0].c==o.W?a("markupWhiteColor",t):a("markupNoneColor",t)},p=function(t,i,n){return t.Es[i][n][0]&&t.Es[i][n][0].c==o.W||t.Es[i][n][0].c==o.B},l=function(t,i){var n;t[i].clear(),t[i].zw(t);for(var e=0;e<t.size;e++)for(var r=0;r<t.size;r++)for(var o=0;o<t.Es[e][r].length;o++){var h=t.Es[e][r][o];n=h.type?"string"==typeof h.type?s.Ew[h.type]:h.type:t.Dw,n[i]&&n[i].zw.call(t[i].getContext(h),h,t)}for(var a=0;a<t.Fw.length;a++){var h=t.Fw[a],n=h.Kp;n[i]&&n[i].zw.call(t[i].getContext(h.Gw),h.Gw,t)}},f=function(t,i,n,e,r,o,s,h){t.strokeStyle="rgba(64,64,64,0.2)",t.lineWidth=e/30*h,t.beginPath(),e-=Math.max(1,t.lineWidth);var a,u,i,c,p,l=i+e*Math.cos(r*Math.PI),f=n+e*Math.sin(r*Math.PI),d=i+e*Math.cos(o*Math.PI),g=n+e*Math.sin(o*Math.PI);d>l?(a=(g-f)/(d-l),u=Math.atan(a)):d==l?u=Math.PI/2:(a=(g-f)/(d-l),u=Math.atan(a)-Math.PI);var v=s*e;c=Math.sin(u)*v,p=Math.cos(u)*v;var y=l+c,b=f-p,m=d+c,w=g-p;t.moveTo(l,f),t.bezierCurveTo(y,b,m,w,d,g),t.stroke()},d=function(t){for(var i=t.angle,n=t.angle,e=0;e<t.Hw.length;e++)i+=t.Hw[e],n-=t.Hw[e],f(t.Iw,t.x,t.y,t.Jw,i,n,t.Kw,t.Lw)};s.Ew={Mw:{ui:{zw:function(t,i){var n,e=i.Aw(t.x),r=i.Bw(t.y),s=i.xw;t.c==o.W?(n=this.createRadialGradient(e-2*s/5,r-2*s/5,s/3,e-s/5,r-s/5,5*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#aaa")):(n=this.createRadialGradient(e-2*s/5,r-2*s/5,1,e-s/5,r-s/5,4*s/5),n.addColorStop(0,"#666"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(e-i.Cw,r-i.Cw,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill()}},Nw:u},Ow:{ui:{zw:function(t,i){var n,e=i.Aw(t.x),r=i.Bw(t.y),s=i.xw;t.c==o.W?(n=this.createRadialGradient(e-2*s/5,r-2*s/5,2,e-s/5,r-s/5,4*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#ddd")):(n=this.createRadialGradient(e-2*s/5,r-2*s/5,1,e-s/5,r-s/5,4*s/5),n.addColorStop(0,"#111"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(e-i.Cw,r-i.Cw,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill(),this.beginPath(),this.lineWidth=s/6,t.c==o.W?(this.strokeStyle="#999",this.arc(e+s/8,r+s/8,s/2,0,Math.PI/2,!1)):(this.strokeStyle="#ccc",this.arc(e-s/8,r-s/8,s/2,Math.PI,1.5*Math.PI)),this.stroke()}},Nw:u},Pw:{ui:{zw:function(t,i){var n,e=i.Aw(t.x),r=i.Bw(t.y),s=i.xw;t.c==o.W?(n=this.createRadialGradient(e-2*s/5,r-2*s/5,s/3,e-s/5,r-s/5,8*s/5),n.addColorStop(0,"#fff"),n.addColorStop(1,"#666")):(n=this.createRadialGradient(e-2*s/5,r-2*s/5,1,e-s/5,r-s/5,3*s/5),n.addColorStop(0,"#555"),n.addColorStop(1,"#000")),this.beginPath(),this.fillStyle=n,this.arc(e-i.Cw,r-i.Cw,Math.max(0,s-.5),0,2*Math.PI,!0),this.fill()}},Nw:u},Qw:{ui:{zw:function(t,i){var n,e,r=i.xw;h=h||Math.ceil(9999999*Math.random()),n=i.Aw(t.x),e=i.Bw(t.y);var s;if(s=t.c==o.W?"#aaa":"#000",this.beginPath(),this.fillStyle=s,this.arc(n-i.Cw,e-i.Cw,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill(),t.c==o.W){var a=h%(3+t.x*i.size+t.y)%3,u=i.size*i.size+t.x*i.size+t.y,c=2/u*(h%u);d(0==a?{Iw:this,x:n,y:e,Jw:r,angle:c,Hw:[.1,.12,.11,.1,.09,.09,.09,.09],Kw:.25,Lw:1.75}:1==a?{Iw:this,x:n,y:e,Jw:r,angle:c,Hw:[.1,.09,.08,.07,.06,.06,.06,.06,.06,.06,.06],Kw:.2,Lw:1.5}:{Iw:this,x:n,y:e,Jw:r,angle:c,Hw:[.12,.14,.13,.12,.12,.12],Kw:.3,Lw:2}),s=this.createRadialGradient(n-2*r/5,e-2*r/5,r/3,n-r/5,e-r/5,5*r/5),s.addColorStop(0,"rgba(255,255,255,0.9)"),s.addColorStop(1,"rgba(255,255,255,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.Cw,e-i.Cw,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill()}else s=this.createRadialGradient(n+.4*r,e+.4*r,0,n+.5*r,e+.5*r,r),s.addColorStop(0,"rgba(32,32,32,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.Cw,e-i.Cw,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill(),s=this.createRadialGradient(n-.4*r,e-.4*r,0,n-.5*r,e-.5*r,1.5*r),s.addColorStop(0,"rgba(64,64,64,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),this.beginPath(),this.fillStyle=s,this.arc(n-i.Cw,e-i.Cw,Math.max(0,r-.5),0,2*Math.PI,!0),this.fill()}},Nw:u},Rw:{ui:{zw:function(t,i){var n=i.Aw(t.x),e=i.Bw(t.y),r=i.xw,s=a("markupLinesWidth",i)||1;t.c==o.W?this.fillStyle="white":this.fillStyle="black",this.beginPath(),this.arc(n,e,Math.max(0,r-s),0,2*Math.PI,!0),this.fill(),this.lineWidth=s,this.strokeStyle="black",this.stroke()}}},CR:{ui:{zw:function(t,i){var n=i.Aw(t.x),e=i.Bw(t.y),r=i.xw;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||a("markupLinesWidth",i)||1,this.beginPath(),this.arc(n-i.Cw,e-i.Cw,r/2,0,2*Math.PI,!0),this.stroke()}}},LB:{ui:{zw:function(t,i){var n=i.Aw(t.x),e=i.Bw(t.y),r=i.xw,o=t.scale||1,s=t.font||a("font",i)||"";this.fillStyle=t.c||c(i,t.x,t.y);var h=1;1==t.text.length?h=1.5:2==t.text.length&&(h=1.2),this.font=Math.round(h*r*o)+"px "+s,this.beginPath(),this.textBaseline="middle",this.textAlign="center",this.fillText(t.text,n,e,2*r)}},grid:{zw:function(t,i){if(!p(i,t.x,t.y)&&!t.Sw){var n=i.Aw(t.x),e=i.Bw(t.y),r=i.xw;this.clearRect(n-r,e-r,2*r,2*r)}},clear:function(t,i){p(i,t.x,t.y)||(t.Sw=!0,l(i,"grid"),delete t.Sw)}}},Tw:{ui:{zw:function(t,i){var n=i.Aw(t.x),e=i.Bw(t.y),r=Math.round(i.xw);this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||a("markupLinesWidth",i)||1,this.beginPath(),this.rect(Math.round(n-r/2)-i.Cw,Math.round(e-r/2)-i.Cw,r,r),this.stroke()}}},Ih:{ui:{zw:function(t,i){var n=i.Aw(t.x),e=i.Bw(t.y),r=i.xw;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=t.lineWidth||a("markupLinesWidth",i)||1,this.beginPath(),this.moveTo(n-i.Cw,e-i.Cw-Math.round(r/2)),this.lineTo(Math.round(n-r/2)-i.Cw,Math.round(e+r/3)+i.Cw),this.lineTo(Math.round(n+r/2)+i.Cw,Math.round(e+r/3)+i.Cw),this.closePath(),this.stroke()}}},Uw:{ui:{zw:function(t,i){var n=i.Aw(t.x),e=i.Bw(t.y),r=i.xw;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineCap="round",this.lineWidth=2*(t.lineWidth||a("markupLinesWidth",i)||1)-1,this.beginPath(),this.moveTo(Math.round(n-r/2),Math.round(e-r/2)),this.lineTo(Math.round(n+r/2),Math.round(e+r/2)),this.moveTo(Math.round(n+r/2)-1,Math.round(e-r/2)),this.lineTo(Math.round(n-r/2)-1,Math.round(e+r/2)),this.stroke(),this.lineCap="butt"}}},SL:{ui:{zw:function(t,i){var n=i.Aw(t.x),e=i.Bw(t.y),r=i.xw;this.fillStyle=t.c||c(i,t.x,t.y),this.beginPath(),this.rect(n-r/2,e-r/2,r,r),this.fill()}}},Vw:{ui:{zw:function(t,i){var n=i.Aw(t.x),e=i.Bw(t.y),r=i.xw;this.strokeStyle=t.c||c(i,t.x,t.y),this.lineWidth=2*(t.lineWidth||a("markupLinesWidth",i)||1),this.beginPath(),this.arc(n-r/3,e-r/3,r/6,0,2*Math.PI,!0),this.stroke(),this.beginPath(),this.arc(n+r/3,e-r/3,r/6,0,2*Math.PI,!0),this.stroke(),this.beginPath(),this.moveTo(n-r/1.5,e),this.bezierCurveTo(n-r/1.5,e+r/2,n+r/1.5,e+r/2,n+r/1.5,e),this.stroke()}}},outline:{ui:{zw:function(t,i){t.alpha?this.globalAlpha=t.alpha:this.globalAlpha=.3,t.Ww?s.Ew[t.Ww].ui.zw.call(this,t,i):i.Dw.ui.zw.call(this,t,i),this.globalAlpha=1}}},mini:{ui:{zw:function(t,i){i.xw=i.xw/2,t.Ww?s.Ew[t.Ww].ui.zw.call(this,t,i):i.Dw.ui.zw.call(this,t,i),i.xw=2*i.xw}}}},s.ts={grid:{zw:function(t,i){var n,e,r,o,s,h;this.fillStyle=a("coordinatesColor",i),this.textBaseline="middle",this.textAlign="center",this.font=i.xw*i.coordFontSize+"px "+(i.font||""),r=i.Aw(-.75),o=i.Aw(i.size-.25),s=i.Bw(-.75),h=i.Bw(i.size-.25);for(var u=0;u<i.size;u++)n=u+"A".charCodeAt(0),n>="I".charCodeAt(0)&&n++,e=i.Bw(u),this.fillText(i.size-u,r,e),this.fillText(i.size-u,o,e),e=i.Aw(u),this.fillText(String.fromCharCode(n),e,s),this.fillText(String.fromCharCode(n),e,h);this.fillStyle="black"}}},s.Xw=function(){this.vs=document.createElement("canvas"),this.context=this.vs.getContext("2d"),this.rw=t.devicePixelRatio||1,this.rw>1&&this.context.scale(this.rw,this.rw)},s.Xw.prototype={constructor:s.Xw,sw:function(t,i){this.vs.width=t,this.vs.style.width=t/this.rw+"px",this.vs.height=i,this.vs.style.height=i/this.rw+"px"},jo:function(t,i){this.vs.style.position="absolute",this.vs.style.zIndex=i,t.appendChild(this.vs)},Yw:function(t){t.removeChild(this.vs)},getContext:function(){return this.context},zw:function(t){},clear:function(){this.context.clearRect(0,0,this.vs.width,this.vs.height)}},s.Zw=o.kw(s.Xw,function(){this.super.call(this)}),s.Zw.prototype.zw=function(t){var i;this.context.beginPath(),this.context.lineWidth=a("gridLinesWidth",t),this.context.strokeStyle=a("gridLinesColor",t);var n=Math.round(t.left),e=Math.round(t.top),r=Math.round(t.Js*(t.size-1)),o=Math.round(t.Ks*(t.size-1));this.context.strokeRect(n-t.Cw,e-t.Cw,r,o);for(var s=1;s<t.size-1;s++)i=Math.round(t.Aw(s))-t.Cw,this.context.moveTo(i,e),this.context.lineTo(i,e+o),i=Math.round(t.Bw(s))-t.Cw,this.context.moveTo(n,i),this.context.lineTo(n+r,i);if(this.context.stroke(),this.context.fillStyle=a("starColor",t),t.$w[t.size])for(var h in t.$w[t.size])this.context.beginPath(),this.context.arc(t.Aw(t.$w[t.size][h].x)-t.Cw,t.Bw(t.$w[t.size][h].y)-t.Cw,a("starSize",t),0,2*Math.PI,!0),this.context.fill()},s._w=o.kw(s.Xw,function(){this.init(4)}),s._w.prototype.init=function(i){var n,e;this.ax=i,this.elements=[],this.bx=[],this.rw=t.devicePixelRatio||1;for(var r=0;r<i;r++)n=document.createElement("canvas"),e=n.getContext("2d"),this.rw>1&&e.scale(this.rw,this.rw),this.elements.push(n),this.bx.push(e)},s._w.prototype.jo=function(t,i){for(var n=0;n<this.ax;n++)this.elements[n].style.position="absolute",this.elements[n].style.zIndex=i,t.appendChild(this.elements[n])},s._w.prototype.Yw=function(t){for(var i=0;i<this.ax;i++)t.removeChild(this.elements[i])},s._w.prototype.getContext=function(t){return t.x%2?t.y%2?this.bx[0]:this.bx[1]:t.y%2?this.bx[2]:this.bx[3]},s._w.prototype.clear=function(t,i){for(var n=0;n<this.ax;n++)this.bx[n].clearRect(0,0,this.elements[n].width,this.elements[n].height)},s._w.prototype.sw=function(t,i){for(var n=0;n<this.ax;n++)this.elements[n].width=t,this.elements[n].style.width=t/this.rw+"px",this.elements[n].height=i,this.elements[n].style.height=i/this.rw+"px"},s.ex=o.kw(s._w,function(t,i,n){this.init(2),this.shadowSize=void 0===i?1:i,this.ks=t}),s.ex.prototype.getContext=function(t){return!(t.x%2&&t.y%2)&&(t.x%2||t.y%2)?this.bx[1]:this.bx[0]},s.ex.prototype.sw=function(t,i){this.super.prototype.sw.call(this,t,i);for(var n=0;n<this.ax;n++)this.bx[n].setTransform(1,0,0,1,Math.round(this.shadowSize*this.ks.xw/7),Math.round(this.shadowSize*this.ks.xw/7))};var g=function(t,i){var n=i.Aw(t.x),e=i.Bw(t.y),r=i.xw;this.clearRect(n-2*r-i.Cw,e-2*r-i.Cw,4*r,4*r)},v=function(){return 3*this.width/(4*(this.pw+1-this.nw)+2)-this.Js*this.nw},y=function(){return 3*this.height/(4*(this.qw+1-this.ow)+2)-this.Ks*this.ow},b=function(){return 4*this.width/(4*(this.pw+1-this.nw)+2)},m=function(){return 4*this.height/(4*(this.qw+1-this.ow)+2)},w=function(t,i){for(var n,e=0;e<this.Es[t][i].length;e++){var r=this.Es[t][i][e];n=r.type?"string"==typeof r.type?s.Ew[r.type]:r.type:this.Dw;for(var o in n)n[o].clear?n[o].clear.call(this[o].getContext(r),r,this):g.call(this[o].getContext(r),r,this)}},x=function(t,i){for(var n,e=0;e<this.Es[t][i].length;e++){var r=this.Es[t][i][e];n=r.type?"string"==typeof r.type?s.Ew[r.type]:r.type:this.Dw;for(var o in n)n[o].zw.call(this[o].getContext(r),r,this)}},k=function(t){var i,n;i=t.layerX*this.rw,i-=this.left,i/=this.Js,i=Math.round(i),n=t.layerY*this.rw,n-=this.top,n/=this.Ks,n=Math.round(n);var e=t.offsetY*this.rw;return e-=this.top,e/=this.Ks,e=Math.round(e),e!==n&&console.error("Using layerY we get",n," BUT using offsetY it would be",e),{x:i>=this.size?-1:i,y:n>=this.size?-1:n}},A=function(){this.vs.style.width=this.width/this.rw+"px",this.vs.style.height=this.height/this.rw+"px",this.xw=a("stoneSize",this),this.Cw=a("linesShift",this);for(var t=0;t<this.ax.length;t++)this.ax[t].sw(this.width,this.height)};s.prototype={constructor:s,init:function(){this.Es=[];for(var t=0;t<this.size;t++){this.Es[t]=[];for(var i=0;i<this.size;i++)this.Es[t][i]=[]}this.Fw=[],this.ax=[],this.gx=[],this.vs=document.createElement("div"),this.vs.className="wgo-board",this.vs.style.position="relative",this.background&&("#"==this.background[0]?this.vs.style.backgroundColor=this.background:(this.vs.style.backgroundImage="url('"+this.background+"')",this.vs.style.backgroundColor="#c75")),this.grid=new s.Zw,this.Nw=new s.ex(this,a("shadowSize",this)),this.ui=new s._w,this.hx(this.grid,100),this.hx(this.Nw,200),this.hx(this.ui,300)},tw:function(t){this.width=t,this.width*=this.rw,this.Ks=this.Js=b.call(this),this.left=v.call(this),this.height=(this.qw-this.ow+1.5)*this.Ks,this.top=y.call(this),A.call(this),this.ix()},uw:function(t){this.height=t,this.height*=this.rw,this.Js=this.Ks=m.call(this),this.top=y.call(this),this.width=(this.pw-this.nw+1.5)*this.Js,this.left=v.call(this),A.call(this),this.ix()},sw:function(t,i){this.width=t||parseInt(this.vs.style.width,10),this.width*=this.rw,this.height=i||parseInt(this.vs.style.height,10),this.height*=this.rw,this.Js=b.call(this),this.Ks=m.call(this),this.left=v.call(this),this.top=y.call(this),A.call(this),this.ix()},jx:function(){return this.section},kx:function(t,i,n,e){this.section="object"==typeof t?t:{top:t,right:i,bottom:n,left:e},this.nw=this.section.left,this.ow=this.section.top,this.pw=this.size-1-this.section.right,this.qw=this.size-1-this.section.bottom,this.sw()},lx:function(t){var t=t||19;if(t!=this.size){this.size=t,this.Es=[];for(var i=0;i<this.size;i++){this.Es[i]=[];for(var n=0;n<this.size;n++)this.Es[i][n]=[]}this.pw=this.size-1-this.section.right,this.qw=this.size-1-this.section.bottom,this.sw()}},ix:function(){for(var t=0;t<this.ax.length;t++)this.ax[t].clear(this),this.ax[t].zw(this);for(var t=0;t<this.size;t++)for(var i=0;i<this.size;i++)x.call(this,t,i);for(var t=0;t<this.Fw.length;t++){var n=this.Fw[t],e=n.Kp;for(var r in e)e[r].zw.call(this[r].getContext(n.Gw),n.Gw,this)}},Aw:function(t){return this.left+t*this.Js},Bw:function(t){return this.top+t*this.Ks},hx:function(t,i){t.jo(this.vs,i),t.sw(this.width,this.height),this.ax.push(t)},mx:function(t){var i=this.ax.indexOf(t);i>=0&&(this.ax.splice(i,1),t.Yw(this.vs))},update:function(t){var i;if(t.remove&&"all"==t.remove)this.nx();else if(t.remove)for(i=0;i<t.remove.length;i++)this.Ds(t.remove[i]);if(t.add)for(i=0;i<t.add.length;i++)this.Fs(t.add[i])},Fs:function(t){if(t.constructor!=Array){w.call(this,t.x,t.y);for(var i=this.Es[t.x][t.y],n=0;n<i.length;n++)if(i[n].type==t.type)return i[n]=t,void x.call(this,t.x,t.y);t.type?i.push(t):i.unshift(t),x.call(this,t.x,t.y)}else for(var e=0;e<t.length;e++)this.Fs(t[e])},Ds:function(t){if(t.constructor!=Array){for(var i,n=0;n<this.Es[t.x][t.y].length;n++)if(this.Es[t.x][t.y][n].type==t.type){i=n;break}void 0!==i&&(w.call(this,t.x,t.y),this.Es[t.x][t.y].splice(i,1),x.call(this,t.x,t.y))}else for(var e=0;e<t.length;e++)this.Ds(t[e])},Ls:function(t,i){this.Es[t][i].length&&(w.call(this,t,i),this.Es[t][i]=[])},nx:function(){this.Es=[];for(var t=0;t<this.size;t++){this.Es[t]=[];for(var i=0;i<this.size;i++)this.Es[t][i]=[]}this.ix()},ss:function(t,i){this.Fw.push({Kp:t,Gw:i}),this.ix()},ox:function(t,i){for(var n=0;n<this.Fw.length;n++){var e=this.Fw[n];if(e.Kp==t&&e.Gw==i)return this.Fw.splice(n,1),this.ix(),!0}return!1},addEventListener:function(t,i){var n=this,e={type:t,px:i,qx:function(t){var e=k.call(n,t);i(e.x,e.y,t)}};this.vs.addEventListener(t,e,!0),this.gx.push(e)},removeEventListener:function(t,i){for(var n=0;n<this.gx.length;n++){var e=this.gx[n];if(e.type==t&&e.px==i)return this.vs.removeEventListener(e.type,e,!0),this.gx.splice(n,1),!0}return!1},sx:function(){return{tx:o.clone(this.Es),ux:o.clone(this.Fw)}},vx:function(t){this.Es=t.tx||this.Es,this.Fw=t.ux||this.Fw,this.ix()}},s.default={size:19,width:0,height:0,font:"Calibri",lineWidth:1,ww:!1,$w:{19:[{x:3,y:3},{x:9,y:3},{x:15,y:3},{x:3,y:9},{x:9,y:9},{x:15,y:9},{x:3,y:15},{x:9,y:15},{x:15,y:15}],13:[{x:3,y:3},{x:9,y:3},{x:3,y:9},{x:9,y:9}],9:[{x:4,y:4}]},Dw:s.Ew.Qw,starSize:1,shadowSize:1,stoneSize:1,section:{top:0,right:0,bottom:0,left:0},background:o.dw+"wood1.jpg",xp:{}},o.rs=s,t.WGo=o}(window)},{}],104:[function(t,i,n){var e,r,o,s=t("superagent"),h=t("es6-promise").Promise,a=t("./get-base-url"),u=t("./http-header-safe-json");s.parse["application/octect-stream"]=function(t){return t},e=function(t,i){return{status:t.status,error:(i?i.text:null)||t.toString(),response:i}},o=function(t,i){t.text="",t.wx("binary"),t.v("data",function(i){t.text+=i}),t.v("end",function(){i()})},r=function(t,i,n,r,c,p){if("user"!==n)throw new Error("Unexpected auth type: "+n);return new h(function(n,h){function l(t){n&&n(t)}function f(t){h&&h(t)}function d(t,i){var n;t?f(e(t,i)):(n=JSON.parse(i.headers["dropbox-api-result"]),i.xx?n.fileBlob=i.xx.response:n.yx=i.zx.text,l(n))}var g;g=s.Ax(a(r)+t).set("Authorization","Bearer "+c).set("Dropbox-API-Arg",u(i)).v("request",function(){this.xx&&(this.xx.responseType="blob")}),p&&(g=g.set("Dropbox-API-Select-User",p)),"undefined"==typeof window?g.buffer(!0).parse(o).end(d):g.end(d)})},i.g=r},{"./get-base-url":107,"./http-header-safe-json":108,"es6-promise":138,"superagent":142}],105:[function(t,i,n){var e,r=t("./request-constants");t("./object-assign-polyfill"),e=function(t){t=t||{},this.accessToken=t.accessToken,this.clientId=t.clientId,this.Bx=t.Bx},e.prototype.Cx=function(t){this.accessToken=t},e.prototype.Dx=function(){return this.accessToken},e.prototype.Ex=function(t){this.clientId=t},e.prototype.Fx=function(){return this.clientId},e.prototype.dr=function(t,i){var n,e=this.Fx();if(!e)throw new Error("A client id is required. You can set the client id using .setClientId().");if(!t)throw new Error("A redirect uri is required.");return n="https://www.dropbox.com/oauth2/authorize?response_type=token&client_id="+e,t&&(n=n+"&redirect_uri="+t),i&&(n=n+"&state="+i),n},e.prototype.Gx=function(t,i,n,e,o){var s=null;switch(o){case r.Hx:s=this.Ix();break;case r.Jx:s=this.Kx();break;case r.Lx:s=this.Mx();break;default:throw new Error("Invalid request style: "+o)}return s(t,i,n,e,this.Dx(),this.Bx)},e.prototype.Nx=function(t){e.prototype.Ox=t},e.prototype.Ix=function(){return void 0===e.prototype.Ox&&(e.prototype.Ox=t("./rpc-request")),e.prototype.Ox},e.prototype.Px=function(t){e.prototype.Qx=t},e.prototype.Kx=function(){return void 0===e.prototype.Qx&&(e.prototype.Qx=t("./download-request")),e.prototype.Qx},e.prototype.Rx=function(t){e.prototype.Sx=t},e.prototype.Mx=function(){return void 0===e.prototype.Sx&&(e.prototype.Sx=t("./upload-request")),e.prototype.Sx},i.g=e},{"./download-request":104,"./object-assign-polyfill":110,"./request-constants":111,"./rpc-request":113,"./upload-request":114}],106:[function(t,i,n){var e,r=t("./dropbox-base"),o=t("./routes");e=function(t){r.call(this,t)},e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype=Object.assign(e.prototype,o),e.prototype.Tx=function(t){return this.Gx("sharing/get_shared_link_file",t,"api","download")},i.g=e},{"./dropbox-base":105,"./routes":112}],107:[function(t,i,n){function e(t){return"https://"+t+".dropboxapi.com/2/"}i.g=e},{}],108:[function(t,i,n){function e(t){return JSON.stringify(t).replace(r,function(t){return"\\u"+("000"+t.charCodeAt(0).toString(16)).slice(-4)})}var r=/[\u007f-\uffff]/g;i.g=e},{}],109:[function(t,i,n){var e=t("./dropbox");i.g=e},{"./dropbox":106}],110:[function(t,i,n){"function"!=typeof Object.assign&&function(){Object.assign=function(t){"use strict";var i,n,e,r;if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(i=Object(t),n=1;n<arguments.length;n++)if(void 0!==(e=arguments[n])&&null!==e)for(r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);return i}}()},{}],111:[function(t,i,n){var e={Hx:"rpc",Jx:"download",Lx:"upload"};i.g=e},{}],112:[function(t,i,n){var e={};e.Ux=function(t){return this.Gx("auth/token/from_oauth1",t,"app","api","rpc")},e.Vx=function(t){return this.Gx("auth/token/revoke",t,"user","api","rpc")},e.Wx=function(t){return this.Gx("files/alpha/get_metadata",t,"user","api","rpc")},e.Xx=function(t){return this.Gx("files/alpha/upload",t,"user","content","upload")},e.Yx=function(t){return this.Gx("files/copy",t,"user","api","rpc")},e.Zx=function(t){return this.Gx("files/copy_batch",t,"user","api","rpc")},e.$x=function(t){return this.Gx("files/copy_batch/check",t,"user","api","rpc")},e._x=function(t){return this.Gx("files/copy_reference/get",t,"user","api","rpc")},e.ay=function(t){return this.Gx("files/copy_reference/save",t,"user","api","rpc")},e.rr=function(t){return this.Gx("files/create_folder",t,"user","api","rpc")},e.tr=function(t){return this.Gx("files/delete",t,"user","api","rpc")},e.by=function(t){return this.Gx("files/delete_batch",t,"user","api","rpc")},e.ey=function(t){return this.Gx("files/delete_batch/check",t,"user","api","rpc")},e.or=function(t){return this.Gx("files/download",t,"user","content","download")},e.gy=function(t){return this.Gx("files/get_metadata",t,"user","api","rpc")},e.hy=function(t){return this.Gx("files/get_preview",t,"user","content","download")},e.iy=function(t){return this.Gx("files/get_temporary_link",t,"user","api","rpc")},e.jy=function(t){return this.Gx("files/get_thumbnail",t,"user","content","download")},e.jr=function(t){return this.Gx("files/list_folder",t,"user","api","rpc")},e.ky=function(t){return this.Gx("files/list_folder/continue",t,"user","api","rpc")},e.ly=function(t){return this.Gx("files/list_folder/get_latest_cursor",t,"user","api","rpc")},e.my=function(t){return this.Gx("files/list_folder/longpoll",t,"noauth","notify","rpc")},e.ny=function(t){return this.Gx("files/list_revisions",t,"user","api","rpc")},e.vr=function(t){return this.Gx("files/move",t,"user","api","rpc")},e.oy=function(t){return this.Gx("files/move_batch",t,"user","api","rpc")},e.py=function(t){return this.Gx("files/move_batch/check",t,"user","api","rpc")},e.qy=function(t){return this.Gx("files/permanently_delete",t,"user","api","rpc")},e.sy=function(t){
return this.Gx("files/properties/add",t,"user","api","rpc")},e.ty=function(t){return this.Gx("files/properties/overwrite",t,"user","api","rpc")},e.uy=function(t){return this.Gx("files/properties/remove",t,"user","api","rpc")},e.vy=function(t){return this.Gx("files/properties/template/get",t,"user","api","rpc")},e.wy=function(t){return this.Gx("files/properties/template/list",t,"user","api","rpc")},e.xy=function(t){return this.Gx("files/properties/update",t,"user","api","rpc")},e.yy=function(t){return this.Gx("files/restore",t,"user","api","rpc")},e.zy=function(t){return this.Gx("files/save_url",t,"user","api","rpc")},e.Ay=function(t){return this.Gx("files/save_url/check_job_status",t,"user","api","rpc")},e.By=function(t){return this.Gx("files/search",t,"user","api","rpc")},e.pr=function(t){return this.Gx("files/upload",t,"user","content","upload")},e.Cy=function(t){return this.Gx("files/upload_session/append",t,"user","content","upload")},e.Dy=function(t){return this.Gx("files/upload_session/append_v2",t,"user","content","upload")},e.Ey=function(t){return this.Gx("files/upload_session/finish",t,"user","content","upload")},e.Fy=function(t){return this.Gx("files/upload_session/finish_batch",t,"user","api","rpc")},e.Gy=function(t){return this.Gx("files/upload_session/finish_batch/check",t,"user","api","rpc")},e.Hy=function(t){return this.Gx("files/upload_session/start",t,"user","content","upload")},e.Iy=function(t){return this.Gx("paper/docs/archive",t,"user","api","rpc")},e.Jy=function(t){return this.Gx("paper/docs/download",t,"user","api","download")},e.Ky=function(t){return this.Gx("paper/docs/folder_users/list",t,"user","api","rpc")},e.Ly=function(t){return this.Gx("paper/docs/folder_users/list/continue",t,"user","api","rpc")},e.My=function(t){return this.Gx("paper/docs/get_folder_info",t,"user","api","rpc")},e.Ny=function(t){return this.Gx("paper/docs/list",t,"user","api","rpc")},e.Oy=function(t){return this.Gx("paper/docs/list/continue",t,"user","api","rpc")},e.Py=function(t){return this.Gx("paper/docs/permanently_delete",t,"user","api","rpc")},e.Qy=function(t){return this.Gx("paper/docs/sharing_policy/get",t,"user","api","rpc")},e.Ry=function(t){return this.Gx("paper/docs/sharing_policy/set",t,"user","api","rpc")},e.Sy=function(t){return this.Gx("paper/docs/users/add",t,"user","api","rpc")},e.Ty=function(t){return this.Gx("paper/docs/users/list",t,"user","api","rpc")},e.Uy=function(t){return this.Gx("paper/docs/users/list/continue",t,"user","api","rpc")},e.Vy=function(t){return this.Gx("paper/docs/users/remove",t,"user","api","rpc")},e.Wy=function(t){return this.Gx("sharing/add_file_member",t,"user","api","rpc")},e.Xy=function(t){return this.Gx("sharing/add_folder_member",t,"user","api","rpc")},e.Yy=function(t){return this.Gx("sharing/change_file_member_access",t,"user","api","rpc")},e.Zy=function(t){return this.Gx("sharing/check_job_status",t,"user","api","rpc")},e.$y=function(t){return this.Gx("sharing/check_remove_member_job_status",t,"user","api","rpc")},e._y=function(t){return this.Gx("sharing/check_share_job_status",t,"user","api","rpc")},e.az=function(t){return this.Gx("sharing/create_shared_link",t,"user","api","rpc")},e.bz=function(t){return this.Gx("sharing/create_shared_link_with_settings",t,"user","api","rpc")},e.cz=function(t){return this.Gx("sharing/get_file_metadata",t,"user","api","rpc")},e.dz=function(t){return this.Gx("sharing/get_file_metadata/batch",t,"user","api","rpc")},e.ez=function(t){return this.Gx("sharing/get_folder_metadata",t,"user","api","rpc")},e.fz=function(t){return this.Gx("sharing/get_shared_link_file",t,"user","content","download")},e.gz=function(t){return this.Gx("sharing/get_shared_link_metadata",t,"user","api","rpc")},e.hz=function(t){return this.Gx("sharing/get_shared_links",t,"user","api","rpc")},e.iz=function(t){return this.Gx("sharing/list_file_members",t,"user","api","rpc")},e.jz=function(t){return this.Gx("sharing/list_file_members/batch",t,"user","api","rpc")},e.kz=function(t){return this.Gx("sharing/list_file_members/continue",t,"user","api","rpc")},e.lz=function(t){return this.Gx("sharing/list_folder_members",t,"user","api","rpc")},e.mz=function(t){return this.Gx("sharing/list_folder_members/continue",t,"user","api","rpc")},e.nz=function(t){return this.Gx("sharing/list_folders",t,"user","api","rpc")},e.oz=function(t){return this.Gx("sharing/list_folders/continue",t,"user","api","rpc")},e.pz=function(t){return this.Gx("sharing/list_mountable_folders",t,"user","api","rpc")},e.qz=function(t){return this.Gx("sharing/list_mountable_folders/continue",t,"user","api","rpc")},e.rz=function(t){return this.Gx("sharing/list_received_files",t,"user","api","rpc")},e.sz=function(t){return this.Gx("sharing/list_received_files/continue",t,"user","api","rpc")},e.tz=function(t){return this.Gx("sharing/list_shared_links",t,"user","api","rpc")},e.uz=function(t){return this.Gx("sharing/modify_shared_link_settings",t,"user","api","rpc")},e.vz=function(t){return this.Gx("sharing/mount_folder",t,"user","api","rpc")},e.wz=function(t){return this.Gx("sharing/relinquish_file_membership",t,"user","api","rpc")},e.xz=function(t){return this.Gx("sharing/relinquish_folder_membership",t,"user","api","rpc")},e.yz=function(t){return this.Gx("sharing/remove_file_member",t,"user","api","rpc")},e.zz=function(t){return this.Gx("sharing/remove_file_member_2",t,"user","api","rpc")},e.Az=function(t){return this.Gx("sharing/remove_folder_member",t,"user","api","rpc")},e.Bz=function(t){return this.Gx("sharing/revoke_shared_link",t,"user","api","rpc")},e.Cz=function(t){return this.Gx("sharing/share_folder",t,"user","api","rpc")},e.Dz=function(t){return this.Gx("sharing/transfer_folder",t,"user","api","rpc")},e.Ez=function(t){return this.Gx("sharing/unmount_folder",t,"user","api","rpc")},e.Fz=function(t){return this.Gx("sharing/unshare_file",t,"user","api","rpc")},e.Gz=function(t){return this.Gx("sharing/unshare_folder",t,"user","api","rpc")},e.Hz=function(t){return this.Gx("sharing/update_file_member",t,"user","api","rpc")},e.Iz=function(t){return this.Gx("sharing/update_folder_member",t,"user","api","rpc")},e.Jz=function(t){return this.Gx("sharing/update_folder_policy",t,"user","api","rpc")},e.Kz=function(t){return this.Gx("users/get_account",t,"user","api","rpc")},e.Lz=function(t){return this.Gx("users/get_account_batch",t,"user","api","rpc")},e.Mz=function(t){return this.Gx("users/get_current_account",t,"user","api","rpc")},e.Nz=function(t){return this.Gx("users/get_space_usage",t,"user","api","rpc")},i.g=e},{}],113:[function(t,i,n){var e=t("superagent"),r=t("es6-promise").Promise,o=t("./get-base-url"),s=function(t,i){return{status:t.status,error:(i?i.text:null)||t.toString(),response:i}},h=function(t,i,n,h,a,u){return new r(function(r,c){function p(t){r&&r(t)}function l(t){c&&c(t)}function f(t,i){t?l(s(t,i)):p(i.body)}var d;switch(i||(i=null),d=e.Ax(o(h)+t).type("application/json"),n){case"team":case"user":d.set("Authorization","Bearer "+a);break;case"noauth":break;default:throw new Error("Unhandled auth type: "+n)}u&&(d=d.set("Dropbox-API-Select-User",u)),d.send(i).end(f)})};i.g=h},{"./get-base-url":107,"es6-promise":138,"superagent":142}],114:[function(t,i,n){var e=t("superagent"),r=t("es6-promise").Promise,o=t("./get-base-url"),s=t("./http-header-safe-json"),h=function(t,i){return{status:t.status,error:(i?i.text:null)||t.toString(),response:i}},a=function(t,i,n,a,u,c){if("user"!==n)throw new Error("Unexpected auth type: "+n);return new r(function(n,r){function p(t){n&&n(t)}function l(t){r&&r(t)}function f(t,i){t?l(h(t,i)):p(i.body)}var d,g=i.contents;delete i.contents,d=e.Ax(o(a)+t).type("application/octet-stream").set("Authorization","Bearer "+u).set("Dropbox-API-Arg",s(i)),c&&(d=d.set("Dropbox-API-Select-User",c)),d.send(g).end(f)})};i.g=a},{"./get-base-url":107,"./http-header-safe-json":108,"es6-promise":138,"superagent":142}],115:[function(t,i,n){function e(t){if(t)return r(t)}function r(t){for(var i in e.prototype)t[i]=e.prototype[i];return t}void 0!==i&&(i.g=e),e.prototype.v=e.prototype.addEventListener=function(t,i){return this.Oz=this.Oz||{},(this.Oz["$"+t]=this.Oz["$"+t]||[]).push(i),this},e.prototype.A=function(t,i){function n(){this.C(t,n),i.apply(this,arguments)}return n.Pz=i,this.v(t,n),this},e.prototype.C=e.prototype.removeListener=e.prototype.D=e.prototype.removeEventListener=function(t,i){if(this.Oz=this.Oz||{},0==arguments.length)return this.Oz={},this;var n=this.Oz["$"+t];if(!n)return this;if(1==arguments.length)return delete this.Oz["$"+t],this;for(var e,r=0;r<n.length;r++)if((e=n[r])===i||e.Pz===i){n.splice(r,1);break}return this},e.prototype.F=function(t){this.Oz=this.Oz||{};var i=[].slice.call(arguments,1),n=this.Oz["$"+t];if(n){n=n.slice(0);for(var e=0,r=n.length;e<r;++e)n[e].apply(this,i)}return this},e.prototype.gx=function(t){return this.Oz=this.Oz||{},this.Oz["$"+t]||[]},e.prototype.Qz=function(t){return!!this.gx(t).length}},{}],116:[function(t,i,n){i.g=1/0},{}],117:[function(t,i,n){i.g=1},{}],118:[function(t,i,n){"use strict";var e=t("./_map");i.g=function(t){function i(t,i){return function(t){i(t)}}return e(t,i)}},{"./_map":120}],119:[function(t,i,n){"use strict";var e=t("./a"),r=t("./_map");i.g=function(t){function i(t,i){return function(n,r){function o(t,i){return!!r[i]}if(n)return void i(n);i(null,e(r)?t.filter(o):function(){var i={};return Object.keys(t).forEach(function(n){o(null,n)&&(i[n]=t[n])}),i}())}}return r(t,i)}},{"./_map":120,"./a":121}],120:[function(t,i,n){"use strict";var e=t("./a"),r=t("./once"),o=t("./concurrent"),s=t("./CONCURRENTLY"),h=t("./SERIAL");i.g=function t(i,n,a){function u(t,h,a,u){var c=arguments;2===c.length&&(a=h,h=s),3===c.length&&"number"!=typeof h&&(u=a,a=h,h=s);var p=Object.keys(t),l=e(t)?[]:{};p.forEach(function(i){l[i]=function(n){3===a.length?a(t[i],i,n):a(t[i],n)}}),o(l,i||h,n?n(t,r(u)):u)}return a||(u.Vr=t(h,n,!0)),u}},{"./CONCURRENTLY":116,"./SERIAL":117,"./a":121,"./concurrent":122,"./once":134}],121:[function(t,i,n){"use strict";i.g=function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],122:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./a"),o=t("./once"),s=t("./queue"),h=t("./errored"),a=t("./debounce"),u=t("./CONCURRENTLY");i.g=function(t,i,n){function c(i,n){function r(){var t=e(arguments);h(t,p)||(d[i]=t.shift(),n())}a(t[i],[r])}"function"==typeof i&&(n=i,i=u);var p=o(n),l=s(c,i),f=Object.keys(t),d=r(t)?[]:{};l.unshift(f),l.v("drain",function(){p(null,d)})}},{"./CONCURRENTLY":116,"./a":121,"./debounce":125,"./errored":128,"./once":134,"./queue":135,"atoa":131}],123:[function(t,i,n){"use strict";i.g={Rz:t("./curry"),Sz:t("./concurrent"),Vr:t("./series"),Tz:t("./waterfall"),_r:t("./each"),map:t("./map"),filter:t("./filter"),Uz:t("./queue"),emitter:t("./emitter")}},{"./concurrent":122,"./curry":124,"./each":126,"./emitter":127,"./filter":129,"./map":130,"./queue":135,"./series":136,"./waterfall":137}],124:[function(t,i,n){"use strict";var e=t("atoa");i.g=function(){var t=e(arguments),i=t.shift();return function(){var n=e(arguments);i.apply(i,t.concat(n))}}},{"atoa":131}],125:[function(t,i,n){"use strict";var e=t("ticky");i.g=function(t,i,n){t&&e(function(){t.apply(n||null,i||[])})}},{"ticky":132}],126:[function(t,i,n){"use strict";i.g=t("./_each")()},{"./_each":118}],127:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./debounce");i.g=function(t,i){var n=i||{},o={};return void 0===t&&(t={}),t.v=function(i,n){return o[i]?o[i].push(n):o[i]=[n],t},t.A=function(i,n){return n.Vz=!0,t.v(i,n),t},t.C=function(i,n){var e=arguments.length;if(1===e)delete o[i];else if(0===e)o={};else{var r=o[i];if(!r)return t;r.splice(r.indexOf(n),1)}return t},t.F=function(){var i=e(arguments);return t.Wz(i.shift()).apply(this,i)},t.Wz=function(i){var s=(o[i]||[]).slice(0);return function(){var o=e(arguments),h=this||t;if("error"===i&&n.throws!==!1&&!s.length)throw 1===o.length?o[0]:o;return s.forEach(function(e){n.async?r(e,o,h):e.apply(h,o),e.Vz&&t.C(i,e)}),t}},t}},{"./debounce":125,"atoa":131}],128:[function(t,i,n){"use strict";var e=t("./debounce");i.g=function(t,i,n){var r=t.shift();if(r)return n&&n.Xz(),e(i,[r]),!0}},{"./debounce":125}],129:[function(t,i,n){"use strict";i.g=t("./_filter")()},{"./_filter":119}],130:[function(t,i,n){"use strict";i.g=t("./_map")()},{"./_map":120}],131:[function(t,i,n){i.g=function(t,i){return Array.prototype.slice.call(t,i)}},{}],132:[function(t,i,n){var e,r="function"==typeof setImmediate;e=r?function(t){setImmediate(t)}:function(t){setTimeout(t,0)},i.g=e},{}],133:[function(t,i,n){"use strict";i.g=function(){}},{}],134:[function(t,i,n){"use strict";var e=t("./noop");i.g=function(t){function i(){n||(n=!0,(t||e).apply(null,arguments))}var n;return i.Xz=function(){n=!0},i}},{"./noop":133}],135:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./a"),o=t("./once"),s=t("./emitter"),h=t("./debounce");i.g=function(t,i){function n(t,i,n){(r(i)?i:[i]).forEach(function(i){p[t]({jw:i,done:n})}),h(a)}function a(){if(!(c||l>=f)){if(!p.length)return void(0===l&&d.F("drain"));l++;var i=p.pop();t(i.jw,o(u.bind(null,i))),h(a)}}function u(t){l--,h(t.done,e(arguments,1)),h(a)}var c,p=[],l=0,f=i||1,d=s({push:n.bind(null,"push"),unshift:n.bind(null,"unshift"),pause:function(){c=!0},resume:function(){c=!1,h(a)},pending:p});return Object.defineProperty&&!Object.Yz&&Object.defineProperty(d,"length",{get:function(){return p.length}}),d}},{"./a":121,"./debounce":125,"./emitter":127,"./once":134,"atoa":131}],136:[function(t,i,n){"use strict";var e=t("./concurrent"),r=t("./SERIAL");i.g=function(t,i){e(t,r,i)}},{"./SERIAL":117,"./concurrent":122}],137:[function(t,i,n){"use strict";var e=t("atoa"),r=t("./once"),o=t("./errored"),s=t("./debounce");i.g=function(t,i){function n(){var i=e(arguments),a=t.shift();if(a){if(o(i,h))return;i.push(r(n)),s(a,i)}else s(h,arguments)}var h=r(i);n()}},{"./debounce":125,"./errored":128,"./once":134,"atoa":131}],138:[function(t,i,n){(function(e,r){!function(t,e){"object"==typeof n&&void 0!==i?i.g=e():"function"==typeof define&&define.Zz?define(e):t.$z=e()}(this,function(){"use strict";function i(t){return"function"==typeof t||"object"==typeof t&&null!==t}function n(t){return"function"==typeof t}function o(t){H=t}function s(t){V=t}function h(){return function(){N(u)}}function a(){var t=setTimeout;return function(){return t(u,1)}}function u(){for(var t=0;t<W;t+=2){(0,K[t])(K[t+1]),K[t]=void 0,K[t+1]=void 0}W=0}function c(t,i){var n=arguments,e=this,r=new this.constructor(l);void 0===r[tt]&&D(r);var o=e.bA;return o?function(){var t=n[o-1];V(function(){return S(o,r,t,e.cA)})}():j(e,r,t,i),r}function p(t){var i=this;if(t&&"object"==typeof t&&t.constructor===i)return t;var n=new i(l);return w(n,t),n}function l(){}function f(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function g(t){try{return t.then}catch(t){return rt.error=t,rt}}function v(t,i,n,e){try{t.call(i,n,e)}catch(t){return t}}function y(t,i,n){V(function(t){var e=!1,r=v(n,i,function(n){e||(e=!0,i!==n?w(t,n):k(t,n))},function(i){e||(e=!0,A(t,i))},"Settle: "+(t.zo||" unknown promise"));!e&&r&&(e=!0,A(t,r))},t)}function b(t,i){i.bA===nt?k(t,i.cA):i.bA===et?A(t,i.cA):j(i,void 0,function(i){return w(t,i)},function(i){return A(t,i)})}function m(t,i,e){i.constructor===t.constructor&&e===c&&i.constructor.resolve===p?b(t,i):e===rt?A(t,rt.error):void 0===e?k(t,i):n(e)?y(t,i,e):k(t,i)}function w(t,n){t===n?A(t,f()):i(n)?m(t,n,g(n)):k(t,n)}function x(t){t.dA&&t.dA(t.cA),E(t)}function k(t,i){t.bA===it&&(t.cA=i,t.bA=nt,0!==t.eA.length&&V(E,t))}function A(t,i){t.bA===it&&(t.bA=et,t.cA=i,V(x,t))}function j(t,i,n,e){var r=t.eA,o=r.length;t.dA=null,r[o]=i,r[o+nt]=n,r[o+et]=e,0===o&&t.bA&&V(E,t)}function E(t){var i=t.eA,n=t.bA;if(0!==i.length){for(var e=void 0,r=void 0,o=t.cA,s=0;s<i.length;s+=3)e=i[s],r=i[s+n],e?S(n,e,r,o):r(o);t.eA.length=0}}function G(){this.error=null}function M(t,i){try{return t(i)}catch(t){return ot.error=t,ot}}function S(t,i,e,r){var o=n(e),s=void 0,h=void 0,a=void 0,u=void 0;if(o){if(s=M(e,r),s===ot?(u=!0,h=s.error,s=null):a=!0,i===s)return void A(i,d())}else s=r,a=!0;i.bA!==it||(o&&a?w(i,s):u?A(i,h):t===nt?k(i,s):t===et&&A(i,s))}function q(t,i){try{i(function(i){w(t,i)},function(i){A(t,i)})}catch(i){A(t,i)}}function C(){return st++}function D(t){t[tt]=st++,t.bA=void 0,t.cA=void 0,t.eA=[]}function B(t,i){this.fA=t,this.gA=new t(l),this.gA[tt]||D(this.gA),R(i)?(this.hA=i,this.length=i.length,this.iA=i.length,this.cA=new Array(this.length),0===this.length?k(this.gA,this.cA):(this.length=this.length||0,this.jA(),0===this.iA&&k(this.gA,this.cA))):A(this.gA,z())}function z(){return new Error("Array Methods must be provided an Array")}function T(t){return new B(this,t).gA}function _(t){var i=this;return new i(R(t)?function(n,e){for(var r=t.length,o=0;o<r;o++)i.resolve(t[o]).then(n,e)}:function(t,i){return i(new TypeError("You must pass an array to race."))})}function I(t){var i=this,n=new i(l);return A(n,t),n}function L(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function O(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function P(t){this[tt]=C(),this.cA=this.bA=void 0,this.eA=[],l!==t&&("function"!=typeof t&&L(),this instanceof P?q(this,t):O())}function U(){var t=void 0;if(void 0!==r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var i=t.Promise;if(i){var n=null;try{n=Object.prototype.toString.call(i.resolve())}catch(t){}if("[object Promise]"===n&&!i.cast)return}t.Promise=P}var $=void 0;$=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var R=$,W=0,N=void 0,H=void 0,V=function(t,i){K[W]=t,K[W+1]=i,2===(W+=2)&&(H?H(u):X())},Q="undefined"!=typeof window?window:void 0,F=Q||{},Y=F.MutationObserver||F.WebKitMutationObserver,Z="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),J="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,K=new Array(1e3),X=void 0;X=Z?function(){return function(){return e.m(u)}}():Y?function(){var t=0,i=new Y(u),n=document.createTextNode("");return i.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():J?function(){var t=new MessageChannel;return t.port1.onmessage=u,function(){return t.port2.postMessage(0)}}():void 0===Q&&"function"==typeof t?function(){try{var i=t,n=i("vertx");return N=n._z||n.aA,h()}catch(t){return a()}}():a();var tt=Math.random().toString(36).substring(16),it=void 0,nt=1,et=2,rt=new G,ot=new G,st=0;return B.prototype.jA=function(){for(var t=this.length,i=this.hA,n=0;this.bA===it&&n<t;n++)this.kA(i[n],n)},B.prototype.kA=function(t,i){var n=this.fA,e=n.resolve;if(e===p){var r=g(t);if(r===c&&t.bA!==it)this.lA(t.bA,i,t.cA);else if("function"!=typeof r)this.iA--,this.cA[i]=t;else if(n===P){var o=new n(l);m(o,t,r),this.mA(o,i)}else this.mA(new n(function(i){return i(t)}),i)}else this.mA(e(t),i)},B.prototype.lA=function(t,i,n){var e=this.gA;e.bA===it&&(this.iA--,t===et?A(e,n):this.cA[i]=n),0===this.iA&&k(e,this.cA)},B.prototype.mA=function(t,i){var n=this;j(t,void 0,function(t){return n.lA(nt,i,t)},function(t){return n.lA(et,i,t)})},P.all=T,P.race=_,P.resolve=p,P.reject=I,P.nA=o,P.oA=s,P.pA=V,P.prototype={constructor:P,then:c,"catch":function(t){return this.then(null,t)}},U(),P.qA=U,P.Promise=P,P})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"_process":2}],139:[function(t,i,n){i.g=function(t,i){var n=i||document;if(n.createStyleSheet){var e=n.createStyleSheet();return e.cssText=t,e.ownerNode}var r=n.getElementsByTagName("head")[0],o=n.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(n.createTextNode(t)),r.appendChild(o),o},i.g.rA=function(t){if(document.createStyleSheet)return document.createStyleSheet(t).ownerNode;var i=document.getElementsByTagName("head")[0],n=document.createElement("link");return n.rel="stylesheet",n.href=t,i.appendChild(n),n}},{}],140:[function(t,i,n){i.g=t("cssify")},{"cssify":139}],141:[function(t,i,n){i.g=function(t,i,n){for(var e=0,r=t.length,o=3==arguments.length?n:t[e++];e<r;)o=i.call(null,o,t[e],++e,t);return o}},{}],142:[function(t,i,n){function e(){}function r(t){switch({}.toString.call(t)){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(t){if(!m(t))return t;var i=[];for(var n in t)null!=t[n]&&s(i,n,t[n]);return i.join("&")}function s(t,i,n){if(Array.isArray(n))return n.forEach(function(n){s(t,i,n)});t.push(encodeURIComponent(i)+"="+encodeURIComponent(n))}function h(t){for(var i,n,e={},r=t.split("&"),o=0,s=r.length;o<s;++o)n=r[o],i=n.split("="),e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]);return e}function a(t){var i,n,e,r,o=t.split(/\r?\n/),s={};o.pop();for(var h=0,a=o.length;h<a;++h)n=o[h],i=n.indexOf(":"),e=n.slice(0,i).toLowerCase(),r=x(n.slice(i+1)),s[e]=r;return s}function u(t){return/[\/+]json\b/.test(t)}function c(t){return t.split(/ *; */).shift()}function p(t){return y(t.split(/ *; */),function(t,i){var n=i.split(/ *= */),e=n.shift(),r=n.shift();return e&&r&&(t[e]=r),t},{})}function l(t,i){i=i||{},this.yA=t,this.xx=this.yA.xx,this.text="HEAD"!=this.yA.method&&(""===this.xx.responseType||"text"===this.xx.responseType)||void 0===this.xx.responseType?this.xx.responseText:null,this.statusText=this.yA.xx.statusText,this.zA(this.xx.status),this.AA=this.headers=a(this.xx.getAllResponseHeaders()),this.AA["content-type"]=this.xx.getResponseHeader("content-type"),this.BA(this.AA),this.body="HEAD"!=this.yA.method?this.CA(this.text?this.text:this.xx.response):null}function f(t,i){var n=this;this.PA=this.PA||[],this.method=t,this.url=i,this.AA={},this.QA={},this.v("end",function(){var t=null,i=null;try{i=new l(n)}catch(i){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.RA=i,t.SA=n.xx&&n.xx.responseText?n.xx.responseText:null,t.DA=n.xx&&n.xx.status?n.xx.status:null,n.px(t)}if(n.F("response",i),t)return n.px(t,i);if(i.status>=200&&i.status<300)return n.px(t,i);var e=new Error(i.statusText||"Unsuccessful HTTP response");e.RA=t,e.response=i,e.status=i.status,n.px(e,i)})}function d(t,i){var n=w("DELETE",t);return i&&n.end(i),n}var g,v=t("emitter"),y=t("reduce"),b=t("./request-base"),m=t("./is-object");g="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var w=i.g=t("./request").bind(null,f);w.sA=function(){if(!(!g.XMLHttpRequest||g.location&&"file:"==g.location.protocol&&g.tA))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1};var x="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};w.uA=o,w.vA=h,w.types={to:"text/html",json:"application/json",wA:"application/xml",xA:"application/x-www-form-urlencoded","form":"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},w.ya={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify},w.parse={"application/x-www-form-urlencoded":h,"application/json":JSON.parse},l.prototype.get=function(t){return this.AA[t.toLowerCase()]},l.prototype.BA=function(t){var i=this.AA["content-type"]||"";this.type=c(i);var n=p(i);for(var e in n)this[e]=n[e]},l.prototype.CA=function(t){var i=w.parse[this.type];return!i&&u(this.type)&&(i=w.parse["application/json"]),i&&t&&(t.length||t instanceof Object)?i(t):null},l.prototype.zA=function(t){1223===t&&(t=204);var i=t/100|0;this.status=this.DA=t,this.EA=i,this.info=1==i,this.ok=2==i,this.FA=4==i,this.GA=5==i,this.error=(4==i||5==i)&&this.HA(),this.IA=202==t,this.JA=204==t,this.KA=400==t,this.LA=401==t,this.MA=406==t,this.NA=404==t,this.OA=403==t},l.prototype.HA=function(){var t=this.yA,i=t.method,n=t.url,e="cannot "+i+" "+n+" ("+this.status+")",r=new Error(e);return r.status=this.status,r.method=i,r.url=n,r},w.Response=l,v(f.prototype);for(var k in b)f.prototype[k]=b[k];f.prototype.abort=function(){if(!this.TA)return this.TA=!0,this.xx&&this.xx.abort(),this.clearTimeout(),this.F("abort"),this},f.prototype.type=function(t){return this.set("Content-Type",w.types[t]||t),this},f.prototype.responseType=function(t){return this.UA=t,this},f.prototype.accept=function(t){return this.set("Accept",w.types[t]||t),this},f.prototype.VA=function(t,i,n){switch(n||(n={type:"basic"}),n.type){case"basic":var e=btoa(t+":"+i);this.set("Authorization","Basic "+e);break;case"auto":this.username=t,this.password=i}return this},f.prototype.WA=function(t){return"string"!=typeof t&&(t=o(t)),t&&this.PA.push(t),this},f.prototype.XA=function(t,i,n){return this.YA().append(t,i,n||i.name),this},f.prototype.YA=function(){return this.ZA||(this.ZA=new g.FormData),this.ZA},f.prototype.send=function(t){var i=m(t),n=this.QA["content-type"];if(i&&m(this.$A))for(var e in t)this.$A[e]=t[e];else"string"==typeof t?(n||this.type("form"),n=this.QA["content-type"],this.$A="application/x-www-form-urlencoded"==n?this.$A?this.$A+"&"+t:t:(this.$A||"")+t):this.$A=t;return!i||r(t)?this:(n||this.type("json"),this)},l.prototype.parse=function(t){return g.console&&console.warn("Client-side parse() method has been renamed to serialize(). This method is not compatible with superagent v2.0"),this.ya(t),this},l.prototype.ya=function(t){return this._A=t,this},f.prototype.px=function(t,i){var n=this.aB;this.clearTimeout(),n(t,i)},f.prototype.bB=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.cB=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.px(t)},f.prototype.dB=function(){var t=this.eB,i=new Error("timeout of "+t+"ms exceeded");i.timeout=t,this.px(i)},f.prototype.withCredentials=function(){return this.fB=!0,this},f.prototype.end=function(t){var i=this,n=this.xx=w.sA(),o=this.PA.join("&"),s=this.eB,h=this.ZA||this.$A;this.aB=t||e,n.onreadystatechange=function(){if(4==n.readyState){var t;try{t=n.status}catch(i){t=0}if(0==t){if(i.gB)return i.dB();if(i.TA)return;return i.bB()}i.F("end")}};var a=function(t){t.total>0&&(t.hB=t.loaded/t.total*100),t.direction="download",i.F("progress",t)};this.Qz("progress")&&(n.onprogress=a);try{n.upload&&this.Qz("progress")&&(n.upload.onprogress=a)}catch(t){}if(s&&!this.iB&&(this.iB=setTimeout(function(){i.gB=!0,i.abort()},s)),o&&(o=w.uA(o),this.url+=~this.url.indexOf("?")?"&"+o:"?"+o),this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0),this.fB&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof h&&!r(h)){var c=this.QA["content-type"],p=this._A||w.ya[c?c.split(";")[0]:""];!p&&u(c)&&(p=w.ya["application/json"]),p&&(h=p(h))}for(var l in this.AA)null!=this.AA[l]&&n.setRequestHeader(l,this.AA[l]);return this.UA&&(n.responseType=this.UA),this.F("request",this),n.send(void 0!==h?h:null),this},w.Request=f,w.get=function(t,i,n){var e=w("GET",t);return"function"==typeof i&&(n=i,i=null),i&&e.WA(i),n&&e.end(n),e},w.head=function(t,i,n){var e=w("HEAD",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e},w["del"]=d,w["delete"]=d,w.jB=function(t,i,n){var e=w("PATCH",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e},w.Ax=function(t,i,n){var e=w("POST",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e},w.put=function(t,i,n){var e=w("PUT",t);return"function"==typeof i&&(n=i,i=null),i&&e.send(i),n&&e.end(n),e}},{"./is-object":143,"./request":145,"./request-base":144,"emitter":115,"reduce":141}],143:[function(t,i,n){function e(t){return null!=t&&"object"==typeof t}i.g=e},{}],144:[function(t,i,n){var e=t("./is-object");n.clearTimeout=function(){return this.eB=0,clearTimeout(this.iB),this},n.parse=function(t){return this._A=t,this},n.timeout=function(t){return this.eB=t,this},n.then=function(t,i){return this.end(function(n,e){n?i(n):t(e)})},n.kB=function(t){return t(this),this},n.get=function(t){return this.QA[t.toLowerCase()]},n.lB=n.get,n.set=function(t,i){if(e(t)){for(var n in t)this.set(n,t[n]);return this}return this.QA[t.toLowerCase()]=i,this.AA[t]=i,this},n.mB=function(t){return delete this.QA[t.toLowerCase()],delete this.AA[t],this},n.nB=function(t,i){return this.YA().append(t,i),this}},{"./is-object":143}],145:[function(t,i,n){function e(t,i,n){return"function"==typeof n?new t("GET",i).end(n):2==arguments.length?new t("GET",i):new t(i,n)}i.g=e},{}],146:[function(t,i,n){i.g={"name":"1g0","version":"0.4.7","description":"","author":"Olivier Lombart (kubicle)","license":"TBD","scripts":{"build":"browserify js/ui/htmlApp.js -t lessify | uglifyjs -o build/bld.js -m --mangle-props=unquoted --reserved-file build/reserved.json --reserve-domprops -c properties=false,pure_funcs=['log.debug','test.assert']","dev-build":"watchify js/test/testApp.js -o build/devBuild.js -t lessify -v","test":"node js/test/ciTestApp.js --ci","coverage":"node node_modules/istanbul/lib/cli.js cover js/test/ciTestApp.js -x **/frankie/** -x **/droopy/** -- --cover"},"main":"js/ui/htmlApp.js","repository":{"type":"git","url":"https://github.com/kubicle/1g0"},"bugs":{"url":"https://github.com/kubicle/1g0/issues"},"keywords":["baduk","go","igo","weiqi"],"dependencies":{"contra":"~1.9.4","dropbox":"~2.5.2"},"devDependencies":{"istanbul":"~0.3.22","codeclimate-test-reporter":"~0.1.1","browserify":"~10.2.4","lessify":"~1.0.1","watchify":"~3.2.2","uglify-js":"~2.8.18"}}},{}]},{},[92]);