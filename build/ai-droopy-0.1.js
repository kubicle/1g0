!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.g)define([],t);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.h=t()}}(function(){return function t(r,i,n){function o(s,h){if(!i[s]){if(!r[s]){var u="function"==typeof require&&require;if(!h&&u)return u(s,!0);if(e)return e(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var a=i[s]={exports:{}};r[s][0].call(a.exports,function(t){var i=r[s][1][t];return o(i||t)},a,a.exports,t,r,i,n)}return i[s].exports}for(var e="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,r,i){"function"==typeof Object.create?r.exports=function(t,r){t.i=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,j:!1,k:!0,l:!0}})}:r.exports=function(t,r){t.i=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}},{}],2:[function(t,r,i){function n(){a=!1,h.length?f=h.concat(f):c=-1,f.length&&o()}function o(){if(!a){var t=setTimeout(n);a=!0;for(var r=f.length;r;){for(h=f,f=[];++c<r;)h[c].m();c=-1,r=f.length}h=null,a=!1,clearTimeout(t)}}function e(t,r){this.p=t,this.q=r}function s(){}var h,u=r.exports={},f=[],a=!1,c=-1;u.o=function(t){var r=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)r[i-1]=arguments[i];f.push(new e(t,r)),1!==f.length||a||setTimeout(o,0)},e.prototype.m=function(){this.p.apply(null,this.q)},u.title="browser",u.s=!0,u.t={},u.u=[],u.version="",u.v={},u.A=s,u.addListener=s,u.C=s,u.D=s,u.removeListener=s,u.F=s,u.G=s,u.H=function(t){throw new Error("process.binding is not supported")},u.I=function(){return"/"},u.J=function(t){throw new Error("process.chdir is not supported")},u.K=function(){return 0}},{}],3:[function(t,r,i){r.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.L&&"function"==typeof t.fill&&"function"==typeof t.M}},{}],4:[function(t,r,i){(function(r,n){function o(t,r){var n={V:[],X:s};return arguments.length>=3&&(n.Y=arguments[2]),arguments.length>=4&&(n.Z=arguments[3]),b(r)?n.$=r:r&&i._(n,r),x(n.$)&&(n.$=!1),x(n.Y)&&(n.Y=2),x(n.Z)&&(n.Z=!1),x(n.aa)&&(n.aa=!0),n.Z&&(n.X=e),u(n,t,n.Y)}function e(t,r){var i=o.ca[r];return i?"["+o.Z[i][0]+"m"+t+"["+o.Z[i][1]+"m":t}function s(t,r){return t}function h(t){var r={};return t.forEach(function(t,i){r[t]=!0}),r}function u(t,r,n){if(t.aa&&r&&D(r.ba)&&r.ba!==i.ba&&(!r.constructor||r.constructor.prototype!==r)){var o=r.ba(n,t);return m(o)||(o=u(t,o,n)),o}var e=f(t,r);if(e)return e;var s=Object.keys(r),b=h(s);if(t.$&&(s=Object.getOwnPropertyNames(r)),S(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return a(r);if(0===s.length){if(D(r)){var d=r.name?": "+r.name:"";return t.X("[Function"+d+"]","special")}if(C(r))return t.X(RegExp.prototype.toString.call(r),"regexp");if(M(r))return t.X(Date.prototype.toString.call(r),"date");if(S(r))return a(r)}var v="",y=!1,w=["{","}"];if(l(r)&&(y=!0,w=["[","]"]),D(r)){v=" [Function"+(r.name?": "+r.name:"")+"]"}if(C(r)&&(v=" "+RegExp.prototype.toString.call(r)),M(r)&&(v=" "+Date.prototype.toUTCString.call(r)),S(r)&&(v=" "+a(r)),0===s.length&&(!y||0==r.length))return w[0]+v+w[1];if(n<0)return C(r)?t.X(RegExp.prototype.toString.call(r),"regexp"):t.X("[Object]","special");t.V.push(r);var x;return x=y?c(t,r,n,b,s):s.map(function(i){return g(t,r,n,b,i,y)}),t.V.pop(),p(x,v,w)}function f(t,r){if(x(r))return t.X("undefined","undefined");if(m(r)){var i="'"+JSON.stringify(r).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.X(i,"string")}return y(r)?t.X(""+r,"number"):b(r)?t.X(""+r,"boolean"):d(r)?t.X("null","null"):void 0}function a(t){return"["+Error.prototype.toString.call(t)+"]"}function c(t,r,i,n,o){for(var e=[],s=0,h=r.length;s<h;++s)B(r,String(s))?e.push(g(t,r,i,n,String(s),!0)):e.push("");return o.forEach(function(o){o.match(/^\d+$/)||e.push(g(t,r,i,n,o,!0))}),e}function g(t,r,i,n,o,e){var s,h,f;if(f=Object.getOwnPropertyDescriptor(r,o)||{value:r[o]},f.get?h=f.set?t.X("[Getter/Setter]","special"):t.X("[Getter]","special"):f.set&&(h=t.X("[Setter]","special")),B(n,o)||(s="["+o+"]"),h||(t.V.indexOf(f.value)<0?(h=d(i)?u(t,f.value,null):u(t,f.value,i-1),h.indexOf("\n")>-1&&(h=e?h.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+h.split("\n").map(function(t){return"   "+t}).join("\n"))):h=t.X("[Circular]","special")),x(s)){if(e&&o.match(/^\d+$/))return h;s=JSON.stringify(""+o),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.X(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.X(s,"string"))}return s+": "+h}function p(t,r,i){var n=0;return t.reduce(function(t,r){return n++,r.indexOf("\n")>=0&&n++,t+r.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?i[0]+(""===r?"":r+"\n ")+" "+t.join(",\n  ")+" "+i[1]:i[0]+r+" "+t.join(", ")+" "+i[1]}function l(t){return Array.isArray(t)}function b(t){return"boolean"==typeof t}function d(t){return null===t}function v(t){return null==t}function y(t){return"number"==typeof t}function m(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function x(t){return void 0===t}function C(t){return E(t)&&"[object RegExp]"===A(t)}function E(t){return"object"==typeof t&&null!==t}function M(t){return E(t)&&"[object Date]"===A(t)}function S(t){return E(t)&&("[object Error]"===A(t)||t instanceof Error)}function D(t){return"function"==typeof t}function O(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function A(t){return Object.prototype.toString.call(t)}function k(t){return t<10?"0"+t.toString(10):t.toString(10)}function V(){var t=new Date,r=[k(t.getHours()),k(t.getMinutes()),k(t.getSeconds())].join(":");return[t.getDate(),W[t.getMonth()],r].join(" ")}function B(t,r){return Object.prototype.hasOwnProperty.call(t,r)}i.format=function(t){if(!m(t)){for(var r=[],i=0;i<arguments.length;i++)r.push(o(arguments[i]));return r.join(" ")}for(var i=1,n=arguments,e=n.length,s=String(t).replace(/%[sdj%]/g,function(t){if("%%"===t)return"%";if(i>=e)return t;switch(t){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(t){return"[Circular]"}default:return t}}),h=n[i];i<e;h=n[++i])d(h)||!E(h)?s+=" "+h:s+=" "+o(h);return s},i.N=function(t,o){function e(){if(!s){if(r.P)throw new Error(o);r.R?console.trace(o):console.error(o),s=!0}return t.apply(this,arguments)}if(x(n.process))return function(){return i.N(t,o).apply(this,arguments)};if(r.O===!0)return t;var s=!1;return e};var P,R={};i.S=function(t){if(x(P)&&(P=r.t.T||""),t=t.toUpperCase(),!R[t])if(new RegExp("\\b"+t+"\\b","i").test(P)){var n=r.U;R[t]=function(){var r=i.format.apply(i,arguments);console.error("%s %d: %s",t,n,r)}}else R[t]=function(){};return R[t]},i.ba=o,o.Z={"bold":[1,22],"italic":[3,23],"underline":[4,24],"inverse":[7,27],"white":[37,39],"grey":[90,39],"black":[30,39],"blue":[34,39],"cyan":[36,39],"green":[32,39],"magenta":[35,39],"red":[31,39],"yellow":[33,39]},o.ca={"special":"cyan","number":"yellow","boolean":"yellow","undefined":"grey","null":"bold","string":"green","date":"magenta","regexp":"red"},i.isArray=l,i.da=b,i.ea=d,i.fa=v,i.ga=y,i.ha=m,i.ia=w,i.ja=x,i.ka=C,i.la=E,i.ma=M,i.na=S,i.oa=D,i.pa=O,i.isBuffer=t("./support/isBuffer");var W=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];i.log=function(){console.log("%s - %s",V(),i.format.apply(i,arguments))},i.inherits=t("inherits"),i._=function(t,r){if(!r||!E(r))return t;for(var i=Object.keys(r),n=i.length;n--;)t[i[n]]=r[i[n]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":3,"_process":2,"inherits":1}],5:[function(t,r,i){"use strict";function n(t,r,i){this.qa=t||{},this.ra=r||{},this.name=i||"#"+e++}var o=t("./helper"),e=1;r.exports=n;n.prototype.clone=function(t){return new n(o.clone(this.qa),o.clone(this.ra),t)},n.prototype.sa=function(t){this.ra=t},n.prototype.toString=function(){var t="{"+this.name+" - ";for(var r in this.qa)t+=r+":"+this.qa[r].toFixed(2)+", ";return t.ta(", ")+"}"},n.prototype.ua=function(t){var r=0;for(var i in this.qa){var n=this.qa[i],o=t.qa[i];o<0!=n<0?o<0?(n-=o,o=0):(o-=n,n=0):(n=Math.abs(n),o=Math.abs(o));var e;e=0===o?n>1?1:n:0===n?o>1?1:o:1-(o>=n?n/o:o/n),r+=e}return r},n.prototype.get=function(t,r,i,n){void 0===i&&(i=null),void 0===n&&(n=null);var o=this.qa[t];if(o)return o;if(this.qa[t]=r,(i||n)&&(this.ra[t]=[i,n]),i&&n&&i>n)throw new Error("Limits are invalid: "+i+" > "+n);return r},n.prototype.va=function(){return JSON.stringify(this)},n.wa=function(t){var r=JSON.parse(t);this.qa=r.qa,this.ra=r.ra},n.prototype.xa=function(t,r,i,n,o){var e=this.qa,s=t.qa;r.sa(this.ra),i.sa(this.ra);var h=r.qa,u=i.qa,f=~~(Math.random()*e.length),a=~~(Math.random()*f),c=0;for(var g in e)c<a||c>f?(h[g]=e[g],u[g]=s[g]):(h[g]=s[g],u[g]=e[g]),Math.random()<n&&(h[g]=this.ya(g,h[g],o)),Math.random()<n&&(u[g]=this.ya(g,u[g],o)),c++},n.prototype.ya=function(t,r,i){var n,o=this.ra[t];if(o){var e=o[0],s=o[1];if(Math.random()<i)n=e+Math.random()*(s-e);else{n=r*(1+2*Math.random()*.05-.05),e&&n<e&&(n=e),s&&n>s&&(n=s)}}else n=r+10*(Math.random()-.5);return n},n.prototype.za=function(){for(var t in this.qa)this.qa[t]=this.ya(t,this.qa[t],1);return this}},{"./helper":11}],6:[function(t,r,i){"use strict";function n(t,r,i){if(void 0===r)throw new Error("Grid init value must be defined");this.Ca=t,void 0===i?this.Da=u.Ea(t+2,t+2,r):(this.Da=u.Ea(t+2,t+2,i),this.init(r))}function o(t){if(t===c)return"(BORDER)";if(t>=n.Ma)return String.fromCharCode("A".charCodeAt()+t-n.Ma);if(t<n.Oa||t>=n.Ka.length)throw new Error("Invalid color "+t);return t<0&&(t+=n.Ka.length),n.Ka[t]}function e(t){return o("number"==typeof t?t:t.color)}function s(t){for(var r="",i=t.length-1;i>=0;i--)r+=t[i];return r}var h=t("./constants"),u=t("./helper"),f=t("./Move"),a=f.Aa,c=h.Ba;r.exports=n,n.Fa="+",n.Ga="?",n.Ha="@O",n.Ia="&#",n.Ja="-:",n.Ka=n.Ha+n.Ia+n.Ja+n.Ga+n.Fa,n.La=n.Ga+n.Fa+n.Ka,n.Ma=100,n.Na=-1,n.Oa=-2,n.Pa=2,n.Qa=4,n.Ra=[0,0,-1,1,1,-1,-1,1],n.Sa="-'?.:",n.prototype.init=function(t){if(void 0===t)throw new Error("Grid init value must be defined");for(var r=this.Ca;r>=1;r--)for(var i=this.Da[r],n=this.Ca;n>=1;n--)i[n]=t},n.prototype.L=function(t){if(t.Ca!==this.Ca)throw new Error("Cannot copy between different sized grids");for(var r=this.Ca;r>=1;r--)for(var i=this.Da[r],n=t.Da[r],o=this.Ca;o>=1;o--)i[o]=n[o];return this},n.prototype.Ta=function(t){var r=t.grid;if(r.Ca!==this.Ca)throw new Error("Cannot copy between different sized grids");for(var i=this.Ca;i>=1;i--)for(var n=this.Da[i],o=r.Da[i],e=this.Ca;e>=1;e--)n[e]=o[e].color;return this},n.Ua=function(t){return n.La.indexOf(t)+n.Oa},n.prototype.Va=function(t){return this.Wa(!0,"\n",t||e)},n.prototype.Xa=function(t){return this.Wa(!1,",",t||e)},n.Ya=function(t){return t.indexOf(",")},n.prototype.Wa=function(t,r,i){var o,e,s,h=new n(this.Ca,"").Da,u=1;for(e=this.Ca;e>=1;e--)for(o=1;o<=this.Ca;o++)null!==(s=i(this.Da[e][o]))&&(h[e][o]=s,u=Math.max(u,s.length));var f=u,c="          ",g="";for(e=this.Ca;e>=1;e--){for(t&&(g+="%2d".format(e)+" "),o=1;o<=this.Ca;o++)s=h[e][o],s.length<f&&(s=c.substr(1,f-s.length)+s),g+=s;g+=r}if(t){for(g+="   ",o=1;o<=this.Ca;o++)g+=c.substr(1,f-1)+a(o);g+="\n"}return"\n"!==r&&(g=g.Za()),g},n.prototype.toString=function(){for(var t="",r=this.Ca;r>=1;r--){for(var i=1;i<=this.Ca;i++)t+=o(this.Da[r][i]);t+="\n"}return t},n.prototype.$a=function(){return"object"==typeof this.Da[1][1]?this.Xa(function(t){return o(t.color)}):this.Xa(function(t){return o(t)})},n.prototype._a=function(t){var r=t.split(/\"|,/);if(r.length!==this.Ca)throw new Error("Invalid image: "+r.length+" rows instead of "+this.Ca);for(var i=this.Ca;i>=1;i--){var o=r[this.Ca-i];if(o.length!==this.Ca)throw new Error("Invalid image: row "+o);for(var e=1;e<=this.Ca;e++)this.Da[i][e]=n.Ua(o[e-1])}},n.ab=function(t){return t.split(",").reverse().join()},n.bb=function(t){return t.split(",").map(s).join()},n.cb=function(t){return s(t)},n.eb=function(t){for(var r="",i=t.split(","),n=i[0].length-1;n>=0;n--){r+=",";for(var o=0;o<i.length;o++)r+=i[o][n]}return r.substr(1)}},{"./Move":8,"./constants":10,"./helper":11}],7:[function(t,r,i){"use strict";function n(t,r,i,n){this.gb=t,this.hb=[r],this.ib=i,this.color=r.color,this.jb=null,this.kb=null,this.lb=null,this.mb=n,this.nb=null,this.ob=this.pb=0}var o=t("./constants"),e=t("./log"),s=t("./Move"),h=s.fb,u=o.EMPTY;r.exports=n,n.prototype.qb=function(t,r,i){this.hb.length=0,this.hb.push(t),this.ib=r,this.color=t.color,this.jb=this.kb=this.lb=null,this.mb=i,this.ob=this.pb=0},n.prototype.clear=function(){for(var t=this.hb.length-1;t>=0;t--)this.hb[t].clear();this.gb.rb(this)},n.prototype.toString=function(t){if(0===t)return"#"+this.mb;if(1===t)return this.hb[0]+" x"+this.hb.length;for(var r,i="{group #"+this.mb+" of "+this.hb.length+" "+h(this.color)+" stones [",n=this.hb,o=0;r=n[o],o<n.length;o++)i+=r.sb()+",";return i=i.Za(),i+="], lives:"+this.ib,this.jb&&(i+=" MERGED with #"+this.jb.mb),this.lb&&(i+=" KILLED by "+this.lb.sb()),i+="}"},n.prototype.tb=function(){return this.hb.length&&this.hb[0].group===this},n.prototype.ub=function(){return this.toString()},n.prototype.vb=function(){return this.hb.map(function(t){return t.sb()}).sort().join(",")},n.prototype.wb=function(){for(var t,r=[],i=this.hb,n=0;t=i[n],n<i.length;n++)for(var o,e=t.xb,s=0;o=e[s],s<e.length;s++)o.color===u&&r.indexOf(o)<0&&r.push(o);if(r.length!==this.ib)throw new Error("Wrong life count for group");return r},n.prototype.yb=function(){for(var t,r=[],i=1-this.color,n=this.hb,o=0;t=n[o],o<n.length;o++)for(var s,h=t.xb,u=0;s=h[u],u<h.length;u++)s.color===i&&r.indexOf(s.group)<0&&r.push(s.group);return e.zb&&r.length,r},n.prototype.Ab=function(t){for(var r,i=-1,n=t.xb,o=0;r=n[o],o<n.length;o++)if(r.color===u){i++;for(var s,h=r.xb,f=0;s=h[f],f<h.length;f++)if(s.group===this&&s!==t){i--;break}}return e.zb,i},n.prototype.Bb=function(t){if(e.zb,this.hb.push(t),this.ib+=this.Ab(t),this.ib<0)throw new Error("Unexpected error (lives<0 on connect)");e.zb},n.prototype.Cb=function(t){if(e.zb,this.hb.length>1){if(this.ib-=this.Ab(t),this.ib<0)throw new Error("Lives<0 on disconnect")}else this.gb.rb(this),e.zb;if(this.hb.pop()!==t)throw new Error("Unexpected error (disconnect order)")},n.prototype.Db=function(t){if(--this.ib<=0)return this.Eb(t)},n.prototype.Fb=function(t){if(this.ib--,e.zb,this.ib<1)throw new Error("Unexpected error (lives<1 on attack by resucitated)")},n.prototype.Gb=function(t){this.ib++,e.zb},n.prototype.Hb=function(t,r){if(t.jb===this||t===this||this.color!==t.color)throw new Error("Invalid merge");e.zb,this.ib+=t.hb.length;for(var i,n=t.hb,o=0;i=n[o],o<n.length;o++)i.Ib(this),this.Bb(i);t.jb=this,t.kb=r,this.gb.Jb.push(t),e.zb},n.prototype.Kb=function(t){e.zb;for(var r,i=t.hb,n=i.length-1;r=i[n],n>=0;n--)this.Cb(r),r.Ib(t);this.ib-=t.hb.length,t.kb=t.jb=null,e.zb},n.prototype.Lb=function(t){for(var r=this.gb.Jb,i=r.length-1;i>=0;i--){var n=r[i];if(n.kb!==t||n.jb!==this)break;this.Kb(n),r.pop()}},n.prototype.Eb=function(t){if(e.zb,this.ib<0)throw new Error("Unexpected error (lives<0)");for(var r,i=this.hb,n=0;r=i[n],n<i.length;n++){for(var o,s=r.Mb(1-this.color),h=0;o=s[h],h<s.length;h++)o.Gb(r);r.Nb()}this.lb=t,this.gb.Ob.push(this),e.zb},n.prototype.Pb=function(){this.lb=null,this.ib=1;for(var t,r=this.hb,i=0;t=r[i],i<r.length;i++){t.Qb(this);for(var n,o=t.Mb(1-this.color),e=0;n=o[e],e<o.length;e++)n.Fb(t)}},n.Rb=function(t){for(var r=t.gb.Ob,i=r.length-1;i>=0;i--){var n=r[i];if(n.lb!==t)break;r.pop(),e.zb,n.Pb()}}},{"./Move":8,"./constants":10,"./log":13}],8:[function(t,r,i){"use strict";function n(t){switch(t[0]){case"B":return h;case"W":return u;default:return}}function o(t){return"B"!==t[0]&&"W"!==t[0]?t:"-"!==t[1]?t.substr(1):t.substr(2)}function e(t,r){var i=f.indexOf(t[0])+1,n=parseInt(t.substr(1,2));if(!i||isNaN(n)){if(r)return null;throw new Error("Illegal move parsed: "+t)}return[i,n]}var s=t("./constants"),h=s.Sb,u=s.Tb,f="abcdefghjklmnopqrstuvwxyz",a=["black","white"];i.Ub=n,i.Vb=o,i.Wb=function(t,r){return(r===h?"B-":"W-")+t},i.fb=function(t){return a[t]},i.Xb=e,i.Yb=function(t){var r=n(t);void 0!==r&&(t=o(t));var i=e(t,!0);if(!i){if("pass"===t||t.startsWith("resi"))return null;throw new Error("Illegal move parsed: "+t)}return void 0!==r?i.concat(r):i},i.Zb=function(t,r){return f[t-1]+r},i.Aa=function(t){return f[t-1]}},{"./constants":10}],9:[function(t,r,i){"use strict";function n(t,r,i,n){this.gb=t,this.ac=r,this.bc=i,this.color=n,this.group=null,this.xb=[],this.cc=[]}var o=t("./constants"),e=t("./Group"),s=t("./Move"),h=s.Zb,u=o.EMPTY,f=o.Ba,a=o.$b,c=o._b;r.exports=n,n.Ba=new n(null,-1,-1,f);var g=n.dc=[[0,1],[1,0],[0,-1],[-1,0]],p=n.ec=[[1,1],[1,-1],[-1,-1],[-1,1]];n.prototype.clear=function(){this.color=u,this.group=null},n.prototype.fc=function(){for(var t=this.gb.gc,r=c;r>=a;r--){var i=t[this.bc+g[r][1]][this.ac+g[r][0]];i.color===u&&this.xb.push(i),this.cc.push(i),i=t[this.bc+p[r][1]][this.ac+p[r][0]],this.cc.push(i)}},n.prototype.toString=function(){return this.color===u?this.sb():(this.color?"W":"B")+"-"+this.sb()},n.prototype.sb=function(){return h(this.ac,this.bc)},n.prototype.hc=function(){return this.ic().map(function(t){return t.sb()}).sort().join(",")},n.prototype.jc=function(){return this.color===u},n.prototype.kc=function(){return 2===this.xb.length},n.prototype.lc=function(){var t=this.gb,r=t.Ca-1;return t.mc(1===this.ac?2:r,1===this.bc?2:r)},n.prototype.nc=function(){return this.xb.length<=3},n.prototype.oc=function(){var t=this.gb.Ca,r=this.ac,i=this.bc;return Math.min(Math.min(r-1,t-r),Math.min(i-1,t-i))},n.prototype.pc=function(t){for(var r=this.xb.length-1;r>=0;r--){var i=this.xb[r];if(i.color===u)return!1;if(i.color!==t){if(1===i.group.ib)return!1}else if(i.group.ib>1)return!1}return!0},n.prototype.qc=function(t){for(var r=null,i=this.xb.length-1;i>=0;i--){var n=this.xb[i].group;if(n&&n.color===1-t&&1===n.ib){if(r)return!1;r=n}}if(!r)return!1;if(1!==r.hb.length)return!1;var o=r.hb[0];if(this.gb.rc()!==o)return!1;var e=this.gb.sc();if(!e||e.lb!==o||1!==e.hb.length)return!1;var s=e.hb[0];return s.ac===this.ac&&s.bc===this.bc},n.prototype.Nb=function(){this.color=u,this.group=null},n.prototype.Qb=function(t){this.group=t,this.color=t.color},n.prototype.tc=function(t){this.color=t;var r=this.Mb(t);0===r.length?this.group=this.gb.uc(this,this.vc()):(this.group=r[0],this.group.Bb(this));for(var i=this.Mb(1-t),n=i.length-1;n>=0;n--)i[n].Db(this);for(var o=1;o<r.length;o++)this.group.Hb(r[o],this)},n.prototype.wc=function(){this.group.Lb(this),this.group.Cb(this);for(var t=this.Mb(1-this.color),r=t.length-1;r>=0;r--)t[r].Gb(this);this.group=null,this.color=u,e.Rb(this)},n.prototype.Ib=function(t){this.group=t},n.prototype.Mb=function(t){for(var r=[],i=this.xb,n=i.length-1;n>=0;n--){var o=i[n];o.color===t&&r.indexOf(o.group)<0&&r.push(o.group)}return r},n.prototype.ic=function(){for(var t=[],r=this.xb,i=r.length-1;i>=0;i--){var n=r[i];n.color===u&&t.push(n)}return t},n.prototype.vc=function(){for(var t=0,r=this.xb,i=r.length-1;i>=0;i--)r[i].color===u&&t++;return t},n.prototype.xc=function(t,r){for(var i=0,n=this.xb,o=n.length-1;o>=0;o--)n[o].color===t&&(r&&r.push(n[o]),i++);return i},n.prototype.yc=function(t){for(var r=this.xb,i=r.length-1;i>=0;i--)if(r[i].group===t)return!0;return!1}},{"./Group":7,"./Move":8,"./constants":10}],10:[function(t,r,i){"use strict";function n(){this.zc=0,this.Ac=1,this.Ba=-99,this.EMPTY=-1,this.Sb=0,this.Tb=1,this.Bc=0,this.Cc=1,this.Dc=-1,this.NEVER=0,this.Ec=1,this.ALWAYS=2,this.$b=0,this._b=3,this.Fc=7,this.Gc=1,this.Hc=this.Ic=0,this.Jc=1,this.Kc=this.Lc=2,this.Mc=3,this.Nc=4,this.Oc=5,this.Pc=6,this.Qc=7,this.Rc=8,this.Sc=9,this.Tc=10,this.Uc=11,this.Vc=12,this.Wc="Japanese",this.Xc="Chinese",this.Yc=0,this.Zc=1}r.exports=new n},{}],11:[function(t,r,i){"use strict";function n(t){return"\n"!==t.slice(-1)?0:"\r\n"!==t.slice(-2)?1:2}i.$c=function(t){return t.name||t.toString().split(/ |\(/,2)[1]},i.clone=function(t){if(null===t||void 0===t)return t;var r;if(t instanceof Array){r=[];for(var i=0,n=t.length;i<n;i++)r[i]=t[i]}else{if("object"!=typeof t)throw new Error("clone called on "+typeof t);if("function"==typeof t.clone)return t.clone();r={};for(var o in t){var e=t[o];"function"!=typeof e&&(r[o]=e)}}return r},String.prototype.ta=function(t){if(void 0===t)return this.substr(0,this.length-n(this));var r=this.length-t.length;return this.substr(r)===t?this.substr(0,r):this.toString()},String.prototype.Za=function(t){if(void 0===t)t=n(this)||1;else if("number"!=typeof t)throw new Error("Invalid parameter type for String.count: "+typeof t);return this.substr(0,this.length-t)},String.prototype.startsWith||(String.prototype.startsWith=function(t){return this.substr(0,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t){return this.substr(this.length-t.length)===t}),String.prototype.format=function(t){if("%"!==this[0])throw new Error("Invalid format: "+this.toString());var r,i=this.slice(1,-1),n=0,o=this.slice(-1);switch(o){case"d":case"x":var e=" ";"0"===i[n]&&(n++,e="0");var s=parseInt(i.substr(n));r=t.toString("x"===o?16:10);for(var h=s-r.length;h>0;h--)r=e+r;return r;case"f":var u="";if("+"===i[n]&&(n++,t>0&&(u="+")),"."!==i[n++])break;var f=parseInt(i.substr(n));return u+t.toFixed(f)}throw new Error("Unknown format: "+this.toString())},String.prototype._c=function(t,r){return this>=t&&this<=r},i.ad=function(t,r){for(var i=new Array(t),n=t-1;n>=0;n--)i[n]=r;return i},i.Ea=function(t,r,n){for(var o=new Array(t),e=o[0]=i.ad(r,n),s=t-1;s>=1;s--)o[s]=e.concat();return o},Array.prototype.bd=function(t){for(var r=this.length,i=0;i<t.length;i++){var n=t[i];this.indexOf(n)===-1&&this.push(n)}return this.length-r}},{}],12:[function(t,r,i){"use strict";function n(){this.level=NaN,this.dd=null,this.ed=e,this.fd=s,this.gd=h,this.ERROR=u,this.hd=f,this.jd=!1,this.zb=!1}var o=console,e=0,s=1,h=2,u=3,f=4;r.exports=n,n.prototype.kd=function(t){t!==this.level&&(this.level=t,this.debug=t<=e?this.ld:null,this.info=t<=s?this.md:null,this.warn=t<=h?this.nd:null,this.error=t<=u?this.od:null,this.fatal=t<=f?this.pd:null)},n.prototype.qd=function(t){this.dd=t},n.prototype.ld=function(t){this.rd(e,o.debug,t)},n.prototype.md=function(t){this.rd(s,o.info,t)},n.prototype.nd=function(t){this.rd(h,o.warn,t)},n.prototype.od=function(t){this.rd(u,o.error,t)},n.prototype.pd=function(t){this.rd(f,o.error,t)},n.prototype.rd=function(t,r,i){t<this.level||this.dd&&!this.dd(t,i)||r.call(o,i)}},{}],13:[function(t,r,i){"use strict";var n=t("./hh/Logger"),o=new n;o.kd(o.fd),r.exports=o},{"./hh/Logger":12}],14:[function(t,r,i){"use strict";function n(){this.debug=!1,this.sd=this.td=!1,this.ud=null,this.vd=null}r.exports=new n,n.prototype.wd=function(t,r){this.ud=new t,r(this.ud)},n.prototype.assert=function(t,r){if(t!==!0)throw new Error("assertion failed: "+(r||t))}},{}],15:[function(t,r,i){"use strict";var n=t("./Connector"),o=t("./GroupAnalyser"),e=t("./Hunter"),s=t("./Influence"),h=t("./NoEasyPrisoner"),u=t("./PotentialTerritory"),f=t("./Pusher"),a=t("./Savior"),c=t("./Shaper"),g=t("./Spacer"),p=function(){return[u,o,s,h,e,a,n,g,f,c]};r.exports=p},{"./Connector":16,"./GroupAnalyser":17,"./Hunter":19,"./Influence":20,"./NoEasyPrisoner":21,"./PotentialTerritory":22,"./Pusher":23,"./Savior":24,"./Shaper":25,"./Spacer":26}],16:[function(t,r,i){"use strict";function n(t){s.call(this,t),this.xd=this.yd("infl",.07,.01,.5),this.zd=this.yd("risk",1,.1,4),this.Ad=t.Cd("NoEasyPrisoner").Bd.Da,this.Dd=t.Cd("Hunter")}function o(t){var r=t.nb;return 0===r.Hd&&1===r.Id}var e=t("./1g0/constants"),s=t("./Heuristic"),h=t("util").inherits,u=t("./1g0/log"),f=t("./1g0/Move"),a=f.fb,c=e.EMPTY,g=e.Ba,p=e.ALWAYS,l=e.NEVER;h(n,s),r.exports=n,n.prototype.Ed=function(t,r,i){var n=this.gb.mc(t,r);return this.Ad[r][t]<0&&!this.Dd.Fd(n)?(u.debug&&a(i),0):this.Gd(n,i)+this.Gd(n,1-i)},n.prototype.Jd=function(t,r){for(var i=!0,n=null,o=null,e=null,s=!1,h=0,u=0;u<8;u++){var f=t.cc[u];switch(i=!i,f.color){case g:case c:continue;case r:if(n){if(f.group===n)continue;if(!i&&e&&f.group!==e)return 0;i||e||(e=f.group),o=f.group,s=s||i}else n=f.group,i||(e=f.group),s=i;break;default:h++}}return o&&s?h>=3?0:this.Kd(t,r,[n,o],h,"diagonal"):0},n.prototype.Ld=function(t,r){for(var i,n,e,s,h,f=0,g=0,p=t.xb.length-1;p>=0;p--){var l=t.xb[p];switch(l.color){case c:continue;case r:f++,i?e?l.group!==e.group?h=l:s=l:l.group!==i.group?e=l:n=l:i=l;break;default:g++}}if(!e)return 0;if(4===f)return 0;if(3===f&&0===g&&i.group.ib>1&&e.group.ib>1&&(!h||h.group.ib>1))return 0;var b=h?3:2,d=h?[i.group,e.group,h.group]:[i.group,e.group];if(2===b&&3===f){if(s){n=s;var v=i;i=e,e=v}i.ac!==e.ac&&i.bc!==e.bc||(i=n)}if(i.ac!==e.ac&&i.bc!==e.bc){if(0===this.Md(i,e,r))return u.debug&&a(r),o(i.group)||o(e.group)?this.Nd:0;g++}return this.Kd(t,r,d,g,"direct")},n.prototype.Kd=function(t,r,i,n,o){var e=0;if(0===n)e=this.xd/this.Od[t.bc][t.ac][r];else{for(var s,h=!1,f=i.length-1;f>=0;f--){if(s=i[f],s.ib<=2&&s.ob<p)return 0;if(s.pb<p||s.ob>l){h=!0;break}}if(!h)return 0;for(f=i.length-1;f>=0;f--)s=i[f],s.pb!==l&&(e+=(2-s.ob)/2*this.Pd(s,!0));e*=this.zd}return u.debug&&(a(r),e.toFixed(3),i.length),e},n.prototype.Gd=function(t,r){var i=this.Ld(t,r);return i||this.Jd(t,r)}},{"./1g0/Move":8,"./1g0/constants":10,"./1g0/log":13,"./Heuristic":18,"util":4}],17:[function(t,r,i){"use strict";function n(t){e.call(this,t),this.Qd=new o,t.Qd=this.Qd}var o=t("./boan/BoardAnalyser"),e=t("./Heuristic");(0,t("util").inherits)(n,e),r.exports=n,n.prototype.Rd=function(){this.Sd();var t=this.gb;this.Qd.Td(t,t.Ud.Ta(t))},n.prototype.Sd=function(){this.Vd=this.gb.Wd();for(var t in this.Vd)this.Vd[~~t].Xd=null}},{"./Heuristic":18,"./boan/BoardAnalyser":28,"util":4}],18:[function(t,r,i){"use strict";function n(t){this.Yd=t,this.name=this.constructor.name||s.$c(this.constructor),this.gb=t.gb,this.Ca=t.gb.Ca,this.Od=t.Od,this.Zd=t.Zd,this.Qd=t.Qd,this.Bd=new e(this.Ca,0,g),this.Nd=t.Nd,this.$d=this.yd("spaceInvasion",2,.01,4),this.color=this._d=null}var o=t("./1g0/constants"),e=t("./1g0/Grid"),s=t("./1g0/helper"),h=t("./1g0/test"),u=t("./1g0/Stone"),f=o.Sb,a=o.Tb,c=o.EMPTY,g=o.Ba,p=o.Bc,l=o.Cc,b=o.ALWAYS,d=o.NEVER,v=u.dc,y=o.$b,m=o._b;r.exports=n,n.prototype.ae=function(t){this.color=t,this._d=1-t},n.prototype.Rd=function(t,r){for(var i=this.Yd.color,n=this.Bd.Da,o=1;o<=this.Ca;o++)for(var e=1;e<=this.Ca;e++){var s=t[o][e];if(!(s<p)){s===l&&this.name===this.Yd.be&&(h.debug=!0);var u=n[o][e]=this.Ed(e,o,i);r[o][e]+=u,s===l&&(h.debug=!1)}}},n.prototype.yd=function(t,r,i,n){return this.Yd.ce.get(this.name+"-"+t,r,i,n)},n.prototype.de=function(t,r,i){return this.Zd.ee.Da[r][t]*(i===f?1:-1)},n.prototype.fe=function(t,r,i){var n=i===f?-1:1,o=d;return e.Ra[2+this.Zd.ge[f].Da[r][t]]===n&&o++,e.Ra[2+this.Zd.ge[a].Da[r][t]]===n&&o++,o},n.prototype.he=function(t,r){var i=this.Od[r][t],n=i[f]>i[a]?f:a,o=i[n],e=i[1-n];if(e>1)return null;var s=0,h=this.Ca;return 1!==t&&t!==h&&1!==r&&r!==h||s++,o+s-3-e<0?null:n},n.prototype.ie=function(t,r,i){return e.Ra[2+this.Zd.ge[1-i].Da[r][t]]*(i===f?1:-1)},n.prototype.Pd=function(t,r){for(var i=2*t.hb.length,n=t.wb(),o=0,e=n.length-1;e>=0;e--)o+=n[e].vc();return i+=this.$d*Math.max(0,o-1),r?i:i+this.je(t)},n.prototype.je=function(t){if(1===t.hb.length&&t.hb[0].kc())return 0;for(var r=0,i=t.yb(),n=i.length-1;n>=0;n--)i[n].ib>1||(r+=this.Pd(i[n],!0));return r},n.prototype.ke=function(t,r,i,n,o){var e=this.gb.mc(t,r);if(e.color!==c)return 0;var s=this.ie(t,r,n);if(e.nc()&&(s/=2),s<=0)return 0;if(0==--o)return s;var h=v[i][0],u=v[i][1],f=v[(i+3)%4],a=f[0],g=f[1];return s+=this.ke(t+h+a,r+u+g,i,n,o),s+=this.ke(t+h-a,r+u-g,i,n,o)};n.prototype.le=function(t,r,i){for(var n=Math.max(0,this.ie(t,r,i)),o=y;o<=m;o++)n+=this.ke(t+v[o][0],r+v[o][1],o,i,1);var e=this.gb.mc(t,r);return e.kc()?n=Math.max(n-1,0):e.nc()&&(n=Math.max(n-.85,0)),n},n.prototype.me=function(t,r){return[this.gb.mc(t.ac,r.bc),this.gb.mc(r.ac,t.bc)]},n.prototype.Md=function(t,r,i){var n=Math.abs(r.ac-t.ac),o=Math.abs(r.bc-t.bc);if(n+o===1)return 0;var e,s=1-i,h=0;if(1===n&&1===o){var u=this.me(t,r),f=u[0],a=u[1];if(f.color===i||a.color===i)return 0;if(f.color===s&&h++,a.color===s&&h++,0===h)return 0;if(2===h)return 99;var c=f.color===s?a:f;return 0===t.oc()||0===r.oc()?1===c.oc()?1:0!==c.xc(s)?1:0:1===c.oc()?0!==c.xc(s)?1:0:1}if(n+o===2){if(e=this.gb.mc((t.ac+r.ac)/2,(t.bc+r.bc)/2),e.color===i)return 0;if(e.color===s)return e.group.ib;for(var g=e.xb.length-1;g>=0;g--)e.xb[g].color===s&&h++;return h>=1?1:t.oc()+r.oc()===0?0:.5}var p=t.oc(),l=r.oc();if(n+o===3&&0===p&&0===l){for(var b=this.ne(t,r),d=0,v=b.length-1;v>=0;v--)e=b[v],e.color===s&&(d+=e.group.ib),0!==e.xc(s)&&(d+=1);return d}return n+o},n.prototype.oe=function(t,r,i){for(var n=this.gb.mc(t,r),o=[],e=n.xb.length-1;e>=0;e--){var s=n.xb[e];if(s.color===i&&s.group.pb<b)return s;s.color===c&&o.push(s)}for(var h=2,u=o.length-1;u>=0;u--)for(var f=o[u],a=f.xb.length-1;a>=0;a--){var g=f.xb[a];if(g!==n&&(g.color===i&&g.group.pb!==b)){var p=this.Md(n,g,i);if(!(p>=2)&&(h-=2-p)<=.5)return g}}return null},n.prototype.pe=function(t,r,i){var n=0,o=0,e=this.Ca;if(1===r||r===e)o=1;else{if(1!==i&&i!==e)throw new Error("not along border");n=1}var s=o,h=n;if(this.gb.mc(r+s,i+h).color===g&&(s=-s,h=-h),this.gb.mc(r+s,i+h).group!==t){var u=t.color,f=this.gb.mc(r+n,i+o);for(f.group===t&&(n=-n,o=-o);;)switch(r+=n,i+=o,f=this.gb.mc(r,i),f.color){case g:return null;case u:return f.group.ib>2?f.group:null;case c:var a=this.gb.mc(r+s,i+h);if(a.color===c)continue;return a.color===1-u?null:a.group.ib>2?a.group:null;default:return null}}}},{"./1g0/Grid":6,"./1g0/Stone":9,"./1g0/constants":10,"./1g0/helper":11,"./1g0/test":14}],19:[function(t,r,i){"use strict";function n(t){s.call(this,t),this.qe=this.yd("pressure",1,.01,2),this.re=null,this.Ad=t.Cd("NoEasyPrisoner").Bd.Da}function o(t,r){return t-r}var e=t("./1g0/constants"),s=t("./Heuristic"),h=t("util").inherits,u=t("./1g0/log"),f=t("./1g0/Move"),a=f.fb,c=f.Zb,g=e.ALWAYS,p=e.EMPTY;h(n,s),r.exports=n,n.prototype.se=function(t,r){for(var i=t.yb(),n=i.length-1;n>=0;n--){var o=i[n];if(!(o.ib>1)){var e=o.hb.length;if(e>=r)return!0;for(var s=o.yb(),h=s.length-1;h>=0;h--)if((e+=s[h].ib-1)>=r)return!0}}return!1};n.prototype.te=function(t,r){for(var i=0,n=0,o=0,e=t.xb.length-1;e>=0;e--){var s=t.xb[e];switch(s.color){case p:o+=.01;break;case r:o+=.01*(s.group.ib-1),s.group.ob===g&&(o+=2),i+=1e-4;break;default:if(s.group.Xd)return 1.1;if(s.group.ib>1)break;n+=s.group.hb.length}}return n+o+i},n.prototype.ue=function(t,r){for(var i,n=0,o=t.length-1;o>=0;o--)i=t[o],1===i.ib&&(r||!this.ve(i,r)||this.se(i,1))&&(n+=this.Pd(i));return n},n.prototype.we=function(t,r,i,n,o,e){for(var s,h=!1,f=t.Mb(n),c=r.length-1;c>=0;c--)if(s=r[c],2===s.ib&&!this.se(s,2)&&(0!==i.length||1!==f.length||2!==f[0].ib)){if(1===i.length&&0===f.length){var g=i[0].Mb(s.color);if(1!==g.length||g[0]!==s)continue;h=!0,u.debug&&a(n)}u.debug&&a(n),e.push(s)}return h},n.prototype.xe=function(t,r,i){return!(!i||r.ib!==i.ib)&&(!!i.tb()&&!(t.yc(i)&&i.Ab(t)<1))},n.prototype.ye=function(t,r,i,n){for(var o=0,e=0,s=r.length-1;s>=0;s--){var h=r[s],u=h.ib,f=h.Xd;this.xe(t,h,f)?(e+=this.Pd(h,!0),e+=this.Pd(f,!0)):u>=2&&0===i&&!n&&(o+=1/(u+1))}return o*this.qe+e},n.prototype.ze=function(){this.re=[]},n.prototype.Ed=function(t,r,i,n){n=n||0;var o=this.gb.mc(t,r),e=o.ic(),s=o.Mb(1-i),h=this.ue(s,n),f=[],g=this.we(o,s,e,i,n,f);if(0===n&&g&&this.re.push(o),!g&&e.length<=1){var p=this.te(o,i);if(1!==p&&(p<.02||p>1&&p<1.01))return 0;if(o.pc(i))return 0}var l=!g&&this.Ad[r][t]<0;if(h+=this.ye(o,s,n,l),!f.length)return h;this.gb.Ae(t,r,i);for(var b=[!1,!1,!1],d=f.length-1;d>=0;d--)if(!this.ve(f[d],n)){if(1===f.length){f.pop();break}b[d]=!0}this.gb.Be();var v=this.Ce(f,b)
;return u.debug&&(h||v)&&(a(i),h.toFixed(2),c(t,r)),h+v},n.prototype.Ce=function(t,r){switch(t.length){case 0:return 0;case 1:return r[0]?0:this.Pd(t[0]);case 2:return r[0]||r[1]?r[0]&&r[1]?Math.min(this.Pd(t[0]),this.Pd(t[1])):r[0]?this.Pd(t[1]):this.Pd(t[0]):Math.max(this.Pd(t[0]),this.Pd(t[1]));case 3:var i=[this.Pd(t[0]),this.Pd(t[1]),this.Pd(t[2])];if(!r[0]&&!r[1]&&!r[2])return Math.max(i[0],i[1],i[2]);var n=i.concat().sort(o),e=i.indexOf(n[0]);if(!r[e])return i[e];return i[i.indexOf(n[1])];default:throw new Error("Unexpected in Hunter#getMultipleChaseThreat")}},n.prototype.ve=function(t,r){var i=t.wb();if(1!==i.length)throw new Error("Unexpected: hunter #1: "+i.length);var n=i[0];if(n.pc(t.color))return!0;var o=this.gb.Ae(n.ac,n.bc,t.color),e=this.De(o,r)>0;return this.gb.Be(),u.debug,e},n.prototype.Ee=function(t){for(var r=1-t.color,i=t.xb,n=i.length-1;n>=0;n--)if(i[n].color===r&&1===i[n].group.ib)return!0;return!1},n.prototype.De=function(t,r){var i=t.group;if(i.ib<=1)return this.Pd(i);if(i.ib>2)return 0;if(this.Ee(t))return 0;var n=t.ic();if(2!==n.length&&(n=i.wb()),2!==n.length)throw new Error("Unexpected: hunter #2");var o=n[0],e=n[1];u.debug;var s=1-i.color;return r=(r||0)+1,Math.max(this.Ed(o.ac,o.bc,s,r),this.Ed(e.ac,e.bc,s,r))},n.prototype.Fe=function(t){return this.De(t,1)},n.prototype.Ge=function(t,r,i){return this.Ed(t,r,i,1)},n.prototype.Fd=function(t){return this.re.indexOf(t)!==-1}},{"./1g0/Move":8,"./1g0/constants":10,"./1g0/log":13,"./Heuristic":18,"util":4}],20:[function(t,r,i){"use strict";function n(t){e.call(this,t),this.He=this.yd("deadFactor",.23,.01,1),this.map=new Array(this.Ca+1);for(var r=1;r<=this.Ca;r++)for(var i=this.map[r]=new Array(this.Ca+1),n=1;n<=this.Ca;n++)i[n]=[0,0];t.Od=this.map}var o=t("./1g0/constants"),e=t("./Heuristic"),s=t("util").inherits,h=t("./1g0/log"),u=t("./1g0/Move"),f=u.fb,a=o.EMPTY,c=o.Sb,g=o.Tb,p=o.ALWAYS;s(n,e),r.exports=n,n.prototype.Ie=function(){for(var t=this.Ca;t>=1;t--)for(var r=this.map[t],i=this.Ca;i>=1;i--){var n=r[i];n[c]=n[g]=0}},n.prototype.Rd=function(){this.Ie();for(var t=[4,2,1],r=1;r<=this.Ca;r++)for(var i=1;i<=this.Ca;i++){var n=this.gb.mc(i,r),o=n.color;if(o!==a){var e=n.group.pb===p?this.He:1;this.map[r][i][o]+=t[0]*e;for(var s,u=n.xb,f=0;s=u[f],f<u.length;f++)if(s.color===a){this.map[s.bc][s.ac][o]+=t[1]*e;for(var c,g=s.xb,l=0;c=g[l],l<g.length;l++)c.color===a&&c!==n&&(this.map[c.bc][c.ac][o]+=t[2]*e)}}}h.debug&&this.ub()},n.prototype.ub=function(){function t(t){return("     "+t[r].toFixed(2).ta("0").ta("0").ta(".")).slice(-6)}if(h.debug){var r;for(r=c;r<=g;r++){f(r);for(var i=this.Ca;i>=1;i--)"%2d".format(i),this.map[i].slice(1,this.Ca+1).map(t).join("|");for(var n="   ",o=1;o<=this.Ca;o++)n+="     "+xCoord2str(o)+" "}}}},{"./1g0/Move":8,"./1g0/constants":10,"./1g0/log":13,"./Heuristic":18,"util":4}],21:[function(t,r,i){"use strict";function n(t){o.call(this,t),this.Dd=null}var o=t("./Heuristic"),e=t("util").inherits,s=t("./1g0/log"),h=t("./1g0/Move"),u=h.Zb;e(n,o),r.exports=n,n.prototype.ze=function(){this.Dd||(this.Dd=this.Yd.Cd("Hunter"))},n.prototype.Ed=function(t,r,i){if(this.Od[r][t][1-i]<2&&this.Od[r][t][i]<2&&0===this.gb.mc(t,r).xc(i))return 0;var n=this.gb.Ae(t,r,i),o=n.group,e=0;return s.debug&&u(t,r),1===o.ib?1===o.hb.length&&n.ic()[0].qc(this._d)?s.debug:(e=-this.Pd(o,!0),s.debug):2===o.ib&&(s.debug,this.Dd.Fe(n)&&(e=-this.Pd(o,!0),s.debug)),this.gb.Be(),e}},{"./1g0/Move":8,"./1g0/log":13,"./Heuristic":18,"util":4}],22:[function(t,r,i){"use strict";function n(t){h.call(this,t),this.Je=this.gb.Ud,this.Ke=this.Je.Da,this.ge=[new s(this.Ca,p),new s(this.Ca,p)],this.Le=new s(this.Ca,p),this.ee=new s(this.Ca,p),this.Me(),t.Zd=this,this.Vd=null}function o(t,r,i){switch(t){case y:return[r,1];case m:return[1,r];case w:return[r,i];case x:return[i,r]}}var e=t("./1g0/constants"),s=t("./1g0/Grid"),h=t("./Heuristic"),u=t("util").inherits,f=t("./1g0/log"),a=t("./1g0/Move"),c=t("./1g0/Stone"),g=a.fb,p=e.Ba,l=e.EMPTY,b=e.Sb,d=e.Tb,v=e.NEVER,y=e.Hc,m=e.Jc,w=e.Kc,x=e.Mc,C=e.$b,E=e._b,M=s.Sa,S=s.Ra,D=c.dc,O=c.ec;u(n,h),r.exports=n,n.prototype.Rd=function(){this.Ne()},n.prototype.Ne=function(){this.Sd(),this.Je.Ta(this.gb),this.Oe(b),this.Oe(d),this.Pe()},n.prototype.toString=function(){return"\n+1=white, -1=black, 0=no one\n"+this.ee.Va(function(t){return 0===t?"    0":"%+.1f".format(t)})+this.ee.Va(function(t){return M[2+2*t]})},n.prototype.$a=function(){return this.ee.Xa(function(t){return M[2+2*t]})},n.prototype.Qe=function(t){return this.ge[t]},n.prototype.Oe=function(t){var r=this.gb.Re(),i=this.ge[t];for(this.Se(i,t),this.Yd.Qd.Td(this.gb,i.Ta(this.gb),t),this.Te(),r=this.gb.Re()-r;r-- >0;)this.gb.Be()},n.prototype.Pe=function(){for(var t=this.ge[b].Da,r=this.ge[d].Da,i=this.ee.Da,n=this.Ca;n>=1;n--)for(var o=this.Ca;o>=1;o--)i[n][o]=(S[2+t[n][o]]+S[2+r[n][o]])/2;f.debug&&(this.Je,this.ge[b],this.ge[d])},n.prototype.Sd=function(){this.Vd=this.gb.Wd();for(var t in this.Vd){var r=this.Vd[~~t];r.ob=r.pb=v}},n.prototype.Te=function(){for(var t in this.Vd){for(var r=this.Vd[t],i=r;i.jb;)i=i.jb;i.lb||i.nb.Ue?r.pb++:i.nb.Ve&&r.ob++}},n.prototype.Se=function(t,r){this.We=null,this.Xe(this.Je,t.L(this.Je),r),f.debug,this.Ye(t.Da),f.debug,this.reduce(this.Le.L(t)),this.We=this.Le.Da,f.debug&&this.Le,this.Xe(this.Je,t.L(this.Je),r),f.debug,this.Ye(t.Da),f.debug},n.prototype.Xe=function(t,r,i){f.debug&&g(i);for(var n=t.Da,o=r.Da,e=this.Ca;e>=1;e--)for(var s=n[e],h=this.Ca;h>=1;h--)s[h]===l&&this.Ze(n,o,h,e,i,1-i)},n.prototype.reduce=function(t){for(var r=t.Da,i=1;i<=this.Ca;i++)for(var n=1;n<=this.Ca;n++)if(this.Ke[i][n]===l){var o=r[i][n];if(o!==l){var e=this.$e(r,n,i,1-o);0===e&&(r[i][n]=l)}}},n.prototype.Ze=function(t,r,i,n,o,e){switch(this.$e(t,i,n,o)){case 0:if(!this._e(t,i,n,o,e))return;break;case 4:return;case 3:if(0===this.$e(t,i,n,e))return}return this.af(r,i,n,o)},n.prototype.af=function(t,r,i,n,o){if(this.We){if(!o&&this.We[i][r]===l)return;if(this.gb.mc(r,i).pc(n))return;this.gb.Ae(r,i,n)}t[i][r]=n},n.prototype.$e=function(t,r,i,n){for(var o=0,e=C;e<=E;e++){var s=D[e];t[i+s[1]][r+s[0]]===n&&o++}return o},n.prototype._e=function(t,r,i,n,o){for(var e=C;e<=E;e++){var s=O[e];if(t[i+s[1]][r+s[0]]===n&&(t[i+s[1]][r]!==o&&t[i][r+s[0]]!==o))return!0}return!1},n.prototype.Me=function(){for(var t=[],r=C;r<=E;r++)for(var i=D[r][0],n=D[r][1],e=this.Ca-1;e>=2;e--){var s=o(r,e,this.Ca);t.push([s[0],s[1],i,n])}this.bf=t},n.prototype.Ye=function(t){for(var r,i,n,o,e,s,h=this.bf,u=h.length-1;u>=0;u--){var f=h[u],a=f[0],c=f[1];if(t[c][a]===l){var g=f[2],p=f[3],b=a+g,d=c+p,v=t[d][b];if(v===l){var y=b+g,m=d+p;if((v=t[m][y])===l){var w=y+g;if((v=t[m+p][w])===l);else{if(r=t[c-g][a-p],i=t[c+g][a+p],n=t[d-g][b-p],o=t[d+g][b+p],e=t[m-g][y-p],s=t[m+g][y+p],r===v&&n===v&&e===v)continue;if(i===v&&o===v&&s===v)continue;if(this.af(t,y,m,v,!0),r===v&&n===v)continue;if(i===v&&o===v)continue;if(this.af(t,b,d,v,!0),r===v||i===v)continue;this.af(t,a,c,v,!0)}}else{if(r=t[c-g][a-p],i=t[c+g][a+p],n=t[d-g][b-p],o=t[d+g][b+p],r!==1-v&&n===v)continue;if(i!==1-v&&o===v)continue;if(this.af(t,b,d,v,!0),r===v||i===v)continue;this.af(t,a,c,v,!0)}}else{if(r=t[c-g][a-p],i=t[c+g][a+p],r===v||i===v)continue;if(n=t[d-g][b-p],o=t[d+g][b+p],r===l&&i===l&&n===v&&o===v)continue;var x=t[c-2*g][a-2*p],C=t[c+2*g][a+2*p];if(x===v||C===v)continue;this.af(t,a,c,v,!0)}}}}},{"./1g0/Grid":6,"./1g0/Move":8,"./1g0/Stone":9,"./1g0/constants":10,"./1g0/log":13,"./Heuristic":18,"util":4}],23:[function(t,r,i){"use strict";function n(t){o.call(this,t),this.cf=this.yd("allyInfl",.03,.01,1),this.df=this.yd("enemyInfl",.13,.01,1),this.Ad=t.Cd("NoEasyPrisoner").Bd.Da}var o=t("./Heuristic"),e=t("util").inherits,s=t("./1g0/log"),h=t("./1g0/Move"),u=h.Zb;e(n,o),r.exports=n,n.prototype.Ed=function(t,r,i){var n=this.Od[r][t],o=n[this._d],e=n[i];if(0===o||0===e)return 0;if(this.Ad[r][t]<0)return 0;if(!this.oe(t,r,i))return 0;if(0===this.gb.mc(t,r).vc())return 0;var h=this.le(t,r,i),f=h+this.df*o-this.cf*e;return s.debug&&(u(t,r),"%.03f".format(f)),f}},{"./1g0/Move":8,"./1g0/log":13,"./Heuristic":18,"util":4}],24:[function(t,r,i){"use strict";function n(t){e.call(this,t),this.Dd=t.Cd("Hunter")}var o=t("./1g0/constants"),e=t("./Heuristic"),s=t("util").inherits,h=t("./1g0/log"),u=t("./1g0/Move"),f=u.fb,a=u.Zb,c=o.Bc,g=o.ALWAYS;s(n,e),r.exports=n,n.prototype.Rd=function(t,r){for(var i=this.Bd.Da,n=1;n<=this.Ca;n++)for(var o=1;o<=this.Ca;o++){var e=t[n][o];if(!(e<c)){var s=this.gb.mc(o,n),u=this.ef(o,n,s);if(0!==u){h.debug;var f=i[n][o]=u;r[n][o]+=f}}}},n.prototype.ef=function(t,r,i){for(var n,o=0,e=[],s=0,u=null,c=i.Mb(this.color),p=0;n=c[p],p<c.length;p++)if(1===n.ib){if(0===u)continue;if(e.push(n),null!==u)continue;o+=this.Pd(n,!0)}else if(2===n.ib){if(0===u)continue;if(e.push(n),null!==u)continue;h.debug&&f(this.color),u=this.Dd.Ge(t,r,this._d),u&&(o=u)}else n.pb<g&&(s+=n.ib-1);if(0===o)return 0;if((s+=i.vc())>2)return o;if(2===s)for(var l=i.ic(),b=e.length-1;b>=0;b--){n=e[b];for(var d=l.length-1;d>=0;d--)l[d].yc(n)&&s--}if(2===s){if(1===e.length&&i.nc()){h.debug&&(f(this.color),a(t,r));var v=this.pe(e[0],t,r);if(void 0!==v)return v?o:0}h.debug&&(f(this.color),a(t,r)),this.gb.Ae(t,r,this.color);var y=this.Dd.Fe(i);if(this.gb.Be(),!y)return o}return h.debug&&(f(this.color),a(t,r)),0}},{"./1g0/Move":8,"./1g0/constants":10,"./1g0/log":13,"./Heuristic":18,"util":4}],25:[function(t,r,i){"use strict";function n(t){s.call(this,t),this.ff=this.yd("eyeCloser",1,.01,1),this.gf=new e(this.Ca,c)}var o=t("./1g0/constants"),e=t("./1g0/Grid"),s=t("./Heuristic"),h=t("util").inherits,u=t("./1g0/log"),f=t("./1g0/Move"),a=f.fb,c=o.Ba,g=o.EMPTY,p=o.Bc,l=o.Ec,b=o.ALWAYS;h(n,s),r.exports=n,n.prototype.Rd=function(t,r){this.hf(t),s.prototype.Rd.call(this,t,r);var i=this.Zd.Vd;for(var n in i){var o=i[~~n];o.pb!==b&&o.ob!==b&&this.jf(r,o)}},n.prototype.hf=function(t){this.gf.init(g);for(var r=this.gf.Da,i=this.Ca;i>=1;i--)for(var n=this.Ca;n>=1;n--){var o=t[i][n];if(!(o<p)){var e=this.he(n,i);if(null!==e){for(var s=this.gb.mc(n,i),h=s.xb,u=!1,f=null,a=h.length-1;a>=0;a--){var c=h[a];if(r[c.bc][c.ac]===e){u=!0;break}c.color===e&&(f=c.group)}!u&&f&&(r[i][n]=e,f.nb.kf(s))}}}},n.prototype.jf=function(t,r){var i=[];if(r.nb.lf(i)===l){var n=i[0],o=i[1],e=this.Pd(r,this.color===r.color),s=r.nb.mf();e/=Math.max(1,s-1),this.Bd.Da[o][n]+=e,t[o][n]+=e,u.debug&&a(this.color)}},n.prototype.Ed=function(t,r,i){return this.ff*(this.nf(t,r,i)+this.nf(t,r,1-i))},n.prototype.nf=function(t,r,i){var n=this.gb.mc(t,r);if(this.fe(t,r,i)!==l)return 0;for(var o=null,e=!1,s=!1,h=null,f=0,c=this.gf.Da,p=n.xb.length-1;p>=0;p--){var d=n.xb[p];switch(d.color){case g:c[d.bc][d.ac]===i&&(o=d);break;case i:if(d.group.ob!==l)continue;s=!0,null!==h&&(f+=this.Pd(h,!0)),h=d.group;break;default:if(d.group.pb===b)continue;e=!0}}if(o&&e&&s){f+=this.Pd(h,!0);var v=h.nb.mf();return u.debug&&a(i),f/Math.max(1,v-1)}return 0}},{"./1g0/Grid":6,"./1g0/Move":8,"./1g0/constants":10,"./1g0/log":13,"./Heuristic":18,"util":4}],26:[function(t,r,i){"use strict";function n(t){e.call(this,t),this.xd=this.yd("infl",1,.5,3),this.pf=this.yd("border",10,0,20)}var o=t("./1g0/constants"),e=t("./Heuristic"),s=t("util").inherits,h=o.EMPTY;s(n,e),r.exports=n,n.prototype.Ed=function(t,r){var i=0,n=0,o=this.gb.mc(t,r),e=this.Od[r][t];i+=e[this._d],n+=e[this.color];for(var s=o.xb.length-1;s>=0;s--){var u=o.xb[s];if(u.color!==h)return 0;e=this.Od[u.bc][u.ac],i+=e[this._d],n+=e[this.color]}var f=1+this.xd*Math.max(i+n-3,0)*(this.Ca/9),a=this.oc(t),c=this.oc(r),g=[0,.2,.8,1,.95,.8],p=g.length-1;a>p&&(a=p),c>p&&(c=p);var l=g[a]*g[c]*this.pf,b=this.de(t,r,this.color);return b>0&&(b=0),b+l/f},n.prototype.oc=function(t){return Math.min(t-1,this.Ca-t)}},{"./1g0/constants":10,"./Heuristic":18,"util":4}],27:[function(t,r,i){"use strict";function n(t){this.qf=t.group.mb,this.rf=[t],t.sf=this,t.tf.length=0}function o(t){return"#"+t.group.mb}var e=t("../1g0/log");r.exports=n,n.prototype.toString=function(){return this.rf.map(o)},n.prototype.uf=function(t){if(t.tf.length=0,!t.sf)return e.debug&&this.toString(),this.rf.push(t),void(t.sf=this);if(t.sf.qf!==this.qf){e.debug&&(t.sf.toString(),this.toString());for(var r=t.sf.rf,i=r.length-1;i>=0;i--)this.rf.push(r[i]),r[i].sf=this}},n.prototype.remove=function(t){var r=this.rf.indexOf(t);if(r<0)throw new Error("Band.remove on wrong Band");this.rf.splice(r,1),t.sf=null,e.debug&&this.toString()},n.vf=function(t){if(1===t.length)throw new Error("add Band of 1");for(var r=null,i=0;i<t.length;i++)if(t[i].nb.sf){r=t[i].nb.sf;break}var o=0;for(r||(r=new n(t[o++].nb)),i=o;i<t.length;i++)r.uf(t[i].nb)}},{"../1g0/log":13}],28:[function(t,r,i){"use strict";function n(){this.version="droopy",this.mode=null,this.gb=null,this.zf=null,this.Af=[],this.Vd=null,this.Bf=[0,0],this.Cf=[0,0],this.Df=null}function o(t){return t>1&&t<2?t-1:t}function e(t){if(!(t[v]===t[y]||t[v]>=m&&t[y]>=m))return t[v]=o(t[v]),t[y]=o(t[y]),t[v]>t[y]?v:y}function s(t,r){for(var i=0;i<r.length;i++)for(var n=r[i],o=n.group.yb(),e=0;e<o.length;e++){var s=o[e].nb,h=n.Zf-s.Xf();if(c.debug&&(n.group.mb,n.Zf,n.Zf,s.group.mb),h>0){c.debug&&t.name,r[i]=null;break}if(0===h){c.debug&&(n.group,s.group),n.group.Xd=s.group,s.group.Xd=n.group,r[i]=null;break}}var u=0;for(i=0;i<r.length;i++)r[i]&&(r[i].$f(t.name+": liveliness="+r[i].Zf.toFixed(4)),u++);return u}function h(t,r){for(var i=0;i<r.length;i++)r[i].$f(t.name);return r.length}var u=t("../1g0/constants"),f=t("../1g0/Grid"),a=t("./GroupInfo"),c=t("../1g0/log"),g=t("../1g0/Move"),p=t("./Void"),l=t("./ZoneFiller"),b=g.fb,d=u.EMPTY,v=u.Sb,y=u.Tb,m=a.wf,w=a.xf,x=a.yf;r.exports=n,n.prototype.Ef=function(t){c.debug,this.Bf[v]=this.Bf[y]=0,this.Cf=t.Ff();var r=t.Ud.Ta(t);this.Gf("SCORE",t,r)&&(this.Hf(),this.If(),c.debug&&r.Va())},n.prototype.Jf=function(){return this.gb.Ud},n.prototype.Td=function(t,r,i){var n=void 0===i?"MOVE":"TERRITORY";this.Gf(n,t,r)&&(this.Hf(i),"TERRITORY"===n&&this.If())},n.prototype.$a=function(){return this.zf.$a()},n.prototype.ub=function(){for(var t,r="Grid:\n"+this.zf.Va()+"Voids:\n",i=this.Af,n=0;t=i[n],n<i.length;n++)r+=t.toString()+"\n";r+="Groups:\n";for(var o in this.Vd)r+=this.Vd[~~o].toString()+"\n";return this.Bf&&(r+="Score:"+this.Bf.map(function(t,r){return" player "+r+": "+t+" points"})),r},n.prototype.Gf=function(t,r,i){return this.mode=t,this.gb=r,this.zf=i,this.Df=new l(r,i),0!==r.Re()&&(this.Kf(),!0)},n.prototype.Lf=function(t,r){var i=this.Vd[t.mb];i||(t.nb&&t.nb.Qd===this?t.nb.Mf(t):t.nb=new a(t,this),i=this.Vd[t.mb]=t.nb),i.Nf.push(r)},n.prototype.Kf=function(){c.debug;var t=f.Ma;this.Vd={},this.Af.length=0;for(var r,i,n=[[],[]],o=new p(t++),e=1;e<=this.gb.Ca;e++)for(var s=1;s<=this.gb.Ca;s++){var h=this.Df.Of(s,e,d,o,n);if(0!==h){for(o.init(s,e,h,n),this.Af.push(o),i=n[v],r=i.length-1;r>=0;r--)this.Lf(i[r],o);for(i=n[y],r=i.length-1;r>=0;r--)this.Lf(i[r],o);n=[[],[]],o=new p(t++)}}},n.prototype.Hf=function(t){this.Pf(),this.Qf(),this.Rf(),this.Sf(t),this.Tf()},n.prototype.Pf=function(){for(var t in this.Vd)this.Vd[~~t].Uf()},n.prototype.Qf=function(){c.debug;for(var t=this.Af.length-1;t>=0;t--)this.Af[t].Vf()},n.prototype.Rf=function(){for(var t=[0,0];;){for(var r=!1,i=this.Af.length-1;i>=0;i--){var n=this.Af[i];if(void 0===n.color){t[v]=t[y]=0;for(var o=v;o<=y;o++)for(var s=n.Wf[o].length-1;s>=0;s--){var h=n.Wf[o][s].nb;t[o]+=h.Xf()+h.group.ib/1e4}var u=e(t);void 0!==u?(c.debug&&(b(u),t[u].toFixed(4),t[1-u].toFixed(4)),n.Yf(u),r=!0):c.debug&&t[0]}}if(!r)break}};var C={name:"parents",m:function(t){return t._f()}},E={name:"brothers",m:function(t){return t.ag()}},M={name:"singleEye",m:function(t,r){return t.bg(r)},cg:s},S={name:"final",m:function(t){return t.dg(2)}},D=[C,E,M],O=[C,E,M,S];n.prototype.eg=function(t,r){c.debug&&t.name;var i=0,n=0,o=[];for(var e in this.Vd){var s=this.Vd[~~e];if(!s.Ve&&!s.Ue)switch(n++,t.m(s,r)){case w:o.push(s);break;case x:i++}}return o.length&&(i+=t.cg?t.cg(t,o):h(t,o)),c.debug&&i&&t.name,i===n?0:0===i?n:-i},n.prototype.Sf=function(t){for(var r,i="SCORE"===this.mode?O:D,n=0;n<i.length;){if(0===(r=this.eg(i[n++],t)))return void this.Qf();r<0&&(n=0,this.Qf())}c.debug},n.prototype.Tf=function(){for(var t=[],r=this.Af.length-1;r>=0;r--){var i=this.Af[r];t[v]=t[y]=!1;for(var n=v;n<=y;n++)for(var o,e=i.Wf[n],s=0;o=e[s],s<e.length;s++)if(o.nb.Xf()>=2){t[n]=!0;break}t[v]&&t[y]&&i.fg()}},n.prototype.If=function(){this.gg(),this.hg()},n.prototype.gg=function(){for(var t in this.Vd){var r=this.Vd[~~t];if(r.Ue){for(var i=!1,n=r.ig.length-1;n>=0;n--)r.ig[n].nb.Ue||(i=!0);var o=r.group.color;if(!r.ig.length||i){var e=r.group.hb[0],s=this.Df.Of(e.ac,e.bc,o,f.Pa+o);this.Cf[o]+=s,this.Bf[1-o]+=s}else for(var h=r.Nf.length-1;h>=0;h--)r.Nf[h].Yf(o)}}},n.prototype.hg=function(){for(var t,r=this.Af.length-1;r>=0;r--){var i=this.Af[r],n=i.jg();n?(this.Bf[i.color]+=n,t=f.Qa+i.color):t=f.Oa,this.Df.Of(i.ac,i.bc,i,t)}}},{"../1g0/Grid":6,"../1g0/Move":8,"../1g0/constants":10,"../1g0/log":13,"./GroupInfo":29,"./Void":30,"./ZoneFiller":31}],29:[function(t,r,i){"use strict";function n(t,r){this.Qd=r,this.kg=[],this.Nf=[],this.tf=[],this.lg=[],this.ig=[],this.mg=[],this.Mf(t)}function o(t){return t>f?t>a?"ALWAYS":"SOMETIMES":"NEVER"}var e=t("./Band"),s=t("../1g0/constants"),h=t("../1g0/log"),u=s.EMPTY,f=s.NEVER,a=s.Ec,c=s.ALWAYS;r.exports=n;var g=n.xf=-1,p=n.yf=1,l=n.ng=0,b=n.wf=1e3;n.prototype.Mf=function(t){this.group=t,this.Hd=this.Zf=0,this.kg.length=0,this.Nf.length=0,this.tf.length=0,this.sf=null,this.Ve=this.Ue=!1,this.lg.length=0,this.ig.length=0,this.mg.length=0,this.Id=0},n.og=function(t){return"#"+t.group.mb},n.prototype.toString=function(){var t=this.sf?this.sf.toString():"";return this.group.toString()+" (isAlive:"+this.Ve+" isDead:"+this.Ue+", "+this.kg.length+" voids  brothers:["+t+"] parents:["+this.tf.map(n.og)+"] deadEnemies:["+this.lg.map(n.og)+"])"},n.prototype.pg=function(t,r){return h.debug,this.kg.push(t),this.Hd++,r&&r.length>1&&e.vf(r),this},n.prototype.qg=function(t){var r=this.kg.indexOf(t);if(r===-1)throw new Error("remove unknown void");h.debug,this.kg.splice(r,1),this.Hd--},n.prototype.rg=function(t){var r=this.sf;r&&r.remove(this);for(var i=t.length-1;i>=0;i--){var n=t[i].nb;n!==this&&(this.tf.indexOf(n)>=0||(h.debug,this.tf.push(n)))}},n.prototype.Uf=function(){for(var t=this.group,r=t.color,i=[],n=t.wb(),o=0,s=n.length-1;s>=0;s--){for(var h=n[s].xb,u=!1,f=h.length-1;f>=0;f--){var a=h[f];a.color===r&&a.group!==t&&(u=!0,i.indexOf(a.group)<0&&i.push(a.group))}u&&o++}o&&(this.Id=o,i.push(t),e.vf(i))},n.prototype.$f=function(t){this.Ue=!0;for(var r=this.ig=this.group.yb(),i=r.length-1;i>=0;i--)r[i].nb.lg.push(this);h.debug},n.prototype.Xf=function(t,r){if(this.Ve||this.Hd>=2)return b;for(var i,n=0,o=this.group.color,e=this.group.ib,s=this.Nf.length-1;s>=0;s--){var h=this.Nf[s],u=Math.min(e,h.sg);if(h.tg)h.tg===this&&(n+=u);else{var f=h.Wf[o];if(1===f.length)n+=u;else{var a=this.group.mb,c=a;for(i=f.length-1;i>=0;i--)c=Math.min(f[i].mb,c);a===c&&(n+=u)}}}if(n/=100,this.Ue)return 0+n;var g=0;if(!r){for(i=this.tf.length-1;i>=0;i--)g+=this.tf[i].Xf(t,!0);if(this.sf){var p=this.sf.rf;for(i=p.length-1;i>=0;i--)p[i]!==this&&(g+=p[i].Xf(t,!0))}}var l=t?this.ug():this.lg.length;return this.Hd+l+g+n},n.prototype.lf=function(t){if(this.Hd>1)return c;if(0===this.Hd)return f;if(this.kg[0].sg>6)return c;h.debug;for(var r=this.group,i=r.color,n=this.Qd.zf.Da,o=null,e=0,s=0,g=0,p=r.wb(),l=p.length,b=0;b<p.length;b++){var d=p[b],v=n[d.bc][d.ac];if(v.tg&&v.color===i){for(var y=0,m=0,w=0,x=d.xb.length-1;x>=0;x--){var C=d.xb[x];switch(C.color){case u:b<l&&!C.yc(r)&&p.indexOf(C)<0&&p.push(C),w++;break;case i:m++;break;default:C.group.ib>1?y++:w++}}if(y){if(w+(m?1:0)<2)continue}else if(w<2)continue;if(h.debug,!d.kc()||!g){if(g++,o){if(y<=s)continue;if(w+y<e)continue;o.kc()&&g--}o=d,s=y,e=w}}}return h.debug,o?g>1?c:(t[0]=o.ac,t[1]=o.bc,a):f},n.prototype.ug=function(){for(var t=this.lg.length,r=t-1;r>=0;r--)for(var i=this.lg[r].Nf,n=i.length-1;n>=0;n--)if(i[n].tg===this){t--;break}return t},n.prototype._f=function(){if(!this.tf.length)return l;for(var t=!0,r=this.tf.length-1;r>=0;r--){var i=this.tf[r];if(i.Ve)return h.debug,this.Ve=!0,p;i.Ue||(t=!1)}return t?g:l},n.prototype.ag=function(){if(!this.sf)return l;for(var t=this.sf.rf,r=0,i=!1,n=t.length-1;n>=0;n--){var o=t[n];o!==this&&(i||o.Ve?i=o.Ve=!0:(r+=o.Hd)>=2&&(i=o.Ve=!0))}return i?(h.debug,this.Ve=!0,p):l},n.prototype.vg=function(){return!this.sf&&!this.tf.length&&(this.Nf[0].color!==this.group.color&&!(this.group.hb.length>=6))},n.prototype.bg=function(t){if(this.Hd>=2)return this.Ve=!0,h.debug,p;if(this.vg())return g;var r=[],i=this.lf(r);if(i===a){if(void 0===t)return l;t!==this.group.color&&(i=f)}return i===f?this.sf||this.tf.length||this.lg.length?l:(this.Zf=this.Xf(),g):(this.Ve=!0,h.debug&&o(i),p)},n.prototype.dg=function(t){var r=this.Zf=this.Xf(!0);return r>=2?(this.Ve=!0,h.debug,p):r<t?(this.Zf=r,g):l},n.prototype.wg=function(t){var r,i=t.call(this);if(this.sf){var n=this.sf.rf;for(r=n.length-1;r>=0;r--)n[r]!==this&&(i+=t.call(n[r]))}else for(r=this.tf.length-1;r>=0;r--)i+=t.call(this.tf[r]);return i},n.prototype.kf=function(t){this.mg.push(t)},n.prototype.xg=function(){return this.mg.length},n.prototype.mf=function(){return this.wg(this.xg)}},{"../1g0/constants":10,"../1g0/log":13,"./Band":27}],30:[function(t,r,i){"use strict";function n(t){this.code=t,this.ac=0,this.bc=0,this.sg=0,this.Wf=null,this.yg=void 0,this.color=void 0,this.tg=void 0,this.zg=!1}function o(t){return t?v[t]:v[0]}function e(t){for(var r=t.length-1;r>=0;r--)if(!t[r].nb.Ue)return!1;return!0}function s(t){return"#"+t.mb}var h=t("../1g0/constants"),u=t("../1g0/log"),f=t("../1g0/Move"),a=f.fb,c=f.Zb,g=h.Sb,p=h.Tb;r.exports=n,n.prototype.init=function(t,r,i,n){this.ac=t,this.bc=r,this.sg=i,this.Wf=n};var l=n.Ag=1,b=n.Bg=2,d=n.Cg=3,v=["void","eye","fake-eye","dame"];n.prototype.Vf=function(){var t=this.Wf[g],r=this.Wf[p],i=e(t),n=e(r);if(i&&n)return void(this.yg&&!this.zg&&this.Dg());if(this.yg!==l&&(i||n)){var o=i?p:g;if(!this.Eg(o))return t.length&&r.length?void this.Yf(o):this.Fg(o)}},n.prototype.Eg=function(t){if(this.yg&&this.yg!==b)return!1;if(this.sg>1)return!1;var r=this.Wf[t];if(r.length<2)return!1;for(var i=!1,n=r.length-1;n>=0;n--){var o=r[n].nb;1!==o.Id||o.lg.length||0!==o.kg.length||(u.debug,i=!0,o.rg(r))}return!!i&&(void 0===this.yg&&(this.tg&&(this.tg.qg(this),this.tg=null),this.yg=b,this.color=t),!0)},n.prototype.Fg=function(t){u.debug&&a(t),this.yg=l,this.color=t;var r=this.Wf[t];this.tg=r[0].nb.pg(this,r)},n.prototype.Yf=function(t){if(t!==this.color){u.debug&&a(t),this.tg&&(this.tg.qg(this),this.tg=null),this.color=t;for(var r=this.Wf[1-t],i=r.length-1;i>=0;i--)for(var n=r[i].nb.Nf,o=n.length-1;o>=0;o--)if(n[o]!==this&&n[o].color===t)return;var e=this.Wf[t];this.tg=e[0].nb.pg(this,e)}},n.prototype.fg=function(){u.debug,this.tg&&(this.tg.qg(this),this.tg=null),this.yg=d,this.color=void 0},n.prototype.Dg=function(){u.debug;var t=this.color;if(void 0===t)throw new Error("dead group's eye of undefined owner");this.zg=!0,this.tg&&(this.tg.qg(this),this.tg=null),this.yg=l,this.color=1-t;for(var r=this.Wf[t],i=r.length-1;i>=0;i--){var n=r[i].nb;if(n.ig.length)return void(this.tg=n.ig[0].nb.pg(this))}},n.prototype.jg=function(){return void 0===this.color||this.yg===b?0:this.sg},n.prototype.Gg=function(t){var r=t.group;return this.Wf[r.color].indexOf(r)>-1},n.prototype.toString=function(){return o(this.yg)+"-"+c(this.ac,this.bc)+", vcount:"+this.sg+", black:"+(this.Wf[g].map(s).toString()||"-")+", white:"+(this.Wf[p].map(s).toString()||"-")}},{"../1g0/Move":8,"../1g0/constants":10,"../1g0/log":13}],31:[function(t,r,i){"use strict";function n(t,r){this.gb=t,this.Da=r.Da,this.Wf=null,this.Hg=this.Wf=null}var o=t("../1g0/constants"),e=o.Ba;r.exports=n,n.prototype.Of=function(t,r,i,n,o){if(this.Da[r][t]!==i)return 0;var e=0,s=this.Da;this.Hg=i,this.Wf=o;for(var h,u=[[t,r,r]];h=u.pop();){var f=h[0],a=h[1],c=h[2];if(s[a][f]===i){for(;this.Ig(f,a-1);)a--;for(;this.Ig(f,c+1);)c++;e+=c-a+1;for(var g=f-1;g<=f+1;g+=2){for(var p=null,l=a;l<=c;l++)g<f&&(s[l][f]=n),this.Ig(g,l)?p||(p=l):p&&(u.push([g,p,l-1]),p=null);p&&u.push([g,p,c])}}}return e},n.prototype.Ig=function(t,r){var i=this.Da[r][t];if(i===e)return!1;if(i===this.Hg)return!0;if(!this.Wf)return!1;if("number"!=typeof i)return!1;var n=this.gb.mc(t,r).group;if(!n)throw new Error("Unexpected: ZoneFiller replacing a group");var o=this.Wf[i];return o.indexOf(n)===-1&&o.push(n),!1}},{"../1g0/constants":10}],32:[function(t,r,i){"use strict";function n(t,r,i){this.name="Droopy",this.Jg=t,this.gb=t.gb,this.ce=i||new u,this.Ca=this.gb.Ca,this.Kg=new f(this.Ca,p),this.Bd=new f(this.Ca,0,p),this.Nd=this.yd("smallerMove",.03,.01,.1),this.Lg(),this.setColor(r),this.Mg()}function o(t,r){return r[1]-t[1]}var e=t("./AllHeuristics"),s=t("./boan/BoardAnalyser"),h=t("./1g0/constants"),u=t("./1g0/Genes"),f=t("./1g0/Grid"),a=t("./1g0/Move"),c=t("./boan/ZoneFiller"),g=a.Zb,p=h.Ba,l=h.Bc,b=h.Dc,d=h.Cc;r.exports=n,n.Ng="Droopy",n.Og="0.1",n.Pg=s,n.Qg=c,n.prototype.Lg=function(){this.Rg=[];for(var t=e(),r=0;r<t.length;r++){var i=new t[r](this);this.Rg.push(i)}},n.prototype.setColor=function(t){this.color=t;for(var r=0;r<this.Rg.length;r++)this.Rg[r].ae(t)},n.prototype.Mg=function(t){t&&(this.ce=t),this.Sg=0,this.Tg=this.Ug=this.Vg=0,this.Wg=this.Xg=-1,this.be=null},n.prototype.Cd=function(t){for(var r=0;r<this.Rg.length;r++){var i=this.Rg[r];if(i.name===t)return i}return null},n.prototype.yd=function(t,r,i,n){return void 0===i&&(i=null),void 0===n&&(n=null),this.ce.get(this.name+"-"+t,r,i,n)},n.prototype.Yg=function(t,r,i){this.Tg=i,this.Ug=t,this.Vg=r},n.prototype.Zg=function(t,r,i){if(i>this.Tg)this.$g=1,this.Yg(t,r,i);else{if(this.$g++,Math.random()*this.$g>=1)return;this.Yg(t,r,i)}},n.prototype._g=function(){this.Sg++;var t=this.Kg.Da,r=this.Bd.Da;return this.ah(),this.bh(t,r),this.dh(t,r),this.eh(t,r)},n.prototype.ah=function(){this.Tg=this.Nd-.001,this.Ug=-1},n.prototype.bh=function(t,r){for(var i=1;i<=this.Ca;i++)for(var n=1;n<=this.Ca;n++)this.gb.fh(n,i,this.color)?(t[i][n]=l,r[i][n]=0):t[i][n]=b;this.Wg!==-1&&(t[this.Xg][this.Wg]=d)},n.prototype.dh=function(t,r){for(var i=0;i<this.Rg.length;i++){var n=this.Rg[i];n.ze&&n.ze(),n.Rd(t,r)}},n.prototype.eh=function(t,r){for(var i=1;i<=this.Ca;i++)for(var n=1;n<=this.Ca;n++)t[i][n]<l||r[i][n]<this.Tg||this.Zg(n,i,r[i][n]);return this.Tg<this.Nd?"pass":g(this.Ug,this.Vg)},n.prototype.gh=function(){return this.Zd.Rd(),this.Zd.ee.Da},n.prototype.hh=function(t,r){this.Wg=t,this.Xg=r,this._g(),this.Wg=-1},n.prototype.ih=function(t,r){for(var i={},n=0;n<this.Rg.length;n++){var o=this.Rg[n],e=o.Bd.Da[r][t];e&&(i[o.name]=e)}return i},n.prototype.jh=function(t,r){return this.hh(t,r),this.Bd.Da[r][t]},n.prototype.kh=function(t,r,i){return this.hh(t,r),this.Cd(i).Bd.Da[r][t]},n.prototype.lh=function(t){this.be=t},n.prototype.mh=function(t,r){var i=a.Yb(t);if(!i)return"";var n=i[0],e=i[1];r&&this.hh(n,e);var s=this.ih(n,e),h=this.Bd.Da[e][n],u=[];for(var f in s)0!==s[f]&&u.push([f,s[f]]);u.sort(o);for(var c=t+" ("+h.toFixed(2)+")\n",g=0;g<u.length;g++)c+="- "+u[g][0]+": "+u[g][1].toFixed(2)+"\n";return c}},{"./1g0/Genes":5,"./1g0/Grid":6,"./1g0/Move":8,"./1g0/constants":10,"./AllHeuristics":15,"./boan/BoardAnalyser":28,"./boan/ZoneFiller":31}]},{},[32])(32)});